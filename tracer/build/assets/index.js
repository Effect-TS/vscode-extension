(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var N0={exports:{}},Eh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bA;function o5(){if(bA)return Eh;bA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,c){var l=null;if(c!==void 0&&(l=""+c),a.key!==void 0&&(l=""+a.key),"key"in a){c={};for(var d in a)d!=="key"&&(c[d]=a[d])}else c=a;return a=c.ref,{$$typeof:t,type:s,key:l,ref:a!==void 0?a:null,props:c}}return Eh.Fragment=e,Eh.jsx=n,Eh.jsxs=n,Eh}var _A;function c5(){return _A||(_A=1,N0.exports=o5()),N0.exports}var Qs=c5(),x0={exports:{}},Ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SA;function u5(){if(SA)return Ft;SA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,N={};function C(O,Y,ot){this.props=O,this.context=Y,this.refs=N,this.updater=ot||v}C.prototype.isReactComponent={},C.prototype.setState=function(O,Y){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Y,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function x(){}x.prototype=C.prototype;function q(O,Y,ot){this.props=O,this.context=Y,this.refs=N,this.updater=ot||v}var A=q.prototype=new x;A.constructor=q,E(A,C.prototype),A.isPureReactComponent=!0;var P=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function K(O,Y,ot,it,pt,ne){return ot=ne.ref,{$$typeof:t,type:O,key:Y,ref:ot!==void 0?ot:null,props:ne}}function B(O,Y){return K(O.type,Y,void 0,void 0,void 0,O.props)}function et(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function tt(O){var Y={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ot){return Y[ot]})}var Z=/\/+/g;function rt(O,Y){return typeof O=="object"&&O!==null&&O.key!=null?tt(""+O.key):Y.toString(36)}function vt(){}function ut(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(vt,vt):(O.status="pending",O.then(function(Y){O.status==="pending"&&(O.status="fulfilled",O.value=Y)},function(Y){O.status==="pending"&&(O.status="rejected",O.reason=Y)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Et(O,Y,ot,it,pt){var ne=typeof O;(ne==="undefined"||ne==="boolean")&&(O=null);var Tt=!1;if(O===null)Tt=!0;else switch(ne){case"bigint":case"string":case"number":Tt=!0;break;case"object":switch(O.$$typeof){case t:case e:Tt=!0;break;case y:return Tt=O._init,Et(Tt(O._payload),Y,ot,it,pt)}}if(Tt)return pt=pt(O),Tt=it===""?"."+rt(O,0):it,P(pt)?(ot="",Tt!=null&&(ot=Tt.replace(Z,"$&/")+"/"),Et(pt,Y,ot,"",function(ua){return ua})):pt!=null&&(et(pt)&&(pt=B(pt,ot+(pt.key==null||O&&O.key===pt.key?"":(""+pt.key).replace(Z,"$&/")+"/")+Tt)),Y.push(pt)),1;Tt=0;var Mr=it===""?".":it+":";if(P(O))for(var $e=0;$e<O.length;$e++)it=O[$e],ne=Mr+rt(it,$e),Tt+=Et(it,Y,ot,ne,pt);else if($e=S(O),typeof $e=="function")for(O=$e.call(O),$e=0;!(it=O.next()).done;)it=it.value,ne=Mr+rt(it,$e++),Tt+=Et(it,Y,ot,ne,pt);else if(ne==="object"){if(typeof O.then=="function")return Et(ut(O),Y,ot,it,pt);throw Y=String(O),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Tt}function z(O,Y,ot){if(O==null)return O;var it=[],pt=0;return Et(O,it,"","",function(ne){return Y.call(ot,ne,pt++)}),it}function G(O){if(O._status===-1){var Y=O._result;Y=Y(),Y.then(function(ot){(O._status===0||O._status===-1)&&(O._status=1,O._result=ot)},function(ot){(O._status===0||O._status===-1)&&(O._status=2,O._result=ot)}),O._status===-1&&(O._status=0,O._result=Y)}if(O._status===1)return O._result.default;throw O._result}var st=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Nt(){}return Ft.Children={map:z,forEach:function(O,Y,ot){z(O,function(){Y.apply(this,arguments)},ot)},count:function(O){var Y=0;return z(O,function(){Y++}),Y},toArray:function(O){return z(O,function(Y){return Y})||[]},only:function(O){if(!et(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ft.Component=C,Ft.Fragment=n,Ft.Profiler=a,Ft.PureComponent=q,Ft.StrictMode=s,Ft.Suspense=m,Ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Ft.__COMPILER_RUNTIME={__proto__:null,c:function(O){return k.H.useMemoCache(O)}},Ft.cache=function(O){return function(){return O.apply(null,arguments)}},Ft.cloneElement=function(O,Y,ot){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var it=E({},O.props),pt=O.key,ne=void 0;if(Y!=null)for(Tt in Y.ref!==void 0&&(ne=void 0),Y.key!==void 0&&(pt=""+Y.key),Y)!U.call(Y,Tt)||Tt==="key"||Tt==="__self"||Tt==="__source"||Tt==="ref"&&Y.ref===void 0||(it[Tt]=Y[Tt]);var Tt=arguments.length-2;if(Tt===1)it.children=ot;else if(1<Tt){for(var Mr=Array(Tt),$e=0;$e<Tt;$e++)Mr[$e]=arguments[$e+2];it.children=Mr}return K(O.type,pt,void 0,void 0,ne,it)},Ft.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Ft.createElement=function(O,Y,ot){var it,pt={},ne=null;if(Y!=null)for(it in Y.key!==void 0&&(ne=""+Y.key),Y)U.call(Y,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(pt[it]=Y[it]);var Tt=arguments.length-2;if(Tt===1)pt.children=ot;else if(1<Tt){for(var Mr=Array(Tt),$e=0;$e<Tt;$e++)Mr[$e]=arguments[$e+2];pt.children=Mr}if(O&&O.defaultProps)for(it in Tt=O.defaultProps,Tt)pt[it]===void 0&&(pt[it]=Tt[it]);return K(O,ne,void 0,void 0,null,pt)},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(O){return{$$typeof:d,render:O}},Ft.isValidElement=et,Ft.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:G}},Ft.memo=function(O,Y){return{$$typeof:p,type:O,compare:Y===void 0?null:Y}},Ft.startTransition=function(O){var Y=k.T,ot={};k.T=ot;try{var it=O(),pt=k.S;pt!==null&&pt(ot,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(Nt,st)}catch(ne){st(ne)}finally{k.T=Y}},Ft.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Ft.use=function(O){return k.H.use(O)},Ft.useActionState=function(O,Y,ot){return k.H.useActionState(O,Y,ot)},Ft.useCallback=function(O,Y){return k.H.useCallback(O,Y)},Ft.useContext=function(O){return k.H.useContext(O)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(O,Y){return k.H.useDeferredValue(O,Y)},Ft.useEffect=function(O,Y,ot){var it=k.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return it.useEffect(O,Y)},Ft.useId=function(){return k.H.useId()},Ft.useImperativeHandle=function(O,Y,ot){return k.H.useImperativeHandle(O,Y,ot)},Ft.useInsertionEffect=function(O,Y){return k.H.useInsertionEffect(O,Y)},Ft.useLayoutEffect=function(O,Y){return k.H.useLayoutEffect(O,Y)},Ft.useMemo=function(O,Y){return k.H.useMemo(O,Y)},Ft.useOptimistic=function(O,Y){return k.H.useOptimistic(O,Y)},Ft.useReducer=function(O,Y,ot){return k.H.useReducer(O,Y,ot)},Ft.useRef=function(O){return k.H.useRef(O)},Ft.useState=function(O){return k.H.useState(O)},Ft.useSyncExternalStore=function(O,Y,ot){return k.H.useSyncExternalStore(O,Y,ot)},Ft.useTransition=function(){return k.H.useTransition()},Ft.version="19.1.0",Ft}var vA;function Jw(){return vA||(vA=1,x0.exports=u5()),x0.exports}var Xe=Jw(),I0={exports:{}},Th={},F0={exports:{}},D0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $A;function l5(){return $A||($A=1,function(t){function e(z,G){var st=z.length;z.push(G);t:for(;0<st;){var Nt=st-1>>>1,O=z[Nt];if(0<a(O,G))z[Nt]=G,z[st]=O,st=Nt;else break t}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var G=z[0],st=z.pop();if(st!==G){z[0]=st;t:for(var Nt=0,O=z.length,Y=O>>>1;Nt<Y;){var ot=2*(Nt+1)-1,it=z[ot],pt=ot+1,ne=z[pt];if(0>a(it,st))pt<O&&0>a(ne,it)?(z[Nt]=ne,z[pt]=st,Nt=pt):(z[Nt]=it,z[ot]=st,Nt=ot);else if(pt<O&&0>a(ne,st))z[Nt]=ne,z[pt]=st,Nt=pt;else break t}}return G}function a(z,G){var st=z.sortIndex-G.sortIndex;return st!==0?st:z.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var m=[],p=[],y=1,b=null,S=3,v=!1,E=!1,N=!1,C=!1,x=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function P(z){for(var G=n(p);G!==null;){if(G.callback===null)s(p);else if(G.startTime<=z)s(p),G.sortIndex=G.expirationTime,e(m,G);else break;G=n(p)}}function k(z){if(N=!1,P(z),!E)if(n(m)!==null)E=!0,U||(U=!0,rt());else{var G=n(p);G!==null&&Et(k,G.startTime-z)}}var U=!1,K=-1,B=5,et=-1;function tt(){return C?!0:!(t.unstable_now()-et<B)}function Z(){if(C=!1,U){var z=t.unstable_now();et=z;var G=!0;try{t:{E=!1,N&&(N=!1,q(K),K=-1),v=!0;var st=S;try{e:{for(P(z),b=n(m);b!==null&&!(b.expirationTime>z&&tt());){var Nt=b.callback;if(typeof Nt=="function"){b.callback=null,S=b.priorityLevel;var O=Nt(b.expirationTime<=z);if(z=t.unstable_now(),typeof O=="function"){b.callback=O,P(z),G=!0;break e}b===n(m)&&s(m),P(z)}else s(m);b=n(m)}if(b!==null)G=!0;else{var Y=n(p);Y!==null&&Et(k,Y.startTime-z),G=!1}}break t}finally{b=null,S=st,v=!1}G=void 0}}finally{G?rt():U=!1}}}var rt;if(typeof A=="function")rt=function(){A(Z)};else if(typeof MessageChannel<"u"){var vt=new MessageChannel,ut=vt.port2;vt.port1.onmessage=Z,rt=function(){ut.postMessage(null)}}else rt=function(){x(Z,0)};function Et(z,G){K=x(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(z){switch(S){case 1:case 2:case 3:var G=3;break;default:G=S}var st=S;S=G;try{return z()}finally{S=st}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var st=S;S=z;try{return G()}finally{S=st}},t.unstable_scheduleCallback=function(z,G,st){var Nt=t.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?Nt+st:Nt):st=Nt,z){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=st+O,z={id:y++,callback:G,priorityLevel:z,startTime:st,expirationTime:O,sortIndex:-1},st>Nt?(z.sortIndex=st,e(p,z),n(m)===null&&z===n(p)&&(N?(q(K),K=-1):N=!0,Et(k,st-Nt))):(z.sortIndex=O,e(m,z),E||v||(E=!0,U||(U=!0,rt()))),z},t.unstable_shouldYield=tt,t.unstable_wrapCallback=function(z){var G=S;return function(){var st=S;S=G;try{return z.apply(this,arguments)}finally{S=st}}}}(D0)),D0}var wA;function $I(){return wA||(wA=1,F0.exports=l5()),F0.exports}var z0={exports:{}},Gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EA;function f5(){if(EA)return Gn;EA=1;var t=Jw();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(m,p,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:p,implementation:y}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Gn.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(m,p,null,y)},Gn.flushSync=function(m){var p=l.T,y=s.p;try{if(l.T=null,s.p=2,m)return m()}finally{l.T=p,s.p=y,s.d.f()}},Gn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},Gn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Gn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,b=d(y,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,v=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:v}):y==="script"&&s.d.X(m,{crossOrigin:b,integrity:S,fetchPriority:v,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Gn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},Gn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,b=d(y,p.crossOrigin);s.d.L(m,y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Gn.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=d(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},Gn.requestFormReset=function(m){s.d.r(m)},Gn.unstable_batchedUpdates=function(m,p){return m(p)},Gn.useFormState=function(m,p,y){return l.H.useFormState(m,p,y)},Gn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Gn.version="19.1.0",Gn}var TA;function h5(){if(TA)return z0.exports;TA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),z0.exports=f5(),z0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OA;function d5(){if(OA)return Th;OA=1;var t=$I(),e=Jw(),n=h5();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function c(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function l(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(c(r)!==r)throw Error(s(188))}function m(r){var i=r.alternate;if(!i){if(i=c(r),i===null)throw Error(s(188));return i!==r?null:r}for(var o=r,u=i;;){var f=o.return;if(f===null)break;var h=f.alternate;if(h===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===o)return d(f),r;if(h===u)return d(f),i;h=h.sibling}throw Error(s(188))}if(o.return!==u.return)o=f,u=h;else{for(var g=!1,_=f.child;_;){if(_===o){g=!0,o=f,u=h;break}if(_===u){g=!0,u=f,o=h;break}_=_.sibling}if(!g){for(_=h.child;_;){if(_===o){g=!0,o=h,u=f;break}if(_===u){g=!0,u=h,o=f;break}_=_.sibling}if(!g)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:i}function p(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=p(r),i!==null)return i;r=r.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),A=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),et=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function rt(r){return r===null||typeof r!="object"?null:(r=Z&&r[Z]||r["@@iterator"],typeof r=="function"?r:null)}var vt=Symbol.for("react.client.reference");function ut(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===vt?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case E:return"Fragment";case C:return"Profiler";case N:return"StrictMode";case k:return"Suspense";case U:return"SuspenseList";case et:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case v:return"Portal";case A:return(r.displayName||"Context")+".Provider";case q:return(r._context.displayName||"Context")+".Consumer";case P:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case K:return i=r.displayName||null,i!==null?i:ut(r.type)||"Memo";case B:i=r._payload,r=r._init;try{return ut(r(i))}catch{}}return null}var Et=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st={pending:!1,data:null,method:null,action:null},Nt=[],O=-1;function Y(r){return{current:r}}function ot(r){0>O||(r.current=Nt[O],Nt[O]=null,O--)}function it(r,i){O++,Nt[O]=r.current,r.current=i}var pt=Y(null),ne=Y(null),Tt=Y(null),Mr=Y(null);function $e(r,i){switch(it(Tt,i),it(ne,r),it(pt,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?V2(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=V2(i),r=Y2(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ot(pt),it(pt,r)}function ua(){ot(pt),ot(ne),ot(Tt)}function yS(r){r.memoizedState!==null&&it(Mr,r);var i=pt.current,o=Y2(i,r.type);i!==o&&(it(ne,r),it(pt,o))}function Jm(r){ne.current===r&&(ot(pt),ot(ne)),Mr.current===r&&(ot(Mr),_h._currentValue=st)}var bS=Object.prototype.hasOwnProperty,_S=t.unstable_scheduleCallback,SS=t.unstable_cancelCallback,Lq=t.unstable_shouldYield,jq=t.unstable_requestPaint,js=t.unstable_now,Pq=t.unstable_getCurrentPriorityLevel,OR=t.unstable_ImmediatePriority,RR=t.unstable_UserBlockingPriority,Qm=t.unstable_NormalPriority,qq=t.unstable_LowPriority,kR=t.unstable_IdlePriority,Bq=t.log,Kq=t.unstable_setDisableYieldValue,Rf=null,Ar=null;function la(r){if(typeof Bq=="function"&&Kq(r),Ar&&typeof Ar.setStrictMode=="function")try{Ar.setStrictMode(Rf,r)}catch{}}var Cr=Math.clz32?Math.clz32:Yq,Hq=Math.log,Vq=Math.LN2;function Yq(r){return r>>>=0,r===0?32:31-(Hq(r)/Vq|0)|0}var Xm=256,Zm=4194304;function uo(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Wm(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,h=r.suspendedLanes,g=r.pingedLanes;r=r.warmLanes;var _=u&134217727;return _!==0?(u=_&~h,u!==0?f=uo(u):(g&=_,g!==0?f=uo(g):o||(o=_&~r,o!==0&&(f=uo(o))))):(_=u&~h,_!==0?f=uo(_):g!==0?f=uo(g):o||(o=u&~r,o!==0&&(f=uo(o)))),f===0?0:i!==0&&i!==f&&(i&h)===0&&(h=f&-f,o=i&-i,h>=o||h===32&&(o&4194048)!==0)?i:f}function kf(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Gq(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MR(){var r=Xm;return Xm<<=1,(Xm&4194048)===0&&(Xm=256),r}function AR(){var r=Zm;return Zm<<=1,(Zm&62914560)===0&&(Zm=4194304),r}function vS(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Mf(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Jq(r,i,o,u,f,h){var g=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var _=r.entanglements,T=r.expirationTimes,F=r.hiddenUpdates;for(o=g&~o;0<o;){var H=31-Cr(o),J=1<<H;_[H]=0,T[H]=-1;var L=F[H];if(L!==null)for(F[H]=null,H=0;H<L.length;H++){var j=L[H];j!==null&&(j.lane&=-536870913)}o&=~J}u!==0&&CR(r,u,0),h!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=h&~(g&~i))}function CR(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Cr(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function NR(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Cr(o),f=1<<u;f&i|r[u]&i&&(r[u]|=i),o&=~f}}function $S(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function wS(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function xR(){var r=G.p;return r!==0?r:(r=window.event,r===void 0?32:hA(r.type))}function Qq(r,i){var o=G.p;try{return G.p=r,i()}finally{G.p=o}}var fa=Math.random().toString(36).slice(2),Vn="__reactFiber$"+fa,dr="__reactProps$"+fa,Uc="__reactContainer$"+fa,ES="__reactEvents$"+fa,Xq="__reactListeners$"+fa,Zq="__reactHandles$"+fa,IR="__reactResources$"+fa,Af="__reactMarker$"+fa;function TS(r){delete r[Vn],delete r[dr],delete r[ES],delete r[Xq],delete r[Zq]}function Lc(r){var i=r[Vn];if(i)return i;for(var o=r.parentNode;o;){if(i=o[Uc]||o[Vn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=X2(r);r!==null;){if(o=r[Vn])return o;r=X2(r)}return i}r=o,o=r.parentNode}return null}function jc(r){if(r=r[Vn]||r[Uc]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function Cf(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function Pc(r){var i=r[IR];return i||(i=r[IR]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function bn(r){r[Af]=!0}var FR=new Set,DR={};function lo(r,i){qc(r,i),qc(r+"Capture",i)}function qc(r,i){for(DR[r]=i,r=0;r<i.length;r++)FR.add(i[r])}var Wq=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zR={},UR={};function tB(r){return bS.call(UR,r)?!0:bS.call(zR,r)?!1:Wq.test(r)?UR[r]=!0:(zR[r]=!0,!1)}function tp(r,i,o){if(tB(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function ep(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function yi(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}var OS,LR;function Bc(r){if(OS===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);OS=i&&i[1]||"",LR=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+OS+r+LR}var RS=!1;function kS(r,i){if(!r||RS)return"";RS=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(j){var L=j}Reflect.construct(r,[],J)}else{try{J.call()}catch(j){L=j}r.call(J.prototype)}}else{try{throw Error()}catch(j){L=j}(J=r())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(j){if(j&&L&&typeof j.stack=="string")return[j.stack,L.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=u.DetermineComponentFrameRoot(),g=h[0],_=h[1];if(g&&_){var T=g.split(`
`),F=_.split(`
`);for(f=u=0;u<T.length&&!T[u].includes("DetermineComponentFrameRoot");)u++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(u===T.length||f===F.length)for(u=T.length-1,f=F.length-1;1<=u&&0<=f&&T[u]!==F[f];)f--;for(;1<=u&&0<=f;u--,f--)if(T[u]!==F[f]){if(u!==1||f!==1)do if(u--,f--,0>f||T[u]!==F[f]){var H=`
`+T[u].replace(" at new "," at ");return r.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",r.displayName)),H}while(1<=u&&0<=f);break}}}finally{RS=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Bc(o):""}function eB(r){switch(r.tag){case 26:case 27:case 5:return Bc(r.type);case 16:return Bc("Lazy");case 13:return Bc("Suspense");case 19:return Bc("SuspenseList");case 0:case 15:return kS(r.type,!1);case 11:return kS(r.type.render,!1);case 1:return kS(r.type,!0);case 31:return Bc("Activity");default:return""}}function jR(r){try{var i="";do i+=eB(r),r=r.return;while(r);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Yr(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function PR(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function nB(r){var i=PR(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,h=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(g){u=""+g,h.call(this,g)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(g){u=""+g},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function np(r){r._valueTracker||(r._valueTracker=nB(r))}function qR(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=PR(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function rp(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var rB=/[\n"\\]/g;function Gr(r){return r.replace(rB,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function MS(r,i,o,u,f,h,g,_){r.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?r.type=g:r.removeAttribute("type"),i!=null?g==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Yr(i)):r.value!==""+Yr(i)&&(r.value=""+Yr(i)):g!=="submit"&&g!=="reset"||r.removeAttribute("value"),i!=null?AS(r,g,Yr(i)):o!=null?AS(r,g,Yr(o)):u!=null&&r.removeAttribute("value"),f==null&&h!=null&&(r.defaultChecked=!!h),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.name=""+Yr(_):r.removeAttribute("name")}function BR(r,i,o,u,f,h,g,_){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(r.type=h),i!=null||o!=null){if(!(h!=="submit"&&h!=="reset"||i!=null))return;o=o!=null?""+Yr(o):"",i=i!=null?""+Yr(i):o,_||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=_?r.checked:!!u,r.defaultChecked=!!u,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.name=g)}function AS(r,i,o){i==="number"&&rp(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Kc(r,i,o,u){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Yr(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function KR(r,i,o){if(i!=null&&(i=""+Yr(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+Yr(o):""}function HR(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(Et(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Yr(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function Hc(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var sB=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function VR(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||sB.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function YR(r,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&VR(r,f,u)}else for(var h in i)i.hasOwnProperty(h)&&VR(r,h,i[h])}function CS(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iB=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),aB=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sp(r){return aB.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var NS=null;function xS(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Vc=null,Yc=null;function GR(r){var i=jc(r);if(i&&(r=i.stateNode)){var o=r[dr]||null;t:switch(r=i.stateNode,i.type){case"input":if(MS(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Gr(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var f=u[dr]||null;if(!f)throw Error(s(90));MS(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&qR(u)}break t;case"textarea":KR(r,o.value,o.defaultValue);break t;case"select":i=o.value,i!=null&&Kc(r,!!o.multiple,i,!1)}}}var IS=!1;function JR(r,i,o){if(IS)return r(i,o);IS=!0;try{var u=r(i);return u}finally{if(IS=!1,(Vc!==null||Yc!==null)&&(Bp(),Vc&&(i=Vc,r=Yc,Yc=Vc=null,GR(i),r)))for(i=0;i<r.length;i++)GR(r[i])}}function Nf(r,i){var o=r.stateNode;if(o===null)return null;var u=o[dr]||null;if(u===null)return null;o=u[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break t;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),FS=!1;if(bi)try{var xf={};Object.defineProperty(xf,"passive",{get:function(){FS=!0}}),window.addEventListener("test",xf,xf),window.removeEventListener("test",xf,xf)}catch{FS=!1}var ha=null,DS=null,ip=null;function QR(){if(ip)return ip;var r,i=DS,o=i.length,u,f="value"in ha?ha.value:ha.textContent,h=f.length;for(r=0;r<o&&i[r]===f[r];r++);var g=o-r;for(u=1;u<=g&&i[o-u]===f[h-u];u++);return ip=f.slice(r,1<u?1-u:void 0)}function ap(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function op(){return!0}function XR(){return!1}function mr(r){function i(o,u,f,h,g){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=h,this.target=g,this.currentTarget=null;for(var _ in r)r.hasOwnProperty(_)&&(o=r[_],this[_]=o?o(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?op:XR,this.isPropagationStopped=XR,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=op)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=op)},persist:function(){},isPersistent:op}),i}var fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cp=mr(fo),If=y({},fo,{view:0,detail:0}),oB=mr(If),zS,US,Ff,up=y({},If,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jS,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ff&&(Ff&&r.type==="mousemove"?(zS=r.screenX-Ff.screenX,US=r.screenY-Ff.screenY):US=zS=0,Ff=r),zS)},movementY:function(r){return"movementY"in r?r.movementY:US}}),ZR=mr(up),cB=y({},up,{dataTransfer:0}),uB=mr(cB),lB=y({},If,{relatedTarget:0}),LS=mr(lB),fB=y({},fo,{animationName:0,elapsedTime:0,pseudoElement:0}),hB=mr(fB),dB=y({},fo,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),mB=mr(dB),pB=y({},fo,{data:0}),WR=mr(pB),gB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _B(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=bB[r])?!!i[r]:!1}function jS(){return _B}var SB=y({},If,{key:function(r){if(r.key){var i=gB[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=ap(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?yB[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jS,charCode:function(r){return r.type==="keypress"?ap(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ap(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),vB=mr(SB),$B=y({},up,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tk=mr($B),wB=y({},If,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jS}),EB=mr(wB),TB=y({},fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),OB=mr(TB),RB=y({},up,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),kB=mr(RB),MB=y({},fo,{newState:0,oldState:0}),AB=mr(MB),CB=[9,13,27,32],PS=bi&&"CompositionEvent"in window,Df=null;bi&&"documentMode"in document&&(Df=document.documentMode);var NB=bi&&"TextEvent"in window&&!Df,ek=bi&&(!PS||Df&&8<Df&&11>=Df),nk=" ",rk=!1;function sk(r,i){switch(r){case"keyup":return CB.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ik(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Gc=!1;function xB(r,i){switch(r){case"compositionend":return ik(i);case"keypress":return i.which!==32?null:(rk=!0,nk);case"textInput":return r=i.data,r===nk&&rk?null:r;default:return null}}function IB(r,i){if(Gc)return r==="compositionend"||!PS&&sk(r,i)?(r=QR(),ip=DS=ha=null,Gc=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ek&&i.locale!=="ko"?null:i.data;default:return null}}var FB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ak(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!FB[r.type]:i==="textarea"}function ok(r,i,o,u){Vc?Yc?Yc.push(u):Yc=[u]:Vc=u,i=Jp(i,"onChange"),0<i.length&&(o=new cp("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var zf=null,Uf=null;function DB(r){P2(r,0)}function lp(r){var i=Cf(r);if(qR(i))return r}function ck(r,i){if(r==="change")return i}var uk=!1;if(bi){var qS;if(bi){var BS="oninput"in document;if(!BS){var lk=document.createElement("div");lk.setAttribute("oninput","return;"),BS=typeof lk.oninput=="function"}qS=BS}else qS=!1;uk=qS&&(!document.documentMode||9<document.documentMode)}function fk(){zf&&(zf.detachEvent("onpropertychange",hk),Uf=zf=null)}function hk(r){if(r.propertyName==="value"&&lp(Uf)){var i=[];ok(i,Uf,r,xS(r)),JR(DB,i)}}function zB(r,i,o){r==="focusin"?(fk(),zf=i,Uf=o,zf.attachEvent("onpropertychange",hk)):r==="focusout"&&fk()}function UB(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return lp(Uf)}function LB(r,i){if(r==="click")return lp(i)}function jB(r,i){if(r==="input"||r==="change")return lp(i)}function PB(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Nr=typeof Object.is=="function"?Object.is:PB;function Lf(r,i){if(Nr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!bS.call(i,f)||!Nr(r[f],i[f]))return!1}return!0}function dk(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function mk(r,i){var o=dk(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=dk(o)}}function pk(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?pk(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function gk(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=rp(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=rp(r.document)}return i}function KS(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var qB=bi&&"documentMode"in document&&11>=document.documentMode,Jc=null,HS=null,jf=null,VS=!1;function yk(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;VS||Jc==null||Jc!==rp(u)||(u=Jc,"selectionStart"in u&&KS(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),jf&&Lf(jf,u)||(jf=u,u=Jp(HS,"onSelect"),0<u.length&&(i=new cp("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Jc)))}function ho(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Qc={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionrun:ho("Transition","TransitionRun"),transitionstart:ho("Transition","TransitionStart"),transitioncancel:ho("Transition","TransitionCancel"),transitionend:ho("Transition","TransitionEnd")},YS={},bk={};bi&&(bk=document.createElement("div").style,"AnimationEvent"in window||(delete Qc.animationend.animation,delete Qc.animationiteration.animation,delete Qc.animationstart.animation),"TransitionEvent"in window||delete Qc.transitionend.transition);function mo(r){if(YS[r])return YS[r];if(!Qc[r])return r;var i=Qc[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in bk)return YS[r]=i[o];return r}var _k=mo("animationend"),Sk=mo("animationiteration"),vk=mo("animationstart"),BB=mo("transitionrun"),KB=mo("transitionstart"),HB=mo("transitioncancel"),$k=mo("transitionend"),wk=new Map,GS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");GS.push("scrollEnd");function gs(r,i){wk.set(r,i),lo(i,[r])}var Ek=new WeakMap;function Jr(r,i){if(typeof r=="object"&&r!==null){var o=Ek.get(r);return o!==void 0?o:(i={value:r,source:i,stack:jR(i)},Ek.set(r,i),i)}return{value:r,source:i,stack:jR(i)}}var Qr=[],Xc=0,JS=0;function fp(){for(var r=Xc,i=JS=Xc=0;i<r;){var o=Qr[i];Qr[i++]=null;var u=Qr[i];Qr[i++]=null;var f=Qr[i];Qr[i++]=null;var h=Qr[i];if(Qr[i++]=null,u!==null&&f!==null){var g=u.pending;g===null?f.next=f:(f.next=g.next,g.next=f),u.pending=f}h!==0&&Tk(o,f,h)}}function hp(r,i,o,u){Qr[Xc++]=r,Qr[Xc++]=i,Qr[Xc++]=o,Qr[Xc++]=u,JS|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function QS(r,i,o,u){return hp(r,i,o,u),dp(r)}function Zc(r,i){return hp(r,null,null,i),dp(r)}function Tk(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,h=r.return;h!==null;)h.childLanes|=o,u=h.alternate,u!==null&&(u.childLanes|=o),h.tag===22&&(r=h.stateNode,r===null||r._visibility&1||(f=!0)),r=h,h=h.return;return r.tag===3?(h=r.stateNode,f&&i!==null&&(f=31-Cr(o),r=h.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=o|536870912),h):null}function dp(r){if(50<fh)throw fh=0,n0=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Wc={};function VB(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(r,i,o,u){return new VB(r,i,o,u)}function XS(r){return r=r.prototype,!(!r||!r.isReactComponent)}function _i(r,i){var o=r.alternate;return o===null?(o=xr(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Ok(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function mp(r,i,o,u,f,h){var g=0;if(u=r,typeof r=="function")XS(r)&&(g=1);else if(typeof r=="string")g=GK(r,o,pt.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case et:return r=xr(31,o,i,f),r.elementType=et,r.lanes=h,r;case E:return po(o.children,f,h,i);case N:g=8,f|=24;break;case C:return r=xr(12,o,i,f|2),r.elementType=C,r.lanes=h,r;case k:return r=xr(13,o,i,f),r.elementType=k,r.lanes=h,r;case U:return r=xr(19,o,i,f),r.elementType=U,r.lanes=h,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case x:case A:g=10;break t;case q:g=9;break t;case P:g=11;break t;case K:g=14;break t;case B:g=16,u=null;break t}g=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=xr(g,o,i,f),i.elementType=r,i.type=u,i.lanes=h,i}function po(r,i,o,u){return r=xr(7,r,u,i),r.lanes=o,r}function ZS(r,i,o){return r=xr(6,r,null,i),r.lanes=o,r}function WS(r,i,o){return i=xr(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var tu=[],eu=0,pp=null,gp=0,Xr=[],Zr=0,go=null,Si=1,vi="";function yo(r,i){tu[eu++]=gp,tu[eu++]=pp,pp=r,gp=i}function Rk(r,i,o){Xr[Zr++]=Si,Xr[Zr++]=vi,Xr[Zr++]=go,go=r;var u=Si;r=vi;var f=32-Cr(u)-1;u&=~(1<<f),o+=1;var h=32-Cr(i)+f;if(30<h){var g=f-f%5;h=(u&(1<<g)-1).toString(32),u>>=g,f-=g,Si=1<<32-Cr(i)+f|o<<f|u,vi=h+r}else Si=1<<h|o<<f|u,vi=r}function t1(r){r.return!==null&&(yo(r,1),Rk(r,1,0))}function e1(r){for(;r===pp;)pp=tu[--eu],tu[eu]=null,gp=tu[--eu],tu[eu]=null;for(;r===go;)go=Xr[--Zr],Xr[Zr]=null,vi=Xr[--Zr],Xr[Zr]=null,Si=Xr[--Zr],Xr[Zr]=null}var er=null,Ce=null,ie=!1,bo=null,Ps=!1,n1=Error(s(519));function _o(r){var i=Error(s(418,""));throw Bf(Jr(i,r)),n1}function kk(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[Vn]=r,i[dr]=u,o){case"dialog":Yt("cancel",i),Yt("close",i);break;case"iframe":case"object":case"embed":Yt("load",i);break;case"video":case"audio":for(o=0;o<dh.length;o++)Yt(dh[o],i);break;case"source":Yt("error",i);break;case"img":case"image":case"link":Yt("error",i),Yt("load",i);break;case"details":Yt("toggle",i);break;case"input":Yt("invalid",i),BR(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),np(i);break;case"select":Yt("invalid",i);break;case"textarea":Yt("invalid",i),HR(i,u.value,u.defaultValue,u.children),np(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||H2(i.textContent,o)?(u.popover!=null&&(Yt("beforetoggle",i),Yt("toggle",i)),u.onScroll!=null&&Yt("scroll",i),u.onScrollEnd!=null&&Yt("scrollend",i),u.onClick!=null&&(i.onclick=Qp),i=!0):i=!1,i||_o(r)}function Mk(r){for(er=r.return;er;)switch(er.tag){case 5:case 13:Ps=!1;return;case 27:case 3:Ps=!0;return;default:er=er.return}}function Pf(r){if(r!==er)return!1;if(!ie)return Mk(r),ie=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||b0(r.type,r.memoizedProps)),o=!o),o&&Ce&&_o(r),Mk(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));t:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(i===0){Ce=bs(r.nextSibling);break t}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;r=r.nextSibling}Ce=null}}else i===27?(i=Ce,ka(r.type)?(r=$0,$0=null,Ce=r):Ce=i):Ce=er?bs(r.stateNode.nextSibling):null;return!0}function qf(){Ce=er=null,ie=!1}function Ak(){var r=bo;return r!==null&&(yr===null?yr=r:yr.push.apply(yr,r),bo=null),r}function Bf(r){bo===null?bo=[r]:bo.push(r)}var r1=Y(null),So=null,$i=null;function da(r,i,o){it(r1,i._currentValue),i._currentValue=o}function wi(r){r._currentValue=r1.current,ot(r1)}function s1(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function i1(r,i,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var h=f.dependencies;if(h!==null){var g=f.child;h=h.firstContext;t:for(;h!==null;){var _=h;h=f;for(var T=0;T<i.length;T++)if(_.context===i[T]){h.lanes|=o,_=h.alternate,_!==null&&(_.lanes|=o),s1(h.return,o,r),u||(g=null);break t}h=_.next}}else if(f.tag===18){if(g=f.return,g===null)throw Error(s(341));g.lanes|=o,h=g.alternate,h!==null&&(h.lanes|=o),s1(g,o,r),g=null}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===r){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}}function Kf(r,i,o,u){r=null;for(var f=i,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var g=f.alternate;if(g===null)throw Error(s(387));if(g=g.memoizedProps,g!==null){var _=f.type;Nr(f.pendingProps.value,g.value)||(r!==null?r.push(_):r=[_])}}else if(f===Mr.current){if(g=f.alternate,g===null)throw Error(s(387));g.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(_h):r=[_h])}f=f.return}r!==null&&i1(i,r,o,u),i.flags|=262144}function yp(r){for(r=r.firstContext;r!==null;){if(!Nr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function vo(r){So=r,$i=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Yn(r){return Ck(So,r)}function bp(r,i){return So===null&&vo(r),Ck(r,i)}function Ck(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},$i===null){if(r===null)throw Error(s(308));$i=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else $i=$i.next=i;return o}var YB=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},GB=t.unstable_scheduleCallback,JB=t.unstable_NormalPriority,cn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function a1(){return{controller:new YB,data:new Map,refCount:0}}function Hf(r){r.refCount--,r.refCount===0&&GB(JB,function(){r.controller.abort()})}var Vf=null,o1=0,nu=0,ru=null;function QB(r,i){if(Vf===null){var o=Vf=[];o1=0,nu=u0(),ru={status:"pending",value:void 0,then:function(u){o.push(u)}}}return o1++,i.then(Nk,Nk),i}function Nk(){if(--o1===0&&Vf!==null){ru!==null&&(ru.status="fulfilled");var r=Vf;Vf=null,nu=0,ru=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function XB(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var xk=z.S;z.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&QB(r,i),xk!==null&&xk(r,i)};var $o=Y(null);function c1(){var r=$o.current;return r!==null?r:ye.pooledCache}function _p(r,i){i===null?it($o,$o.current):it($o,i.pool)}function Ik(){var r=c1();return r===null?null:{parent:cn._currentValue,pool:r}}var Yf=Error(s(460)),Fk=Error(s(474)),Sp=Error(s(542)),u1={then:function(){}};function Dk(r){return r=r.status,r==="fulfilled"||r==="rejected"}function vp(){}function zk(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(vp,vp),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Lk(r),r;default:if(typeof i.status=="string")i.then(vp,vp);else{if(r=ye,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Lk(r),r}throw Gf=i,Yf}}var Gf=null;function Uk(){if(Gf===null)throw Error(s(459));var r=Gf;return Gf=null,r}function Lk(r){if(r===Yf||r===Sp)throw Error(s(483))}var ma=!1;function l1(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function f1(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function pa(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ga(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ae&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=dp(r),Tk(r,null,o),i}return hp(r,u,i,o),dp(r)}function Jf(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,NR(r,o)}}function h1(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,h=null;if(o=o.firstBaseUpdate,o!==null){do{var g={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};h===null?f=h=g:h=h.next=g,o=o.next}while(o!==null);h===null?f=h=i:h=h.next=i}else f=h=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var d1=!1;function Qf(){if(d1){var r=ru;if(r!==null)throw r}}function Xf(r,i,o,u){d1=!1;var f=r.updateQueue;ma=!1;var h=f.firstBaseUpdate,g=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var T=_,F=T.next;T.next=null,g===null?h=F:g.next=F,g=T;var H=r.alternate;H!==null&&(H=H.updateQueue,_=H.lastBaseUpdate,_!==g&&(_===null?H.firstBaseUpdate=F:_.next=F,H.lastBaseUpdate=T))}if(h!==null){var J=f.baseState;g=0,H=F=T=null,_=h;do{var L=_.lane&-536870913,j=L!==_.lane;if(j?(Zt&L)===L:(u&L)===L){L!==0&&L===nu&&(d1=!0),H!==null&&(H=H.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var $t=r,gt=_;L=i;var de=o;switch(gt.tag){case 1:if($t=gt.payload,typeof $t=="function"){J=$t.call(de,J,L);break t}J=$t;break t;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=gt.payload,L=typeof $t=="function"?$t.call(de,J,L):$t,L==null)break t;J=y({},J,L);break t;case 2:ma=!0}}L=_.callback,L!==null&&(r.flags|=64,j&&(r.flags|=8192),j=f.callbacks,j===null?f.callbacks=[L]:j.push(L))}else j={lane:L,tag:_.tag,payload:_.payload,callback:_.callback,next:null},H===null?(F=H=j,T=J):H=H.next=j,g|=L;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;j=_,_=j.next,j.next=null,f.lastBaseUpdate=j,f.shared.pending=null}}while(!0);H===null&&(T=J),f.baseState=T,f.firstBaseUpdate=F,f.lastBaseUpdate=H,h===null&&(f.shared.lanes=0),Ea|=g,r.lanes=g,r.memoizedState=J}}function jk(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function Pk(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)jk(o[r],i)}var su=Y(null),$p=Y(0);function qk(r,i){r=Ai,it($p,r),it(su,i),Ai=r|i.baseLanes}function m1(){it($p,Ai),it(su,su.current)}function p1(){Ai=$p.current,ot(su),ot($p)}var ya=0,Bt=null,fe=null,Ve=null,wp=!1,iu=!1,wo=!1,Ep=0,Zf=0,au=null,ZB=0;function je(){throw Error(s(321))}function g1(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!Nr(r[o],i[o]))return!1;return!0}function y1(r,i,o,u,f,h){return ya=h,Bt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,z.H=r===null||r.memoizedState===null?TM:OM,wo=!1,h=o(u,f),wo=!1,iu&&(h=Kk(i,o,u,f)),Bk(r),h}function Bk(r){z.H=Ap;var i=fe!==null&&fe.next!==null;if(ya=0,Ve=fe=Bt=null,wp=!1,Zf=0,au=null,i)throw Error(s(300));r===null||_n||(r=r.dependencies,r!==null&&yp(r)&&(_n=!0))}function Kk(r,i,o,u){Bt=r;var f=0;do{if(iu&&(au=null),Zf=0,iu=!1,25<=f)throw Error(s(301));if(f+=1,Ve=fe=null,r.updateQueue!=null){var h=r.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}z.H=iK,h=i(o,u)}while(iu);return h}function WB(){var r=z.H,i=r.useState()[0];return i=typeof i.then=="function"?Wf(i):i,r=r.useState()[0],(fe!==null?fe.memoizedState:null)!==r&&(Bt.flags|=1024),i}function b1(){var r=Ep!==0;return Ep=0,r}function _1(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function S1(r){if(wp){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wp=!1}ya=0,Ve=fe=Bt=null,iu=!1,Zf=Ep=0,au=null}function pr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Bt.memoizedState=Ve=r:Ve=Ve.next=r,Ve}function Ye(){if(fe===null){var r=Bt.alternate;r=r!==null?r.memoizedState:null}else r=fe.next;var i=Ve===null?Bt.memoizedState:Ve.next;if(i!==null)Ve=i,fe=r;else{if(r===null)throw Bt.alternate===null?Error(s(467)):Error(s(310));fe=r,r={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},Ve===null?Bt.memoizedState=Ve=r:Ve=Ve.next=r}return Ve}function v1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wf(r){var i=Zf;return Zf+=1,au===null&&(au=[]),r=zk(au,r,i),i=Bt,(Ve===null?i.memoizedState:Ve.next)===null&&(i=i.alternate,z.H=i===null||i.memoizedState===null?TM:OM),r}function Tp(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Wf(r);if(r.$$typeof===A)return Yn(r)}throw Error(s(438,String(r)))}function $1(r){var i=null,o=Bt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Bt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=v1(),Bt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=tt;return i.index++,o}function Ei(r,i){return typeof i=="function"?i(r):i}function Op(r){var i=Ye();return w1(i,fe,r)}function w1(r,i,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var f=r.baseQueue,h=u.pending;if(h!==null){if(f!==null){var g=f.next;f.next=h.next,h.next=g}i.baseQueue=f=h,u.pending=null}if(h=r.baseState,f===null)r.memoizedState=h;else{i=f.next;var _=g=null,T=null,F=i,H=!1;do{var J=F.lane&-536870913;if(J!==F.lane?(Zt&J)===J:(ya&J)===J){var L=F.revertLane;if(L===0)T!==null&&(T=T.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),J===nu&&(H=!0);else if((ya&L)===L){F=F.next,L===nu&&(H=!0);continue}else J={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},T===null?(_=T=J,g=h):T=T.next=J,Bt.lanes|=L,Ea|=L;J=F.action,wo&&o(h,J),h=F.hasEagerState?F.eagerState:o(h,J)}else L={lane:J,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},T===null?(_=T=L,g=h):T=T.next=L,Bt.lanes|=J,Ea|=J;F=F.next}while(F!==null&&F!==i);if(T===null?g=h:T.next=_,!Nr(h,r.memoizedState)&&(_n=!0,H&&(o=ru,o!==null)))throw o;r.memoizedState=h,r.baseState=g,r.baseQueue=T,u.lastRenderedState=h}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function E1(r){var i=Ye(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,h=i.memoizedState;if(f!==null){o.pending=null;var g=f=f.next;do h=r(h,g.action),g=g.next;while(g!==f);Nr(h,i.memoizedState)||(_n=!0),i.memoizedState=h,i.baseQueue===null&&(i.baseState=h),o.lastRenderedState=h}return[h,u]}function Hk(r,i,o){var u=Bt,f=Ye(),h=ie;if(h){if(o===void 0)throw Error(s(407));o=o()}else o=i();var g=!Nr((fe||f).memoizedState,o);g&&(f.memoizedState=o,_n=!0),f=f.queue;var _=Gk.bind(null,u,f,r);if(th(2048,8,_,[r]),f.getSnapshot!==i||g||Ve!==null&&Ve.memoizedState.tag&1){if(u.flags|=2048,ou(9,Rp(),Yk.bind(null,u,f,o,i),null),ye===null)throw Error(s(349));h||(ya&124)!==0||Vk(u,i,o)}return o}function Vk(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=Bt.updateQueue,i===null?(i=v1(),Bt.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function Yk(r,i,o,u){i.value=o,i.getSnapshot=u,Jk(i)&&Qk(r)}function Gk(r,i,o){return o(function(){Jk(i)&&Qk(r)})}function Jk(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!Nr(r,o)}catch{return!0}}function Qk(r){var i=Zc(r,2);i!==null&&Ur(i,r,2)}function T1(r){var i=pr();if(typeof r=="function"){var o=r;if(r=o(),wo){la(!0);try{o()}finally{la(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:r},i}function Xk(r,i,o,u){return r.baseState=o,w1(r,fe,typeof u=="function"?u:Ei)}function tK(r,i,o,u,f){if(Mp(r))throw Error(s(485));if(r=i.action,r!==null){var h={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){h.listeners.push(g)}};z.T!==null?o(!0):h.isTransition=!1,u(h),o=i.pending,o===null?(h.next=i.pending=h,Zk(i,h)):(h.next=o.next,i.pending=o.next=h)}}function Zk(r,i){var o=i.action,u=i.payload,f=r.state;if(i.isTransition){var h=z.T,g={};z.T=g;try{var _=o(f,u),T=z.S;T!==null&&T(g,_),Wk(r,i,_)}catch(F){O1(r,i,F)}finally{z.T=h}}else try{h=o(f,u),Wk(r,i,h)}catch(F){O1(r,i,F)}}function Wk(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){tM(r,i,u)},function(u){return O1(r,i,u)}):tM(r,i,o)}function tM(r,i,o){i.status="fulfilled",i.value=o,eM(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,Zk(r,o)))}function O1(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,eM(i),i=i.next;while(i!==u)}r.action=null}function eM(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function nM(r,i){return i}function rM(r,i){if(ie){var o=ye.formState;if(o!==null){t:{var u=Bt;if(ie){if(Ce){e:{for(var f=Ce,h=Ps;f.nodeType!==8;){if(!h){f=null;break e}if(f=bs(f.nextSibling),f===null){f=null;break e}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){Ce=bs(f.nextSibling),u=f.data==="F!";break t}}_o(u)}u=!1}u&&(i=o[0])}}return o=pr(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nM,lastRenderedState:i},o.queue=u,o=$M.bind(null,Bt,u),u.dispatch=o,u=T1(!1),h=C1.bind(null,Bt,!1,u.queue),u=pr(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,o=tK.bind(null,Bt,f,h,o),f.dispatch=o,u.memoizedState=r,[i,o,!1]}function sM(r){var i=Ye();return iM(i,fe,r)}function iM(r,i,o){if(i=w1(r,i,nM)[0],r=Op(Ei)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Wf(i)}catch(g){throw g===Yf?Sp:g}else u=i;i=Ye();var f=i.queue,h=f.dispatch;return o!==i.memoizedState&&(Bt.flags|=2048,ou(9,Rp(),eK.bind(null,f,o),null)),[u,h,r]}function eK(r,i){r.action=i}function aM(r){var i=Ye(),o=fe;if(o!==null)return iM(i,o,r);Ye(),i=i.memoizedState,o=Ye();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function ou(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=Bt.updateQueue,i===null&&(i=v1(),Bt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function Rp(){return{destroy:void 0,resource:void 0}}function oM(){return Ye().memoizedState}function kp(r,i,o,u){var f=pr();u=u===void 0?null:u,Bt.flags|=r,f.memoizedState=ou(1|i,Rp(),o,u)}function th(r,i,o,u){var f=Ye();u=u===void 0?null:u;var h=f.memoizedState.inst;fe!==null&&u!==null&&g1(u,fe.memoizedState.deps)?f.memoizedState=ou(i,h,o,u):(Bt.flags|=r,f.memoizedState=ou(1|i,h,o,u))}function cM(r,i){kp(8390656,8,r,i)}function uM(r,i){th(2048,8,r,i)}function lM(r,i){return th(4,2,r,i)}function fM(r,i){return th(4,4,r,i)}function hM(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function dM(r,i,o){o=o!=null?o.concat([r]):null,th(4,4,hM.bind(null,i,r),o)}function R1(){}function mM(r,i){var o=Ye();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&g1(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function pM(r,i){var o=Ye();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&g1(i,u[1]))return u[0];if(u=r(),wo){la(!0);try{r()}finally{la(!1)}}return o.memoizedState=[u,i],u}function k1(r,i,o){return o===void 0||(ya&1073741824)!==0?r.memoizedState=i:(r.memoizedState=o,r=b2(),Bt.lanes|=r,Ea|=r,o)}function gM(r,i,o,u){return Nr(o,i)?o:su.current!==null?(r=k1(r,o,u),Nr(r,i)||(_n=!0),r):(ya&42)===0?(_n=!0,r.memoizedState=o):(r=b2(),Bt.lanes|=r,Ea|=r,i)}function yM(r,i,o,u,f){var h=G.p;G.p=h!==0&&8>h?h:8;var g=z.T,_={};z.T=_,C1(r,!1,i,o);try{var T=f(),F=z.S;if(F!==null&&F(_,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var H=XB(T,u);eh(r,i,H,zr(r))}else eh(r,i,u,zr(r))}catch(J){eh(r,i,{then:function(){},status:"rejected",reason:J},zr())}finally{G.p=h,z.T=g}}function nK(){}function M1(r,i,o,u){if(r.tag!==5)throw Error(s(476));var f=bM(r).queue;yM(r,f,i,st,o===null?nK:function(){return _M(r),o(u)})}function bM(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:st,baseState:st,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:st},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function _M(r){var i=bM(r).next.queue;eh(r,i,{},zr())}function A1(){return Yn(_h)}function SM(){return Ye().memoizedState}function vM(){return Ye().memoizedState}function rK(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=zr();r=pa(o);var u=ga(i,r,o);u!==null&&(Ur(u,i,o),Jf(u,i,o)),i={cache:a1()},r.payload=i;return}i=i.return}}function sK(r,i,o){var u=zr();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Mp(r)?wM(i,o):(o=QS(r,i,o,u),o!==null&&(Ur(o,r,u),EM(o,i,u)))}function $M(r,i,o){var u=zr();eh(r,i,o,u)}function eh(r,i,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Mp(r))wM(i,f);else{var h=r.alternate;if(r.lanes===0&&(h===null||h.lanes===0)&&(h=i.lastRenderedReducer,h!==null))try{var g=i.lastRenderedState,_=h(g,o);if(f.hasEagerState=!0,f.eagerState=_,Nr(_,g))return hp(r,i,f,0),ye===null&&fp(),!1}catch{}finally{}if(o=QS(r,i,f,u),o!==null)return Ur(o,r,u),EM(o,i,u),!0}return!1}function C1(r,i,o,u){if(u={lane:2,revertLane:u0(),action:u,hasEagerState:!1,eagerState:null,next:null},Mp(r)){if(i)throw Error(s(479))}else i=QS(r,o,u,2),i!==null&&Ur(i,r,2)}function Mp(r){var i=r.alternate;return r===Bt||i!==null&&i===Bt}function wM(r,i){iu=wp=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function EM(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,NR(r,o)}}var Ap={readContext:Yn,use:Tp,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useLayoutEffect:je,useInsertionEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useSyncExternalStore:je,useId:je,useHostTransitionStatus:je,useFormState:je,useActionState:je,useOptimistic:je,useMemoCache:je,useCacheRefresh:je},TM={readContext:Yn,use:Tp,useCallback:function(r,i){return pr().memoizedState=[r,i===void 0?null:i],r},useContext:Yn,useEffect:cM,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,kp(4194308,4,hM.bind(null,i,r),o)},useLayoutEffect:function(r,i){return kp(4194308,4,r,i)},useInsertionEffect:function(r,i){kp(4,2,r,i)},useMemo:function(r,i){var o=pr();i=i===void 0?null:i;var u=r();if(wo){la(!0);try{r()}finally{la(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=pr();if(o!==void 0){var f=o(i);if(wo){la(!0);try{o(i)}finally{la(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=sK.bind(null,Bt,r),[u.memoizedState,r]},useRef:function(r){var i=pr();return r={current:r},i.memoizedState=r},useState:function(r){r=T1(r);var i=r.queue,o=$M.bind(null,Bt,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:R1,useDeferredValue:function(r,i){var o=pr();return k1(o,r,i)},useTransition:function(){var r=T1(!1);return r=yM.bind(null,Bt,r.queue,!0,!1),pr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=Bt,f=pr();if(ie){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),ye===null)throw Error(s(349));(Zt&124)!==0||Vk(u,i,o)}f.memoizedState=o;var h={value:o,getSnapshot:i};return f.queue=h,cM(Gk.bind(null,u,h,r),[r]),u.flags|=2048,ou(9,Rp(),Yk.bind(null,u,h,o,i),null),o},useId:function(){var r=pr(),i=ye.identifierPrefix;if(ie){var o=vi,u=Si;o=(u&~(1<<32-Cr(u)-1)).toString(32)+o,i=""+i+"R"+o,o=Ep++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=ZB++,i=""+i+"r"+o.toString(32)+"";return r.memoizedState=i},useHostTransitionStatus:A1,useFormState:rM,useActionState:rM,useOptimistic:function(r){var i=pr();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=C1.bind(null,Bt,!0,o),o.dispatch=i,[r,i]},useMemoCache:$1,useCacheRefresh:function(){return pr().memoizedState=rK.bind(null,Bt)}},OM={readContext:Yn,use:Tp,useCallback:mM,useContext:Yn,useEffect:uM,useImperativeHandle:dM,useInsertionEffect:lM,useLayoutEffect:fM,useMemo:pM,useReducer:Op,useRef:oM,useState:function(){return Op(Ei)},useDebugValue:R1,useDeferredValue:function(r,i){var o=Ye();return gM(o,fe.memoizedState,r,i)},useTransition:function(){var r=Op(Ei)[0],i=Ye().memoizedState;return[typeof r=="boolean"?r:Wf(r),i]},useSyncExternalStore:Hk,useId:SM,useHostTransitionStatus:A1,useFormState:sM,useActionState:sM,useOptimistic:function(r,i){var o=Ye();return Xk(o,fe,r,i)},useMemoCache:$1,useCacheRefresh:vM},iK={readContext:Yn,use:Tp,useCallback:mM,useContext:Yn,useEffect:uM,useImperativeHandle:dM,useInsertionEffect:lM,useLayoutEffect:fM,useMemo:pM,useReducer:E1,useRef:oM,useState:function(){return E1(Ei)},useDebugValue:R1,useDeferredValue:function(r,i){var o=Ye();return fe===null?k1(o,r,i):gM(o,fe.memoizedState,r,i)},useTransition:function(){var r=E1(Ei)[0],i=Ye().memoizedState;return[typeof r=="boolean"?r:Wf(r),i]},useSyncExternalStore:Hk,useId:SM,useHostTransitionStatus:A1,useFormState:aM,useActionState:aM,useOptimistic:function(r,i){var o=Ye();return fe!==null?Xk(o,fe,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:$1,useCacheRefresh:vM},cu=null,nh=0;function Cp(r){var i=nh;return nh+=1,cu===null&&(cu=[]),zk(cu,r,i)}function rh(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Np(r,i){throw i.$$typeof===b?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function RM(r){var i=r._init;return i(r._payload)}function kM(r){function i(M,R){if(r){var I=M.deletions;I===null?(M.deletions=[R],M.flags|=16):I.push(R)}}function o(M,R){if(!r)return null;for(;R!==null;)i(M,R),R=R.sibling;return null}function u(M){for(var R=new Map;M!==null;)M.key!==null?R.set(M.key,M):R.set(M.index,M),M=M.sibling;return R}function f(M,R){return M=_i(M,R),M.index=0,M.sibling=null,M}function h(M,R,I){return M.index=I,r?(I=M.alternate,I!==null?(I=I.index,I<R?(M.flags|=67108866,R):I):(M.flags|=67108866,R)):(M.flags|=1048576,R)}function g(M){return r&&M.alternate===null&&(M.flags|=67108866),M}function _(M,R,I,V){return R===null||R.tag!==6?(R=ZS(I,M.mode,V),R.return=M,R):(R=f(R,I),R.return=M,R)}function T(M,R,I,V){var ct=I.type;return ct===E?H(M,R,I.props.children,V,I.key):R!==null&&(R.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===B&&RM(ct)===R.type)?(R=f(R,I.props),rh(R,I),R.return=M,R):(R=mp(I.type,I.key,I.props,null,M.mode,V),rh(R,I),R.return=M,R)}function F(M,R,I,V){return R===null||R.tag!==4||R.stateNode.containerInfo!==I.containerInfo||R.stateNode.implementation!==I.implementation?(R=WS(I,M.mode,V),R.return=M,R):(R=f(R,I.children||[]),R.return=M,R)}function H(M,R,I,V,ct){return R===null||R.tag!==7?(R=po(I,M.mode,V,ct),R.return=M,R):(R=f(R,I),R.return=M,R)}function J(M,R,I){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=ZS(""+R,M.mode,I),R.return=M,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case S:return I=mp(R.type,R.key,R.props,null,M.mode,I),rh(I,R),I.return=M,I;case v:return R=WS(R,M.mode,I),R.return=M,R;case B:var V=R._init;return R=V(R._payload),J(M,R,I)}if(Et(R)||rt(R))return R=po(R,M.mode,I,null),R.return=M,R;if(typeof R.then=="function")return J(M,Cp(R),I);if(R.$$typeof===A)return J(M,bp(M,R),I);Np(M,R)}return null}function L(M,R,I,V){var ct=R!==null?R.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return ct!==null?null:_(M,R,""+I,V);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case S:return I.key===ct?T(M,R,I,V):null;case v:return I.key===ct?F(M,R,I,V):null;case B:return ct=I._init,I=ct(I._payload),L(M,R,I,V)}if(Et(I)||rt(I))return ct!==null?null:H(M,R,I,V,null);if(typeof I.then=="function")return L(M,R,Cp(I),V);if(I.$$typeof===A)return L(M,R,bp(M,I),V);Np(M,I)}return null}function j(M,R,I,V,ct){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return M=M.get(I)||null,_(R,M,""+V,ct);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return M=M.get(V.key===null?I:V.key)||null,T(R,M,V,ct);case v:return M=M.get(V.key===null?I:V.key)||null,F(R,M,V,ct);case B:var Ht=V._init;return V=Ht(V._payload),j(M,R,I,V,ct)}if(Et(V)||rt(V))return M=M.get(I)||null,H(R,M,V,ct,null);if(typeof V.then=="function")return j(M,R,I,Cp(V),ct);if(V.$$typeof===A)return j(M,R,I,bp(R,V),ct);Np(R,V)}return null}function $t(M,R,I,V){for(var ct=null,Ht=null,dt=R,yt=R=0,vn=null;dt!==null&&yt<I.length;yt++){dt.index>yt?(vn=dt,dt=null):vn=dt.sibling;var re=L(M,dt,I[yt],V);if(re===null){dt===null&&(dt=vn);break}r&&dt&&re.alternate===null&&i(M,dt),R=h(re,R,yt),Ht===null?ct=re:Ht.sibling=re,Ht=re,dt=vn}if(yt===I.length)return o(M,dt),ie&&yo(M,yt),ct;if(dt===null){for(;yt<I.length;yt++)dt=J(M,I[yt],V),dt!==null&&(R=h(dt,R,yt),Ht===null?ct=dt:Ht.sibling=dt,Ht=dt);return ie&&yo(M,yt),ct}for(dt=u(dt);yt<I.length;yt++)vn=j(dt,M,yt,I[yt],V),vn!==null&&(r&&vn.alternate!==null&&dt.delete(vn.key===null?yt:vn.key),R=h(vn,R,yt),Ht===null?ct=vn:Ht.sibling=vn,Ht=vn);return r&&dt.forEach(function(xa){return i(M,xa)}),ie&&yo(M,yt),ct}function gt(M,R,I,V){if(I==null)throw Error(s(151));for(var ct=null,Ht=null,dt=R,yt=R=0,vn=null,re=I.next();dt!==null&&!re.done;yt++,re=I.next()){dt.index>yt?(vn=dt,dt=null):vn=dt.sibling;var xa=L(M,dt,re.value,V);if(xa===null){dt===null&&(dt=vn);break}r&&dt&&xa.alternate===null&&i(M,dt),R=h(xa,R,yt),Ht===null?ct=xa:Ht.sibling=xa,Ht=xa,dt=vn}if(re.done)return o(M,dt),ie&&yo(M,yt),ct;if(dt===null){for(;!re.done;yt++,re=I.next())re=J(M,re.value,V),re!==null&&(R=h(re,R,yt),Ht===null?ct=re:Ht.sibling=re,Ht=re);return ie&&yo(M,yt),ct}for(dt=u(dt);!re.done;yt++,re=I.next())re=j(dt,M,yt,re.value,V),re!==null&&(r&&re.alternate!==null&&dt.delete(re.key===null?yt:re.key),R=h(re,R,yt),Ht===null?ct=re:Ht.sibling=re,Ht=re);return r&&dt.forEach(function(a5){return i(M,a5)}),ie&&yo(M,yt),ct}function de(M,R,I,V){if(typeof I=="object"&&I!==null&&I.type===E&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case S:t:{for(var ct=I.key;R!==null;){if(R.key===ct){if(ct=I.type,ct===E){if(R.tag===7){o(M,R.sibling),V=f(R,I.props.children),V.return=M,M=V;break t}}else if(R.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===B&&RM(ct)===R.type){o(M,R.sibling),V=f(R,I.props),rh(V,I),V.return=M,M=V;break t}o(M,R);break}else i(M,R);R=R.sibling}I.type===E?(V=po(I.props.children,M.mode,V,I.key),V.return=M,M=V):(V=mp(I.type,I.key,I.props,null,M.mode,V),rh(V,I),V.return=M,M=V)}return g(M);case v:t:{for(ct=I.key;R!==null;){if(R.key===ct)if(R.tag===4&&R.stateNode.containerInfo===I.containerInfo&&R.stateNode.implementation===I.implementation){o(M,R.sibling),V=f(R,I.children||[]),V.return=M,M=V;break t}else{o(M,R);break}else i(M,R);R=R.sibling}V=WS(I,M.mode,V),V.return=M,M=V}return g(M);case B:return ct=I._init,I=ct(I._payload),de(M,R,I,V)}if(Et(I))return $t(M,R,I,V);if(rt(I)){if(ct=rt(I),typeof ct!="function")throw Error(s(150));return I=ct.call(I),gt(M,R,I,V)}if(typeof I.then=="function")return de(M,R,Cp(I),V);if(I.$$typeof===A)return de(M,R,bp(M,I),V);Np(M,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,R!==null&&R.tag===6?(o(M,R.sibling),V=f(R,I),V.return=M,M=V):(o(M,R),V=ZS(I,M.mode,V),V.return=M,M=V),g(M)):o(M,R)}return function(M,R,I,V){try{nh=0;var ct=de(M,R,I,V);return cu=null,ct}catch(dt){if(dt===Yf||dt===Sp)throw dt;var Ht=xr(29,dt,null,M.mode);return Ht.lanes=V,Ht.return=M,Ht}finally{}}}var uu=kM(!0),MM=kM(!1),Wr=Y(null),qs=null;function ba(r){var i=r.alternate;it(un,un.current&1),it(Wr,r),qs===null&&(i===null||su.current!==null||i.memoizedState!==null)&&(qs=r)}function AM(r){if(r.tag===22){if(it(un,un.current),it(Wr,r),qs===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(qs=r)}}else _a()}function _a(){it(un,un.current),it(Wr,Wr.current)}function Ti(r){ot(Wr),qs===r&&(qs=null),ot(un)}var un=Y(0);function xp(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||v0(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function N1(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:y({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var x1={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=zr(),f=pa(u);f.payload=i,o!=null&&(f.callback=o),i=ga(r,f,u),i!==null&&(Ur(i,r,u),Jf(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=zr(),f=pa(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=ga(r,f,u),i!==null&&(Ur(i,r,u),Jf(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=zr(),u=pa(o);u.tag=2,i!=null&&(u.callback=i),i=ga(r,u,o),i!==null&&(Ur(i,r,o),Jf(i,r,o))}};function CM(r,i,o,u,f,h,g){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,h,g):i.prototype&&i.prototype.isPureReactComponent?!Lf(o,u)||!Lf(f,h):!0}function NM(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&x1.enqueueReplaceState(i,i.state,null)}function Eo(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=y({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Ip=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function xM(r){Ip(r)}function IM(r){console.error(r)}function FM(r){Ip(r)}function Fp(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function DM(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function I1(r,i,o){return o=pa(o),o.tag=3,o.payload={element:null},o.callback=function(){Fp(r,i)},o}function zM(r){return r=pa(r),r.tag=3,r}function UM(r,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var h=u.value;r.payload=function(){return f(h)},r.callback=function(){DM(i,o,u)}}var g=o.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(r.callback=function(){DM(i,o,u),typeof f!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var _=u.stack;this.componentDidCatch(u.value,{componentStack:_!==null?_:""})})}function aK(r,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Kf(i,o,f,!0),o=Wr.current,o!==null){switch(o.tag){case 13:return qs===null?s0():o.alternate===null&&Ne===0&&(Ne=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===u1?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),a0(r,u,f)),!1;case 22:return o.flags|=65536,u===u1?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),a0(r,u,f)),!1}throw Error(s(435,o.tag))}return a0(r,u,f),s0(),!1}if(ie)return i=Wr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==n1&&(r=Error(s(422),{cause:u}),Bf(Jr(r,o)))):(u!==n1&&(i=Error(s(423),{cause:u}),Bf(Jr(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Jr(u,o),f=I1(r.stateNode,u,f),h1(r,f),Ne!==4&&(Ne=2)),!1;var h=Error(s(520),{cause:u});if(h=Jr(h,o),lh===null?lh=[h]:lh.push(h),Ne!==4&&(Ne=2),i===null)return!0;u=Jr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=I1(o.stateNode,u,r),h1(o,r),!1;case 1:if(i=o.type,h=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ta===null||!Ta.has(h))))return o.flags|=65536,f&=-f,o.lanes|=f,f=zM(f),UM(f,r,o,u),h1(o,f),!1}o=o.return}while(o!==null);return!1}var LM=Error(s(461)),_n=!1;function Cn(r,i,o,u){i.child=r===null?MM(i,null,o,u):uu(i,r.child,o,u)}function jM(r,i,o,u,f){o=o.render;var h=i.ref;if("ref"in u){var g={};for(var _ in u)_!=="ref"&&(g[_]=u[_])}else g=u;return vo(i),u=y1(r,i,o,g,h,f),_=b1(),r!==null&&!_n?(_1(r,i,f),Oi(r,i,f)):(ie&&_&&t1(i),i.flags|=1,Cn(r,i,u,f),i.child)}function PM(r,i,o,u,f){if(r===null){var h=o.type;return typeof h=="function"&&!XS(h)&&h.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=h,qM(r,i,h,u,f)):(r=mp(o.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(h=r.child,!q1(r,f)){var g=h.memoizedProps;if(o=o.compare,o=o!==null?o:Lf,o(g,u)&&r.ref===i.ref)return Oi(r,i,f)}return i.flags|=1,r=_i(h,u),r.ref=i.ref,r.return=i,i.child=r}function qM(r,i,o,u,f){if(r!==null){var h=r.memoizedProps;if(Lf(h,u)&&r.ref===i.ref)if(_n=!1,i.pendingProps=u=h,q1(r,f))(r.flags&131072)!==0&&(_n=!0);else return i.lanes=r.lanes,Oi(r,i,f)}return F1(r,i,o,u,f)}function BM(r,i,o){var u=i.pendingProps,f=u.children,h=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=h!==null?h.baseLanes|o:o,r!==null){for(f=i.child=r.child,h=0;f!==null;)h=h|f.lanes|f.childLanes,f=f.sibling;i.childLanes=h&~u}else i.childLanes=0,i.child=null;return KM(r,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&_p(i,h!==null?h.cachePool:null),h!==null?qk(i,h):m1(),AM(i);else return i.lanes=i.childLanes=536870912,KM(r,i,h!==null?h.baseLanes|o:o,o)}else h!==null?(_p(i,h.cachePool),qk(i,h),_a(),i.memoizedState=null):(r!==null&&_p(i,null),m1(),_a());return Cn(r,i,f,o),i.child}function KM(r,i,o,u){var f=c1();return f=f===null?null:{parent:cn._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},r!==null&&_p(i,null),m1(),AM(i),r!==null&&Kf(r,i,u,!0),null}function Dp(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function F1(r,i,o,u,f){return vo(i),o=y1(r,i,o,u,void 0,f),u=b1(),r!==null&&!_n?(_1(r,i,f),Oi(r,i,f)):(ie&&u&&t1(i),i.flags|=1,Cn(r,i,o,f),i.child)}function HM(r,i,o,u,f,h){return vo(i),i.updateQueue=null,o=Kk(i,u,o,f),Bk(r),u=b1(),r!==null&&!_n?(_1(r,i,h),Oi(r,i,h)):(ie&&u&&t1(i),i.flags|=1,Cn(r,i,o,h),i.child)}function VM(r,i,o,u,f){if(vo(i),i.stateNode===null){var h=Wc,g=o.contextType;typeof g=="object"&&g!==null&&(h=Yn(g)),h=new o(u,h),i.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=x1,i.stateNode=h,h._reactInternals=i,h=i.stateNode,h.props=u,h.state=i.memoizedState,h.refs={},l1(i),g=o.contextType,h.context=typeof g=="object"&&g!==null?Yn(g):Wc,h.state=i.memoizedState,g=o.getDerivedStateFromProps,typeof g=="function"&&(N1(i,o,g,u),h.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(g=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),g!==h.state&&x1.enqueueReplaceState(h,h.state,null),Xf(i,u,h,f),Qf(),h.state=i.memoizedState),typeof h.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){h=i.stateNode;var _=i.memoizedProps,T=Eo(o,_);h.props=T;var F=h.context,H=o.contextType;g=Wc,typeof H=="object"&&H!==null&&(g=Yn(H));var J=o.getDerivedStateFromProps;H=typeof J=="function"||typeof h.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,H||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_||F!==g)&&NM(i,h,u,g),ma=!1;var L=i.memoizedState;h.state=L,Xf(i,u,h,f),Qf(),F=i.memoizedState,_||L!==F||ma?(typeof J=="function"&&(N1(i,o,J,u),F=i.memoizedState),(T=ma||CM(i,o,T,u,L,F,g))?(H||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(i.flags|=4194308)):(typeof h.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=F),h.props=u,h.state=F,h.context=g,u=T):(typeof h.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{h=i.stateNode,f1(r,i),g=i.memoizedProps,H=Eo(o,g),h.props=H,J=i.pendingProps,L=h.context,F=o.contextType,T=Wc,typeof F=="object"&&F!==null&&(T=Yn(F)),_=o.getDerivedStateFromProps,(F=typeof _=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==J||L!==T)&&NM(i,h,u,T),ma=!1,L=i.memoizedState,h.state=L,Xf(i,u,h,f),Qf();var j=i.memoizedState;g!==J||L!==j||ma||r!==null&&r.dependencies!==null&&yp(r.dependencies)?(typeof _=="function"&&(N1(i,o,_,u),j=i.memoizedState),(H=ma||CM(i,o,H,u,L,j,T)||r!==null&&r.dependencies!==null&&yp(r.dependencies))?(F||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(u,j,T),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(u,j,T)),typeof h.componentDidUpdate=="function"&&(i.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof h.componentDidUpdate!="function"||g===r.memoizedProps&&L===r.memoizedState||(i.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===r.memoizedProps&&L===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=j),h.props=u,h.state=j,h.context=T,u=H):(typeof h.componentDidUpdate!="function"||g===r.memoizedProps&&L===r.memoizedState||(i.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===r.memoizedProps&&L===r.memoizedState||(i.flags|=1024),u=!1)}return h=u,Dp(r,i),u=(i.flags&128)!==0,h||u?(h=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:h.render(),i.flags|=1,r!==null&&u?(i.child=uu(i,r.child,null,f),i.child=uu(i,null,o,f)):Cn(r,i,o,f),i.memoizedState=h.state,r=i.child):r=Oi(r,i,f),r}function YM(r,i,o,u){return qf(),i.flags|=256,Cn(r,i,o,u),i.child}var D1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function z1(r){return{baseLanes:r,cachePool:Ik()}}function U1(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=ts),r}function GM(r,i,o){var u=i.pendingProps,f=!1,h=(i.flags&128)!==0,g;if((g=h)||(g=r!==null&&r.memoizedState===null?!1:(un.current&2)!==0),g&&(f=!0,i.flags&=-129),g=(i.flags&32)!==0,i.flags&=-33,r===null){if(ie){if(f?ba(i):_a(),ie){var _=Ce,T;if(T=_){t:{for(T=_,_=Ps;T.nodeType!==8;){if(!_){_=null;break t}if(T=bs(T.nextSibling),T===null){_=null;break t}}_=T}_!==null?(i.memoizedState={dehydrated:_,treeContext:go!==null?{id:Si,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},T=xr(18,null,null,0),T.stateNode=_,T.return=i,i.child=T,er=i,Ce=null,T=!0):T=!1}T||_o(i)}if(_=i.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return v0(_)?i.lanes=32:i.lanes=536870912,null;Ti(i)}return _=u.children,u=u.fallback,f?(_a(),f=i.mode,_=zp({mode:"hidden",children:_},f),u=po(u,f,o,null),_.return=i,u.return=i,_.sibling=u,i.child=_,f=i.child,f.memoizedState=z1(o),f.childLanes=U1(r,g,o),i.memoizedState=D1,u):(ba(i),L1(i,_))}if(T=r.memoizedState,T!==null&&(_=T.dehydrated,_!==null)){if(h)i.flags&256?(ba(i),i.flags&=-257,i=j1(r,i,o)):i.memoizedState!==null?(_a(),i.child=r.child,i.flags|=128,i=null):(_a(),f=u.fallback,_=i.mode,u=zp({mode:"visible",children:u.children},_),f=po(f,_,o,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,uu(i,r.child,null,o),u=i.child,u.memoizedState=z1(o),u.childLanes=U1(r,g,o),i.memoizedState=D1,i=f);else if(ba(i),v0(_)){if(g=_.nextSibling&&_.nextSibling.dataset,g)var F=g.dgst;g=F,u=Error(s(419)),u.stack="",u.digest=g,Bf({value:u,source:null,stack:null}),i=j1(r,i,o)}else if(_n||Kf(r,i,o,!1),g=(o&r.childLanes)!==0,_n||g){if(g=ye,g!==null&&(u=o&-o,u=(u&42)!==0?1:$S(u),u=(u&(g.suspendedLanes|o))!==0?0:u,u!==0&&u!==T.retryLane))throw T.retryLane=u,Zc(r,u),Ur(g,r,u),LM;_.data==="$?"||s0(),i=j1(r,i,o)}else _.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=T.treeContext,Ce=bs(_.nextSibling),er=i,ie=!0,bo=null,Ps=!1,r!==null&&(Xr[Zr++]=Si,Xr[Zr++]=vi,Xr[Zr++]=go,Si=r.id,vi=r.overflow,go=i),i=L1(i,u.children),i.flags|=4096);return i}return f?(_a(),f=u.fallback,_=i.mode,T=r.child,F=T.sibling,u=_i(T,{mode:"hidden",children:u.children}),u.subtreeFlags=T.subtreeFlags&65011712,F!==null?f=_i(F,f):(f=po(f,_,o,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,_=r.child.memoizedState,_===null?_=z1(o):(T=_.cachePool,T!==null?(F=cn._currentValue,T=T.parent!==F?{parent:F,pool:F}:T):T=Ik(),_={baseLanes:_.baseLanes|o,cachePool:T}),f.memoizedState=_,f.childLanes=U1(r,g,o),i.memoizedState=D1,u):(ba(i),o=r.child,r=o.sibling,o=_i(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(g=i.deletions,g===null?(i.deletions=[r],i.flags|=16):g.push(r)),i.child=o,i.memoizedState=null,o)}function L1(r,i){return i=zp({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function zp(r,i){return r=xr(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function j1(r,i,o){return uu(i,r.child,null,o),r=L1(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function JM(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),s1(r.return,i,o)}function P1(r,i,o,u,f){var h=r.memoizedState;h===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(h.isBackwards=i,h.rendering=null,h.renderingStartTime=0,h.last=u,h.tail=o,h.tailMode=f)}function QM(r,i,o){var u=i.pendingProps,f=u.revealOrder,h=u.tail;if(Cn(r,i,u.children,o),u=un.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&JM(r,o,i);else if(r.tag===19)JM(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(it(un,u),f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&xp(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),P1(i,!1,f,o,h);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&xp(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}P1(i,!0,o,null,h);break;case"together":P1(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Oi(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Ea|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Kf(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,o=_i(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=_i(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function q1(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&yp(r)))}function oK(r,i,o){switch(i.tag){case 3:$e(i,i.stateNode.containerInfo),da(i,cn,r.memoizedState.cache),qf();break;case 27:case 5:yS(i);break;case 4:$e(i,i.stateNode.containerInfo);break;case 10:da(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ba(i),i.flags|=128,null):(o&i.child.childLanes)!==0?GM(r,i,o):(ba(i),r=Oi(r,i,o),r!==null?r.sibling:null);ba(i);break;case 19:var f=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Kf(r,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return QM(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),it(un,un.current),u)break;return null;case 22:case 23:return i.lanes=0,BM(r,i,o);case 24:da(i,cn,r.memoizedState.cache)}return Oi(r,i,o)}function XM(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)_n=!0;else{if(!q1(r,o)&&(i.flags&128)===0)return _n=!1,oK(r,i,o);_n=(r.flags&131072)!==0}else _n=!1,ie&&(i.flags&1048576)!==0&&Rk(i,gp,i.index);switch(i.lanes=0,i.tag){case 16:t:{r=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")XS(u)?(r=Eo(u,r),i.tag=1,i=VM(null,i,u,r,o)):(i.tag=0,i=F1(null,i,u,r,o));else{if(u!=null){if(f=u.$$typeof,f===P){i.tag=11,i=jM(null,i,u,r,o);break t}else if(f===K){i.tag=14,i=PM(null,i,u,r,o);break t}}throw i=ut(u)||u,Error(s(306,i,""))}}return i;case 0:return F1(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=Eo(u,i.pendingProps),VM(r,i,u,f,o);case 3:t:{if($e(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var h=i.memoizedState;f=h.element,f1(r,i),Xf(i,u,null,o);var g=i.memoizedState;if(u=g.cache,da(i,cn,u),u!==h.cache&&i1(i,[cn],o,!0),Qf(),u=g.element,h.isDehydrated)if(h={element:u,isDehydrated:!1,cache:g.cache},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){i=YM(r,i,u,o);break t}else if(u!==f){f=Jr(Error(s(424)),i),Bf(f),i=YM(r,i,u,o);break t}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ce=bs(r.firstChild),er=i,ie=!0,bo=null,Ps=!0,o=MM(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(qf(),u===f){i=Oi(r,i,o);break t}Cn(r,i,u,o)}i=i.child}return i;case 26:return Dp(r,i),r===null?(o=eA(i.type,null,i.pendingProps,null))?i.memoizedState=o:ie||(o=i.type,r=i.pendingProps,u=Xp(Tt.current).createElement(o),u[Vn]=i,u[dr]=r,xn(u,o,r),bn(u),i.stateNode=u):i.memoizedState=eA(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return yS(i),r===null&&ie&&(u=i.stateNode=Z2(i.type,i.pendingProps,Tt.current),er=i,Ps=!0,f=Ce,ka(i.type)?($0=f,Ce=bs(u.firstChild)):Ce=f),Cn(r,i,i.pendingProps.children,o),Dp(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&ie&&((f=u=Ce)&&(u=FK(u,i.type,i.pendingProps,Ps),u!==null?(i.stateNode=u,er=i,Ce=bs(u.firstChild),Ps=!1,f=!0):f=!1),f||_o(i)),yS(i),f=i.type,h=i.pendingProps,g=r!==null?r.memoizedProps:null,u=h.children,b0(f,h)?u=null:g!==null&&b0(f,g)&&(i.flags|=32),i.memoizedState!==null&&(f=y1(r,i,WB,null,null,o),_h._currentValue=f),Dp(r,i),Cn(r,i,u,o),i.child;case 6:return r===null&&ie&&((r=o=Ce)&&(o=DK(o,i.pendingProps,Ps),o!==null?(i.stateNode=o,er=i,Ce=null,r=!0):r=!1),r||_o(i)),null;case 13:return GM(r,i,o);case 4:return $e(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=uu(i,null,u,o):Cn(r,i,u,o),i.child;case 11:return jM(r,i,i.type,i.pendingProps,o);case 7:return Cn(r,i,i.pendingProps,o),i.child;case 8:return Cn(r,i,i.pendingProps.children,o),i.child;case 12:return Cn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,da(i,i.type,u.value),Cn(r,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,vo(i),f=Yn(f),u=u(f),i.flags|=1,Cn(r,i,u,o),i.child;case 14:return PM(r,i,i.type,i.pendingProps,o);case 15:return qM(r,i,i.type,i.pendingProps,o);case 19:return QM(r,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},r===null?(o=zp(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=_i(r.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return BM(r,i,o);case 24:return vo(i),u=Yn(cn),r===null?(f=c1(),f===null&&(f=ye,h=a1(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=o),f=h),i.memoizedState={parent:u,cache:f},l1(i),da(i,cn,f)):((r.lanes&o)!==0&&(f1(r,i),Xf(i,null,null,o),Qf()),f=r.memoizedState,h=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),da(i,cn,u)):(u=h.cache,da(i,cn,u),u!==f.cache&&i1(i,[cn],o,!0))),Cn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ri(r){r.flags|=4}function ZM(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!aA(i)){if(i=Wr.current,i!==null&&((Zt&4194048)===Zt?qs!==null:(Zt&62914560)!==Zt&&(Zt&536870912)===0||i!==qs))throw Gf=u1,Fk;r.flags|=8192}}function Up(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?AR():536870912,r.lanes|=i,du|=i)}function sh(r,i){if(!ie)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Oe(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function cK(r,i,o){var u=i.pendingProps;switch(e1(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(i),null;case 1:return Oe(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),wi(cn),ua(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Pf(i)?Ri(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ak())),Oe(i),null;case 26:return o=i.memoizedState,r===null?(Ri(i),o!==null?(Oe(i),ZM(i,o)):(Oe(i),i.flags&=-16777217)):o?o!==r.memoizedState?(Ri(i),Oe(i),ZM(i,o)):(Oe(i),i.flags&=-16777217):(r.memoizedProps!==u&&Ri(i),Oe(i),i.flags&=-16777217),null;case 27:Jm(i),o=Tt.current;var f=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Ri(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Oe(i),null}r=pt.current,Pf(i)?kk(i):(r=Z2(f,u,o),i.stateNode=r,Ri(i))}return Oe(i),null;case 5:if(Jm(i),o=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Ri(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Oe(i),null}if(r=pt.current,Pf(i))kk(i);else{switch(f=Xp(Tt.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}r[Vn]=i,r[dr]=u;t:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break t;for(;f.sibling===null;){if(f.return===null||f.return===i)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=r;t:switch(xn(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&Ri(i)}}return Oe(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Ri(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=Tt.current,Pf(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,f=er,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Vn]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||H2(r.nodeValue,o)),r||_o(i)}else r=Xp(r).createTextNode(u),r[Vn]=i,i.stateNode=r}return Oe(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Pf(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Vn]=i}else qf(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Oe(i),f=!1}else f=Ak(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Ti(i),i):(Ti(i),null)}if(Ti(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var h=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(h=u.memoizedState.cachePool.pool),h!==f&&(u.flags|=2048)}return o!==r&&o&&(i.child.flags|=8192),Up(i,i.updateQueue),Oe(i),null;case 4:return ua(),r===null&&d0(i.stateNode.containerInfo),Oe(i),null;case 10:return wi(i.type),Oe(i),null;case 19:if(ot(un),f=i.memoizedState,f===null)return Oe(i),null;if(u=(i.flags&128)!==0,h=f.rendering,h===null)if(u)sh(f,!1);else{if(Ne!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(h=xp(r),h!==null){for(i.flags|=128,sh(f,!1),r=h.updateQueue,i.updateQueue=r,Up(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)Ok(o,r),o=o.sibling;return it(un,un.current&1|2),i.child}r=r.sibling}f.tail!==null&&js()>Pp&&(i.flags|=128,u=!0,sh(f,!1),i.lanes=4194304)}else{if(!u)if(r=xp(h),r!==null){if(i.flags|=128,u=!0,r=r.updateQueue,i.updateQueue=r,Up(i,r),sh(f,!0),f.tail===null&&f.tailMode==="hidden"&&!h.alternate&&!ie)return Oe(i),null}else 2*js()-f.renderingStartTime>Pp&&o!==536870912&&(i.flags|=128,u=!0,sh(f,!1),i.lanes=4194304);f.isBackwards?(h.sibling=i.child,i.child=h):(r=f.last,r!==null?r.sibling=h:i.child=h,f.last=h)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=js(),i.sibling=null,r=un.current,it(un,u?r&1|2:r&1),i):(Oe(i),null);case 22:case 23:return Ti(i),p1(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Oe(i),i.subtreeFlags&6&&(i.flags|=8192)):Oe(i),o=i.updateQueue,o!==null&&Up(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&ot($o),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),wi(cn),Oe(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function uK(r,i){switch(e1(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return wi(cn),ua(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Jm(i),null;case 13:if(Ti(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));qf()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ot(un),null;case 4:return ua(),null;case 10:return wi(i.type),null;case 22:case 23:return Ti(i),p1(),r!==null&&ot($o),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return wi(cn),null;case 25:return null;default:return null}}function WM(r,i){switch(e1(i),i.tag){case 3:wi(cn),ua();break;case 26:case 27:case 5:Jm(i);break;case 4:ua();break;case 13:Ti(i);break;case 19:ot(un);break;case 10:wi(i.type);break;case 22:case 23:Ti(i),p1(),r!==null&&ot($o);break;case 24:wi(cn)}}function ih(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var h=o.create,g=o.inst;u=h(),g.destroy=u}o=o.next}while(o!==f)}}catch(_){ge(i,i.return,_)}}function Sa(r,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var h=f.next;u=h;do{if((u.tag&r)===r){var g=u.inst,_=g.destroy;if(_!==void 0){g.destroy=void 0,f=i;var T=o,F=_;try{F()}catch(H){ge(f,T,H)}}}u=u.next}while(u!==h)}}catch(H){ge(i,i.return,H)}}function t2(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{Pk(i,o)}catch(u){ge(r,r.return,u)}}}function e2(r,i,o){o.props=Eo(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){ge(r,i,u)}}function ah(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){ge(r,i,f)}}function Bs(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ge(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ge(r,i,f)}else o.current=null}function n2(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ge(r,r.return,f)}}function B1(r,i,o){try{var u=r.stateNode;AK(u,r.type,o,i),u[dr]=i}catch(f){ge(r,r.return,f)}}function r2(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ka(r.type)||r.tag===4}function K1(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||r2(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ka(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function H1(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Qp));else if(u!==4&&(u===27&&ka(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(H1(r,i,o),r=r.sibling;r!==null;)H1(r,i,o),r=r.sibling}function Lp(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&ka(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Lp(r,i,o),r=r.sibling;r!==null;)Lp(r,i,o),r=r.sibling}function s2(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);xn(i,u,o),i[Vn]=r,i[dr]=o}catch(h){ge(r,r.return,h)}}var ki=!1,Pe=!1,V1=!1,i2=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function lK(r,i){if(r=r.containerInfo,g0=rg,r=gk(r),KS(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else t:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{o.nodeType,h.nodeType}catch{o=null;break t}var g=0,_=-1,T=-1,F=0,H=0,J=r,L=null;e:for(;;){for(var j;J!==o||f!==0&&J.nodeType!==3||(_=g+f),J!==h||u!==0&&J.nodeType!==3||(T=g+u),J.nodeType===3&&(g+=J.nodeValue.length),(j=J.firstChild)!==null;)L=J,J=j;for(;;){if(J===r)break e;if(L===o&&++F===f&&(_=g),L===h&&++H===u&&(T=g),(j=J.nextSibling)!==null)break;J=L,L=J.parentNode}J=j}o=_===-1||T===-1?null:{start:_,end:T}}else o=null}o=o||{start:0,end:0}}else o=null;for(y0={focusedElem:r,selectionRange:o},rg=!1,Sn=i;Sn!==null;)if(i=Sn,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,Sn=r;else for(;Sn!==null;){switch(i=Sn,h=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&h!==null){r=void 0,o=i,f=h.memoizedProps,h=h.memoizedState,u=o.stateNode;try{var $t=Eo(o.type,f,o.elementType===o.type);r=u.getSnapshotBeforeUpdate($t,h),u.__reactInternalSnapshotBeforeUpdate=r}catch(gt){ge(o,o.return,gt)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)S0(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":S0(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Sn=r;break}Sn=i.return}}function a2(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:va(r,o),u&4&&ih(5,o);break;case 1:if(va(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(g){ge(o,o.return,g)}else{var f=Eo(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(g){ge(o,o.return,g)}}u&64&&t2(o),u&512&&ah(o,o.return);break;case 3:if(va(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Pk(r,i)}catch(g){ge(o,o.return,g)}}break;case 27:i===null&&u&4&&s2(o);case 26:case 5:va(r,o),i===null&&u&4&&n2(o),u&512&&ah(o,o.return);break;case 12:va(r,o);break;case 13:va(r,o),u&4&&u2(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=_K.bind(null,o),zK(r,o))));break;case 22:if(u=o.memoizedState!==null||ki,!u){i=i!==null&&i.memoizedState!==null||Pe,f=ki;var h=Pe;ki=u,(Pe=i)&&!h?$a(r,o,(o.subtreeFlags&8772)!==0):va(r,o),ki=f,Pe=h}break;case 30:break;default:va(r,o)}}function o2(r){var i=r.alternate;i!==null&&(r.alternate=null,o2(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&TS(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var we=null,gr=!1;function Mi(r,i,o){for(o=o.child;o!==null;)c2(r,i,o),o=o.sibling}function c2(r,i,o){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount(Rf,o)}catch{}switch(o.tag){case 26:Pe||Bs(o,i),Mi(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Pe||Bs(o,i);var u=we,f=gr;ka(o.type)&&(we=o.stateNode,gr=!1),Mi(r,i,o),ph(o.stateNode),we=u,gr=f;break;case 5:Pe||Bs(o,i);case 6:if(u=we,f=gr,we=null,Mi(r,i,o),we=u,gr=f,we!==null)if(gr)try{(we.nodeType===9?we.body:we.nodeName==="HTML"?we.ownerDocument.body:we).removeChild(o.stateNode)}catch(h){ge(o,i,h)}else try{we.removeChild(o.stateNode)}catch(h){ge(o,i,h)}break;case 18:we!==null&&(gr?(r=we,Q2(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),wh(r)):Q2(we,o.stateNode));break;case 4:u=we,f=gr,we=o.stateNode.containerInfo,gr=!0,Mi(r,i,o),we=u,gr=f;break;case 0:case 11:case 14:case 15:Pe||Sa(2,o,i),Pe||Sa(4,o,i),Mi(r,i,o);break;case 1:Pe||(Bs(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&e2(o,i,u)),Mi(r,i,o);break;case 21:Mi(r,i,o);break;case 22:Pe=(u=Pe)||o.memoizedState!==null,Mi(r,i,o),Pe=u;break;default:Mi(r,i,o)}}function u2(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{wh(r)}catch(o){ge(i,i.return,o)}}function fK(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new i2),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new i2),i;default:throw Error(s(435,r.tag))}}function Y1(r,i){var o=fK(r);i.forEach(function(u){var f=SK.bind(null,r,u);o.has(u)||(o.add(u),u.then(f,f))})}function Ir(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],h=r,g=i,_=g;t:for(;_!==null;){switch(_.tag){case 27:if(ka(_.type)){we=_.stateNode,gr=!1;break t}break;case 5:we=_.stateNode,gr=!1;break t;case 3:case 4:we=_.stateNode.containerInfo,gr=!0;break t}_=_.return}if(we===null)throw Error(s(160));c2(h,g,f),we=null,gr=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)l2(i,r),i=i.sibling}var ys=null;function l2(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ir(i,r),Fr(r),u&4&&(Sa(3,r,r.return),ih(3,r),Sa(5,r,r.return));break;case 1:Ir(i,r),Fr(r),u&512&&(Pe||o===null||Bs(o,o.return)),u&64&&ki&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ys;if(Ir(i,r),Fr(r),u&512&&(Pe||o===null||Bs(o,o.return)),u&4){var h=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){t:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":h=f.getElementsByTagName("title")[0],(!h||h[Af]||h[Vn]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(u),f.head.insertBefore(h,f.querySelector("head > title"))),xn(h,u,o),h[Vn]=r,bn(h),u=h;break t;case"link":var g=sA("link","href",f).get(u+(o.href||""));if(g){for(var _=0;_<g.length;_++)if(h=g[_],h.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&h.getAttribute("rel")===(o.rel==null?null:o.rel)&&h.getAttribute("title")===(o.title==null?null:o.title)&&h.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){g.splice(_,1);break e}}h=f.createElement(u),xn(h,u,o),f.head.appendChild(h);break;case"meta":if(g=sA("meta","content",f).get(u+(o.content||""))){for(_=0;_<g.length;_++)if(h=g[_],h.getAttribute("content")===(o.content==null?null:""+o.content)&&h.getAttribute("name")===(o.name==null?null:o.name)&&h.getAttribute("property")===(o.property==null?null:o.property)&&h.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&h.getAttribute("charset")===(o.charSet==null?null:o.charSet)){g.splice(_,1);break e}}h=f.createElement(u),xn(h,u,o),f.head.appendChild(h);break;default:throw Error(s(468,u))}h[Vn]=r,bn(h),u=h}r.stateNode=u}else iA(f,r.type,r.stateNode);else r.stateNode=rA(f,u,r.memoizedProps);else h!==u?(h===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):h.count--,u===null?iA(f,r.type,r.stateNode):rA(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&B1(r,r.memoizedProps,o.memoizedProps)}break;case 27:Ir(i,r),Fr(r),u&512&&(Pe||o===null||Bs(o,o.return)),o!==null&&u&4&&B1(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Ir(i,r),Fr(r),u&512&&(Pe||o===null||Bs(o,o.return)),r.flags&32){f=r.stateNode;try{Hc(f,"")}catch(j){ge(r,r.return,j)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,B1(r,f,o!==null?o.memoizedProps:f)),u&1024&&(V1=!0);break;case 6:if(Ir(i,r),Fr(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(j){ge(r,r.return,j)}}break;case 3:if(tg=null,f=ys,ys=Zp(i.containerInfo),Ir(i,r),ys=f,Fr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{wh(i.containerInfo)}catch(j){ge(r,r.return,j)}V1&&(V1=!1,f2(r));break;case 4:u=ys,ys=Zp(r.stateNode.containerInfo),Ir(i,r),Fr(r),ys=u;break;case 12:Ir(i,r),Fr(r);break;case 13:Ir(i,r),Fr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(W1=js()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Y1(r,u)));break;case 22:f=r.memoizedState!==null;var T=o!==null&&o.memoizedState!==null,F=ki,H=Pe;if(ki=F||f,Pe=H||T,Ir(i,r),Pe=H,ki=F,Fr(r),u&8192)t:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||T||ki||Pe||To(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){T=o=i;try{if(h=T.stateNode,f)g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{_=T.stateNode;var J=T.memoizedProps.style,L=J!=null&&J.hasOwnProperty("display")?J.display:null;_.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(j){ge(T,T.return,j)}}}else if(i.tag===6){if(o===null){T=i;try{T.stateNode.nodeValue=f?"":T.memoizedProps}catch(j){ge(T,T.return,j)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Y1(r,o))));break;case 19:Ir(i,r),Fr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Y1(r,u)));break;case 30:break;case 21:break;default:Ir(i,r),Fr(r)}}function Fr(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(r2(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,h=K1(r);Lp(r,h,f);break;case 5:var g=o.stateNode;o.flags&32&&(Hc(g,""),o.flags&=-33);var _=K1(r);Lp(r,_,g);break;case 3:case 4:var T=o.stateNode.containerInfo,F=K1(r);H1(r,F,T);break;default:throw Error(s(161))}}catch(H){ge(r,r.return,H)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function f2(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;f2(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function va(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)a2(r,i.alternate,i),i=i.sibling}function To(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Sa(4,i,i.return),To(i);break;case 1:Bs(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&e2(i,i.return,o),To(i);break;case 27:ph(i.stateNode);case 26:case 5:Bs(i,i.return),To(i);break;case 22:i.memoizedState===null&&To(i);break;case 30:To(i);break;default:To(i)}r=r.sibling}}function $a(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,h=i,g=h.flags;switch(h.tag){case 0:case 11:case 15:$a(f,h,o),ih(4,h);break;case 1:if($a(f,h,o),u=h,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){ge(u,u.return,F)}if(u=h,f=u.updateQueue,f!==null){var _=u.stateNode;try{var T=f.shared.hiddenCallbacks;if(T!==null)for(f.shared.hiddenCallbacks=null,f=0;f<T.length;f++)jk(T[f],_)}catch(F){ge(u,u.return,F)}}o&&g&64&&t2(h),ah(h,h.return);break;case 27:s2(h);case 26:case 5:$a(f,h,o),o&&u===null&&g&4&&n2(h),ah(h,h.return);break;case 12:$a(f,h,o);break;case 13:$a(f,h,o),o&&g&4&&u2(f,h);break;case 22:h.memoizedState===null&&$a(f,h,o),ah(h,h.return);break;case 30:break;default:$a(f,h,o)}i=i.sibling}}function G1(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Hf(o))}function J1(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Hf(r))}function Ks(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)h2(r,i,o,u),i=i.sibling}function h2(r,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ks(r,i,o,u),f&2048&&ih(9,i);break;case 1:Ks(r,i,o,u);break;case 3:Ks(r,i,o,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Hf(r)));break;case 12:if(f&2048){Ks(r,i,o,u),r=i.stateNode;try{var h=i.memoizedProps,g=h.id,_=h.onPostCommit;typeof _=="function"&&_(g,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(T){ge(i,i.return,T)}}else Ks(r,i,o,u);break;case 13:Ks(r,i,o,u);break;case 23:break;case 22:h=i.stateNode,g=i.alternate,i.memoizedState!==null?h._visibility&2?Ks(r,i,o,u):oh(r,i):h._visibility&2?Ks(r,i,o,u):(h._visibility|=2,lu(r,i,o,u,(i.subtreeFlags&10256)!==0)),f&2048&&G1(g,i);break;case 24:Ks(r,i,o,u),f&2048&&J1(i.alternate,i);break;default:Ks(r,i,o,u)}}function lu(r,i,o,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var h=r,g=i,_=o,T=u,F=g.flags;switch(g.tag){case 0:case 11:case 15:lu(h,g,_,T,f),ih(8,g);break;case 23:break;case 22:var H=g.stateNode;g.memoizedState!==null?H._visibility&2?lu(h,g,_,T,f):oh(h,g):(H._visibility|=2,lu(h,g,_,T,f)),f&&F&2048&&G1(g.alternate,g);break;case 24:lu(h,g,_,T,f),f&&F&2048&&J1(g.alternate,g);break;default:lu(h,g,_,T,f)}i=i.sibling}}function oh(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,f=u.flags;switch(u.tag){case 22:oh(o,u),f&2048&&G1(u.alternate,u);break;case 24:oh(o,u),f&2048&&J1(u.alternate,u);break;default:oh(o,u)}i=i.sibling}}var ch=8192;function fu(r){if(r.subtreeFlags&ch)for(r=r.child;r!==null;)d2(r),r=r.sibling}function d2(r){switch(r.tag){case 26:fu(r),r.flags&ch&&r.memoizedState!==null&&QK(ys,r.memoizedState,r.memoizedProps);break;case 5:fu(r);break;case 3:case 4:var i=ys;ys=Zp(r.stateNode.containerInfo),fu(r),ys=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=ch,ch=16777216,fu(r),ch=i):fu(r));break;default:fu(r)}}function m2(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function uh(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Sn=u,g2(u,r)}m2(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)p2(r),r=r.sibling}function p2(r){switch(r.tag){case 0:case 11:case 15:uh(r),r.flags&2048&&Sa(9,r,r.return);break;case 3:uh(r);break;case 12:uh(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,jp(r)):uh(r);break;default:uh(r)}}function jp(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Sn=u,g2(u,r)}m2(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Sa(8,i,i.return),jp(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,jp(i));break;default:jp(i)}r=r.sibling}}function g2(r,i){for(;Sn!==null;){var o=Sn;switch(o.tag){case 0:case 11:case 15:Sa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Hf(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Sn=u;else t:for(o=r;Sn!==null;){u=Sn;var f=u.sibling,h=u.return;if(o2(u),u===o){Sn=null;break t}if(f!==null){f.return=h,Sn=f;break t}Sn=h}}}var hK={getCacheForType:function(r){var i=Yn(cn),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o}},dK=typeof WeakMap=="function"?WeakMap:Map,ae=0,ye=null,Vt=null,Zt=0,oe=0,Dr=null,wa=!1,hu=!1,Q1=!1,Ai=0,Ne=0,Ea=0,Oo=0,X1=0,ts=0,du=0,lh=null,yr=null,Z1=!1,W1=0,Pp=1/0,qp=null,Ta=null,Nn=0,Oa=null,mu=null,pu=0,t0=0,e0=null,y2=null,fh=0,n0=null;function zr(){if((ae&2)!==0&&Zt!==0)return Zt&-Zt;if(z.T!==null){var r=nu;return r!==0?r:u0()}return xR()}function b2(){ts===0&&(ts=(Zt&536870912)===0||ie?MR():536870912);var r=Wr.current;return r!==null&&(r.flags|=32),ts}function Ur(r,i,o){(r===ye&&(oe===2||oe===9)||r.cancelPendingCommit!==null)&&(gu(r,0),Ra(r,Zt,ts,!1)),Mf(r,o),((ae&2)===0||r!==ye)&&(r===ye&&((ae&2)===0&&(Oo|=o),Ne===4&&Ra(r,Zt,ts,!1)),Hs(r))}function _2(r,i,o){if((ae&6)!==0)throw Error(s(327));var u=!o&&(i&124)===0&&(i&r.expiredLanes)===0||kf(r,i),f=u?gK(r,i):i0(r,i,!0),h=u;do{if(f===0){hu&&!u&&Ra(r,i,0,!1);break}else{if(o=r.current.alternate,h&&!mK(o)){f=i0(r,i,!1),h=!1;continue}if(f===2){if(h=i,r.errorRecoveryDisabledLanes&h)var g=0;else g=r.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){i=g;t:{var _=r;f=lh;var T=_.current.memoizedState.isDehydrated;if(T&&(gu(_,g).flags|=256),g=i0(_,g,!1),g!==2){if(Q1&&!T){_.errorRecoveryDisabledLanes|=h,Oo|=h,f=4;break t}h=yr,yr=f,h!==null&&(yr===null?yr=h:yr.push.apply(yr,h))}f=g}if(h=!1,f!==2)continue}}if(f===1){gu(r,0),Ra(r,i,0,!0);break}t:{switch(u=r,h=f,h){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ra(u,i,ts,!wa);break t;case 2:yr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=W1+300-js(),10<f)){if(Ra(u,i,ts,!wa),Wm(u,0,!0)!==0)break t;u.timeoutHandle=G2(S2.bind(null,u,o,yr,qp,Z1,i,ts,Oo,du,wa,h,2,-0,0),f);break t}S2(u,o,yr,qp,Z1,i,ts,Oo,du,wa,h,0,-0,0)}}break}while(!0);Hs(r)}function S2(r,i,o,u,f,h,g,_,T,F,H,J,L,j){if(r.timeoutHandle=-1,J=i.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(bh={stylesheets:null,count:0,unsuspend:JK},d2(i),J=XK(),J!==null)){r.cancelPendingCommit=J(R2.bind(null,r,i,h,o,u,f,g,_,T,H,1,L,j)),Ra(r,h,g,!F);return}R2(r,i,h,o,u,f,g,_,T)}function mK(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],h=f.getSnapshot;f=f.value;try{if(!Nr(h(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ra(r,i,o,u){i&=~X1,i&=~Oo,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var h=31-Cr(f),g=1<<h;u[h]=-1,f&=~g}o!==0&&CR(r,o,i)}function Bp(){return(ae&6)===0?(hh(0),!1):!0}function r0(){if(Vt!==null){if(oe===0)var r=Vt.return;else r=Vt,$i=So=null,S1(r),cu=null,nh=0,r=Vt;for(;r!==null;)WM(r.alternate,r),r=r.return;Vt=null}}function gu(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,NK(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),r0(),ye=r,Vt=o=_i(r.current,null),Zt=i,oe=0,Dr=null,wa=!1,hu=kf(r,i),Q1=!1,du=ts=X1=Oo=Ea=Ne=0,yr=lh=null,Z1=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-Cr(u),h=1<<f;i|=r[f],u&=~h}return Ai=i,fp(),o}function v2(r,i){Bt=null,z.H=Ap,i===Yf||i===Sp?(i=Uk(),oe=3):i===Fk?(i=Uk(),oe=4):oe=i===LM?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Dr=i,Vt===null&&(Ne=1,Fp(r,Jr(i,r.current)))}function $2(){var r=z.H;return z.H=Ap,r===null?Ap:r}function w2(){var r=z.A;return z.A=hK,r}function s0(){Ne=4,wa||(Zt&4194048)!==Zt&&Wr.current!==null||(hu=!0),(Ea&134217727)===0&&(Oo&134217727)===0||ye===null||Ra(ye,Zt,ts,!1)}function i0(r,i,o){var u=ae;ae|=2;var f=$2(),h=w2();(ye!==r||Zt!==i)&&(qp=null,gu(r,i)),i=!1;var g=Ne;t:do try{if(oe!==0&&Vt!==null){var _=Vt,T=Dr;switch(oe){case 8:r0(),g=6;break t;case 3:case 2:case 9:case 6:Wr.current===null&&(i=!0);var F=oe;if(oe=0,Dr=null,yu(r,_,T,F),o&&hu){g=0;break t}break;default:F=oe,oe=0,Dr=null,yu(r,_,T,F)}}pK(),g=Ne;break}catch(H){v2(r,H)}while(!0);return i&&r.shellSuspendCounter++,$i=So=null,ae=u,z.H=f,z.A=h,Vt===null&&(ye=null,Zt=0,fp()),g}function pK(){for(;Vt!==null;)E2(Vt)}function gK(r,i){var o=ae;ae|=2;var u=$2(),f=w2();ye!==r||Zt!==i?(qp=null,Pp=js()+500,gu(r,i)):hu=kf(r,i);t:do try{if(oe!==0&&Vt!==null){i=Vt;var h=Dr;e:switch(oe){case 1:oe=0,Dr=null,yu(r,i,h,1);break;case 2:case 9:if(Dk(h)){oe=0,Dr=null,T2(i);break}i=function(){oe!==2&&oe!==9||ye!==r||(oe=7),Hs(r)},h.then(i,i);break t;case 3:oe=7;break t;case 4:oe=5;break t;case 7:Dk(h)?(oe=0,Dr=null,T2(i)):(oe=0,Dr=null,yu(r,i,h,7));break;case 5:var g=null;switch(Vt.tag){case 26:g=Vt.memoizedState;case 5:case 27:var _=Vt;if(!g||aA(g)){oe=0,Dr=null;var T=_.sibling;if(T!==null)Vt=T;else{var F=_.return;F!==null?(Vt=F,Kp(F)):Vt=null}break e}}oe=0,Dr=null,yu(r,i,h,5);break;case 6:oe=0,Dr=null,yu(r,i,h,6);break;case 8:r0(),Ne=6;break t;default:throw Error(s(462))}}yK();break}catch(H){v2(r,H)}while(!0);return $i=So=null,z.H=u,z.A=f,ae=o,Vt!==null?0:(ye=null,Zt=0,fp(),Ne)}function yK(){for(;Vt!==null&&!Lq();)E2(Vt)}function E2(r){var i=XM(r.alternate,r,Ai);r.memoizedProps=r.pendingProps,i===null?Kp(r):Vt=i}function T2(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=HM(o,i,i.pendingProps,i.type,void 0,Zt);break;case 11:i=HM(o,i,i.pendingProps,i.type.render,i.ref,Zt);break;case 5:S1(i);default:WM(o,i),i=Vt=Ok(i,Ai),i=XM(o,i,Ai)}r.memoizedProps=r.pendingProps,i===null?Kp(r):Vt=i}function yu(r,i,o,u){$i=So=null,S1(i),cu=null,nh=0;var f=i.return;try{if(aK(r,f,i,o,Zt)){Ne=1,Fp(r,Jr(o,r.current)),Vt=null;return}}catch(h){if(f!==null)throw Vt=f,h;Ne=1,Fp(r,Jr(o,r.current)),Vt=null;return}i.flags&32768?(ie||u===1?r=!0:hu||(Zt&536870912)!==0?r=!1:(wa=r=!0,(u===2||u===9||u===3||u===6)&&(u=Wr.current,u!==null&&u.tag===13&&(u.flags|=16384))),O2(i,r)):Kp(i)}function Kp(r){var i=r;do{if((i.flags&32768)!==0){O2(i,wa);return}r=i.return;var o=cK(i.alternate,i,Ai);if(o!==null){Vt=o;return}if(i=i.sibling,i!==null){Vt=i;return}Vt=i=r}while(i!==null);Ne===0&&(Ne=5)}function O2(r,i){do{var o=uK(r.alternate,r);if(o!==null){o.flags&=32767,Vt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){Vt=r;return}Vt=r=o}while(r!==null);Ne=6,Vt=null}function R2(r,i,o,u,f,h,g,_,T){r.cancelPendingCommit=null;do Hp();while(Nn!==0);if((ae&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(h=i.lanes|i.childLanes,h|=JS,Jq(r,o,h,g,_,T),r===ye&&(Vt=ye=null,Zt=0),mu=i,Oa=r,pu=o,t0=h,e0=f,y2=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,vK(Qm,function(){return N2(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=z.T,z.T=null,f=G.p,G.p=2,g=ae,ae|=4;try{lK(r,i,o)}finally{ae=g,G.p=f,z.T=u}}Nn=1,k2(),M2(),A2()}}function k2(){if(Nn===1){Nn=0;var r=Oa,i=mu,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=z.T,z.T=null;var u=G.p;G.p=2;var f=ae;ae|=4;try{l2(i,r);var h=y0,g=gk(r.containerInfo),_=h.focusedElem,T=h.selectionRange;if(g!==_&&_&&_.ownerDocument&&pk(_.ownerDocument.documentElement,_)){if(T!==null&&KS(_)){var F=T.start,H=T.end;if(H===void 0&&(H=F),"selectionStart"in _)_.selectionStart=F,_.selectionEnd=Math.min(H,_.value.length);else{var J=_.ownerDocument||document,L=J&&J.defaultView||window;if(L.getSelection){var j=L.getSelection(),$t=_.textContent.length,gt=Math.min(T.start,$t),de=T.end===void 0?gt:Math.min(T.end,$t);!j.extend&&gt>de&&(g=de,de=gt,gt=g);var M=mk(_,gt),R=mk(_,de);if(M&&R&&(j.rangeCount!==1||j.anchorNode!==M.node||j.anchorOffset!==M.offset||j.focusNode!==R.node||j.focusOffset!==R.offset)){var I=J.createRange();I.setStart(M.node,M.offset),j.removeAllRanges(),gt>de?(j.addRange(I),j.extend(R.node,R.offset)):(I.setEnd(R.node,R.offset),j.addRange(I))}}}}for(J=[],j=_;j=j.parentNode;)j.nodeType===1&&J.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<J.length;_++){var V=J[_];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}rg=!!g0,y0=g0=null}finally{ae=f,G.p=u,z.T=o}}r.current=i,Nn=2}}function M2(){if(Nn===2){Nn=0;var r=Oa,i=mu,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=z.T,z.T=null;var u=G.p;G.p=2;var f=ae;ae|=4;try{a2(r,i.alternate,i)}finally{ae=f,G.p=u,z.T=o}}Nn=3}}function A2(){if(Nn===4||Nn===3){Nn=0,jq();var r=Oa,i=mu,o=pu,u=y2;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nn=5:(Nn=0,mu=Oa=null,C2(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Ta=null),wS(o),i=i.stateNode,Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot(Rf,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=z.T,f=G.p,G.p=2,z.T=null;try{for(var h=r.onRecoverableError,g=0;g<u.length;g++){var _=u[g];h(_.value,{componentStack:_.stack})}}finally{z.T=i,G.p=f}}(pu&3)!==0&&Hp(),Hs(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===n0?fh++:(fh=0,n0=r):fh=0,hh(0)}}function C2(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Hf(i)))}function Hp(r){return k2(),M2(),A2(),N2()}function N2(){if(Nn!==5)return!1;var r=Oa,i=t0;t0=0;var o=wS(pu),u=z.T,f=G.p;try{G.p=32>o?32:o,z.T=null,o=e0,e0=null;var h=Oa,g=pu;if(Nn=0,mu=Oa=null,pu=0,(ae&6)!==0)throw Error(s(331));var _=ae;if(ae|=4,p2(h.current),h2(h,h.current,g,o),ae=_,hh(0,!1),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot(Rf,h)}catch{}return!0}finally{G.p=f,z.T=u,C2(r,i)}}function x2(r,i,o){i=Jr(o,i),i=I1(r.stateNode,i,2),r=ga(r,i,2),r!==null&&(Mf(r,2),Hs(r))}function ge(r,i,o){if(r.tag===3)x2(r,r,o);else for(;i!==null;){if(i.tag===3){x2(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ta===null||!Ta.has(u))){r=Jr(o,r),o=zM(2),u=ga(i,o,2),u!==null&&(UM(o,u,i,r),Mf(u,2),Hs(u));break}}i=i.return}}function a0(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new dK;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(Q1=!0,f.add(o),r=bK.bind(null,r,i,o),i.then(r,r))}function bK(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,ye===r&&(Zt&o)===o&&(Ne===4||Ne===3&&(Zt&62914560)===Zt&&300>js()-W1?(ae&2)===0&&gu(r,0):X1|=o,du===Zt&&(du=0)),Hs(r)}function I2(r,i){i===0&&(i=AR()),r=Zc(r,i),r!==null&&(Mf(r,i),Hs(r))}function _K(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),I2(r,o)}function SK(r,i){var o=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),I2(r,o)}function vK(r,i){return _S(r,i)}var Vp=null,bu=null,o0=!1,Yp=!1,c0=!1,Ro=0;function Hs(r){r!==bu&&r.next===null&&(bu===null?Vp=bu=r:bu=bu.next=r),Yp=!0,o0||(o0=!0,wK())}function hh(r,i){if(!c0&&Yp){c0=!0;do for(var o=!1,u=Vp;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var h=0;else{var g=u.suspendedLanes,_=u.pingedLanes;h=(1<<31-Cr(42|r)+1)-1,h&=f&~(g&~_),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(o=!0,U2(u,h))}else h=Zt,h=Wm(u,u===ye?h:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(h&3)===0||kf(u,h)||(o=!0,U2(u,h));u=u.next}while(o);c0=!1}}function $K(){F2()}function F2(){Yp=o0=!1;var r=0;Ro!==0&&(CK()&&(r=Ro),Ro=0);for(var i=js(),o=null,u=Vp;u!==null;){var f=u.next,h=D2(u,i);h===0?(u.next=null,o===null?Vp=f:o.next=f,f===null&&(bu=o)):(o=u,(r!==0||(h&3)!==0)&&(Yp=!0)),u=f}hh(r)}function D2(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,h=r.pendingLanes&-62914561;0<h;){var g=31-Cr(h),_=1<<g,T=f[g];T===-1?((_&o)===0||(_&u)!==0)&&(f[g]=Gq(_,i)):T<=i&&(r.expiredLanes|=_),h&=~_}if(i=ye,o=Zt,o=Wm(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(oe===2||oe===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&SS(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||kf(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&SS(u),wS(o)){case 2:case 8:o=RR;break;case 32:o=Qm;break;case 268435456:o=kR;break;default:o=Qm}return u=z2.bind(null,r),o=_S(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&SS(u),r.callbackPriority=2,r.callbackNode=null,2}function z2(r,i){if(Nn!==0&&Nn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Hp()&&r.callbackNode!==o)return null;var u=Zt;return u=Wm(r,r===ye?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(_2(r,u,i),D2(r,js()),r.callbackNode!=null&&r.callbackNode===o?z2.bind(null,r):null)}function U2(r,i){if(Hp())return null;_2(r,i,!0)}function wK(){xK(function(){(ae&6)!==0?_S(OR,$K):F2()})}function u0(){return Ro===0&&(Ro=MR()),Ro}function L2(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:sp(""+r)}function j2(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function EK(r,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var h=L2((f[dr]||null).action),g=u.submitter;g&&(i=(i=g[dr]||null)?L2(i.formAction):g.getAttribute("formAction"),i!==null&&(h=i,g=null));var _=new cp("action","action",null,u,f);r.push({event:_,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ro!==0){var T=g?j2(f,g):new FormData(f);M1(o,{pending:!0,data:T,method:f.method,action:h},null,T)}}else typeof h=="function"&&(_.preventDefault(),T=g?j2(f,g):new FormData(f),M1(o,{pending:!0,data:T,method:f.method,action:h},h,T))},currentTarget:f}]})}}for(var l0=0;l0<GS.length;l0++){var f0=GS[l0],TK=f0.toLowerCase(),OK=f0[0].toUpperCase()+f0.slice(1);gs(TK,"on"+OK)}gs(_k,"onAnimationEnd"),gs(Sk,"onAnimationIteration"),gs(vk,"onAnimationStart"),gs("dblclick","onDoubleClick"),gs("focusin","onFocus"),gs("focusout","onBlur"),gs(BB,"onTransitionRun"),gs(KB,"onTransitionStart"),gs(HB,"onTransitionCancel"),gs($k,"onTransitionEnd"),qc("onMouseEnter",["mouseout","mouseover"]),qc("onMouseLeave",["mouseout","mouseover"]),qc("onPointerEnter",["pointerout","pointerover"]),qc("onPointerLeave",["pointerout","pointerover"]),lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lo("onBeforeInput",["compositionend","keypress","textInput","paste"]),lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RK=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dh));function P2(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;t:{var h=void 0;if(i)for(var g=u.length-1;0<=g;g--){var _=u[g],T=_.instance,F=_.currentTarget;if(_=_.listener,T!==h&&f.isPropagationStopped())break t;h=_,f.currentTarget=F;try{h(f)}catch(H){Ip(H)}f.currentTarget=null,h=T}else for(g=0;g<u.length;g++){if(_=u[g],T=_.instance,F=_.currentTarget,_=_.listener,T!==h&&f.isPropagationStopped())break t;h=_,f.currentTarget=F;try{h(f)}catch(H){Ip(H)}f.currentTarget=null,h=T}}}}function Yt(r,i){var o=i[ES];o===void 0&&(o=i[ES]=new Set);var u=r+"__bubble";o.has(u)||(q2(i,r,2,!1),o.add(u))}function h0(r,i,o){var u=0;i&&(u|=4),q2(o,r,u,i)}var Gp="_reactListening"+Math.random().toString(36).slice(2);function d0(r){if(!r[Gp]){r[Gp]=!0,FR.forEach(function(o){o!=="selectionchange"&&(RK.has(o)||h0(o,!1,r),h0(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Gp]||(i[Gp]=!0,h0("selectionchange",!1,i))}}function q2(r,i,o,u){switch(hA(i)){case 2:var f=t5;break;case 8:f=e5;break;default:f=R0}o=f.bind(null,i,o,r),f=void 0,!FS||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function m0(r,i,o,u,f){var h=u;if((i&1)===0&&(i&2)===0&&u!==null)t:for(;;){if(u===null)return;var g=u.tag;if(g===3||g===4){var _=u.stateNode.containerInfo;if(_===f)break;if(g===4)for(g=u.return;g!==null;){var T=g.tag;if((T===3||T===4)&&g.stateNode.containerInfo===f)return;g=g.return}for(;_!==null;){if(g=Lc(_),g===null)return;if(T=g.tag,T===5||T===6||T===26||T===27){u=h=g;continue t}_=_.parentNode}}u=u.return}JR(function(){var F=h,H=xS(o),J=[];t:{var L=wk.get(r);if(L!==void 0){var j=cp,$t=r;switch(r){case"keypress":if(ap(o)===0)break t;case"keydown":case"keyup":j=vB;break;case"focusin":$t="focus",j=LS;break;case"focusout":$t="blur",j=LS;break;case"beforeblur":case"afterblur":j=LS;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=ZR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=uB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=EB;break;case _k:case Sk:case vk:j=hB;break;case $k:j=OB;break;case"scroll":case"scrollend":j=oB;break;case"wheel":j=kB;break;case"copy":case"cut":case"paste":j=mB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=tk;break;case"toggle":case"beforetoggle":j=AB}var gt=(i&4)!==0,de=!gt&&(r==="scroll"||r==="scrollend"),M=gt?L!==null?L+"Capture":null:L;gt=[];for(var R=F,I;R!==null;){var V=R;if(I=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||I===null||M===null||(V=Nf(R,M),V!=null&&gt.push(mh(R,V,I))),de)break;R=R.return}0<gt.length&&(L=new j(L,$t,null,o,H),J.push({event:L,listeners:gt}))}}if((i&7)===0){t:{if(L=r==="mouseover"||r==="pointerover",j=r==="mouseout"||r==="pointerout",L&&o!==NS&&($t=o.relatedTarget||o.fromElement)&&(Lc($t)||$t[Uc]))break t;if((j||L)&&(L=H.window===H?H:(L=H.ownerDocument)?L.defaultView||L.parentWindow:window,j?($t=o.relatedTarget||o.toElement,j=F,$t=$t?Lc($t):null,$t!==null&&(de=c($t),gt=$t.tag,$t!==de||gt!==5&&gt!==27&&gt!==6)&&($t=null)):(j=null,$t=F),j!==$t)){if(gt=ZR,V="onMouseLeave",M="onMouseEnter",R="mouse",(r==="pointerout"||r==="pointerover")&&(gt=tk,V="onPointerLeave",M="onPointerEnter",R="pointer"),de=j==null?L:Cf(j),I=$t==null?L:Cf($t),L=new gt(V,R+"leave",j,o,H),L.target=de,L.relatedTarget=I,V=null,Lc(H)===F&&(gt=new gt(M,R+"enter",$t,o,H),gt.target=I,gt.relatedTarget=de,V=gt),de=V,j&&$t)e:{for(gt=j,M=$t,R=0,I=gt;I;I=_u(I))R++;for(I=0,V=M;V;V=_u(V))I++;for(;0<R-I;)gt=_u(gt),R--;for(;0<I-R;)M=_u(M),I--;for(;R--;){if(gt===M||M!==null&&gt===M.alternate)break e;gt=_u(gt),M=_u(M)}gt=null}else gt=null;j!==null&&B2(J,L,j,gt,!1),$t!==null&&de!==null&&B2(J,de,$t,gt,!0)}}t:{if(L=F?Cf(F):window,j=L.nodeName&&L.nodeName.toLowerCase(),j==="select"||j==="input"&&L.type==="file")var ct=ck;else if(ak(L))if(uk)ct=jB;else{ct=UB;var Ht=zB}else j=L.nodeName,!j||j.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?F&&CS(F.elementType)&&(ct=ck):ct=LB;if(ct&&(ct=ct(r,F))){ok(J,ct,o,H);break t}Ht&&Ht(r,L,F),r==="focusout"&&F&&L.type==="number"&&F.memoizedProps.value!=null&&AS(L,"number",L.value)}switch(Ht=F?Cf(F):window,r){case"focusin":(ak(Ht)||Ht.contentEditable==="true")&&(Jc=Ht,HS=F,jf=null);break;case"focusout":jf=HS=Jc=null;break;case"mousedown":VS=!0;break;case"contextmenu":case"mouseup":case"dragend":VS=!1,yk(J,o,H);break;case"selectionchange":if(qB)break;case"keydown":case"keyup":yk(J,o,H)}var dt;if(PS)t:{switch(r){case"compositionstart":var yt="onCompositionStart";break t;case"compositionend":yt="onCompositionEnd";break t;case"compositionupdate":yt="onCompositionUpdate";break t}yt=void 0}else Gc?sk(r,o)&&(yt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(yt="onCompositionStart");yt&&(ek&&o.locale!=="ko"&&(Gc||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&Gc&&(dt=QR()):(ha=H,DS="value"in ha?ha.value:ha.textContent,Gc=!0)),Ht=Jp(F,yt),0<Ht.length&&(yt=new WR(yt,r,null,o,H),J.push({event:yt,listeners:Ht}),dt?yt.data=dt:(dt=ik(o),dt!==null&&(yt.data=dt)))),(dt=NB?xB(r,o):IB(r,o))&&(yt=Jp(F,"onBeforeInput"),0<yt.length&&(Ht=new WR("onBeforeInput","beforeinput",null,o,H),J.push({event:Ht,listeners:yt}),Ht.data=dt)),EK(J,r,F,o,H)}P2(J,i)})}function mh(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Jp(r,i){for(var o=i+"Capture",u=[];r!==null;){var f=r,h=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=Nf(r,o),f!=null&&u.unshift(mh(r,f,h)),f=Nf(r,i),f!=null&&u.push(mh(r,f,h))),r.tag===3)return u;r=r.return}return[]}function _u(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function B2(r,i,o,u,f){for(var h=i._reactName,g=[];o!==null&&o!==u;){var _=o,T=_.alternate,F=_.stateNode;if(_=_.tag,T!==null&&T===u)break;_!==5&&_!==26&&_!==27||F===null||(T=F,f?(F=Nf(o,h),F!=null&&g.unshift(mh(o,F,T))):f||(F=Nf(o,h),F!=null&&g.push(mh(o,F,T)))),o=o.return}g.length!==0&&r.push({event:i,listeners:g})}var kK=/\r\n?/g,MK=/\u0000|\uFFFD/g;function K2(r){return(typeof r=="string"?r:""+r).replace(kK,`
`).replace(MK,"")}function H2(r,i){return i=K2(i),K2(r)===i}function Qp(){}function he(r,i,o,u,f,h){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Hc(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Hc(r,""+u);break;case"className":ep(r,"class",u);break;case"tabIndex":ep(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ep(r,o,u);break;case"style":YR(r,u,h);break;case"data":if(i!=="object"){ep(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=sp(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(o==="formAction"?(i!=="input"&&he(r,i,"name",f.name,f,null),he(r,i,"formEncType",f.formEncType,f,null),he(r,i,"formMethod",f.formMethod,f,null),he(r,i,"formTarget",f.formTarget,f,null)):(he(r,i,"encType",f.encType,f,null),he(r,i,"method",f.method,f,null),he(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=sp(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Qp);break;case"onScroll":u!=null&&Yt("scroll",r);break;case"onScrollEnd":u!=null&&Yt("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=sp(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Yt("beforetoggle",r),Yt("toggle",r),tp(r,"popover",u);break;case"xlinkActuate":yi(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":yi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":yi(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":yi(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":yi(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":yi(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":yi(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":yi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":yi(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":tp(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=iB.get(o)||o,tp(r,o,u))}}function p0(r,i,o,u,f,h){switch(o){case"style":YR(r,u,h);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Hc(r,u):(typeof u=="number"||typeof u=="bigint")&&Hc(r,""+u);break;case"onScroll":u!=null&&Yt("scroll",r);break;case"onScrollEnd":u!=null&&Yt("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Qp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!DR.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),h=r[dr]||null,h=h!=null?h[o]:null,typeof h=="function"&&r.removeEventListener(i,h,f),typeof u=="function")){typeof h!="function"&&h!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,f);break t}o in r?r[o]=u:u===!0?r.setAttribute(o,""):tp(r,o,u)}}}function xn(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",r),Yt("load",r);var u=!1,f=!1,h;for(h in o)if(o.hasOwnProperty(h)){var g=o[h];if(g!=null)switch(h){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:he(r,i,h,g,o,null)}}f&&he(r,i,"srcSet",o.srcSet,o,null),u&&he(r,i,"src",o.src,o,null);return;case"input":Yt("invalid",r);var _=h=g=f=null,T=null,F=null;for(u in o)if(o.hasOwnProperty(u)){var H=o[u];if(H!=null)switch(u){case"name":f=H;break;case"type":g=H;break;case"checked":T=H;break;case"defaultChecked":F=H;break;case"value":h=H;break;case"defaultValue":_=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:he(r,i,u,H,o,null)}}BR(r,h,_,T,F,g,f,!1),np(r);return;case"select":Yt("invalid",r),u=g=h=null;for(f in o)if(o.hasOwnProperty(f)&&(_=o[f],_!=null))switch(f){case"value":h=_;break;case"defaultValue":g=_;break;case"multiple":u=_;default:he(r,i,f,_,o,null)}i=h,o=g,r.multiple=!!u,i!=null?Kc(r,!!u,i,!1):o!=null&&Kc(r,!!u,o,!0);return;case"textarea":Yt("invalid",r),h=f=u=null;for(g in o)if(o.hasOwnProperty(g)&&(_=o[g],_!=null))switch(g){case"value":u=_;break;case"defaultValue":f=_;break;case"children":h=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:he(r,i,g,_,o,null)}HR(r,u,f,h),np(r);return;case"option":for(T in o)if(o.hasOwnProperty(T)&&(u=o[T],u!=null))switch(T){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:he(r,i,T,u,o,null)}return;case"dialog":Yt("beforetoggle",r),Yt("toggle",r),Yt("cancel",r),Yt("close",r);break;case"iframe":case"object":Yt("load",r);break;case"video":case"audio":for(u=0;u<dh.length;u++)Yt(dh[u],r);break;case"image":Yt("error",r),Yt("load",r);break;case"details":Yt("toggle",r);break;case"embed":case"source":case"link":Yt("error",r),Yt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:he(r,i,F,u,o,null)}return;default:if(CS(i)){for(H in o)o.hasOwnProperty(H)&&(u=o[H],u!==void 0&&p0(r,i,H,u,o,void 0));return}}for(_ in o)o.hasOwnProperty(_)&&(u=o[_],u!=null&&he(r,i,_,u,o,null))}function AK(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,g=null,_=null,T=null,F=null,H=null;for(j in o){var J=o[j];if(o.hasOwnProperty(j)&&J!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":T=J;default:u.hasOwnProperty(j)||he(r,i,j,null,u,J)}}for(var L in u){var j=u[L];if(J=o[L],u.hasOwnProperty(L)&&(j!=null||J!=null))switch(L){case"type":h=j;break;case"name":f=j;break;case"checked":F=j;break;case"defaultChecked":H=j;break;case"value":g=j;break;case"defaultValue":_=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,i));break;default:j!==J&&he(r,i,L,j,u,J)}}MS(r,g,_,T,F,H,h,f);return;case"select":j=g=_=L=null;for(h in o)if(T=o[h],o.hasOwnProperty(h)&&T!=null)switch(h){case"value":break;case"multiple":j=T;default:u.hasOwnProperty(h)||he(r,i,h,null,u,T)}for(f in u)if(h=u[f],T=o[f],u.hasOwnProperty(f)&&(h!=null||T!=null))switch(f){case"value":L=h;break;case"defaultValue":_=h;break;case"multiple":g=h;default:h!==T&&he(r,i,f,h,u,T)}i=_,o=g,u=j,L!=null?Kc(r,!!o,L,!1):!!u!=!!o&&(i!=null?Kc(r,!!o,i,!0):Kc(r,!!o,o?[]:"",!1));return;case"textarea":j=L=null;for(_ in o)if(f=o[_],o.hasOwnProperty(_)&&f!=null&&!u.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:he(r,i,_,null,u,f)}for(g in u)if(f=u[g],h=o[g],u.hasOwnProperty(g)&&(f!=null||h!=null))switch(g){case"value":L=f;break;case"defaultValue":j=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==h&&he(r,i,g,f,u,h)}KR(r,L,j);return;case"option":for(var $t in o)if(L=o[$t],o.hasOwnProperty($t)&&L!=null&&!u.hasOwnProperty($t))switch($t){case"selected":r.selected=!1;break;default:he(r,i,$t,null,u,L)}for(T in u)if(L=u[T],j=o[T],u.hasOwnProperty(T)&&L!==j&&(L!=null||j!=null))switch(T){case"selected":r.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:he(r,i,T,L,u,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in o)L=o[gt],o.hasOwnProperty(gt)&&L!=null&&!u.hasOwnProperty(gt)&&he(r,i,gt,null,u,L);for(F in u)if(L=u[F],j=o[F],u.hasOwnProperty(F)&&L!==j&&(L!=null||j!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(137,i));break;default:he(r,i,F,L,u,j)}return;default:if(CS(i)){for(var de in o)L=o[de],o.hasOwnProperty(de)&&L!==void 0&&!u.hasOwnProperty(de)&&p0(r,i,de,void 0,u,L);for(H in u)L=u[H],j=o[H],!u.hasOwnProperty(H)||L===j||L===void 0&&j===void 0||p0(r,i,H,L,u,j);return}}for(var M in o)L=o[M],o.hasOwnProperty(M)&&L!=null&&!u.hasOwnProperty(M)&&he(r,i,M,null,u,L);for(J in u)L=u[J],j=o[J],!u.hasOwnProperty(J)||L===j||L==null&&j==null||he(r,i,J,L,u,j)}var g0=null,y0=null;function Xp(r){return r.nodeType===9?r:r.ownerDocument}function V2(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Y2(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function b0(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _0=null;function CK(){var r=window.event;return r&&r.type==="popstate"?r===_0?!1:(_0=r,!0):(_0=null,!1)}var G2=typeof setTimeout=="function"?setTimeout:void 0,NK=typeof clearTimeout=="function"?clearTimeout:void 0,J2=typeof Promise=="function"?Promise:void 0,xK=typeof queueMicrotask=="function"?queueMicrotask:typeof J2<"u"?function(r){return J2.resolve(null).then(r).catch(IK)}:G2;function IK(r){setTimeout(function(){throw r})}function ka(r){return r==="head"}function Q2(r,i){var o=i,u=0,f=0;do{var h=o.nextSibling;if(r.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(0<u&&8>u){o=u;var g=r.ownerDocument;if(o&1&&ph(g.documentElement),o&2&&ph(g.body),o&4)for(o=g.head,ph(o),g=o.firstChild;g;){var _=g.nextSibling,T=g.nodeName;g[Af]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=_}}if(f===0){r.removeChild(h),wh(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=h}while(o);wh(i)}function S0(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":S0(o),TS(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function FK(r,i,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Af])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(h=r.getAttribute("rel"),h==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(h!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(h=r.getAttribute("src"),(h!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===h)return r}else return r;if(r=bs(r.nextSibling),r===null)break}return null}function DK(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=bs(r.nextSibling),r===null))return null;return r}function v0(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function zK(r,i){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function bs(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var $0=null;function X2(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}function Z2(r,i,o){switch(i=Xp(o),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function ph(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);TS(r)}var es=new Map,W2=new Set;function Zp(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ci=G.d;G.d={f:UK,r:LK,D:jK,C:PK,L:qK,m:BK,X:HK,S:KK,M:VK};function UK(){var r=Ci.f(),i=Bp();return r||i}function LK(r){var i=jc(r);i!==null&&i.tag===5&&i.type==="form"?_M(i):Ci.r(r)}var Su=typeof document>"u"?null:document;function tA(r,i,o){var u=Su;if(u&&typeof i=="string"&&i){var f=Gr(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),W2.has(f)||(W2.add(f),r={rel:r,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),xn(i,"link",r),bn(i),u.head.appendChild(i)))}}function jK(r){Ci.D(r),tA("dns-prefetch",r,null)}function PK(r,i){Ci.C(r,i),tA("preconnect",r,i)}function qK(r,i,o){Ci.L(r,i,o);var u=Su;if(u&&r&&i){var f='link[rel="preload"][as="'+Gr(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Gr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Gr(o.imageSizes)+'"]')):f+='[href="'+Gr(r)+'"]';var h=f;switch(i){case"style":h=vu(r);break;case"script":h=$u(r)}es.has(h)||(r=y({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),es.set(h,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(gh(h))||i==="script"&&u.querySelector(yh(h))||(i=u.createElement("link"),xn(i,"link",r),bn(i),u.head.appendChild(i)))}}function BK(r,i){Ci.m(r,i);var o=Su;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Gr(u)+'"][href="'+Gr(r)+'"]',h=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=$u(r)}if(!es.has(h)&&(r=y({rel:"modulepreload",href:r},i),es.set(h,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(yh(h)))return}u=o.createElement("link"),xn(u,"link",r),bn(u),o.head.appendChild(u)}}}function KK(r,i,o){Ci.S(r,i,o);var u=Su;if(u&&r){var f=Pc(u).hoistableStyles,h=vu(r);i=i||"default";var g=f.get(h);if(!g){var _={loading:0,preload:null};if(g=u.querySelector(gh(h)))_.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":i},o),(o=es.get(h))&&w0(r,o);var T=g=u.createElement("link");bn(T),xn(T,"link",r),T._p=new Promise(function(F,H){T.onload=F,T.onerror=H}),T.addEventListener("load",function(){_.loading|=1}),T.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Wp(g,i,u)}g={type:"stylesheet",instance:g,count:1,state:_},f.set(h,g)}}}function HK(r,i){Ci.X(r,i);var o=Su;if(o&&r){var u=Pc(o).hoistableScripts,f=$u(r),h=u.get(f);h||(h=o.querySelector(yh(f)),h||(r=y({src:r,async:!0},i),(i=es.get(f))&&E0(r,i),h=o.createElement("script"),bn(h),xn(h,"link",r),o.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},u.set(f,h))}}function VK(r,i){Ci.M(r,i);var o=Su;if(o&&r){var u=Pc(o).hoistableScripts,f=$u(r),h=u.get(f);h||(h=o.querySelector(yh(f)),h||(r=y({src:r,async:!0,type:"module"},i),(i=es.get(f))&&E0(r,i),h=o.createElement("script"),bn(h),xn(h,"link",r),o.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},u.set(f,h))}}function eA(r,i,o,u){var f=(f=Tt.current)?Zp(f):null;if(!f)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=vu(o.href),o=Pc(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=vu(o.href);var h=Pc(f).hoistableStyles,g=h.get(r);if(g||(f=f.ownerDocument||f,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(r,g),(h=f.querySelector(gh(r)))&&!h._p&&(g.instance=h,g.state.loading=5),es.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},es.set(r,o),h||YK(f,r,o,g.state))),i&&u===null)throw Error(s(528,""));return g}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=$u(o),o=Pc(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function vu(r){return'href="'+Gr(r)+'"'}function gh(r){return'link[rel="stylesheet"]['+r+"]"}function nA(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function YK(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),xn(i,"link",o),bn(i),r.head.appendChild(i))}function $u(r){return'[src="'+Gr(r)+'"]'}function yh(r){return"script[async]"+r}function rA(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Gr(o.href)+'"]');if(u)return i.instance=u,bn(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),bn(u),xn(u,"style",f),Wp(u,o.precedence,r),i.instance=u;case"stylesheet":f=vu(o.href);var h=r.querySelector(gh(f));if(h)return i.state.loading|=4,i.instance=h,bn(h),h;u=nA(o),(f=es.get(f))&&w0(u,f),h=(r.ownerDocument||r).createElement("link"),bn(h);var g=h;return g._p=new Promise(function(_,T){g.onload=_,g.onerror=T}),xn(h,"link",u),i.state.loading|=4,Wp(h,o.precedence,r),i.instance=h;case"script":return h=$u(o.src),(f=r.querySelector(yh(h)))?(i.instance=f,bn(f),f):(u=o,(f=es.get(h))&&(u=y({},o),E0(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),bn(f),xn(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Wp(u,o.precedence,r));return i.instance}function Wp(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,h=f,g=0;g<u.length;g++){var _=u[g];if(_.dataset.precedence===i)h=_;else if(h!==f)break}h?h.parentNode.insertBefore(r,h.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function w0(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function E0(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var tg=null;function sA(r,i,o){if(tg===null){var u=new Map,f=tg=new Map;f.set(o,u)}else f=tg,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var h=o[f];if(!(h[Af]||h[Vn]||r==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var g=h.getAttribute(i)||"";g=r+g;var _=u.get(g);_?_.push(h):u.set(g,[h])}}return u}function iA(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function GK(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function aA(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var bh=null;function JK(){}function QK(r,i,o){if(bh===null)throw Error(s(475));var u=bh;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=vu(o.href),h=r.querySelector(gh(f));if(h){r=h._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=eg.bind(u),r.then(u,u)),i.state.loading|=4,i.instance=h,bn(h);return}h=r.ownerDocument||r,o=nA(o),(f=es.get(f))&&w0(o,f),h=h.createElement("link"),bn(h);var g=h;g._p=new Promise(function(_,T){g.onload=_,g.onerror=T}),xn(h,"link",o),i.instance=h}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=eg.bind(u),r.addEventListener("load",i),r.addEventListener("error",i))}}function XK(){if(bh===null)throw Error(s(475));var r=bh;return r.stylesheets&&r.count===0&&T0(r,r.stylesheets),0<r.count?function(i){var o=setTimeout(function(){if(r.stylesheets&&T0(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(o)}}:null}function eg(){if(this.count--,this.count===0){if(this.stylesheets)T0(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var ng=null;function T0(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,ng=new Map,i.forEach(ZK,r),ng=null,eg.call(r))}function ZK(r,i){if(!(i.state.loading&4)){var o=ng.get(r);if(o)var u=o.get(null);else{o=new Map,ng.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var g=f[h];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(o.set(g.dataset.precedence,g),u=g)}u&&o.set(null,u)}f=i.instance,g=f.getAttribute("data-precedence"),h=o.get(g)||u,h===u&&o.set(null,f),o.set(g,f),this.count++,u=eg.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),h?h.parentNode.insertBefore(f,h.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var _h={$$typeof:A,Provider:null,Consumer:null,_currentValue:st,_currentValue2:st,_threadCount:0};function WK(r,i,o,u,f,h,g,_){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vS(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vS(0),this.hiddenUpdates=vS(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function oA(r,i,o,u,f,h,g,_,T,F,H,J){return r=new WK(r,i,o,g,_,T,F,J),i=1,h===!0&&(i|=24),h=xr(3,null,null,i),r.current=h,h.stateNode=r,i=a1(),i.refCount++,r.pooledCache=i,i.refCount++,h.memoizedState={element:u,isDehydrated:o,cache:i},l1(h),r}function cA(r){return r?(r=Wc,r):Wc}function uA(r,i,o,u,f,h){f=cA(f),u.context===null?u.context=f:u.pendingContext=f,u=pa(i),u.payload={element:o},h=h===void 0?null:h,h!==null&&(u.callback=h),o=ga(r,u,i),o!==null&&(Ur(o,r,i),Jf(o,r,i))}function lA(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function O0(r,i){lA(r,i),(r=r.alternate)&&lA(r,i)}function fA(r){if(r.tag===13){var i=Zc(r,67108864);i!==null&&Ur(i,r,67108864),O0(r,67108864)}}var rg=!0;function t5(r,i,o,u){var f=z.T;z.T=null;var h=G.p;try{G.p=2,R0(r,i,o,u)}finally{G.p=h,z.T=f}}function e5(r,i,o,u){var f=z.T;z.T=null;var h=G.p;try{G.p=8,R0(r,i,o,u)}finally{G.p=h,z.T=f}}function R0(r,i,o,u){if(rg){var f=k0(u);if(f===null)m0(r,i,u,sg,o),dA(r,u);else if(r5(f,r,i,o,u))u.stopPropagation();else if(dA(r,u),i&4&&-1<n5.indexOf(r)){for(;f!==null;){var h=jc(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var g=uo(h.pendingLanes);if(g!==0){var _=h;for(_.pendingLanes|=2,_.entangledLanes|=2;g;){var T=1<<31-Cr(g);_.entanglements[1]|=T,g&=~T}Hs(h),(ae&6)===0&&(Pp=js()+500,hh(0))}}break;case 13:_=Zc(h,2),_!==null&&Ur(_,h,2),Bp(),O0(h,2)}if(h=k0(u),h===null&&m0(r,i,u,sg,o),h===f)break;f=h}f!==null&&u.stopPropagation()}else m0(r,i,u,null,o)}}function k0(r){return r=xS(r),M0(r)}var sg=null;function M0(r){if(sg=null,r=Lc(r),r!==null){var i=c(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=l(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return sg=r,null}function hA(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pq()){case OR:return 2;case RR:return 8;case Qm:case qq:return 32;case kR:return 268435456;default:return 32}default:return 32}}var A0=!1,Ma=null,Aa=null,Ca=null,Sh=new Map,vh=new Map,Na=[],n5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dA(r,i){switch(r){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":Ca=null;break;case"pointerover":case"pointerout":Sh.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":vh.delete(i.pointerId)}}function $h(r,i,o,u,f,h){return r===null||r.nativeEvent!==h?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:h,targetContainers:[f]},i!==null&&(i=jc(i),i!==null&&fA(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function r5(r,i,o,u,f){switch(i){case"focusin":return Ma=$h(Ma,r,i,o,u,f),!0;case"dragenter":return Aa=$h(Aa,r,i,o,u,f),!0;case"mouseover":return Ca=$h(Ca,r,i,o,u,f),!0;case"pointerover":var h=f.pointerId;return Sh.set(h,$h(Sh.get(h)||null,r,i,o,u,f)),!0;case"gotpointercapture":return h=f.pointerId,vh.set(h,$h(vh.get(h)||null,r,i,o,u,f)),!0}return!1}function mA(r){var i=Lc(r.target);if(i!==null){var o=c(i);if(o!==null){if(i=o.tag,i===13){if(i=l(o),i!==null){r.blockedOn=i,Qq(r.priority,function(){if(o.tag===13){var u=zr();u=$S(u);var f=Zc(o,u);f!==null&&Ur(f,o,u),O0(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ig(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=k0(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);NS=u,o.target.dispatchEvent(u),NS=null}else return i=jc(o),i!==null&&fA(i),r.blockedOn=o,!1;i.shift()}return!0}function pA(r,i,o){ig(r)&&o.delete(i)}function s5(){A0=!1,Ma!==null&&ig(Ma)&&(Ma=null),Aa!==null&&ig(Aa)&&(Aa=null),Ca!==null&&ig(Ca)&&(Ca=null),Sh.forEach(pA),vh.forEach(pA)}function ag(r,i){r.blockedOn===i&&(r.blockedOn=null,A0||(A0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,s5)))}var og=null;function gA(r){og!==r&&(og=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){og===r&&(og=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(M0(u||o)===null)continue;break}var h=jc(o);h!==null&&(r.splice(i,3),i-=3,M1(h,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function wh(r){function i(T){return ag(T,r)}Ma!==null&&ag(Ma,r),Aa!==null&&ag(Aa,r),Ca!==null&&ag(Ca,r),Sh.forEach(i),vh.forEach(i);for(var o=0;o<Na.length;o++){var u=Na[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Na.length&&(o=Na[0],o.blockedOn===null);)mA(o),o.blockedOn===null&&Na.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],h=o[u+1],g=f[dr]||null;if(typeof h=="function")g||gA(o);else if(g){var _=null;if(h&&h.hasAttribute("formAction")){if(f=h,g=h[dr]||null)_=g.formAction;else if(M0(f)!==null)continue}else _=g.action;typeof _=="function"?o[u+1]=_:(o.splice(u,3),u-=3),gA(o)}}}function C0(r){this._internalRoot=r}cg.prototype.render=C0.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=zr();uA(o,u,r,i,null,null)},cg.prototype.unmount=C0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;uA(r.current,2,null,r,null,null),Bp(),i[Uc]=null}};function cg(r){this._internalRoot=r}cg.prototype.unstable_scheduleHydration=function(r){if(r){var i=xR();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Na.length&&i!==0&&i<Na[o].priority;o++);Na.splice(o,0,r),o===0&&mA(r)}};var yA=e.version;if(yA!=="19.1.0")throw Error(s(527,yA,"19.1.0"));G.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=m(i),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var i5={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ug=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ug.isDisabled&&ug.supportsFiber)try{Rf=ug.inject(i5),Ar=ug}catch{}}return Th.createRoot=function(r,i){if(!a(r))throw Error(s(299));var o=!1,u="",f=xM,h=IM,g=FM,_=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(h=i.onCaughtError),i.onRecoverableError!==void 0&&(g=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(_=i.unstable_transitionCallbacks)),i=oA(r,1,!1,null,null,o,u,f,h,g,_,null),r[Uc]=i.current,d0(r),new C0(i)},Th.hydrateRoot=function(r,i,o){if(!a(r))throw Error(s(299));var u=!1,f="",h=xM,g=IM,_=FM,T=null,F=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(h=o.onUncaughtError),o.onCaughtError!==void 0&&(g=o.onCaughtError),o.onRecoverableError!==void 0&&(_=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(T=o.unstable_transitionCallbacks),o.formState!==void 0&&(F=o.formState)),i=oA(r,1,!0,i,o??null,u,f,h,g,_,T,F),i.context=cA(null),o=i.current,u=zr(),u=$S(u),f=pa(u),f.callback=null,ga(o,f,u),o=u,i.current.lanes=o,Mf(i,o),Hs(i),r[Uc]=i.current,d0(r),new cg(i)},Th.version="19.1.0",Th}var RA;function m5(){if(RA)return I0.exports;RA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),I0.exports=d5(),I0.exports}var p5=m5();const g5=({traces:t,viewState:e,onViewStateChange:n,height:s,barHeight:a,barPadding:c})=>{const l=Xe.useRef(null),d=Xe.useRef(!1),m=Xe.useRef(null),p=Xe.useCallback(()=>{const E=l.current;if(!E||t.length===0||s===0)return;const N=E.getContext("2d");if(!N)return;const C=t.map(ut=>ut.startTime),x=t.map(ut=>ut.endTime),q={start:C.reduce((ut,Et)=>Et<ut?Et:ut),end:x.reduce((ut,Et)=>Et>ut?Et:ut)};m.current=q,N.clearRect(0,0,E.width,s);const A=q.end-q.start,P=E.width/Number(A),k=Math.max(...t.map(ut=>ut.depth))+1,U=Math.min(Math.max(1,s/k),s/10);t.forEach(ut=>{const Et=Number(ut.startTime-q.start)*P,z=k===0?0:ut.depth/k*s,G=Math.max(1,Number(ut.endTime-ut.startTime)*P),st=ut.startTime,O=ut.endTime>=e.startTime&&st<=e.endTime;N.globalAlpha=O?.8:.3,N.fillStyle=ut.color,N.fillRect(Et,z,G,U)}),N.globalAlpha=1,N.strokeStyle="#ffffff",N.lineWidth=2;const K=Number(e.startTime-q.start)*P,B=Number(e.endTime-e.startTime)*P,et=k*(a+c),tt=window.innerHeight-s-25-100,Z=s/et,rt=-e.offsetY*Z,vt=Math.min(s,tt*Z);N.strokeRect(K,0,B,s),et>tt&&(N.fillStyle="rgba(255, 255, 255, 0.1)",N.fillRect(K,rt,B,vt),N.strokeStyle="rgba(255, 255, 255, 0.5)",N.strokeRect(K,rt,B,vt)),N.lineWidth=1},[t,e,s,a,c]);Xe.useEffect(()=>{const E=l.current;if(!E)return;const N=()=>{E.width=E.offsetWidth,E.height=s,p()};return N(),window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N)}},[p,s]),Xe.useEffect(()=>{p()},[p]);const y=E=>{const N=l.current.getBoundingClientRect(),C=E.clientX-N.left;if(d.current=!0,m.current){const x=m.current.end-m.current.start,q=e.endTime-e.startTime,A=m.current.start+BigInt(Math.round(Number(x)*(C/N.width))),P=A-q/2n,k=A+q/2n;n({startTime:P,endTime:k,offsetY:e.offsetY})}},b=E=>{if(!d.current||!m.current)return;const N=l.current.getBoundingClientRect(),C=E.clientX-N.left,x=Math.max(0,Math.min(N.width,C)),q=m.current.end-m.current.start,A=e.endTime-e.startTime,P=m.current.start+BigInt(Math.round(Number(q)*(x/N.width))),k=P-A/2n,U=P+A/2n;n({startTime:k,endTime:U,offsetY:e.offsetY})},S=()=>{d.current=!1},v=()=>{d.current=!1};return s===0?null:Qs.jsx("canvas",{ref:l,style:{width:"100%",height:`${s}px`,cursor:"pointer",display:"block"},onMouseDown:y,onMouseMove:b,onMouseUp:S,onMouseLeave:v})},y5=(t,e,n,s,a,c)=>{t.clearRect(0,a,e,s);const l=n.endTime-n.startTime,d=e/Number(l),m=d*1e9;t.strokeStyle="#e0e0e0",t.lineWidth=1,t.beginPath(),t.moveTo(0,a+s),t.lineTo(e,a+s),t.stroke();const y=50/m;let b=.001;const S=[.001,.005,.01,.05,.1,.5,1,5,10,30,60,300,600,1800,3600];for(const C of S)if(C>=y){b=C;break}t.fillStyle="#666",t.font="10px Arial";const v=Number(n.startTime)/1e9,E=Number(n.endTime)/1e9,N=Math.ceil(v/b)*b;for(let C=N;C<=E;C+=b){const x=C-Number(c/1000000000n),q=BigInt(Math.round(C*1e9)),A=Number(q-n.startTime)*d;if(A>=-100&&A<=e+100){let P;if(b<1)P=`${x.toFixed(3)}s`;else if(b<60)P=`${x.toFixed(0)}s`;else if(b<3600){const k=Math.floor(x/60),U=x%60;P=U===0?`${k}m`:`${k}m${U}s`}else{const k=Math.floor(x/3600),U=Math.floor(x%3600/60);P=U===0?`${k}h`:`${k}h${U}m`}t.fillText(P,A+2,a+12),t.strokeStyle="#d0d0d0",t.beginPath(),t.moveTo(A,a+s-5),t.lineTo(A,a+s),t.stroke()}}},b5=(t,e,n,s,a,c,l)=>{const d=Math.max(0,n),m=Math.min(l-d,a-(d-n));t.fillStyle=e.color,t.fillRect(d,s,m,c),t.strokeStyle="rgba(0, 0, 0, 0.2)",t.lineWidth=1,t.strokeRect(d,s,m,c),t.fillStyle="#333",t.font="11px Arial";const p=e.name,y=t.measureText(p).width,b=d+5,S=m-10;if(y<S)t.fillText(p,b,s+c/2+4);else if(S>20){let E=p;for(;t.measureText(E+"...").width>S&&E.length>0;)E=E.slice(0,-1);E.length>0&&t.fillText(E+"...",b,s+c/2+4)}if(n+a<=l){const E=`${(Number(e.endTime-e.startTime)/1e9).toFixed(3)}s`,N=t.measureText(E).width,C=b+Math.min(y,S);m>N+(C-d)+20&&(t.fillStyle="#666",t.font="10px Arial",t.fillText(E,n+a-N-5,s+c/2+4))}},_5=(t,e,n,s,a,c,l,d)=>{const m=n.endTime-n.startTime,p=s/Number(m);e.forEach(y=>{const b=Number(y.startTime-n.startTime)*p,S=d+y.depth*(c+l)+n.offsetY,v=Number(y.endTime-y.startTime)*p;b+v<0||b>s||S+c<0||S>a||b5(t,y,b,S,v,c,s)})},S5=({traces:t,viewState:e,timeOrigin:n,onViewStateChange:s,options:a={},onTraceClick:c,onTraceHover:l})=>{const{barHeight:d=30,barPadding:m=4,timelineHeight:p=25}=a,y=Xe.useRef(null),b=Xe.useRef(!1),S=Xe.useRef({x:0,y:0}),v=Xe.useRef(null),E=Xe.useCallback((k,U)=>{const K=y.current;if(!K)return null;const B=e.endTime-e.startTime,et=K.width/Number(B);if(U<p)return null;for(const tt of t){const Z=Number(tt.startTime-e.startTime)*et,rt=p+tt.depth*(d+m)+e.offsetY,vt=Number(tt.endTime-tt.startTime)*et;if(k>=Z&&k<=Z+vt&&U>=rt&&U<=rt+d)return tt}return null},[t,e,d,m,p]),N=Xe.useCallback(()=>{const k=y.current;if(!k)return;const U=k.getContext("2d");U&&(U.clearRect(0,0,k.width,k.height),_5(U,t,e,k.width,k.height,d,m,p),y5(U,k.width,e,p,0,n))},[t,e,d,m,p,n]);Xe.useEffect(()=>{const k=y.current;if(!k)return;const U=()=>{k.width=k.offsetWidth,k.height=k.offsetHeight,N()},K=B=>{B.preventDefault();const et=k.getBoundingClientRect(),tt=B.clientX-et.left,Z=e.endTime-e.startTime,rt=k.width/Number(Z),vt=e.startTime+BigInt(Math.round(tt/rt)),ut=B.deltaY>0?1.1:.9,Et=vt-e.startTime,z=e.endTime-vt,G=BigInt(Math.round(Number(Et)*ut)),st=BigInt(Math.round(Number(z)*ut)),Nt=vt-G,O=vt+st;s({startTime:Nt,endTime:O,offsetY:e.offsetY})};return U(),window.addEventListener("resize",U),k.addEventListener("wheel",K,{passive:!1}),()=>{window.removeEventListener("resize",U),k.removeEventListener("wheel",K)}},[N,e,s]),Xe.useEffect(()=>{N()},[N]);const C=k=>{const U=y.current.getBoundingClientRect(),K=k.clientX-U.left,B=k.clientY-U.top,et=E(K,B);et&&c?c(et):(b.current=!0,S.current={x:k.clientX,y:k.clientY-e.offsetY})},x=k=>{const U=y.current,K=U.getBoundingClientRect(),B=k.clientX-K.left,et=k.clientY-K.top;if(b.current){const tt=e.endTime-e.startTime,Z=U.width/Number(tt),rt=S.current.x-k.clientX,vt=BigInt(Math.round(rt/Z));s({startTime:e.startTime+vt,endTime:e.endTime+vt,offsetY:Math.min(0,k.clientY-S.current.y)}),S.current.x=k.clientX}else if(l){const tt=E(B,et);tt!==v.current&&(v.current=tt,l(tt),y.current&&(y.current.style.cursor=tt?"pointer":"grab"))}},q=()=>{b.current=!1},A=()=>{b.current=!1,l&&v.current&&(v.current=null,l(null)),y.current&&(y.current.style.cursor="grab")},P={width:"100%",height:"100%",cursor:"grab",display:"block"};return Qs.jsx("canvas",{ref:y,style:P,onMouseDown:C,onMouseMove:x,onMouseUp:q,onMouseLeave:A})},v5=t=>typeof t=="function",$=function(t,e){if(typeof t=="function")return function(){return t(arguments)?e.apply(this,arguments):n=>e(n,...arguments)};switch(t){case 0:case 1:throw new RangeError(`Invalid arity ${t}`);case 2:return function(n,s){return arguments.length>=2?e(n,s):function(a){return e(a,n)}};case 3:return function(n,s,a){return arguments.length>=3?e(n,s,a):function(c){return e(c,n,s)}};case 4:return function(n,s,a,c){return arguments.length>=4?e(n,s,a,c):function(l){return e(l,n,s,a)}};case 5:return function(n,s,a,c,l){return arguments.length>=5?e(n,s,a,c,l):function(d){return e(d,n,s,a,c)}};default:return function(){if(arguments.length>=t)return e.apply(this,arguments);const n=arguments;return function(s){return e(s,...n)}}}},At=t=>t,$b=t=>()=>t,kA=$b(!0),xv=$b(!1),wI=$b(void 0),md=wI;function w(t,e,n,s,a,c,l,d,m){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return s(n(e(t)));case 5:return a(s(n(e(t))));case 6:return c(a(s(n(e(t)))));case 7:return l(c(a(s(n(e(t))))));case 8:return d(l(c(a(s(n(e(t)))))));case 9:return m(d(l(c(a(s(n(e(t))))))));default:{let p=arguments[0];for(let y=1;y<arguments.length;y++)p=arguments[y](p);return p}}}const MA="effect/GlobalValue";let Oh;const zt=(t,e)=>(Oh||(globalThis[MA]??=new Map,Oh=globalThis[MA]),Oh.has(t)||Oh.set(t,e()),Oh.get(t)),hs=t=>typeof t=="string",Zi=t=>typeof t=="number",pd=t=>typeof t=="boolean",wb=t=>typeof t=="bigint",Iv=t=>typeof t=="symbol",Jd=v5,$5=t=>t===void 0,w5=t=>!1,Qw=t=>typeof t=="object"&&t!==null,ro=t=>Qw(t)||Jd(t),_t=$(2,(t,e)=>ro(t)&&e in t),EI=$(2,(t,e)=>_t(t,"_tag")&&t._tag===e),wu=t=>t==null,E5=t=>t!=null,T5=t=>t instanceof Date,Xw=t=>_t(t,Symbol.iterator),O5=t=>Qw(t)&&!Array.isArray(t),TI=t=>_t(t,"then")&&Jd(t.then),Eb=t=>`BUG: ${t} - please report an issue at https://github.com/Effect-TS/effect/issues`;let OI=class RI{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new RI(this.self)}};const R5=335903614,k5=4150755663,M5=1481765933,A5=1284865837,C5=9007199254740992,N5=134217728;let x5=class{_state;constructor(e,n,s,a){return wu(n)&&wu(e)?(n=Math.random()*4294967295>>>0,e=0):wu(n)&&(n=e,e=0),wu(a)&&wu(s)?(a=this._state?this._state[3]:k5,s=this._state?this._state[2]:R5):wu(a)&&(a=s,s=0),this._state=new Int32Array([0,0,s>>>0,((a||0)|1)>>>0]),this._next(),AA(this._state,this._state[0],this._state[1],e>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=e[3]|1}integer(e){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%e}number(){const e=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(e*N5+n)/C5}_next(){const e=this._state[0]>>>0,n=this._state[1]>>>0;I5(this._state,e,n,M5,A5),AA(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let s=e>>>18,a=(n>>>18|e<<14)>>>0;s=(s^e)>>>0,a=(a^n)>>>0;const c=(a>>>27|s<<5)>>>0,l=e>>>27,d=(-l>>>0&31)>>>0;return(c>>>l|c<<d)>>>0}};function I5(t,e,n,s,a){let c=(n>>>16)*(a&65535)>>>0,l=(n&65535)*(a>>>16)>>>0,d=(n&65535)*(a&65535)>>>0,m=(n>>>16)*(a>>>16)+((l>>>16)+(c>>>16))>>>0;l=l<<16>>>0,d=d+l>>>0,d>>>0<l>>>0&&(m=m+1>>>0),c=c<<16>>>0,d=d+c>>>0,d>>>0<c>>>0&&(m=m+1>>>0),m=m+Math.imul(n,s)>>>0,m=m+Math.imul(e,a)>>>0,t[0]=m,t[1]=d}function AA(t,e,n,s,a){let c=e+s>>>0;const l=n+a>>>0;l>>>0<n>>>0&&(c=c+1|0),t[0]=c,t[1]=l}const Fv=Symbol.for("effect/Utils/YieldWrap");let Qd=class{#t;constructor(e){this.#t=e}[Fv](){return this.#t}};function F5(t){if(typeof t=="object"&&t!==null&&Fv in t)return t[Fv]();throw new Error(Eb("yieldWrapGet"))}const rs=zt("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),kI={effect_internal_function:t=>t()},D5={effect_internal_function:t=>{try{return t()}finally{}}},z5=kI.effect_internal_function(()=>new Error().stack)?.includes("effect_internal_function")===!0,ir=z5?kI.effect_internal_function:D5.effect_internal_function,U0=zt(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),Dt=Symbol.for("effect/Hash"),ft=t=>{if(rs.enabled===!0)return 0;switch(typeof t){case"number":return Ww(t);case"bigint":return Fe(t.toString(10));case"boolean":return Fe(String(t));case"symbol":return Fe(String(t));case"string":return Fe(t);case"undefined":return Fe("undefined");case"function":case"object":return t===null?Fe("null"):t instanceof Date?ft(t.toISOString()):t instanceof URL?ft(t.href):U5(t)?t[Dt]():Zw(t);default:throw new Error(`BUG: unhandled typeof ${typeof t} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},Zw=t=>(U0.has(t)||U0.set(t,Ww(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),U0.get(t)),Gt=t=>e=>e*53^t,Tb=t=>t&3221225471|t>>>1&1073741824,U5=t=>_t(t,Dt),Ww=t=>{if(t!==t||t===1/0)return 0;let e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)e^=t/=4294967295;return Tb(e)},Fe=t=>{let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return Tb(e)},L5=(t,e)=>{let n=12289;for(let s=0;s<e.length;s++)n^=w(Fe(e[s]),Gt(ft(t[e[s]])));return Tb(n)},MI=t=>L5(t,Object.keys(t)),Xd=t=>{let e=6151;for(let n=0;n<t.length;n++)e=w(e,Gt(ft(t[n])));return Tb(e)},ve=function(){if(arguments.length===1){const n=arguments[0];return function(s){return Object.defineProperty(n,Dt,{value(){return s},enumerable:!1}),s}}const t=arguments[0],e=arguments[1];return Object.defineProperty(t,Dt,{value(){return e},enumerable:!1}),e},It=Symbol.for("effect/Equal");function wt(){return arguments.length===1?t=>iy(t,arguments[0]):iy(arguments[0],arguments[1])}function iy(t,e){if(t===e)return!0;const n=typeof t;if(n!==typeof e)return!1;if(n==="object"||n==="function"){if(t!==null&&e!==null){if(ay(t)&&ay(e))return ft(t)===ft(e)&&t[It](e)?!0:rs.enabled&&rs.tester?rs.tester(t,e):!1;if(t instanceof Date&&e instanceof Date)return t.toISOString()===e.toISOString();if(t instanceof URL&&e instanceof URL)return t.href===e.href}if(rs.enabled){if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every((s,a)=>iy(s,e[a]));if(Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const s=Object.keys(t),a=Object.keys(e);if(s.length===a.length){for(const c of s)if(!(c in e&&iy(t[c],e[c])))return rs.tester?rs.tester(t,e):!1;return!0}}return rs.tester?rs.tester(t,e):!1}}return rs.enabled&&rs.tester?rs.tester(t,e):!1}const ay=t=>_t(t,It),tE=()=>wt,pe=Symbol.for("nodejs.util.inspect.custom"),Re=t=>{try{if(_t(t,"toJSON")&&Jd(t.toJSON)&&t.toJSON.length===0)return t.toJSON();if(Array.isArray(t))return t.map(Re)}catch{return{}}return P5(t)},Te=t=>JSON.stringify(t,null,2),ul=(t,e=2)=>{if(typeof t=="string")return t;try{return typeof t=="object"?AI(t,e):String(t)}catch{return String(t)}},AI=(t,e)=>{let n=[];const s=JSON.stringify(t,(a,c)=>typeof c=="object"&&c!==null?n.includes(c)?void 0:n.push(c)&&(jo.fiberRefs!==void 0&&CI(c)?c[eE](jo.fiberRefs):c):c,e);return n=void 0,s},eE=Symbol.for("effect/Inspectable/Redactable"),CI=t=>typeof t=="object"&&t!==null&&eE in t,jo=zt("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),j5=(t,e)=>{const n=jo.fiberRefs;jo.fiberRefs=t;try{return e()}finally{jo.fiberRefs=n}},P5=t=>CI(t)&&jo.fiberRefs!==void 0?t[eE](jo.fiberRefs):t,lt=(t,e)=>{switch(e.length){case 0:return t;case 1:return e[0](t);case 2:return e[1](e[0](t));case 3:return e[2](e[1](e[0](t)));case 4:return e[3](e[2](e[1](e[0](t))));case 5:return e[4](e[3](e[2](e[1](e[0](t)))));case 6:return e[5](e[4](e[3](e[2](e[1](e[0](t))))));case 7:return e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))));case 8:return e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t))))))));case 9:return e[8](e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))))));default:{let n=t;for(let s=0,a=e.length;s<a;s++)n=e[s](n);return n}}},ed="Async",Ob="Commit",qn="Failure",kg="OnFailure",oy="OnSuccess",cy="OnSuccessAndFailure",Bn="Success",NI="Sync",q5="Tag",ef="UpdateRuntimeFlags",uy="While",nd="Iterator",xI="WithRuntime",Mg="Yield",nE="RevertFlags";let B5="3.17.3";const rE=()=>B5,K5=Symbol.for("effect/Effect"),H5=Symbol.for("effect/Stream"),V5=Symbol.for("effect/Sink"),Y5=Symbol.for("effect/Channel"),ll={_R:t=>t,_E:t=>t,_A:t=>t,_V:rE()},G5={_A:t=>t,_In:t=>t,_L:t=>t,_E:t=>t,_R:t=>t},J5={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutElem:t=>t,_OutDone:t=>t},Zd={[K5]:ll,[H5]:ll,[V5]:G5,[Y5]:J5,[It](t){return this===t},[Dt](){return ve(this,Zw(this))},[Symbol.iterator](){return new OI(new Qd(this))},pipe(){return lt(this,arguments)}},sE={[Dt](){return ve(this,MI(this))},[It](t){const e=Object.keys(this),n=Object.keys(t);if(e.length!==n.length)return!1;for(const s of e)if(!(s in t&&wt(this[s],t[s])))return!1;return!0}},Wd={...Zd,_op:Ob},Q5={...Wd,...sE},X5=function(){function t(){}return t.prototype=Wd,t}(),II=Symbol.for("effect/Option"),FI={...Zd,[II]:{_A:t=>t},[pe](){return this.toJSON()},toString(){return Te(this.toJSON())}},Z5=Object.assign(Object.create(FI),{_tag:"Some",_op:"Some",[It](t){return DI(t)&&UI(t)&&wt(this.value,t.value)},[Dt](){return ve(this,Gt(ft(this._tag))(ft(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:Re(this.value)}}}),W5=ft("None"),t8=Object.assign(Object.create(FI),{_tag:"None",_op:"None",[It](t){return DI(t)&&zI(t)},[Dt](){return W5},toJSON(){return{_id:"Option",_tag:this._tag}}}),DI=t=>_t(t,II),zI=t=>t._tag==="None",UI=t=>t._tag==="Some",iE=Object.create(t8),ly=t=>{const e=Object.create(Z5);return e.value=t,e},LI=Symbol.for("effect/Context/Tag"),fy=Symbol.for("effect/Context/Reference"),e8="effect/STM",n8=Symbol.for(e8),Rb={...Zd,_op:"Tag",[n8]:ll,[LI]:{_Service:t=>t,_Identifier:t=>t},toString(){return Te(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[pe](){return this.toJSON()},of(t){return t},context(t){return qI(this,t)}},r8={...Rb,[fy]:fy},s8=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=e;const s=Object.create(Rb);return Object.defineProperty(s,"stack",{get(){return n.stack}}),s.key=t,s},i8=t=>()=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=e;function s(){}return Object.setPrototypeOf(s,Rb),s.key=t,Object.defineProperty(s,"stack",{get(){return n.stack}}),s},a8=()=>(t,e)=>{const n=Error.stackTraceLimit;Error.stackTraceLimit=2;const s=new Error;Error.stackTraceLimit=n;function a(){}return Object.setPrototypeOf(a,r8),a.key=t,a.defaultValue=e.defaultValue,Object.defineProperty(a,"stack",{get(){return s.stack}}),a},jI=Symbol.for("effect/Context"),o8={[jI]:{_Services:t=>t},[It](t){if(PI(t)&&this.unsafeMap.size===t.unsafeMap.size){for(const e of this.unsafeMap.keys())if(!t.unsafeMap.has(e)||!wt(this.unsafeMap.get(e),t.unsafeMap.get(e)))return!1;return!0}return!1},[Dt](){return ve(this,Ww(this.unsafeMap.size))},pipe(){return lt(this,arguments)},toString(){return Te(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(Re)}},[pe](){return this.toJSON()}},Wo=t=>{const e=Object.create(o8);return e.unsafeMap=t,e},c8=t=>{const e=new Error(`Service not found${t.key?`: ${String(t.key)}`:""}`);if(t.stack){const n=t.stack.split(`
`);if(n.length>2){const s=n[2].match(/at (.*)/);s&&(e.message=e.message+` (defined at ${s[1]})`)}}if(e.stack){const n=e.stack.split(`
`);n.splice(1,3),e.stack=n.join(`
`)}return e},PI=t=>_t(t,jI),u8=t=>_t(t,LI),l8=t=>_t(t,fy),f8=Wo(new Map),h8=()=>f8,qI=(t,e)=>Wo(new Map([[t.key,e]])),d8=$(3,(t,e,n)=>{const s=new Map(t.unsafeMap);return s.set(e.key,n),Wo(s)}),L0=zt("effect/Context/defaultValueCache",()=>new Map),aE=t=>{if(L0.has(t.key))return L0.get(t.key);const e=t.defaultValue();return L0.set(t.key,e),e},m8=(t,e)=>t.unsafeMap.has(e.key)?t.unsafeMap.get(e.key):aE(e),BI=$(2,(t,e)=>{if(!t.unsafeMap.has(e.key)){if(fy in e)return aE(e);throw c8(e)}return t.unsafeMap.get(e.key)}),p8=BI,g8=$(2,(t,e)=>t.unsafeMap.has(e.key)?ly(t.unsafeMap.get(e.key)):l8(e)?ly(aE(e)):iE),y8=$(2,(t,e)=>{const n=new Map(t.unsafeMap);for(const[s,a]of e.unsafeMap)n.set(s,a);return Wo(n)}),Tc=s8,b8=Wo,_8=PI,kb=u8,oE=h8,tm=qI,za=d8,KI=p8,HI=BI,em=g8,Oc=y8,S8=i8,Mb=a8,cE=t=>(e,n)=>e===n||t(e,n),v8=$(2,(t,e)=>cE((n,s)=>t(e(n),e(s)))),$8=t=>cE((e,n)=>{if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(!t(e[s],n[s]))return!1;return!0}),uE=Symbol.for("effect/Either"),VI={...Zd,[uE]:{_R:t=>t},[pe](){return this.toJSON()},toString(){return Te(this.toJSON())}},w8=Object.assign(Object.create(VI),{_tag:"Right",_op:"Right",[It](t){return lE(t)&&GI(t)&&wt(this.right,t.right)},[Dt](){return Gt(ft(this._tag))(ft(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:Re(this.right)}}}),E8=Object.assign(Object.create(VI),{_tag:"Left",_op:"Left",[It](t){return lE(t)&&YI(t)&&wt(this.left,t.left)},[Dt](){return Gt(ft(this._tag))(ft(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:Re(this.left)}}}),lE=t=>_t(t,uE),YI=t=>t._tag==="Left",GI=t=>t._tag==="Right",T8=t=>{const e=Object.create(E8);return e.left=t,e},O8=t=>{const e=Object.create(w8);return e.right=t,e},R8=uE,Jt=O8,Ot=T8,k8=lE,Fn=YI,ri=GI,M8=$(2,(t,e)=>Fn(t)?Ot(e(t.left)):Jt(t.right)),A8=$(2,(t,e)=>ri(t)?Jt(e(t.right)):Ot(t.left)),vr=$(2,(t,{onLeft:e,onRight:n})=>Fn(t)?e(t.left):n(t.right)),C8=vr({onLeft:At,onRight:At}),JI=$(2,(t,e)=>{if(ri(t))return t.right;throw e(t.left)}),N8=JI(()=>new Error("getOrThrow called on a Left")),QI=t=>t.length>0,XI=t=>(e,n)=>e===n?0:t(e,n),x8=XI((t,e)=>t<e?-1:1),ZI=$(2,(t,e)=>XI((n,s)=>t(e(n),e(s)))),I8=t=>$(2,(e,n)=>t(e,n)===1),F8=Symbol.for("effect/Option"),at=()=>iE,ht=ly,pn=zI,ze=UI,Ke=$(2,(t,{onNone:e,onSome:n})=>pn(t)?e():n(t.value)),Ee=$(2,(t,e)=>pn(t)?e():t.value),Ha=$(2,(t,e)=>pn(t)?e():t),D8=$(2,(t,e)=>pn(t)?ht(e()):t),nf=t=>t==null?at():ht(t),Xs=Ee(wI),z8=t=>(...e)=>{try{return ht(t(...e))}catch{return at()}},WI=$(2,(t,e)=>{if(ze(t))return t.value;throw e()}),U8=WI(()=>new Error("getOrThrow called on a None")),Po=$(2,(t,e)=>pn(t)?at():ht(e(t.value))),rf=$(2,(t,e)=>pn(t)?at():e(t.value)),L8=$(2,(t,e)=>pn(t)?at():nf(e(t.value))),j8=rf,P8=$(2,(t,e)=>j8(t,n=>e(n)?ly(n):iE)),q8=t=>$(2,(e,n)=>pn(e)?!1:t(e.value,n)),B8=tE(),K8=q8(B8),H8=$(2,(t,e)=>pn(t)?!1:e(t.value)),V8=(...t)=>t,Y8=t=>{const n=t[Symbol.iterator]().next();if(n.done)throw new Error("unsafeHead: empty iterable");return n.value},Ab=t=>new Array(t),G8=$(2,(t,e)=>{const n=Math.max(1,Math.floor(t)),s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a);return s}),le=t=>Array.isArray(t)?t:Array.from(t),J8=t=>Array.isArray(t)?t:[t],Q8=$(2,(t,{onEmpty:e,onNonEmpty:n})=>gn(t)?n(cr(t),tc(t)):e()),hy=$(2,(t,e)=>[e,...t]),X8=$(2,(t,e)=>[...t,e]),t3=$(2,(t,e)=>le(t).concat(le(e))),Z8=Array.isArray,W8=t=>t.length===0,tH=W8,Ag=QI,gn=QI,e3=(t,e)=>t<0||t>=e.length,eH=(t,e)=>Math.floor(Math.min(Math.max(0,t),e.length)),nH=$(2,(t,e)=>{const n=Math.floor(e);return e3(n,t)?at():ht(t[n])}),n3=$(2,(t,e)=>{const n=Math.floor(e);if(e3(n,t))throw new Error(`Index ${n} out of bounds`);return t[n]}),rd=nH(0),cr=n3(0),rH=t=>gn(t)?ht(r3(t)):at(),r3=t=>t[t.length-1],tc=t=>t.slice(1),sH=(t,e)=>{let n=0;for(const s of t){if(!e(s,n))break;n++}return n},iH=$(2,(t,e)=>s3(t,sH(t,e))),aH=$(2,(t,e)=>{const n=le(t);return n.slice(eH(e,n),n.length)}),CA=t=>Array.from(t).reverse(),gd=$(2,(t,e)=>{const n=Array.from(t);return n.sort(e),n}),NA=$(2,(t,e)=>oH(t,e,V8)),oH=$(3,(t,e,n)=>{const s=le(t),a=le(e);if(gn(s)&&gn(a)){const c=[n(cr(s),cr(a))],l=Math.min(s.length,a.length);for(let d=1;d<l;d++)c[d]=n(s[d],a[d]);return c}return[]}),cH=tE(),s3=$(2,(t,e)=>{const n=Array.from(t),s=Math.floor(e);return gn(n)?s>=1?uH(n,s):[[],n]:[n,[]]}),uH=$(2,(t,e)=>{const n=Math.max(1,Math.floor(e));return n>=t.length?[Kh(t),[]]:[hy(t.slice(1,n),cr(t)),t.slice(n)]}),Kh=t=>t.slice(),lH=$(3,(t,e,n)=>{const s=le(t),a=le(e);return gn(s)?gn(a)?i3(n)(t3(s,a)):s:a}),Cg=$(2,(t,e)=>lH(t,e,cH)),ec=()=>[],vs=t=>[t],qo=$(2,(t,e)=>t.map(e)),dy=$(2,(t,e)=>{if(tH(t))return[];const n=[];for(let s=0;s<t.length;s++){const a=e(t[s],s);for(let c=0;c<a.length;c++)n.push(a[c])}return n}),fH=dy(At),hH=$(2,(t,e)=>{const n=le(t),s=[];for(let a=0;a<n.length;a++)e(n[a],a)&&s.push(n[a]);return s}),fE=$(3,(t,e,n)=>le(t).reduce((s,a,c)=>n(s,a,c),e)),xA=(t,e)=>{const n=[];let s=t,a;for(;ze(a=e(s));){const[c,l]=a.value;n.push(c),s=l}return n},hE=$8,i3=$(2,(t,e)=>{const n=le(t);if(gn(n)){const s=[cr(n)],a=tc(n);for(const c of a)s.every(l=>!e(c,l))&&s.push(c);return s}return[]}),dH=t=>i3(t,tE()),sf=$(2,(t,e)=>le(t).join(e)),a3=Symbol.for("effect/Chunk");function mH(t,e,n,s,a){for(let c=e;c<Math.min(t.length,e+a);c++)n[s+c-e]=t[c];return n}const o3=[],pH=t=>cE((e,n)=>e.length===n.length&&ai(e).every((s,a)=>t(s,Va(n,a)))),gH=pH(wt),yH={[a3]:{_A:t=>t},toString(){return Te(this.toJSON())},toJSON(){return{_id:"Chunk",values:ai(this).map(Re)}},[pe](){return this.toJSON()},[It](t){return Cb(t)&&gH(this,t)},[Dt](){return ve(this,Xd(ai(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return o3[Symbol.iterator]();default:return ai(this)[Symbol.iterator]()}},pipe(){return lt(this,arguments)}},Ie=t=>{const e=Object.create(yH);switch(e.backing=t,t._tag){case"IEmpty":{e.length=0,e.depth=0,e.left=e,e.right=e;break}case"IConcat":{e.length=t.left.length+t.right.length,e.depth=1+Math.max(t.left.depth,t.right.depth),e.left=t.left,e.right=t.right;break}case"IArray":{e.length=t.array.length,e.depth=0,e.left=ws,e.right=ws;break}case"ISingleton":{e.length=1,e.depth=0,e.left=ws,e.right=ws;break}case"ISlice":{e.length=t.length,e.depth=t.chunk.depth+1,e.left=ws,e.right=ws;break}}return e},Cb=t=>_t(t,a3),ws=Ie({_tag:"IEmpty"}),ke=()=>ws,j0=(...t)=>SH(t),He=t=>Ie({_tag:"ISingleton",a:t}),nc=t=>Cb(t)?t:Dn(le(t)),Dv=(t,e,n)=>{switch(t.backing._tag){case"IArray":{mH(t.backing.array,0,e,n,t.length);break}case"IConcat":{Dv(t.left,e,n),Dv(t.right,e,n+t.left.length);break}case"ISingleton":{e[n]=t.backing.a;break}case"ISlice":{let s=0,a=n;for(;s<t.length;)e[a]=Va(t,s),s+=1,a+=1;break}}},bH=t=>{switch(t.backing._tag){case"IEmpty":return o3;case"IArray":return t.backing.array;default:{const e=new Array(t.length);return Dv(t,e,0),t.backing={_tag:"IArray",array:e},t.left=ws,t.right=ws,t.depth=0,e}}},ai=bH,_H=t=>{switch(t.backing._tag){case"IEmpty":case"ISingleton":return t;case"IArray":return Ie({_tag:"IArray",array:CA(t.backing.array)});case"IConcat":return Ie({_tag:"IConcat",left:Wi(t.backing.right),right:Wi(t.backing.left)});case"ISlice":return Dn(CA(ai(t)))}},Wi=_H,c3=$(2,(t,e)=>e<0||e>=t.length?at():ht(Va(t,e))),Dn=t=>t.length===0?ke():t.length===1?He(t[0]):Ie({_tag:"IArray",array:t}),SH=t=>Dn(t),Va=$(2,(t,e)=>{switch(t.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(e!==0)throw new Error("Index out of bounds");return t.backing.a}case"IArray":{if(e>=t.length||e<0)throw new Error("Index out of bounds");return t.backing.array[e]}case"IConcat":return e<t.left.length?Va(t.left,e):Va(t.right,e-t.left.length);case"ISlice":return Va(t.backing.chunk,e+t.backing.offset)}}),yd=$(2,(t,e)=>_e(t,He(e))),Kn=$(2,(t,e)=>_e(He(e),t)),my=$(2,(t,e)=>{if(e<=0)return ws;if(e>=t.length)return t;switch(t.backing._tag){case"ISlice":return Ie({_tag:"ISlice",chunk:t.backing.chunk,length:e,offset:t.backing.offset});case"IConcat":return e>t.left.length?Ie({_tag:"IConcat",left:t.left,right:my(t.right,e-t.left.length)}):my(t.left,e);default:return Ie({_tag:"ISlice",chunk:t,offset:0,length:e})}}),ja=$(2,(t,e)=>{if(e<=0)return t;if(e>=t.length)return ws;switch(t.backing._tag){case"ISlice":return Ie({_tag:"ISlice",chunk:t.backing.chunk,offset:t.backing.offset+e,length:t.backing.length-e});case"IConcat":return e>t.left.length?ja(t.right,e-t.left.length):Ie({_tag:"IConcat",left:ja(t.left,e),right:t.right});default:return Ie({_tag:"ISlice",chunk:t,offset:e,length:t.length-e})}}),_e=$(2,(t,e)=>{if(t.backing._tag==="IEmpty")return e;if(e.backing._tag==="IEmpty")return t;const n=e.depth-t.depth;if(Math.abs(n)<=1)return Ie({_tag:"IConcat",left:t,right:e});if(n<-1)if(t.left.depth>=t.right.depth){const s=_e(t.right,e);return Ie({_tag:"IConcat",left:t.left,right:s})}else{const s=_e(t.right.right,e);if(s.depth===t.depth-3){const a=Ie({_tag:"IConcat",left:t.right.left,right:s});return Ie({_tag:"IConcat",left:t.left,right:a})}else{const a=Ie({_tag:"IConcat",left:t.left,right:t.right.left});return Ie({_tag:"IConcat",left:a,right:s})}}else if(e.right.depth>=e.left.depth){const s=_e(t,e.left);return Ie({_tag:"IConcat",left:s,right:e.right})}else{const s=_e(t,e.left.left);if(s.depth===e.depth-3){const a=Ie({_tag:"IConcat",left:s,right:e.left.right});return Ie({_tag:"IConcat",left:a,right:e.right})}else{const a=Ie({_tag:"IConcat",left:e.left.right,right:e.right});return Ie({_tag:"IConcat",left:s,right:a})}}}),Nb=$(2,(t,e)=>Dn(hH(t,e))),xb=t=>t.length===0,ta=t=>t.length>0,dE=c3(0),mE=t=>Va(t,0),si=mE,vH=t=>c3(t,t.length-1),$H=$(2,(t,e)=>t.backing._tag==="ISingleton"?He(e(t.backing.a,0)):Dn(w(ai(t),qo((n,s)=>e(n,s))))),Ui=t=>ja(t,1),wH=$(2,(t,e)=>ja(t,t.length-e)),EH=fE,rc=5,pE=Math.pow(2,rc),TH=pE-1,OH=pE/2,RH=pE/4;function kH(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function fl(t,e){return e>>>t&TH}function ju(t){return 1<<t}function u3(t,e){return kH(t&e-1)}const MH=(t,e)=>({value:t,previous:e});function Gu(t,e,n,s){let a=s;if(!t){const c=s.length;a=new Array(c);for(let l=0;l<c;++l)a[l]=s[l]}return a[e]=n,a}function l3(t,e,n){const s=n.length-1;let a=0,c=0,l=n;if(t)a=c=e;else for(l=new Array(s);a<e;)l[c++]=n[a++];for(++a;a<=s;)l[c++]=n[a++];return t&&(l.length=s),l}function AH(t,e,n,s){const a=s.length;if(t){let m=a;for(;m>=e;)s[m--]=s[m];return s[e]=n,s}let c=0,l=0;const d=new Array(a+1);for(;c<e;)d[l++]=s[c++];for(d[e]=n;c<a;)d[++l]=s[c++];return d}let hl=class f3{_tag="EmptyNode";modify(e,n,s,a,c,l){const d=s(at());return pn(d)?new f3:(++l.value,new Ng(e,a,c,d))}};function ks(t){return EI(t,"EmptyNode")}function CH(t){return ks(t)||t._tag==="LeafNode"||t._tag==="CollisionNode"}function Ib(t,e){return ks(t)?!1:e===t.edit}let Ng=class zv{edit;hash;key;value;_tag="LeafNode";constructor(e,n,s,a){this.edit=e,this.hash=n,this.key=s,this.value=a}modify(e,n,s,a,c,l){if(wt(c,this.key)){const m=s(this.value);return m===this.value?this:pn(m)?(--l.value,new hl):Ib(this,e)?(this.value=m,this):new zv(e,a,c,m)}const d=s(at());return pn(d)?this:(++l.value,m3(e,n,this.hash,this,a,new zv(e,a,c,d)))}},NH=class h3{edit;hash;children;_tag="CollisionNode";constructor(e,n,s){this.edit=e,this.hash=n,this.children=s}modify(e,n,s,a,c,l){if(a===this.hash){const m=Ib(this,e),p=this.updateCollisionList(m,e,this.hash,this.children,s,c,l);return p===this.children?this:p.length>1?new h3(e,this.hash,p):p[0]}const d=s(at());return pn(d)?this:(++l.value,m3(e,n,this.hash,this,a,new Ng(e,a,c,d)))}updateCollisionList(e,n,s,a,c,l,d){const m=a.length;for(let y=0;y<m;++y){const b=a[y];if("key"in b&&wt(l,b.key)){const S=b.value,v=c(S);return v===S?a:pn(v)?(--d.value,l3(e,y,a)):Gu(e,y,new Ng(n,s,l,v),a)}}const p=c(at());return pn(p)?a:(++d.value,Gu(e,m,new Ng(n,s,l,p),a))}},Uv=class Lv{edit;mask;children;_tag="IndexedNode";constructor(e,n,s){this.edit=e,this.mask=n,this.children=s}modify(e,n,s,a,c,l){const d=this.mask,m=this.children,p=fl(n,a),y=ju(p),b=u3(d,y),S=d&y,v=Ib(this,e);if(!S){const q=new hl().modify(e,n+rc,s,a,c,l);return q?m.length>=OH?FH(e,p,q,d,m):new Lv(e,d|y,AH(v,b,q,m)):this}const E=m[b],N=E.modify(e,n+rc,s,a,c,l);if(E===N)return this;let C=d,x;if(ks(N)){if(C&=~y,!C)return new hl;if(m.length<=2&&CH(m[b^1]))return m[b^1];x=l3(v,b,m)}else x=Gu(v,b,N,m);return v?(this.mask=C,this.children=x,this):new Lv(e,C,x)}},xH=class d3{edit;size;children;_tag="ArrayNode";constructor(e,n,s){this.edit=e,this.size=n,this.children=s}modify(e,n,s,a,c,l){let d=this.size;const m=this.children,p=fl(n,a),y=m[p],b=(y||new hl).modify(e,n+rc,s,a,c,l);if(y===b)return this;const S=Ib(this,e);let v;if(ks(y)&&!ks(b))++d,v=Gu(S,p,b,m);else if(!ks(y)&&ks(b)){if(--d,d<=RH)return IH(e,d,p,m);v=Gu(S,p,new hl,m)}else v=Gu(S,p,b,m);return S?(this.size=d,this.children=v,this):new d3(e,d,v)}};function IH(t,e,n,s){const a=new Array(e-1);let c=0,l=0;for(let d=0,m=s.length;d<m;++d)if(d!==n){const p=s[d];p&&!ks(p)&&(a[c++]=p,l|=1<<d)}return new Uv(t,l,a)}function FH(t,e,n,s,a){const c=[];let l=s,d=0;for(let m=0;l;++m)l&1&&(c[m]=a[d++]),l>>>=1;return c[e]=n,new xH(t,d+1,c)}function DH(t,e,n,s,a,c){if(n===a)return new NH(t,n,[c,s]);const l=fl(e,n),d=fl(e,a);if(l===d)return m=>new Uv(t,ju(l)|ju(d),[m]);{const m=l<d?[s,c]:[c,s];return new Uv(t,ju(l)|ju(d),m)}}function m3(t,e,n,s,a,c){let l,d=e;for(;;){const m=DH(t,d,n,s,a,c);if(typeof m=="function")l=MH(m,l),d=d+rc;else{let p=m;for(;l!=null;)p=l.value(p),l=l.previous;return p}}}const p3="effect/HashMap",jv=Symbol.for(p3),zH={[jv]:jv,[Symbol.iterator](){return new g3(this,(t,e)=>[t,e])},[Dt](){let t=ft(p3);for(const e of this)t^=w(ft(e[0]),Gt(ft(e[1])));return ve(this,t)},[It](t){if(jH(t)){if(t._size!==this._size)return!1;for(const e of this){const n=w(t,yE(e[0],ft(e[0])));if(pn(n))return!1;if(!wt(e[1],n.value))return!1}return!0}return!1},toString(){return Te(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(Re)}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}},gE=(t,e,n,s)=>{const a=Object.create(zH);return a._editable=t,a._edit=e,a._root=n,a._size=s,a};let g3=class y3{map;f;v;constructor(e,n){this.map=e,this.f=n,this.v=b3(this.map._root,this.f,void 0)}next(){if(pn(this.v))return{done:!0,value:void 0};const e=this.v.value;return this.v=py(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new y3(this.map,this.f)}};const py=t=>t?_3(t[0],t[1],t[2],t[3],t[4]):at(),b3=(t,e,n=void 0)=>{switch(t._tag){case"LeafNode":return ze(t.value)?ht({value:e(t.key,t.value.value),cont:n}):py(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const s=t.children;return _3(s.length,s,0,e,n)}default:return py(n)}},_3=(t,e,n,s,a)=>{for(;n<t;){const c=e[n++];if(c&&!ks(c))return b3(c,s,[t,e,n,s,a])}return py(a)},UH=gE(!1,0,new hl,0),Fb=()=>UH,LH=t=>{const e=v3(Fb());for(const n of t)bd(e,n[0],n[1]);return HH(e)},jH=t=>_t(t,jv),PH=t=>t&&ks(t._root),qH=$(2,(t,e)=>yE(t,e,ft(e))),yE=$(3,(t,e,n)=>{let s=t._root,a=0;for(;;)switch(s._tag){case"LeafNode":return wt(e,s.key)?s.value:at();case"CollisionNode":{if(n===s.hash){const c=s.children;for(let l=0,d=c.length;l<d;++l){const m=c[l];if("key"in m&&wt(e,m.key))return m.value}}return at()}case"IndexedNode":{const c=fl(a,n),l=ju(c);if(s.mask&l){s=s.children[u3(s.mask,l)],a+=rc;break}return at()}case"ArrayNode":{if(s=s.children[fl(a,n)],s){a+=rc;break}return at()}default:return at()}}),BH=$(2,(t,e)=>ze(yE(t,e,ft(e)))),bd=$(3,(t,e,n)=>bE(t,e,()=>ht(n))),KH=$(3,(t,e,n)=>t._editable?(t._root=e,t._size=n,t):e===t._root?t:gE(t._editable,t._edit,e,n)),S3=t=>new g3(t,e=>e),Pv=t=>t._size,v3=t=>gE(!0,t._edit+1,t._root,t._size),HH=t=>(t._editable=!1,t),bE=$(3,(t,e,n)=>VH(t,e,ft(e),n)),VH=$(4,(t,e,n,s)=>{const a={value:t._size},c=t._root.modify(t._editable?t._edit:NaN,0,s,n,e,a);return w(t,KH(c,a.value))}),IA=$(2,(t,e)=>bE(t,e,at)),YH=$(2,(t,e)=>Db(t,Fb(),(n,s,a)=>bd(n,a,e(s,a)))),GH=$(2,(t,e)=>Db(t,void 0,(n,s,a)=>e(s,a))),Db=$(3,(t,e,n)=>{const s=t._root;if(s._tag==="LeafNode")return ze(s.value)?n(e,s.value.value,s.key):e;if(s._tag==="EmptyNode")return e;const a=[s.children];let c;for(;c=a.pop();)for(let l=0,d=c.length;l<d;){const m=c[l++];m&&!ks(m)&&(m._tag==="LeafNode"?ze(m.value)&&(e=n(e,m.value.value,m.key)):a.push(m.children))}return e}),$3="effect/HashSet",qv=Symbol.for($3),JH={[qv]:qv,[Symbol.iterator](){return S3(this._keyMap)},[Dt](){return ve(this,Gt(ft(this._keyMap))(ft($3)))},[It](t){return QH(t)?Pv(this._keyMap)===Pv(t._keyMap)&&wt(this._keyMap,t._keyMap):!1},toString(){return Te(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(Re)}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}},zb=t=>{const e=Object.create(JH);return e._keyMap=t,e},QH=t=>_t(t,qv),XH=zb(Fb()),Ub=()=>XH,ZH=t=>{const e=_E(Ub());for(const n of t)_d(e,n);return SE(e)},WH=(...t)=>{const e=_E(Ub());for(const n of t)_d(e,n);return SE(e)},t7=$(2,(t,e)=>BH(t._keyMap,e)),e7=t=>Pv(t._keyMap),_E=t=>zb(v3(t._keyMap)),SE=t=>(t._keyMap._editable=!1,t),w3=$(2,(t,e)=>{const n=_E(t);return e(n),SE(n)}),_d=$(2,(t,e)=>t._keyMap._editable?(bd(e,!0)(t._keyMap),t):zb(bd(e,!0)(t._keyMap))),E3=$(2,(t,e)=>t._keyMap._editable?(IA(e)(t._keyMap),t):zb(IA(e)(t._keyMap))),n7=$(2,(t,e)=>w3(t,n=>{for(const s of e)E3(n,s)})),r7=$(2,(t,e)=>w3(Ub(),n=>{s7(t,s=>_d(n,s));for(const s of e)_d(n,s)})),s7=$(2,(t,e)=>GH(t._keyMap,(n,s)=>e(s))),i7=$(3,(t,e,n)=>Db(t._keyMap,e,(s,a,c)=>n(s,c))),sc=Ub,a7=ZH,vE=WH,o7=t7,$E=e7,sd=_d,T3=E3,FA=n7,Sd=r7,vd=i7,af="Die",ic="Empty",Rc="Fail",of="Interrupt",dl="Parallel",ml="Sequential",O3="effect/Cause",R3=Symbol.for(O3),c7={_E:t=>t},cf={[R3]:c7,[Dt](){return w(ft(O3),Gt(ft(b7(this))),ve(this))},[It](t){return k3(t)&&y7(this,t)},pipe(){return lt(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:Re(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:Re(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:Re(this.left),right:Re(this.right)}}},toString(){return uf(this)},[pe](){return this.toJSON()}},Xa=(()=>{const t=Object.create(cf);return t._tag=ic,t})(),ac=t=>{const e=Object.create(cf);return e._tag=Rc,e.error=t,e},ls=t=>{const e=Object.create(cf);return e._tag=af,e.defect=t,e},Os=t=>{const e=Object.create(cf);return e._tag=of,e.fiberId=t,e},oc=(t,e)=>{const n=Object.create(cf);return n._tag=dl,n.left=t,n.right=e,n},jn=(t,e)=>{const n=Object.create(cf);return n._tag=ml,n.left=t,n.right=e,n},k3=t=>_t(t,R3),u7=t=>t._tag===ic,l7=t=>t._tag===Rc,M3=t=>t._tag===af,f7=t=>t._tag===ic?!0:pl(t,!0,(e,n)=>{switch(n._tag){case ic:return ht(e);case af:case Rc:case of:return ht(!1);default:return at()}}),A3=t=>ze(d7(t)),wE=t=>RE(void 0,S7)(t),h7=t=>Wi(pl(t,ke(),(e,n)=>n._tag===Rc?ht(w(e,Kn(n.error))):at())),C3=t=>Wi(pl(t,ke(),(e,n)=>n._tag===af?ht(w(e,Kn(n.defect))):at())),EE=t=>pl(t,sc(),(e,n)=>n._tag===of?ht(w(e,sd(n.fiberId))):at()),N3=t=>TE(t,e=>e._tag===Rc?ht(e.error):at()),x3=t=>{const e=N3(t);switch(e._tag){case"None":return Jt(t);case"Some":return Ot(e.value)}},d7=t=>TE(t,e=>e._tag===of?ht(e.fiberId):at()),DA=t=>OE(t,{onEmpty:Xa,onFail:()=>Xa,onDie:ls,onInterrupt:Os,onSequential:jn,onParallel:oc}),m7=t=>OE(t,{onEmpty:Xa,onFail:ls,onDie:ls,onInterrupt:Os,onSequential:jn,onParallel:oc}),p7=$(2,(t,e)=>g7(t,n=>ac(e(n)))),g7=$(2,(t,e)=>OE(t,{onEmpty:Xa,onFail:n=>e(n),onDie:n=>ls(n),onInterrupt:n=>Os(n),onSequential:(n,s)=>jn(n,s),onParallel:(n,s)=>oc(n,s)})),y7=(t,e)=>{let n=He(t),s=He(e);for(;ta(n)&&ta(s);){const[a,c]=w(si(n),pl([sc(),ke()],([m,p],y)=>{const[b,S]=Bv(y);return ht([w(m,Sd(b)),w(p,_e(S))])})),[l,d]=w(si(s),pl([sc(),ke()],([m,p],y)=>{const[b,S]=Bv(y);return ht([w(m,Sd(b)),w(p,_e(S))])}));if(!wt(a,l))return!1;n=c,s=d}return!0},b7=t=>_7(He(t),ke()),_7=(t,e)=>{for(;;){const[n,s]=w(t,fE([sc(),ke()],([c,l],d)=>{const[m,p]=Bv(d);return[w(c,Sd(m)),w(l,_e(p))]})),a=$E(n)>0?w(e,Kn(n)):e;if(xb(s))return Wi(a);t=s,e=a}throw new Error(Eb("Cause.flattenCauseLoop"))},TE=$(2,(t,e)=>{const n=[t];for(;n.length>0;){const s=n.pop(),a=e(s);switch(a._tag){case"None":{switch(s._tag){case ml:case dl:{n.push(s.right),n.push(s.left);break}}break}case"Some":return a}}return at()}),Bv=t=>{let e=t;const n=[];let s=sc(),a=ke();for(;e!==void 0;)switch(e._tag){case ic:{if(n.length===0)return[s,a];e=n.pop();break}case Rc:{if(s=sd(s,j0(e._tag,e.error)),n.length===0)return[s,a];e=n.pop();break}case af:{if(s=sd(s,j0(e._tag,e.defect)),n.length===0)return[s,a];e=n.pop();break}case of:{if(s=sd(s,j0(e._tag,e.fiberId)),n.length===0)return[s,a];e=n.pop();break}case ml:{switch(e.left._tag){case ic:{e=e.right;break}case ml:{e=jn(e.left.left,jn(e.left.right,e.right));break}case dl:{e=oc(jn(e.left.left,e.right),jn(e.left.right,e.right));break}default:{a=Kn(a,e.right),e=e.left;break}}break}case dl:{n.push(e.right),e=e.left;break}}throw new Error(Eb("Cause.evaluateCauseLoop"))},S7={emptyCase:kA,failCase:xv,dieCase:xv,interruptCase:kA,sequentialCase:(t,e,n)=>e&&n,parallelCase:(t,e,n)=>e&&n},zA="SequentialCase",UA="ParallelCase",OE=$(2,(t,{onDie:e,onEmpty:n,onFail:s,onInterrupt:a,onParallel:c,onSequential:l})=>RE(t,void 0,{emptyCase:()=>n,failCase:(d,m)=>s(m),dieCase:(d,m)=>e(m),interruptCase:(d,m)=>a(m),sequentialCase:(d,m,p)=>l(m,p),parallelCase:(d,m,p)=>c(m,p)})),pl=$(3,(t,e,n)=>{let s=e,a=t;const c=[];for(;a!==void 0;){const l=n(s,a);switch(s=ze(l)?l.value:s,a._tag){case ml:{c.push(a.right),a=a.left;break}case dl:{c.push(a.right),a=a.left;break}default:{a=void 0;break}}a===void 0&&c.length>0&&(a=c.pop())}return s}),RE=$(3,(t,e,n)=>{const s=[t],a=[];for(;s.length>0;){const l=s.pop();switch(l._tag){case ic:{a.push(Jt(n.emptyCase(e)));break}case Rc:{a.push(Jt(n.failCase(e,l.error)));break}case af:{a.push(Jt(n.dieCase(e,l.defect)));break}case of:{a.push(Jt(n.interruptCase(e,l.fiberId)));break}case ml:{s.push(l.right),s.push(l.left),a.push(Ot({_tag:zA}));break}case dl:{s.push(l.right),s.push(l.left),a.push(Ot({_tag:UA}));break}}}const c=[];for(;a.length>0;){const l=a.pop();switch(l._tag){case"Left":{switch(l.left._tag){case zA:{const d=c.pop(),m=c.pop(),p=n.sequentialCase(e,d,m);c.push(p);break}case UA:{const d=c.pop(),m=c.pop(),p=n.parallelCase(e,d,m);c.push(p);break}}break}case"Right":{c.push(l.right);break}}}if(c.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return c.pop()}),uf=(t,e)=>wE(t)?"All fibers interrupted without errors.":D3(t).map(function(n){return e?.renderErrorCause!==!0||n.cause===void 0?n.stack:`${n.stack} {
${I3(n.cause,"  ")}
}`}).join(`
`),I3=(t,e)=>{const n=t.stack.split(`
`);let s=`${e}[cause]: ${n[0]}`;for(let a=1,c=n.length;a<c;a++)s+=`
${e}${n[a]}`;return t.cause&&(s+=` {
${I3(t.cause,`${e}  `)}
${e}}`),s};let LA=class F3 extends globalThis.Error{span=void 0;constructor(e){const n=typeof e=="object"&&e!==null,s=Error.stackTraceLimit;Error.stackTraceLimit=1,super(v7(e),n&&"cause"in e&&typeof e.cause<"u"?{cause:new F3(e.cause)}:void 0),this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=s,this.name=e instanceof Error?e.name:"Error",n&&(gl in e&&(this.span=e[gl]),Object.keys(e).forEach(a=>{a in this||(this[a]=e[a])})),this.stack=E7(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}};const v7=t=>{if(typeof t=="string")return t;if(typeof t=="object"&&t!==null&&t instanceof Error)return t.message;try{if(_t(t,"toString")&&Jd(t.toString)&&t.toString!==Object.prototype.toString&&t.toString!==globalThis.Array.prototype.toString)return t.toString()}catch{}return AI(t)},$7=/\((.*)\)/g,w7=zt("effect/Tracer/spanToTrace",()=>new WeakMap),E7=(t,e,n)=>{const s=[t],a=e.startsWith(t)?e.slice(t.length).split(`
`):e.split(`
`);for(let c=1;c<a.length;c++){if(a[c].includes(" at new BaseEffectError")||a[c].includes(" at new YieldableError")){c++;continue}if(a[c].includes("Generator.next")||a[c].includes("effect_internal_function"))break;s.push(a[c].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let c=n,l=0;for(;c&&c._tag==="Span"&&l<10;){const d=w7.get(c);if(typeof d=="function"){const m=d();if(typeof m=="string"){const p=m.matchAll($7);let y=!1;for(const[,b]of p)y=!0,s.push(`    at ${c.name} (${b})`);y||s.push(`    at ${c.name} (${m.replace(/^at /,"")})`)}else s.push(`    at ${c.name}`)}else s.push(`    at ${c.name}`);c=Xs(c.parent),l++}}return s.join(`
`)},gl=Symbol.for("effect/SpanAnnotation"),D3=t=>RE(t,void 0,{emptyCase:()=>[],dieCase:(e,n)=>[new LA(n)],failCase:(e,n)=>[new LA(n)],interruptCase:()=>[],parallelCase:(e,n,s)=>[...n,...s],sequentialCase:(e,n,s)=>[...n,...s]}),Kv=Symbol.for("effect/Duration"),z3=BigInt(0),jA=BigInt(24),lg=BigInt(60),Hv=BigInt(1e3),PA=BigInt(1e6),qA=BigInt(1e9),T7=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,li=t=>{if(U3(t))return t;if(Zi(t))return bl(t);if(wb(t))return P0(t);if(Array.isArray(t)&&t.length===2&&t.every(Zi))return t[0]===-1/0||t[1]===-1/0||Number.isNaN(t[0])||Number.isNaN(t[1])?yl:t[0]===1/0||t[1]===1/0?M7:P0(BigInt(Math.round(t[0]*1e9))+BigInt(Math.round(t[1])));if(hs(t)){const e=T7.exec(t);if(e){const[n,s,a]=e,c=Number(s);switch(a){case"nano":case"nanos":return P0(BigInt(s));case"micro":case"micros":return A7(BigInt(s));case"milli":case"millis":return bl(c);case"second":case"seconds":return C7(c);case"minute":case"minutes":return N7(c);case"hour":case"hours":return x7(c);case"day":case"days":return I7(c);case"week":case"weeks":return F7(c)}}}throw new Error("Invalid DurationInput")},BA={_tag:"Millis",millis:0},O7={_tag:"Infinity"},R7={[Kv]:Kv,[Dt](){return ve(this,MI(this.value))},[It](t){return U3(t)&&q7(this,t)},toString(){return`Duration(${K7(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:z7(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}},mi=t=>{const e=Object.create(R7);return Zi(t)?isNaN(t)||t<=0?e.value=BA:Number.isFinite(t)?Number.isInteger(t)?e.value={_tag:"Millis",millis:t}:e.value={_tag:"Nanos",nanos:BigInt(Math.round(t*1e6))}:e.value=O7:t<=z3?e.value=BA:e.value={_tag:"Nanos",nanos:t},e},U3=t=>_t(t,Kv),k7=t=>{switch(t.value._tag){case"Millis":return t.value.millis===0;case"Nanos":return t.value.nanos===z3;case"Infinity":return!1}},yl=mi(0),M7=mi(1/0),P0=t=>mi(t),A7=t=>mi(t*Hv),bl=t=>mi(t),C7=t=>mi(t*1e3),N7=t=>mi(t*6e4),x7=t=>mi(t*36e5),I7=t=>mi(t*864e5),F7=t=>mi(t*6048e5),Vv=t=>U7(t,{onMillis:e=>e,onNanos:e=>Number(e)/1e6}),D7=t=>{const e=li(t);switch(e.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return e.value.nanos;case"Millis":return BigInt(Math.round(e.value.millis*1e6))}},z7=t=>{const e=li(t);switch(e.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(e.value.nanos/qA),Number(e.value.nanos%qA)];case"Millis":return[Math.floor(e.value.millis/1e3),Math.round(e.value.millis%1e3*1e6)]}},U7=$(2,(t,e)=>{const n=li(t);switch(n.value._tag){case"Nanos":return e.onNanos(n.value.nanos);case"Infinity":return e.onMillis(1/0);case"Millis":return e.onMillis(n.value.millis)}}),kE=$(3,(t,e,n)=>{const s=li(t),a=li(e);if(s.value._tag==="Infinity"||a.value._tag==="Infinity")return n.onMillis(Vv(s),Vv(a));if(s.value._tag==="Nanos"||a.value._tag==="Nanos"){const c=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6)),l=a.value._tag==="Nanos"?a.value.nanos:BigInt(Math.round(a.value.millis*1e6));return n.onNanos(c,l)}return n.onMillis(s.value.millis,a.value.millis)}),L7=(t,e)=>kE(t,e,{onMillis:(n,s)=>n===s,onNanos:(n,s)=>n===s}),j7=$(2,(t,e)=>kE(t,e,{onMillis:(n,s)=>n<=s,onNanos:(n,s)=>n<=s})),P7=$(2,(t,e)=>kE(t,e,{onMillis:(n,s)=>n>=s,onNanos:(n,s)=>n>=s})),q7=$(2,(t,e)=>L7(li(t),li(e))),B7=t=>{const e=li(t);if(e.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=D7(e),s=n/PA,a=s/Hv,c=a/lg,l=c/lg,d=l/jA;return{days:Number(d),hours:Number(l%jA),minutes:Number(c%lg),seconds:Number(a%lg),millis:Number(s%Hv),nanos:Number(n%PA)}},K7=t=>{const e=li(t);if(e.value._tag==="Infinity")return"Infinity";if(k7(e))return"0";const n=B7(e),s=[];return n.days!==0&&s.push(`${n.days}d`),n.hours!==0&&s.push(`${n.hours}h`),n.minutes!==0&&s.push(`${n.minutes}m`),n.seconds!==0&&s.push(`${n.seconds}s`),n.millis!==0&&s.push(`${n.millis}ms`),n.nanos!==0&&s.push(`${n.nanos}ns`),s.join(" ")},KA=Symbol.for("effect/MutableRef"),H7={[KA]:KA,toString(){return Te(this.toJSON())},toJSON(){return{_id:"MutableRef",current:Re(this.current)}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}},kc=t=>{const e=Object.create(H7);return e.current=t,e},V7=$(3,(t,e,n)=>wt(e,t.current)?(t.current=n,!0):!1),Qt=t=>t.current,Mc=$(2,(t,e)=>(t.current=e,t)),Lb="effect/FiberId",cc=Symbol.for(Lb),_l="None",Yv="Runtime",Gv="Composite",Y7=Fe(`${Lb}-${_l}`);let G7=class{[cc]=cc;_tag=_l;id=-1;startTimeMillis=-1;[Dt](){return Y7}[It](e){return ME(e)&&e._tag===_l}toString(){return Te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[pe](){return this.toJSON()}},J7=class{id;startTimeMillis;[cc]=cc;_tag=Yv;constructor(e,n){this.id=e,this.startTimeMillis=n}[Dt](){return ve(this,Fe(`${Lb}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[It](e){return ME(e)&&e._tag===Yv&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return Te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[pe](){return this.toJSON()}},Q7=class{left;right;[cc]=cc;_tag=Gv;constructor(e,n){this.left=e,this.right=n}_hash;[Dt](){return w(Fe(`${Lb}-${this._tag}`),Gt(ft(this.left)),Gt(ft(this.right)),ve(this))}[It](e){return ME(e)&&e._tag===Gv&&wt(this.left,e.left)&&wt(this.right,e.right)}toString(){return Te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:Re(this.left),right:Re(this.right)}}[pe](){return this.toJSON()}};const L3=new G7,ME=t=>_t(t,cc),j3=$(2,(t,e)=>t._tag===_l?e:e._tag===_l?t:new Q7(t,e)),X7=t=>w(t,vd(L3,(e,n)=>j3(n)(e))),gy=t=>{switch(t._tag){case _l:return sc();case Yv:return vE(t.id);case Gv:return w(gy(t.left),Sd(gy(t.right)))}},HA=zt(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>kc(0)),P3=t=>Array.from(gy(t)).map(n=>`#${n}`).join(","),Z7=()=>{const t=Qt(HA);return w(HA,Mc(t+1)),new J7(t,Date.now())},Za=L3,W7=j3,t9=X7,e9=gy,n9=P3,q3=Z7,AE=Fb,r9=LH,s9=PH,B3=qH,K3=bd,H3=S3,i9=bE,a9=YH,V3=Db,$d=Symbol.for("effect/List"),Jv=t=>le(t),o9=t=>v8(hE(t),Jv),c9=o9(wt),u9={[$d]:$d,_tag:"Cons",toString(){return Te(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:Jv(this).map(Re)}},[pe](){return this.toJSON()},[It](t){return G3(t)&&this._tag===t._tag&&c9(this,t)},[Dt](){return ve(this,Xd(Jv(this)))},[Symbol.iterator](){let t=!1,e=this;return{next(){if(t)return this.return();if(e._tag==="Nil")return t=!0,this.return();const n=e.head;return e=e.tail,{done:t,value:n}},return(n){return t||(t=!0),{done:!0,value:n}}}},pipe(){return lt(this,arguments)}},yy=(t,e)=>{const n=Object.create(u9);return n.head=t,n.tail=e,n},l9=Fe("Nil"),f9={[$d]:$d,_tag:"Nil",toString(){return Te(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[pe](){return this.toJSON()},[Dt](){return l9},[It](t){return G3(t)&&this._tag===t._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return lt(this,arguments)}},Y3=Object.create(f9),G3=t=>_t(t,$d),Ki=t=>t._tag==="Nil",h9=t=>t._tag==="Cons",d9=()=>Y3,uc=(t,e)=>yy(t,e),Sl=d9,CE=t=>yy(t,Y3),m9=$(2,(t,e)=>g9(e,t)),p9=$(2,(t,e)=>uc(e,t)),g9=$(2,(t,e)=>{if(Ki(t))return e;if(Ki(e))return t;{const n=yy(e.head,t);let s=n,a=e.tail;for(;!Ki(a);){const c=yy(a.head,t);s.tail=c,s=c,a=a.tail}return n}}),y9=$(3,(t,e,n)=>{let s=e,a=t;for(;!Ki(a);)s=n(s,a.head),a=a.tail;return s}),b9=t=>{let e=Sl(),n=t;for(;!Ki(n);)e=p9(e,n.head),n=n.tail;return e},jb=function(){function t(e){e&&Object.assign(this,e)}return t.prototype=sE,t}(),_9=Symbol.for("effect/DifferContextPatch");function VA(t){return t}const nm={...jb.prototype,[_9]:{_Value:VA,_Patch:VA}},S9=Object.assign(Object.create(nm),{_tag:"Empty"}),v9=Object.create(S9),J3=()=>v9,$9=Object.assign(Object.create(nm),{_tag:"AndThen"}),w9=(t,e)=>{const n=Object.create($9);return n.first=t,n.second=e,n},E9=Object.assign(Object.create(nm),{_tag:"AddService"}),T9=(t,e)=>{const n=Object.create(E9);return n.key=t,n.service=e,n},O9=Object.assign(Object.create(nm),{_tag:"RemoveService"}),R9=t=>{const e=Object.create(O9);return e.key=t,e},k9=Object.assign(Object.create(nm),{_tag:"UpdateService"}),M9=(t,e)=>{const n=Object.create(k9);return n.key=t,n.update=e,n},A9=(t,e)=>{const n=new Map(t.unsafeMap);let s=J3();for(const[a,c]of e.unsafeMap.entries())if(n.has(a)){const l=n.get(a);n.delete(a),wt(l,c)||(s=xg(M9(a,()=>c))(s))}else n.delete(a),s=xg(T9(a,c))(s);for(const[a]of n.entries())s=xg(R9(a))(s);return s},xg=$(2,(t,e)=>w9(t,e)),C9=$(2,(t,e)=>{if(t._tag==="Empty")return e;let n=!1,s=He(t);const a=new Map(e.unsafeMap);for(;ta(s);){const l=si(s),d=Ui(s);switch(l._tag){case"Empty":{s=d;break}case"AddService":{a.set(l.key,l.service),s=d;break}case"AndThen":{s=Kn(Kn(d,l.second),l.first);break}case"RemoveService":{a.delete(l.key),s=d;break}case"UpdateService":{a.set(l.key,l.update(a.get(l.key))),n=!0,s=d;break}}}if(!n)return Wo(a);const c=new Map;for(const[l]of e.unsafeMap)a.has(l)&&(c.set(l,a.get(l)),a.delete(l));for(const[l,d]of a)c.set(l,d);return Wo(c)}),N9=Symbol.for("effect/DifferHashSetPatch");function q0(t){return t}const Pb={...jb.prototype,[N9]:{_Value:q0,_Key:q0,_Patch:q0}},x9=Object.assign(Object.create(Pb),{_tag:"Empty"}),I9=Object.create(x9),Q3=()=>I9,F9=Object.assign(Object.create(Pb),{_tag:"AndThen"}),D9=(t,e)=>{const n=Object.create(F9);return n.first=t,n.second=e,n},z9=Object.assign(Object.create(Pb),{_tag:"Add"}),U9=t=>{const e=Object.create(z9);return e.value=t,e},L9=Object.assign(Object.create(Pb),{_tag:"Remove"}),j9=t=>{const e=Object.create(L9);return e.value=t,e},P9=(t,e)=>{const[n,s]=vd([t,Q3()],([a,c],l)=>o7(l)(a)?[T3(l)(a),c]:[a,Qv(U9(l))(c)])(e);return vd(s,(a,c)=>Qv(j9(c))(a))(n)},Qv=$(2,(t,e)=>D9(t,e)),q9=$(2,(t,e)=>{if(t._tag==="Empty")return e;let n=e,s=He(t);for(;ta(s);){const a=si(s),c=Ui(s);switch(a._tag){case"Empty":{s=c;break}case"AndThen":{s=Kn(a.first)(Kn(a.second)(c));break}case"Add":{n=sd(a.value)(n),s=c;break}case"Remove":n=T3(a.value)(n),s=c}}return n}),B9=Symbol.for("effect/DifferReadonlyArrayPatch");function YA(t){return t}const rm={...jb.prototype,[B9]:{_Value:YA,_Patch:YA}},K9=Object.assign(Object.create(rm),{_tag:"Empty"}),H9=Object.create(K9),X3=()=>H9,V9=Object.assign(Object.create(rm),{_tag:"AndThen"}),Y9=(t,e)=>{const n=Object.create(V9);return n.first=t,n.second=e,n},G9=Object.assign(Object.create(rm),{_tag:"Append"}),J9=t=>{const e=Object.create(G9);return e.values=t,e},Q9=Object.assign(Object.create(rm),{_tag:"Slice"}),X9=(t,e)=>{const n=Object.create(Q9);return n.from=t,n.until=e,n},Z9=Object.assign(Object.create(rm),{_tag:"Update"}),W9=(t,e)=>{const n=Object.create(Z9);return n.index=t,n.patch=e,n},tV=t=>{let e=0,n=X3();for(;e<t.oldValue.length&&e<t.newValue.length;){const s=t.oldValue[e],a=t.newValue[e],c=t.differ.diff(s,a);wt(c,t.differ.empty)||(n=Ig(n,W9(e,c))),e=e+1}return e<t.oldValue.length&&(n=Ig(n,X9(0,e))),e<t.newValue.length&&(n=Ig(n,J9(aH(e)(t.newValue)))),n},Ig=$(2,(t,e)=>Y9(t,e)),eV=$(3,(t,e,n)=>{if(t._tag==="Empty")return e;let s=e.slice(),a=vs(t);for(;Ag(a);){const c=cr(a),l=tc(a);switch(c._tag){case"Empty":{a=l;break}case"AndThen":{l.unshift(c.first,c.second),a=l;break}case"Append":{for(const d of c.values)s.push(d);a=l;break}case"Slice":{s=s.slice(c.from,c.until),a=l;break}case"Update":{s[c.index]=n.patch(c.patch,s[c.index]),a=l;break}}}return s}),nV=Symbol.for("effect/Differ"),rV={[nV]:{_P:At,_V:At},pipe(){return lt(this,arguments)}},lf=t=>{const e=Object.create(rV);return e.empty=t.empty,e.diff=t.diff,e.combine=t.combine,e.patch=t.patch,e},sV=()=>lf({empty:J3(),combine:(t,e)=>xg(e)(t),diff:(t,e)=>A9(t,e),patch:(t,e)=>C9(e)(t)}),iV=()=>lf({empty:Q3(),combine:(t,e)=>Qv(e)(t),diff:(t,e)=>P9(t,e),patch:(t,e)=>q9(e)(t)}),aV=t=>lf({empty:X3(),combine:(e,n)=>Ig(e,n),diff:(e,n)=>tV({oldValue:e,newValue:n,differ:t}),patch:(e,n)=>eV(e,n,t)}),Z3=()=>oV((t,e)=>e),oV=t=>lf({empty:At,combine:(e,n)=>e===At?n:n===At?e:s=>n(e(s)),diff:(e,n)=>wt(e,n)?At:$b(n),patch:(e,n)=>t(n,e(n))}),wd=255,W3=8,Xv=t=>t&wd,Zv=t=>t>>W3&wd,sm=(t,e)=>(t&wd)+((e&t&wd)<<W3),cV=sm(0,0),uV=t=>sm(t,t),lV=t=>sm(t,0),fV=$(2,(t,e)=>sm(Xv(t)&~e,Zv(t))),hV=$(2,(t,e)=>t|e),dV=t=>~t>>>0&wd,mV=0,Ac=1,pV=2,tF=4,Wv=16,eF=32,gV=t=>qb(t,eF),yV=$(2,(t,e)=>t&~e),bV=$(2,(t,e)=>t|e),Fa=t=>nF(t)&&!SV(t),nF=t=>qb(t,Ac),qb=$(2,(t,e)=>(t&e)!==0),rF=(...t)=>t.reduce((e,n)=>e|n,0),_V=rF(mV),GA=t=>qb(t,tF),SV=t=>qb(t,Wv),Bo=$(2,(t,e)=>sm(t^e,e)),Ju=$(2,(t,e)=>t&(dV(Xv(e))|Zv(e))|Xv(e)&Zv(e)),JA=lf({empty:cV,diff:(t,e)=>Bo(t,e),combine:(t,e)=>hV(e)(t),patch:(t,e)=>Ju(e,t)}),vV=uV,sF=lV,QA=fV,iF=(t,e)=>({_tag:"Par",left:t,right:e}),fg=(t,e)=>({_tag:"Seq",left:t,right:e}),$V=t=>{let e=CE(t),n=Sl();for(;;){const[s,a]=y9(e,[aF(),Sl()],([c,l],d)=>{const[m,p]=wV(d);return[kV(c,m),m9(l,p)]});if(n=EV(n,s),Ki(a))return b9(n);e=a}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},wV=t=>{let e=t,n=aF(),s=Sl(),a=Sl();for(;;)switch(e._tag){case"Empty":{if(Ki(s))return[n,a];e=s.head,s=s.tail;break}case"Par":{s=uc(e.right,s),e=e.left;break}case"Seq":{const c=e.left,l=e.right;switch(c._tag){case"Empty":{e=l;break}case"Par":{const d=c.left,m=c.right;e=iF(fg(d,l),fg(m,l));break}case"Seq":{const d=c.left,m=c.right;e=fg(d,fg(m,l));break}case"Single":{e=c,a=uc(l,a);break}}break}case"Single":{if(n=RV(n,e),Ki(s))return[n,a];e=s.head,s=s.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},EV=(t,e)=>{if(Ki(t))return CE(B0(e));if(MV(e))return t;const n=FV(t.head),s=AV(e);return n.length===1&&s.length===1&&wt(n[0],s[0])?uc(IV(t.head,B0(e)),t.tail):uc(B0(e),t)},TV=Symbol.for("effect/RequestBlock/RequestBlockParallel"),OV={_R:t=>t};let NE=class{map;[TV]=OV;constructor(e){this.map=e}};const aF=()=>new NE(AE()),RV=(t,e)=>new NE(i9(t.map,e.dataSource,n=>D8(Po(n,yd(e.blockedRequest)),()=>He(e.blockedRequest)))),kV=(t,e)=>new NE(V3(t.map,e.map,(n,s,a)=>K3(n,a,Ke(B3(n,a),{onNone:()=>s,onSome:c=>_e(s,c)})))),MV=t=>s9(t.map),AV=t=>Array.from(H3(t.map)),B0=t=>xV(a9(t.map,e=>He(e))),CV=Symbol.for("effect/RequestBlock/RequestBlockSequential"),NV={_R:t=>t};let oF=class{map;[CV]=NV;constructor(e){this.map=e}};const xV=t=>new oF(t),IV=(t,e)=>new oF(V3(e.map,t.map,(n,s,a)=>K3(n,a,Ke(B3(n,a),{onNone:()=>ke(),onSome:c=>_e(c,s)})))),FV=t=>Array.from(H3(t.map)),DV=t=>Array.from(t.map),im="Pending",Bb="Done",zV="effect/Deferred",UV=Symbol.for(zV),LV={_E:t=>t,_A:t=>t},jV=t=>({_tag:im,joiners:t}),cF=t=>({_tag:Bb,effect:t});let xE=class uF{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new uF(this.self)}};const lF=(t,e)=>{const n=new on("Blocked");return n.effect_instruction_i0=t,n.effect_instruction_i1=e,n},PV=t=>{const e=new on("RunBlocked");return e.effect_instruction_i0=t,e},lc=Symbol.for("effect/Effect");let qV=class{patch;op;_op=nE;constructor(e,n){this.patch=e,this.op=n}},on=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[lc]=ll;constructor(e){this._op=e}[It](e){return this===e}[Dt](){return ve(this,Zw(this))}pipe(){return lt(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:Re(this.effect_instruction_i0),effect_instruction_i1:Re(this.effect_instruction_i1),effect_instruction_i2:Re(this.effect_instruction_i2)}}toString(){return Te(this.toJSON())}[pe](){return this.toJSON()}[Symbol.iterator](){return new xE(new Qd(this))}},fF=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[lc]=ll;constructor(e){this._op=e,this._tag=e}[It](e){return qE(e)&&e._op==="Failure"&&wt(this.effect_instruction_i0,e.effect_instruction_i0)}[Dt](){return w(Fe(this._tag),Gt(ft(this.effect_instruction_i0)),ve(this))}get cause(){return this.effect_instruction_i0}pipe(){return lt(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return Te(this.toJSON())}[pe](){return this.toJSON()}[Symbol.iterator](){return new xE(new Qd(this))}},hF=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[lc]=ll;constructor(e){this._op=e,this._tag=e}[It](e){return qE(e)&&e._op==="Success"&&wt(this.effect_instruction_i0,e.effect_instruction_i0)}[Dt](){return w(Fe(this._tag),Gt(ft(this.effect_instruction_i0)),ve(this))}get value(){return this.effect_instruction_i0}pipe(){return lt(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:Re(this.value)}}toString(){return Te(this.toJSON())}[pe](){return this.toJSON()}[Symbol.iterator](){return new xE(new Qd(this))}};const pi=t=>_t(t,lc),ee=t=>{const e=new on(xI);return e.effect_instruction_i0=t,e},dF=$(3,(t,e,n)=>Ds(s=>X(t,a=>X(Ya(bt(()=>s(e(a)))),c=>bt(()=>n(a,c)).pipe(ds({onFailure:l=>{switch(c._tag){case qn:return yn(jn(c.effect_instruction_i0,l));case Bn:return yn(l)}},onSuccess:()=>c})))))),Tr=$(2,(t,e)=>X(t,()=>nt(e))),ps=t=>Tr(t,void 0),mF=function(){const t=new on(Ob);switch(arguments.length){case 2:{t.effect_instruction_i0=arguments[0],t.commit=arguments[1];break}case 3:{t.effect_instruction_i0=arguments[0],t.effect_instruction_i1=arguments[1],t.commit=arguments[2];break}case 4:{t.effect_instruction_i0=arguments[0],t.effect_instruction_i1=arguments[1],t.effect_instruction_i2=arguments[2],t.commit=arguments[3];break}default:throw new Error(Eb("you're not supposed to end up here"))}return t},Ed=(t,e=Za)=>{const n=new on(ed);let s;return n.effect_instruction_i0=a=>{s=t(a)},n.effect_instruction_i1=e,om(n,a=>pi(s)?s:Se)},Io=(t,e=Za)=>bt(()=>Ed(t,e)),fc=(t,e=Za)=>mF(t,function(){let n,s;function a(m){n?n(m):s===void 0&&(s=m)}const c=new on(ed);c.effect_instruction_i0=m=>{n=m,s&&m(s)},c.effect_instruction_i1=e;let l,d;return this.effect_instruction_i0.length!==1?(d=new AbortController,l=ir(()=>this.effect_instruction_i0(a,d.signal))):l=ir(()=>this.effect_instruction_i0(a)),l||d?om(c,m=>(d&&d.abort(),l??Se)):c}),pF=$(2,(t,e)=>{const n=new on(kg);return n.effect_instruction_i0=t,n.effect_instruction_i1=e,n}),Td=$(2,(t,e)=>Wa(t,{onFailure:e,onSuccess:nt})),XA=Symbol.for("effect/OriginalAnnotation"),IE=(t,e)=>ze(e)?new Proxy(t,{has(n,s){return s===gl||s===XA||s in n},get(n,s){return s===gl?e.value:s===XA?t:n[s]}}):t,by=t=>ro(t)&&!(gl in t)?ee(e=>yn(ls(IE(t,VE(e))))):yn(ls(t)),gF=t=>yF(()=>ls(new $Y(t))),vl=t=>Wa(t,{onFailure:e=>nt(Ot(e)),onSuccess:e=>nt(Jt(e))}),Ya=t=>bF(t,{onFailure:ce,onSuccess:ue}),Ze=t=>ro(t)&&!(gl in t)?ee(e=>yn(ac(IE(t,VE(e))))):yn(ac(t)),FE=t=>X(W(t),Ze),yn=t=>{const e=new fF(qn);return e.effect_instruction_i0=t,e},yF=t=>X(W(t),yn),Kb=ee(t=>nt(t.id())),am=t=>ee(e=>t(e.id())),X=$(2,(t,e)=>{const n=new on(oy);return n.effect_instruction_i0=t,n.effect_instruction_i1=e,n}),Pu=$(2,(t,e)=>X(t,n=>{const s=typeof e=="function"?e(n):e;return pi(s)?s:TI(s)?Ed(a=>{s.then(c=>a(nt(c)),c=>a(Ze(new MF(c,"An unknown error occurred in Effect.andThen"))))}):nt(s)})),BV=t=>{const e=new on("OnStep");return e.effect_instruction_i0=t,e},Hb=t=>X(t,At),bF=$(2,(t,e)=>ds(t,{onFailure:n=>nt(e.onFailure(n)),onSuccess:n=>nt(e.onSuccess(n))})),ds=$(2,(t,e)=>{const n=new on(cy);return n.effect_instruction_i0=t,n.effect_instruction_i1=e.onFailure,n.effect_instruction_i2=e.onSuccess,n}),Wa=$(2,(t,e)=>ds(t,{onFailure:n=>{if(C3(n).length>0)return yn(m7(n));const a=h7(n);return a.length>0?e.onFailure(mE(a)):yn(n)},onSuccess:e.onSuccess})),Li=$(2,(t,e)=>bt(()=>{const n=le(t),s=Ab(n.length);let a=0;return Tr(zE({while:()=>a<n.length,body:()=>e(n[a],a),step:c=>{s[a++]=c}}),s)})),Vb=$(2,(t,e)=>bt(()=>{const n=le(t);let s=0;return zE({while:()=>s<n.length,body:()=>e(n[s],s),step:()=>{s++}})})),Tn=X(Kb,t=>_F(t)),_F=t=>yn(Os(t)),DE=t=>{const e=new on(ef);return e.effect_instruction_i0=vV(Ac),e.effect_instruction_i1=()=>t,e},KV=$(2,(t,e)=>Ds(n=>X(Ya(n(t)),s=>NY(e,s)))),kt=$(2,(t,e)=>X(t,n=>W(()=>e(n)))),SF=$(2,(t,e)=>Wa(t,{onFailure:n=>FE(()=>e.onFailure(n)),onSuccess:n=>W(()=>e.onSuccess(n))})),Yb=$(2,(t,e)=>ds(t,{onFailure:n=>{const s=x3(n);switch(s._tag){case"Left":return FE(()=>e(s.left));case"Right":return yn(s.right)}},onSuccess:nt})),hc=$(2,(t,e)=>Ds(n=>ds(n(t),{onFailure:s=>{const a=ce(s);return ds(e(a),{onFailure:c=>ce(jn(s,c)),onSuccess:()=>a})},onSuccess:s=>{const a=ue(s);return De(e(a),a)}}))),om=$(2,(t,e)=>hc(t,e_({onFailure:n=>wE(n)?ps(e(EE(n))):Se,onSuccess:()=>Se}))),HV=t=>VV(t,At),VV=$(2,(t,e)=>Wa(t,{onFailure:n=>by(e(n)),onSuccess:nt})),nt=t=>{const e=new hF(Bn);return e.effect_instruction_i0=t,e},bt=t=>{const e=new on(Ob);return e.commit=t,e},W=t=>{const e=new on(NI);return e.effect_instruction_i0=t,e},Gb=$(t=>t.length===3||t.length===2&&!(ro(t[1])&&"onlyEffect"in t[1]),(t,e)=>X(t,n=>{const s=typeof e=="function"?e(n):e;return pi(s)?Tr(s,n):TI(s)?Ed(a=>{s.then(c=>a(nt(n)),c=>a(Ze(new MF(c,"An unknown error occurred in Effect.tap"))))}):nt(n)})),YV=t=>ee(e=>{const n=e.getFiberRef(e$),s=w(n,Ee(()=>e.scope()));return t(ff(e$,ht(s)))}),Cc=t=>{const e=new on(ef);return e.effect_instruction_i0=sF(Ac),e.effect_instruction_i1=()=>t,e},Ds=t=>mF(t,function(){const e=new on(ef);return e.effect_instruction_i0=sF(Ac),e.effect_instruction_i1=n=>nF(n)?ir(()=>this.effect_instruction_i0(DE)):ir(()=>this.effect_instruction_i0(Cc)),e}),Se=nt(void 0),GV=t=>{const e=new on(ef);return e.effect_instruction_i0=t,e.effect_instruction_i1=void 0,e},Jb=$(2,(t,e)=>X(e,n=>n?w(t,kt(ht)):nt(at()))),zE=t=>{const e=new on(uy);return e.effect_instruction_i0=t.while,e.effect_instruction_i1=t.body,e.effect_instruction_i2=t.step,e},JV=t=>bt(()=>{const e=new on(nd);return e.effect_instruction_i0=t(),e}),QV=function(){const t=arguments.length===1?arguments[0]:arguments[1].bind(arguments[0]);return JV(()=>t(w))},XV=$(2,(t,e)=>{const n=new on(ef);return n.effect_instruction_i0=e,n.effect_instruction_i1=()=>t,n}),Qb=t=>{const e=new on(Mg);return typeof t?.priority<"u"?pY(e,t.priority):e},vF=$(2,(t,e)=>X(t,n=>kt(e,s=>[n,s]))),Xb=$(2,(t,e)=>X(t,n=>Tr(e,n))),De=$(2,(t,e)=>X(t,()=>e)),$F=$(3,(t,e,n)=>X(t,s=>kt(e,a=>n(s,a)))),ZV=Io(()=>{const t=setInterval(()=>{},2147483647);return W(()=>clearInterval(t))}),UE=t=>X(Kb,e=>w(t,Od(e))),Od=$(2,(t,e)=>X(t.interruptAsFork(e),()=>t.await)),WV={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return lt(this,arguments)}},tY={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return lt(this,arguments)}},eY={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return lt(this,arguments)}},wF={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return lt(this,arguments)}},EF={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return lt(this,arguments)}},TF={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return lt(this,arguments)}},nY={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return lt(this,arguments)}},rY={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return lt(this,arguments)}},sY="effect/FiberRef",iY=Symbol.for(sY),aY={_A:t=>t},LE=t=>ee(e=>ue(e.getFiberRef(t))),Zb=$(2,(t,e)=>X(LE(t),e)),ZA=$(2,(t,e)=>oY(t,()=>[void 0,e])),oY=$(2,(t,e)=>ee(n=>{const[s,a]=e(n.getFiberRef(t));return n.setFiberRef(t,a),nt(s)})),ff=$(3,(t,e,n)=>dF(Xb(LE(e),ZA(e,n)),()=>t,s=>ZA(e,s))),cY=$(3,(t,e,n)=>Zb(e,s=>ff(t,e,n(s)))),Or=(t,e)=>hf(t,{differ:Z3(),fork:e?.fork??At,join:e?.join}),uY=t=>{const e=iV();return hf(t,{differ:e,fork:e.empty})},lY=t=>{const e=aV(Z3());return hf(t,{differ:e,fork:e.empty})},OF=t=>{const e=sV();return hf(t,{differ:e,fork:e.empty})},hf=(t,e)=>({...Wd,[iY]:aY,initial:t,commit(){return LE(this)},diff:(s,a)=>e.differ.diff(s,a),combine:(s,a)=>e.differ.combine(s,a),patch:s=>a=>e.differ.patch(s,a),fork:e.fork,join:e.join??((s,a)=>a)}),fY=t=>hf(t,{differ:JA,fork:JA.empty}),aa=zt(Symbol.for("effect/FiberRef/currentContext"),()=>OF(oE())),cm=zt(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Or(0)),RF=zt(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Or(2048)),hY=zt(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Or(AE())),dY=zt(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Or(EF)),mY=zt(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Or(Sl())),pY=$(2,(t,e)=>ff(t,cm,e)),gY=zt(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Or("unbounded")),yY=zt(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Or(!0)),bY=zt(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Or(ht(TF))),_Y=zt(Symbol.for("effect/FiberRef/versionMismatchErrorLogLevel"),()=>Or(ht(wF))),t$=zt(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>lY(ec())),e$=zt(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Or(at(),{fork:()=>at(),join:(t,e)=>t})),hg=zt(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Or(Xa,{fork:()=>Xa,join:(t,e)=>t})),WA=Symbol.for("effect/Scope"),tC=Symbol.for("effect/CloseableScope"),kF=(t,e)=>t.addFinalizer(()=>ps(e)),_y=(t,e)=>t.addFinalizer(e),n$=(t,e)=>t.close(e),Wb=(t,e)=>t.fork(e),SY=t=>vY(At)(t),vY=$(2,(t,e)=>{const n=w(t,N3,Po(e));switch(n._tag){case"None":return w(C3(t),dE,Ke({onNone:()=>{const s=le(EE(t)).flatMap(a=>le(e9(a)).map(c=>`#${c}`));return new wY(s?`Interrupted by fibers: ${s.join(", ")}`:void 0)},onSome:At}));case"Some":return n.value}}),jE=function(){class t extends globalThis.Error{commit(){return Ze(this)}toJSON(){const n={...this};return this.message&&(n.message=this.message),this.cause&&(n.cause=this.cause),n}[pe](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?uf(ac(this),{renderErrorCause:!0}):this}}return Object.assign(t.prototype,Q5),t}(),PE=(t,e)=>{class n extends jE{_tag=e}return Object.assign(n.prototype,t),n.prototype.name=e,n},eC=Symbol.for("effect/Cause/errors/RuntimeException"),$Y=PE({[eC]:eC},"RuntimeException"),r$=Symbol.for("effect/Cause/errors/InterruptedException"),wY=PE({[r$]:r$},"InterruptedException"),EY=t=>_t(t,r$),nC=Symbol.for("effect/Cause/errors/NoSuchElement"),t_=PE({[nC]:nC},"NoSuchElementException"),rC=Symbol.for("effect/Cause/errors/UnknownException"),MF=function(){class t extends jE{_tag="UnknownException";error;constructor(n,s){super(s??"An unknown error occurred",{cause:n}),this.error=n}}return Object.assign(t.prototype,{[rC]:rC,name:"UnknownException"}),t}(),qE=t=>pi(t)&&"_tag"in t&&(t._tag==="Success"||t._tag==="Failure"),TY=t=>t._tag==="Failure",OY=t=>t._tag==="Success",Fg=$(2,(t,e)=>{switch(t._tag){case qn:return ce(t.effect_instruction_i0);case Bn:return ue(e)}}),K0=t=>Fg(t,void 0),Qu=(t,e)=>AY(t,e?.parallel?oc:jn),AF=t=>ce(ls(t)),Rd=t=>ce(ac(t)),ce=t=>{const e=new fF(qn);return e.effect_instruction_i0=t,e},RY=$(2,(t,e)=>{switch(t._tag){case qn:return ce(t.effect_instruction_i0);case Bn:return e(t.effect_instruction_i0)}}),kY=t=>w(t,RY(At)),CF=t=>ce(Os(t)),Dg=$(2,(t,e)=>{switch(t._tag){case qn:return ce(t.effect_instruction_i0);case Bn:return ue(e(t.effect_instruction_i0))}}),e_=$(2,(t,{onFailure:e,onSuccess:n})=>{switch(t._tag){case qn:return e(t.effect_instruction_i0);case Bn:return n(t.effect_instruction_i0)}}),s$=$(2,(t,{onFailure:e,onSuccess:n})=>{switch(t._tag){case qn:return e(t.effect_instruction_i0);case Bn:return n(t.effect_instruction_i0)}}),ue=t=>{const e=new hF(Bn);return e.effect_instruction_i0=t,e},$r=ue(void 0),MY=$(2,(t,e)=>BE(t,e,{onSuccess:(n,s)=>[n,s],onFailure:jn})),NF=$(2,(t,e)=>BE(t,e,{onSuccess:(n,s)=>s,onFailure:jn})),BE=$(3,(t,e,{onFailure:n,onSuccess:s})=>{switch(t._tag){case qn:switch(e._tag){case Bn:return ce(t.effect_instruction_i0);case qn:return ce(n(t.effect_instruction_i0,e.effect_instruction_i0))}case Bn:switch(e._tag){case Bn:return ue(s(t.effect_instruction_i0,e.effect_instruction_i0));case qn:return ce(e.effect_instruction_i0)}}}),AY=(t,e)=>{const n=nc(t);return ta(n)?w(Ui(n),fE(w(si(n),Dg(He)),(s,a)=>w(s,BE(a,{onSuccess:(c,l)=>w(c,Kn(l)),onFailure:e}))),Dg(Wi),Dg(s=>ai(s)),ht):at()},um=t=>({...Wd,[UV]:LV,state:kc(jV([])),commit(){return fi(this)},blockingOn:t}),lm=()=>X(Kb,t=>CY(t)),CY=t=>W(()=>um(t)),fi=t=>Io(e=>{const n=Qt(t.state);switch(n._tag){case Bb:return e(n.effect);case im:return n.joiners.push(e),IY(t,e)}},t.blockingOn),n_=$(2,(t,e)=>W(()=>{const n=Qt(t.state);switch(n._tag){case Bb:return!1;case im:{Mc(t.state,cF(e));for(let s=0,a=n.joiners.length;s<a;s++)n.joiners[s](e);return!0}}})),NY=$(2,(t,e)=>n_(t,e)),xF=$(2,(t,e)=>n_(t,yn(e))),KE=$(2,(t,e)=>n_(t,_F(e))),xY=t=>W(()=>Qt(t.state)._tag===Bb),fm=$(2,(t,e)=>n_(t,nt(e))),r_=(t,e)=>{const n=Qt(t.state);if(n._tag===im){Mc(t.state,cF(e));for(let s=0,a=n.joiners.length;s<a;s++)n.joiners[s](e)}},IY=(t,e)=>W(()=>{const n=Qt(t.state);if(n._tag===im){const s=n.joiners.indexOf(e);s>=0&&n.joiners.splice(s,1)}}),FY=ee(t=>ue(t.currentContext)),IF=()=>FY,Nc=t=>X(IF(),t),s_=$(2,(t,e)=>ff(aa,e)(t)),HE=$(2,(t,e)=>cY(aa,n=>Oc(n,e))(t)),DY=$(2,(t,e)=>Nc(n=>s_(t,e(n)))),VE=t=>{const e=t.currentSpan;return e!==void 0&&e._tag==="Span"?ht(e):at()},zY="effect/Clock",sC=Symbol.for(zY),i_=Tc("effect/Clock"),UY=2**31-1,iC={unsafeSchedule(t,e){const n=Vv(e);if(n>UY)return xv;let s=!1;const a=setTimeout(()=>{s=!0,t()},n);return()=>(clearTimeout(a),!s)}},aC=function(){const t=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*t;let e;return()=>(e===void 0&&(e=BigInt(Date.now())*t-BigInt(Math.round(performance.now()*1e6))),e+BigInt(Math.round(performance.now()*1e6)))}(),LY=function(){const t=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!t)return aC;const e=aC()-t.bigint();return()=>e+t.bigint()}();let jY=class{[sC]=sC;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return LY()}currentTimeMillis=W(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=W(()=>this.unsafeCurrentTimeNanos());scheduler(){return nt(iC)}sleep(e){return fc(n=>{const s=iC.unsafeSchedule(()=>n(Se),e);return ps(W(s))})}};const PY=()=>new jY,$l=x8,Sy=t=>t.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),FF="And",DF="Or",zF="InvalidData",UF="MissingData",LF="SourceUnavailable",jF="Unsupported",qY="effect/ConfigError",oC=Symbol.for(qY),df={_tag:"ConfigError",[oC]:oC},PF=(t,e)=>{const n=Object.create(df);return n._op=FF,n.left=t,n.right=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},qF=(t,e)=>{const n=Object.create(df);return n._op=DF,n.left=t,n.right=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},BY=(t,e,n={pathDelim:"."})=>{const s=Object.create(df);return s._op=zF,s.path=t,s.message=e,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Invalid data at ${w(this.path,sf(n.pathDelim))}: "${this.message}")`}}),s},dc=(t,e,n={pathDelim:"."})=>{const s=Object.create(df);return s._op=UF,s.path=t,s.message=e,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Missing data at ${w(this.path,sf(n.pathDelim))}: "${this.message}")`}}),s},KY=(t,e,n,s={pathDelim:"."})=>{const a=Object.create(df);return a._op=LF,a.path=t,a.message=e,a.cause=n,Object.defineProperty(a,"toString",{enumerable:!1,value(){return`(Source unavailable at ${w(this.path,sf(s.pathDelim))}: "${this.message}")`}}),a},HY=(t,e,n={pathDelim:"."})=>{const s=Object.create(df);return s._op=jF,s.path=t,s.message=e,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${w(this.path,sf(n.pathDelim))}: "${this.message}")`}}),s},Fo=$(2,(t,e)=>{switch(t._op){case FF:return PF(Fo(t.left,e),Fo(t.right,e));case DF:return qF(Fo(t.left,e),Fo(t.right,e));case zF:return BY([...e,...t.path],t.message);case UF:return dc([...e,...t.path],t.message);case LF:return KY([...e,...t.path],t.message,t.cause);case jF:return HY([...e,...t.path],t.message)}}),VY={_tag:"Empty"},H0=$(2,(t,e)=>{let n=CE(e),s=t;for(;h9(n);){const a=n.head;switch(a._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=uc(a.first,uc(a.second,n.tail));break}case"MapName":{s=qo(s,a.f),n=n.tail;break}case"Nested":{s=hy(s,a.name),n=n.tail;break}case"Unnested":{if(w(rd(s),K8(a.name)))s=tc(s),n=n.tail;else return Ot(dc(s,`Expected ${a.name} to be in path in ConfigProvider#unnested`));break}}}return Jt(s)}),YY="Constant",GY="Fail",JY="Fallback",QY="Described",XY="Lazy",ZY="MapOrFail",WY="Nested",tG="Primitive",eG="Sequence",nG="HashMap",rG="ZipWith";var cC={};const vy=(t,e)=>[...t,...e],sG="effect/ConfigProvider",uC=Symbol.for(sG),iG=Tc("effect/ConfigProvider"),aG="effect/ConfigProviderFlat",lC=Symbol.for(aG),oG=t=>({[uC]:uC,pipe(){return lt(this,arguments)},...t}),cG=t=>({[lC]:lC,patch:t.patch,load:(e,n,s=!0)=>t.load(e,n,s),enumerateChildren:t.enumerateChildren}),uG=t=>oG({load:e=>X(ss(t,ec(),e,!1),n=>Ke(rd(n),{onNone:()=>Ze(dc(ec(),`Expected a single value having structure: ${e}`)),onSome:nt})),flattened:t}),lG=t=>{const{pathDelim:e,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},t),s=m=>w(m,sf(e)),a=m=>m.split(e),c=()=>typeof process<"u"&&"env"in process&&typeof cC=="object"?cC:{};return uG(cG({load:(m,p,y=!0)=>{const b=s(m),S=c(),v=b in S?ht(S[b]):at();return w(v,Yb(()=>dc(m,`Expected ${b} to exist in the process context`)),X(E=>pG(E,m,p,n,y)))},enumerateChildren:m=>W(()=>{const p=c(),S=Object.keys(p).map(v=>a(v.toUpperCase())).filter(v=>{for(let E=0;E<m.length;E++){const N=w(m,n3(E)),C=v[E];if(C===void 0||N!==C)return!1}return!0}).flatMap(v=>v.slice(m.length,m.length+1));return a7(S)}),patch:VY}))},fG=(t,e,n,s)=>{const a=xA(n.length,m=>m>=s.length?at():ht([t(m),m+1])),c=xA(s.length,m=>m>=n.length?at():ht([e(m),m+1])),l=vy(n,a),d=vy(s,c);return[l,d]},hG=(t,e)=>{let n=e;if(n._tag==="Nested"){const s=t.slice();for(;n._tag==="Nested";)s.push(n.name),n=n.config;return s}return t},ss=(t,e,n,s)=>{const a=n;switch(a._tag){case YY:return nt(vs(a.value));case QY:return bt(()=>ss(t,e,a.config,s));case GY:return Ze(dc(e,a.message));case JY:return w(bt(()=>ss(t,e,a.first,s)),Td(c=>a.condition(c)?w(ss(t,e,a.second,s),Td(l=>Ze(qF(c,l)))):Ze(c)));case XY:return bt(()=>ss(t,e,a.config(),s));case ZY:return bt(()=>w(ss(t,e,a.original,s),X(Li(c=>w(a.mapOrFail(c),Yb(Fo(hG(e,a.original))))))));case WY:return bt(()=>ss(t,vy(e,vs(a.name)),a.config,s));case tG:return w(H0(e,t.patch),X(c=>w(t.load(c,a,s),X(l=>{if(l.length===0){const d=w(rH(c),Ee(()=>"<n/a>"));return Ze(dc([],`Expected ${a.description} with name ${d}`))}return nt(l)}))));case eG:return w(H0(e,t.patch),X(c=>w(t.enumerateChildren(c),X(yG),X(l=>l.length===0?bt(()=>kt(ss(t,e,a.config,!0),vs)):w(Li(l,d=>ss(t,X8(e,`[${d}]`),a.config,!0)),kt(d=>{const m=fH(d);return m.length===0?vs(ec()):vs(m)}))))));case nG:return bt(()=>w(H0(e,t.patch),X(c=>w(t.enumerateChildren(c),X(l=>w(l,Li(d=>ss(t,vy(c,vs(d)),a.valueConfig,s)),kt(d=>d.length===0?vs(AE()):w(gG(d),qo(m=>r9(NA(le(l),m)))))))))));case rG:return bt(()=>w(ss(t,e,a.left,s),vl,X(c=>w(ss(t,e,a.right,s),vl,X(l=>{if(Fn(c)&&Fn(l))return Ze(PF(c.left,l.left));if(Fn(c)&&ri(l))return Ze(c.left);if(ri(c)&&Fn(l))return Ze(l.left);if(ri(c)&&ri(l)){const d=w(e,sf(".")),m=dG(e,d),[p,y]=fG(m,m,w(c.right,qo(Jt)),w(l.right,qo(Jt)));return w(p,NA(y),Li(([b,S])=>w(vF(b,S),kt(([v,E])=>a.zip(v,E)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},dG=(t,e)=>n=>Ot(dc(t,`The element at index ${n} in a sequence at path "${e}" was missing`)),mG=(t,e)=>t.split(new RegExp(`\\s*${Sy(e)}\\s*`)),pG=(t,e,n,s,a)=>a?w(mG(t,s),Li(c=>n.parse(c.trim())),Yb(Fo(e))):w(n.parse(t),SF({onFailure:Fo(e),onSuccess:vs})),gG=t=>Object.keys(t[0]).map(e=>t.map(n=>n[e])),yG=t=>w(Li(t,_G),SF({onFailure:()=>ec(),onSuccess:gd($l)}),vl,kt(C8)),bG=/^(\[(\d+)\])$/,_G=t=>{const e=t.match(bG);if(e!==null){const n=e[2];return w(n!==void 0&&n.length>0?ht(n):at(),rf(SG))}return at()},SG=t=>{const e=Number.parseInt(t);return Number.isNaN(e)?at():ht(e)},fC=Symbol.for("effect/Console"),BF=Tc("effect/Console"),vG={[fC]:fC,assert(t,...e){return W(()=>{console.assert(t,...e)})},clear:W(()=>{console.clear()}),count(t){return W(()=>{console.count(t)})},countReset(t){return W(()=>{console.countReset(t)})},debug(...t){return W(()=>{console.debug(...t)})},dir(t,e){return W(()=>{console.dir(t,e)})},dirxml(...t){return W(()=>{console.dirxml(...t)})},error(...t){return W(()=>{console.error(...t)})},group(t){return t?.collapsed?W(()=>console.groupCollapsed(t?.label)):W(()=>console.group(t?.label))},groupEnd:W(()=>{console.groupEnd()}),info(...t){return W(()=>{console.info(...t)})},log(...t){return W(()=>{console.log(...t)})},table(t,e){return W(()=>{console.table(t,e)})},time(t){return W(()=>console.time(t))},timeEnd(t){return W(()=>console.timeEnd(t))},timeLog(t,...e){return W(()=>{console.timeLog(t,...e)})},trace(...t){return W(()=>{console.trace(...t)})},warn(...t){return W(()=>{console.warn(...t)})},unsafe:console},$G="effect/Random",hC=Symbol.for($G),wG=Tc("effect/Random");let EG=class{seed;[hC]=hC;PRNG;constructor(e){this.seed=e,this.PRNG=new x5(e)}get next(){return W(()=>this.PRNG.number())}get nextBoolean(){return kt(this.next,e=>e>.5)}get nextInt(){return W(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,n){return kt(this.next,s=>(n-e)*s+e)}nextIntBetween(e,n){return W(()=>this.PRNG.integer(n-e)+e)}shuffle(e){return TG(e,n=>this.nextIntBetween(0,n))}};const TG=(t,e)=>bt(()=>w(W(()=>Array.from(t)),X(n=>{const s=[];for(let a=n.length;a>=2;a=a-1)s.push(a);return w(s,Vb(a=>w(e(a),kt(c=>OG(n,a-1,c)))),Tr(nc(n)))}))),OG=(t,e,n)=>{const s=t[e];return t[e]=t[n],t[n]=s,t},RG=t=>new EG(ft(t)),dC=Symbol.for("effect/Tracer"),kG=t=>({[dC]:dC,...t}),KF=Tc("effect/Tracer"),HF=Tc("effect/ParentSpan"),mC=function(){const t="abcdef0123456789",e=t.length;return function(n){let s="";for(let a=0;a<n;a++)s+=t.charAt(Math.floor(Math.random()*e));return s}}();let MG=class{name;parent;context;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];links;constructor(e,n,s,a,c,l){this.name=e,this.parent=n,this.context=s,this.startTime=c,this.kind=l,this.status={_tag:"Started",startTime:c},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:mC(32),this.spanId=mC(16),this.links=Array.from(a)}end(e,n){this.status={_tag:"Ended",endTime:e,exit:n,startTime:this.status.startTime}}attribute(e,n){this.attributes.set(e,n)}event(e,n,s){this.events.push([e,n,s??{}])}addLinks(e){this.links.push(...e)}};const AG=kG({span:(t,e,n,s,a,c)=>new MG(t,e,n,s,a,c),context:t=>t()}),CG=w(oE(),za(i_,PY()),za(BF,vG),za(wG,RG(Math.random())),za(iG,lG()),za(KF,AG)),$y=zt(Symbol.for("effect/DefaultServices/currentServices"),()=>OF(CG)),NG=t=>{const e=li(t);return VF(n=>n.sleep(e))},xG=t=>ee(e=>t(e.currentDefaultServices)),VF=t=>xG(e=>t(e.unsafeMap.get(i_.key))),IG=VF(t=>t.currentTimeMillis),ji=lm,ar=fi,FG=xF,i$=xY,Pi=fm,DG=Zd,zG=X5;let xc=class extends zG{};const YF="Sequential",GF="Parallel",UG="ParallelN",hm={_tag:YF},LG={_tag:GF},jG=t=>({_tag:UG,parallelism:t}),PG=t=>t._tag===YF,qG=t=>t._tag===GF,wy=hm,a$=LG,o$=jG;function BG(t){return new to(t)}function KG(){return BG(new Map)}const pC=Symbol.for("effect/FiberRefs");let to=class{locals;[pC]=pC;constructor(e){this.locals=e}pipe(){return lt(this,arguments)}};const HG=(t,e,n,s=!1)=>{const a=t;let c=e,l=n,d=s,m;for(;m===void 0;)if(gn(c)&&gn(l)){const p=cr(c)[0],y=tc(c),b=cr(l)[0],S=cr(l)[1],v=tc(l);p.startTimeMillis<b.startTimeMillis?(l=v,d=!0):p.startTimeMillis>b.startTimeMillis?c=y:p.id<b.id?(l=v,d=!0):p.id>b.id?c=y:m=[S,d]}else m=[a.initial,!0];return m},VG=$(3,(t,e,n)=>{const s=new Map(t.locals);return n.locals.forEach((a,c)=>{const l=a[0][1];if(!a[0][0][It](e)){if(!s.has(c)){if(wt(l,c.initial))return;s.set(c,[[e,c.join(c.initial,l)]]);return}const d=s.get(c),[m,p]=HG(c,d,a);if(p){const y=c.diff(m,l),b=d[0][1],S=c.join(b,c.patch(y)(b));if(!wt(b,S)){let v;const E=d[0][0];E[It](e)?v=[[E,S],...d.slice(1)]:v=[[e,S],...d],s.set(c,v)}}}}),new to(s)}),YG=$(2,(t,e)=>{const n=new Map;return JF(t,n,e),new to(n)}),JF=(t,e,n)=>{t.locals.forEach((s,a)=>{const c=s[0][1],l=a.patch(a.fork)(c);wt(c,l)?e.set(a,s):e.set(a,[[n,l],...s])})},QF=$(2,(t,e)=>{const n=new Map(t.locals);return n.delete(e),new to(n)}),GG=$(2,(t,e)=>t.locals.has(e)?ht(cr(t.locals.get(e))[1]):at()),kd=$(2,(t,e)=>w(GG(t,e),Ee(()=>e.initial))),c$=$(2,(t,{fiberId:e,fiberRef:n,value:s})=>{if(t.locals.size===0)return new to(new Map([[n,[[e,s]]]]));const a=new Map(t.locals);return u$(a,e,n,s),new to(a)}),u$=(t,e,n,s)=>{const a=t.get(n)??[];let c;if(gn(a)){const[l,d]=cr(a);if(l[It](e)){if(wt(d,s))return;c=[[e,s],...a.slice(1)]}else c=[[e,s],...a]}else c=[[e,s]];t.set(n,c)},JG=$(2,(t,{entries:e,forkAs:n})=>{if(t.locals.size===0)return new to(new Map(e));const s=new Map(t.locals);return n!==void 0&&JF(t,s,n),e.forEach(([a,c])=>{c.length===1?u$(s,c[0][0],a,c[0][1]):c.forEach(([l,d])=>{u$(s,l,a,d)})}),new to(s)}),QG=kd,XG=JG,ZG=KG,XF="Empty",ZF="Add",WF="Remove",tD="Update",eD="AndThen",WG={_tag:XF},nD=(t,e)=>{const n=new Map(t.locals);let s=WG;for(const[a,c]of e.locals.entries()){const l=cr(c)[1],d=n.get(a);if(d!==void 0){const m=cr(d)[1];wt(m,l)||(s=V0({_tag:tD,fiberRef:a,patch:a.diff(m,l)})(s))}else s=V0({_tag:ZF,fiberRef:a,value:l})(s);n.delete(a)}for(const[a]of n.entries())s=V0({_tag:WF,fiberRef:a})(s);return s},V0=$(2,(t,e)=>({_tag:eD,first:t,second:e})),rD=$(3,(t,e,n)=>{let s=n,a=vs(t);for(;gn(a);){const c=cr(a),l=tc(a);switch(c._tag){case XF:{a=l;break}case ZF:{s=c$(s,{fiberId:e,fiberRef:c.fiberRef,value:c.value}),a=l;break}case WF:{s=QF(s,c.fiberRef),a=l;break}case tD:{const d=kd(s,c.fiberRef);s=c$(s,{fiberId:e,fiberRef:c.fiberRef,value:c.fiberRef.patch(c.patch)(d)}),a=l;break}case eD:{a=hy(c.first)(hy(c.second)(l));break}}}return s}),Md=nD,Ad=rD,a_="effect/FiberStatus",mc=Symbol.for(a_),Ey="Done",gC="Running",yC="Suspended",tJ=Fe(`${a_}-${Ey}`);let eJ=class{[mc]=mc;_tag=Ey;[Dt](){return tJ}[It](e){return YE(e)&&e._tag===Ey}},nJ=class{runtimeFlags;[mc]=mc;_tag=gC;constructor(e){this.runtimeFlags=e}[Dt](){return w(ft(a_),Gt(ft(this._tag)),Gt(ft(this.runtimeFlags)),ve(this))}[It](e){return YE(e)&&e._tag===gC&&this.runtimeFlags===e.runtimeFlags}},rJ=class{runtimeFlags;blockingOn;[mc]=mc;_tag=yC;constructor(e,n){this.runtimeFlags=e,this.blockingOn=n}[Dt](){return w(ft(a_),Gt(ft(this._tag)),Gt(ft(this.runtimeFlags)),Gt(ft(this.blockingOn)),ve(this))}[It](e){return YE(e)&&e._tag===yC&&this.runtimeFlags===e.runtimeFlags&&wt(this.blockingOn,e.blockingOn)}};const sJ=new eJ,iJ=t=>new nJ(t),aJ=(t,e)=>new rJ(t,e),YE=t=>_t(t,mc),oJ=t=>t._tag===Ey,cJ=sJ,sD=iJ,uJ=aJ,lJ=oJ,fJ=WV,hJ=tY,dJ=eY,mJ=wF,pJ=EF,gJ=TF,yJ=nY,bJ=rY,_J=w($l,ZI(t=>t.ordinal)),SJ=I8(_J),vJ=t=>{switch(t){case"All":return fJ;case"Debug":return gJ;case"Error":return dJ;case"Fatal":return hJ;case"Info":return pJ;case"Trace":return yJ;case"None":return bJ;case"Warning":return mJ}},$J=Symbol.for("effect/Micro"),Ty=Symbol.for("effect/Micro/MicroExit"),bC=Symbol.for("effect/Micro/MicroCause"),wJ={_E:At};let iD=class extends globalThis.Error{_tag;traces;[bC];constructor(e,n,s){const a=`MicroCause.${e}`;let c,l,d;if(n instanceof globalThis.Error){c=`(${a}) ${n.name}`,l=n.message;const m=l.split(`
`).length;d=n.stack?`(${a}) ${n.stack.split(`
`).slice(0,m+3).join(`
`)}`:`${c}: ${l}`}else c=a,l=ul(n,0),d=`${c}: ${l}`;s.length>0&&(d+=`
    ${s.join(`
    `)}`),super(l),this._tag=e,this.traces=s,this[bC]=wJ,this.name=c,this.stack=d}pipe(){return lt(this,arguments)}toString(){return this.stack}[pe](){return this.stack}},EJ=class extends iD{defect;constructor(e,n=[]){super("Die",e,n),this.defect=e}};const TJ=(t,e=[])=>new EJ(t,e);let OJ=class extends iD{constructor(e=[]){super("Interrupt","interrupted",e)}};const RJ=(t=[])=>new OJ(t),kJ=t=>t._tag==="Interrupt",_C=Symbol.for("effect/Micro/MicroFiber"),MJ={_A:At,_E:At};let AJ=class{context;interruptible;[_C];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(e,n=!0){this.context=e,this.interruptible=n,this[_C]=MJ}getRef(e){return m8(this.context,e)}addObserver(e){return this._exit?(e(this._exit),md):(this._observers.push(e),()=>{const n=this._observers.indexOf(e);n>=0&&this._observers.splice(n,1)})}_interrupted=!1;unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(ZE))}unsafePoll(){return this._exit}evaluate(e){if(this._exit)return;if(this._yielded!==void 0){const a=this._yielded;this._yielded=void 0,a()}const n=this.runLoop(e);if(n===dg)return;const s=SC.interruptChildren&&SC.interruptChildren(this);if(s!==void 0)return this.evaluate(Ry(s,()=>n));this._exit=n;for(let a=0;a<this._observers.length;a++)this._observers[a](n);this._observers.length=0}runLoop(e){let n=!1,s=e;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!n&&this.getRef(WE).shouldYield(this)){n=!0;const a=s;s=Ry(FJ,()=>a)}if(s=s[l$](this),s===dg){const a=this._yielded;return Ty in a?(this._yielded=void 0,a):dg}}}catch(a){return _t(s,l$)?f$(a):f$(`MicroFiber.runLoop: Not a valid effect: ${String(s)}`)}}getCont(e){for(;;){const n=this._stack.pop();if(!n)return;const s=n[Oy]&&n[Oy](this);if(s)return{[e]:s};if(n[e])return n}}_yielded=void 0;yieldWith(e){return this._yielded=e,dg}children(){return this._children??=new Set}};const SC=zt("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),aD=Symbol.for("effect/Micro/identifier"),hn=Symbol.for("effect/Micro/args"),l$=Symbol.for("effect/Micro/evaluate"),wl=Symbol.for("effect/Micro/successCont"),Xu=Symbol.for("effect/Micro/failureCont"),Oy=Symbol.for("effect/Micro/ensureCont"),dg=Symbol.for("effect/Micro/Yield"),CJ={_A:At,_E:At,_R:At},NJ={...DG,_op:"Micro",[$J]:CJ,pipe(){return lt(this,arguments)},[Symbol.iterator](){return new OI(new Qd(this))},toJSON(){return{_id:"Micro",op:this[aD],...hn in this?{args:this[hn]}:void 0}},toString(){return Te(this)},[pe](){return Te(this)}};function xJ(t){return f$("Micro.evaluate: Not implemented")}const o_=t=>({...NJ,[aD]:t.op,[l$]:t.eval??xJ,[wl]:t.contA,[Xu]:t.contE,[Oy]:t.ensure}),GE=t=>{const e=o_(t);return function(){const n=Object.create(e);return n[hn]=t.single===!1?arguments:arguments[0],n}},oD=t=>{const e={...o_(t),[Ty]:Ty,_tag:t.op,get[t.prop](){return this[hn]},toJSON(){return{_id:"MicroExit",_tag:t.op,[t.prop]:this[hn]}},[It](n){return UJ(n)&&n._tag===t.op&&wt(this[hn],n[hn])},[Dt](){return ve(this,Gt(Fe(t.op))(ft(this[hn])))}};return function(n){const s=Object.create(e);return s[hn]=n,s[wl]=void 0,s[Xu]=void 0,s[Oy]=void 0,s}},JE=oD({op:"Success",prop:"value",eval(t){const e=t.getCont(wl);return e?e[wl](this[hn],t):t.yieldWith(this)}}),cD=oD({op:"Failure",prop:"cause",eval(t){let e=t.getCont(Xu);for(;kJ(this[hn])&&e&&t.interruptible;)e=t.getCont(Xu);return e?e[Xu](this[hn],t):t.yieldWith(this)}}),IJ=GE({op:"Yield",eval(t){let e=!1;return t.getRef(WE).scheduleTask(()=>{e||t.evaluate(LJ)},this[hn]??0),t.yieldWith(()=>{e=!0})}}),FJ=IJ(0),DJ=JE(void 0),QE=GE({op:"WithMicroFiber",eval(t){return this[hn](t)}}),Ry=$(2,(t,e)=>{const n=Object.create(zJ);return n[hn]=t,n[wl]=e,n}),zJ=o_({op:"OnSuccess",eval(t){return t._stack.push(this),this[hn]}}),UJ=t=>_t(t,Ty),uD=JE,XE=cD,ZE=XE(RJ()),f$=t=>XE(TJ(t)),LJ=uD(void 0),jJ="setImmediate"in globalThis?globalThis.setImmediate:t=>setTimeout(t,0);let lD=class{tasks=[];running=!1;scheduleTask(e,n){this.tasks.push(e),this.running||(this.running=!0,jJ(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){const e=this.tasks;this.tasks=[];for(let n=0,s=e.length;n<s;n++)e[n]()}shouldYield(e){return e.currentOpCount>=e.getRef(BJ)}flush(){for(;this.tasks.length>0;)this.runTasks()}};const PJ=$(2,(t,e)=>QE(n=>{const s=n.context;return n.context=e(s),VJ(t,()=>(n.context=s,DJ))})),qJ=$(2,(t,e)=>PJ(t,Oc(e)));let BJ=class extends Mb()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){},WE=class extends Mb()("effect/Micro/currentScheduler",{defaultValue:()=>new lD}){};const KJ=$(2,(t,e)=>{const n=Object.create(HJ);return n[hn]=t,n[wl]=e.onSuccess,n[Xu]=e.onFailure,n}),HJ=o_({op:"OnSuccessAndFailure",eval(t){return t._stack.push(this),this[hn]}}),VJ=$(2,(t,e)=>GJ(n=>KJ(n(t),{onFailure:s=>Ry(e(XE(s)),()=>cD(s)),onSuccess:s=>Ry(e(uD(s)),()=>JE(s))}))),fD=GE({op:"SetInterruptible",ensure(t){if(t.interruptible=this[hn],t._interrupted&&t.interruptible)return()=>ZE}}),YJ=t=>QE(e=>e.interruptible?t:(e.interruptible=!0,e._stack.push(fD(!1)),e._interrupted?ZE:t)),GJ=t=>QE(e=>e.interruptible?(e.interruptible=!1,e._stack.push(fD(!0)),t(YJ)):t(At)),JJ=(t,e)=>{const n=new AJ(WE.context(new lD));return n.evaluate(t),n},El=Symbol.for("effect/Readable"),tT=Symbol.for("effect/Ref"),eT={_A:t=>t};class QJ extends xc{ref;commit(){return this.get}[tT]=eT;[El]=El;constructor(e){super(),this.ref=e,this.get=W(()=>Qt(this.ref))}get;modify(e){return W(()=>{const n=Qt(this.ref),[s,a]=e(n);return n!==a&&Mc(a)(this.ref),s})}}const nT=t=>new QJ(kc(t)),ky=t=>W(()=>nT(t)),oi=t=>t.get,Zu=$(2,(t,e)=>t.modify(()=>[void 0,e])),hD=$(2,(t,e)=>t.modify(e)),My=$(2,(t,e)=>t.modify(n=>[void 0,e(n)])),XJ=tT,rT=ky,zg=oi,Rh=hD,dD=Zu,mD=My;let pD=class{buckets=[];scheduleTask(e,n){const s=this.buckets.length;let a,c=0;for(;c<s&&this.buckets[c][0]<=n;c++)a=this.buckets[c];a&&a[0]===n?a[1].push(e):c===s?this.buckets.push([n,[e]]):this.buckets.splice(c,0,[n,[e]])}},ZJ=class{maxNextTickBeforeTimer;running=!1;tasks=new pD;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[s,a]of n)for(let c=0;c<a.length;c++)a[c]();this.tasks.buckets.length===0?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(RF)?e.getFiberRef(cm):!1}scheduleTask(e,n){this.tasks.scheduleTask(e,n),this.running||(this.running=!0,this.starve())}};const gD=zt(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new ZJ(2048));let sT=class{tasks=new pD;deferred=!1;scheduleTask(e,n){this.deferred?gD.scheduleTask(e,n):this.tasks.scheduleTask(e,n)}shouldYield(e){return e.currentOpCount>e.getFiberRef(RF)?e.getFiberRef(cm):!1}flush(){for(;this.tasks.buckets.length>0;){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[n,s]of e)for(let a=0;a<s.length;a++)s[a]()}this.deferred=!0}};const iT=zt(Symbol.for("effect/FiberRef/currentScheduler"),()=>Or(gD)),yD=zt(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Or(new Map)),vC=(t,e,n,s)=>{switch(t){case void 0:return e();case"unbounded":return n();case"inherit":return Zb(gY,a=>a==="unbounded"?n():a>1?s(a):e());default:return t>1?s(t):e()}},WJ=NG,tQ=IG,bD=t=>t.replace(/[\s="]/g,"_"),eQ=t=>e=>`${bD(e.label)}=${t-e.startTime}ms`,_D="effect/MetricLabel",h$=Symbol.for(_D);let nQ=class{key;value;[h$]=h$;_hash;constructor(e,n){this.key=e,this.value=n,this._hash=Fe(_D+this.key+this.value)}[Dt](){return this._hash}[It](e){return sQ(e)&&this.key===e.key&&this.value===e.value}pipe(){return lt(this,arguments)}};const rQ=(t,e)=>new nQ(t,e),sQ=t=>_t(t,h$),iQ=t=>kt(t,ht),aQ=t=>yQ(t,cQ,nD),SD=$(2,(t,e)=>Wa(t,{onFailure:n=>nt(e.onFailure(n)),onSuccess:n=>nt(e.onSuccess(n))})),oQ=t=>{const e=X(X(t,()=>Qb()),()=>e);return e},cQ=ee(t=>nt(t.getFiberRefs())),uQ=t=>SD(t,{onFailure:md,onSuccess:md}),lQ=t=>(...e)=>{const n=nf(t);let s;for(let a=0,c=e.length;a<c;a++){const l=e[a];k3(l)&&(s!==void 0?s=jn(s,l):s=l,e=[...e.slice(0,a),...e.slice(a+1)],a--)}return s===void 0&&(s=Xa),ee(a=>(a.log(e,s,n),Se))},fQ=lQ(),$C=$(2,(t,e)=>ds(t,{onFailure:n=>yF(()=>e(n)),onSuccess:nt})),hQ=t=>kt(t,e=>!e),dQ=t=>_Q((e,n)=>w(t,rD(e,n))),mQ=$(3,(t,e,n)=>Nc(s=>s_(t,za(s,e,n)))),wC=$(3,(t,e,n)=>Nc(s=>X(n,a=>s_(t,w(s,za(e,a)))))),pQ=WJ,gQ=nt(at()),yQ=$(3,(t,e,n)=>X(e,s=>X(t,a=>kt(e,c=>[n(s,c),a])))),bQ=$(2,(t,e)=>ds(t,{onFailure:n=>De(e(n),yn(n)),onSuccess:nt})),_Q=t=>ee(e=>(e.setFiberRefs(t(e.id(),e.getFiberRefs())),Se)),SQ=$(2,(t,e)=>bt(()=>e()?kt(t,ht):nt(at()))),vD=TY,vQ=OY,$Q=Qu,wQ=AF,Ay=Rd,Br=ce,EQ=kY,TQ=Dg,qi=e_,qr=ue,$D=$r,EC=MY,Cd=NF,aT="InterruptSignal",oT="Stateful",cT="Resume",uT="YieldNow",Y0=t=>({_tag:aT,cause:t}),Ug=t=>({_tag:oT,onFiber:t}),Eu=t=>({_tag:cT,effect:t}),OQ=()=>({_tag:uT}),RQ="effect/FiberScope",Cy=Symbol.for(RQ);let kQ=class{[Cy]=Cy;fiberId=Za;roots=new Set;add(e,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}},MQ=class{fiberId;parent;[Cy]=Cy;constructor(e,n){this.fiberId=e,this.parent=n}add(e,n){this.parent.tell(Ug(s=>{s.addChild(n),n.addObserver(()=>{s.removeChild(n)})}))}};const AQ=t=>new MQ(t.id(),t),c_=zt(Symbol.for("effect/FiberScope/Global"),()=>new kQ),CQ="effect/Fiber",NQ=Symbol.for(CQ),xQ={_E:t=>t,_A:t=>t},IQ="effect/Fiber",FQ=Symbol.for(IQ),DQ=t=>t.await,zQ=t=>t.inheritAll,Nd=t=>Xb(Hb(t.await),t.inheritAll);({...Wd});const Ia="effect/FiberCurrent",UQ=()=>nf(globalThis[Ia]),LQ="effect/Logger",jQ=Symbol.for(LQ),PQ={_Message:t=>t,_Output:t=>t},lT=t=>({[jQ]:PQ,log:t,pipe(){return lt(this,arguments)}}),qQ=/^[^\s"=]*$/,BQ=(t,e)=>({annotations:n,cause:s,date:a,fiberId:c,logLevel:l,message:d,spans:m})=>{const p=E=>E.match(qQ)?E:t(E),y=(E,N)=>`${bD(E)}=${p(N)}`,b=(E,N)=>" "+y(E,N);let S=y("timestamp",a.toISOString());S+=b("level",l.label),S+=b("fiber",P3(c));const v=J8(d);for(let E=0;E<v.length;E++)S+=b("message",ul(v[E],e));u7(s)||(S+=b("cause",uf(s,{renderErrorCause:!0})));for(const E of m)S+=" "+eQ(a.getTime())(E);for(const[E,N]of n)S+=b(E,ul(N,e));return S},KQ=t=>`"${t.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,HQ=lT(BQ(KQ)),VQ=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null;VQ&&process.stdout.isTTY;const wD="effect/MetricBoundaries",d$=Symbol.for(wD);let YQ=class{values;[d$]=d$;constructor(e){this.values=e,this._hash=w(Fe(wD),Gt(Xd(this.values)))}_hash;[Dt](){return this._hash}[It](e){return GQ(e)&&wt(this.values,e.values)}pipe(){return lt(this,arguments)}};const GQ=t=>_t(t,d$),JQ=t=>{const e=w(t,t3(He(Number.POSITIVE_INFINITY)),dH);return new YQ(e)},QQ=t=>w(G8(t.count-1,e=>t.start*Math.pow(t.factor,e)),Dn,JQ),XQ="effect/MetricKeyType",ED=Symbol.for(XQ),TD="effect/MetricKeyType/Counter",m$=Symbol.for(TD),ZQ="effect/MetricKeyType/Frequency",WQ=Symbol.for(ZQ),tX="effect/MetricKeyType/Gauge",eX=Symbol.for(tX),OD="effect/MetricKeyType/Histogram",p$=Symbol.for(OD),nX="effect/MetricKeyType/Summary",rX=Symbol.for(nX),RD={_In:t=>t,_Out:t=>t};let sX=class{incremental;bigint;[ED]=RD;[m$]=m$;constructor(e,n){this.incremental=e,this.bigint=n,this._hash=Fe(TD)}_hash;[Dt](){return this._hash}[It](e){return kD(e)}pipe(){return lt(this,arguments)}},iX=class{boundaries;[ED]=RD;[p$]=p$;constructor(e){this.boundaries=e,this._hash=w(Fe(OD),Gt(ft(this.boundaries)))}_hash;[Dt](){return this._hash}[It](e){return MD(e)&&wt(this.boundaries,e.boundaries)}pipe(){return lt(this,arguments)}};const aX=t=>new sX(t?.incremental??!1,t?.bigint??!1),oX=t=>new iX(t),kD=t=>_t(t,m$),cX=t=>_t(t,WQ),uX=t=>_t(t,eX),MD=t=>_t(t,p$),lX=t=>_t(t,rX),fX="effect/MetricKey",AD=Symbol.for(fX),hX={_Type:t=>t},dX=hE(wt);let fT=class{name;keyType;description;tags;[AD]=hX;constructor(e,n,s,a=[]){this.name=e,this.keyType=n,this.description=s,this.tags=a,this._hash=w(Fe(this.name+this.description),Gt(ft(this.keyType)),Gt(Xd(this.tags)))}_hash;[Dt](){return this._hash}[It](e){return mX(e)&&this.name===e.name&&wt(this.keyType,e.keyType)&&wt(this.description,e.description)&&dX(this.tags,e.tags)}pipe(){return lt(this,arguments)}};const mX=t=>_t(t,AD),pX=(t,e)=>new fT(t,aX(e),nf(e?.description)),gX=(t,e,n)=>new fT(t,oX(e),nf(n)),yX=$(2,(t,e)=>e.length===0?t:new fT(t.name,t.keyType,t.description,Cg(t.tags,e))),TC=Symbol.for("effect/MutableHashMap"),bX={[TC]:TC,[Symbol.iterator](){return new _X(this)},toString(){return Te(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(Re)}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}};let _X=class CD{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const e=this.referentialIterator.next();return e.done?(this.bucketIterator=new SX(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new CD(this.self)}},SX=class{backing;constructor(e){this.backing=e}currentBucket;next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}};const vX=()=>{const t=Object.create(bX);return t.referential=new Map,t.buckets=new Map,t.bucketsSize=0,t},Ao=$(2,(t,e)=>{if(ay(e)===!1)return t.referential.has(e)?ht(t.referential.get(e)):at();const n=e[Dt](),s=t.buckets.get(n);return s===void 0?at():$X(t,s,e)}),$X=(t,e,n,s=!1)=>{for(let a=0,c=e.length;a<c;a++)if(n[It](e[a][0])){const l=e[a][1];return s&&(e.splice(a,1),t.bucketsSize--),ht(l)}return at()},kh=$(2,(t,e)=>ze(Ao(t,e))),Mh=$(3,(t,e,n)=>{if(ay(e)===!1)return t.referential.set(e,n),t;const s=e[Dt](),a=t.buckets.get(s);return a===void 0?(t.buckets.set(s,[[e,n]]),t.bucketsSize++,t):(wX(t,a,e),a.push([e,n]),t.bucketsSize++,t)}),wX=(t,e,n)=>{for(let s=0,a=e.length;s<a;s++)if(n[It](e[s][0])){e.splice(s,1),t.bucketsSize--;return}},EX="effect/MetricState",dm=Symbol.for(EX),ND="effect/MetricState/Counter",g$=Symbol.for(ND),xD="effect/MetricState/Frequency",y$=Symbol.for(xD),ID="effect/MetricState/Gauge",b$=Symbol.for(ID),FD="effect/MetricState/Histogram",_$=Symbol.for(FD),DD="effect/MetricState/Summary",S$=Symbol.for(DD),mm={_A:t=>t};let TX=class{count;[dm]=mm;[g$]=g$;constructor(e){this.count=e}[Dt](){return w(ft(ND),Gt(ft(this.count)),ve(this))}[It](e){return DX(e)&&this.count===e.count}pipe(){return lt(this,arguments)}};const OX=hE(wt);let RX=class{occurrences;[dm]=mm;[y$]=y$;constructor(e){this.occurrences=e}_hash;[Dt](){return w(Fe(xD),Gt(Xd(le(this.occurrences.entries()))),ve(this))}[It](e){return zX(e)&&OX(le(this.occurrences.entries()),le(e.occurrences.entries()))}pipe(){return lt(this,arguments)}},kX=class{value;[dm]=mm;[b$]=b$;constructor(e){this.value=e}[Dt](){return w(ft(ID),Gt(ft(this.value)),ve(this))}[It](e){return UX(e)&&this.value===e.value}pipe(){return lt(this,arguments)}},MX=class{buckets;count;min;max;sum;[dm]=mm;[_$]=_$;constructor(e,n,s,a,c){this.buckets=e,this.count=n,this.min=s,this.max=a,this.sum=c}[Dt](){return w(ft(FD),Gt(ft(this.buckets)),Gt(ft(this.count)),Gt(ft(this.min)),Gt(ft(this.max)),Gt(ft(this.sum)),ve(this))}[It](e){return LX(e)&&wt(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return lt(this,arguments)}},AX=class{error;quantiles;count;min;max;sum;[dm]=mm;[S$]=S$;constructor(e,n,s,a,c,l){this.error=e,this.quantiles=n,this.count=s,this.min=a,this.max=c,this.sum=l}[Dt](){return w(ft(DD),Gt(ft(this.error)),Gt(ft(this.quantiles)),Gt(ft(this.count)),Gt(ft(this.min)),Gt(ft(this.max)),Gt(ft(this.sum)),ve(this))}[It](e){return jX(e)&&this.error===e.error&&wt(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return lt(this,arguments)}};const CX=t=>new TX(t),NX=t=>new RX(t),xX=t=>new kX(t),IX=t=>new MX(t.buckets,t.count,t.min,t.max,t.sum),FX=t=>new AX(t.error,t.quantiles,t.count,t.min,t.max,t.sum),DX=t=>_t(t,g$),zX=t=>_t(t,y$),UX=t=>_t(t,b$),LX=t=>_t(t,_$),jX=t=>_t(t,S$),PX="effect/MetricHook",qX=Symbol.for(PX),BX={_In:t=>t,_Out:t=>t},pm=t=>({[qX]:BX,pipe(){return lt(this,arguments)},...t}),OC=BigInt(0),KX=t=>{let e=t.keyType.bigint?OC:0;const n=t.keyType.incremental?t.keyType.bigint?a=>a>=OC:a=>a>=0:a=>!0,s=a=>{n(a)&&(e=e+a)};return pm({get:()=>CX(e),update:s,modify:s})},HX=t=>{const e=new Map;for(const s of t.keyType.preregisteredWords)e.set(s,0);const n=s=>{const a=e.get(s)??0;e.set(s,a+1)};return pm({get:()=>NX(e),update:n,modify:n})},VX=(t,e)=>{let n=e;return pm({get:()=>xX(n),update:s=>{n=s},modify:s=>{n=n+s}})},YX=t=>{const e=t.keyType.boundaries.values,n=e.length,s=new Uint32Array(n+1),a=new Float32Array(n);let c=0,l=0,d=Number.MAX_VALUE,m=Number.MIN_VALUE;w(e,gd($l),qo((b,S)=>{a[S]=b}));const p=b=>{let S=0,v=n;for(;S!==v;){const E=Math.floor(S+(v-S)/2),N=a[E];b<=N?v=E:S=E,v===S+1&&(b<=a[S]?v=S:S=v)}s[S]=s[S]+1,c=c+1,l=l+b,b<d&&(d=b),b>m&&(m=b)},y=()=>{const b=Ab(n);let S=0;for(let v=0;v<n;v++){const E=a[v],N=s[v];S=S+N,b[v]=[E,S]}return b};return pm({get:()=>IX({buckets:y(),count:c,min:d,max:m,sum:l}),update:p,modify:p})},GX=t=>{const{error:e,maxAge:n,maxSize:s,quantiles:a}=t.keyType,c=w(a,gd($l)),l=Ab(s);let d=0,m=0,p=0,y=0,b=0;const S=E=>{const N=[];let C=0;for(;C!==s-1;){const x=l[C];if(x!=null){const[q,A]=x,P=bl(E-q);P7(P,yl)&&j7(P,n)&&N.push(A)}C=C+1}return JX(e,c,gd(N,$l))},v=(E,N)=>{if(s>0){d=d+1;const C=d%s;l[C]=[N,E]}y=m===0?E:Math.min(y,E),b=m===0?E:Math.max(b,E),m=m+1,p=p+E};return pm({get:()=>FX({error:e,quantiles:S(Date.now()),count:m,min:y,max:b,sum:p}),update:([E,N])=>v(E,N),modify:([E,N])=>v(E,N)})},JX=(t,e,n)=>{const s=n.length;if(!gn(e))return ec();const a=e[0],c=e.slice(1),l=RC(t,s,at(),0,a,n),d=vs(l);return c.forEach(m=>{d.push(RC(t,s,l.value,l.consumed,m,l.rest))}),qo(d,m=>[m.quantile,m.value])},RC=(t,e,n,s,a,c)=>{let l=t,d=e,m=n,p=s,y=a,b=c,S=t,v=e,E=n,N=s,C=a,x=c;for(;;){if(!gn(b))return{quantile:y,value:at(),consumed:p,rest:[]};if(y===1)return{quantile:y,value:ht(r3(b)),consumed:p+b.length,rest:[]};const q=cr(b),A=iH(b,B=>B===q),P=y*d,k=l/2*P,U=p+A[0].length,K=Math.abs(U-P);if(U<P-k){S=l,v=d,E=rd(b),N=U,C=y,x=A[1],l=S,d=v,m=E,p=N,y=C,b=x;continue}if(U>P+k){const B=pn(m)?ht(q):m;return{quantile:y,value:B,consumed:p,rest:b}}switch(m._tag){case"None":{S=l,v=d,E=rd(b),N=U,C=y,x=A[1],l=S,d=v,m=E,p=N,y=C,b=x;continue}case"Some":{const B=Math.abs(P-m.value);if(K<B){S=l,v=d,E=rd(b),N=U,C=y,x=A[1],l=S,d=v,m=E,p=N,y=C,b=x;continue}return{quantile:y,value:ht(m.value),consumed:p,rest:b}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},QX="effect/MetricPair",XX=Symbol.for(QX),ZX={_Type:t=>t},WX=(t,e)=>({[XX]:ZX,metricKey:t,metricState:e,pipe(){return lt(this,arguments)}}),tZ="effect/MetricRegistry",kC=Symbol.for(tZ);let eZ=class{[kC]=kC;map=vX();snapshot(){const e=[];for(const[n,s]of this.map)e.push(WX(n,s.get()));return e}get(e){const n=w(this.map,Ao(e),Xs);if(n==null){if(kD(e.keyType))return this.getCounter(e);if(uX(e.keyType))return this.getGauge(e);if(cX(e.keyType))return this.getFrequency(e);if(MD(e.keyType))return this.getHistogram(e);if(lX(e.keyType))return this.getSummary(e);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(e){let n=w(this.map,Ao(e),Xs);if(n==null){const s=KX(e);w(this.map,kh(e))||w(this.map,Mh(e,s)),n=s}return n}getFrequency(e){let n=w(this.map,Ao(e),Xs);if(n==null){const s=HX(e);w(this.map,kh(e))||w(this.map,Mh(e,s)),n=s}return n}getGauge(e){let n=w(this.map,Ao(e),Xs);if(n==null){const s=VX(e,e.keyType.bigint?BigInt(0):0);w(this.map,kh(e))||w(this.map,Mh(e,s)),n=s}return n}getHistogram(e){let n=w(this.map,Ao(e),Xs);if(n==null){const s=YX(e);w(this.map,kh(e))||w(this.map,Mh(e,s)),n=s}return n}getSummary(e){let n=w(this.map,Ao(e),Xs);if(n==null){const s=GX(e);w(this.map,kh(e))||w(this.map,Mh(e,s)),n=s}return n}};const nZ=()=>new eZ,rZ="effect/Metric",sZ=Symbol.for(rZ),iZ={_Type:t=>t,_In:t=>t,_Out:t=>t},MC=zt(Symbol.for("effect/Metric/globalMetricRegistry"),()=>nZ()),zD=function(t,e,n,s){const a=Object.assign(c=>Gb(c,l=>uZ(a,l)),{[sZ]:iZ,keyType:t,unsafeUpdate:e,unsafeValue:n,unsafeModify:s,register(){return this.unsafeValue([]),this},pipe(){return lt(this,arguments)}});return a},u_=(t,e)=>UD(pX(t,e)),UD=t=>{let e;const n=new WeakMap,s=a=>{if(a.length===0)return e!==void 0||(e=MC.get(t)),e;let c=n.get(a);return c!==void 0||(c=MC.get(yX(t,a)),n.set(a,c)),c};return zD(t.keyType,(a,c)=>s(c).update(a),a=>s(a).get(),(a,c)=>s(c).modify(a))},aZ=(t,e,n)=>UD(gX(t,e,n)),oZ=$(3,(t,e,n)=>cZ(t,[rQ(e,n)])),cZ=$(2,(t,e)=>zD(t.keyType,(n,s)=>t.unsafeUpdate(n,Cg(e,s)),n=>t.unsafeValue(Cg(e,n)),(n,s)=>t.unsafeModify(n,Cg(e,s)))),uZ=$(2,(t,e)=>Zb(t$,n=>W(()=>t.unsafeUpdate(e,n))));({...sE});const lZ=$(2,(t,e)=>Zb(yD,n=>W(()=>{if(n.has(t)){const s=n.get(t);s.state.completed||(s.state.completed=!0,r_(s.result,e))}}))),fZ="effect/Supervisor",l_=Symbol.for(fZ),hT={_T:t=>t};let LD=class jD{underlying;value0;[l_]=hT;constructor(e,n){this.underlying=e,this.value0=n}get value(){return this.value0}onStart(e,n,s,a){this.underlying.onStart(e,n,s,a)}onEnd(e,n){this.underlying.onEnd(e,n)}onEffect(e,n){this.underlying.onEffect(e,n)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new jD(this,w(this.value,kt(e)))}zip(e){return new PD(this,e)}},PD=class qD{left;right;_tag="Zip";[l_]=hT;constructor(e,n){this.left=e,this.right=n}get value(){return vF(this.left.value,this.right.value)}onStart(e,n,s,a){this.left.onStart(e,n,s,a),this.right.onStart(e,n,s,a)}onEnd(e,n){this.left.onEnd(e,n),this.right.onEnd(e,n)}onEffect(e,n){this.left.onEffect(e,n),this.right.onEffect(e,n)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new LD(this,w(this.value,kt(e)))}zip(e){return new qD(this,e)}};const BD=t=>_t(t,l_)&&EI(t,"Zip");let hZ=class{effect;[l_]=hT;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,n,s,a){}onEnd(e,n){}onEffect(e,n){}onSuspend(e){}onResume(e){}map(e){return new LD(this,w(this.value,kt(e)))}zip(e){return new PD(this,e)}onRun(e,n){return e()}};const dZ=t=>new hZ(t),f_=zt("effect/Supervisor/none",()=>dZ(Se)),mZ=lf,KD="Empty",HD="AddSupervisor",VD="RemoveSupervisor",YD="AndThen",id={_tag:KD},Lg=(t,e)=>({_tag:YD,first:t,second:e}),pZ=(t,e)=>gZ(e,He(t)),gZ=(t,e)=>{let n=t,s=e;for(;ta(s);){const a=si(s);switch(a._tag){case KD:{s=Ui(s);break}case HD:{n=n.zip(a.supervisor),s=Ui(s);break}case VD:{n=v$(n,a.supervisor),s=Ui(s);break}case YD:{s=Kn(a.first)(Kn(a.second)(Ui(s)));break}}}return n},v$=(t,e)=>wt(t,e)?f_:BD(t)?v$(t.left,e).zip(v$(t.right,e)):t,Ny=t=>wt(t,f_)?sc():BD(t)?w(Ny(t.left),Sd(Ny(t.right))):vE(t),yZ=(t,e)=>{if(wt(t,e))return id;const n=Ny(t),s=Ny(e),a=w(s,FA(n),vd(id,(l,d)=>Lg(l,{_tag:HD,supervisor:d}))),c=w(n,FA(s),vd(id,(l,d)=>Lg(l,{_tag:VD,supervisor:d})));return Lg(a,c)},bZ=mZ({empty:id,patch:pZ,combine:Lg,diff:yZ}),_Z=u_("effect_fiber_started",{incremental:!0}),AC=u_("effect_fiber_active"),SZ=u_("effect_fiber_successes",{incremental:!0}),vZ=u_("effect_fiber_failures",{incremental:!0}),$Z=oZ(aZ("effect_fiber_lifetimes",QQ({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Ah="Continue",wZ="Done",CC="Yield",EZ={_E:t=>t,_A:t=>t},mg=t=>{throw new Error(`BUG: FiberRuntime - ${ul(t)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},Ni=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),xi=zt("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Ch={[oy]:(t,e,n)=>ir(()=>e.effect_instruction_i1(n)),OnStep:(t,e,n)=>ue(ue(n)),[cy]:(t,e,n)=>ir(()=>e.effect_instruction_i2(n)),[nE]:(t,e,n)=>(t.patchRuntimeFlags(t.currentRuntimeFlags,e.patch),Fa(t.currentRuntimeFlags)&&t.isInterrupted()?ce(t.getInterruptedCause()):ue(n)),[uy]:(t,e,n)=>(ir(()=>e.effect_instruction_i2(n)),ir(()=>e.effect_instruction_i0())?(t.pushStack(e),ir(()=>e.effect_instruction_i1())):Se),[nd]:(t,e,n)=>{const s=ir(()=>e.effect_instruction_i0.next(n));return s.done?ue(s.value):(t.pushStack(e),F5(s.value))}},TZ={[aT]:(t,e,n,s)=>(t.processNewInterruptSignal(s.cause),Fa(e)?ce(s.cause):n),[cT]:(t,e,n,s)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[oT]:(t,e,n,s)=>(s.onFiber(t,sD(e)),n),[uT]:(t,e,n,s)=>X(Qb(),()=>n)},OZ=t=>Vb($V(t),e=>Hi(DV(e),([n,s])=>{const a=new Map,c=[];for(const d of s){c.push(ai(d));for(const m of d)a.set(m.request,m)}const l=c.flat();return ff(GZ(n.runAll(c),l,()=>l.forEach(d=>{d.listeners.interrupted=!0})),yD,a)},!1,!1)),RZ=rE();let GD=class extends xc{[NQ]=xQ;[FQ]=EZ;_fiberRefs;_fiberId;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_isYielding=!1;currentRuntimeFlags;currentOpCount=0;currentSupervisor;currentScheduler;currentTracer;currentSpan;currentContext;currentDefaultServices;constructor(e,n,s){if(super(),this.currentRuntimeFlags=s,this._fiberId=e,this._fiberRefs=n,GA(s)){const a=this.getFiberRef(t$);_Z.unsafeUpdate(1,a),AC.unsafeUpdate(1,a)}this.refreshRefCache()}commit(){return Nd(this)}id(){return this._fiberId}resume(e){this.tell(Eu(e))}get status(){return this.ask((e,n)=>n)}get runtimeFlags(){return this.ask((e,n)=>lJ(n)?e.currentRuntimeFlags:n.runtimeFlags)}scope(){return AQ(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(hg)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return bt(()=>{const n=um(this._fiberId);return this.tell(Ug((s,a)=>{r_(n,W(()=>e(s,a)))})),fi(n)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return fc(e=>{const n=s=>e(nt(s));return this.tell(Ug((s,a)=>{s._exitValue!==null?n(this._exitValue):s.addObserver(n)})),W(()=>this.tell(Ug((s,a)=>{s.removeObserver(n)})))},this.id())}get inheritAll(){return ee((e,n)=>{const s=e.id(),a=e.getFiberRefs(),c=n.runtimeFlags,l=this.getFiberRefs(),d=VG(a,s,l);e.setFiberRefs(d);const m=e.getFiberRef(FC),p=w(Bo(c,m),QA(Ac),QA(Wv));return GV(p)})}get poll(){return W(()=>nf(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return W(()=>this.tell(Y0(Os(e))))}unsafeInterruptAsFork(e){this.tell(Y0(Os(e)))}addObserver(e){this._exitValue!==null?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(n=>n!==e)}getFiberRefs(){return this.setFiberRef(FC,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=QF(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,n){this._fiberRefs=c$(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:n}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef($y),this.currentTracer=this.currentDefaultServices.unsafeMap.get(KF.key),this.currentSupervisor=this.getFiberRef(HZ),this.currentScheduler=this.getFiberRef(iT),this.currentContext=this.getFiberRef(aa),this.currentSpan=this.currentContext.unsafeMap.get(HF.key)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}transferChildren(e){const n=this._children;if(this._children=null,n!==null&&n.size>0)for(const s of n)s._exitValue===null&&e.add(this.currentRuntimeFlags,s)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let n=Ah;const s=globalThis[Ia];globalThis[Ia]=this;try{for(;n===Ah;)n=this._queue.length===0?wZ:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[Ia]=s}this._queue.length>0&&!this._running?(this._running=!0,n===CC?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(cm))}drainQueueWhileRunning(e,n){let s=n;for(;this._queue.length>0;){const a=this._queue.splice(0,1)[0];s=TZ[a._tag](this,e,s,a)}return s}isInterrupted(){return!f7(this.getFiberRef(hg))}addInterruptedCause(e){const n=this.getFiberRef(hg);this.setFiberRef(hg,jn(n,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let e=!1;for(const n of this._children)n.tell(Y0(Os(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const e=this._children.values();this._children=null;let n=!1;return zE({while:()=>!n,body:()=>{const a=e.next();return a.done?W(()=>{n=!0}):ps(a.value.await)},step:()=>{}})}return null}reportExitValue(e){if(GA(this.currentRuntimeFlags)){const n=this.getFiberRef(t$),s=this.id().startTimeMillis,a=Date.now();switch($Z.unsafeUpdate(a-s,n),AC.unsafeUpdate(-1,n),e._tag){case Bn:{SZ.unsafeUpdate(1,n);break}case qn:{vZ.unsafeUpdate(1,n);break}}}if(e._tag==="Failure"){const n=this.getFiberRef(bY);!wE(e.cause)&&n._tag==="Some"&&this.log("Fiber terminated with an unhandled error",e.cause,n)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let n=this._observers.length-1;n>=0;n--)this._observers[n](e);this._observers=[]}getLoggers(){return this.getFiberRef(NZ)}log(e,n,s){const a=ze(s)?s.value:this.getFiberRef(dY),c=this.getFiberRef(kZ);if(SJ(c,a))return;const l=this.getFiberRef(mY),d=this.getFiberRef(hY),m=this.getLoggers(),p=this.getFiberRefs();if($E(m)>0){const y=KI(this.getFiberRef($y),i_),b=new Date(y.unsafeCurrentTimeMillis());j5(p,()=>{for(const S of m)S.log({fiberId:this.id(),logLevel:a,message:e,cause:n,context:p,spans:l,annotations:d,date:b})})}}evaluateMessageWhileSuspended(e){switch(e._tag){case uT:return CC;case aT:return this.processNewInterruptSignal(e.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(ce(e.cause)),this._asyncInterruptor=null),Ah;case cT:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),Ah;case oT:return e.onFiber(this,this._exitValue!==null?cJ:uJ(this.currentRuntimeFlags,this._asyncBlockingOn)),Ah;default:return mg(e)}}evaluateEffect(e){this.currentSupervisor.onResume(this);try{let n=Fa(this.currentRuntimeFlags)&&this.isInterrupted()?ce(this.getInterruptedCause()):e;for(;n!==null;){const s=n,a=this.runLoop(s);if(a===Ni){const c=xi.currentOp;xi.currentOp=null,c._op===Mg?gV(this.currentRuntimeFlags)?(this.tell(OQ()),this.tell(Eu($r)),n=null):n=$r:c._op===ed&&(n=null)}else{this.currentRuntimeFlags=w(this.currentRuntimeFlags,bV(Wv));const c=this.interruptAllChildren();c!==null?n=X(c,()=>a):(this._queue.length===0?this.setExitValue(a):this.tell(Eu(a)),n=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(e){if(this._running)this.tell(Eu(e));else{this._running=!0;const n=globalThis[Ia];globalThis[Ia]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[Ia]=n,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(Eu(e))}patchRuntimeFlags(e,n){const s=Ju(e,n);return globalThis[Ia]=this,this.currentRuntimeFlags=s,s}initiateAsync(e,n){let s=!1;const a=c=>{s||(s=!0,this.tell(Eu(c)))};Fa(e)&&(this._asyncInterruptor=a);try{n(a)}catch(c){a(yn(ls(c)))}}pushStack(e){this._stack.push(e),e._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const e=this._stack.pop();if(e)return e._op==="OnStep"&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==kg)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==oy&&e._op!==uy&&e._op!==nd)return e;e=this.popStack()}}[q5](e){return W(()=>HI(this.currentContext,e))}Left(e){return Ze(e.left)}None(e){return Ze(new t_)}Right(e){return ue(e.right)}Some(e){return ue(e.value)}Micro(e){return Ed(n=>{let s=n;const a=JJ(qJ(e,this.currentContext));return a.addObserver(c=>{if(c._tag==="Success")return s(ue(c.value));switch(c.cause._tag){case"Interrupt":return s(ce(Os(Za)));case"Fail":return s(Ze(c.cause.error));case"Die":return s(by(c.cause.defect))}}),Ed(c=>{s=l=>{c(Se)},a.unsafeInterrupt()})})}[NI](e){const n=ir(()=>e.effect_instruction_i0()),s=this.getNextSuccessCont();return s!==void 0?(s._op in Ch||mg(s),Ch[s._op](this,s,n)):(xi.currentOp=ue(n),Ni)}[Bn](e){const n=e,s=this.getNextSuccessCont();return s!==void 0?(s._op in Ch||mg(s),Ch[s._op](this,s,n.effect_instruction_i0)):(xi.currentOp=n,Ni)}[qn](e){const n=e.effect_instruction_i0,s=this.getNextFailCont();if(s!==void 0)switch(s._op){case kg:case cy:return Fa(this.currentRuntimeFlags)&&this.isInterrupted()?ce(DA(n)):ir(()=>s.effect_instruction_i1(n));case"OnStep":return Fa(this.currentRuntimeFlags)&&this.isInterrupted()?ce(DA(n)):ue(ce(n));case nE:return this.patchRuntimeFlags(this.currentRuntimeFlags,s.patch),Fa(this.currentRuntimeFlags)&&this.isInterrupted()?ce(jn(n,this.getInterruptedCause())):ce(n);default:mg(s)}else return xi.currentOp=ce(n),Ni}[xI](e){return ir(()=>e.effect_instruction_i0(this,sD(this.currentRuntimeFlags)))}Blocked(e){const n=this.getFiberRefs(),s=this.currentRuntimeFlags;if(this._steps.length>0){const a=[],c=this._steps[this._steps.length-1];let l=this.popStack();for(;l&&l._op!=="OnStep";)a.push(l),l=this.popStack();this.setFiberRefs(c.refs),this.currentRuntimeFlags=c.flags;const d=Md(c.refs,n),m=Bo(c.flags,s);return ue(lF(e.effect_instruction_i0,ee(p=>{for(;a.length>0;)p.pushStack(a.pop());return p.setFiberRefs(Ad(p.id(),p.getFiberRefs())(d)),p.currentRuntimeFlags=Ju(m)(p.currentRuntimeFlags),e.effect_instruction_i1})))}return Ds(a=>X(pT(PV(e.effect_instruction_i0)),()=>a(e.effect_instruction_i1)))}RunBlocked(e){return OZ(e.effect_instruction_i0)}[ef](e){const n=e.effect_instruction_i0,s=this.currentRuntimeFlags,a=Ju(s,n);if(Fa(a)&&this.isInterrupted())return ce(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,n),e.effect_instruction_i1){const c=Bo(a,s);return this.pushStack(new qV(c,e)),ir(()=>e.effect_instruction_i1(s))}else return $r}[oy](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[kg](e){return this.pushStack(e),e.effect_instruction_i0}[cy](e){return this.pushStack(e),e.effect_instruction_i0}[ed](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,e.effect_instruction_i0),xi.currentOp=e,Ni}[Mg](e){return this._isYielding=!1,xi.currentOp=e,Ni}[uy](e){const n=e.effect_instruction_i0,s=e.effect_instruction_i1;return n()?(this.pushStack(e),s()):$r}[nd](e){return Ch[nd](this,e,void 0)}[Ob](e){return ir(()=>e.commit())}runLoop(e){let n=e;for(this.currentOpCount=0;;){if((this.currentRuntimeFlags&pV)!==0&&this.currentSupervisor.onEffect(this,n),this._queue.length>0&&(n=this.drainQueueWhileRunning(this.currentRuntimeFlags,n)),!this._isYielding){this.currentOpCount+=1;const s=this.currentScheduler.shouldYield(this);if(s!==!1){this._isYielding=!0,this.currentOpCount=0;const a=n;n=X(Qb({priority:s}),()=>a)}}try{if(n=this.currentTracer.context(()=>{if(RZ!==n[lc]._V){const s=this.getFiberRef(_Y);if(s._tag==="Some"){const a=n[lc]._V;this.log(`Executing an Effect versioned ${a} with a Runtime of version ${rE()}, you may want to dedupe the effect dependencies, you can use the language service plugin to detect this at compile time: https://github.com/Effect-TS/language-service`,Xa,s)}}return this[n._op](n)},this),n===Ni){const s=xi.currentOp;return s._op===Mg||s._op===ed?Ni:(xi.currentOp=null,s._op===Bn||s._op===qn?s:ce(ls(s)))}}catch(s){n!==Ni&&!_t(n,"_op")||!(n._op in this)?n=gF(`Not a valid effect: ${ul(n)}`):EY(s)?n=ce(jn(ls(s),Os(Za))):n=by(s)}}}run=()=>{this.drainQueueOnCurrentThread()}};const kZ=zt("effect/FiberRef/currentMinimumLogLevel",()=>Or(vJ("Info"))),MZ=t=>lT(e=>{const n=QG(e.context,$y);KI(n,BF).unsafe.log(t.log(e))}),AZ=zt(Symbol.for("effect/Logger/defaultLogger"),()=>MZ(HQ)),CZ=zt(Symbol.for("effect/Logger/tracerLogger"),()=>lT(({annotations:t,cause:e,context:n,fiberId:s,logLevel:a,message:c})=>{const l=em(kd(n,aa),HF);if(l._tag==="None"||l.value._tag==="ExternalSpan")return;const d=HI(kd(n,$y),i_),m={};for(const[p,y]of t)m[p]=y;m["effect.fiberId"]=n9(s),m["effect.logLevel"]=a.label,e!==null&&e._tag!=="Empty"&&(m["effect.cause"]=uf(e,{renderErrorCause:!0})),l.value.event(ul(Array.isArray(c)?c[0]:c),d.unsafeCurrentTimeNanos(),m)})),NZ=zt(Symbol.for("effect/FiberRef/currentLoggers"),()=>uY(vE(AZ,CZ))),JD=$(t=>pi(t[0]),(t,e)=>Cc(Gb(t,n=>xZ(s=>e(n,s))))),xZ=t=>ee(e=>{const n=e.getFiberRefs(),s=yV(e.currentRuntimeFlags,Ac);return X(WD,a=>_y(a,c=>ee(l=>{const d=l.getFiberRefs(),m=l.currentRuntimeFlags,p=Md(d,n),y=Bo(m,s),b=Md(n,d);return l.setFiberRefs(Ad(p,l.id(),n)),xd(XV(t(c),y),W(()=>{l.setFiberRefs(Ad(b,l.id(),l.getFiberRefs()))}))})))}),IZ=t=>{if(Array.isArray(t)||Xw(t))return[t,at()];const e=Object.keys(t),n=e.length;return[e.map(s=>t[s]),ht(s=>{const a={};for(let c=0;c<n;c++)a[e[c]]=s[c];return a})]},FZ=(t,e,n)=>{const s=[];for(const a of t)s.push(vl(a));return X(Tl(s,At,{concurrency:n?.concurrency,batching:n?.batching,concurrentFinalizers:n?.concurrentFinalizers}),a=>{const c=at(),l=a.length,d=new Array(l),m=new Array(l);let p=!1;for(let y=0;y<l;y++){const b=a[y];b._tag==="Left"?(d[y]=ht(b.left),p=!0):(m[y]=b.right,d[y]=c)}return p?e._tag==="Some"?Ze(e.value(d)):Ze(d):n?.discard?Se:e._tag==="Some"?nt(e.value(m)):nt(m)})},DZ=(t,e,n)=>{const s=[];for(const a of t)s.push(vl(a));return n?.discard?Tl(s,At,{concurrency:n?.concurrency,batching:n?.batching,discard:!0,concurrentFinalizers:n?.concurrentFinalizers}):kt(Tl(s,At,{concurrency:n?.concurrency,batching:n?.batching,concurrentFinalizers:n?.concurrentFinalizers}),a=>e._tag==="Some"?e.value(a):a)},dT=(t,e)=>{const[n,s]=IZ(t);return e?.mode==="validate"?FZ(n,s,e):e?.mode==="either"?DZ(n,s,e):e?.discard!==!0&&s._tag==="Some"?kt(Tl(n,At,e),s.value):Tl(n,At,e)},Tl=$(t=>Xw(t[0]),(t,e,n)=>ee(s=>{const a=n?.batching===!0||n?.batching==="inherit"&&s.getFiberRef(yY);return n?.discard?vC(n.concurrency,()=>Tu(wy,n?.concurrentFinalizers)(c=>a?Hi(t,(l,d)=>c(e(l,d)),!0,!1,1):Vb(t,(l,d)=>c(e(l,d)))),()=>Tu(a$,n?.concurrentFinalizers)(c=>Hi(t,(l,d)=>c(e(l,d)),a,!1)),c=>Tu(o$(c),n?.concurrentFinalizers)(l=>Hi(t,(d,m)=>l(e(d,m)),a,!1,c))):vC(n?.concurrency,()=>Tu(wy,n?.concurrentFinalizers)(c=>a?$$(t,1,(l,d)=>c(e(l,d)),!0):Li(t,(l,d)=>c(e(l,d)))),()=>Tu(a$,n?.concurrentFinalizers)(c=>mT(t,(l,d)=>c(e(l,d)),a)),c=>Tu(o$(c),n?.concurrentFinalizers)(l=>$$(t,c,(d,m)=>l(e(d,m)),a)))})),mT=(t,e,n)=>bt(()=>{const s=le(t),a=new Array(s.length);return De(Hi(s,(l,d)=>X(e(l,d),m=>W(()=>a[d]=m)),n,!1),nt(a))}),Hi=(t,e,n,s,a)=>Ds(c=>YV(l=>ee(d=>{let m=Array.from(t).reverse(),p=m.length;if(p===0)return Se;let y=0,b=!1;const S=a?Math.min(m.length,a):m.length,v=new Set,E=new Array,N=()=>v.forEach(B=>{B.currentScheduler.scheduleTask(()=>{B.unsafeInterruptAsFork(d.id())},0)}),C=new Array,x=new Array,q=new Array,A=()=>{const B=E.filter(({exit:et})=>et._tag==="Failure").sort((et,tt)=>et.index<tt.index?-1:et.index===tt.index?0:1).map(({exit:et})=>et);return B.length===0&&B.push($r),B},P=(B,et=!1)=>{const tt=Cc(l(B)),Z=zZ(tt,d,d.currentRuntimeFlags,c_);return d.currentScheduler.scheduleTask(()=>{et&&Z.unsafeInterruptAsFork(d.id()),Z.resume(tt)},0),Z},k=()=>{s||(p-=m.length,m=[]),b=!0,N()},U=n?BV:Ya,K=P(fc(B=>{const et=(Z,rt)=>{Z._op==="Blocked"?q.push(Z):(E.push({index:rt,exit:Z}),Z._op==="Failure"&&!b&&k())},tt=()=>{if(m.length>0){const Z=m.pop();let rt=y++;const vt=()=>{const G=m.pop();return rt=y++,X(Qb(),()=>X(U(c(e(G,rt))),ut))},ut=G=>m.length>0&&(et(G,rt),m.length>0)?vt():nt(G),Et=X(U(c(e(Z,rt))),ut),z=P(Et);C.push(z),v.add(z),b&&z.currentScheduler.scheduleTask(()=>{z.unsafeInterruptAsFork(d.id())},0),z.addObserver(G=>{let st;if(G._op==="Failure"?st=G:st=G.effect_instruction_i0,x.push(z),v.delete(z),et(st,rt),E.length===p)B(nt(Ee(Qu(A(),{parallel:!0}),()=>$r)));else if(q.length+E.length===p){const Nt=A(),O=q.map(Y=>Y.effect_instruction_i0).reduce(iF);B(nt(lF(O,Hi([Ee(Qu(Nt,{parallel:!0}),()=>$r),...q.map(Y=>Y.effect_instruction_i1)],Y=>Y,n,!0,a))))}else tt()})}};for(let Z=0;Z<S;Z++)tt()}));return ps(hc(Hb(c(Nd(K))),e_({onFailure:B=>{k();const et=q.length+1,tt=Math.min(typeof a=="number"?a:q.length,q.length),Z=Array.from(q);return fc(rt=>{let vt=0,ut=0;const Et=(G,st)=>Nt=>{vt++,vt===et&&rt(ue(ce(B))),Z.length>0&&st&&z()},z=()=>{P(Z.pop(),!0).addObserver(Et(ut,!0)),ut++};K.addObserver(Et(ut,!1)),ut++;for(let G=0;G<tt;G++)z()})},onSuccess:()=>Li(x,B=>B.inheritAll)})))}))),$$=(t,e,n,s)=>bt(()=>{const a=le(t),c=new Array(a.length);return De(Hi(a,(d,m)=>kt(n(d,m),p=>c[m]=p),s,!1,e),nt(c))}),pT=t=>UZ(t,c_),QD=(t,e,n,s=null)=>{const a=xy(t,e,n,s);return a.resume(t),a},zZ=(t,e,n,s=null)=>xy(t,e,n,s),xy=(t,e,n,s=null)=>{const a=q3(),c=e.getFiberRefs(),l=YG(c,a),d=new GD(a,l,n),m=kd(l,aa),p=d.currentSupervisor;return p.onStart(m,t,ht(e),d),d.addObserver(b=>p.onEnd(b,d)),(s!==null?s:w(e.getFiberRef(e$),Ee(()=>e.scope()))).add(n,d),d},UZ=(t,e)=>ee((n,s)=>nt(QD(t,n,s.runtimeFlags,e))),NC=t=>Nc(e=>Ke(em(e,so),{onNone:()=>t,onSome:n=>{switch(n.strategy._tag){case"Parallel":return t;case"Sequential":case"ParallelN":return X(Wb(n,a$),s=>ym(t,s))}}})),xC=t=>e=>Nc(n=>Ke(em(n,so),{onNone:()=>e,onSome:s=>s.strategy._tag==="ParallelN"&&s.strategy.parallelism===t?e:X(Wb(s,o$(t)),a=>ym(e,a))})),Tu=(t,e)=>n=>Nc(s=>Ke(em(s,so),{onNone:()=>n(At),onSome:a=>{if(e===!0){const c=t._tag==="Parallel"?NC:t._tag==="Sequential"?IC:xC(t.parallelism);switch(a.strategy._tag){case"Parallel":return c(n(NC));case"Sequential":return c(n(IC));case"ParallelN":return c(n(xC(a.strategy.parallelism)))}}else return n(At)}})),XD=t=>X(so,t),ZD=t=>X(h_(),e=>hc(t(e),n=>e.close(n))),IC=t=>Nc(e=>Ke(em(e,so),{onNone:()=>t,onSome:n=>{switch(n.strategy._tag){case"Sequential":return t;case"Parallel":case"ParallelN":return X(Wb(n,wy),s=>ym(t,s))}}})),LZ=$(t=>pi(t[1]),(t,e,n)=>gm(t,e,(s,a)=>[s,a],n)),jZ=$(t=>pi(t[1]),(t,e,n)=>n?.concurrent!==!0&&(n?.batching===void 0||n.batching===!1)?Xb(t,e):gm(t,e,(s,a)=>s,n)),PZ=$(t=>pi(t[1]),(t,e,n)=>n?.concurrent!==!0&&(n?.batching===void 0||n.batching===!1)?De(t,e):gm(t,e,(s,a)=>a,n)),gm=$(t=>pi(t[1]),(t,e,n,s)=>kt(dT([t,e],{concurrency:s?.concurrent?2:1,batching:s?.batching,concurrentFinalizers:s?.concurrentFinalizers}),([a,c])=>n(a,c))),so=Tc("effect/Scope"),WD=so,qZ=(t,e)=>{t.state._tag==="Open"&&t.state.finalizers.set({},e)},BZ={[WA]:WA,[tC]:tC,pipe(){return lt(this,arguments)},fork(t){return W(()=>{const e=tz(t);if(this.state._tag==="Closed")return e.state=this.state,e;const n={},s=a=>e.close(a);return this.state.finalizers.set(n,s),qZ(e,a=>W(()=>{this.state._tag==="Open"&&this.state.finalizers.delete(n)})),e})},close(t){return bt(()=>{if(this.state._tag==="Closed")return Se;const e=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:t},e.length===0?Se:PG(this.strategy)?w(Li(e,n=>Ya(n(t))),X(n=>w(Qu(n),Po(K0),Ee(()=>$r)))):qG(this.strategy)?w(mT(e,n=>Ya(n(t)),!1),X(n=>w(Qu(n,{parallel:!0}),Po(K0),Ee(()=>$r)))):w($$(e,this.strategy.parallelism,n=>Ya(n(t)),!1),X(n=>w(Qu(n,{parallel:!0}),Po(K0),Ee(()=>$r))))})},addFinalizer(t){return bt(()=>this.state._tag==="Closed"?t(this.state.exit):(this.state.finalizers.set({},t),Se))}},tz=(t=hm)=>{const e=Object.create(BZ);return e.strategy=t,e.state={_tag:"Open",finalizers:new Map},e},h_=(t=hm)=>W(()=>tz(t)),ym=$(2,(t,e)=>DY(t,Oc(tm(so,e)))),KZ=t=>hf(t,{differ:bZ,fork:id}),FC=fY(_V),HZ=KZ(f_),ez=$(3,(t,e,n)=>YZ(t,e,{onSelfWin:(s,a)=>X(s.await,c=>{switch(c._tag){case Bn:return X(s.inheritAll,()=>n.onSelfDone(c,a));case qn:return n.onSelfDone(c,a)}}),onOtherWin:(s,a)=>X(s.await,c=>{switch(c._tag){case Bn:return X(s.inheritAll,()=>n.onOtherDone(c,a));case qn:return n.onOtherDone(c,a)}})})),VZ=$(2,(t,e)=>am(n=>ez(t,e,{onSelfDone:(s,a)=>s$(s,{onFailure:c=>w(Nd(a),$C(l=>oc(c,l))),onSuccess:c=>w(a,Od(n),Tr(c))}),onOtherDone:(s,a)=>s$(s,{onFailure:c=>w(Nd(a),$C(l=>oc(l,c))),onSuccess:c=>w(a,Od(n),Tr(c))})}))),YZ=$(3,(t,e,n)=>ee((s,a)=>{const c=a.runtimeFlags,l=kc(!0),d=xy(t,s,c,n.selfScope),m=xy(e,s,c,n.otherScope);return fc(p=>{d.addObserver(()=>DC(d,m,n.onSelfWin,l,p)),m.addObserver(()=>DC(m,d,n.onOtherWin,l,p)),d.startFork(t),m.startFork(e)},W7(d.id(),m.id()))})),DC=(t,e,n,s,a)=>{V7(!0,!1)(s)&&a(n(t,e))},xd=$(2,(t,e)=>Ds(n=>ds(n(t),{onFailure:s=>ds(e,{onFailure:a=>yn(jn(s,a)),onSuccess:()=>yn(s)}),onSuccess:s=>Tr(e,s)}))),GZ=(t,e,n)=>am(s=>X(X(pT(DE(t)),a=>fc(c=>{const l=e.map(p=>p.listeners.count),d=()=>{l.every(p=>p===0)&&e.every(p=>p.result.state.current._tag==="Pending"?!0:!!(p.result.state.current._tag==="Done"&&qE(p.result.state.current.effect)&&p.result.state.current.effect._tag==="Failure"&&A3(p.result.state.current.effect.cause)))&&(m.forEach(p=>p()),n?.(),c(UE(a)))};a.addObserver(p=>{m.forEach(y=>y()),c(p)});const m=e.map((p,y)=>{const b=S=>{l[y]=S,d()};return p.listeners.addObserver(b),()=>p.listeners.removeObserver(b)});return d(),W(()=>{m.forEach(p=>p())})})),()=>bt(()=>{const a=e.flatMap(c=>c.state.completed?[]:[c]);return Vb(a,c=>lZ(c.request,CF(s)))}))),nz=ac,w$=ls,JZ=Os,QZ=l7,XZ=M3,rz=A3,ZZ=EE,WZ=x3,tW=p7,eW=SY,bm=t_,nW=uf,rW="effect/ScheduleInterval",Iy=Symbol.for(rW),sz={[Iy]:Iy,startMillis:0,endMillis:0},iz=(t,e)=>t>e?sz:{[Iy]:Iy,startMillis:t,endMillis:e},sW=$(2,(t,e)=>iW(t,e)===t),iW=$(2,(t,e)=>t.endMillis<=e.startMillis?t:e.endMillis<=t.startMillis?e:t.startMillis<e.startMillis?t:e.startMillis<t.startMillis?e:t.endMillis<=e.endMillis?t:e),aW=t=>t.startMillis>=t.endMillis,oW=$(2,(t,e)=>{const n=Math.max(t.startMillis,e.startMillis),s=Math.min(t.endMillis,e.endMillis);return iz(n,s)}),cW=t=>iz(t,Number.POSITIVE_INFINITY),az=sz,uW=sW,lW=aW,fW=oW,hW=cW,dW="effect/ScheduleIntervals",zC=Symbol.for(dW),oz=t=>({[zC]:zC,intervals:t}),mW=$(2,(t,e)=>pW(t.intervals,e.intervals,ke())),pW=(t,e,n)=>{let s=t,a=e,c=n;for(;ta(s)&&ta(a);){const l=w(si(s),fW(si(a))),d=lW(l)?c:w(c,Kn(l));w(si(s),uW(si(a)))?s=Ui(s):a=Ui(a),c=d}return oz(Wi(c))},E$=t=>w(t.intervals,dE,Ee(()=>az)).startMillis,gW=t=>w(t.intervals,dE,Ee(()=>az)).endMillis,yW=$(2,(t,e)=>E$(t)<E$(e)),bW=t=>ta(t.intervals),_W=oz,SW=mW,vW=E$,UC=gW,$W=yW,wW=bW,gT="Continue",cz="Done",EW=t=>({_tag:gT,intervals:t}),TW=t=>({_tag:gT,intervals:_W(He(t))}),OW={_tag:cz},RW=t=>t._tag===gT,kW=t=>t._tag===cz,MW=EW,AW=TW,Id=OW,LC=RW,Fy=kW,CW=so,T$=kF,NW=_y,Dy=n$,xW=ym,uz=Wb,lz=h_;class IW{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>Io(n=>{if(this.free<e){const s=()=>{this.free<e||(this.waiters.delete(s),this.taken+=e,n(nt(e)))};return this.waiters.add(s),W(()=>{this.waiters.delete(s)})}return this.taken+=e,n(nt(e))});updateTaken=e=>ee(n=>(this.taken=e(this.taken),this.waiters.size>0&&n.getFiberRef(iT).scheduleTask(()=>{const s=this.waiters.values();let a=s.next();for(;a.done===!1&&this.free>0;)a.value(),a=s.next()},n.getFiberRef(cm)),nt(this.free)));release=e=>this.updateTaken(n=>n-e);releaseAll=this.updateTaken(e=>0);withPermits=e=>n=>Ds(s=>X(s(this.take(e)),a=>xd(s(n),this.release(a))));withPermitsIfAvailable=e=>n=>Ds(s=>bt(()=>this.free<e?gQ:(this.taken+=e,xd(s(iQ(n)),this.release(e)))))}const yT=t=>new IW(t),FW=t=>W(()=>yT(t)),fz=$(2,(t,e)=>ee((n,s)=>{const a=e,c=QD(t,n,s.runtimeFlags,c_);if(a.state._tag==="Open"){const l=()=>am(m=>wt(m,c.id())?Se:ps(UE(c))),d={};a.state.finalizers.set(d,l),c.addObserver(()=>{a.state._tag!=="Closed"&&a.state.finalizers.delete(d)})}else c.unsafeInterruptAsFork(n.id());return nt(c)})),DW=t=>XD(e=>fz(t,e)),zW="effect/Ref/SynchronizedRef",hz=Symbol.for(zW),dz={_A:t=>t};class UW extends xc{ref;withLock;[hz]=dz;[tT]=eT;[El]=El;constructor(e,n){super(),this.ref=e,this.withLock=n,this.get=oi(this.ref)}get;commit(){return this.get}modify(e){return this.modifyEffect(n=>nt(e(n)))}modifyEffect(e){return this.withLock(w(X(oi(this.ref),e),X(([n,s])=>Tr(Zu(this.ref,s),n))))}}const LW=t=>W(()=>mz(t)),mz=t=>{const e=nT(t),n=yT(1);return new UW(e,n.withPermits(1))},jW=Symbol.for("effect/ManagedRuntime"),PW="Fresh",qW="FromEffect",BW="Scoped",KW="Suspend",HW="Provide",pz="ProvideMerge",VW="ZipWith",gz=DQ,YW=UQ,jC=zQ,Ko=UE,yz=Od,PC=Nd,d_=t=>function(){if(arguments.length===1){const e=arguments[0];return(n,...s)=>t(e,n,...s)}return t.apply(this,arguments)},m_=d_((t,e,n)=>{const s=q3(),a=[[aa,[[s,t.context]]]];n?.scheduler&&a.push([iT,[[s,n.scheduler]]]);let c=XG(t.fiberRefs,{entries:a,forkAs:s});n?.updateRefs&&(c=n.updateRefs(c,s));const l=new GD(s,c,t.runtimeFlags);let d=e;n?.scope&&(d=X(uz(n.scope,hm),p=>De(kF(p,am(y=>wt(y,l.id())?Se:Od(l,y))),hc(e,y=>Dy(p,y)))));const m=l.currentSupervisor;return m!==f_&&(m.onStart(t.context,d,at(),l),l.addObserver(p=>m.onEnd(p,l))),c_.add(t.runtimeFlags,l),n?.immediate===!1?l.resume(d):l.start(d),l}),bz=d_((t,e,n={})=>{const s=m_(t,e,n);return n.onExit&&s.addObserver(a=>{n.onExit(a)}),(a,c)=>bz(t)(w(s,yz(a??Za)),{...c,onExit:c?.onExit?l=>c.onExit(EQ(l)):void 0})}),_z=d_((t,e)=>{const n=WW(t)(e);if(n._tag==="Failure")throw XW(n.effect_instruction_i0);return n.effect_instruction_i0});let GW=class extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}};const JW=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new GW(t);return Error.stackTraceLimit=e,n},G0=Symbol.for("effect/Runtime/FiberFailure"),pg=Symbol.for("effect/Runtime/FiberFailure/Cause");let QW=class extends Error{[G0];[pg];constructor(e){const n=D3(e)[0];super(n?.message||"An error has occurred"),this[G0]=G0,this[pg]=e,this.name=n?`(FiberFailure) ${n.name}`:"FiberFailure",n?.stack&&(this.stack=n.stack)}toJSON(){return{_id:"FiberFailure",cause:this[pg].toJSON()}}toString(){return"(FiberFailure) "+uf(this[pg],{renderErrorCause:!0})}[pe](){return this.toString()}};const XW=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new QW(t);return Error.stackTraceLimit=e,n},ZW=t=>{const e=t;switch(e._op){case"Failure":case"Success":return e;case"Left":return Rd(e.left);case"Right":return ue(e.right);case"Some":return ue(e.value);case"None":return Rd(t_())}},WW=d_((t,e)=>{const n=ZW(e);if(n)return n;const s=new sT,a=m_(t)(e,{scheduler:s});s.flush();const c=a.unsafePoll();return c||AF(IE(JW(a),VE(a)))});let Sz=class{context;runtimeFlags;fiberRefs;constructor(e,n,s){this.context=e,this.runtimeFlags=n,this.fiberRefs=s}pipe(){return lt(this,arguments)}};const vz=t=>new Sz(t.context,t.runtimeFlags,t.fiberRefs),ttt=()=>ee((t,e)=>nt(new Sz(t.getFiberRef(aa),e.runtimeFlags,t.getFiberRefs()))),ett=rF(Ac,eF,tF),Fd=vz({context:oE(),runtimeFlags:ett,fiberRefs:ZG()}),ntt=m_(Fd),rtt=_z(Fd),stt=$(2,(t,e)=>t.modifyEffect(e)),itt="effect/Layer",$z=Symbol.for(itt),att={_RIn:t=>t,_E:t=>t,_ROut:t=>t},pc={[$z]:att,pipe(){return lt(this,arguments)}},ott="effect/Layer/MemoMap",J0=Symbol.for(ott),ctt=Mb()("effect/Layer/CurrentMemoMap",{defaultValue:()=>ftt()}),utt=t=>_t(t,$z),ltt=t=>t._op_layer===PW;class wz{ref;[J0];constructor(e){this.ref=e,this[J0]=J0}getOrElseMemoize(e,n){return w(stt(this.ref,s=>{const a=s.get(e);if(a!==void 0){const[c,l]=a,d=w(c,X(([m,p])=>w(dQ(m),Tr(p))),hc(e_({onFailure:()=>Se,onSuccess:()=>_y(n,l)})));return nt([d,s])}return w(ky(0),X(c=>w(lm(),X(l=>w(ky(()=>Se),kt(d=>{const m=Ds(y=>w(h_(),X(b=>w(y(X(Rz(e,b,!0),S=>aQ(S(this)))),Ya,X(S=>{switch(S._tag){case qn:return w(xF(l,S.effect_instruction_i0),De(n$(b,S)),De(yn(S.effect_instruction_i0)));case Bn:return w(Zu(d,v=>w(n$(b,v),Jb(hD(c,E=>[E===1,E-1])),ps)),De(My(c,v=>v+1)),De(_y(n,v=>w(W(()=>s.delete(e)),De(oi(d)),X(E=>E(v))))),De(fm(l,S.effect_instruction_i0)),Tr(S.effect_instruction_i0[1]))}}))))),p=[w(fi(l),hc(s$({onFailure:()=>Se,onSuccess:()=>My(c,y=>y+1)}))),y=>w(oi(d),X(b=>b(y)))];return[m,ltt(e)?s:s.set(e,p)]}))))))}),Hb)}}const Ez=bt(()=>kt(LW(new Map),t=>new wz(t))),ftt=()=>new wz(mz(new Map)),Tz=$(2,(t,e)=>X(Ez,n=>Oz(t,n,e))),Oz=$(3,(t,e,n)=>X(Rz(t,n),s=>mQ(s(e),ctt,e))),Rz=(t,e,n=!1)=>{const s=t;switch(s._op_layer){case"Locally":return W(()=>a=>s.f(a.getOrElseMemoize(s.self,e)));case"ExtendScope":return W(()=>a=>XD(c=>a.getOrElseMemoize(s.layer,c)));case"Fold":return W(()=>a=>w(a.getOrElseMemoize(s.layer,e),ds({onFailure:c=>a.getOrElseMemoize(s.failureK(c),e),onSuccess:c=>a.getOrElseMemoize(s.successK(c),e)})));case"Fresh":return W(()=>a=>w(s.layer,Tz(e)));case"FromEffect":return W(n?()=>a=>s.effect:()=>a=>a.getOrElseMemoize(t,e));case"Provide":return W(()=>a=>w(a.getOrElseMemoize(s.first,e),X(c=>w(a.getOrElseMemoize(s.second,e),s_(c)))));case"Scoped":return W(n?()=>a=>ym(s.effect,e):()=>a=>a.getOrElseMemoize(t,e));case"Suspend":return W(()=>a=>a.getOrElseMemoize(s.evaluate(),e));case"ProvideMerge":return W(()=>a=>w(a.getOrElseMemoize(s.first,e),$F(a.getOrElseMemoize(s.second,e),s.zipK)));case"ZipWith":return W(()=>a=>w(a.getOrElseMemoize(s.first,e),gm(a.getOrElseMemoize(s.second,e),s.zipK,{concurrent:!0})))}},htt=()=>p_(IF()),qC=$(2,(t,e)=>{const n=kb(t),s=n?t:e;return p_(kt(n?e:t,c=>tm(s,c)))});function p_(t){const e=Object.create(pc);return e._op_layer=qW,e.effect=t,e}const dtt=$(2,(t,e)=>btt(t,e,(n,s)=>Oc(n,s))),kz=(...t)=>{let e=t[0];for(let n=1;n<t.length;n++)e=dtt(e,t[n]);return e},BC=$(2,(t,e)=>{const n=kb(t),s=n?t:e;return mtt(kt(n?e:t,c=>tm(s,c)))}),mtt=t=>{const e=Object.create(pc);return e._op_layer=BW,e.effect=t,e},ptt=$(2,(t,e)=>{const n=kb(t);return p_(nt(tm(n?t:e,n?e:t)))}),Mz=t=>{const e=Object.create(pc);return e._op_layer=KW,e.evaluate=t,e},gtt=$(2,(t,e)=>{const n=kb(t),s=n?t:e,a=n?e:t;return p_(W(()=>tm(s,a())))}),O$=$(2,(t,e)=>Mz(()=>{const n=Object.create(pc);return n._op_layer=HW,n.first=Object.create(pc,{_op_layer:{value:pz,enumerable:!0},first:{value:htt(),enumerable:!0},second:{value:Array.isArray(e)?kz(...e):e},zipK:{value:(s,a)=>w(s,Oc(a))}}),n.second=t,n})),ytt=$(2,(t,e)=>{const n=Object.create(pc);return n._op_layer=pz,n.first=e,n.second=O$(t,e),n.zipK=(s,a)=>w(s,Oc(a)),n}),btt=$(3,(t,e,n)=>Mz(()=>{const s=Object.create(pc);return s._op_layer=VW,s.first=t,s.second=e,s.zipK=n,s})),KC=$(2,(t,e)=>ZD(n=>X(Tz(e,n),s=>HE(t,s)))),HC=$(2,(t,e)=>{const n=Md(Fd.fiberRefs,e.fiberRefs),s=Bo(Fd.runtimeFlags,e.runtimeFlags);return Ds(a=>ee(c=>{const l=c.getFiberRef(aa),d=c.getFiberRefs(),m=Ad(c.id(),d)(n),p=c.currentRuntimeFlags,y=Ju(s)(p),b=Md(m,d),S=Bo(y,p);return c.setFiberRefs(m),c.currentRuntimeFlags=y,xd(HE(a(t),Oc(l,e.context)),ee(v=>(v.setFiberRefs(Ad(v.id(),v.getFiberRefs())(b)),v.currentRuntimeFlags=Ju(S)(v.currentRuntimeFlags),Se)))}))}),_tt=$(2,(t,e)=>Array.isArray(e)?KC(t,kz(...e)):utt(e)?KC(t,e):_8(e)?HE(t,e):jW in e?X(e.runtimeEffect,n=>HC(t,n)):HC(t,e)),Stt=jb,vtt=function(){const t=Symbol.for("effect/Data/Error/plainArgs");return{BaseEffectError:class extends jE{constructor(n){super(n?.message,n?.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,t,{value:n,enumerable:!1}))}toJSON(){return{...this[t],...this}}}}.BaseEffectError}(),$tt=t=>{const e={BaseEffectError:class extends vtt{_tag=t}};return e.BaseEffectError.prototype.name=t,e.BaseEffectError},wtt="effect/Schedule",Az=Symbol.for(wtt),Ett=t=>_t(t,Az),Ttt="effect/ScheduleDriver",Ott=Symbol.for(Ttt),R$={start:0,now:0,input:void 0,output:void 0,elapsed:yl,elapsedSincePrevious:yl,recurrence:0},VC=Mb()("effect/Schedule/CurrentIterationMetadata",{defaultValue:()=>R$}),Rtt={_Out:t=>t,_In:t=>t,_R:t=>t},ktt={_Out:t=>t,_In:t=>t,_R:t=>t};class Mtt{initial;step;[Az]=Rtt;constructor(e,n){this.initial=e,this.step=n}pipe(){return lt(this,arguments)}}const YC=(t,e,n,s)=>My(t,a=>a.recurrence===0?{now:e,input:n,output:s,recurrence:a.recurrence+1,elapsed:yl,elapsedSincePrevious:yl,start:e}:{now:e,input:n,output:s,recurrence:a.recurrence+1,elapsed:bl(e-a.start),elapsedSincePrevious:bl(e-a.now),start:a.start});class Att{schedule;ref;[Ott]=ktt;constructor(e,n){this.schedule=e,this.ref=n}get state(){return kt(oi(this.ref),e=>e[1])}get last(){return X(oi(this.ref),([e,n])=>{switch(e._tag){case"None":return FE(()=>new t_);case"Some":return nt(e.value)}})}iterationMeta=nT(R$);get reset(){return Zu(this.ref,[at(),this.schedule.initial]).pipe(Xb(Zu(this.iterationMeta,R$)))}next(e){return w(kt(oi(this.ref),n=>n[1]),X(n=>w(tQ,X(s=>w(bt(()=>this.schedule.step(s,e,n)),X(([a,c,l])=>{const d=Zu(this.ref,[ht(c),a]);if(Fy(l))return d.pipe(De(Ze(at())));const m=vW(l.intervals)-s;if(m<=0)return d.pipe(De(YC(this.iterationMeta,s,e,c)),Tr(c));const p=bl(m);return w(d,De(YC(this.iterationMeta,s,e,c)),De(pQ(p)),Tr(c))}))))))}}const _m=(t,e)=>new Mtt(t,e),Ctt=$(2,(t,e)=>bT(t,(n,s)=>W(()=>e(n,s)))),bT=$(2,(t,e)=>_m(t.initial,(n,s,a)=>X(t.step(n,s,a),([c,l,d])=>Fy(d)?nt([c,l,Id]):kt(e(s,l),m=>m?[c,l,d]:[c,l,Id])))),Ntt=t=>w(ky([at(),t.initial]),kt(e=>new Att(t,e))),xtt=$(2,(t,e)=>Itt(t,e,SW)),Itt=$(3,(t,e,n)=>_m([t.initial,e.initial],(s,a,c)=>w($F(t.step(s,a,c[0]),e.step(s,a,c[1]),(l,d)=>[l,d]),X(([[l,d,m],[p,y,b]])=>LC(m)&&LC(b)?k$(t,e,a,l,d,m.intervals,p,y,b.intervals,n):nt([[l,p],[d,y],Id]))))),k$=(t,e,n,s,a,c,l,d,m,p)=>{const y=p(c,m);return wW(y)?nt([[s,l],[a,d],MW(y)]):w(c,$W(m))?X(t.step(UC(c),n,s),([b,S,v])=>Fy(v)?nt([[b,l],[S,d],Id]):k$(t,e,n,b,S,v.intervals,l,d,m,p)):X(e.step(UC(m),n,l),([b,S,v])=>Fy(v)?nt([[s,b],[a,S],Id]):k$(t,e,n,s,a,c,b,S,v.intervals,p))},Ftt=$(2,(t,e)=>Dtt(t,n=>W(()=>e(n)))),Dtt=$(2,(t,e)=>_m(t.initial,(n,s,a)=>X(t.step(n,s,a),([c,l,d])=>kt(e(l),m=>[c,m,d])))),ztt=t=>_m(t.initial,(e,n,s)=>w(t.step(e,n,s),kt(([a,c,l])=>[a,n,l]))),Utt=t=>qtt(Nz,e=>e<t),Ltt=(t,e)=>_m(t,(n,s,a)=>W(()=>[e(a),a,AW(hW(n))])),jtt=$(2,(t,e)=>bT(t,(n,s)=>hQ(e(n)))),Ptt=$(2,(t,e)=>bT(t,(n,s)=>e(n))),qtt=$(2,(t,e)=>Ctt(t,(n,s)=>e(s))),jg=Symbol.for("effect/Schedule/ScheduleDefect");class Btt{error;[jg];constructor(e){this.error=e,this[jg]=jg}}const Ktt=t=>_t(t,jg),GC=t=>Td(t,e=>by(new Btt(e))),Htt=t=>Ke(TE(t,e=>M3(e)&&Ktt(e.defect)?ht(e.defect):at()),{onNone:()=>t,onSome:e=>ac(e.error)}),Vtt=t=>pF(t,e=>yn(Htt(e))),JC=$(2,(t,e)=>Gtt(t,e,(n,s)=>Ze(n))),Ytt=$(2,(t,e)=>{if(Ett(e))return JC(t,e);const n=e.schedule??ztt(Nz),s=e.while?Ptt(n,l=>{const d=e.while(l);return typeof d=="boolean"?nt(d):GC(d)}):n,a=e.until?jtt(s,l=>{const d=e.until(l);return typeof d=="boolean"?nt(d):GC(d)}):s,c=e.times?xtt(a,Utt(e.times)).pipe(Ftt(l=>l[0])):a;return Vtt(JC(t,c))}),Gtt=$(3,(t,e,n)=>X(Ntt(e),s=>Wa(t,{onFailure:a=>n(a,at()),onSuccess:a=>Cz(wC(t,VC,oi(s.iterationMeta)),s,(c,l)=>wC(n(c,l),VC,oi(s.iterationMeta)),a)}))),Cz=(t,e,n,s)=>Wa(e.next(s),{onFailure:()=>HV(e.last),onSuccess:a=>Wa(t,{onFailure:c=>n(c,ht(a)),onSuccess:c=>Cz(t,e,n,c)})}),Nz=Ltt(0,t=>t+1),QC=Symbol.for("effect/MutableList"),Jtt={[QC]:QC,[Symbol.iterator](){let t=!1,e=this.head;return{next(){if(t)return this.return();if(e==null)return t=!0,this.return();const n=e.value;return e=e.next,{done:t,value:n}},return(n){return t||(t=!0),{done:!0,value:n}}}},toString(){return Te(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(Re)}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}},Qtt=t=>({value:t,removed:!1,prev:void 0,next:void 0}),Xtt=()=>{const t=Object.create(Jtt);return t.head=void 0,t.tail=void 0,t._length=0,t},xz=t=>_T(t)===0,_T=t=>t._length,Ztt=$(2,(t,e)=>{const n=Qtt(e);return t.head===void 0&&(t.head=n),t.tail===void 0||(t.tail.next=n,n.prev=t.tail),t.tail=n,t._length+=1,t}),Wtt=t=>{const e=t.head;if(e!==void 0)return tet(t,e),e.value},tet=(t,e)=>{e.removed||(e.removed=!0,e.prev!==void 0&&e.next!==void 0?(e.prev.next=e.next,e.next.prev=e.prev):e.prev!==void 0?(t.tail=e.prev,e.prev.next=void 0):e.next!==void 0?(t.head=e.next,e.next.prev=void 0):(t.tail=void 0,t.head=void 0),t._length>0&&(t._length-=1))},XC=Symbol.for("effect/MutableQueue"),Be=Symbol.for("effect/mutable/MutableQueue/Empty"),eet={[XC]:XC,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return Te(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(Re)}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}},Iz=t=>{const e=Object.create(eet);return e.queue=Xtt(),e.capacity=t,e},net=t=>Iz(t),g_=()=>Iz(void 0),ST=t=>_T(t.queue),Ho=t=>xz(t.queue),ret=t=>t.capacity===void 0?1/0:t.capacity,Ol=$(2,(t,e)=>{const n=_T(t.queue);return t.capacity!==void 0&&n===t.capacity?!1:(Ztt(e)(t.queue),!0)}),vT=$(2,(t,e)=>{const n=e[Symbol.iterator]();let s,a=ke(),c=!0;for(;c&&(s=n.next())&&!s.done;)c=Ol(s.value)(t);for(;s!=null&&!s.done;)a=Kn(s.value)(a),s=n.next();return Wi(a)}),Vi=$(2,(t,e)=>xz(t.queue)?e:Wtt(t.queue)),y_=$(2,(t,e)=>{let n=ke(),s=0;for(;s<e;){const a=Vi(Be)(t);if(a===Be)break;n=Kn(a)(n),s+=1}return Wi(n)}),M$=lc,mf=pi,Fz=dT,Yi=Tl,ZC=fc,WC=ee,Dz=Ze,Gi=yn,set=gF,Wu=QV,Q0=ZV,nn=nt,We=bt,xe=W,se=Se,zz=Td,$T=pF,iet=uQ,Ou=Tn,Rs=DE,Hh=Cc,Uz=Ds,Pg=Tr,aet=ps,me=kt,wT=Yb,zy=JD,oet=dF,qu=xd,cet=hc,ET=WD,A$=ZD,uet=am,fet=pT,Vo=fz,het=DW,Uy=_tt,Ru=vl,Ln=Ya,det=KV,met=SQ,Rt=X,pet=Pu,Du=Hb,X0=VZ,Lz=ez,TT=Gb,jz=bQ,get=oQ,tN=Ytt,yet=ff,bet=SD,C$=bF,zi=ds,_et=fQ,Pz=ttt,vet=yT,qz=FW,Bz=ntt,Rl=rtt,N$=LZ,OT=jZ,Un=PZ,b_=gm,$et=t=>{const e=new Map;return new Proxy(t,{get(n,s,a){if(s in n)return Reflect.get(n,s,a);if(e.has(s))return e.get(s);const c=(...b)=>Pu(n,S=>typeof S[s]=="function"?(e.set(s,(...v)=>Pu(n,E=>E[s](...v))),S[s](...b)):(e.set(s,Pu(n,v=>v[s])),S[s])),l=Pu(n,b=>b[s]);Object.assign(c,l);const d=c.apply,m=c.bind,p=c.call,y=Object.setPrototypeOf({},Object.getPrototypeOf(l));return y.apply=d,y.bind=m,y.call=p,Object.setPrototypeOf(c,y),e.set(s,c),c}})},Kz=function(){return function(){const[t,e]=arguments,n="accessors"in e?e.accessors:!1,s=Error.stackTraceLimit;Error.stackTraceLimit=2;const a=new Error;Error.stackTraceLimit=s;let c="unchecked";const l=function(b){if(c==="unchecked"){const S=Object.getPrototypeOf(b);if(S===Object.prototype||S===null)c="plain";else{const v=Object.getPrototypeOf(this);Object.setPrototypeOf(v,S),c="patched"}}if(c==="plain")Object.assign(this,b);else if(c==="patched")return Object.setPrototypeOf(b,Object.getPrototypeOf(this)),b};l.prototype._tag=t,Object.defineProperty(l,"make",{get(){return b=>new this(b)}}),Object.defineProperty(l,"use",{get(){return b=>Pu(this,b)}}),l.key=t,Object.assign(l,Rb),Object.defineProperty(l,"stack",{get(){return a.stack}});const d="dependencies"in e&&e.dependencies.length>0,m=d?"DefaultWithoutDependencies":"Default";let p,y=!1;if("effect"in e?(y=typeof e.effect=="function",Object.defineProperty(l,m,{get(){return y?(function(){return qC(l,me(e.effect.apply(null,arguments),b=>new this(b)))}).bind(this):p??=qC(l,me(e.effect,b=>new this(b)))}})):"scoped"in e?(y=typeof e.scoped=="function",Object.defineProperty(l,m,{get(){return y?(function(){return BC(l,me(e.scoped.apply(null,arguments),b=>new this(b)))}).bind(this):p??=BC(l,me(e.scoped,b=>new this(b)))}})):"sync"in e?Object.defineProperty(l,m,{get(){return p??=gtt(l,()=>new this(e.sync()))}}):Object.defineProperty(l,m,{get(){return p??=ptt(l,new this(e.succeed))}}),d){let b;Object.defineProperty(l,"Default",{get(){return y?function(){return O$(this.DefaultWithoutDependencies.apply(null,arguments),e.dependencies)}:b??=O$(this.DefaultWithoutDependencies,e.dependencies)}})}return n===!0?$et(l):l}},Z0=ytt,Hz=Ez,wet=Oz,Vz=(t,e)=>{switch(e._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(t);case"SymbolKeyword":return Object.getOwnPropertySymbols(t);case"Refinement":return Vz(t,e.from)}},Ji=t=>Object.keys(t).concat(Object.getOwnPropertySymbols(t)),Yz=t=>{let e=!1,n;return()=>(e||(n=t(),e=!0),n)},Eet=t=>{try{return t.toISOString()}catch{return String(t)}},Ns=(t,e=!0)=>{if(Array.isArray(t))return`[${t.map(n=>Ns(n,e)).join(",")}]`;if(T5(t))return Eet(t);if(_t(t,"toString")&&Jd(t.toString)&&t.toString!==Object.prototype.toString)return t.toString();if(hs(t))return JSON.stringify(t);if(Zi(t)||t==null||pd(t)||Iv(t))return String(t);if(wb(t))return String(t)+"n";if(Xw(t))return`${t.constructor.name}(${Ns(Array.from(t),e)})`;try{e&&JSON.stringify(t);const n=`{${Ji(t).map(a=>`${hs(a)?JSON.stringify(a):String(a)}:${Ns(t[a],!1)}`).join(",")}}`,s=t.constructor.name;return t.constructor!==Object.prototype.constructor?`${s}(${n})`:n}catch{return"<circular structure>"}},Gz=t=>typeof t=="string"?JSON.stringify(t):String(t),Jz=t=>Array.isArray(t),eN=t=>`[${Gz(t)}]`,Qz=t=>Jz(t)?t.map(eN).join(""):eN(t),io=(t,e,n,s)=>{let a=t;return n&&gn(n)&&(a+=`
at path: ${Qz(n)}`),e!==void 0&&(a+=`
details: ${e}`),s&&(a+=`
schema (${s._tag}): ${s}`),a},Xz=(t,e,n)=>io("Unsupported schema or overlapping types",`cannot extend ${t} with ${e}`,n),Tet=t=>io("Unsupported key schema",void 0,void 0,t),Oet=t=>io("Unsupported literal",`literal value: ${Ns(t)}`),nN=t=>io("Duplicate index signature",`${t} index signature`),Ret=io("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),ket=io("Invalid element","A required element cannot follow an optional element. ts(1257)"),rN=t=>io("Duplicate property signature transformation",`Duplicate key ${Ns(t)}`),Zz=t=>io("Duplicate property signature",`Duplicate key ${Ns(t)}`),Met=Symbol.for("effect/annotation/Brand"),Aet=Symbol.for("effect/annotation/SchemaId"),Wz=Symbol.for("effect/annotation/Message"),RT=Symbol.for("effect/annotation/MissingMessage"),kT=Symbol.for("effect/annotation/Identifier"),ao=Symbol.for("effect/annotation/Title"),tl=Symbol.for("effect/annotation/AutoTitle"),Sm=Symbol.for("effect/annotation/Description"),tU=Symbol.for("effect/annotation/Examples"),eU=Symbol.for("effect/annotation/Default"),nU=Symbol.for("effect/annotation/JSONSchema"),rU=Symbol.for("effect/annotation/Arbitrary"),sU=Symbol.for("effect/annotation/Pretty"),iU=Symbol.for("effect/annotation/Equivalence"),Cet=Symbol.for("effect/annotation/Documentation"),aU=Symbol.for("effect/annotation/Concurrency"),oU=Symbol.for("effect/annotation/Batching"),cU=Symbol.for("effect/annotation/ParseIssueTitle"),uU=Symbol.for("effect/annotation/ParseOptions"),lU=Symbol.for("effect/annotation/DecodingFallback"),Ly=Symbol.for("effect/annotation/Surrogate"),Net=Symbol.for("effect/annotation/StableFilter"),fr=$(2,(t,e)=>Object.prototype.hasOwnProperty.call(t.annotations,e)?ht(t.annotations[e]):at()),xet=fr(Met),Iet=fr(Wz),Fet=fr(RT),fU=fr(ao),hU=fr(tl),__=fr(kT),dU=fr(Sm),Det=fr(aU),zet=fr(oU),Uet=fr(cU),Let=fr(uU),jet=fr(lU),mU=fr(Ly),Pet=fr(Net),qet=t=>H8(Pet(t),e=>e===!0),MT=Symbol.for("effect/annotation/JSONIdentifier"),Bet=fr(MT),Ket=t=>Ha(Bet(t),()=>__(t));let S_=class{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(e,n,s,a={}){this.typeParameters=e,this.decodeUnknown=n,this.encodeUnknown=s,this.annotations=a}toString(){return Ee(hi(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(e=>e.toJSON()),annotations:Mn(this.annotations)}}};const oa=t=>e=>e._tag===t;let x$=class{literal;annotations;_tag="Literal";constructor(e,n={}){this.literal=e,this.annotations=n}toString(){return Ee(hi(this),()=>Ns(this.literal))}toJSON(){return{_tag:this._tag,literal:wb(this.literal)?String(this.literal):this.literal,annotations:Mn(this.annotations)}}};const ad=oa("Literal");let Het=class{symbol;annotations;_tag="UniqueSymbol";constructor(e,n={}){this.symbol=e,this.annotations=n}toString(){return Ee(hi(this),()=>Ns(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:Mn(this.annotations)}}},Vet=class{annotations;_tag="NeverKeyword";constructor(e={}){this.annotations=e}toString(){return pf(this)}toJSON(){return{_tag:this._tag,annotations:Mn(this.annotations)}}};const pU=new Vet({[ao]:"never"});let Yet=class{annotations;_tag="UnknownKeyword";constructor(e={}){this.annotations=e}toString(){return pf(this)}toJSON(){return{_tag:this._tag,annotations:Mn(this.annotations)}}};const Get=new Yet({[ao]:"unknown"});let Jet=class{annotations;_tag="AnyKeyword";constructor(e={}){this.annotations=e}toString(){return pf(this)}toJSON(){return{_tag:this._tag,annotations:Mn(this.annotations)}}};const Qet=new Jet({[ao]:"any"});let Xet=class{annotations;_tag="StringKeyword";constructor(e={}){this.annotations=e}toString(){return pf(this)}toJSON(){return{_tag:this._tag,annotations:Mn(this.annotations)}}};const sN=new Xet({[ao]:"string",[Sm]:"a string"}),I$=oa("StringKeyword");class Zet{annotations;_tag="NumberKeyword";constructor(e={}){this.annotations=e}toString(){return pf(this)}toJSON(){return{_tag:this._tag,annotations:Mn(this.annotations)}}}const iN=new Zet({[ao]:"number",[Sm]:"a number"}),aN=oa("NumberKeyword");let Wet=class{annotations;_tag="BooleanKeyword";constructor(e={}){this.annotations=e}toString(){return pf(this)}toJSON(){return{_tag:this._tag,annotations:Mn(this.annotations)}}};const oN=new Wet({[ao]:"boolean",[Sm]:"a boolean"}),cN=oa("BooleanKeyword"),tnt=oa("SymbolKeyword");let AT=class{type;annotations;constructor(e,n={}){this.type=e,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:Mn(this.annotations)}}toString(){return String(this.type)}},vm=class extends AT{isOptional;constructor(e,n,s={}){super(e,s),this.isOptional=n}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:Mn(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}};const gU=t=>t.map(e=>e.type);let yU=class{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(e,n,s,a={}){this.elements=e,this.rest=n,this.isReadonly=s,this.annotations=a;let c=!1,l=!1;for(const d of e)if(d.isOptional)c=!0;else if(c){l=!0;break}if(l||c&&n.length>1)throw new Error(ket)}toString(){return Ee(hi(this),()=>ent(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(e=>e.toJSON()),rest:this.rest.map(e=>e.toJSON()),isReadonly:this.isReadonly,annotations:Mn(this.annotations)}}};const ent=t=>{const e=t.elements.map(String).join(", ");return Q8(t.rest,{onEmpty:()=>`readonly [${e}]`,onNonEmpty:(n,s)=>{const a=String(n),c=a.includes(" | ")?`(${a})`:a;if(s.length>0){const l=s.map(String).join(", ");return t.elements.length>0?`readonly [${e}, ...${c}[], ${l}]`:`readonly [...${c}[], ${l}]`}else return t.elements.length>0?`readonly [${e}, ...${c}[]]`:`ReadonlyArray<${a}>`}})};let zn=class extends vm{name;isReadonly;constructor(e,n,s,a,c){super(n,s,c),this.name=e,this.isReadonly=a}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:Mn(this.annotations)}}};const bU=t=>{switch(t._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return bU(t.from)}return!1};let v_=class{type;isReadonly;parameter;constructor(e,n,s){if(this.type=n,this.isReadonly=s,bU(e))this.parameter=e;else throw new Error(Ret)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}},Ga=class{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(e,n,s={}){this.annotations=s;const a={};for(let l=0;l<e.length;l++){const d=e[l].name;if(Object.prototype.hasOwnProperty.call(a,d))throw new Error(Zz(d));a[d]=null}const c={string:!1,symbol:!1};for(let l=0;l<n.length;l++){const d=TU(n[l].parameter);if(I$(d)){if(c.string)throw new Error(nN("string"));c.string=!0}else if(tnt(d)){if(c.symbol)throw new Error(nN("symbol"));c.symbol=!0}}this.propertySignatures=e,this.indexSignatures=n}toString(){return Ee(hi(this),()=>nnt(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(e=>e.toJSON()),indexSignatures:this.indexSignatures.map(e=>e.toJSON()),annotations:Mn(this.annotations)}}};const uN=t=>t.map(String).join("; "),nnt=t=>{if(t.propertySignatures.length>0){const e=t.propertySignatures.map(String).join("; ");return t.indexSignatures.length>0?`{ ${e}; ${uN(t.indexSignatures)} }`:`{ ${e} }`}else return t.indexSignatures.length>0?`{ ${uN(t.indexSignatures)} }`:"{}"},lN=oa("TypeLiteral"),rnt=gd(ZI($l,t=>{switch(t._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),snt={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},_U=t=>dy(t,e=>NT(e)?_U(e.types):[e]),int=t=>{const e=rnt(t),n=[],s={},a=[];for(const c of e)switch(c._tag){case"NeverKeyword":break;case"AnyKeyword":return[Qet];case"UnknownKeyword":return[Get];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{s[c._tag]||(s[c._tag]=c,n.push(c));break}case"Literal":{const l=typeof c.literal;switch(l){case"string":case"number":case"bigint":case"boolean":{const d=snt[l];!s[d]&&!a.includes(c.literal)&&(a.push(c.literal),n.push(c));break}case"object":{a.includes(c.literal)||(a.push(c.literal),n.push(c));break}}break}case"UniqueSymbol":{!s.SymbolKeyword&&!a.includes(c.symbol)&&(a.push(c.symbol),n.push(c));break}case"TupleType":{s.ObjectKeyword||n.push(c);break}case"TypeLiteral":{c.propertySignatures.length===0&&c.indexSignatures.length===0?s["{}"]||(s["{}"]=c,n.push(c)):s.ObjectKeyword||n.push(c);break}default:n.push(c)}return n};let Es=class F${types;annotations;static make=(e,n)=>CT(e)?new F$(e,n):e.length===1?e[0]:pU;static unify=(e,n)=>F$.make(int(_U(e)),n);_tag="Union";constructor(e,n={}){this.types=e,this.annotations=n}toString(){return Ee(hi(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(e=>e.toJSON()),annotations:Mn(this.annotations)}}};const ant=(t,e)=>t.map(e),CT=t=>t.length>1,NT=oa("Union"),W0=zt(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);let jy=class{f;annotations;_tag="Suspend";constructor(e,n={}){this.f=e,this.annotations=n,this.f=Yz(e)}toString(){return hi(this).pipe(Ha(()=>rf(z8(this.f)(),e=>hi(e))),Ee(()=>"<suspended schema>"))}toJSON(){const e=this.f();let n=W0.get(e);return n||(W0.set(e,{_tag:this._tag}),n={_tag:this._tag,ast:e.toJSON(),annotations:Mn(this.annotations)},W0.set(e,n),n)}},SU=class{from;filter;annotations;_tag="Refinement";constructor(e,n,s={}){this.from=e,this.filter=n,this.annotations=s}toString(){return __(this).pipe(Ee(()=>Ke(OU(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:e=>el(this.from)?String(this.from)+" & "+e:e})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:Mn(this.annotations)}}};const el=oa("Refinement"),tv={};let Bu=class{from;to;transformation;annotations;_tag="Transformation";constructor(e,n,s,a={}){this.from=e,this.to=n,this.transformation=s,this.annotations=a}toString(){return Ee(hi(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:Mn(this.annotations)}}};const ont=oa("Transformation");let vU=class{decode;encode;_tag="FinalTransformation";constructor(e,n){this.decode=e,this.encode=n}};const cnt=t=>e=>e._tag===t;class unt{_tag="ComposeTransformation"}const lnt=new unt;let fnt=class{from;to;decode;encode;constructor(e,n,s,a){this.from=e,this.to=n,this.decode=s,this.encode=a}},D$=class{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(e){this.propertySignatureTransformations=e;const n={},s={};for(const a of e){const c=a.from;if(n[c])throw new Error(rN(c));n[c]=!0;const l=a.to;if(s[l])throw new Error(rN(l));s[l]=!0}}};const fN=cnt("TypeLiteralTransformation"),kl=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={...t.annotations,...e},a=mU(t);return ze(a)&&(s[Ly]=kl(a.value,e)),n.annotations.value=s,Object.create(Object.getPrototypeOf(t),n)},hnt="[\\s\\S]*",dnt="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",$U=(t,e)=>{switch(t._tag){case"Literal":return Sy(String(t.literal));case"StringKeyword":return hnt;case"NumberKeyword":return dnt;case"TemplateLiteral":return wU(t);case"Union":return t.types.map(n=>$U(n)).join("|")}},mnt=(t,e,n,s)=>NT(t)?`(${e})`:e,wU=(t,e,n)=>{let s="";if(t.head!==""){const a=Sy(t.head);s+=a}for(const a of t.spans){const c=$U(a.type);if(s+=mnt(a.type,c),a.literal!==""){const l=Sy(a.literal);s+=l}}return s},pnt=t=>new RegExp(`^${wU(t)}$`),hN=(t,e)=>{const n=[],s=[],a=c=>{switch(c._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":s.push(new v_(c,e,!0));break;case"Literal":if(hs(c.literal)||Zi(c.literal))n.push(new zn(c.literal,e,!1,!0));else throw new Error(Oet(c.literal));break;case"Enums":{for(const[l,d]of c.enums)n.push(new zn(d,e,!1,!0));break}case"UniqueSymbol":n.push(new zn(c.symbol,e,!1,!0));break;case"Union":c.types.forEach(a);break;default:throw new Error(Tet(c))}};return a(t),{propertySignatures:n,indexSignatures:s}},EU=t=>e=>{let n;for(const s of t)Object.prototype.hasOwnProperty.call(e.annotations,s)&&(n===void 0&&(n={}),n[s]=e.annotations[s]);return n},gnt=t=>e=>{const n={...e.annotations};for(const s of t)delete n[s];return n},ynt=EU([tU,eU,nU,rU,sU,iU]),Qe=t=>{switch(t._tag){case"Declaration":{const e=os(t.typeParameters,Qe);return e===t.typeParameters?t:new S_(e,t.decodeUnknown,t.encodeUnknown,t.annotations)}case"TupleType":{const e=os(t.elements,a=>{const c=Qe(a.type);return c===a.type?a:new vm(c,a.isOptional)}),n=gU(t.rest),s=os(n,Qe);return e===t.elements&&s===n?t:new yU(e,s.map(a=>new AT(a)),t.isReadonly,t.annotations)}case"TypeLiteral":{const e=os(t.propertySignatures,s=>{const a=Qe(s.type);return a===s.type?s:new zn(s.name,a,s.isOptional,s.isReadonly)}),n=os(t.indexSignatures,s=>{const a=Qe(s.type);return a===s.type?s:new v_(s.parameter,a,s.isReadonly)});return e===t.propertySignatures&&n===t.indexSignatures?t:new Ga(e,n,t.annotations)}case"Union":{const e=os(t.types,Qe);return e===t.types?t:Es.make(e,t.annotations)}case"Suspend":return new jy(()=>Qe(t.f()),t.annotations);case"Refinement":{const e=Qe(t.from);return e===t.from?t:new SU(e,t.filter,t.annotations)}case"Transformation":{const e=ynt(t);return Qe(e!==void 0?kl(t.to,e):t.to)}}return t},ku=t=>Ke(Ket(t),{onNone:()=>{},onSome:e=>({[MT]:e})});function os(t,e){let n=!1;const s=Ab(t.length);for(let a=0;a<t.length;a++){const c=t[a],l=e(c);l!==c&&(n=!0),s[a]=l}return n?s:t}const Vs=(t,e)=>{switch(t._tag){case"Declaration":{const n=os(t.typeParameters,s=>Vs(s));return n===t.typeParameters?t:new S_(n,t.decodeUnknown,t.encodeUnknown,t.annotations)}case"TupleType":{const n=os(t.elements,c=>{const l=Vs(c.type);return l===c.type?c:new vm(l,c.isOptional)}),s=gU(t.rest),a=os(s,c=>Vs(c));return n===t.elements&&a===s?t:new yU(n,a.map(c=>new AT(c)),t.isReadonly,ku(t))}case"TypeLiteral":{const n=os(t.propertySignatures,a=>{const c=Vs(a.type);return c===a.type?a:new zn(a.name,c,a.isOptional,a.isReadonly)}),s=os(t.indexSignatures,a=>{const c=Vs(a.type);return c===a.type?a:new v_(a.parameter,c,a.isReadonly)});return n===t.propertySignatures&&s===t.indexSignatures?t:new Ga(n,s,ku(t))}case"Union":{const n=os(t.types,s=>Vs(s));return n===t.types?t:Es.make(n,ku(t))}case"Suspend":return new jy(()=>Vs(t.f()),ku(t));case"Refinement":{const n=Vs(t.from),s=ku(t);return s?kl(n,s):n}case"Transformation":{const n=ku(t);return Vs(n?kl(t.from,n):t.from)}}return t},z$=t=>Vs(t),Mn=t=>{const e={};for(const n of Object.getOwnPropertySymbols(t))e[String(n)]=t[n];return e},TU=t=>{switch(t._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return t;case"Refinement":return TU(t.from)}},pf=t=>Ee(hi(t),()=>t._tag);function bnt(t){return Ke(xet(t),{onNone:()=>"",onSome:e=>e.map(n=>` & Brand<${Ns(n)}>`).join("")})}const OU=t=>fU(t).pipe(Ha(()=>dU(t)),Ha(()=>hU(t)),Po(e=>e+bnt(t))),hi=t=>Ha(__(t),()=>OU(t));let Jn=class{path;actual;issue;_tag="Pointer";constructor(e,n,s){this.path=e,this.actual=n,this.issue=s}},dN=class{actual;message;_tag="Unexpected";constructor(e,n){this.actual=e,this.message=n}},Nh=class{ast;message;_tag="Missing";actual=void 0;constructor(e,n){this.ast=e,this.message=n}},Ge=class{ast;actual;issues;output;_tag="Composite";constructor(e,n,s,a){this.ast=e,this.actual=n,this.issues=s,this.output=a}},ev=class{ast;actual;kind;issue;_tag="Refinement";constructor(e,n,s,a){this.ast=e,this.actual=n,this.kind=s,this.issue=a}},nv=class{ast;actual;kind;issue;_tag="Transformation";constructor(e,n,s,a){this.ast=e,this.actual=n,this.kind=s,this.issue=a}},Ua=class{ast;actual;message;_tag="Type";constructor(e,n,s){this.ast=e,this.actual=n,this.message=s}},mN=class{ast;actual;message;_tag="Forbidden";constructor(e,n,s){this.ast=e,this.actual=n,this.message=s}};const pN=Symbol.for("effect/Schema/ParseErrorTypeId");let _nt=class extends $tt("ParseError"){[pN]=pN;get message(){return this.toString()}toString(){return qg.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[pe](){return this.toJSON()}};const Snt=t=>new _nt({issue:t}),Dd=Jt,RU=Ot,_r=k8,Pa=$(2,(t,e)=>_r(t)?vr(t,{onLeft:Ot,onRight:e}):Rt(t,e)),Pr=$(2,(t,e)=>_r(t)?A8(t,e):me(t,e)),rv=$(2,(t,e)=>_r(t)?M8(t,e):wT(t,e)),kU=$(2,(t,e)=>_r(t)?vr(t,{onLeft:e,onRight:Jt}):zz(t,e)),$_=(t,e)=>e===void 0||Zi(e)?t:t===void 0?e:{...t,...e},vnt=(t,e,n)=>{const s=$n(t,e);return(a,c)=>s(a,$_(n,c))},MU=(t,e,n)=>{const s=vnt(t,e,n);return(a,c)=>JI(s(a,c),Snt)},$nt=(t,e,n)=>{const s=$n(t,e);return(a,c)=>s(a,{...$_(n,c),isEffectAllowed:!0})},wnt=(t,e)=>MU(t.ast,!0,e),Ent=(t,e)=>$nt(t.ast,!1,e),AU=(t,e)=>MU(Qe(t.ast),!0,e),Tnt=(t,e)=>{const n=$n(Qe(t.ast),!0);return(s,a)=>ri(n(s,{exact:!0,...$_(e,a)}))},Ont=zt(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),Rnt=zt(Symbol.for("effect/ParseResult/encodeMemoMap"),()=>new WeakMap),$n=(t,e)=>{const n=e?Ont:Rnt,s=n.get(t);if(s)return s;const a=knt(t,e),c=Let(t),l=ze(c)?(p,y)=>a(p,$_(y,c.value)):a,d=jet(t),m=e&&ze(d)?(p,y)=>Yh(kU(l(p,y),d.value),t,p,y):l;return n.set(t,m),m},sv=t=>Xs(Det(t)),iv=t=>Xs(zet(t)),knt=(t,e)=>{switch(t._tag){case"Refinement":if(e){const n=$n(t.from,!0);return(s,a)=>{a=a??tv;const c=a?.errors==="all",l=Pa(kU(n(s,a),d=>{const m=new ev(t,s,"From",d);return c&&qet(t)&&IU(d)?Ke(t.filter(s,a,t),{onNone:()=>Ot(m),onSome:p=>Ot(new Ge(t,s,[m,new ev(t,s,"Predicate",p)]))}):Ot(m)}),d=>Ke(t.filter(d,a,t),{onNone:()=>Jt(d),onSome:m=>Ot(new ev(t,s,"Predicate",m))}));return Yh(l,t,s,a)}}else{const n=$n(Qe(t),!0),s=$n(CU(t.from),!1);return(a,c)=>Yh(Pa(n(a,c),l=>s(l,c)),t,a,c)}case"Transformation":{const n=Cnt(t.transformation,e),s=e?$n(t.from,!0):$n(t.to,!1),a=e?$n(t.to,!0):$n(t.from,!1);return(c,l)=>Yh(Pa(rv(s(c,l),d=>new nv(t,c,e?"Encoded":"Type",d)),d=>Pa(rv(n(d,l??tv,t,c),m=>new nv(t,c,"Transformation",m)),m=>rv(a(m,l),p=>new nv(t,c,e?"Type":"Encoded",p)))),t,c,l)}case"Declaration":{const n=e?t.decodeUnknown(...t.typeParameters):t.encodeUnknown(...t.typeParameters);return(s,a)=>Yh(n(s,a??tv,t),t,s,a)}case"Literal":return Lr(t,n=>n===t.literal);case"UniqueSymbol":return Lr(t,n=>n===t.symbol);case"UndefinedKeyword":return Lr(t,$5);case"NeverKeyword":return Lr(t,w5);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return Jt;case"StringKeyword":return Lr(t,hs);case"NumberKeyword":return Lr(t,Zi);case"BooleanKeyword":return Lr(t,pd);case"BigIntKeyword":return Lr(t,wb);case"SymbolKeyword":return Lr(t,Iv);case"ObjectKeyword":return Lr(t,ro);case"Enums":return Lr(t,n=>t.enums.some(([s,a])=>a===n));case"TemplateLiteral":{const n=pnt(t);return Lr(t,s=>hs(s)&&n.test(s))}case"TupleType":{const n=t.elements.map(p=>$n(p.type,e)),s=t.rest.map(p=>$n(p.type,e));let a=t.elements.filter(p=>!p.isOptional);t.rest.length>0&&(a=a.concat(t.rest.slice(1)));const c=a.length,l=t.elements.length>0?t.elements.map((p,y)=>y).join(" | "):"never",d=sv(t),m=iv(t);return(p,y)=>{if(!Z8(p))return Ot(new Ua(t,p));const b=y?.errors==="all",S=[];let v=0;const E=[],N=p.length;for(let A=N;A<=c-1;A++){const P=new Jn(A,p,new Nh(a[A-N]));if(b){S.push([v++,P]);continue}else return Ot(new Ge(t,p,P,E))}if(t.rest.length===0)for(let A=t.elements.length;A<=N-1;A++){const P=new Jn(A,p,new dN(p[A],`is unexpected, expected: ${l}`));if(b){S.push([v++,P]);continue}else return Ot(new Ge(t,p,P,E))}let C=0,x;for(;C<n.length;C++)if(N<C+1){if(t.elements[C].isOptional)continue}else{const A=n[C],P=A(p[C],y);if(_r(P)){if(Fn(P)){const k=new Jn(C,p,P.left);if(b){S.push([v++,k]);continue}else return Ot(new Ge(t,p,k,_s(E)))}E.push([v++,P.right])}else{const k=v++,U=C;x||(x=[]),x.push(({es:K,output:B})=>Rt(Ru(P),et=>{if(Fn(et)){const tt=new Jn(U,p,et.left);return b?(K.push([k,tt]),se):Ot(new Ge(t,p,tt,_s(B)))}return B.push([k,et.right]),se}))}}if(gn(s)){const[A,...P]=s;for(;C<N-P.length;C++){const k=A(p[C],y);if(_r(k))if(Fn(k)){const U=new Jn(C,p,k.left);if(b){S.push([v++,U]);continue}else return Ot(new Ge(t,p,U,_s(E)))}else E.push([v++,k.right]);else{const U=v++,K=C;x||(x=[]),x.push(({es:B,output:et})=>Rt(Ru(k),tt=>{if(Fn(tt)){const Z=new Jn(K,p,tt.left);return b?(B.push([U,Z]),se):Ot(new Ge(t,p,Z,_s(et)))}else return et.push([U,tt.right]),se}))}}for(let k=0;k<P.length;k++)if(C+=k,!(N<C+1)){const U=P[k](p[C],y);if(_r(U)){if(Fn(U)){const K=new Jn(C,p,U.left);if(b){S.push([v++,K]);continue}else return Ot(new Ge(t,p,K,_s(E)))}E.push([v++,U.right])}else{const K=v++,B=C;x||(x=[]),x.push(({es:et,output:tt})=>Rt(Ru(U),Z=>{if(Fn(Z)){const rt=new Jn(B,p,Z.left);return b?(et.push([K,rt]),se):Ot(new Ge(t,p,rt,_s(tt)))}return tt.push([K,Z.right]),se}))}}}const q=({es:A,output:P})=>Ag(A)?Ot(new Ge(t,p,_s(A),_s(P))):Jt(_s(P));if(x&&x.length>0){const A=x;return We(()=>{const P={es:Kh(S),output:Kh(E)};return Rt(Yi(A,k=>k(P),{concurrency:d,batching:m,discard:!0}),()=>q(P))})}return q({output:E,es:S})}}case"TypeLiteral":{if(t.propertySignatures.length===0&&t.indexSignatures.length===0)return Lr(t,E5);const n=[],s={},a=[];for(const y of t.propertySignatures)n.push([$n(y.type,e),y]),s[y.name]=null,a.push(y.name);const c=t.indexSignatures.map(y=>[$n(y.parameter,e),$n(y.type,e),y.parameter]),l=Es.make(t.indexSignatures.map(y=>y.parameter).concat(a.map(y=>Iv(y)?new Het(y):new x$(y)))),d=$n(l,e),m=sv(t),p=iv(t);return(y,b)=>{if(!O5(y))return Ot(new Ua(t,y));const S=b?.errors==="all",v=[];let E=0;const N=b?.onExcessProperty==="error",C=b?.onExcessProperty==="preserve",x={};let q;if(N||C){q=Ji(y);for(const U of q){const K=d(U,b);if(_r(K)&&Fn(K))if(N){const B=new Jn(U,y,new dN(y[U],`is unexpected, expected: ${String(l)}`));if(S){v.push([E++,B]);continue}else return Ot(new Ge(t,y,B,x))}else x[U]=y[U]}}let A;const P=b?.exact===!0;for(let U=0;U<n.length;U++){const K=n[U][1],B=K.name,et=Object.prototype.hasOwnProperty.call(y,B);if(!et){if(K.isOptional)continue;if(P){const rt=new Jn(B,y,new Nh(K));if(S){v.push([E++,rt]);continue}else return Ot(new Ge(t,y,rt,x))}}const tt=n[U][0],Z=tt(y[B],b);if(_r(Z)){if(Fn(Z)){const rt=new Jn(B,y,et?Z.left:new Nh(K));if(S){v.push([E++,rt]);continue}else return Ot(new Ge(t,y,rt,x))}x[B]=Z.right}else{const rt=E++,vt=B;A||(A=[]),A.push(({es:ut,output:Et})=>Rt(Ru(Z),z=>{if(Fn(z)){const G=new Jn(vt,y,et?z.left:new Nh(K));return S?(ut.push([rt,G]),se):Ot(new Ge(t,y,G,Et))}return Et[vt]=z.right,se}))}}for(let U=0;U<c.length;U++){const K=c[U],B=K[0],et=K[1],tt=Vz(y,K[2]);for(const Z of tt){const rt=B(Z,b);if(_r(rt)&&ri(rt)){const vt=et(y[Z],b);if(_r(vt))if(Fn(vt)){const ut=new Jn(Z,y,vt.left);if(S){v.push([E++,ut]);continue}else return Ot(new Ge(t,y,ut,x))}else Object.prototype.hasOwnProperty.call(s,Z)||(x[Z]=vt.right);else{const ut=E++,Et=Z;A||(A=[]),A.push(({es:z,output:G})=>Rt(Ru(vt),st=>{if(Fn(st)){const Nt=new Jn(Et,y,st.left);return S?(z.push([ut,Nt]),se):Ot(new Ge(t,y,Nt,G))}else return Object.prototype.hasOwnProperty.call(s,Z)||(G[Z]=st.right),se}))}}}}const k=({es:U,output:K})=>{if(Ag(U))return Ot(new Ge(t,y,_s(U),K));if(b?.propertyOrder==="original"){const B=q||Ji(y);for(const tt of a)B.indexOf(tt)===-1&&B.push(tt);const et={};for(const tt of B)Object.prototype.hasOwnProperty.call(K,tt)&&(et[tt]=K[tt]);return Jt(et)}return Jt(K)};if(A&&A.length>0){const U=A;return We(()=>{const K={es:Kh(v),output:Object.assign({},x)};return Rt(Yi(U,B=>B(K),{concurrency:m,batching:p,discard:!0}),()=>k(K))})}return k({es:v,output:x})}}case"Union":{const n=Mnt(t.types,e),s=Ji(n.keys),a=s.length,c=t.types.length,l=new Map;for(let p=0;p<c;p++)l.set(t.types[p],$n(t.types[p],e));const d=sv(t)??1,m=iv(t);return(p,y)=>{const b=[];let S=0,v=[];if(a>0)if(Qw(p))for(let C=0;C<a;C++){const x=s[C],q=n.keys[x].buckets;if(Object.prototype.hasOwnProperty.call(p,x)){const A=String(p[x]);if(Object.prototype.hasOwnProperty.call(q,A))v=v.concat(q[A]);else{const{candidates:P,literals:k}=n.keys[x],U=Es.make(k),K=P.length===c?new Ga([new zn(x,U,!1,!0)],[]):Es.make(P);b.push([S++,new Ge(K,p,new Jn(x,p,new Ua(U,p[x])))])}}else{const{candidates:A,literals:P}=n.keys[x],k=new zn(x,Es.make(P),!1,!0),U=A.length===c?new Ga([k],[]):Es.make(A);b.push([S++,new Ge(U,p,new Jn(x,p,new Nh(k)))])}}else{const C=n.candidates.length===c?t:Es.make(n.candidates);b.push([S++,new Ua(C,p)])}n.otherwise.length>0&&(v=v.concat(n.otherwise));let E;for(let C=0;C<v.length;C++){const x=v[C],q=l.get(x)(p,y);if(_r(q)&&(!E||E.length===0)){if(ri(q))return q;b.push([S++,q.left])}else{const A=S++;E||(E=[]),E.push(P=>We(()=>"finalResult"in P?se:Rt(Ru(q),k=>(ri(k)?P.finalResult=k:P.es.push([A,k.left]),se))))}}const N=C=>Ag(C)?C.length===1&&C[0][1]._tag==="Type"?Ot(C[0][1]):Ot(new Ge(t,p,_s(C))):Ot(new Ua(t,p));if(E&&E.length>0){const C=E;return We(()=>{const x={es:Kh(b)};return Rt(Yi(C,q=>q(x),{concurrency:d,batching:m,discard:!0}),()=>"finalResult"in x?x.finalResult:N(x.es))})}return N(b)}}case"Suspend":{const n=Yz(()=>$n(kl(t.f(),t.annotations),e));return(s,a)=>n()(s,a)}}},Lr=(t,e)=>n=>e(n)?Jt(n):Ot(new Ua(t,n)),Vh=(t,e)=>{switch(t._tag){case"Declaration":{const n=mU(t);if(ze(n))return Vh(n.value,e);break}case"TypeLiteral":{const n=[];for(let s=0;s<t.propertySignatures.length;s++){const a=t.propertySignatures[s],c=e?z$(a.type):Qe(a.type);ad(c)&&!a.isOptional&&n.push([a.name,c])}return n}case"TupleType":{const n=[];for(let s=0;s<t.elements.length;s++){const a=t.elements[s],c=e?z$(a.type):Qe(a.type);ad(c)&&!a.isOptional&&n.push([s,c])}return n}case"Refinement":return Vh(t.from,e);case"Suspend":return Vh(t.f(),e);case"Transformation":return Vh(e?t.from:t.to,e)}return[]},Mnt=(t,e)=>{const n={},s=[],a=[];for(let c=0;c<t.length;c++){const l=t[c],d=Vh(l,e);if(d.length>0){a.push(l);for(let m=0;m<d.length;m++){const[p,y]=d[m],b=String(y.literal);n[p]=n[p]||{buckets:{},literals:[],candidates:[]};const S=n[p].buckets;if(Object.prototype.hasOwnProperty.call(S,b)){if(m<d.length-1)continue;S[b].push(l),n[p].literals.push(y),n[p].candidates.push(l)}else{S[b]=[l],n[p].literals.push(y),n[p].candidates.push(l);break}}}else s.push(l)}return{keys:n,otherwise:s,candidates:a}},CU=t=>el(t)?CU(t.from):t,Yh=(t,e,n,s)=>{if(s?.isEffectAllowed===!0||_r(t))return t;const a=new sT,c=Bz(t,{scheduler:a});a.flush();const l=c.unsafePoll();if(l){if(vQ(l))return Jt(l.value);const d=l.cause;return QZ(d)?Ot(d.error):Ot(new mN(e,n,nW(d)))}return Ot(new mN(e,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))},Ant=([t],[e])=>t>e?1:t<e?-1:0;function _s(t){return t.sort(Ant).map(e=>e[1])}const Cnt=(t,e)=>{switch(t._tag){case"FinalTransformation":return e?t.decode:t.encode;case"ComposeTransformation":return Jt;case"TypeLiteralTransformation":return n=>{let s=Jt(n);for(const a of t.propertySignatureTransformations){const[c,l]=e?[a.from,a.to]:[a.to,a.from],d=e?a.decode:a.encode;s=Pr(s,p=>{const y=d(Object.prototype.hasOwnProperty.call(p,c)?ht(p[c]):at());return delete p[c],ze(y)&&(p[l]=y.value),p})}return s}}},nr=(t,e=[])=>({value:t,forest:e}),qg={formatIssue:t=>Pr(zu(t),Nnt),formatIssueSync:t=>{const e=qg.formatIssue(t);return _r(e)?N8(e):Rl(e)},formatError:t=>qg.formatIssue(t.issue),formatErrorSync:t=>qg.formatIssueSync(t.issue)},Nnt=t=>t.value+NU(`
`,t.forest),NU=(t,e)=>{let n="";const s=e.length;let a;for(let c=0;c<s;c++){a=e[c];const l=c===s-1;n+=t+(l?"":"")+" "+a.value,n+=NU(t+(s>1&&!l?"  ":"   "),a.forest)}return n},xnt=t=>{switch(t){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},Int=t=>{switch(t){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},xU=t=>"ast"in t?ht(t.ast):at(),U$=Jt(void 0),Fnt=t=>xU(t).pipe(rf(Iet),Ke({onNone:()=>U$,onSome:e=>{const n=e(t);return hs(n)?Jt({message:n,override:!1}):mf(n)?me(n,s=>({message:s,override:!1})):hs(n.message)?Jt({message:n.message,override:n.override}):me(n.message,s=>({message:s,override:n.override}))}})),xT=t=>e=>e._tag===t,IU=xT("Composite"),gN=xT("Refinement"),yN=xT("Transformation"),od=t=>Pa(Fnt(t),e=>e!==void 0?!e.override&&(IU(t)||gN(t)&&t.kind==="From"||yN(t)&&t.kind!=="Transformation")?yN(t)||gN(t)?od(t.issue):U$:Jt(e.message):U$),FU=t=>xU(t).pipe(rf(Uet),L8(e=>e(t)),Xs);function Dnt(t){return dU(t).pipe(Ha(()=>fU(t)),Ha(()=>hU(t)),Ha(()=>__(t)),Ee(()=>`{ ${t.from} | filter }`))}function znt(t){return t.message!==void 0?t.message:`Expected ${el(t.ast)?Dnt(t.ast):String(t.ast)}, actual ${Ns(t.actual)}`}const Unt=t=>Pr(od(t),e=>e??FU(t)??znt(t)),gg=t=>FU(t)??String(t.ast),Lnt=t=>t.message??"is forbidden",jnt=t=>t.message??"is unexpected",Pnt=t=>{const e=Fet(t.ast);if(ze(e)){const n=e.value();return hs(n)?Jt(n):n}return Jt(t.message??"is missing")},zu=t=>{switch(t._tag){case"Type":return Pr(Unt(t),nr);case"Forbidden":return Jt(nr(gg(t),[nr(Lnt(t))]));case"Unexpected":return Jt(nr(jnt(t)));case"Missing":return Pr(Pnt(t),nr);case"Transformation":return Pa(od(t),e=>e!==void 0?Jt(nr(e)):Pr(zu(t.issue),n=>nr(gg(t),[nr(xnt(t.kind),[n])])));case"Refinement":return Pa(od(t),e=>e!==void 0?Jt(nr(e)):Pr(zu(t.issue),n=>nr(gg(t),[nr(Int(t.kind),[n])])));case"Pointer":return Pr(zu(t.issue),e=>nr(Qz(t.path),[e]));case"Composite":return Pa(od(t),e=>{if(e!==void 0)return Jt(nr(e));const n=gg(t);return Jz(t.issues)?Pr(Yi(t.issues,zu),s=>nr(n,s)):Pr(zu(t.issues),s=>nr(n,[s]))})}},qnt=$(t=>ro(t[0]),(t,...e)=>{const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}),Bnt=$(t=>ro(t[0]),(t,...e)=>{const n={...t};for(const s of e)delete n[s];return n}),Ml=Symbol.for("effect/Schema");function Kr(t){return class{[Ml]=L$;static ast=t;static annotations(n){return Kr(gf(this.ast,n))}static pipe(){return lt(this,arguments)}static toString(){return String(t)}static Type;static Encoded;static Context;static[Ml]=L$}}const L$={_A:t=>t,_I:t=>t,_R:t=>t},bN={schemaId:Aet,message:Wz,missingMessage:RT,identifier:kT,title:ao,description:Sm,examples:tU,default:eU,documentation:Cet,jsonSchema:nU,arbitrary:rU,pretty:sU,equivalence:iU,concurrency:aU,batching:oU,parseIssueTitle:cU,parseOptions:uU,decodingFallback:lU},$m=t=>{if(!t)return{};const e={...t};for(const n in bN)if(n in t){const s=bN[n];e[s]=t[n],delete e[n]}return e},gf=(t,e)=>kl(t,$m(e)),Knt=t=>Kr(z$(t.ast)),_N=t=>Kr(Qe(t.ast)),Al=t=>_t(t,Ml)&&ro(t[Ml]);function Hnt(t){return CT(t)?Es.make(ant(t,e=>new x$(e))):new x$(t[0])}function DU(t,e=Hnt(t)){return class extends Kr(e){static annotations(s){return DU(this.literals,gf(this.ast,s))}static literals=[...t]}}function Vnt(...t){return gn(t)?DU(t):zU}const Ynt=(t,e,n)=>IT(t,new S_(t.map(s=>s.ast),(...s)=>e.decode(...s.map(Kr)),(...s)=>e.encode(...s.map(Kr)),$m(n))),Gnt=(t,e)=>{const n=()=>(a,c,l)=>t(a)?Dd(a):RU(new Ua(l,a)),s=n;return IT([],new S_([],n,s,$m(e)))};function IT(t,e){return class extends Kr(e){static annotations(s){return IT(this.typeParameters,gf(this.ast,s))}static typeParameters=[...t]}}const Jnt=function(){if(Array.isArray(arguments[0])){const n=arguments[0],s=arguments[1],a=arguments[2];return Ynt(n,s,a)}const t=arguments[0],e=arguments[1];return Gnt(t,e)};let zU=class extends Kr(pU){};const Qnt=t=>Es.make(t.map(e=>e.ast));function UU(t,e=Qnt(t)){return class extends Kr(e){static annotations(s){return UU(this.members,gf(this.ast,s))}static members=[...t]}}function Xnt(...t){return CT(t)?UU(t):gn(t)?t[0]:zU}const j$=t=>t?'"?:"':'":"';class FT extends vm{isReadonly;defaultValue;_tag="PropertySignatureDeclaration";constructor(e,n,s,a,c){super(e,n,a),this.isReadonly=s,this.defaultValue=c}toString(){const e=j$(this.isOptional),n=String(this.type);return`PropertySignature<${e}, ${n}, never, ${e}, ${n}>`}}class LU extends vm{isReadonly;defaultValue;constructor(e,n,s,a,c){super(e,n,a),this.isReadonly=s,this.defaultValue=c}}const Znt=t=>t===void 0?"never":hs(t)?JSON.stringify(t):String(t);let jU=class{from;to;decode;encode;_tag="PropertySignatureTransformation";constructor(e,n,s,a){this.from=e,this.to=n,this.decode=s,this.encode=a}toString(){return`PropertySignature<${j$(this.to.isOptional)}, ${this.to.type}, ${Znt(this.from.fromKey)}, ${j$(this.from.isOptional)}, ${this.from.type}>`}};const PU=(t,e)=>{switch(t._tag){case"PropertySignatureDeclaration":return new FT(t.type,t.isOptional,t.isReadonly,{...t.annotations,...e},t.defaultValue);case"PropertySignatureTransformation":return new jU(t.from,new LU(t.to.type,t.to.isOptional,t.to.isReadonly,{...t.to.annotations,...e},t.to.defaultValue),t.decode,t.encode)}},qU=Symbol.for("effect/PropertySignature"),DT=t=>_t(t,qU);class w_{ast;[Ml];[qU]=null;_TypeToken;_Key;_EncodedToken;_HasDefault;constructor(e){this.ast=e}pipe(){return lt(this,arguments)}annotations(e){return new w_(PU(this.ast,$m(e)))}toString(){return String(this.ast)}}const SN=t=>new w_(t);class zT extends w_{from;constructor(e,n){super(e),this.from=n}annotations(e){return new zT(PU(this.ast,$m(e)),this.from)}}const Wnt=t=>new zT(new FT(t.ast,!1,!0,{},void 0),t),trt=$(2,(t,e)=>{const n=t.ast;switch(n._tag){case"PropertySignatureDeclaration":return SN(new FT(n.type,n.isOptional,n.isReadonly,n.annotations,e));case"PropertySignatureTransformation":return SN(new jU(n.from,new LU(n.to.type,n.to.isOptional,n.to.isReadonly,n.to.annotations,e),n.decode,n.encode))}}),ert=EU([RT]),nrt=(t,e)=>{const n=Ji(t),s=[];if(n.length>0){const c=[],l=[],d=[];for(let m=0;m<n.length;m++){const p=n[m],y=t[p];if(DT(y)){const b=y.ast;switch(b._tag){case"PropertySignatureDeclaration":{const S=b.type,v=b.isOptional,E=b.annotations;c.push(new zn(p,S,v,!0,ert(b))),l.push(new zn(p,Qe(S),v,!0,E)),s.push(new zn(p,S,v,!0,E));break}case"PropertySignatureTransformation":{const S=b.from.fromKey??p;c.push(new zn(S,b.from.type,b.from.isOptional,!0,b.from.annotations)),l.push(new zn(p,b.to.type,b.to.isOptional,!0,b.to.annotations)),d.push(new fnt(S,p,b.decode,b.encode));break}}}else c.push(new zn(p,y.ast,!1,!0)),l.push(new zn(p,Qe(y.ast),!1,!0)),s.push(new zn(p,y.ast,!1,!0))}if(gn(d)){const m=[],p=[];for(const y of e){const{indexSignatures:b,propertySignatures:S}=hN(y.key.ast,y.value.ast);S.forEach(v=>{c.push(v),l.push(new zn(v.name,Qe(v.type),v.isOptional,v.isReadonly,v.annotations))}),b.forEach(v=>{m.push(v),p.push(new v_(v.parameter,Qe(v.type),v.isReadonly))})}return new Bu(new Ga(c,m,{[tl]:"Struct (Encoded side)"}),new Ga(l,p,{[tl]:"Struct (Type side)"}),new D$(d))}}const a=[];for(const c of e){const{indexSignatures:l,propertySignatures:d}=hN(c.key.ast,c.value.ast);d.forEach(m=>s.push(m)),l.forEach(m=>a.push(m))}return new Ga(s,a)},BU=(t,e)=>{const n=Ji(t);for(const s of n){const a=t[s];if(e[s]===void 0&&DT(a)){const c=a.ast,l=c._tag==="PropertySignatureDeclaration"?c.defaultValue:c.to.defaultValue;l!==void 0&&(e[s]=l())}}return e};function KU(t,e,n=nrt(t,e)){return class extends Kr(n){static annotations(a){return KU(this.fields,this.records,gf(this.ast,a))}static fields={...t};static records=[...e];static make=(a,c)=>{const l=BU(t,{...a});return XU(c)?l:AU(this)(l)};static pick(...a){return gc(qnt(t,...a))}static omit(...a){return gc(Bnt(t,...a))}}}function gc(t,...e){return KU(t,e)}const xh=(t,e,n)=>{if(lN(t)&&lN(e)){const s=[...t.propertySignatures];for(const a of e.propertySignatures){const c=a.name,l=s.findIndex(d=>d.name===c);if(l===-1)s.push(a);else{const{isOptional:d,type:m}=s[l];s[l]=new zn(c,Py(m,a.type,n.concat(c)),d,!0)}}return new Ga(s,t.indexSignatures.concat(e.indexSignatures))}throw new Error(Xz(t,e,n))},rrt=gnt([kT]),Ih=(t,e)=>e.map(n=>new SU(n,t.filter,rrt(t))),Py=(t,e,n)=>Es.make(Di([t],[e],n)),ko=t=>NT(t)?t.types:[t],Di=(t,e,n)=>dy(t,s=>dy(e,a=>{switch(a._tag){case"Literal":{if(hs(a.literal)&&I$(s)||Zi(a.literal)&&aN(s)||pd(a.literal)&&cN(s))return[a];break}case"StringKeyword":{if(a===sN){if(I$(s)||ad(s)&&hs(s.literal))return[s];if(el(s))return Ih(s,Di(ko(s.from),[a],n))}else if(s===sN)return[a];break}case"NumberKeyword":{if(a===iN){if(aN(s)||ad(s)&&Zi(s.literal))return[s];if(el(s))return Ih(s,Di(ko(s.from),[a],n))}else if(s===iN)return[a];break}case"BooleanKeyword":{if(a===oN){if(cN(s)||ad(s)&&pd(s.literal))return[s];if(el(s))return Ih(s,Di(ko(s.from),[a],n))}else if(s===oN)return[a];break}case"Union":return Di(ko(s),a.types,n);case"Suspend":return[new jy(()=>Py(s,a.f(),n))];case"Refinement":return Ih(a,Di(ko(s),ko(a.from),n));case"TypeLiteral":{switch(s._tag){case"Union":return Di(s.types,[a],n);case"Suspend":return[new jy(()=>Py(s.f(),a,n))];case"Refinement":return Ih(s,Di(ko(s.from),[a],n));case"TypeLiteral":return[xh(s,a,n)];case"Transformation":{const c=s.transformation,l=xh(s.from,a,n),d=xh(s.to,Qe(a),n);switch(c._tag){case"TypeLiteralTransformation":return[new Bu(l,d,new D$(c.propertySignatureTransformations))];case"ComposeTransformation":return[new Bu(l,d,lnt)];case"FinalTransformation":return[new Bu(l,d,new vU((m,p,y,b)=>Pr(c.decode(m,p,y,b),S=>({...m,...S})),(m,p,y,b)=>Pr(c.encode(m,p,y,b),S=>({...m,...S}))))]}}}break}case"Transformation":{if(ont(s)){if(fN(a.transformation)&&fN(s.transformation))return[new Bu(xh(s.from,a.from,n),xh(s.to,a.to,n),new D$(a.transformation.propertySignatureTransformations.concat(s.transformation.propertySignatureTransformations)))]}else return Di([a],[s],n);break}}throw new Error(Xz(s,a,n))})),HU=$(2,(t,e)=>Kr(Py(t.ast,e.ast,[]))),srt=Symbol.for("effect/SchemaId/Refine");function VU(t,e,n){return class extends Kr(n){static annotations(a){return VU(this.from,this.to,gf(this.ast,a))}static from=t;static to=e}}const P$=$(t=>Al(t[0])&&Al(t[1]),(t,e,n)=>VU(t,e,new Bu(t.ast,e.ast,new vU(n.decode,n.encode)))),irt=$(t=>Al(t[0])&&Al(t[1]),(t,e,n)=>P$(t,e,{strict:!0,decode:(s,a,c,l)=>Dd(n.decode(s,l)),encode:(s,a,c,l)=>Dd(n.encode(s,l))})),art=t=>Al(t)||DT(t),YU=t=>Ji(t).every(e=>art(t[e])),UT=t=>"fields"in t?t.fields:UT(t[srt]),GU=t=>YU(t)?gc(t):Al(t)?t:gc(UT(t)),JU=t=>YU(t)?t:UT(t),ort=t=>trt(Wnt(Vnt(t)),()=>t),QU=t=>(e,n,s)=>{const a=JU(n),c=GU(n),l={_tag:ort(e)},d=Bg(l,a);return class extends Kg({kind:"TaggedClass",identifier:e,schema:HU(c,gc(l)),fields:d,Base:Stt,annotations:s}){static _tag=e}},Bg=(t,e)=>{const n={...t};for(const s of Ji(e)){if(s in t)throw new Error(Zz(s));n[s]=e[s]}return n};function XU(t){return pd(t)?t:t?.disableValidation??!1}const vN=zt("effect/Schema/astCache",()=>new WeakMap),crt=t=>t===void 0?[]:Array.isArray(t)?t:[t],Kg=({Base:t,annotations:e,disableToString:n,fields:s,identifier:a,kind:c,schema:l})=>{const d=Symbol.for(`effect/Schema/${c}/${a}`),[m,p,y]=crt(e),b=_N(l),S=b.annotations({identifier:a,...m}),v=b.annotations({[tl]:`${a} (Type side)`,...m}),E=l.annotations({[tl]:`${a} (Constructor)`,...m}),N=l.annotations({[tl]:`${a} (Encoded side)`,...y}),C=l.annotations({[MT]:a,...y,...m,...p}),x=A=>_t(A,d)&&Tnt(v)(A),q=class extends t{constructor(A={},P=!1){A={...A},delete A._tag,A=BU(s,A),XU(P)||(A=AU(E)(A)),super(A,!0)}static[Ml]=L$;static get ast(){let A=vN.get(this);if(A)return A;const P=Jnt([l],{decode:()=>(k,U,K)=>k instanceof this||x(k)?Dd(k):RU(new Ua(K,k)),encode:()=>(k,U)=>k instanceof this?Dd(k):Pr(Ent(v)(k,U),K=>new this(K,!0))},{identifier:a,pretty:k=>U=>`${a}(${k(U)})`,arbitrary:k=>U=>k(U).map(K=>new this(K)),equivalence:At,[Ly]:S.ast,...m});return A=irt(N,P,{strict:!0,decode:k=>new this(k,!0),encode:At}).annotations({[Ly]:C.ast,...p}).ast,vN.set(this,A),A}static pipe(){return lt(this,arguments)}static annotations(A){return Kr(this.ast).annotations(A)}static toString(){return`(${String(N)} <-> ${a})`}static make(...A){return new this(...A)}static fields={...s};static identifier=a;static extend(A){return(P,k)=>{const U=JU(P),K=GU(P),B=Bg(s,U);return Kg({kind:c,identifier:A,schema:HU(l,K),fields:B,Base:this,annotations:k})}}static transformOrFail(A){return(P,k,U)=>{const K=Bg(s,P);return Kg({kind:c,identifier:A,schema:P$(l,_N(gc(K)),k),fields:K,Base:this,annotations:U})}}static transformOrFailFrom(A){return(P,k,U)=>{const K=Bg(s,P);return Kg({kind:c,identifier:A,schema:P$(Knt(l),gc(K),k),fields:K,Base:this,annotations:U})}}get[d](){return d}};return n!==!0&&Object.defineProperty(q.prototype,"toString",{value(){return`${a}({ ${Ji(s).map(A=>`${Gz(A)}: ${Ns(this[A])}`).join(", ")} })`},configurable:!0,writable:!0}),q},urt=aa,lrt="effect/QueueEnqueue",ZU=Symbol.for(lrt),frt="effect/QueueDequeue",LT=Symbol.for(frt),hrt="effect/QueueStrategy",WU=Symbol.for(hrt),drt="effect/BackingQueue",mrt=Symbol.for(drt),tL={_A:t=>t},prt={_A:t=>t},eL={_In:t=>t},jT={_Out:t=>t};class grt extends xc{queue;takers;shutdownHook;shutdownFlag;strategy;[ZU]=eL;[LT]=jT;constructor(e,n,s,a,c){super(),this.queue=e,this.takers=n,this.shutdownHook=s,this.shutdownFlag=a,this.strategy=c}pipe(){return lt(this,arguments)}commit(){return this.take}capacity(){return this.queue.capacity()}get size(){return bt(()=>Td(this.unsafeSize(),()=>Tn))}unsafeSize(){return Qt(this.shutdownFlag)?at():ht(this.queue.length()-ST(this.takers)+this.strategy.surplusSize())}get isEmpty(){return kt(this.size,e=>e<=0)}get isFull(){return kt(this.size,e=>e>=this.capacity())}get shutdown(){return Cc(ee(e=>(w(this.shutdownFlag,Mc(!0)),w(Hi(nl(this.takers),n=>KE(n,e.id()),!1,!1),De(this.strategy.shutdown),Jb(fm(this.shutdownHook,void 0)),ps))))}get isShutdown(){return W(()=>Qt(this.shutdownFlag))}get awaitShutdown(){return fi(this.shutdownHook)}isActive(){return!Qt(this.shutdownFlag)}unsafeOffer(e){if(Qt(this.shutdownFlag))return!1;let n;if(this.queue.length()===0){const a=w(this.takers,Vi(Be));a!==Be?(Yo(a,e),n=!0):n=!1}else n=!1;if(n)return!0;const s=this.queue.offer(e);return Ku(this.strategy,this.queue,this.takers),s}offer(e){return bt(()=>{if(Qt(this.shutdownFlag))return Tn;let n;if(this.queue.length()===0){const a=w(this.takers,Vi(Be));a!==Be?(Yo(a,e),n=!0):n=!1}else n=!1;if(n)return nt(!0);const s=this.queue.offer(e);return Ku(this.strategy,this.queue,this.takers),s?nt(!0):this.strategy.handleSurplus([e],this.queue,this.takers,this.shutdownFlag)})}offerAll(e){return bt(()=>{if(Qt(this.shutdownFlag))return Tn;const n=le(e),s=this.queue.length()===0?le(Nrt(this.takers,n.length)):ec,[a,c]=w(n,s3(s.length));for(let d=0;d<s.length;d++){const m=s[d],p=a[d];Yo(m,p)}if(c.length===0)return nt(!0);const l=this.queue.offerAll(c);return Ku(this.strategy,this.queue,this.takers),xb(l)?nt(!0):this.strategy.handleSurplus(l,this.queue,this.takers,this.shutdownFlag)})}get take(){return ee(e=>{if(Qt(this.shutdownFlag))return Tn;const n=this.queue.poll(Be);if(n!==Be)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),nt(n);{const s=um(e.id());return w(bt(()=>(w(this.takers,Ol(s)),Ku(this.strategy,this.queue,this.takers),Qt(this.shutdownFlag)?Tn:fi(s))),om(()=>W(()=>xrt(this.takers,s))))}})}get takeAll(){return bt(()=>Qt(this.shutdownFlag)?Tn:W(()=>{const e=this.queue.pollUpTo(Number.POSITIVE_INFINITY);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),nc(e)}))}takeUpTo(e){return bt(()=>Qt(this.shutdownFlag)?Tn:W(()=>{const n=this.queue.pollUpTo(e);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),nc(n)}))}takeBetween(e,n){return bt(()=>nL(this,e,n,ke()))}}const nL=(t,e,n,s)=>n<e?nt(s):w(Ort(t,n),X(a=>{const c=e-a.length;return c===1?w(q$(t),kt(l=>w(s,_e(a),yd(l)))):c>1?w(q$(t),X(l=>nL(t,c-1,n-a.length-1,w(s,_e(a),yd(l))))):nt(w(s,_e(a)))})),yrt=t=>w(W(()=>net(t)),X(e=>rL(sL(e),krt()))),brt=()=>w(W(()=>g_()),X(t=>rL(sL(t),Mrt()))),_rt=(t,e,n,s,a)=>new grt(t,e,n,s,a),rL=(t,e)=>w(lm(),kt(n=>_rt(t,g_(),n,kc(!1),e)));class Srt{mutable;[mrt]=prt;constructor(e){this.mutable=e}poll(e){return Vi(this.mutable,e)}pollUpTo(e){return y_(this.mutable,e)}offerAll(e){return vT(this.mutable,e)}offer(e){return Ol(this.mutable,e)}capacity(){return ret(this.mutable)}length(){return ST(this.mutable)}}const sL=t=>new Srt(t),vrt=t=>t.size,$rt=t=>t.isShutdown,wrt=t=>t.shutdown,Ert=$(2,(t,e)=>t.offer(e)),Trt=$(2,(t,e)=>t.unsafeOffer(e)),q$=t=>t.take,Ort=$(2,(t,e)=>t.takeUpTo(e)),Rrt=$(3,(t,e,n)=>t.takeBetween(e,n)),krt=()=>new Art,Mrt=()=>new Crt;class Art{[WU]=tL;putters=g_();surplusSize(){return ST(this.putters)}onCompleteTakersWithEmptyQueue(e){for(;!Ho(this.putters)&&!Ho(e);){const n=Vi(e,void 0),s=Vi(this.putters,void 0);s[2]&&Yo(s[1],!0),Yo(n,s[0])}}get shutdown(){return w(Kb,X(e=>w(W(()=>nl(this.putters)),X(n=>Hi(n,([s,a,c])=>c?w(KE(a,e),ps):Se,!1,!1)))))}handleSurplus(e,n,s,a){return ee(c=>{const l=um(c.id());return w(bt(()=>(this.unsafeOffer(e,l),this.unsafeOnQueueEmptySpace(n,s),Ku(this,n,s),Qt(a)?Tn:fi(l))),om(()=>W(()=>this.unsafeRemove(l))))})}unsafeOnQueueEmptySpace(e,n){let s=!0;for(;s&&(e.capacity()===Number.POSITIVE_INFINITY||e.length()<e.capacity());){const a=w(this.putters,Vi(Be));if(a===Be)s=!1;else{const c=e.offer(a[0]);c&&a[2]?Yo(a[1],!0):c||qy(this.putters,w(nl(this.putters),Kn(a))),Ku(this,e,n)}}}unsafeOffer(e,n){const s=le(e);for(let a=0;a<s.length;a++){const c=s[a];a===s.length-1?w(this.putters,Ol([c,n,!0])):w(this.putters,Ol([c,n,!1]))}}unsafeRemove(e){qy(this.putters,w(nl(this.putters),Nb(([,n])=>n!==e)))}}let Crt=class{[WU]=tL;surplusSize(){return 0}get shutdown(){return Se}onCompleteTakersWithEmptyQueue(){}handleSurplus(e,n,s,a){return nt(!1)}unsafeOnQueueEmptySpace(e,n){}};const Yo=(t,e)=>r_(t,nt(e)),qy=(t,e)=>w(t,vT(e)),nl=t=>w(t,y_(Number.POSITIVE_INFINITY)),Nrt=(t,e)=>w(t,y_(e)),xrt=(t,e)=>{qy(t,w(nl(t),Nb(n=>e!==n)))},Ku=(t,e,n)=>{let s=!0;for(;s&&e.length()!==0;){const a=w(n,Vi(Be));if(a!==Be){const c=e.poll(Be);c!==Be?(Yo(a,c),t.unsafeOnQueueEmptySpace(e,n)):qy(n,w(nl(n),Kn(a))),s=!0}else s=!1}s&&e.length()===0&&!Ho(n)&&t.onCompleteTakersWithEmptyQueue(n)},Zs=Symbol.for("effect/PubSub/AbsentValue"),iL=(t,e)=>n=>{n.has(t)||n.set(t,new Set),n.get(t).add(e)},Irt=(t,e)=>n=>{if(!n.has(t))return;const s=n.get(t);s.delete(e),s.size===0&&n.delete(t)},Frt=t=>bt(()=>{const e=Lrt(t);return Vrt(e,new Wrt)}),Drt=t=>t.shutdown,zrt=$(2,(t,e)=>t.publish(e)),Urt=t=>t.subscribe,Lrt=t=>new qrt(t?.replay?new nst(t.replay):void 0),jrt=(t,e,n)=>kt(lm(),s=>Prt(t,e,t.subscribe(),g_(),s,kc(!1),n)),Prt=(t,e,n,s,a,c,l)=>new Krt(t,e,n,s,a,c,l,t.replayWindow());class qrt{replayBuffer;publisherHead={value:Zs,subscribers:0,next:null};publisherTail=this.publisherHead;publisherIndex=0;subscribersIndex=0;capacity=Number.MAX_SAFE_INTEGER;constructor(e){this.replayBuffer=e}replayWindow(){return this.replayBuffer?new rst(this.replayBuffer):sst}isEmpty(){return this.publisherHead===this.publisherTail}isFull(){return!1}size(){return this.publisherIndex-this.subscribersIndex}publish(e){const n=this.publisherTail.subscribers;return n!==0&&(this.publisherTail.next={value:e,subscribers:n,next:null},this.publisherTail=this.publisherTail.next,this.publisherIndex+=1),this.replayBuffer&&this.replayBuffer.offer(e),!0}publishAll(e){if(this.publisherTail.subscribers!==0)for(const n of e)this.publish(n);else this.replayBuffer&&this.replayBuffer.offerAll(e);return ke()}slide(){this.publisherHead!==this.publisherTail&&(this.publisherHead=this.publisherHead.next,this.publisherHead.value=Zs,this.subscribersIndex+=1),this.replayBuffer&&this.replayBuffer.slide()}subscribe(){return this.publisherTail.subscribers+=1,new Brt(this,this.publisherTail,this.publisherIndex,!1)}}class Brt{self;subscriberHead;subscriberIndex;unsubscribed;constructor(e,n,s,a){this.self=e,this.subscriberHead=n,this.subscriberIndex=s,this.unsubscribed=a}isEmpty(){if(this.unsubscribed)return!0;let e=!0,n=!0;for(;n;)this.subscriberHead===this.self.publisherTail?n=!1:this.subscriberHead.next.value!==Zs?(e=!1,n=!1):(this.subscriberHead=this.subscriberHead.next,this.subscriberIndex+=1);return e}size(){return this.unsubscribed?0:this.self.publisherIndex-Math.max(this.subscriberIndex,this.self.subscribersIndex)}poll(e){if(this.unsubscribed)return e;let n=!0,s=e;for(;n;)if(this.subscriberHead===this.self.publisherTail)n=!1;else{const a=this.subscriberHead.next.value;a!==Zs&&(s=a,this.subscriberHead.subscribers-=1,this.subscriberHead.subscribers===0&&(this.self.publisherHead=this.self.publisherHead.next,this.self.publisherHead.value=Zs,this.self.subscribersIndex+=1),n=!1),this.subscriberHead=this.subscriberHead.next,this.subscriberIndex+=1}return s}pollUpTo(e){const n=[],s=Zs;let a=0;for(;a!==e;){const c=this.poll(s);c===s?a=e:(n.push(c),a+=1)}return nc(n)}unsubscribe(){if(!this.unsubscribed)for(this.unsubscribed=!0,this.self.publisherTail.subscribers-=1;this.subscriberHead!==this.self.publisherTail;)this.subscriberHead.next.value!==Zs&&(this.subscriberHead.subscribers-=1,this.subscriberHead.subscribers===0&&(this.self.publisherHead=this.self.publisherHead.next,this.self.publisherHead.value=Zs,this.self.subscribersIndex+=1)),this.subscriberHead=this.subscriberHead.next}}class Krt extends xc{pubsub;subscribers;subscription;pollers;shutdownHook;shutdownFlag;strategy;replayWindow;[LT]=jT;constructor(e,n,s,a,c,l,d,m){super(),this.pubsub=e,this.subscribers=n,this.subscription=s,this.pollers=a,this.shutdownHook=c,this.shutdownFlag=l,this.strategy=d,this.replayWindow=m}commit(){return this.take}pipe(){return lt(this,arguments)}capacity(){return this.pubsub.capacity}isActive(){return!Qt(this.shutdownFlag)}get size(){return bt(()=>Qt(this.shutdownFlag)?Tn:nt(this.subscription.size()+this.replayWindow.remaining))}unsafeSize(){return Qt(this.shutdownFlag)?at():ht(this.subscription.size()+this.replayWindow.remaining)}get isFull(){return bt(()=>Qt(this.shutdownFlag)?Tn:nt(this.subscription.size()===this.capacity()))}get isEmpty(){return kt(this.size,e=>e===0)}get shutdown(){return Cc(ee(e=>(Mc(this.shutdownFlag,!0),w(mT(PT(this.pollers),n=>KE(n,e.id()),!1),De(W(()=>{this.subscribers.delete(this.subscription),this.subscription.unsubscribe(),this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers)})),Jb(fm(this.shutdownHook,void 0)),ps))))}get isShutdown(){return W(()=>Qt(this.shutdownFlag))}get awaitShutdown(){return fi(this.shutdownHook)}get take(){return ee(e=>{if(Qt(this.shutdownFlag))return Tn;if(this.replayWindow.remaining>0){const s=this.replayWindow.take();return nt(s)}const n=Ho(this.pollers)?this.subscription.poll(Be):Be;if(n===Be){const s=um(e.id());return w(bt(()=>(w(this.pollers,Ol(s)),w(this.subscribers,iL(this.subscription,this.pollers)),this.strategy.unsafeCompletePollers(this.pubsub,this.subscribers,this.subscription,this.pollers),Qt(this.shutdownFlag)?Tn:fi(s))),om(()=>W(()=>Zrt(this.pollers,s))))}else return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),nt(n)})}get takeAll(){return bt(()=>{if(Qt(this.shutdownFlag))return Tn;const e=Ho(this.pollers)?Jrt(this.subscription):ke();return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),this.replayWindow.remaining>0?nt(_e(this.replayWindow.takeAll(),e)):nt(e)})}takeUpTo(e){return bt(()=>{if(Qt(this.shutdownFlag))return Tn;let n;if(this.replayWindow.remaining>=e){const a=this.replayWindow.takeN(e);return nt(a)}else this.replayWindow.remaining>0&&(n=this.replayWindow.takeAll(),e=e-n.length);const s=Ho(this.pollers)?Qrt(this.subscription,e):ke();return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),nt(n?_e(n,s):s)})}takeBetween(e,n){return bt(()=>aL(this,e,n,ke()))}}const aL=(t,e,n,s)=>n<e?nt(s):w(t.takeUpTo(n),X(a=>{const c=e-a.length;return c===1?w(t.take,kt(l=>w(s,_e(a),yd(l)))):c>1?w(t.take,X(l=>aL(t,c-1,n-a.length-1,w(s,_e(a),yd(l))))):nt(w(s,_e(a)))}));class Hrt{pubsub;subscribers;scope;shutdownHook;shutdownFlag;strategy;[ZU]=eL;[LT]=jT;constructor(e,n,s,a,c,l){this.pubsub=e,this.subscribers=n,this.scope=s,this.shutdownHook=a,this.shutdownFlag=c,this.strategy=l}capacity(){return this.pubsub.capacity}get size(){return bt(()=>Qt(this.shutdownFlag)?Tn:W(()=>this.pubsub.size()))}unsafeSize(){return Qt(this.shutdownFlag)?at():ht(this.pubsub.size())}get isFull(){return kt(this.size,e=>e===this.capacity())}get isEmpty(){return kt(this.size,e=>e===0)}get awaitShutdown(){return fi(this.shutdownHook)}get isShutdown(){return W(()=>Qt(this.shutdownFlag))}get shutdown(){return Cc(ee(e=>(w(this.shutdownFlag,Mc(!0)),w(this.scope.close(CF(e.id())),De(this.strategy.shutdown),Jb(fm(this.shutdownHook,void 0)),ps))))}publish(e){return bt(()=>Qt(this.shutdownFlag)?Tn:this.pubsub.publish(e)?(this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),nt(!0)):this.strategy.handleSurplus(this.pubsub,this.subscribers,He(e),this.shutdownFlag))}isActive(){return!Qt(this.shutdownFlag)}unsafeOffer(e){return Qt(this.shutdownFlag)?!1:this.pubsub.publish(e)?(this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),!0):!1}publishAll(e){return bt(()=>{if(Qt(this.shutdownFlag))return Tn;const n=Xrt(this.pubsub,e);return this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),xb(n)?nt(!0):this.strategy.handleSurplus(this.pubsub,this.subscribers,n,this.shutdownFlag)})}get subscribe(){const e=Gb(dT([this.scope.fork(hm),jrt(this.pubsub,this.subscribers,this.strategy)]),n=>n[0].addFinalizer(()=>n[1].shutdown));return kt(JD(e,(n,s)=>n[0].close(s)),n=>n[1])}offer(e){return this.publish(e)}offerAll(e){return this.publishAll(e)}pipe(){return lt(this,arguments)}}const Vrt=(t,e)=>X(h_(),n=>kt(lm(),s=>Yrt(t,new Map,n,s,kc(!1),e))),Yrt=(t,e,n,s,a,c)=>new Hrt(t,e,n,s,a,c),Grt=(t,e)=>{r_(t,nt(e))},oL=(t,e)=>w(t,vT(e)),PT=t=>w(t,y_(Number.POSITIVE_INFINITY)),Jrt=t=>t.pollUpTo(Number.POSITIVE_INFINITY),Qrt=(t,e)=>t.pollUpTo(e),Xrt=(t,e)=>t.publishAll(e),Zrt=(t,e)=>{oL(t,w(PT(t),Nb(n=>n!==e)))};class Wrt{get shutdown(){return Se}handleSurplus(e,n,s,a){return nt(!1)}unsafeOnPubSubEmptySpace(e,n){}unsafeCompletePollers(e,n,s,a){return tst(this,e,n,s,a)}unsafeCompleteSubscribers(e,n){return est(this,e,n)}}const tst=(t,e,n,s,a)=>{let c=!0;for(;c&&!s.isEmpty();){const l=w(a,Vi(Be));if(l===Be)w(n,Irt(s,a)),Ho(a)?c=!1:w(n,iL(s,a));else{const d=s.poll(Be);d===Be?oL(a,w(PT(a),Kn(l))):(Grt(l,d),t.unsafeOnPubSubEmptySpace(e,n))}}},est=(t,e,n)=>{for(const[s,a]of n)for(const c of a)t.unsafeCompletePollers(e,n,s,c)};class nst{capacity;constructor(e){this.capacity=e}head={value:Zs,next:null};tail=this.head;size=0;index=0;slide(){this.index++}offer(e){this.tail.value=e,this.tail.next={value:Zs,next:null},this.tail=this.tail.next,this.size===this.capacity?this.head=this.head.next:this.size+=1}offerAll(e){for(const n of e)this.offer(n)}}class rst{buffer;head;index;remaining;constructor(e){this.buffer=e,this.index=e.index,this.remaining=e.size,this.head=e.head}fastForward(){for(;this.index<this.buffer.index;)this.head=this.head.next,this.index++}take(){if(this.remaining===0)return;this.index<this.buffer.index&&this.fastForward(),this.remaining--;const e=this.head.value;return this.head=this.head.next,e}takeN(e){if(this.remaining===0)return ke();this.index<this.buffer.index&&this.fastForward();const n=Math.min(e,this.remaining),s=new Array(n);for(let a=0;a<n;a++){const c=this.head.value;this.head=this.head.next,s[a]=c}return this.remaining-=n,Dn(s)}takeAll(){return this.takeN(this.remaining)}}const sst={remaining:0,take:()=>{},takeN:()=>ke(),takeAll:()=>ke()},ist=Frt,$N=Drt,cL=zrt,wN=Urt,uL=yrt,ast=brt,ost=vrt,cst=$rt,By=wrt,Mu=Ert,ust=Trt,EN=q$,lst=Rrt,lL="Continue",fst="Close",hst="Yield",dst="effect/ChannelChildExecutorDecision",TN=Symbol.for(dst),mst={[TN]:TN},fL=t=>{const e=Object.create(mst);return e._tag=lL,e},Hg="ContinuationK",pst="ContinuationFinalizer",hL=Symbol.for("effect/ChannelContinuation"),dL={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutDone:t=>t,_OutErr2:t=>t,_OutElem:t=>t,_OutDone2:t=>t};class mL{onSuccess;onHalt;_tag=Hg;[hL]=dL;constructor(e,n){this.onSuccess=e,this.onHalt=n}onExit(e){return vD(e)?this.onHalt(e.cause):this.onSuccess(e.value)}}class gst{finalizer;_tag=pst;[hL]=dL;constructor(e){this.finalizer=e}}const pL="PullAfterNext",yst="PullAfterAllEnqueued",bst="effect/ChannelUpstreamPullStrategy",_st=Symbol.for(bst),Sst={_A:t=>t},vst={[_st]:Sst},gL=t=>{const e=Object.create(vst);return e._tag=pL,e.emitSeparator=t,e},yL="BracketOut",bL="Bridge",qT="ConcatAll",_L="Emit",SL="Ensuring",vL="Fail",$L="Fold",wL="FromEffect",EL="PipeTo",$st="Provide",TL="Read",OL="Succeed",RL="SucceedNow",kL="Suspend",wst="effect/Channel",ML=Symbol.for(wst),Est={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutElem:t=>t,_OutDone:t=>t},Rr={[ML]:Est,pipe(){return lt(this,arguments)}},AL=t=>_t(t,ML)||mf(t),Tst=$(2,(t,e)=>{const n=Object.create(Rr);return n._tag=yL,n.acquire=()=>t,n.finalizer=e,n}),CL=(t,e,n)=>{const s=Object.create(Rr);return s._tag=qT,s.combineInners=e,s.combineAll=n,s.onPull=()=>gL(at()),s.onEmit=()=>fL,s.value=()=>t,s.k=At,s},Ost=$(4,(t,e,n,s)=>{const a=Object.create(Rr);return a._tag=qT,a.combineInners=n,a.combineAll=s,a.onPull=()=>gL(at()),a.onEmit=()=>fL,a.value=()=>t,a.k=e,a}),NL=$(2,(t,e)=>{const n=Object.create(Rr);return n._tag=bL,n.input=e,n.channel=t,n}),Rst=$(2,(t,e)=>{const n=Object.create(Rr);return n._tag=SL,n.channel=t,n.finalizer=e,n}),BT=t=>fs(nz(t)),fs=t=>kst(()=>t),kst=t=>{const e=Object.create(Rr);return e._tag=vL,e.error=t,e},rn=$(2,(t,e)=>{const n=Object.create(Rr);return n._tag=$L,n.channel=t,n.k=new mL(e,fs),n}),br=t=>{const e=Object.create(Rr);return e._tag=wL,e.effect=()=>t,e},xs=$(2,(t,e)=>{const n=Object.create(Rr);return n._tag=EL,n.left=()=>t,n.right=()=>e,n}),xL=t=>wm({onInput:t.onInput,onFailure:e=>vr(WZ(e),{onLeft:t.onFailure,onRight:fs}),onDone:t.onDone}),wm=t=>{const e=Object.create(Rr);return e._tag=TL,e.more=t.onInput,e.done=new mL(t.onDone,t.onFailure),e},IL=t=>HT(()=>t),zd=t=>{const e=Object.create(Rr);return e._tag=RL,e.terminal=t,e},KT=t=>{const e=Object.create(Rr);return e._tag=kL,e.channel=t,e},HT=t=>{const e=Object.create(Rr);return e._tag=OL,e.evaluate=t,e},ea=zd(void 0),Pn=t=>{const e=Object.create(Rr);return e._tag=_L,e.out=t,e},Em="Done",Tm="Emit",yf="FromEffect",Om="Read",Mst=Symbol.for("effect/ChannelState"),Ast={_E:t=>t,_R:t=>t},E_={[Mst]:Ast},Au=()=>{const t=Object.create(E_);return t._tag=Em,t},av=()=>{const t=Object.create(E_);return t._tag=Tm,t},Fh=t=>{const e=Object.create(E_);return e._tag=yf,e.effect=t,e},ov=(t,e,n,s)=>{const a=Object.create(E_);return a._tag=Om,a.upstream=t,a.onEffect=e,a.onEmit=n,a.onDone=s,a},Ky=t=>t._tag===yf,Cst=t=>Ky(t)?t.effect:se,ON=t=>Ky(t)?iet(t.effect):void 0,FL="PullFromChild",B$="PullFromUpstream",K$="DrainChildExecutors",DL="Emit";class yg{childExecutor;parentSubexecutor;onEmit;_tag=FL;constructor(e,n,s){this.childExecutor=e,this.parentSubexecutor=n,this.onEmit=s}close(e){const n=this.childExecutor.close(e),s=this.parentSubexecutor.close(e);return n!==void 0&&s!==void 0?b_(Ln(n),Ln(s),(a,c)=>w(a,Cd(c))):n!==void 0?n:s!==void 0?s:void 0}enqueuePullFromChild(e){return this}}class No{upstreamExecutor;createChild;lastDone;activeChildExecutors;combineChildResults;combineWithChildResult;onPull;onEmit;_tag=B$;constructor(e,n,s,a,c,l,d,m){this.upstreamExecutor=e,this.createChild=n,this.lastDone=s,this.activeChildExecutors=a,this.combineChildResults=c,this.combineWithChildResult=l,this.onPull=d,this.onEmit=m}close(e){const n=this.upstreamExecutor.close(e),a=[...this.activeChildExecutors.map(c=>c!==void 0?c.childExecutor.close(e):void 0),n].reduce((c,l)=>c!==void 0&&l!==void 0?b_(c,Ln(l),(d,m)=>Cd(d,m)):c!==void 0?c:l!==void 0?Ln(l):void 0,void 0);return a}enqueuePullFromChild(e){return new No(this.upstreamExecutor,this.createChild,this.lastDone,[...this.activeChildExecutors,e],this.combineChildResults,this.combineWithChildResult,this.onPull,this.onEmit)}}class Hu{upstreamExecutor;lastDone;activeChildExecutors;upstreamDone;combineChildResults;combineWithChildResult;onPull;_tag=K$;constructor(e,n,s,a,c,l,d){this.upstreamExecutor=e,this.lastDone=n,this.activeChildExecutors=s,this.upstreamDone=a,this.combineChildResults=c,this.combineWithChildResult=l,this.onPull=d}close(e){const n=this.upstreamExecutor.close(e),a=[...this.activeChildExecutors.map(c=>c!==void 0?c.childExecutor.close(e):void 0),n].reduce((c,l)=>c!==void 0&&l!==void 0?b_(c,Ln(l),(d,m)=>Cd(d,m)):c!==void 0?c:l!==void 0?Ln(l):void 0,void 0);return a}enqueuePullFromChild(e){return new Hu(this.upstreamExecutor,this.lastDone,[...this.activeChildExecutors,e],this.upstreamDone,this.combineChildResults,this.combineWithChildResult,this.onPull)}}class cv{value;next;_tag=DL;constructor(e,n){this.value=e,this.next=n}close(e){const n=this.next.close(e);return n}enqueuePullFromChild(e){return this}}const Nst="Pulled",xst="NoUpstream",Ist="effect/ChannelUpstreamPullRequest",Fst=Symbol.for(Ist),Dst={_A:t=>t},zL={[Fst]:Dst},RN=t=>{const e=Object.create(zL);return e._tag=Nst,e.value=t,e},zst=t=>{const e=Object.create(zL);return e._tag=xst,e.activeDownstreamCount=t,e};class Do{_activeSubexecutor=void 0;_cancelled=void 0;_closeLastSubstream=void 0;_currentChannel;_done=void 0;_doneStack=[];_emitted=void 0;_executeCloseLastSubstream;_input=void 0;_inProgressFinalizer=void 0;_providedEnv;constructor(e,n,s){this._currentChannel=e,this._executeCloseLastSubstream=s,this._providedEnv=n}run(){let e;for(;e===void 0;)if(this._cancelled!==void 0)e=this.processCancellation();else if(this._activeSubexecutor!==void 0)e=this.runSubexecutor();else try{if(this._currentChannel===void 0)e=Au();else switch(mf(this._currentChannel)&&(this._currentChannel=br(this._currentChannel)),this._currentChannel._tag){case yL:{e=this.runBracketOut(this._currentChannel);break}case bL:{const n=this._currentChannel.input;if(this._currentChannel=this._currentChannel.channel,this._input!==void 0){const s=this._input;this._input=void 0;const a=()=>Rt(n.awaitRead(),()=>We(()=>{const c=s.run();switch(c._tag){case Em:return qi(s.getDone(),{onFailure:l=>n.error(l),onSuccess:l=>n.done(l)});case Tm:return Rt(n.emit(s.getEmit()),()=>a());case yf:return zi(c.effect,{onFailure:l=>n.error(l),onSuccess:()=>a()});case Om:return VT(c,()=>a(),l=>n.error(l))}}));e=Fh(Rt(fet(Rs(a())),c=>xe(()=>this.addFinalizer(l=>Rt(Ko(c),()=>We(()=>{const d=this.restorePipe(l,s);return d!==void 0?d:se}))))))}break}case qT:{const n=new Do(this._currentChannel.value(),this._providedEnv,a=>xe(()=>{const c=this._closeLastSubstream===void 0?se:this._closeLastSubstream;this._closeLastSubstream=w(c,Un(a))}));n._input=this._input;const s=this._currentChannel;this._activeSubexecutor=new No(n,a=>s.k(a),void 0,[],(a,c)=>s.combineInners(a,c),(a,c)=>s.combineAll(a,c),a=>s.onPull(a),a=>s.onEmit(a)),this._closeLastSubstream=void 0,this._currentChannel=void 0;break}case _L:{this._emitted=this._currentChannel.out,this._currentChannel=this._activeSubexecutor!==void 0?void 0:ea,e=av();break}case SL:{this.runEnsuring(this._currentChannel);break}case vL:{e=this.doneHalt(this._currentChannel.error());break}case $L:{this._doneStack.push(this._currentChannel.k),this._currentChannel=this._currentChannel.channel;break}case wL:{const n=this._providedEnv===void 0?this._currentChannel.effect():w(this._currentChannel.effect(),Uy(this._providedEnv));e=Fh(zi(n,{onFailure:s=>{const a=this.doneHalt(s);return a!==void 0&&Ky(a)?a.effect:se},onSuccess:s=>{const a=this.doneSucceed(s);return a!==void 0&&Ky(a)?a.effect:se}}));break}case EL:{const n=this._input,s=new Do(this._currentChannel.left(),this._providedEnv,a=>this._executeCloseLastSubstream(a));s._input=n,this._input=s,this.addFinalizer(a=>{const c=this.restorePipe(a,n);return c!==void 0?c:se}),this._currentChannel=this._currentChannel.right();break}case $st:{const n=this._providedEnv;this._providedEnv=this._currentChannel.context(),this._currentChannel=this._currentChannel.inner,this.addFinalizer(()=>xe(()=>{this._providedEnv=n}));break}case TL:{const n=this._currentChannel;e=ov(this._input,At,s=>{try{this._currentChannel=n.more(s)}catch(a){this._currentChannel=n.done.onExit(wQ(a))}},s=>{const a=c=>n.done.onExit(c);this._currentChannel=a(s)});break}case OL:{e=this.doneSucceed(this._currentChannel.evaluate());break}case RL:{e=this.doneSucceed(this._currentChannel.terminal);break}case kL:{this._currentChannel=this._currentChannel.channel();break}}}catch(n){this._currentChannel=fs(w$(n))}return e}getDone(){return this._done}getEmit(){return this._emitted}cancelWith(e){this._cancelled=e}clearInProgressFinalizer(){this._inProgressFinalizer=void 0}storeInProgressFinalizer(e){this._inProgressFinalizer=e}popAllFinalizers(e){const n=[];let s=this._doneStack.pop();for(;s;)s._tag==="ContinuationFinalizer"&&n.push(s.finalizer),s=this._doneStack.pop();const a=n.length===0?se:lv(n,e);return this.storeInProgressFinalizer(a),a}popNextFinalizers(){const e=[];for(;this._doneStack.length!==0;){const n=this._doneStack[this._doneStack.length-1];if(n._tag===Hg)return e;e.push(n),this._doneStack.pop()}return e}restorePipe(e,n){const s=this._input;return this._input=n,s!==void 0?s.close(e):se}close(e){let n;const s=this._inProgressFinalizer;s!==void 0&&(n=w(s,qu(xe(()=>this.clearInProgressFinalizer()))));let a;const c=this.popAllFinalizers(e);c!==void 0&&(a=w(c,qu(xe(()=>this.clearInProgressFinalizer()))));const l=this._activeSubexecutor===void 0?void 0:this._activeSubexecutor.close(e);if(!(l===void 0&&n===void 0&&a===void 0))return w(Ln(uv(l)),N$(Ln(uv(n))),N$(Ln(uv(a))),me(([[d,m],p])=>w(d,Cd(m),Cd(p))),Hh,Rt(d=>We(()=>d)))}doneSucceed(e){if(this._doneStack.length===0)return this._done=qr(e),this._currentChannel=void 0,Au();const n=this._doneStack[this._doneStack.length-1];if(n._tag===Hg){this._doneStack.pop(),this._currentChannel=n.onSuccess(e);return}const s=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=s.reverse(),this._done=qr(e),this._currentChannel=void 0,Au();const a=lv(s.map(l=>l.finalizer),qr(e));this.storeInProgressFinalizer(a);const c=w(a,qu(xe(()=>this.clearInProgressFinalizer())),Hh,Rt(()=>xe(()=>this.doneSucceed(e))));return Fh(c)}doneHalt(e){if(this._doneStack.length===0)return this._done=Br(e),this._currentChannel=void 0,Au();const n=this._doneStack[this._doneStack.length-1];if(n._tag===Hg){this._doneStack.pop();try{this._currentChannel=n.onHalt(e)}catch(l){this._currentChannel=fs(w$(l))}return}const s=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=s.reverse(),this._done=Br(e),this._currentChannel=void 0,Au();const a=lv(s.map(l=>l.finalizer),Br(e));this.storeInProgressFinalizer(a);const c=w(a,qu(xe(()=>this.clearInProgressFinalizer())),Hh,Rt(()=>xe(()=>this.doneHalt(e))));return Fh(c)}processCancellation(){return this._currentChannel=void 0,this._done=this._cancelled,this._cancelled=void 0,Au()}runBracketOut(e){const n=Hh(zi(this.provide(e.acquire()),{onFailure:s=>xe(()=>{this._currentChannel=fs(s)}),onSuccess:s=>xe(()=>{this.addFinalizer(a=>this.provide(e.finalizer(s,a))),this._currentChannel=Pn(s)})}));return Fh(n)}provide(e){return this._providedEnv===void 0?e:w(e,Uy(this._providedEnv))}runEnsuring(e){this.addFinalizer(e.finalizer),this._currentChannel=e.channel}addFinalizer(e){this._doneStack.push(new gst(e))}runSubexecutor(){const e=this._activeSubexecutor;switch(e._tag){case FL:return this.pullFromChild(e.childExecutor,e.parentSubexecutor,e.onEmit,e);case B$:return this.pullFromUpstream(e);case K$:return this.drainChildExecutors(e);case DL:return this._emitted=e.value,this._activeSubexecutor=e.next,av()}}replaceSubexecutor(e){this._currentChannel=void 0,this._activeSubexecutor=e}finishWithExit(e){const n=qi(e,{onFailure:s=>this.doneHalt(s),onSuccess:s=>this.doneSucceed(s)});return this._activeSubexecutor=void 0,n===void 0?se:Cst(n)}finishSubexecutorWithCloseEffect(e,...n){this.addFinalizer(()=>w(n,Yi(a=>w(xe(()=>a(e)),Rt(c=>c!==void 0?c:se)),{discard:!0})));const s=w(e,qi({onFailure:a=>this.doneHalt(a),onSuccess:a=>this.doneSucceed(a)}));return this._activeSubexecutor=void 0,s}applyUpstreamPullStrategy(e,n,s){switch(s._tag){case pL:{const a=!e||n.some(c=>c!==void 0);return[s.emitSeparator,a?[void 0,...n]:n]}case yst:{const a=!e||n.some(c=>c!==void 0);return[s.emitSeparator,a?[...n,void 0]:n]}}}pullFromChild(e,n,s,a){return ov(e,At,c=>{const l=s(c);switch(l._tag){case lL:break;case fst:{this.finishWithDoneValue(e,n,l.value);break}case hst:{const d=n.enqueuePullFromChild(a);this.replaceSubexecutor(d);break}}this._activeSubexecutor=new cv(c,this._activeSubexecutor)},qi({onFailure:c=>{const l=this.handleSubexecutorFailure(e,n,c);return l===void 0?void 0:ON(l)},onSuccess:c=>{this.finishWithDoneValue(e,n,c)}}))}finishWithDoneValue(e,n,s){const a=n;switch(a._tag){case B$:{const c=new No(a.upstreamExecutor,a.createChild,a.lastDone!==void 0?a.combineChildResults(a.lastDone,s):s,a.activeChildExecutors,a.combineChildResults,a.combineWithChildResult,a.onPull,a.onEmit);this._closeLastSubstream=e.close(qr(s)),this.replaceSubexecutor(c);break}case K$:{const c=new Hu(a.upstreamExecutor,a.lastDone!==void 0?a.combineChildResults(a.lastDone,s):s,a.activeChildExecutors,a.upstreamDone,a.combineChildResults,a.combineWithChildResult,a.onPull);this._closeLastSubstream=e.close(qr(s)),this.replaceSubexecutor(c);break}}}handleSubexecutorFailure(e,n,s){return this.finishSubexecutorWithCloseEffect(Br(s),a=>n.close(a),a=>e.close(a))}pullFromUpstream(e){if(e.activeChildExecutors.length===0)return this.performPullFromUpstream(e);const n=e.activeChildExecutors[0],s=new No(e.upstreamExecutor,e.createChild,e.lastDone,e.activeChildExecutors.slice(1),e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit);if(n===void 0)return this.performPullFromUpstream(s);this.replaceSubexecutor(new yg(n.childExecutor,s,n.onEmit))}performPullFromUpstream(e){return ov(e.upstreamExecutor,n=>{const s=this._closeLastSubstream===void 0?se:this._closeLastSubstream;return this._closeLastSubstream=void 0,w(this._executeCloseLastSubstream(s),Un(n))},n=>{if(this._closeLastSubstream!==void 0){const l=this._closeLastSubstream;return this._closeLastSubstream=void 0,w(this._executeCloseLastSubstream(l),me(()=>{const d=new Do(e.createChild(n),this._providedEnv,this._executeCloseLastSubstream);d._input=this._input;const[m,p]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(RN(n)));this._activeSubexecutor=new yg(d,new No(e.upstreamExecutor,e.createChild,e.lastDone,p,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),ze(m)&&(this._activeSubexecutor=new cv(m.value,this._activeSubexecutor))}))}const s=new Do(e.createChild(n),this._providedEnv,this._executeCloseLastSubstream);s._input=this._input;const[a,c]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(RN(n)));this._activeSubexecutor=new yg(s,new No(e.upstreamExecutor,e.createChild,e.lastDone,c,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),ze(a)&&(this._activeSubexecutor=new cv(a.value,this._activeSubexecutor))},n=>{if(e.activeChildExecutors.some(c=>c!==void 0)){const c=new Hu(e.upstreamExecutor,e.lastDone,[void 0,...e.activeChildExecutors],e.upstreamExecutor.getDone(),e.combineChildResults,e.combineWithChildResult,e.onPull);if(this._closeLastSubstream!==void 0){const l=this._closeLastSubstream;return this._closeLastSubstream=void 0,w(this._executeCloseLastSubstream(l),me(()=>this.replaceSubexecutor(c)))}this.replaceSubexecutor(c);return}const s=this._closeLastSubstream,a=this.finishSubexecutorWithCloseEffect(w(n,TQ(c=>e.combineWithChildResult(e.lastDone,c))),()=>s,c=>e.upstreamExecutor.close(c));return a===void 0?void 0:ON(a)})}drainChildExecutors(e){if(e.activeChildExecutors.length===0){const c=this._closeLastSubstream;return c!==void 0&&this.addFinalizer(()=>nn(c)),this.finishSubexecutorWithCloseEffect(e.upstreamDone,()=>c,l=>e.upstreamExecutor.close(l))}const n=e.activeChildExecutors[0],s=e.activeChildExecutors.slice(1);if(n===void 0){const[c,l]=this.applyUpstreamPullStrategy(!0,s,e.onPull(zst(s.reduce((d,m)=>m!==void 0?d+1:d,0))));return this.replaceSubexecutor(new Hu(e.upstreamExecutor,e.lastDone,l,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull)),ze(c)?(this._emitted=c.value,av()):void 0}const a=new Hu(e.upstreamExecutor,e.lastDone,s,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull);this.replaceSubexecutor(new yg(n.childExecutor,a,n.onEmit))}}const uv=t=>t!==void 0?t:se,lv=(t,e)=>w(Yi(t,n=>Ln(n(e))),me(n=>w($Q(n),Ee(()=>$D))),Rt(n=>We(()=>n))),VT=(t,e,n)=>{const s=[t],a=()=>{const c=s.pop();if(c===void 0||c.upstream===void 0)return set("Unexpected end of input for channel execution");const l=c.upstream.run();switch(l._tag){case Tm:{const d=c.onEmit(c.upstream.getEmit());return s.length===0?d===void 0?We(e):w(d,zi({onFailure:n,onSuccess:e})):d===void 0?We(()=>a()):w(d,zi({onFailure:n,onSuccess:()=>a()}))}case Em:{const d=c.onDone(c.upstream.getDone());return s.length===0?d===void 0?We(e):w(d,zi({onFailure:n,onSuccess:e})):d===void 0?We(()=>a()):w(d,zi({onFailure:n,onSuccess:()=>a()}))}case yf:return s.push(c),w(c.onEffect(l.effect),$T(d=>We(()=>{const m=c.onDone(Br(d));return m===void 0?se:m})),zi({onFailure:n,onSuccess:()=>a()}));case Om:return s.push(c),s.push(l),We(()=>a())}};return a()},Ust=$(2,(t,e)=>{const n=(s,a,c)=>oet(xe(()=>new Do(t,void 0,At)),l=>We(()=>Vg(l.run(),l).pipe(det(s),Un(ar(s)),OT(ar(a)))),(l,d)=>{const m=l.close(d);return m===void 0?se:jz(m,p=>T$(c,Gi(p)))});return Uz(s=>Fz([uz(e,wy),ji(),ji()]).pipe(Rt(([a,c,l])=>s(n(c,l,a)).pipe(Vo(e),Rt(d=>e.addFinalizer(m=>{const p=vD(m)?ZZ(m.cause):void 0;return i$(c).pipe(Rt(y=>y?Pi(l,void 0).pipe(Un(gz(d)),Un(jC(d))):Pi(l,void 0).pipe(Un(p&&$E(p)>0?yz(d,t9(p)):Ko(d)),Un(jC(d)))))}).pipe(Un(s(ar(c)))))))))}),Vg=(t,e)=>{const n=t;switch(n._tag){case yf:return w(n.effect,Rt(()=>Vg(e.run(),e)));case Tm:return Vg(e.run(),e);case Em:return We(()=>e.getDone());case Om:return VT(n,()=>Vg(e.run(),e),Gi)}},Lst="Done",jst="Await",Pst="effect/ChannelMergeDecision",qst=Symbol.for(Pst),Bst={[qst]:{_R:t=>t,_E0:t=>t,_Z0:t=>t,_E:t=>t,_Z:t=>t}},kN=t=>{const e=Object.create(Bst);return e._tag=jst,e.f=t,e},UL="BothRunning",LL="LeftDone",jL="RightDone",Kst="effect/ChannelMergeState",MN=Symbol.for(Kst),YT={[MN]:MN},fv=(t,e)=>{const n=Object.create(YT);return n._tag=UL,n.left=t,n.right=e,n},AN=t=>{const e=Object.create(YT);return e._tag=LL,e.f=t,e},CN=t=>{const e=Object.create(YT);return e._tag=jL,e.f=t,e},PL="BackPressure",qL="BufferSliding",Hst="effect/ChannelMergeStrategy",NN=Symbol.for(Hst),BL={[NN]:NN},Vst=t=>{const e=Object.create(BL);return e._tag=PL,e},Yst=t=>{const e=Object.create(BL);return e._tag=qL,e},Gst=$(2,(t,{onBackPressure:e,onBufferSliding:n})=>{switch(t._tag){case PL:return e();case qL:return n()}}),Uu="Empty",Gh="Emit",Jh="Error",Qh="Done",KL=t=>({_tag:Uu,notifyProducer:t}),hv=t=>({_tag:Gh,notifyConsumers:t}),Jst=t=>({_tag:Jh,cause:t}),Qst=t=>({_tag:Qh,done:t});class Xst{ref;constructor(e){this.ref=e}awaitRead(){return Du(Rh(this.ref,e=>e._tag===Uu?[ar(e.notifyProducer),e]:[se,e]))}get close(){return uet(e=>this.error(JZ(e)))}done(e){return Du(Rh(this.ref,n=>{switch(n._tag){case Uu:return[ar(n.notifyProducer),n];case Gh:return[Yi(n.notifyConsumers,s=>Pi(s,Ot(e)),{discard:!0}),Qst(e)];case Jh:return[Ou,n];case Qh:return[Ou,n]}}))}emit(e){return Rt(ji(),n=>Du(Rh(this.ref,s=>{switch(s._tag){case Uu:return[ar(s.notifyProducer),s];case Gh:{const a=s.notifyConsumers[0],c=s.notifyConsumers.slice(1);if(a!==void 0)return[Pi(a,Jt(e)),c.length===0?KL(n):hv(c)];throw new Error("Bug: Channel.SingleProducerAsyncInput.emit - Queue was empty! please report an issue at https://github.com/Effect-TS/effect/issues")}case Jh:return[Ou,s];case Qh:return[Ou,s]}})))}error(e){return Du(Rh(this.ref,n=>{switch(n._tag){case Uu:return[ar(n.notifyProducer),n];case Gh:return[Yi(n.notifyConsumers,s=>FG(s,e),{discard:!0}),Jst(e)];case Jh:return[Ou,n];case Qh:return[Ou,n]}}))}get take(){return this.takeWith(e=>Br(tW(e,Ot)),e=>qr(e),e=>Ay(Jt(e)))}takeWith(e,n,s){return Rt(ji(),a=>Du(Rh(this.ref,c=>{switch(c._tag){case Uu:return[Un(Pi(c.notifyProducer,void 0),C$(ar(a),{onFailure:e,onSuccess:vr({onLeft:s,onRight:n})})),hv([a])];case Gh:return[C$(ar(a),{onFailure:e,onSuccess:vr({onLeft:s,onRight:n})}),hv([...c.notifyConsumers,a])];case Jh:return[nn(e(c.cause)),c];case Qh:return[nn(s(c.done)),c]}})))}}const HL=()=>w(ji(),Rt(t=>rT(KL(t))),me(t=>new Xst(t))),H$=$(2,(t,e)=>Ost(t,e,()=>{},()=>{})),Zst=t=>{const e=wm({onInput:()=>e,onFailure:fs,onDone:IL});return xs(t,e)},VL=$(2,(t,e)=>Rst(t,()=>e)),Wst=t=>rn(t,At),GT=t=>Qi(t.takeWith(fs,e=>rn(Pn(e),()=>GT(t)),IL)),YL=$(2,(t,e)=>rn(t,n=>HT(()=>e(n)))),GL=$(2,(t,e)=>{const n=xL({onInput:s=>rn(Pn(e(s)),()=>n),onFailure:BT,onDone:zd});return xs(t,n)}),tit=t=>e=>eit(t)(e,md),eit=({bufferSize:t=16,concurrency:e,mergeStrategy:n=Vst()})=>(s,a)=>ZL(c=>Wu(function*(){const l=e==="unbounded"?Number.MAX_SAFE_INTEGER:e,d=yield*HL(),m=GT(d),p=yield*uL(t);yield*T$(c,By(p));const y=yield*ast();yield*T$(c,By(y));const b=yield*rT(at()),S=yield*ji(),v=(yield*qz(l)).withPermits,E=yield*rl(xs(m,s),c);function N(x){return x.pipe(Rt(vr({onLeft:q=>nn(ht(q)),onRight:q=>Pg(Mu(p,nn(Jt(q))),at())})),tN({until:q=>ze(q)}),Rt(q=>mD(b,Ke({onNone:()=>ht(q.value),onSome:A=>ht(a(A,q.value))}))),$T(q=>rz(q)?Gi(q):Mu(p,Gi(q)).pipe(Un(Pi(S,void 0)),aet)))}yield*E.pipe(zi({onFailure:x=>Mu(p,Gi(x)).pipe(Un(nn(!1))),onSuccess:vr({onLeft:x=>Lz(Rs(ar(S)),Rs(v(l)(se)),{onSelfDone:(q,A)=>Pg(Ko(A),!1),onOtherDone:(q,A)=>Un(Ko(A),zg(b).pipe(Rt(Ke({onNone:()=>Mu(p,nn(Ot(x))),onSome:P=>Mu(p,nn(Ot(a(P,x))))})),Pg(!1)))}),onRight:x=>Gst(n,{onBackPressure:()=>Wu(function*(){const q=yield*ji(),A=A$(k=>rl(xs(m,x),k).pipe(Rt(U=>X0(Ln(N(U)),Ln(Rs(ar(S))))),Rt(At)));return yield*Pi(q,void 0).pipe(Un(A),v(1),Vo(c)),yield*ar(q),!(yield*i$(S))}),onBufferSliding:()=>Wu(function*(){const q=yield*ji(),A=yield*ji(),P=yield*ost(y);yield*EN(y).pipe(Rt(K=>Pi(K,void 0)),met(()=>P>=l)),yield*Mu(y,q);const k=A$(K=>rl(xs(m,x),K).pipe(Rt(B=>Ln(N(B)).pipe(X0(Ln(Rs(ar(S)))),X0(Ln(Rs(ar(q)))))),Rt(At)));return yield*Pi(A,void 0).pipe(Un(k),v(1),Vo(c)),yield*ar(A),!(yield*i$(S))})})})}),tN({while:x=>x}),Vo(c));const C=w(EN(p),Du,C$({onFailure:fs,onSuccess:vr({onLeft:zd,onRight:x=>rn(Pn(x),()=>C)})}),Qi);return NL(C,d)})),JL=$(3,(t,e,n)=>tit(n)(GL(t,e))),nit=$(2,(t,e)=>{function n(s){return Wu(function*(){const a=yield*HL(),c=GT(a),l=yield*rl(xs(c,t),s),d=yield*rl(xs(c,e.other),s);function m(y,b,S){return(v,E,N)=>{function C(x){const q=x;return q._tag===Lst?nn(br(Un(Ko(b),q.effect))):me(gz(b),qi({onFailure:A=>br(q.f(Br(A))),onSuccess:vr({onLeft:A=>br(q.f(qr(A))),onRight:A=>JT(Pn(A),p(N(q.f)))})}))}return qi(y,{onFailure:x=>C(v(Br(x))),onSuccess:vr({onLeft:x=>C(v(qr(x))),onRight:x=>nn(rn(Pn(x),()=>rn(br(Vo(Rs(S),s)),q=>p(E(q,b)))))})})}}function p(y){switch(y._tag){case UL:{const b=Rs(PC(y.left)),S=Rs(PC(y.right));return Qi(Lz(b,S,{onSelfDone:(v,E)=>Un(Ko(E),m(v,y.right,l)(e.onSelfDone,fv,N=>AN(N))),onOtherDone:(v,E)=>Un(Ko(E),m(v,y.left,d)(e.onOtherDone,(N,C)=>fv(C,N),N=>CN(N)))}))}case LL:return Qi(me(Ln(d),qi({onFailure:b=>br(y.f(Br(b))),onSuccess:vr({onLeft:b=>br(y.f(qr(b))),onRight:b=>rn(Pn(b),()=>p(AN(y.f)))})})));case jL:return Qi(me(Ln(l),qi({onFailure:b=>br(y.f(Br(b))),onSuccess:vr({onLeft:b=>br(y.f(qr(b))),onRight:b=>rn(Pn(b),()=>p(CN(y.f)))})})))}}return br(WC(y=>{const b=WC(E=>(E.transferChildren(y.scope()),se)),S=Rs(l).pipe(qu(b),Vo(s)),v=Rs(d).pipe(qu(b),Vo(s));return b_(S,v,(E,N)=>fv(E,N))})).pipe(rn(p),NL(a))})}return ZL(n)}),rit=$(2,(t,e)=>KT(()=>{let n;const s=xL({onInput:c=>rn(Pn(c),()=>s),onFailure:c=>(n=uit(c),fs(w$(n))),onDone:zd}),a=wm({onInput:c=>w(Pn(c),rn(()=>a)),onFailure:c=>XZ(c)&&lit(c.defect)&&wt(c.defect,n)?BT(c.defect.error):fs(c),onDone:zd});return xs(xs(xs(t,s),e),a)})),sit=t=>A$(e=>Ust(t,e)),QL=t=>sit(Zst(t)),XL=t=>Qi(Uz(e=>me(lz(),n=>Tst(jz(e(xW(t,n)),s=>Dy(n,Br(s))),(s,a)=>Dy(n,a))))),iit=t=>oit(me(ET,e=>rn(br(t(e)),Pn))),ait=t=>Rt(ET,e=>rl(t,e)),rl=$(2,(t,e)=>N$(xe(()=>new Do(t,void 0,At)),Pz()).pipe(TT(([n,s])=>NW(e,a=>{const c=n.close(a);return c!==void 0?Uy(c,s):se})),Hh,me(([n])=>We(()=>V$(n.run(),n))))),V$=(t,e)=>{const n=t;switch(n._tag){case Em:return qi(e.getDone(),{onFailure:Gi,onSuccess:s=>nn(Ot(s))});case Tm:return nn(Jt(e.getEmit()));case yf:return w(n.effect,Rt(()=>V$(e.run(),e)));case Om:return VT(n,()=>V$(e.run(),e),s=>Gi(s))}},Qi=t=>Wst(br(t)),oit=t=>CL(XL(t),(e,n)=>e,(e,n)=>e),ZL=t=>CL(iit(t),(e,n)=>e,(e,n)=>e),WL=t=>t4(0,t.length,t),t4=(t,e,n)=>t===e?ea:w(Pn(w(n,Va(t))),rn(()=>t4(t+1,e,n))),cit=$(t=>AL(t[1]),(t,e,n)=>n?.concurrent?nit(t,{other:e,onSelfDone:s=>kN(a=>We(()=>EC(s,a))),onOtherDone:s=>kN(a=>We(()=>EC(a,s)))}):rn(t,s=>YL(e,a=>[s,a]))),JT=$(t=>AL(t[1]),(t,e,n)=>n?.concurrent?YL(cit(t,e,{concurrent:!0}),s=>s[1]):rn(t,()=>e)),Y$=Symbol.for("effect/Channel/ChannelException"),uit=t=>({_tag:"ChannelException",[Y$]:Y$,error:t}),lit=t=>_t(t,Y$),fit=Symbol.for("effect/Sink"),hit={_A:t=>t,_In:t=>t,_L:t=>t,_E:t=>t,_R:t=>t};class e4{channel;[fit]=hit;constructor(e){this.channel=e}pipe(){return lt(this,arguments)}}const dit=t=>{const e=wm({onInput:n=>w(br(Yi(n,s=>t(s),{discard:!0})),rn(()=>e)),onFailure:fs,onDone:()=>ea});return new e4(e)},mit=t=>new e4(br(t)),n4=t=>mf(t)?n4(mit(t)):t.channel,pit=m_,git=_z,yit=bz,T_=Fd,QT=vz,bit=()=>Dz(at()),_it=t=>wT(Gi(t),ht),Sit="effect/Stream",XT=Symbol.for(Sit),vit={_R:t=>t,_E:t=>t,_A:t=>t};class ms{channel;[XT]=vit;constructor(e){this.channel=e}pipe(){return lt(this,arguments)}}const r4=t=>_t(t,XT)||mf(t),ZT=4096,$it=$(2,(t,e)=>new ms(w(wr(t),JT(wr(e))))),G$=$(2,(t,e)=>new ms(w(wr(t),VL(e)))),wit=t=>tO(Gi(t)),Eit=$(2,(t,e)=>Ait(t,Nb(e))),WT=$(t=>r4(t[0]),(t,e,n)=>{const s=n?.bufferSize??16;return n?.switch?xN(n?.concurrency,()=>IN(t,1,s,e),a=>IN(t,a,s,e)):xN(n?.concurrency,()=>new ms(H$(wr(t),a=>w(a,$H(c=>wr(e(c))),EH(ea,(c,l)=>w(c,JT(l)))))),a=>new ms(w(wr(t),H$(WL),JL(c=>wr(e(c)),n))))}),xN=(t,e,n)=>{switch(t){case void 0:return e();case"unbounded":return n(Number.MAX_SAFE_INTEGER);default:return t>1?n(t):e()}},IN=$(4,(t,e,n,s)=>new ms(w(wr(t),H$(WL),JL(a=>wr(s(a)),{concurrency:e,mergeStrategy:Yst(),bufferSize:n})))),s4=$(t=>r4(t[0]),(t,e)=>WT(t,At,e)),wr=t=>{if("channel"in t)return t.channel;if(mf(t))return wr(tO(t));throw new TypeError("Expected a Stream.")},i4=t=>new ms(xb(t)?ea:Pn(t)),tO=t=>w(t,wT(ht),Tit),Tit=t=>new ms(Qi(bet(t,{onFailure:Ke({onNone:()=>ea,onSome:BT}),onSuccess:e=>Pn(He(e))}))),Oit=(t,e)=>{const n=e?.maxChunkSize??ZT;if(e?.scoped){const a=me(wN(t),c=>J$(c,{maxChunkSize:n,shutdown:!0}));return e.shutdown?me(a,G$($N(t))):a}const s=WT(a4(wN(t)),a=>J$(a,{maxChunkSize:n}));return e?.shutdown?G$(s,$N(t)):s},Rit=t=>o4(()=>Cb(t)?i4(t):kit(t[Symbol.iterator]())),kit=(t,e=ZT)=>w(xe(()=>{let n=[];const s=a=>w(xe(()=>{let c=a.next();if(e===1)return c.done?ea:w(Pn(He(c.value)),rn(()=>s(a)));n=[];let l=0;for(;c.done===!1&&(n.push(c.value),l=l+1,!(l>=e));)c=a.next();return l>0?w(Pn(Dn(n)),rn(()=>s(a))):ea}),Qi);return new ms(s(t))}),Dit),J$=(t,e)=>w(lst(t,1,e?.maxChunkSize??ZT),$T(n=>w(cst(t),Rt(s=>s&&rz(n)?bit():_it(n)))),Cit,e?.shutdown?G$(By(t)):At),Mit=(...t)=>Rit(t),Ait=$(2,(t,e)=>new ms(w(wr(t),GL(e)))),Cit=t=>Fit(t,e=>w(me(e,n=>ht([n,e])),zz(Ke({onNone:()=>nn(at()),onSome:Dz})))),Nit=$(2,(t,e)=>wr(t).pipe(rit(n4(e)),QL)),xit=$(2,(t,e)=>Nit(t,dit(e))),a4=t=>new ms(VL(XL(w(t,me(He))),se)),Iit=t=>i4(He(t)),o4=t=>new ms(KT(()=>wr(t()))),Fit=(t,e)=>o4(()=>{const n=s=>Qi(me(e(s),Ke({onNone:()=>ea,onSome:([a,c])=>rn(Pn(a),()=>n(c))})));return new ms(n(t))}),Dit=t=>s4(tO(t)),c4=t=>s4(a4(t)),zit=xs,Uit=wm,Lit=QL,jit=KT,FN=HT,Pit=ait,DN=XT,qit=wit,Bit=Eit,Kit=WT,u4=wr,Hit=J$,Vit=xit,Yit=Iit,Git=c4,Hy=Symbol.for("effect/Subscribable"),l4=t=>_t(t,Hy),Jit=hz,Qit="effect/SubscriptionRef",f4=Symbol.for(Qit),Xit={_A:t=>t};class Zit extends xc{ref;pubsub;semaphore;[El]=El;[Hy]=Hy;[XJ]=eT;[Jit]=dz;[f4]=Xit;constructor(e,n,s){super(),this.ref=e,this.pubsub=n,this.semaphore=s,this.get=zg(this.ref)}commit(){return this.get}get;get changes(){return w(zg(this.ref),Rt(e=>me(Oit(this.pubsub,{scoped:!0}),n=>$it(Mit(e),n))),this.semaphore.withPermits(1),c4)}modify(e){return this.modifyEffect(n=>nn(e(n)))}modifyEffect(e){return w(zg(this.ref),Rt(e),Rt(([n,s])=>w(dD(this.ref,s),Pg(n),OT(cL(this.pubsub,s)))),this.semaphore.withPermits(1))}}const Wit=t=>w(Fz([ist(),rT(t),qz(1)]),me(([e,n,s])=>new Zit(n,e,s))),tat=$(2,(t,e)=>w(dD(t.ref,e),OT(cL(t.pubsub,e)),t.semaphore.withPermits(1))),Q$=f4,zN=Wit,Vy=tat,eat=mD,nat=Symbol.for("@effect-rx/rx/Result"),O_={[nat]:{E:At,A:At},pipe(){return lt(this,arguments)},[It](t){if(this._tag!==t._tag&&this.waiting!==t.waiting)return!1;switch(this._tag){case"Initial":return!0;case"Success":return wt(this.value,t.value);case"Failure":return wt(this.cause,t.cause)}},[Dt](){const t=Fe(`${this._tag}:${this.waiting}`);return this._tag==="Initial"?ve(this,t):ve(this,Gt(t)(this._tag==="Success"?ft(this.value):ft(this.cause)))}},h4=(t,e)=>t._tag==="Success"?Cl(t.value):R_(t.cause,{previous:e}),eO=t=>t._tag==="None"?Ja(!0):k_(t.value),rat=t=>t._tag!=="Initial",Ja=(t=!1)=>{const e=Object.create(O_);return e._tag="Initial",e.waiting=t,e},Yy=t=>t._tag==="Success",Cl=(t,e)=>{const n=Object.create(O_);return n._tag="Success",n.value=t,n.waiting=e?.waiting??!1,n.timestamp=e?.timestamp??Date.now(),n},sat=(t,e)=>{const n=Object.create(O_);return n._tag="Failure",n.cause=t,n.previousSuccess=e?.previousSuccess??at(),n.waiting=e?.waiting??!1,n},R_=(t,e)=>sat(t,{previousSuccess:e.previous.pipe(P8(Yy)),waiting:e.waiting}),iat=(t,e)=>R_(nz(t),e),k_=t=>{if(t.waiting)return t;const e=Object.assign(Object.create(O_),t);return e.waiting=!0,e},Xh=(t,e)=>t._tag==="Failure"?R_(t.cause,{previous:e,waiting:t.waiting}):t,d4=t=>t._tag==="Success"?ht(t.value):t._tag==="Failure"?Po(t.previousSuccess,e=>e.value):at(),UN=t=>WI(d4(t),()=>new bm("Result.getOrThrow: no value found")),LN=t=>{switch(t._tag){case"Success":return qr(t.value);case"Failure":return Br(t.cause);default:return Ay(new bm)}},aat={immediate:!0};function oat(t){}const dv=Symbol.for("@effect-rx/rx/Registry"),cat=t=>new uat(t?.initialValues,t?.scheduleTask,t?.timeoutResolution,t?.defaultIdleTTL),X$=Symbol.for("@effect-rx/rx/Rx/Serializable"),Dh=t=>X$ in t?t[X$].key:t;class uat{scheduleTask;defaultIdleTTL;[dv];timeoutResolution;constructor(e,n=c=>queueMicrotask(c),s,a){if(this.scheduleTask=n,this.defaultIdleTTL=a,this[dv]=dv,s===void 0&&a!==void 0?this.timeoutResolution=Math.round(a/2):this.timeoutResolution=s??1e3,e!==void 0)for(const[c,l]of e)this.ensureNode(c).setValue(l)}nodes=new Map;preloadedSerializable=new Map;timeoutBuckets=new Map;nodeTimeoutBucket=new Map;disposed=!1;getNodes(){return this.nodes}get(e){return this.ensureNode(e).value()}set(e,n){e.write(this.ensureNode(e).writeContext,n)}setSerializable(e,n){this.preloadedSerializable.set(e,n)}modify(e,n){const s=this.ensureNode(e),a=n(s.value());return e.write(s.writeContext,a[1]),a[0]}update(e,n){const s=this.ensureNode(e);e.write(s.writeContext,n(s.value()))}refresh=e=>{e.refresh!==void 0?e.refresh(this.refresh):this.invalidateRx(e)};subscribe(e,n,s){const a=this.ensureNode(e);s?.immediate&&n(a.value());const c=a.subscribe(function(){n(a._value)});return()=>{c(),a.canBeRemoved&&this.scheduleNodeRemoval(a)}}mount(e){return this.subscribe(e,oat,aat)}rxHasTTL(e){return!e.keepAlive&&e.idleTTL!==0&&(e.idleTTL!==void 0||this.defaultIdleTTL!==void 0)}ensureNode(e){const n=Dh(e);let s=this.nodes.get(n);if(s===void 0?(s=this.createNode(e),this.nodes.set(n,s)):this.rxHasTTL(e)&&this.removeNodeTimeout(s),typeof n=="string"&&this.preloadedSerializable.has(n)){const a=this.preloadedSerializable.get(n);this.preloadedSerializable.delete(n);const c=e[X$].decode(a);s.setValue(c)}return s}createNode(e){if(this.disposed)throw new Error(`Cannot access Rx ${e}: registry is disposed`);return e.keepAlive||this.scheduleRxRemoval(e),new lat(this,e)}invalidateRx=e=>{this.ensureNode(e).invalidate()};scheduleRxRemoval(e){this.scheduleTask(()=>{const n=this.nodes.get(Dh(e));n!==void 0&&n.canBeRemoved&&this.removeNode(n)})}scheduleNodeRemoval(e){this.scheduleTask(()=>{e.canBeRemoved&&this.removeNode(e)})}removeNode(e){this.rxHasTTL(e.rx)?this.setNodeTimeout(e):(this.nodes.delete(Dh(e.rx)),e.remove())}setNodeTimeout(e){if(this.nodeTimeoutBucket.has(e))return;let n=e.rx.idleTTL??this.defaultIdleTTL;if(this.#t!==null&&(n-=this.#t,n<=0)){this.nodes.delete(Dh(e.rx)),e.remove();return}const s=Math.ceil(n/this.timeoutResolution)*this.timeoutResolution,a=Date.now()+s,c=a-a%this.timeoutResolution+this.timeoutResolution;let l=this.timeoutBuckets.get(c);l===void 0&&(l=[new Set,setTimeout(()=>this.sweepBucket(c),c-Date.now())],this.timeoutBuckets.set(c,l)),l[0].add(e),this.nodeTimeoutBucket.set(e,c)}removeNodeTimeout(e){const n=this.nodeTimeoutBucket.get(e);if(n===void 0)return;this.nodeTimeoutBucket.delete(e),this.scheduleNodeRemoval(e);const[s,a]=this.timeoutBuckets.get(n);s.delete(e),s.size===0&&(clearTimeout(a),this.timeoutBuckets.delete(n))}#t=null;sweepBucket(e){const n=this.timeoutBuckets.get(e)[0];this.timeoutBuckets.delete(e),n.forEach(s=>{s.canBeRemoved&&(this.nodeTimeoutBucket.delete(s),this.nodes.delete(Dh(s.rx)),this.#t=s.rx.idleTTL??this.defaultIdleTTL,s.remove(),this.#t=null)})}reset(){this.timeoutBuckets.forEach(([,e])=>clearTimeout(e)),this.timeoutBuckets.clear(),this.nodeTimeoutBucket.clear(),this.nodes.forEach(e=>e.remove()),this.nodes.clear()}dispose(){this.disposed=!0,this.reset()}}var Vu;(function(t){t[t.alive=1]="alive",t[t.initialized=2]="initialized",t[t.waitingForValue=4]="waitingForValue"})(Vu||(Vu={}));var Ts;(function(t){t[t.uninitialized=5]="uninitialized",t[t.stale=7]="stale",t[t.valid=3]="valid",t[t.removed=0]="removed"})(Ts||(Ts={}));class lat{registry;rx;constructor(e,n){this.registry=e,this.rx=n,this.writeContext=new dat(e,this)}state=Ts.uninitialized;lifetime;writeContext;parents=[];previousParents;children=[];listeners=[];skipInvalidation=!1;get canBeRemoved(){return!this.rx.keepAlive&&this.listeners.length===0&&this.children.length===0&&this.state!==0}_value=void 0;value(){if((this.state&Vu.waitingForValue)!==0){this.lifetime=hat(this);const e=this.rx.read(this.lifetime);if((this.state&Vu.waitingForValue)!==0&&this.setValue(e),this.previousParents){const n=this.previousParents;this.previousParents=void 0;for(let s=0;s<n.length;s++)n[s].removeChild(this),n[s].canBeRemoved&&this.registry.scheduleNodeRemoval(n[s])}}return this._value}valueOption(){return(this.state&Vu.initialized)===0?at():ht(this._value)}setValue(e){if((this.state&Vu.initialized)===0){this.state=Ts.valid,this._value=e,Je.phase===ii.collect?Je.notify.add(this):this.notify();return}this.state=Ts.valid,!wt(this._value,e)&&(this._value=e,this.skipInvalidation?this.skipInvalidation=!1:this.invalidateChildren(),this.listeners.length>0&&(Je.phase===ii.collect?Je.notify.add(this):this.notify()))}addParent(e){if(this.parents.push(e),this.previousParents!==void 0){const n=this.previousParents.indexOf(e);n!==-1&&(this.previousParents[n]=this.previousParents[this.previousParents.length-1],this.previousParents.pop()===void 0&&(this.previousParents=void 0))}e.children.indexOf(this)===-1&&e.children.push(this)}removeChild(e){const n=this.children.indexOf(e);n!==-1&&(this.children[n]=this.children[this.children.length-1],this.children.pop())}invalidate(){this.state===Ts.valid&&(this.state=Ts.stale,this.disposeLifetime()),Je.phase===ii.collect?Je.stale.push(this):this.rx.lazy&&this.listeners.length===0&&!m4(this.children)?(this.invalidateChildren(),this.skipInvalidation=!0):this.value()}invalidateChildren(){if(this.children.length===0)return;const e=this.children;this.children=[];for(let n=0;n<e.length;n++)e[n].invalidate()}notify(){for(let e=0;e<this.listeners.length;e++)this.listeners[e]();Je.phase===ii.commit&&Je.notify.delete(this)}disposeLifetime(){this.lifetime!==void 0&&(this.lifetime.dispose(),this.lifetime=void 0),this.parents.length!==0&&(this.previousParents=this.parents,this.parents=[])}remove(){if(this.state=Ts.removed,this.listeners=[],this.lifetime===void 0||(this.disposeLifetime(),this.previousParents===void 0))return;const e=this.previousParents;this.previousParents=void 0;for(let n=0;n<e.length;n++)e[n].removeChild(this),e[n].canBeRemoved&&this.registry.removeNode(e[n])}subscribe(e){return this.listeners.push(e),()=>{const n=this.listeners.indexOf(e);n!==-1&&(this.listeners[n]=this.listeners[this.listeners.length-1],this.listeners.pop())}}}function m4(t){if(t.length===0)return!1;for(let e=0,n=t.length;e<n;e++){const s=t[e];if(!s.rx.lazy||s.listeners.length>0)return!0}for(let e=0,n=t.length;e<n;e++)if(m4(t[e].children))return!0;return!1}const Xn=t=>new Error(`Cannot use context of disposed Rx: ${t}`),fat={get registry(){return this.node.registry},addFinalizer(t){if(this.disposed)throw Xn(this.node.rx);this.finalizers??=[],this.finalizers.push(t)},get(t){if(this.disposed)throw Xn(this.node.rx);const e=this.node.registry.ensureNode(t);return this.node.addParent(e),e.value()},result(t,e){if(this.disposed)throw Xn(this.node.rx);if(this.isFn)return this.resultOnce(t);const n=this.get(t);if(e?.suspendOnWaiting&&n.waiting)return Q0;switch(n._tag){case"Initial":return Q0;case"Failure":return Br(n.cause);case"Success":return nn(n.value)}},resultOnce(t,e){if(this.disposed)throw Xn(this.node.rx);return ZC(n=>{const s=this.once(t);if(s._tag!=="Initial"&&!(e?.suspendOnWaiting&&s.waiting))return n(LN(s));const a=this.node.registry.subscribe(t,c=>{c._tag==="Initial"||e?.suspendOnWaiting&&c.waiting||(a(),n(LN(c)))},{immediate:!1});return xe(a)})},some(t){if(this.disposed)throw Xn(this.node.rx);if(this.isFn)return this.someOnce(t);const e=this.get(t);return e._tag==="None"?Q0:nn(e.value)},someOnce(t){if(this.disposed)throw Xn(this.node.rx);return ZC(e=>{const n=this.once(t);if(ze(n))return e(nn(n.value));const s=this.node.registry.subscribe(t,a=>{pn(a)||(s(),e(nn(a.value)))},{immediate:!1});return xe(s)})},once(t){if(this.disposed)throw Xn(this.node.rx);return this.node.registry.get(t)},self(){if(this.disposed)throw Xn(this.node.rx);return this.node.valueOption()},refresh(t){if(this.disposed)throw Xn(this.node.rx);this.node.registry.refresh(t)},refreshSelf(){if(this.disposed)throw Xn(this.node.rx);this.node.invalidate()},mount(t){if(this.disposed)throw Xn(this.node.rx);this.addFinalizer(this.node.registry.mount(t))},subscribe(t,e,n){if(this.disposed)throw Xn(this.node.rx);this.addFinalizer(this.node.registry.subscribe(t,e,n))},setSelf(t){if(this.disposed)throw Xn(this.node.rx);this.node.setValue(t)},set(t,e){if(this.disposed)throw Xn(this.node.rx);this.node.registry.set(t,e)},stream(t,e){if(this.disposed)throw Xn(this.node.rx);return w(zy(uL(e?.bufferSize??16),By),TT(n=>zy(xe(()=>this.node.registry.subscribe(t,s=>{ust(n,s)},{immediate:e?.withoutInitialValue!==!0})),s=>xe(s))),me(n=>Hit(n)),Git)},streamResult(t,e){return w(this.stream(t,e),Bit(rat),Kit(n=>n._tag==="Success"?Yit(n.value):qit(n.cause)))},dispose(){if(this.disposed=!0,this.finalizers===void 0)return;const t=this.finalizers;this.finalizers=void 0;for(let e=t.length-1;e>=0;e--)t[e]()}},hat=t=>{function e(n){if(e.disposed)throw Xn(n);if(e.isFn)return t.registry.get(n);const s=t.registry.ensureNode(n);return t.addParent(s),s.value()}return Object.setPrototypeOf(e,fat),e.isFn=!1,e.disposed=!1,e.finalizers=void 0,e.node=t,e};class dat{registry;node;constructor(e,n){this.registry=e,this.node=n}get(e){return this.registry.get(e)}set(e,n){return this.registry.set(e,n)}setSelf(e){return this.node.setValue(e)}refreshSelf(){return this.node.invalidate()}}var ii;(function(t){t[t.disabled=0]="disabled",t[t.collect=1]="collect",t[t.commit=2]="commit"})(ii||(ii={}));const Je=zt("@effect-rx/rx/Registry/batchState",()=>({phase:ii.disabled,depth:0,stale:[],notify:new Set}));function mat(t){Je.phase=ii.collect,Je.depth++;try{if(t(),Je.depth===1){for(let e=0;e<Je.stale.length;e++)p4(Je.stale[e]);Je.phase=ii.commit;for(const e of Je.notify)e.notify();Je.notify.clear()}}finally{Je.depth--,Je.depth===0&&(Je.phase=ii.disabled,Je.stale=[])}}function p4(t){if(t.state!==Ts.valid){for(let e=0;e<t.parents.length;e++){const n=t.parents[e];n.state!==Ts.valid&&p4(n)}t.state!==Ts.valid&&t.value()}}const pat=t=>{const e=t;switch(e._tag){case"Failure":case"Success":return e;case"Left":return Ay(e.left);case"Right":return qr(e.right);case"Some":return qr(e.value);case"None":return Ay(new bm)}},nO=t=>{const e=pit(t);return(n,s,a=!1)=>{const c=pat(n);if(c){s(c);return}const l=new sT,d=e(n,{scheduler:l});l.flush();const m=d.unsafePoll();if(m){s(m);return}return d.addObserver(s),function(){d.removeObserver(s),a||d.unsafeInterruptAsFork(Za)}}},jN=Symbol.for("effect/Mailbox"),PN=Symbol.for("effect/Mailbox/ReadonlyMailbox"),xo=ke(),qN=ue(xo),bg=ue(!1),_g=ue(!0),BN=[xo,!0];class gat extends xc{scheduler;capacity;strategy;[jN]=jN;[PN]=PN;state={_tag:"Open",takers:new Set,offers:new Set,awaiters:new Set};messages=[];messagesChunk=ke();constructor(e,n,s){super(),this.scheduler=e,this.capacity=n,this.strategy=s}offer(e){return bt(()=>{if(this.state._tag!=="Open")return bg;if(this.messages.length+this.messagesChunk.length>=this.capacity)switch(this.strategy){case"dropping":return bg;case"suspend":return this.capacity<=0&&this.state.takers.size>0?(this.messages.push(e),this.releaseTaker(),_g):this.offerRemainingSingle(e);case"sliding":return this.unsafeTake(),this.messages.push(e),_g}return this.messages.push(e),this.scheduleReleaseTaker(),_g})}unsafeOffer(e){return this.state._tag!=="Open"?!1:this.messages.length+this.messagesChunk.length>=this.capacity?this.strategy==="sliding"?(this.unsafeTake(),this.messages.push(e),!0):this.capacity<=0&&this.state.takers.size>0?(this.messages.push(e),this.releaseTaker(),!0):!1:(this.messages.push(e),this.scheduleReleaseTaker(),!0)}offerAll(e){return bt(()=>{if(this.state._tag!=="Open")return nt(nc(e));const n=this.unsafeOfferAllArray(e);return n.length===0?qN:this.strategy==="dropping"?nt(Dn(n)):this.offerRemainingArray(n)})}unsafeOfferAll(e){return Dn(this.unsafeOfferAllArray(e))}unsafeOfferAllArray(e){if(this.state._tag!=="Open")return le(e);if(this.capacity===Number.POSITIVE_INFINITY||this.strategy==="sliding")return this.messages.length>0&&(this.messagesChunk=_e(this.messagesChunk,Dn(this.messages))),this.strategy==="sliding"?this.messagesChunk=this.messagesChunk.pipe(_e(nc(e)),wH(this.capacity)):Cb(e)?this.messagesChunk=_e(this.messagesChunk,e):this.messages=le(e),this.scheduleReleaseTaker(),[];const n=this.capacity<=0?this.state.takers.size:this.capacity-this.messages.length-this.messagesChunk.length;if(n===0)return le(e);const s=[];let a=0;for(const c of e)a<n?this.messages.push(c):s.push(c),a++;return this.scheduleReleaseTaker(),s}fail(e){return this.done(Rd(e))}failCause(e){return this.done(ce(e))}unsafeDone(e){return this.state._tag!=="Open"?!1:this.state.offers.size===0&&this.messages.length===0&&this.messagesChunk.length===0?(this.finalize(e),!0):(this.state={...this.state,_tag:"Closing",exit:e},!0)}shutdown=W(()=>{if(this.state._tag==="Done")return!0;this.messages=[],this.messagesChunk=xo;const e=this.state.offers;if(this.finalize(this.state._tag==="Open"?$r:this.state.exit),e.size>0){for(const n of e)n._tag==="Single"?n.resume(bg):n.resume(ue(Dn(n.remaining.slice(n.offset))));e.clear()}return!0});done(e){return W(()=>this.unsafeDone(e))}end=this.done($r);clear=bt(()=>{if(this.state._tag==="Done")return Fg(this.state.exit,xo);const e=this.unsafeTakeAll();return this.releaseCapacity(),nt(e)});takeAll=bt(()=>{if(this.state._tag==="Done")return Fg(this.state.exit,BN);const e=this.unsafeTakeAll();return e.length===0?De(this.awaitTake,this.takeAll):nt([e,this.releaseCapacity()])});takeN(e){return bt(()=>{if(this.state._tag==="Done")return Fg(this.state.exit,BN);if(e<=0)return nt([xo,!1]);e=Math.min(e,this.capacity);let n;if(e<=this.messagesChunk.length)n=my(this.messagesChunk,e),this.messagesChunk=ja(this.messagesChunk,e);else if(e<=this.messages.length+this.messagesChunk.length)this.messagesChunk=_e(this.messagesChunk,Dn(this.messages)),this.messages=[],n=my(this.messagesChunk,e),this.messagesChunk=ja(this.messagesChunk,e);else return De(this.awaitTake,this.takeN(e));return nt([n,this.releaseCapacity()])})}unsafeTake(){if(this.state._tag==="Done")return NF(this.state.exit,Rd(new bm));let e;if(this.messagesChunk.length>0)e=mE(this.messagesChunk),this.messagesChunk=ja(this.messagesChunk,1);else if(this.messages.length>0)e=this.messages[0],this.messagesChunk=ja(Dn(this.messages),1),this.messages=[];else return this.capacity<=0&&this.state.offers.size>0?(this.capacity=1,this.releaseCapacity(),this.capacity=0,this.messages.length>0?ue(this.messages.pop()):void 0):void 0;return this.releaseCapacity(),ue(e)}take=bt(()=>this.unsafeTake()??De(this.awaitTake,this.take));await=Io(e=>this.state._tag==="Done"?e(this.state.exit):(this.state.awaiters.add(e),W(()=>{this.state._tag!=="Done"&&this.state.awaiters.delete(e)})));unsafeSize(){const e=this.messages.length+this.messagesChunk.length;return this.state._tag==="Done"?at():ht(e)}size=W(()=>this.unsafeSize());commit(){return this.takeAll}pipe(){return lt(this,arguments)}toJSON(){return{_id:"effect/Mailbox",state:this.state._tag,size:this.unsafeSize().toJSON()}}toString(){return Te(this)}[pe](){return Te(this)}offerRemainingSingle(e){return Io(n=>{if(this.state._tag!=="Open")return n(bg);const s={_tag:"Single",message:e,resume:n};return this.state.offers.add(s),W(()=>{this.state._tag==="Open"&&this.state.offers.delete(s)})})}offerRemainingArray(e){return Io(n=>{if(this.state._tag!=="Open")return n(ue(Dn(e)));const s={_tag:"Array",remaining:e,offset:0,resume:n};return this.state.offers.add(s),W(()=>{this.state._tag==="Open"&&this.state.offers.delete(s)})})}releaseCapacity(){if(this.state._tag==="Done")return this.state.exit._tag==="Success";if(this.state.offers.size===0)return this.state._tag==="Closing"&&this.messages.length===0&&this.messagesChunk.length===0?(this.finalize(this.state.exit),this.state.exit._tag==="Success"):!1;let e=this.capacity-this.messages.length-this.messagesChunk.length;for(const n of this.state.offers){if(e===0)return!1;if(n._tag==="Single")this.messages.push(n.message),e--,n.resume(_g),this.state.offers.delete(n);else{for(;n.offset<n.remaining.length;n.offset++){if(e===0)return!1;this.messages.push(n.remaining[n.offset]),e--}n.resume(qN),this.state.offers.delete(n)}}return!1}awaitTake=Io(e=>this.state._tag==="Done"?e(this.state.exit):(this.state.takers.add(e),W(()=>{this.state._tag!=="Done"&&this.state.takers.delete(e)})));scheduleRunning=!1;scheduleReleaseTaker(){this.scheduleRunning||(this.scheduleRunning=!0,this.scheduler.scheduleTask(this.releaseTaker,0))}releaseTaker=()=>{if(this.scheduleRunning=!1,this.state._tag==="Done")return;if(this.state.takers.size===0)return;const e=Y8(this.state.takers);this.state.takers.delete(e),e($r)};unsafeTakeAll(){if(this.messagesChunk.length>0){const e=this.messages.length>0?_e(this.messagesChunk,Dn(this.messages)):this.messagesChunk;return this.messagesChunk=xo,this.messages=[],e}else if(this.messages.length>0){const e=Dn(this.messages);return this.messages=[],e}else if(this.state._tag!=="Done"&&this.state.offers.size>0)return this.capacity=1,this.releaseCapacity(),this.capacity=0,He(this.messages.pop());return xo}finalize(e){if(this.state._tag==="Done")return;const n=this.state;this.state={_tag:"Done",exit:e};for(const s of n.takers)s(e);n.takers.clear();for(const s of n.awaiters)s(e);n.awaiters.clear()}}const yat=t=>ee(e=>nt(new gat(e.currentScheduler,typeof t=="number"?t:t?.capacity??Number.POSITIVE_INFINITY,typeof t=="number"?"suspend":t?.strategy??"suspend"))),bat=yat,_at=cat;class g4 extends S8("@effect/rx/Registry/CurrentRegistry")(){}const Z$=Symbol.for("@effect-rx/rx/Rx"),KN=Symbol.for("@effect-rx/rx/Rx/Writable"),rO={[Z$]:Z$,pipe(){return lt(this,arguments)},toJSON(){return{_id:"Rx",keepAlive:this.keepAlive,lazy:this.lazy,label:this.label}},toString(){return Te(this)},[pe](){return this.toJSON()}},Sat={...rO,rx(t,e){const n=y4(t,e);return qa(s=>{const a=s.self(),c=s(this);return c._tag!=="Success"?Xh(c,a):n(s,c.value)})},fn(t,e){return arguments.length===0?(n,s)=>HN(this,n,s):HN(this,t,e)},pull(t,e){const n=Gy(0),s=qa(a=>{const c=a.self(),l=a(this);return l._tag!=="Success"?Xh(l,c):cd(a,Cat(a,n,t,e),Ja(!0),l.value)});return Nat(n,s)},subscriptionRef(t){return Rat(qa(e=>{const n=e.self(),s=e(this);if(s._tag!=="Success")return Xh(s,n);const a=typeof t=="function"?t(e):t;return Q$ in a?a:cd(e,a,Ja(!0),s.value)}),(e,n)=>{const s=UN(e(this));return GN(e,n,s)})},subscribable(t){return kat(qa(e=>{const n=e.self(),s=e(this);if(s._tag!=="Success")return Xh(s,n);const a=typeof t=="function"?t(e):t;return l4(a)?a:cd(e,a,Ja(!0),s.value)}),(e,n)=>{const s=UN(e(this));return GN(e,n,s)})}},HN=(t,e,n)=>{const[s,a,c]=Aat(e,n);return M_(l=>{l.get(c);const d=l.self(),m=l.get(t);return m._tag!=="Success"?Xh(m,d):s(l,m.value)},a)},vat={...rO,[KN]:KN},qa=(t,e)=>{const n=Object.create(rO);return n.keepAlive=!1,n.lazy=!0,n.read=t,n.refresh=e,n},M_=(t,e,n)=>{const s=Object.create(vat);return s.keepAlive=!1,s.lazy=!0,s.read=t,s.write=e,s.refresh=n,s};function $at(t,e){t.setSelf(e)}const wat=(t,e)=>{const n=y4(t,e);return Z$ in n?n:qa(n)},VN=t=>F8 in t||R8 in t,y4=(t,e)=>{if(typeof t=="function"){const n=t;return function(s,a){const c=n(s);if(typeof c=="object"&&c!==null){if(VN(c))return c;if(M$ in c)return W$(s,c,e,a);if(DN in c)return YN(s,c,e,a)}return c}}else if(typeof t=="object"&&t!==null){if(VN(t))return Gy(t);if(M$ in t)return function(n,s){return W$(n,t,e,s)};if(DN in t)return function(n,s){return YN(n,t,e,s)}}return Gy(t)},Gy=t=>M_(function(e){return t},$at),W$=(t,e,n,s)=>{const a=n?.initialValue!==void 0?Cl(n.initialValue):Ja();return cd(t,e,a,s,n?.uninterruptible)};function cd(t,e,n,s=T_,a=!1){const c=t.self(),l=Rl(lz());t.addFinalizer(()=>{Bz(Dy(l,$D))});const d=new Map(s.context.unsafeMap);d.set(CW.key,l),d.set(g4.key,t.registry);const m=QT({context:b8(d),fiberRefs:s.fiberRefs,runtimeFlags:s.runtimeFlags});let p,y=!1;const b=nO(m)(e,function(S){p=h4(S,c),y&&t.setSelf(p)},a);return y=!0,b!==void 0&&t.addFinalizer(b),p!==void 0?p:c._tag==="Some"?eO(c):k_(n)}const Eat=t=>{const e=t?.memoMap??Rl(Hz);let n;function s(a){const c=Object.create(Sat);c.keepAlive=!1,c.lazy=!0,c.refresh=void 0;const l=b4(qa(typeof a=="function"?d=>n?Z0(a(d),n):a(d):()=>n?Z0(a,n):a));return c.layer=l,c.read=function(m){const p=m(l),y=Rt(Rt(ET,b=>wet(p,e,b)),b=>Uy(Pz(),b));return W$(m,y,{uninterruptible:!0})},c}return s.memoMap=e,s.addGlobalLayer=a=>{n===void 0?n=a:n=Z0(n,a)},s},Tat=zt("@effect-rx/rx/Rx/defaultMemoMap",()=>Rl(Hz)),Oat=zt("@effect-rx/rx/Rx/defaultContext",()=>Eat({memoMap:Tat})),YN=(t,e,n,s)=>{const a=n?.initialValue!==void 0?Cl(n.initialValue):Ja();return sO(t,e,a,s)};function sO(t,e,n,s=T_){const a=t.self(),c=Uit({onInput(m){return jit(()=>{const p=vH(m);return p._tag==="Some"&&t.setSelf(Cl(p.value,{waiting:!0})),c})},onFailure(m){return FN(()=>{t.setSelf(R_(m,{previous:a}))})},onDone(m){return FN(()=>{w(t.self(),rf(d4),Ke({onNone:()=>t.setSelf(iat(new bm,{previous:a})),onSome:p=>t.setSelf(Cl(p))}))})}}),l=QT({context:za(s.context,g4,t.registry),fiberRefs:s.fiberRefs,runtimeFlags:s.runtimeFlags}),d=nO(l)(Lit(zit(u4(e),c)),md);return d!==void 0&&t.addFinalizer(d),a._tag==="Some"?eO(a):k_(n)}const GN=(t,e,n=T_)=>Hy in e?(t.addFinalizer(e.changes.pipe(Vit(s=>(t.setSelf(s),se)),yit(n))),git(n)(e.get)):e._tag!=="Success"?e:sO(t,e.value.changes,Ja(!0),n),Rat=(t,e)=>{function n(s,a){const c=s.get(t);Q$ in c?Rl(Vy(c,a)):Yy(c)&&Rl(Vy(c.value,a))}return M_(s=>{const a=s(t);return Q$ in a||Yy(a)?e(s,a):a},n)},kat=(t,e)=>qa(n=>{const s=n(t);return l4(s)||Yy(s)?e(n,s):s}),Mat=Symbol.for("@effect-rx/rx/Rx/Reset");function Aat(t,e){const n=Gy([0,void 0]),s=e?.initialValue!==void 0?Cl(e.initialValue):Ja();function a(l,d){l.isFn=!0;const[m,p]=l.get(n);if(m===0)return s;const y=t(p,l);return M$ in y?cd(l,y,s,d):sO(l,y,s,d)}function c(l,d){xat(()=>{d===Mat?l.set(n,[0,void 0]):l.set(n,[l.get(n)[0]+1,d]),l.refreshSelf()})}return[a,c,n]}const Cat=(t,e,n,s)=>Rt(Pit(u4(typeof n=="function"?n(t):n)),a=>{const c=vet(1),l=U8(YW()),d=l.currentContext;let m=ke();const p=c.withPermits(1)(Rt(yet(We(()=>a),urt,d),vr({onLeft:()=>nn({done:!0,items:ai(m)}),onRight(S){let v;return s?.disableAccumulation?v=S:(v=_e(m,S),m=v),nn({done:!1,items:ai(v)})}}))),y=nO(QT({context:d,fiberRefs:l.getFiberRefs(),runtimeFlags:T_.runtimeFlags})),b=new Set;return t.addFinalizer(()=>{for(const S of b)S()}),t.once(e),t.subscribe(e,()=>{t.setSelf(eO(t.self()));let S;S=y(p,v=>{S&&b.delete(S);const E=h4(v,t.self()),N=b.size>0;t.setSelf(N?k_(E):E)}),S&&b.add(S)}),p}),Nat=(t,e)=>M_(e.read,function(n,s){n.set(t,n.get(t)+1)}),b4=t=>Object.assign(Object.create(Object.getPrototypeOf(t)),{...t,keepAlive:!0}),xat=mat;var JN=$I();function Iat(t){JN.unstable_scheduleCallback(JN.unstable_LowPriority,t)}const Fat=Xe.createContext(_at({scheduleTask:Iat,defaultIdleTTL:400})),QN=zt("@effect-rx/rx-react/storeRegistry",()=>new WeakMap);function Dat(t,e){let n=QN.get(t);n===void 0&&(n=new WeakMap,QN.set(t,n));const s=n.get(e);if(s!==void 0)return s;const a={subscribe(c){return t.subscribe(e,c)},snapshot(){return t.get(e)}};return n.set(e,a),a}function zat(t,e){const n=Dat(t,e);return Xe.useSyncExternalStore(n.subscribe,n.snapshot,n.snapshot)}const Uat=zt("@effect-rx/rx-react/rxPromiseMap",()=>({suspendOnWaiting:new Map,default:new Map}));function Lat(t,e,n){const s=Uat.default;let a=s.get(e);return a!==void 0||(a=new Promise(c=>{const l=t.subscribe(e,d=>{d._tag==="Initial"||n||(setTimeout(l,1e3),c(),s.delete(e))})}),s.set(e,a)),a}function jat(t,e,n){const s=zat(t,e);if(s._tag==="Initial"||n)throw Lat(t,e,n);return s}const Pat=(t,e)=>{const n=Xe.useContext(Fat);return jat(n,t,!1)},XN=(t,e)=>{const n=Pat(t);if(n._tag==="Failure")throw eW(n.cause);return n},qat=t=>typeof t=="function",D=function(t,e){if(typeof t=="function")return function(){return t(arguments)?e.apply(this,arguments):n=>e(n,...arguments)};switch(t){case 0:case 1:throw new RangeError(`Invalid arity ${t}`);case 2:return function(n,s){return arguments.length>=2?e(n,s):function(a){return e(a,n)}};case 3:return function(n,s,a){return arguments.length>=3?e(n,s,a):function(c){return e(c,n,s)}};case 4:return function(n,s,a,c){return arguments.length>=4?e(n,s,a,c):function(l){return e(l,n,s,a)}};case 5:return function(n,s,a,c,l){return arguments.length>=5?e(n,s,a,c,l):function(d){return e(d,n,s,a,c)}};default:return function(){if(arguments.length>=t)return e.apply(this,arguments);const n=arguments;return function(s){return e(s,...n)}}}},sn=t=>t,A_=t=>()=>t,ZN=A_(!0),tw=A_(!1),_4=A_(void 0),Bat=_4;function Q(t,e,n,s,a,c,l,d,m){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return s(n(e(t)));case 5:return a(s(n(e(t))));case 6:return c(a(s(n(e(t)))));case 7:return l(c(a(s(n(e(t))))));case 8:return d(l(c(a(s(n(e(t)))))));case 9:return m(d(l(c(a(s(n(e(t))))))));default:{let p=arguments[0];for(let y=1;y<arguments.length;y++)p=arguments[y](p);return p}}}const Nl=t=>(e,n)=>e===n||t(e,n),Kat=D(2,(t,e)=>Nl((n,s)=>t(e(n),e(s)))),Hat=t=>Nl((e,n)=>{if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(!t(e[s],n[s]))return!1;return!0}),WN="effect/GlobalValue";let zh;const Xt=(t,e)=>(zh||(globalThis[WN]??=new Map,zh=globalThis[WN]),zh.has(t)||zh.set(t,e()),zh.get(t)),Vat=t=>t instanceof Map,na=t=>typeof t=="string",yc=t=>typeof t=="number",iO=t=>typeof t=="boolean",C_=t=>typeof t=="bigint",ew=t=>typeof t=="symbol",Rm=qat,Yat=t=>t===void 0,Gat=t=>!1,aO=t=>typeof t=="object"&&t!==null,oo=t=>aO(t)||Rm(t),Ut=D(2,(t,e)=>oo(t)&&e in t),S4=D(2,(t,e)=>Ut(t,"_tag")&&t._tag===e),Cu=t=>t==null,Jat=t=>t!=null,Qat=t=>t instanceof Date,v4=t=>Ut(t,Symbol.iterator),Xat=t=>aO(t)&&!Array.isArray(t),Zat=t=>Ut(t,"then")&&Rm(t.then),N_=t=>`BUG: ${t} - please report an issue at https://github.com/Effect-TS/effect/issues`;let $4=class w4{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new w4(this.self)}};const Wat=335903614,tot=4150755663,eot=1481765933,not=1284865837,rot=9007199254740992,sot=134217728;class iot{_state;constructor(e,n,s,a){return Cu(n)&&Cu(e)?(n=Math.random()*4294967295>>>0,e=0):Cu(n)&&(n=e,e=0),Cu(a)&&Cu(s)?(a=this._state?this._state[3]:tot,s=this._state?this._state[2]:Wat):Cu(a)&&(a=s,s=0),this._state=new Int32Array([0,0,s>>>0,((a||0)|1)>>>0]),this._next(),tx(this._state,this._state[0],this._state[1],e>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=e[3]|1}integer(e){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%e}number(){const e=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(e*sot+n)/rot}_next(){const e=this._state[0]>>>0,n=this._state[1]>>>0;aot(this._state,e,n,eot,not),tx(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let s=e>>>18,a=(n>>>18|e<<14)>>>0;s=(s^e)>>>0,a=(a^n)>>>0;const c=(a>>>27|s<<5)>>>0,l=e>>>27,d=(-l>>>0&31)>>>0;return(c>>>l|c<<d)>>>0}}function aot(t,e,n,s,a){let c=(n>>>16)*(a&65535)>>>0,l=(n&65535)*(a>>>16)>>>0,d=(n&65535)*(a&65535)>>>0,m=(n>>>16)*(a>>>16)+((l>>>16)+(c>>>16))>>>0;l=l<<16>>>0,d=d+l>>>0,d>>>0<l>>>0&&(m=m+1>>>0),c=c<<16>>>0,d=d+c>>>0,d>>>0<c>>>0&&(m=m+1>>>0),m=m+Math.imul(n,s)>>>0,m=m+Math.imul(e,a)>>>0,t[0]=m,t[1]=d}function tx(t,e,n,s,a){let c=e+s>>>0;const l=n+a>>>0;l>>>0<n>>>0&&(c=c+1|0),t[0]=c,t[1]=l}const nw=Symbol.for("effect/Utils/YieldWrap");class km{#t;constructor(e){this.#t=e}[nw](){return this.#t}}function oot(t){if(typeof t=="object"&&t!==null&&nw in t)return t[nw]();throw new Error(N_("yieldWrapGet"))}const is=Xt("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),E4={effect_internal_function:t=>t()},cot={effect_internal_function:t=>{try{return t()}finally{}}},uot=E4.effect_internal_function(()=>new Error().stack)?.includes("effect_internal_function")===!0,or=uot?E4.effect_internal_function:cot.effect_internal_function,mv=Xt(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),Kt=Symbol.for("effect/Hash"),mt=t=>{if(is.enabled===!0)return 0;switch(typeof t){case"number":return cO(t);case"bigint":return tn(t.toString(10));case"boolean":return tn(String(t));case"symbol":return tn(String(t));case"string":return tn(t);case"undefined":return tn("undefined");case"function":case"object":return t===null?tn("null"):t instanceof Date?mt(t.toISOString()):t instanceof URL?mt(t.href):lot(t)?t[Kt]():oO(t);default:throw new Error(`BUG: unhandled typeof ${typeof t} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},oO=t=>(mv.has(t)||mv.set(t,cO(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),mv.get(t)),Wt=t=>e=>e*53^t,x_=t=>t&3221225471|t>>>1&1073741824,lot=t=>Ut(t,Kt),cO=t=>{if(t!==t||t===1/0)return 0;let e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)e^=t/=4294967295;return x_(e)},tn=t=>{let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return x_(e)},fot=(t,e)=>{let n=12289;for(let s=0;s<e.length;s++)n^=Q(tn(e[s]),Wt(mt(t[e[s]])));return x_(n)},T4=t=>fot(t,Object.keys(t)),Mm=t=>{let e=6151;for(let n=0;n<t.length;n++)e=Q(e,Wt(mt(t[n])));return x_(e)},Le=function(){if(arguments.length===1){const n=arguments[0];return function(s){return Object.defineProperty(n,Kt,{value(){return s},enumerable:!1}),s}}const t=arguments[0],e=arguments[1];return Object.defineProperty(t,Kt,{value(){return e},enumerable:!1}),e},Pt=Symbol.for("effect/Equal");function qt(){return arguments.length===1?t=>Jy(t,arguments[0]):Jy(arguments[0],arguments[1])}function Jy(t,e){if(t===e)return!0;const n=typeof t;if(n!==typeof e)return!1;if(n==="object"||n==="function"){if(t!==null&&e!==null){if(Qy(t)&&Qy(e))return mt(t)===mt(e)&&t[Pt](e)?!0:is.enabled&&is.tester?is.tester(t,e):!1;if(t instanceof Date&&e instanceof Date)return t.toISOString()===e.toISOString();if(t instanceof URL&&e instanceof URL)return t.href===e.href}if(is.enabled){if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every((s,a)=>Jy(s,e[a]));if(Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const s=Object.keys(t),a=Object.keys(e);if(s.length===a.length){for(const c of s)if(!(c in e&&Jy(t[c],e[c])))return is.tester?is.tester(t,e):!1;return!0}}return is.tester?is.tester(t,e):!1}}return is.enabled&&is.tester?is.tester(t,e):!1}const Qy=t=>Ut(t,Pt),uO=()=>qt,Ae=Symbol.for("nodejs.util.inspect.custom"),mn=t=>{try{if(Ut(t,"toJSON")&&Rm(t.toJSON)&&t.toJSON.length===0)return t.toJSON();if(Array.isArray(t))return t.map(mn)}catch{return{}}return dot(t)},On=t=>JSON.stringify(t,null,2),xl=(t,e=2)=>{if(typeof t=="string")return t;try{return typeof t=="object"?O4(t,e):String(t)}catch{return String(t)}},O4=(t,e)=>{let n=[];const s=JSON.stringify(t,(a,c)=>typeof c=="object"&&c!==null?n.includes(c)?void 0:n.push(c)&&(Go.fiberRefs!==void 0&&R4(c)?c[lO](Go.fiberRefs):c):c,e);return n=void 0,s},lO=Symbol.for("effect/Inspectable/Redactable"),R4=t=>typeof t=="object"&&t!==null&&lO in t,Go=Xt("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),hot=(t,e)=>{const n=Go.fiberRefs;Go.fiberRefs=t;try{return e()}finally{Go.fiberRefs=n}},dot=t=>R4(t)&&Go.fiberRefs!==void 0?t[lO](Go.fiberRefs):t,Ct=(t,e)=>{switch(e.length){case 0:return t;case 1:return e[0](t);case 2:return e[1](e[0](t));case 3:return e[2](e[1](e[0](t)));case 4:return e[3](e[2](e[1](e[0](t))));case 5:return e[4](e[3](e[2](e[1](e[0](t)))));case 6:return e[5](e[4](e[3](e[2](e[1](e[0](t))))));case 7:return e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))));case 8:return e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t))))))));case 9:return e[8](e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))))));default:{let n=t;for(let s=0,a=e.length;s<a;s++)n=e[s](n);return n}}},ud="Async",I_="Commit",Is="Failure",pv="OnFailure",Xy="OnSuccess",Zy="OnSuccessAndFailure",Fs="Success",k4="Sync",mot="Tag",Am="UpdateRuntimeFlags",Wy="While",Yg="Iterator",M4="WithRuntime",Gg="Yield",fO="RevertFlags";let pot="3.17.3";const hO=()=>pot,got=Symbol.for("effect/Effect"),yot=Symbol.for("effect/Stream"),bot=Symbol.for("effect/Sink"),_ot=Symbol.for("effect/Channel"),Il={_R:t=>t,_E:t=>t,_A:t=>t,_V:hO()},Sot={_A:t=>t,_In:t=>t,_L:t=>t,_E:t=>t,_R:t=>t},vot={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutElem:t=>t,_OutDone:t=>t},Cm={[got]:Il,[yot]:Il,[bot]:Sot,[_ot]:vot,[Pt](t){return this===t},[Kt](){return Le(this,oO(this))},[Symbol.iterator](){return new $4(new km(this))},pipe(){return Ct(this,arguments)}},dO={[Kt](){return Le(this,T4(this))},[Pt](t){const e=Object.keys(this),n=Object.keys(t);if(e.length!==n.length)return!1;for(const s of e)if(!(s in t&&qt(this[s],t[s])))return!1;return!0}},Nm={...Cm,_op:I_},$ot={...Nm,...dO},wot=function(){function t(){}return t.prototype=Nm,t}(),A4=Symbol.for("effect/Option"),C4={...Cm,[A4]:{_A:t=>t},[Ae](){return this.toJSON()},toString(){return On(this.toJSON())}},Eot=Object.assign(Object.create(C4),{_tag:"Some",_op:"Some",[Pt](t){return mO(t)&&N4(t)&&qt(this.value,t.value)},[Kt](){return Le(this,Wt(mt(this._tag))(mt(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:mn(this.value)}}}),Tot=mt("None"),Oot=Object.assign(Object.create(C4),{_tag:"None",_op:"None",[Pt](t){return mO(t)&&pO(t)},[Kt](){return Tot},toJSON(){return{_id:"Option",_tag:this._tag}}}),mO=t=>Ut(t,A4),pO=t=>t._tag==="None",N4=t=>t._tag==="Some",x4=Object.create(Oot),rw=t=>{const e=Object.create(Eot);return e.value=t,e},I4=Symbol.for("effect/Either"),F4={...Cm,[I4]:{_R:t=>t},[Ae](){return this.toJSON()},toString(){return On(this.toJSON())}},Rot=Object.assign(Object.create(F4),{_tag:"Right",_op:"Right",[Pt](t){return gO(t)&&z4(t)&&qt(this.right,t.right)},[Kt](){return Wt(mt(this._tag))(mt(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:mn(this.right)}}}),kot=Object.assign(Object.create(F4),{_tag:"Left",_op:"Left",[Pt](t){return gO(t)&&D4(t)&&qt(this.left,t.left)},[Kt](){return Wt(mt(this._tag))(mt(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:mn(this.left)}}}),gO=t=>Ut(t,I4),D4=t=>t._tag==="Left",z4=t=>t._tag==="Right",U4=t=>{const e=Object.create(kot);return e.left=t,e},L4=t=>{const e=Object.create(Rot);return e.right=t,e},Mot=D(2,(t,e)=>pO(t)?U4(e()):L4(t.value)),te=L4,Lt=U4,Aot=Mot,Cot=gO,wn=D4,Bi=z4,Not=D(2,(t,{onLeft:e,onRight:n})=>wn(t)?Lt(e(t.left)):te(n(t.right))),xot=D(2,(t,e)=>wn(t)?Lt(e(t.left)):te(t.right)),Iot=D(2,(t,e)=>Bi(t)?te(e(t.right)):Lt(t.left)),yO=D(2,(t,{onLeft:e,onRight:n})=>wn(t)?e(t.left):n(t.right)),Fot=yO({onLeft:sn,onRight:sn}),j4=D(2,(t,e)=>{if(Bi(t))return t.right;throw e(t.left)}),Dot=j4(()=>new Error("getOrThrow called on a Left")),P4=t=>t.length>0,q4=t=>(e,n)=>e===n?0:t(e,n),zot=q4((t,e)=>t<e?-1:1),B4=D(2,(t,e)=>q4((n,s)=>t(e(n),e(s)))),Uot=t=>D(2,(e,n)=>t(e,n)===1),St=()=>x4,jt=rw,Lot=mO,Ue=pO,Wn=N4,lr=D(2,(t,{onNone:e,onSome:n})=>Ue(t)?e():n(t.value)),Rn=D(2,(t,e)=>Ue(t)?e():t.value),Qa=D(2,(t,e)=>Ue(t)?e():t),jot=D(2,(t,e)=>Ue(t)?jt(e()):t),F_=t=>t==null?St():jt(t),Ws=Rn(_4),Pot=t=>(...e)=>{try{return jt(t(...e))}catch{return St()}},K4=D(2,(t,e)=>Ue(t)?St():jt(e(t.value))),D_=D(2,(t,e)=>Ue(t)?St():e(t.value)),qot=D(2,(t,e)=>Ue(t)?St():F_(e(t.value))),Bot=t=>Nl((e,n)=>Ue(e)?Ue(n):Ue(n)?!1:t(e.value,n.value)),Kot=t=>D(2,(e,n)=>Ue(e)?!1:t(e.value,n)),Hot=uO(),Vot=Kot(Hot),Yot=D(2,(t,e)=>Ue(t)?!1:e(t.value)),Got=(...t)=>t,z_=t=>new Array(t),Jot=D(2,(t,e)=>{const n=Math.max(1,Math.floor(t)),s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a);return s}),an=t=>Array.isArray(t)?t:Array.from(t),Qot=t=>Array.isArray(t)?t:[t],Xot=D(2,(t,{onEmpty:e,onNonEmpty:n})=>kn(t)?n(ur(t),bc(t)):e()),tb=D(2,(t,e)=>[e,...t]),Zot=D(2,(t,e)=>[...t,e]),H4=D(2,(t,e)=>an(t).concat(an(e))),Wot=Array.isArray,tct=t=>t.length===0,ect=tct,Jg=P4,kn=P4,V4=(t,e)=>t<0||t>=e.length,nct=(t,e)=>Math.floor(Math.min(Math.max(0,t),e.length)),rct=D(2,(t,e)=>{const n=Math.floor(e);return V4(n,t)?St():jt(t[n])}),Y4=D(2,(t,e)=>{const n=Math.floor(e);if(V4(n,t))throw new Error(`Index ${n} out of bounds`);return t[n]}),ld=rct(0),ur=Y4(0),sct=t=>kn(t)?jt(G4(t)):St(),G4=t=>t[t.length-1],bc=t=>t.slice(1),ict=(t,e)=>{let n=0;for(const s of t){if(!e(s,n))break;n++}return n},act=D(2,(t,e)=>lct(t,ict(t,e))),oct=D(2,(t,e)=>{const n=an(t);return n.slice(nct(e,n),n.length)}),ex=t=>Array.from(t).reverse(),Ud=D(2,(t,e)=>{const n=Array.from(t);return n.sort(e),n}),nx=D(2,(t,e)=>cct(t,e,Got)),cct=D(3,(t,e,n)=>{const s=an(t),a=an(e);if(kn(s)&&kn(a)){const c=[n(ur(s),ur(a))],l=Math.min(s.length,a.length);for(let d=1;d<l;d++)c[d]=n(s[d],a[d]);return c}return[]}),uct=uO(),lct=D(2,(t,e)=>{const n=Array.from(t),s=Math.floor(e);return kn(n)?s>=1?fct(n,s):[[],n]:[n,[]]}),fct=D(2,(t,e)=>{const n=Math.max(1,Math.floor(e));return n>=t.length?[Zh(t),[]]:[tb(t.slice(1,n),ur(t)),t.slice(n)]}),Zh=t=>t.slice(),hct=D(3,(t,e,n)=>{const s=an(t),a=an(e);return kn(s)?kn(a)?X4(n)(H4(s,a)):s:a}),Qg=D(2,(t,e)=>hct(t,e,uct)),Fl=()=>[],$s=t=>[t],sl=D(2,(t,e)=>t.map(e)),J4=D(2,(t,e)=>{if(ect(t))return[];const n=[];for(let s=0;s<t.length;s++){const a=e(t[s],s);for(let c=0;c<a.length;c++)n.push(a[c])}return n}),dct=J4(sn),Q4=D(3,(t,e,n)=>an(t).reduce((s,a,c)=>n(s,a,c),e)),rx=(t,e)=>{const n=[];let s=t,a;for(;Wn(a=e(s));){const[c,l]=a.value;n.push(c),s=l}return n},U_=Hat,X4=D(2,(t,e)=>{const n=an(t);if(kn(n)){const s=[ur(n)],a=bc(n);for(const c of a)s.every(l=>!e(c,l))&&s.push(c);return s}return[]}),mct=t=>X4(t,uO()),bf=D(2,(t,e)=>an(t).join(e)),pct=t=>{try{return t.trim()===""?St():jt(BigInt(t))}catch{return St()}},Z4=Symbol.for("effect/Chunk");function gct(t,e,n,s,a){for(let c=e;c<Math.min(t.length,e+a);c++)n[s+c-e]=t[c];return n}const W4=[],yct=t=>Nl((e,n)=>e.length===n.length&&Jo(e).every((s,a)=>t(s,il(n,a)))),bct=yct(qt),_ct={[Z4]:{_A:t=>t},toString(){return On(this.toJSON())},toJSON(){return{_id:"Chunk",values:Jo(this).map(mn)}},[Ae](){return this.toJSON()},[Pt](t){return tj(t)&&bct(this,t)},[Kt](){return Le(this,Mm(Jo(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return W4[Symbol.iterator]();default:return Jo(this)[Symbol.iterator]()}},pipe(){return Ct(this,arguments)}},ln=t=>{const e=Object.create(_ct);switch(e.backing=t,t._tag){case"IEmpty":{e.length=0,e.depth=0,e.left=e,e.right=e;break}case"IConcat":{e.length=t.left.length+t.right.length,e.depth=1+Math.max(t.left.depth,t.right.depth),e.left=t.left,e.right=t.right;break}case"IArray":{e.length=t.array.length,e.depth=0,e.left=ti,e.right=ti;break}case"ISingleton":{e.length=1,e.depth=0,e.left=ti,e.right=ti;break}case"ISlice":{e.length=t.length,e.depth=t.chunk.depth+1,e.left=ti,e.right=ti;break}}return e},tj=t=>Ut(t,Z4),ti=ln({_tag:"IEmpty"}),ra=()=>ti,gv=(...t)=>$ct(t),Hr=t=>ln({_tag:"ISingleton",a:t}),ej=t=>tj(t)?t:L_(an(t)),sw=(t,e,n)=>{switch(t.backing._tag){case"IArray":{gct(t.backing.array,0,e,n,t.length);break}case"IConcat":{sw(t.left,e,n),sw(t.right,e,n+t.left.length);break}case"ISingleton":{e[n]=t.backing.a;break}case"ISlice":{let s=0,a=n;for(;s<t.length;)e[a]=il(t,s),s+=1,a+=1;break}}},Sct=t=>{switch(t.backing._tag){case"IEmpty":return W4;case"IArray":return t.backing.array;default:{const e=new Array(t.length);return sw(t,e,0),t.backing={_tag:"IArray",array:e},t.left=ti,t.right=ti,t.depth=0,e}}},Jo=Sct,vct=t=>{switch(t.backing._tag){case"IEmpty":case"ISingleton":return t;case"IArray":return ln({_tag:"IArray",array:ex(t.backing.array)});case"IConcat":return ln({_tag:"IConcat",left:Dl(t.backing.right),right:Dl(t.backing.left)});case"ISlice":return L_(ex(Jo(t)))}},Dl=vct,L_=t=>t.length===0?ra():t.length===1?Hr(t[0]):ln({_tag:"IArray",array:t}),$ct=t=>L_(t),il=D(2,(t,e)=>{switch(t.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(e!==0)throw new Error("Index out of bounds");return t.backing.a}case"IArray":{if(e>=t.length||e<0)throw new Error("Index out of bounds");return t.backing.array[e]}case"IConcat":return e<t.left.length?il(t.left,e):il(t.right,e-t.left.length);case"ISlice":return il(t.backing.chunk,e+t.backing.offset)}}),wct=D(2,(t,e)=>Ms(t,Hr(e))),zs=D(2,(t,e)=>Ms(Hr(e),t)),iw=D(2,(t,e)=>{if(e<=0)return t;if(e>=t.length)return ti;switch(t.backing._tag){case"ISlice":return ln({_tag:"ISlice",chunk:t.backing.chunk,offset:t.backing.offset+e,length:t.backing.length-e});case"IConcat":return e>t.left.length?iw(t.right,e-t.left.length):ln({_tag:"IConcat",left:iw(t.left,e),right:t.right});default:return ln({_tag:"ISlice",chunk:t,offset:e,length:t.length-e})}}),Ms=D(2,(t,e)=>{if(t.backing._tag==="IEmpty")return e;if(e.backing._tag==="IEmpty")return t;const n=e.depth-t.depth;if(Math.abs(n)<=1)return ln({_tag:"IConcat",left:t,right:e});if(n<-1)if(t.left.depth>=t.right.depth){const s=Ms(t.right,e);return ln({_tag:"IConcat",left:t.left,right:s})}else{const s=Ms(t.right.right,e);if(s.depth===t.depth-3){const a=ln({_tag:"IConcat",left:t.right.left,right:s});return ln({_tag:"IConcat",left:t.left,right:a})}else{const a=ln({_tag:"IConcat",left:t.left,right:t.right.left});return ln({_tag:"IConcat",left:a,right:s})}}else if(e.right.depth>=e.left.depth){const s=Ms(t,e.left);return ln({_tag:"IConcat",left:s,right:e.right})}else{const s=Ms(t,e.left.left);if(s.depth===e.depth-3){const a=ln({_tag:"IConcat",left:s,right:e.left.right});return ln({_tag:"IConcat",left:a,right:e.right})}else{const a=ln({_tag:"IConcat",left:e.left.right,right:e.right});return ln({_tag:"IConcat",left:s,right:a})}}}),Ect=t=>t.length===0,zl=t=>t.length>0,nj=t=>il(t,0),Ul=nj,zo=t=>iw(t,1),_c=5,bO=Math.pow(2,_c),Tct=bO-1,Oct=bO/2,Rct=bO/4;function kct(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function Ll(t,e){return e>>>t&Tct}function Yu(t){return 1<<t}function rj(t,e){return kct(t&e-1)}const Mct=(t,e)=>({value:t,previous:e});function al(t,e,n,s){let a=s;if(!t){const c=s.length;a=new Array(c);for(let l=0;l<c;++l)a[l]=s[l]}return a[e]=n,a}function sj(t,e,n){const s=n.length-1;let a=0,c=0,l=n;if(t)a=c=e;else for(l=new Array(s);a<e;)l[c++]=n[a++];for(++a;a<=s;)l[c++]=n[a++];return t&&(l.length=s),l}function Act(t,e,n,s){const a=s.length;if(t){let m=a;for(;m>=e;)s[m--]=s[m];return s[e]=n,s}let c=0,l=0;const d=new Array(a+1);for(;c<e;)d[l++]=s[c++];for(d[e]=n;c<a;)d[++l]=s[c++];return d}class eo{_tag="EmptyNode";modify(e,n,s,a,c,l){const d=s(St());return Ue(d)?new eo:(++l.value,new Qo(e,a,c,d))}}function As(t){return S4(t,"EmptyNode")}function Cct(t){return As(t)||t._tag==="LeafNode"||t._tag==="CollisionNode"}function j_(t,e){return As(t)?!1:e===t.edit}class Qo{edit;hash;key;value;_tag="LeafNode";constructor(e,n,s,a){this.edit=e,this.hash=n,this.key=s,this.value=a}modify(e,n,s,a,c,l){if(qt(c,this.key)){const m=s(this.value);return m===this.value?this:Ue(m)?(--l.value,new eo):j_(this,e)?(this.value=m,this):new Qo(e,a,c,m)}const d=s(St());return Ue(d)?this:(++l.value,ij(e,n,this.hash,this,a,new Qo(e,a,c,d)))}}class _O{edit;hash;children;_tag="CollisionNode";constructor(e,n,s){this.edit=e,this.hash=n,this.children=s}modify(e,n,s,a,c,l){if(a===this.hash){const m=j_(this,e),p=this.updateCollisionList(m,e,this.hash,this.children,s,c,l);return p===this.children?this:p.length>1?new _O(e,this.hash,p):p[0]}const d=s(St());return Ue(d)?this:(++l.value,ij(e,n,this.hash,this,a,new Qo(e,a,c,d)))}updateCollisionList(e,n,s,a,c,l,d){const m=a.length;for(let y=0;y<m;++y){const b=a[y];if("key"in b&&qt(l,b.key)){const S=b.value,v=c(S);return v===S?a:Ue(v)?(--d.value,sj(e,y,a)):al(e,y,new Qo(n,s,l,v),a)}}const p=c(St());return Ue(p)?a:(++d.value,al(e,m,new Qo(n,s,l,p),a))}}class jl{edit;mask;children;_tag="IndexedNode";constructor(e,n,s){this.edit=e,this.mask=n,this.children=s}modify(e,n,s,a,c,l){const d=this.mask,m=this.children,p=Ll(n,a),y=Yu(p),b=rj(d,y),S=d&y,v=j_(this,e);if(!S){const q=new eo().modify(e,n+_c,s,a,c,l);return q?m.length>=Oct?xct(e,p,q,d,m):new jl(e,d|y,Act(v,b,q,m)):this}const E=m[b],N=E.modify(e,n+_c,s,a,c,l);if(E===N)return this;let C=d,x;if(As(N)){if(C&=~y,!C)return new eo;if(m.length<=2&&Cct(m[b^1]))return m[b^1];x=sj(v,b,m)}else x=al(v,b,N,m);return v?(this.mask=C,this.children=x,this):new jl(e,C,x)}}class SO{edit;size;children;_tag="ArrayNode";constructor(e,n,s){this.edit=e,this.size=n,this.children=s}modify(e,n,s,a,c,l){let d=this.size;const m=this.children,p=Ll(n,a),y=m[p],b=(y||new eo).modify(e,n+_c,s,a,c,l);if(y===b)return this;const S=j_(this,e);let v;if(As(y)&&!As(b))++d,v=al(S,p,b,m);else if(!As(y)&&As(b)){if(--d,d<=Rct)return Nct(e,d,p,m);v=al(S,p,new eo,m)}else v=al(S,p,b,m);return S?(this.size=d,this.children=v,this):new SO(e,d,v)}}function Nct(t,e,n,s){const a=new Array(e-1);let c=0,l=0;for(let d=0,m=s.length;d<m;++d)if(d!==n){const p=s[d];p&&!As(p)&&(a[c++]=p,l|=1<<d)}return new jl(t,l,a)}function xct(t,e,n,s,a){const c=[];let l=s,d=0;for(let m=0;l;++m)l&1&&(c[m]=a[d++]),l>>>=1;return c[e]=n,new SO(t,d+1,c)}function Ict(t,e,n,s,a,c){if(n===a)return new _O(t,n,[c,s]);const l=Ll(e,n),d=Ll(e,a);if(l===d)return m=>new jl(t,Yu(l)|Yu(d),[m]);{const m=l<d?[s,c]:[c,s];return new jl(t,Yu(l)|Yu(d),m)}}function ij(t,e,n,s,a,c){let l,d=e;for(;;){const m=Ict(t,d,n,s,a,c);if(typeof m=="function")l=Mct(m,l),d=d+_c;else{let p=m;for(;l!=null;)p=l.value(p),l=l.previous;return p}}}const aj="effect/HashMap",aw=Symbol.for(aj),Fct={[aw]:aw,[Symbol.iterator](){return new P_(this,(t,e)=>[t,e])},[Kt](){let t=mt(aj);for(const e of this)t^=Q(mt(e[0]),Wt(mt(e[1])));return Le(this,t)},[Pt](t){if(Uct(t)){if(t._size!==this._size)return!1;for(const e of this){const n=Q(t,$O(e[0],mt(e[0])));if(Ue(n))return!1;if(!qt(e[1],n.value))return!1}return!0}return!1},toString(){return On(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(mn)}},[Ae](){return this.toJSON()},pipe(){return Ct(this,arguments)}},vO=(t,e,n,s)=>{const a=Object.create(Fct);return a._editable=t,a._edit=e,a._root=n,a._size=s,a};class P_{map;f;v;constructor(e,n){this.map=e,this.f=n,this.v=oj(this.map._root,this.f,void 0)}next(){if(Ue(this.v))return{done:!0,value:void 0};const e=this.v.value;return this.v=eb(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new P_(this.map,this.f)}}const eb=t=>t?cj(t[0],t[1],t[2],t[3],t[4]):St(),oj=(t,e,n=void 0)=>{switch(t._tag){case"LeafNode":return Wn(t.value)?jt({value:e(t.key,t.value.value),cont:n}):eb(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const s=t.children;return cj(s.length,s,0,e,n)}default:return eb(n)}},cj=(t,e,n,s,a)=>{for(;n<t;){const c=e[n++];if(c&&!As(c))return oj(c,s,[t,e,n,s,a])}return eb(a)},Dct=vO(!1,0,new eo,0),q_=()=>Dct,zct=t=>{const e=lj(q_());for(const n of t)Ld(e,n[0],n[1]);return Bct(e)},Uct=t=>Ut(t,aw),Lct=t=>t&&As(t._root),jct=D(2,(t,e)=>$O(t,e,mt(e))),$O=D(3,(t,e,n)=>{let s=t._root,a=0;for(;;)switch(s._tag){case"LeafNode":return qt(e,s.key)?s.value:St();case"CollisionNode":{if(n===s.hash){const c=s.children;for(let l=0,d=c.length;l<d;++l){const m=c[l];if("key"in m&&qt(e,m.key))return m.value}}return St()}case"IndexedNode":{const c=Ll(a,n),l=Yu(c);if(s.mask&l){s=s.children[rj(s.mask,l)],a+=_c;break}return St()}case"ArrayNode":{if(s=s.children[Ll(a,n)],s){a+=_c;break}return St()}default:return St()}}),Pct=D(2,(t,e)=>Wn($O(t,e,mt(e)))),Ld=D(3,(t,e,n)=>wO(t,e,()=>jt(n))),qct=D(3,(t,e,n)=>t._editable?(t._root=e,t._size=n,t):e===t._root?t:vO(t._editable,t._edit,e,n)),uj=t=>new P_(t,e=>e),ow=t=>t._size,lj=t=>vO(!0,t._edit+1,t._root,t._size),Bct=t=>(t._editable=!1,t),wO=D(3,(t,e,n)=>Kct(t,e,mt(e),n)),Kct=D(4,(t,e,n,s)=>{const a={value:t._size},c=t._root.modify(t._editable?t._edit:NaN,0,s,n,e,a);return Q(t,qct(c,a.value))}),sx=D(2,(t,e)=>wO(t,e,St)),Hct=D(2,(t,e)=>B_(t,q_(),(n,s,a)=>Ld(n,a,e(s,a)))),Vct=D(2,(t,e)=>B_(t,void 0,(n,s,a)=>e(s,a))),B_=D(3,(t,e,n)=>{const s=t._root;if(s._tag==="LeafNode")return Wn(s.value)?n(e,s.value.value,s.key):e;if(s._tag==="EmptyNode")return e;const a=[s.children];let c;for(;c=a.pop();)for(let l=0,d=c.length;l<d;){const m=c[l++];m&&!As(m)&&(m._tag==="LeafNode"?Wn(m.value)&&(e=n(e,m.value.value,m.key)):a.push(m.children))}return e}),fj="effect/HashSet",cw=Symbol.for(fj),Yct={[cw]:cw,[Symbol.iterator](){return uj(this._keyMap)},[Kt](){return Le(this,Wt(mt(this._keyMap))(mt(fj)))},[Pt](t){return Gct(t)?ow(this._keyMap)===ow(t._keyMap)&&qt(this._keyMap,t._keyMap):!1},toString(){return On(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(mn)}},[Ae](){return this.toJSON()},pipe(){return Ct(this,arguments)}},K_=t=>{const e=Object.create(Yct);return e._keyMap=t,e},Gct=t=>Ut(t,cw),Jct=K_(q_()),H_=()=>Jct,Qct=t=>{const e=EO(H_());for(const n of t)jd(e,n);return TO(e)},Xct=(...t)=>{const e=EO(H_());for(const n of t)jd(e,n);return TO(e)},Zct=D(2,(t,e)=>Pct(t._keyMap,e)),Wct=t=>ow(t._keyMap),EO=t=>K_(lj(t._keyMap)),TO=t=>(t._keyMap._editable=!1,t),hj=D(2,(t,e)=>{const n=EO(t);return e(n),TO(n)}),jd=D(2,(t,e)=>t._keyMap._editable?(Ld(e,!0)(t._keyMap),t):K_(Ld(e,!0)(t._keyMap))),dj=D(2,(t,e)=>t._keyMap._editable?(sx(e)(t._keyMap),t):K_(sx(e)(t._keyMap))),tut=D(2,(t,e)=>hj(t,n=>{for(const s of e)dj(n,s)})),eut=D(2,(t,e)=>hj(H_(),n=>{nut(t,s=>jd(n,s));for(const s of e)jd(n,s)})),nut=D(2,(t,e)=>Vct(t._keyMap,(n,s)=>e(s))),rut=D(3,(t,e,n)=>B_(t._keyMap,e,(s,a,c)=>n(s,c))),Sc=H_,sut=Qct,OO=Xct,iut=Zct,mj=Wct,fd=jd,pj=dj,ix=tut,Pd=eut,nb=rut,xm="Die",vc="Empty",Ic="Fail",_f="Interrupt",Pl="Parallel",ql="Sequential",gj="effect/Cause",yj=Symbol.for(gj),aut={_E:t=>t},Sf={[yj]:aut,[Kt](){return Q(mt(gj),Wt(mt(Sut(this))),Le(this))},[Pt](t){return out(t)&&_ut(this,t)},pipe(){return Ct(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:mn(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:mn(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:mn(this.left),right:mn(this.right)}}},toString(){return vf(this)},[Ae](){return this.toJSON()}},Bl=(()=>{const t=Object.create(Sf);return t._tag=vc,t})(),rb=t=>{const e=Object.create(Sf);return e._tag=Ic,e.error=t,e},ci=t=>{const e=Object.create(Sf);return e._tag=xm,e.defect=t,e},La=t=>{const e=Object.create(Sf);return e._tag=_f,e.fiberId=t,e},V_=(t,e)=>{const n=Object.create(Sf);return n._tag=Pl,n.left=t,n.right=e,n},us=(t,e)=>{const n=Object.create(Sf);return n._tag=ql,n.left=t,n.right=e,n},out=t=>Ut(t,yj),cut=t=>t._tag===vc,uut=t=>t._tag===Ic,lut=t=>t._tag===vc?!0:Kl(t,!0,(e,n)=>{switch(n._tag){case vc:return jt(e);case xm:case Ic:case _f:return jt(!1);default:return St()}}),fut=t=>Wn(yut(t)),RO=t=>kO(void 0,$ut)(t),hut=t=>Dl(Kl(t,ra(),(e,n)=>n._tag===Ic?jt(Q(e,zs(n.error))):St())),dut=t=>Dl(Kl(t,ra(),(e,n)=>n._tag===xm?jt(Q(e,zs(n.defect))):St())),mut=t=>Kl(t,Sc(),(e,n)=>n._tag===_f?jt(Q(e,fd(n.fiberId))):St()),put=t=>bj(t,e=>e._tag===Ic?jt(e.error):St()),gut=t=>{const e=put(t);switch(e._tag){case"None":return te(t);case"Some":return Lt(e.value)}},yut=t=>bj(t,e=>e._tag===_f?jt(e.fiberId):St()),ax=t=>_j(t,{onEmpty:Bl,onFail:()=>Bl,onDie:ci,onInterrupt:La,onSequential:us,onParallel:V_}),but=t=>_j(t,{onEmpty:Bl,onFail:ci,onDie:ci,onInterrupt:La,onSequential:us,onParallel:V_}),_ut=(t,e)=>{let n=Hr(t),s=Hr(e);for(;zl(n)&&zl(s);){const[a,c]=Q(Ul(n),Kl([Sc(),ra()],([m,p],y)=>{const[b,S]=uw(y);return jt([Q(m,Pd(b)),Q(p,Ms(S))])})),[l,d]=Q(Ul(s),Kl([Sc(),ra()],([m,p],y)=>{const[b,S]=uw(y);return jt([Q(m,Pd(b)),Q(p,Ms(S))])}));if(!qt(a,l))return!1;n=c,s=d}return!0},Sut=t=>vut(Hr(t),ra()),vut=(t,e)=>{for(;;){const[n,s]=Q(t,Q4([Sc(),ra()],([c,l],d)=>{const[m,p]=uw(d);return[Q(c,Pd(m)),Q(l,Ms(p))]})),a=mj(n)>0?Q(e,zs(n)):e;if(Ect(s))return Dl(a);t=s,e=a}throw new Error(N_("Cause.flattenCauseLoop"))},bj=D(2,(t,e)=>{const n=[t];for(;n.length>0;){const s=n.pop(),a=e(s);switch(a._tag){case"None":{switch(s._tag){case ql:case Pl:{n.push(s.right),n.push(s.left);break}}break}case"Some":return a}}return St()}),uw=t=>{let e=t;const n=[];let s=Sc(),a=ra();for(;e!==void 0;)switch(e._tag){case vc:{if(n.length===0)return[s,a];e=n.pop();break}case Ic:{if(s=fd(s,gv(e._tag,e.error)),n.length===0)return[s,a];e=n.pop();break}case xm:{if(s=fd(s,gv(e._tag,e.defect)),n.length===0)return[s,a];e=n.pop();break}case _f:{if(s=fd(s,gv(e._tag,e.fiberId)),n.length===0)return[s,a];e=n.pop();break}case ql:{switch(e.left._tag){case vc:{e=e.right;break}case ql:{e=us(e.left.left,us(e.left.right,e.right));break}case Pl:{e=V_(us(e.left.left,e.right),us(e.left.right,e.right));break}default:{a=zs(a,e.right),e=e.left;break}}break}case Pl:{n.push(e.right),e=e.left;break}}throw new Error(N_("Cause.evaluateCauseLoop"))},$ut={emptyCase:ZN,failCase:tw,dieCase:tw,interruptCase:ZN,sequentialCase:(t,e,n)=>e&&n,parallelCase:(t,e,n)=>e&&n},ox="SequentialCase",cx="ParallelCase",_j=D(2,(t,{onDie:e,onEmpty:n,onFail:s,onInterrupt:a,onParallel:c,onSequential:l})=>kO(t,void 0,{emptyCase:()=>n,failCase:(d,m)=>s(m),dieCase:(d,m)=>e(m),interruptCase:(d,m)=>a(m),sequentialCase:(d,m,p)=>l(m,p),parallelCase:(d,m,p)=>c(m,p)})),Kl=D(3,(t,e,n)=>{let s=e,a=t;const c=[];for(;a!==void 0;){const l=n(s,a);switch(s=Wn(l)?l.value:s,a._tag){case ql:{c.push(a.right),a=a.left;break}case Pl:{c.push(a.right),a=a.left;break}default:{a=void 0;break}}a===void 0&&c.length>0&&(a=c.pop())}return s}),kO=D(3,(t,e,n)=>{const s=[t],a=[];for(;s.length>0;){const l=s.pop();switch(l._tag){case vc:{a.push(te(n.emptyCase(e)));break}case Ic:{a.push(te(n.failCase(e,l.error)));break}case xm:{a.push(te(n.dieCase(e,l.defect)));break}case _f:{a.push(te(n.interruptCase(e,l.fiberId)));break}case ql:{s.push(l.right),s.push(l.left),a.push(Lt({_tag:ox}));break}case Pl:{s.push(l.right),s.push(l.left),a.push(Lt({_tag:cx}));break}}}const c=[];for(;a.length>0;){const l=a.pop();switch(l._tag){case"Left":{switch(l.left._tag){case ox:{const d=c.pop(),m=c.pop(),p=n.sequentialCase(e,d,m);c.push(p);break}case cx:{const d=c.pop(),m=c.pop(),p=n.parallelCase(e,d,m);c.push(p);break}}break}case"Right":{c.push(l.right);break}}}if(c.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return c.pop()}),vf=(t,e)=>RO(t)?"All fibers interrupted without errors.":vj(t).map(function(n){return e?.renderErrorCause!==!0||n.cause===void 0?n.stack:`${n.stack} {
${Sj(n.cause,"  ")}
}`}).join(`
`),Sj=(t,e)=>{const n=t.stack.split(`
`);let s=`${e}[cause]: ${n[0]}`;for(let a=1,c=n.length;a<c;a++)s+=`
${e}${n[a]}`;return t.cause&&(s+=` {
${Sj(t.cause,`${e}  `)}
${e}}`),s};class sb extends globalThis.Error{span=void 0;constructor(e){const n=typeof e=="object"&&e!==null,s=Error.stackTraceLimit;Error.stackTraceLimit=1,super(wut(e),n&&"cause"in e&&typeof e.cause<"u"?{cause:new sb(e.cause)}:void 0),this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=s,this.name=e instanceof Error?e.name:"Error",n&&(Hl in e&&(this.span=e[Hl]),Object.keys(e).forEach(a=>{a in this||(this[a]=e[a])})),this.stack=Out(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}const wut=t=>{if(typeof t=="string")return t;if(typeof t=="object"&&t!==null&&t instanceof Error)return t.message;try{if(Ut(t,"toString")&&Rm(t.toString)&&t.toString!==Object.prototype.toString&&t.toString!==globalThis.Array.prototype.toString)return t.toString()}catch{}return O4(t)},Eut=/\((.*)\)/g,Tut=Xt("effect/Tracer/spanToTrace",()=>new WeakMap),Out=(t,e,n)=>{const s=[t],a=e.startsWith(t)?e.slice(t.length).split(`
`):e.split(`
`);for(let c=1;c<a.length;c++){if(a[c].includes(" at new BaseEffectError")||a[c].includes(" at new YieldableError")){c++;continue}if(a[c].includes("Generator.next")||a[c].includes("effect_internal_function"))break;s.push(a[c].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let c=n,l=0;for(;c&&c._tag==="Span"&&l<10;){const d=Tut.get(c);if(typeof d=="function"){const m=d();if(typeof m=="string"){const p=m.matchAll(Eut);let y=!1;for(const[,b]of p)y=!0,s.push(`    at ${c.name} (${b})`);y||s.push(`    at ${c.name} (${m.replace(/^at /,"")})`)}else s.push(`    at ${c.name}`)}else s.push(`    at ${c.name}`);c=Ws(c.parent),l++}}return s.join(`
`)},Hl=Symbol.for("effect/SpanAnnotation"),vj=t=>kO(t,void 0,{emptyCase:()=>[],dieCase:(e,n)=>[new sb(n)],failCase:(e,n)=>[new sb(n)],interruptCase:()=>[],parallelCase:(e,n,s)=>[...n,...s],sequentialCase:(e,n,s)=>[...n,...s]}),Rut=Symbol.for("effect/Context/Tag"),ib=Symbol.for("effect/Context/Reference"),kut="effect/STM",Mut=Symbol.for(kut),$j={...Cm,_op:"Tag",[Mut]:Il,[Rut]:{_Service:t=>t,_Identifier:t=>t},toString(){return On(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[Ae](){return this.toJSON()},of(t){return t},context(t){return Ej(this,t)}},Aut={...$j,[ib]:ib},Cut=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=e;const s=Object.create($j);return Object.defineProperty(s,"stack",{get(){return n.stack}}),s.key=t,s},Nut=()=>(t,e)=>{const n=Error.stackTraceLimit;Error.stackTraceLimit=2;const s=new Error;Error.stackTraceLimit=n;function a(){}return Object.setPrototypeOf(a,Aut),a.key=t,a.defaultValue=e.defaultValue,Object.defineProperty(a,"stack",{get(){return s.stack}}),a},wj=Symbol.for("effect/Context"),xut={[wj]:{_Services:t=>t},[Pt](t){if(Fut(t)&&this.unsafeMap.size===t.unsafeMap.size){for(const e of this.unsafeMap.keys())if(!t.unsafeMap.has(e)||!qt(this.unsafeMap.get(e),t.unsafeMap.get(e)))return!1;return!0}return!1},[Kt](){return Le(this,cO(this.unsafeMap.size))},pipe(){return Ct(this,arguments)},toString(){return On(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(mn)}},[Ae](){return this.toJSON()}},Vl=t=>{const e=Object.create(xut);return e.unsafeMap=t,e},Iut=t=>{const e=new Error(`Service not found${t.key?`: ${String(t.key)}`:""}`);if(t.stack){const n=t.stack.split(`
`);if(n.length>2){const s=n[2].match(/at (.*)/);s&&(e.message=e.message+` (defined at ${s[1]})`)}}if(e.stack){const n=e.stack.split(`
`);n.splice(1,3),e.stack=n.join(`
`)}return e},Fut=t=>Ut(t,wj),Dut=t=>Ut(t,ib),zut=Vl(new Map),Uut=()=>zut,Ej=(t,e)=>Vl(new Map([[t.key,e]])),Lut=D(3,(t,e,n)=>{const s=new Map(t.unsafeMap);return s.set(e.key,n),Vl(s)}),yv=Xt("effect/Context/defaultValueCache",()=>new Map),MO=t=>{if(yv.has(t.key))return yv.get(t.key);const e=t.defaultValue();return yv.set(t.key,e),e},jut=(t,e)=>t.unsafeMap.has(e.key)?t.unsafeMap.get(e.key):MO(e),Tj=D(2,(t,e)=>{if(!t.unsafeMap.has(e.key)){if(ib in e)return MO(e);throw Iut(e)}return t.unsafeMap.get(e.key)}),Put=Tj,qut=D(2,(t,e)=>t.unsafeMap.has(e.key)?rw(t.unsafeMap.get(e.key)):Dut(e)?rw(MO(e)):x4),But=D(2,(t,e)=>{const n=new Map(t.unsafeMap);for(const[s,a]of e.unsafeMap)n.set(s,a);return Vl(n)}),Fc=Cut,AO=Uut,Kut=Ej,Uh=Lut,Oj=Put,Rj=Tj,Im=qut,kj=But,Mj=Nut,lw=Symbol.for("effect/Duration"),Aj=BigInt(0),ux=BigInt(24),Sg=BigInt(60),fw=BigInt(1e3),lx=BigInt(1e6),fx=BigInt(1e9),Hut=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,sa=t=>{if(Cj(t))return t;if(yc(t))return hw(t);if(C_(t))return bv(t);if(Array.isArray(t)&&t.length===2&&t.every(yc))return t[0]===-1/0||t[1]===-1/0||Number.isNaN(t[0])||Number.isNaN(t[1])?Nj:t[0]===1/0||t[1]===1/0?Jut:bv(BigInt(Math.round(t[0]*1e9))+BigInt(Math.round(t[1])));if(na(t)){const e=Hut.exec(t);if(e){const[n,s,a]=e,c=Number(s);switch(a){case"nano":case"nanos":return bv(BigInt(s));case"micro":case"micros":return Qut(BigInt(s));case"milli":case"millis":return hw(c);case"second":case"seconds":return Xut(c);case"minute":case"minutes":return Zut(c);case"hour":case"hours":return Wut(c);case"day":case"days":return tlt(c);case"week":case"weeks":return elt(c)}}}throw new Error("Invalid DurationInput")},hx={_tag:"Millis",millis:0},Vut={_tag:"Infinity"},Yut={[lw]:lw,[Kt](){return Le(this,T4(this.value))},[Pt](t){return Cj(t)&&clt(this,t)},toString(){return`Duration(${llt(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:rlt(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[Ae](){return this.toJSON()},pipe(){return Ct(this,arguments)}},gi=t=>{const e=Object.create(Yut);return yc(t)?isNaN(t)||t<=0?e.value=hx:Number.isFinite(t)?Number.isInteger(t)?e.value={_tag:"Millis",millis:t}:e.value={_tag:"Nanos",nanos:BigInt(Math.round(t*1e6))}:e.value=Vut:t<=Aj?e.value=hx:e.value={_tag:"Nanos",nanos:t},e},Cj=t=>Ut(t,lw),Gut=t=>{switch(t.value._tag){case"Millis":return t.value.millis===0;case"Nanos":return t.value.nanos===Aj;case"Infinity":return!1}},Nj=gi(0),Jut=gi(1/0),bv=t=>gi(t),Qut=t=>gi(t*fw),hw=t=>gi(t),Xut=t=>gi(t*1e3),Zut=t=>gi(t*6e4),Wut=t=>gi(t*36e5),tlt=t=>gi(t*864e5),elt=t=>gi(t*6048e5),dw=t=>slt(t,{onMillis:e=>e,onNanos:e=>Number(e)/1e6}),nlt=t=>{const e=sa(t);switch(e.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return e.value.nanos;case"Millis":return BigInt(Math.round(e.value.millis*1e6))}},rlt=t=>{const e=sa(t);switch(e.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(e.value.nanos/fx),Number(e.value.nanos%fx)];case"Millis":return[Math.floor(e.value.millis/1e3),Math.round(e.value.millis%1e3*1e6)]}},slt=D(2,(t,e)=>{const n=sa(t);switch(n.value._tag){case"Nanos":return e.onNanos(n.value.nanos);case"Infinity":return e.onMillis(1/0);case"Millis":return e.onMillis(n.value.millis)}}),CO=D(3,(t,e,n)=>{const s=sa(t),a=sa(e);if(s.value._tag==="Infinity"||a.value._tag==="Infinity")return n.onMillis(dw(s),dw(a));if(s.value._tag==="Nanos"||a.value._tag==="Nanos"){const c=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6)),l=a.value._tag==="Nanos"?a.value.nanos:BigInt(Math.round(a.value.millis*1e6));return n.onNanos(c,l)}return n.onMillis(s.value.millis,a.value.millis)}),ilt=(t,e)=>CO(t,e,{onMillis:(n,s)=>n===s,onNanos:(n,s)=>n===s}),alt=D(2,(t,e)=>CO(t,e,{onMillis:(n,s)=>n<=s,onNanos:(n,s)=>n<=s})),olt=D(2,(t,e)=>CO(t,e,{onMillis:(n,s)=>n>=s,onNanos:(n,s)=>n>=s})),clt=D(2,(t,e)=>ilt(sa(t),sa(e))),ult=t=>{const e=sa(t);if(e.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=nlt(e),s=n/lx,a=s/fw,c=a/Sg,l=c/Sg,d=l/ux;return{days:Number(d),hours:Number(l%ux),minutes:Number(c%Sg),seconds:Number(a%Sg),millis:Number(s%fw),nanos:Number(n%lx)}},llt=t=>{const e=sa(t);if(e.value._tag==="Infinity")return"Infinity";if(Gut(e))return"0";const n=ult(e),s=[];return n.days!==0&&s.push(`${n.days}d`),n.hours!==0&&s.push(`${n.hours}h`),n.minutes!==0&&s.push(`${n.minutes}m`),n.seconds!==0&&s.push(`${n.seconds}s`),n.millis!==0&&s.push(`${n.millis}ms`),n.nanos!==0&&s.push(`${n.nanos}ns`),s.join(" ")},dx=Symbol.for("effect/MutableRef"),flt={[dx]:dx,toString(){return On(this.toJSON())},toJSON(){return{_id:"MutableRef",current:mn(this.current)}},[Ae](){return this.toJSON()},pipe(){return Ct(this,arguments)}},xj=t=>{const e=Object.create(flt);return e.current=t,e},Y_=t=>t.current,Ij=D(2,(t,e)=>(t.current=e,t)),NO="effect/FiberId",qd=Symbol.for(NO),ab="None",mw="Runtime",hlt="Composite",dlt=tn(`${NO}-${ab}`);let mlt=class{[qd]=qd;_tag=ab;id=-1;startTimeMillis=-1;[Kt](){return dlt}[Pt](e){return Fj(e)&&e._tag===ab}toString(){return On(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[Ae](){return this.toJSON()}};class plt{id;startTimeMillis;[qd]=qd;_tag=mw;constructor(e,n){this.id=e,this.startTimeMillis=n}[Kt](){return Le(this,tn(`${NO}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[Pt](e){return Fj(e)&&e._tag===mw&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return On(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[Ae](){return this.toJSON()}}const glt=new mlt,Fj=t=>Ut(t,qd),pw=t=>{switch(t._tag){case ab:return Sc();case mw:return OO(t.id);case hlt:return Q(pw(t.left),Pd(pw(t.right)))}},mx=Xt(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>xj(0)),Dj=t=>Array.from(pw(t)).map(n=>`#${n}`).join(","),ylt=()=>{const t=Y_(mx);return Q(mx,Ij(t+1)),new plt(t,Date.now())},Yl=glt,blt=Dj,zj=ylt,xO=q_,_lt=zct,Slt=Lct,Uj=jct,Lj=Ld,jj=uj,vlt=wO,$lt=Hct,Pj=B_,Bd=Symbol.for("effect/List"),gw=t=>an(t),wlt=t=>Kat(U_(t),gw),Elt=wlt(qt),Tlt={[Bd]:Bd,_tag:"Cons",toString(){return On(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:gw(this).map(mn)}},[Ae](){return this.toJSON()},[Pt](t){return Bj(t)&&this._tag===t._tag&&Elt(this,t)},[Kt](){return Le(this,Mm(gw(this)))},[Symbol.iterator](){let t=!1,e=this;return{next(){if(t)return this.return();if(e._tag==="Nil")return t=!0,this.return();const n=e.head;return e=e.tail,{done:t,value:n}},return(n){return t||(t=!0),{done:!0,value:n}}}},pipe(){return Ct(this,arguments)}},ob=(t,e)=>{const n=Object.create(Tlt);return n.head=t,n.tail=e,n},Olt=tn("Nil"),Rlt={[Bd]:Bd,_tag:"Nil",toString(){return On(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[Ae](){return this.toJSON()},[Kt](){return Olt},[Pt](t){return Bj(t)&&this._tag===t._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return Ct(this,arguments)}},qj=Object.create(Rlt),Bj=t=>Ut(t,Bd),Xi=t=>t._tag==="Nil",klt=t=>t._tag==="Cons",Mlt=()=>qj,$c=(t,e)=>ob(t,e),Gl=Mlt,IO=t=>ob(t,qj),Alt=D(2,(t,e)=>Nlt(e,t)),Clt=D(2,(t,e)=>$c(e,t)),Nlt=D(2,(t,e)=>{if(Xi(t))return e;if(Xi(e))return t;{const n=ob(e.head,t);let s=n,a=e.tail;for(;!Xi(a);){const c=ob(a.head,t);s.tail=c,s=c,a=a.tail}return n}}),xlt=D(3,(t,e,n)=>{let s=e,a=t;for(;!Xi(a);)s=n(s,a.head),a=a.tail;return s}),Ilt=t=>{let e=Gl(),n=t;for(;!Xi(n);)e=Clt(e,n.head),n=n.tail;return e},FO=function(){function t(e){e&&Object.assign(this,e)}return t.prototype=dO,t}(),Flt=Symbol.for("effect/DifferContextPatch");function px(t){return t}const Fm={...FO.prototype,[Flt]:{_Value:px,_Patch:px}},Dlt=Object.assign(Object.create(Fm),{_tag:"Empty"}),zlt=Object.create(Dlt),Kj=()=>zlt,Ult=Object.assign(Object.create(Fm),{_tag:"AndThen"}),Llt=(t,e)=>{const n=Object.create(Ult);return n.first=t,n.second=e,n},jlt=Object.assign(Object.create(Fm),{_tag:"AddService"}),Plt=(t,e)=>{const n=Object.create(jlt);return n.key=t,n.service=e,n},qlt=Object.assign(Object.create(Fm),{_tag:"RemoveService"}),Blt=t=>{const e=Object.create(qlt);return e.key=t,e},Klt=Object.assign(Object.create(Fm),{_tag:"UpdateService"}),Hlt=(t,e)=>{const n=Object.create(Klt);return n.key=t,n.update=e,n},Vlt=(t,e)=>{const n=new Map(t.unsafeMap);let s=Kj();for(const[a,c]of e.unsafeMap.entries())if(n.has(a)){const l=n.get(a);n.delete(a),qt(l,c)||(s=Xg(Hlt(a,()=>c))(s))}else n.delete(a),s=Xg(Plt(a,c))(s);for(const[a]of n.entries())s=Xg(Blt(a))(s);return s},Xg=D(2,(t,e)=>Llt(t,e)),Ylt=D(2,(t,e)=>{if(t._tag==="Empty")return e;let n=!1,s=Hr(t);const a=new Map(e.unsafeMap);for(;zl(s);){const l=Ul(s),d=zo(s);switch(l._tag){case"Empty":{s=d;break}case"AddService":{a.set(l.key,l.service),s=d;break}case"AndThen":{s=zs(zs(d,l.second),l.first);break}case"RemoveService":{a.delete(l.key),s=d;break}case"UpdateService":{a.set(l.key,l.update(a.get(l.key))),n=!0,s=d;break}}}if(!n)return Vl(a);const c=new Map;for(const[l]of e.unsafeMap)a.has(l)&&(c.set(l,a.get(l)),a.delete(l));for(const[l,d]of a)c.set(l,d);return Vl(c)}),Glt=Symbol.for("effect/DifferHashSetPatch");function _v(t){return t}const G_={...FO.prototype,[Glt]:{_Value:_v,_Key:_v,_Patch:_v}},Jlt=Object.assign(Object.create(G_),{_tag:"Empty"}),Qlt=Object.create(Jlt),Hj=()=>Qlt,Xlt=Object.assign(Object.create(G_),{_tag:"AndThen"}),Zlt=(t,e)=>{const n=Object.create(Xlt);return n.first=t,n.second=e,n},Wlt=Object.assign(Object.create(G_),{_tag:"Add"}),tft=t=>{const e=Object.create(Wlt);return e.value=t,e},eft=Object.assign(Object.create(G_),{_tag:"Remove"}),nft=t=>{const e=Object.create(eft);return e.value=t,e},rft=(t,e)=>{const[n,s]=nb([t,Hj()],([a,c],l)=>iut(l)(a)?[pj(l)(a),c]:[a,yw(tft(l))(c)])(e);return nb(s,(a,c)=>yw(nft(c))(a))(n)},yw=D(2,(t,e)=>Zlt(t,e)),sft=D(2,(t,e)=>{if(t._tag==="Empty")return e;let n=e,s=Hr(t);for(;zl(s);){const a=Ul(s),c=zo(s);switch(a._tag){case"Empty":{s=c;break}case"AndThen":{s=zs(a.first)(zs(a.second)(c));break}case"Add":{n=fd(a.value)(n),s=c;break}case"Remove":n=pj(a.value)(n),s=c}}return n}),ift=Symbol.for("effect/DifferReadonlyArrayPatch");function gx(t){return t}const Dm={...FO.prototype,[ift]:{_Value:gx,_Patch:gx}},aft=Object.assign(Object.create(Dm),{_tag:"Empty"}),oft=Object.create(aft),Vj=()=>oft,cft=Object.assign(Object.create(Dm),{_tag:"AndThen"}),uft=(t,e)=>{const n=Object.create(cft);return n.first=t,n.second=e,n},lft=Object.assign(Object.create(Dm),{_tag:"Append"}),fft=t=>{const e=Object.create(lft);return e.values=t,e},hft=Object.assign(Object.create(Dm),{_tag:"Slice"}),dft=(t,e)=>{const n=Object.create(hft);return n.from=t,n.until=e,n},mft=Object.assign(Object.create(Dm),{_tag:"Update"}),pft=(t,e)=>{const n=Object.create(mft);return n.index=t,n.patch=e,n},gft=t=>{let e=0,n=Vj();for(;e<t.oldValue.length&&e<t.newValue.length;){const s=t.oldValue[e],a=t.newValue[e],c=t.differ.diff(s,a);qt(c,t.differ.empty)||(n=Zg(n,pft(e,c))),e=e+1}return e<t.oldValue.length&&(n=Zg(n,dft(0,e))),e<t.newValue.length&&(n=Zg(n,fft(oct(e)(t.newValue)))),n},Zg=D(2,(t,e)=>uft(t,e)),yft=D(3,(t,e,n)=>{if(t._tag==="Empty")return e;let s=e.slice(),a=$s(t);for(;Jg(a);){const c=ur(a),l=bc(a);switch(c._tag){case"Empty":{a=l;break}case"AndThen":{l.unshift(c.first,c.second),a=l;break}case"Append":{for(const d of c.values)s.push(d);a=l;break}case"Slice":{s=s.slice(c.from,c.until),a=l;break}case"Update":{s[c.index]=n.patch(c.patch,s[c.index]),a=l;break}}}return s}),bft=Symbol.for("effect/Differ"),_ft={[bft]:{_P:sn,_V:sn},pipe(){return Ct(this,arguments)}},$f=t=>{const e=Object.create(_ft);return e.empty=t.empty,e.diff=t.diff,e.combine=t.combine,e.patch=t.patch,e},Sft=()=>$f({empty:Kj(),combine:(t,e)=>Xg(e)(t),diff:(t,e)=>Vlt(t,e),patch:(t,e)=>Ylt(e)(t)}),vft=()=>$f({empty:Hj(),combine:(t,e)=>yw(e)(t),diff:(t,e)=>rft(t,e),patch:(t,e)=>sft(e)(t)}),$ft=t=>$f({empty:Vj(),combine:(e,n)=>Zg(e,n),diff:(e,n)=>gft({oldValue:e,newValue:n,differ:t}),patch:(e,n)=>yft(e,n,t)}),Yj=()=>wft((t,e)=>e),wft=t=>$f({empty:sn,combine:(e,n)=>e===sn?n:n===sn?e:s=>n(e(s)),diff:(e,n)=>qt(e,n)?sn:A_(n),patch:(e,n)=>t(n,e(n))}),Kd=255,Gj=8,bw=t=>t&Kd,_w=t=>t>>Gj&Kd,zm=(t,e)=>(t&Kd)+((e&t&Kd)<<Gj),Eft=zm(0,0),Tft=t=>zm(t,t),Oft=t=>zm(t,0),Rft=D(2,(t,e)=>zm(bw(t)&~e,_w(t))),kft=D(2,(t,e)=>t|e),Mft=t=>~t>>>0&Kd,Aft=0,wf=1,Cft=2,Jj=4,Sw=16,Qj=32,Nft=t=>J_(t,Qj),xft=D(2,(t,e)=>t|e),Da=t=>Xj(t)&&!Fft(t),Xj=t=>J_(t,wf),J_=D(2,(t,e)=>(t&e)!==0),Zj=(...t)=>t.reduce((e,n)=>e|n,0),Ift=Zj(Aft),yx=t=>J_(t,Jj),Fft=t=>J_(t,Sw),Wg=D(2,(t,e)=>zm(t^e,e)),ty=D(2,(t,e)=>t&(Mft(bw(e))|_w(e))|bw(e)&_w(e)),bx=$f({empty:Eft,diff:(t,e)=>Wg(t,e),combine:(t,e)=>kft(e)(t),patch:(t,e)=>ty(e,t)}),Dft=Tft,Wj=Oft,_x=Rft,tP=(t,e)=>({_tag:"Par",left:t,right:e}),vg=(t,e)=>({_tag:"Seq",left:t,right:e}),zft=t=>{let e=IO(t),n=Gl();for(;;){const[s,a]=xlt(e,[eP(),Gl()],([c,l],d)=>{const[m,p]=Uft(d);return[Bft(c,m),Alt(l,p)]});if(n=Lft(n,s),Xi(a))return Ilt(n);e=a}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},Uft=t=>{let e=t,n=eP(),s=Gl(),a=Gl();for(;;)switch(e._tag){case"Empty":{if(Xi(s))return[n,a];e=s.head,s=s.tail;break}case"Par":{s=$c(e.right,s),e=e.left;break}case"Seq":{const c=e.left,l=e.right;switch(c._tag){case"Empty":{e=l;break}case"Par":{const d=c.left,m=c.right;e=tP(vg(d,l),vg(m,l));break}case"Seq":{const d=c.left,m=c.right;e=vg(d,vg(m,l));break}case"Single":{e=c,a=$c(l,a);break}}break}case"Single":{if(n=qft(n,e),Xi(s))return[n,a];e=s.head,s=s.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},Lft=(t,e)=>{if(Xi(t))return IO(Sv(e));if(Kft(e))return t;const n=Qft(t.head),s=Hft(e);return n.length===1&&s.length===1&&qt(n[0],s[0])?$c(Jft(t.head,Sv(e)),t.tail):$c(Sv(e),t)},jft=Symbol.for("effect/RequestBlock/RequestBlockParallel"),Pft={_R:t=>t};class DO{map;[jft]=Pft;constructor(e){this.map=e}}const eP=()=>new DO(xO()),qft=(t,e)=>new DO(vlt(t.map,e.dataSource,n=>jot(K4(n,wct(e.blockedRequest)),()=>Hr(e.blockedRequest)))),Bft=(t,e)=>new DO(Pj(t.map,e.map,(n,s,a)=>Lj(n,a,lr(Uj(n,a),{onNone:()=>s,onSome:c=>Ms(s,c)})))),Kft=t=>Slt(t.map),Hft=t=>Array.from(jj(t.map)),Sv=t=>Gft($lt(t.map,e=>Hr(e))),Vft=Symbol.for("effect/RequestBlock/RequestBlockSequential"),Yft={_R:t=>t};class nP{map;[Vft]=Yft;constructor(e){this.map=e}}const Gft=t=>new nP(t),Jft=(t,e)=>new nP(Pj(e.map,t.map,(n,s,a)=>Lj(n,a,lr(Uj(n,a),{onNone:()=>ra(),onSome:c=>Ms(c,s)})))),Qft=t=>Array.from(jj(t.map)),Xft=t=>Array.from(t.map),Q_="Pending",rP="Done",Zft="effect/Deferred",Wft=Symbol.for(Zft),tht={_E:t=>t,_A:t=>t},eht=t=>({_tag:Q_,joiners:t}),nht=t=>({_tag:rP,effect:t});class Um{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new Um(this.self)}}const sP=(t,e)=>{const n=new Hn("Blocked");return n.effect_instruction_i0=t,n.effect_instruction_i1=e,n},rht=t=>{const e=new Hn("RunBlocked");return e.effect_instruction_i0=t,e},Jl=Symbol.for("effect/Effect");class sht{patch;op;_op=fO;constructor(e,n){this.patch=e,this.op=n}}class Hn{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Jl]=Il;constructor(e){this._op=e}[Pt](e){return this===e}[Kt](){return Le(this,oO(this))}pipe(){return Ct(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:mn(this.effect_instruction_i0),effect_instruction_i1:mn(this.effect_instruction_i1),effect_instruction_i2:mn(this.effect_instruction_i2)}}toString(){return On(this.toJSON())}[Ae](){return this.toJSON()}[Symbol.iterator](){return new Um(new km(this))}}class iP{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Jl]=Il;constructor(e){this._op=e,this._tag=e}[Pt](e){return VO(e)&&e._op==="Failure"&&qt(this.effect_instruction_i0,e.effect_instruction_i0)}[Kt](){return Q(tn(this._tag),Wt(mt(this.effect_instruction_i0)),Le(this))}get cause(){return this.effect_instruction_i0}pipe(){return Ct(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return On(this.toJSON())}[Ae](){return this.toJSON()}[Symbol.iterator](){return new Um(new km(this))}}class aP{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Jl]=Il;constructor(e){this._op=e,this._tag=e}[Pt](e){return VO(e)&&e._op==="Success"&&qt(this.effect_instruction_i0,e.effect_instruction_i0)}[Kt](){return Q(tn(this._tag),Wt(mt(this.effect_instruction_i0)),Le(this))}get value(){return this.effect_instruction_i0}pipe(){return Ct(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:mn(this.value)}}toString(){return On(this.toJSON())}[Ae](){return this.toJSON()}[Symbol.iterator](){return new Um(new km(this))}}const X_=t=>Ut(t,Jl),Vr=t=>{const e=new Hn(M4);return e.effect_instruction_i0=t,e},iht=D(3,(t,e,n)=>tS(s=>Mt(t,a=>Mt(cP(fn(()=>s(e(a)))),c=>fn(()=>n(a,c)).pipe(Ql({onFailure:l=>{switch(c._tag){case Is:return Us(us(c.effect_instruction_i0,l));case Fs:return Us(l)}},onSuccess:()=>c})))))),Lm=D(2,(t,e)=>Mt(t,()=>Me(e))),jm=t=>Lm(t,void 0),oP=function(){const t=new Hn(I_);switch(arguments.length){case 2:{t.effect_instruction_i0=arguments[0],t.commit=arguments[1];break}case 3:{t.effect_instruction_i0=arguments[0],t.effect_instruction_i1=arguments[1],t.commit=arguments[2];break}case 4:{t.effect_instruction_i0=arguments[0],t.effect_instruction_i1=arguments[1],t.effect_instruction_i2=arguments[2],t.commit=arguments[3];break}default:throw new Error(N_("you're not supposed to end up here"))}return t},cb=(t,e=Yl)=>{const n=new Hn(ud);let s;return n.effect_instruction_i0=a=>{s=t(a)},n.effect_instruction_i1=e,dP(n,a=>X_(s)?s:Ls)},aht=(t,e=Yl)=>fn(()=>cb(t,e)),Hd=(t,e=Yl)=>oP(t,function(){let n,s;function a(m){n?n(m):s===void 0&&(s=m)}const c=new Hn(ud);c.effect_instruction_i0=m=>{n=m,s&&m(s)},c.effect_instruction_i1=e;let l,d;return this.effect_instruction_i0.length!==1?(d=new AbortController,l=or(()=>this.effect_instruction_i0(a,d.signal))):l=or(()=>this.effect_instruction_i0(a)),l||d?dP(c,m=>(d&&d.abort(),l??Ls)):c}),vw=D(2,(t,e)=>UO(t,{onFailure:e,onSuccess:Me})),Sx=Symbol.for("effect/OriginalAnnotation"),zO=(t,e)=>Wn(e)?new Proxy(t,{has(n,s){return s===Hl||s===Sx||s in n},get(n,s){return s===Hl?e.value:s===Sx?t:n[s]}}):t,vx=t=>oo(t)&&!(Hl in t)?Vr(e=>Us(ci(zO(t,YO(e))))):Us(ci(t)),oht=t=>cht(()=>ci(new Uht(t))),ub=t=>UO(t,{onFailure:e=>Me(Lt(e)),onSuccess:e=>Me(te(e))}),cP=t=>fht(t,{onFailure:be,onSuccess:en}),Sr=t=>oo(t)&&!(Hl in t)?Vr(e=>Us(rb(zO(t,YO(e))))):Us(rb(t)),uP=t=>Mt(xt(t),Sr),Us=t=>{const e=new iP(Is);return e.effect_instruction_i0=t,e},cht=t=>Mt(xt(t),Us),uht=Vr(t=>Me(t.id())),lP=t=>Vr(e=>t(e.id())),Mt=D(2,(t,e)=>{const n=new Hn(Xy);return n.effect_instruction_i0=t,n.effect_instruction_i1=e,n}),lht=t=>{const e=new Hn("OnStep");return e.effect_instruction_i0=t,e},fP=t=>Mt(t,sn),fht=D(2,(t,e)=>Ql(t,{onFailure:n=>Me(e.onFailure(n)),onSuccess:n=>Me(e.onSuccess(n))})),Ql=D(2,(t,e)=>{const n=new Hn(Zy);return n.effect_instruction_i0=t,n.effect_instruction_i1=e.onFailure,n.effect_instruction_i2=e.onSuccess,n}),UO=D(2,(t,e)=>Ql(t,{onFailure:n=>{if(dut(n).length>0)return Us(but(n));const a=hut(n);return a.length>0?e.onFailure(nj(a)):Us(n)},onSuccess:e.onSuccess})),Ba=D(2,(t,e)=>fn(()=>{const n=an(t),s=z_(n.length);let a=0;return Lm(PO({while:()=>a<n.length,body:()=>e(n[a],a),step:c=>{s[a++]=c}}),s)})),Z_=D(2,(t,e)=>fn(()=>{const n=an(t);let s=0;return PO({while:()=>s<n.length,body:()=>e(n[s],s),step:()=>{s++}})})),hP=t=>{const e=new Hn(Am);return e.effect_instruction_i0=Dft(wf),e.effect_instruction_i1=()=>t,e},Er=D(2,(t,e)=>Mt(t,n=>xt(()=>e(n)))),LO=D(2,(t,e)=>UO(t,{onFailure:n=>uP(()=>e.onFailure(n)),onSuccess:n=>xt(()=>e.onSuccess(n))})),W_=D(2,(t,e)=>Ql(t,{onFailure:n=>{const s=gut(n);switch(s._tag){case"Left":return uP(()=>e(s.left));case"Right":return Us(s.right)}},onSuccess:Me})),jO=D(2,(t,e)=>tS(n=>Ql(n(t),{onFailure:s=>{const a=be(s);return Ql(e(a),{onFailure:c=>be(us(s,c)),onSuccess:()=>a})},onSuccess:s=>{const a=en(s);return eS(e(a),a)}}))),dP=D(2,(t,e)=>jO(t,TP({onFailure:n=>RO(n)?jm(e(mut(n))):Ls,onSuccess:()=>Ls}))),Me=t=>{const e=new aP(Fs);return e.effect_instruction_i0=t,e},fn=t=>{const e=new Hn(I_);return e.commit=t,e},xt=t=>{const e=new Hn(k4);return e.effect_instruction_i0=t,e},hht=D(t=>t.length===3||t.length===2&&!(oo(t[1])&&"onlyEffect"in t[1]),(t,e)=>Mt(t,n=>{const s=typeof e=="function"?e(n):e;return X_(s)?Lm(s,n):Zat(s)?cb(a=>{s.then(c=>a(Me(n)),c=>a(Sr(new Pht(c,"An unknown error occurred in Effect.tap"))))}):Me(n)})),dht=t=>Vr(e=>{const n=e.getFiberRef(ww),s=Q(n,Rn(()=>e.scope()));return t(nS(ww,jt(s)))}),mP=t=>{const e=new Hn(Am);return e.effect_instruction_i0=Wj(wf),e.effect_instruction_i1=()=>t,e},tS=t=>oP(t,function(){const e=new Hn(Am);return e.effect_instruction_i0=Wj(wf),e.effect_instruction_i1=n=>Xj(n)?or(()=>this.effect_instruction_i0(hP)):or(()=>this.effect_instruction_i0(mP)),e}),Ls=Me(void 0),mht=t=>{const e=new Hn(Am);return e.effect_instruction_i0=t,e.effect_instruction_i1=void 0,e},PO=t=>{const e=new Hn(Wy);return e.effect_instruction_i0=t.while,e.effect_instruction_i1=t.body,e.effect_instruction_i2=t.step,e},qO=t=>{const e=new Hn(Gg);return typeof t?.priority<"u"?Cht(e,t.priority):e},pP=D(2,(t,e)=>Mt(t,n=>Er(e,s=>[n,s]))),gP=D(2,(t,e)=>Mt(t,n=>Lm(e,n))),eS=D(2,(t,e)=>Mt(t,()=>e)),pht=t=>Mt(uht,e=>Q(t,yP(e))),yP=D(2,(t,e)=>Mt(t.interruptAsFork(e),()=>t.await)),ght={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return Ct(this,arguments)}},yht={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return Ct(this,arguments)}},bht={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return Ct(this,arguments)}},bP={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return Ct(this,arguments)}},_P={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return Ct(this,arguments)}},SP={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return Ct(this,arguments)}},_ht={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return Ct(this,arguments)}},Sht={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return Ct(this,arguments)}},vht="effect/FiberRef",$ht=Symbol.for(vht),wht={_A:t=>t},BO=t=>Vr(e=>en(e.getFiberRef(t))),KO=D(2,(t,e)=>Mt(BO(t),e)),$x=D(2,(t,e)=>Eht(t,()=>[void 0,e])),Eht=D(2,(t,e)=>Vr(n=>{const[s,a]=e(n.getFiberRef(t));return n.setFiberRef(t,a),Me(s)})),nS=D(3,(t,e,n)=>iht(gP(BO(e),$x(e,n)),()=>t,s=>$x(e,s))),kr=(t,e)=>Ef(t,{differ:Yj(),fork:e?.fork??sn,join:e?.join}),Tht=t=>{const e=vft();return Ef(t,{differ:e,fork:e.empty})},Oht=t=>{const e=$ft(Yj());return Ef(t,{differ:e,fork:e.empty})},vP=t=>{const e=Sft();return Ef(t,{differ:e,fork:e.empty})},Ef=(t,e)=>({...Nm,[$ht]:wht,initial:t,commit(){return BO(this)},diff:(s,a)=>e.differ.diff(s,a),combine:(s,a)=>e.differ.combine(s,a),patch:s=>a=>e.differ.patch(s,a),fork:e.fork,join:e.join??((s,a)=>a)}),Rht=t=>Ef(t,{differ:bx,fork:bx.empty}),Pm=Xt(Symbol.for("effect/FiberRef/currentContext"),()=>vP(AO())),rS=Xt(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>kr(0)),$P=Xt(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>kr(2048)),kht=Xt(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>kr(xO())),Mht=Xt(Symbol.for("effect/FiberRef/currentLogLevel"),()=>kr(_P)),Aht=Xt(Symbol.for("effect/FiberRef/currentLogSpan"),()=>kr(Gl())),Cht=D(2,(t,e)=>nS(t,rS,e)),Nht=Xt(Symbol.for("effect/FiberRef/currentConcurrency"),()=>kr("unbounded")),xht=Xt(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>kr(!0)),Iht=Xt(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>kr(jt(SP))),Fht=Xt(Symbol.for("effect/FiberRef/versionMismatchErrorLogLevel"),()=>kr(jt(bP))),$w=Xt(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>Oht(Fl())),ww=Xt(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>kr(St(),{fork:()=>St(),join:(t,e)=>t})),$g=Xt(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>kr(Bl,{fork:()=>Bl,join:(t,e)=>t})),Dht=(t,e)=>t.addFinalizer(()=>jm(e)),zht=(t,e)=>t.close(e),sS=(t,e)=>t.fork(e),HO=function(){class t extends globalThis.Error{commit(){return Sr(this)}toJSON(){const n={...this};return this.message&&(n.message=this.message),this.cause&&(n.cause=this.cause),n}[Ae](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?vf(rb(this),{renderErrorCause:!0}):this}}return Object.assign(t.prototype,$ot),t}(),wP=(t,e)=>{class n extends HO{_tag=e}return Object.assign(n.prototype,t),n.prototype.name=e,n},wx=Symbol.for("effect/Cause/errors/RuntimeException"),Uht=wP({[wx]:wx},"RuntimeException"),Lht=Symbol.for("effect/Cause/errors/InterruptedException"),jht=t=>Ut(t,Lht),Ex=Symbol.for("effect/Cause/errors/NoSuchElement"),EP=wP({[Ex]:Ex},"NoSuchElementException"),Tx=Symbol.for("effect/Cause/errors/UnknownException"),Pht=function(){class t extends HO{_tag="UnknownException";error;constructor(n,s){super(s??"An unknown error occurred",{cause:n}),this.error=n}}return Object.assign(t.prototype,{[Tx]:Tx,name:"UnknownException"}),t}(),VO=t=>X_(t)&&"_tag"in t&&(t._tag==="Success"||t._tag==="Failure"),qht=t=>t._tag==="Success",Ox=(t,e)=>Vht(t,e?.parallel?V_:us),Bht=t=>be(ci(t)),Rx=t=>be(rb(t)),be=t=>{const e=new iP(Is);return e.effect_instruction_i0=t,e},Kht=t=>be(La(t)),vv=D(2,(t,e)=>{switch(t._tag){case Is:return be(t.effect_instruction_i0);case Fs:return en(e(t.effect_instruction_i0))}}),TP=D(2,(t,{onFailure:e,onSuccess:n})=>{switch(t._tag){case Is:return e(t.effect_instruction_i0);case Fs:return n(t.effect_instruction_i0)}}),en=t=>{const e=new aP(Fs);return e.effect_instruction_i0=t,e},Uo=en(void 0),Hht=D(3,(t,e,{onFailure:n,onSuccess:s})=>{switch(t._tag){case Is:switch(e._tag){case Fs:return be(t.effect_instruction_i0);case Is:return be(n(t.effect_instruction_i0,e.effect_instruction_i0))}case Fs:switch(e._tag){case Fs:return en(s(t.effect_instruction_i0,e.effect_instruction_i0));case Is:return be(e.effect_instruction_i0)}}}),Vht=(t,e)=>{const n=ej(t);return zl(n)?Q(zo(n),Q4(Q(Ul(n),vv(Hr)),(s,a)=>Q(s,Hht(a,{onSuccess:(c,l)=>Q(c,zs(l)),onFailure:e}))),vv(Dl),vv(s=>Jo(s)),jt):St()},Yht=t=>({...Nm,[Wft]:tht,state:xj(eht([])),commit(){return OP(this)},blockingOn:t}),OP=t=>aht(e=>{const n=Y_(t.state);switch(n._tag){case rP:return e(n.effect);case Q_:return n.joiners.push(e),Ght(t,e)}},t.blockingOn),RP=(t,e)=>{const n=Y_(t.state);if(n._tag===Q_){Ij(t.state,nht(e));for(let s=0,a=n.joiners.length;s<a;s++)n.joiners[s](e)}},Ght=(t,e)=>xt(()=>{const n=Y_(t.state);if(n._tag===Q_){const s=n.joiners.indexOf(e);s>=0&&n.joiners.splice(s,1)}}),Jht=Vr(t=>en(t.currentContext)),Qht=()=>Jht,qm=t=>Mt(Qht(),t),Xht=D(2,(t,e)=>nS(Pm,e)(t)),Zht=D(2,(t,e)=>qm(n=>Xht(t,e(n)))),YO=t=>{const e=t.currentSpan;return e!==void 0&&e._tag==="Span"?jt(e):St()},Wht=uut,tdt=vf,kP="And",MP="Or",AP="InvalidData",CP="MissingData",NP="SourceUnavailable",xP="Unsupported",edt="effect/ConfigError",kx=Symbol.for(edt),Tf={_tag:"ConfigError",[kx]:kx},IP=(t,e)=>{const n=Object.create(Tf);return n._op=kP,n.left=t,n.right=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},FP=(t,e)=>{const n=Object.create(Tf);return n._op=MP,n.left=t,n.right=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},ndt=(t,e,n={pathDelim:"."})=>{const s=Object.create(Tf);return s._op=AP,s.path=t,s.message=e,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Invalid data at ${Q(this.path,bf(n.pathDelim))}: "${this.message}")`}}),s},wc=(t,e,n={pathDelim:"."})=>{const s=Object.create(Tf);return s._op=CP,s.path=t,s.message=e,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Missing data at ${Q(this.path,bf(n.pathDelim))}: "${this.message}")`}}),s},rdt=(t,e,n,s={pathDelim:"."})=>{const a=Object.create(Tf);return a._op=NP,a.path=t,a.message=e,a.cause=n,Object.defineProperty(a,"toString",{enumerable:!1,value(){return`(Source unavailable at ${Q(this.path,bf(s.pathDelim))}: "${this.message}")`}}),a},sdt=(t,e,n={pathDelim:"."})=>{const s=Object.create(Tf);return s._op=xP,s.path=t,s.message=e,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${Q(this.path,bf(n.pathDelim))}: "${this.message}")`}}),s},Lo=D(2,(t,e)=>{switch(t._op){case kP:return IP(Lo(t.left,e),Lo(t.right,e));case MP:return FP(Lo(t.left,e),Lo(t.right,e));case AP:return ndt([...e,...t.path],t.message);case CP:return wc([...e,...t.path],t.message);case NP:return rdt([...e,...t.path],t.message,t.cause);case xP:return sdt([...e,...t.path],t.message)}}),idt="effect/Clock",Mx=Symbol.for(idt),GO=Fc("effect/Clock"),adt=2**31-1,Ax={unsafeSchedule(t,e){const n=dw(e);if(n>adt)return tw;let s=!1;const a=setTimeout(()=>{s=!0,t()},n);return()=>(clearTimeout(a),!s)}},Cx=function(){const t=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*t;let e;return()=>(e===void 0&&(e=BigInt(Date.now())*t-BigInt(Math.round(performance.now()*1e6))),e+BigInt(Math.round(performance.now()*1e6)))}(),odt=function(){const t=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!t)return Cx;const e=Cx()-t.bigint();return()=>e+t.bigint()}();class cdt{[Mx]=Mx;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return odt()}currentTimeMillis=xt(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=xt(()=>this.unsafeCurrentTimeNanos());scheduler(){return Me(Ax)}sleep(e){return Hd(n=>{const s=Ax.unsafeSchedule(()=>n(Ls),e);return jm(xt(s))})}}const udt=()=>new cdt,Xl=zot,lb=t=>t.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),ldt={_tag:"Empty"},$v=D(2,(t,e)=>{let n=IO(e),s=t;for(;klt(n);){const a=n.head;switch(a._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=$c(a.first,$c(a.second,n.tail));break}case"MapName":{s=sl(s,a.f),n=n.tail;break}case"Nested":{s=tb(s,a.name),n=n.tail;break}case"Unnested":{if(Q(ld(s),Vot(a.name)))s=bc(s),n=n.tail;else return Lt(wc(s,`Expected ${a.name} to be in path in ConfigProvider#unnested`));break}}}return te(s)}),fdt="Constant",hdt="Fail",ddt="Fallback",mdt="Described",pdt="Lazy",gdt="MapOrFail",ydt="Nested",bdt="Primitive",_dt="Sequence",Sdt="HashMap",vdt="ZipWith";var Nx={};const fb=(t,e)=>[...t,...e],$dt="effect/ConfigProvider",xx=Symbol.for($dt),wdt=Fc("effect/ConfigProvider"),Edt="effect/ConfigProviderFlat",Ix=Symbol.for(Edt),Tdt=t=>({[xx]:xx,pipe(){return Ct(this,arguments)},...t}),Odt=t=>({[Ix]:Ix,patch:t.patch,load:(e,n,s=!0)=>t.load(e,n,s),enumerateChildren:t.enumerateChildren}),Rdt=t=>Tdt({load:e=>Mt(as(t,Fl(),e,!1),n=>lr(ld(n),{onNone:()=>Sr(wc(Fl(),`Expected a single value having structure: ${e}`)),onSome:Me})),flattened:t}),kdt=t=>{const{pathDelim:e,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},t),s=m=>Q(m,bf(e)),a=m=>m.split(e),c=()=>typeof process<"u"&&"env"in process&&typeof Nx=="object"?Nx:{};return Rdt(Odt({load:(m,p,y=!0)=>{const b=s(m),S=c(),v=b in S?jt(S[b]):St();return Q(v,W_(()=>wc(m,`Expected ${b} to exist in the process context`)),Mt(E=>xdt(E,m,p,n,y)))},enumerateChildren:m=>xt(()=>{const p=c(),S=Object.keys(p).map(v=>a(v.toUpperCase())).filter(v=>{for(let E=0;E<m.length;E++){const N=Q(m,Y4(E)),C=v[E];if(C===void 0||N!==C)return!1}return!0}).flatMap(v=>v.slice(m.length,m.length+1));return sut(S)}),patch:ldt}))},Mdt=(t,e,n,s)=>{const a=rx(n.length,m=>m>=s.length?St():jt([t(m),m+1])),c=rx(s.length,m=>m>=n.length?St():jt([e(m),m+1])),l=fb(n,a),d=fb(s,c);return[l,d]},Adt=(t,e)=>{let n=e;if(n._tag==="Nested"){const s=t.slice();for(;n._tag==="Nested";)s.push(n.name),n=n.config;return s}return t},as=(t,e,n,s)=>{const a=n;switch(a._tag){case fdt:return Me($s(a.value));case mdt:return fn(()=>as(t,e,a.config,s));case hdt:return Sr(wc(e,a.message));case ddt:return Q(fn(()=>as(t,e,a.first,s)),vw(c=>a.condition(c)?Q(as(t,e,a.second,s),vw(l=>Sr(FP(c,l)))):Sr(c)));case pdt:return fn(()=>as(t,e,a.config(),s));case gdt:return fn(()=>Q(as(t,e,a.original,s),Mt(Ba(c=>Q(a.mapOrFail(c),W_(Lo(Adt(e,a.original))))))));case ydt:return fn(()=>as(t,fb(e,$s(a.name)),a.config,s));case bdt:return Q($v(e,t.patch),Mt(c=>Q(t.load(c,a,s),Mt(l=>{if(l.length===0){const d=Q(sct(c),Rn(()=>"<n/a>"));return Sr(wc([],`Expected ${a.description} with name ${d}`))}return Me(l)}))));case _dt:return Q($v(e,t.patch),Mt(c=>Q(t.enumerateChildren(c),Mt(Fdt),Mt(l=>l.length===0?fn(()=>Er(as(t,e,a.config,!0),$s)):Q(Ba(l,d=>as(t,Zot(e,`[${d}]`),a.config,!0)),Er(d=>{const m=dct(d);return m.length===0?$s(Fl()):$s(m)}))))));case Sdt:return fn(()=>Q($v(e,t.patch),Mt(c=>Q(t.enumerateChildren(c),Mt(l=>Q(l,Ba(d=>as(t,fb(c,$s(d)),a.valueConfig,s)),Er(d=>d.length===0?$s(xO()):Q(Idt(d),sl(m=>_lt(nx(an(l),m)))))))))));case vdt:return fn(()=>Q(as(t,e,a.left,s),ub,Mt(c=>Q(as(t,e,a.right,s),ub,Mt(l=>{if(wn(c)&&wn(l))return Sr(IP(c.left,l.left));if(wn(c)&&Bi(l))return Sr(c.left);if(Bi(c)&&wn(l))return Sr(l.left);if(Bi(c)&&Bi(l)){const d=Q(e,bf(".")),m=Cdt(e,d),[p,y]=Mdt(m,m,Q(c.right,sl(te)),Q(l.right,sl(te)));return Q(p,nx(y),Ba(([b,S])=>Q(pP(b,S),Er(([v,E])=>a.zip(v,E)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},Cdt=(t,e)=>n=>Lt(wc(t,`The element at index ${n} in a sequence at path "${e}" was missing`)),Ndt=(t,e)=>t.split(new RegExp(`\\s*${lb(e)}\\s*`)),xdt=(t,e,n,s,a)=>a?Q(Ndt(t,s),Ba(c=>n.parse(c.trim())),W_(Lo(e))):Q(n.parse(t),LO({onFailure:Lo(e),onSuccess:$s})),Idt=t=>Object.keys(t[0]).map(e=>t.map(n=>n[e])),Fdt=t=>Q(Ba(t,zdt),LO({onFailure:()=>Fl(),onSuccess:Ud(Xl)}),ub,Er(Fot)),Ddt=/^(\[(\d+)\])$/,zdt=t=>{const e=t.match(Ddt);if(e!==null){const n=e[2];return Q(n!==void 0&&n.length>0?jt(n):St(),D_(Udt))}return St()},Udt=t=>{const e=Number.parseInt(t);return Number.isNaN(e)?St():jt(e)},Fx=Symbol.for("effect/Console"),DP=Fc("effect/Console"),Ldt={[Fx]:Fx,assert(t,...e){return xt(()=>{console.assert(t,...e)})},clear:xt(()=>{console.clear()}),count(t){return xt(()=>{console.count(t)})},countReset(t){return xt(()=>{console.countReset(t)})},debug(...t){return xt(()=>{console.debug(...t)})},dir(t,e){return xt(()=>{console.dir(t,e)})},dirxml(...t){return xt(()=>{console.dirxml(...t)})},error(...t){return xt(()=>{console.error(...t)})},group(t){return t?.collapsed?xt(()=>console.groupCollapsed(t?.label)):xt(()=>console.group(t?.label))},groupEnd:xt(()=>{console.groupEnd()}),info(...t){return xt(()=>{console.info(...t)})},log(...t){return xt(()=>{console.log(...t)})},table(t,e){return xt(()=>{console.table(t,e)})},time(t){return xt(()=>console.time(t))},timeEnd(t){return xt(()=>console.timeEnd(t))},timeLog(t,...e){return xt(()=>{console.timeLog(t,...e)})},trace(...t){return xt(()=>{console.trace(...t)})},warn(...t){return xt(()=>{console.warn(...t)})},unsafe:console},jdt="effect/Random",Dx=Symbol.for(jdt),Pdt=Fc("effect/Random");class qdt{seed;[Dx]=Dx;PRNG;constructor(e){this.seed=e,this.PRNG=new iot(e)}get next(){return xt(()=>this.PRNG.number())}get nextBoolean(){return Er(this.next,e=>e>.5)}get nextInt(){return xt(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,n){return Er(this.next,s=>(n-e)*s+e)}nextIntBetween(e,n){return xt(()=>this.PRNG.integer(n-e)+e)}shuffle(e){return Bdt(e,n=>this.nextIntBetween(0,n))}}const Bdt=(t,e)=>fn(()=>Q(xt(()=>Array.from(t)),Mt(n=>{const s=[];for(let a=n.length;a>=2;a=a-1)s.push(a);return Q(s,Z_(a=>Q(e(a),Er(c=>Kdt(n,a-1,c)))),Lm(ej(n)))}))),Kdt=(t,e,n)=>{const s=t[e];return t[e]=t[n],t[n]=s,t},Hdt=t=>new qdt(mt(t)),zx=Symbol.for("effect/Tracer"),Vdt=t=>({[zx]:zx,...t}),zP=Fc("effect/Tracer"),UP=Fc("effect/ParentSpan"),Ux=function(){const t="abcdef0123456789",e=t.length;return function(n){let s="";for(let a=0;a<n;a++)s+=t.charAt(Math.floor(Math.random()*e));return s}}();class Ydt{name;parent;context;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];links;constructor(e,n,s,a,c,l){this.name=e,this.parent=n,this.context=s,this.startTime=c,this.kind=l,this.status={_tag:"Started",startTime:c},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:Ux(32),this.spanId=Ux(16),this.links=Array.from(a)}end(e,n){this.status={_tag:"Ended",endTime:e,exit:n,startTime:this.status.startTime}}attribute(e,n){this.attributes.set(e,n)}event(e,n,s){this.events.push([e,n,s??{}])}addLinks(e){this.links.push(...e)}}const Gdt=Vdt({span:(t,e,n,s,a,c)=>new Ydt(t,e,n,s,a,c),context:t=>t()}),Jdt=Q(AO(),Uh(GO,udt()),Uh(DP,Ldt),Uh(Pdt,Hdt(Math.random())),Uh(wdt,kdt()),Uh(zP,Gdt)),hb=Xt(Symbol.for("effect/DefaultServices/currentServices"),()=>vP(Jdt)),Qdt=function(){const t=Symbol.for("effect/Data/Error/plainArgs");return{BaseEffectError:class extends HO{constructor(n){super(n?.message,n?.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,t,{value:n,enumerable:!1}))}toJSON(){return{...this[t],...this}}}}.BaseEffectError}(),Xdt=t=>{const e={BaseEffectError:class extends Qdt{_tag=t}};return e.BaseEffectError.prototype.name=t,e.BaseEffectError},Zdt=Cm,Wdt=wot;class tmt extends Wdt{}const emt="Sequential",nmt="Parallel",rmt="ParallelN",LP={_tag:emt},smt={_tag:nmt},imt=t=>({_tag:rmt,parallelism:t}),Ew=LP,Tw=smt,Ow=imt;function amt(t){return new no(t)}function omt(){return amt(new Map)}const Lx=Symbol.for("effect/FiberRefs");class no{locals;[Lx]=Lx;constructor(e){this.locals=e}pipe(){return Ct(this,arguments)}}const cmt=(t,e,n,s=!1)=>{const a=t;let c=e,l=n,d=s,m;for(;m===void 0;)if(kn(c)&&kn(l)){const p=ur(c)[0],y=bc(c),b=ur(l)[0],S=ur(l)[1],v=bc(l);p.startTimeMillis<b.startTimeMillis?(l=v,d=!0):p.startTimeMillis>b.startTimeMillis?c=y:p.id<b.id?(l=v,d=!0):p.id>b.id?c=y:m=[S,d]}else m=[a.initial,!0];return m},umt=D(3,(t,e,n)=>{const s=new Map(t.locals);return n.locals.forEach((a,c)=>{const l=a[0][1];if(!a[0][0][Pt](e)){if(!s.has(c)){if(qt(l,c.initial))return;s.set(c,[[e,c.join(c.initial,l)]]);return}const d=s.get(c),[m,p]=cmt(c,d,a);if(p){const y=c.diff(m,l),b=d[0][1],S=c.join(b,c.patch(y)(b));if(!qt(b,S)){let v;const E=d[0][0];E[Pt](e)?v=[[E,S],...d.slice(1)]:v=[[e,S],...d],s.set(c,v)}}}}),new no(s)}),lmt=D(2,(t,e)=>{const n=new Map;return jP(t,n,e),new no(n)}),jP=(t,e,n)=>{t.locals.forEach((s,a)=>{const c=s[0][1],l=a.patch(a.fork)(c);qt(c,l)?e.set(a,s):e.set(a,[[n,l],...s])})},PP=D(2,(t,e)=>{const n=new Map(t.locals);return n.delete(e),new no(n)}),fmt=D(2,(t,e)=>t.locals.has(e)?jt(ur(t.locals.get(e))[1]):St()),Vd=D(2,(t,e)=>Q(fmt(t,e),Rn(()=>e.initial))),Rw=D(2,(t,{fiberId:e,fiberRef:n,value:s})=>{if(t.locals.size===0)return new no(new Map([[n,[[e,s]]]]));const a=new Map(t.locals);return kw(a,e,n,s),new no(a)}),kw=(t,e,n,s)=>{const a=t.get(n)??[];let c;if(kn(a)){const[l,d]=ur(a);if(l[Pt](e)){if(qt(d,s))return;c=[[e,s],...a.slice(1)]}else c=[[e,s],...a]}else c=[[e,s]];t.set(n,c)},hmt=D(2,(t,{entries:e,forkAs:n})=>{if(t.locals.size===0)return new no(new Map(e));const s=new Map(t.locals);return n!==void 0&&jP(t,s,n),e.forEach(([a,c])=>{c.length===1?kw(s,c[0][0],a,c[0][1]):c.forEach(([l,d])=>{kw(s,l,a,d)})}),new no(s)}),dmt=Vd,mmt=hmt,pmt=omt,qP="Empty",BP="Add",KP="Remove",HP="Update",VP="AndThen",gmt={_tag:qP},ymt=(t,e)=>{const n=new Map(t.locals);let s=gmt;for(const[a,c]of e.locals.entries()){const l=ur(c)[1],d=n.get(a);if(d!==void 0){const m=ur(d)[1];qt(m,l)||(s=wv({_tag:HP,fiberRef:a,patch:a.diff(m,l)})(s))}else s=wv({_tag:BP,fiberRef:a,value:l})(s);n.delete(a)}for(const[a]of n.entries())s=wv({_tag:KP,fiberRef:a})(s);return s},wv=D(2,(t,e)=>({_tag:VP,first:t,second:e})),bmt=D(3,(t,e,n)=>{let s=n,a=$s(t);for(;kn(a);){const c=ur(a),l=bc(a);switch(c._tag){case qP:{a=l;break}case BP:{s=Rw(s,{fiberId:e,fiberRef:c.fiberRef,value:c.value}),a=l;break}case KP:{s=PP(s,c.fiberRef),a=l;break}case HP:{const d=Vd(s,c.fiberRef);s=Rw(s,{fiberId:e,fiberRef:c.fiberRef,value:c.fiberRef.patch(c.patch)(d)}),a=l;break}case VP:{a=tb(c.first)(tb(c.second)(l));break}}}return s}),_mt=ymt,Smt=bmt,iS="effect/FiberStatus",Ec=Symbol.for(iS),db="Done",jx="Running",Px="Suspended",vmt=tn(`${iS}-${db}`);class $mt{[Ec]=Ec;_tag=db;[Kt](){return vmt}[Pt](e){return JO(e)&&e._tag===db}}class wmt{runtimeFlags;[Ec]=Ec;_tag=jx;constructor(e){this.runtimeFlags=e}[Kt](){return Q(mt(iS),Wt(mt(this._tag)),Wt(mt(this.runtimeFlags)),Le(this))}[Pt](e){return JO(e)&&e._tag===jx&&this.runtimeFlags===e.runtimeFlags}}class Emt{runtimeFlags;blockingOn;[Ec]=Ec;_tag=Px;constructor(e,n){this.runtimeFlags=e,this.blockingOn=n}[Kt](){return Q(mt(iS),Wt(mt(this._tag)),Wt(mt(this.runtimeFlags)),Wt(mt(this.blockingOn)),Le(this))}[Pt](e){return JO(e)&&e._tag===Px&&this.runtimeFlags===e.runtimeFlags&&qt(this.blockingOn,e.blockingOn)}}const Tmt=new $mt,Omt=t=>new wmt(t),Rmt=(t,e)=>new Emt(t,e),JO=t=>Ut(t,Ec),kmt=t=>t._tag===db,Mmt=Tmt,YP=Omt,Amt=Rmt,Cmt=kmt,Nmt=ght,xmt=yht,Imt=bht,Fmt=bP,Dmt=_P,zmt=SP,Umt=_ht,Lmt=Sht,jmt=Q(Xl,B4(t=>t.ordinal)),Pmt=Uot(jmt),qmt=t=>{switch(t){case"All":return Nmt;case"Debug":return zmt;case"Error":return Imt;case"Fatal":return xmt;case"Info":return Dmt;case"Trace":return Umt;case"None":return Lmt;case"Warning":return Fmt}},Bmt=Symbol.for("effect/Micro"),mb=Symbol.for("effect/Micro/MicroExit"),qx=Symbol.for("effect/Micro/MicroCause"),Kmt={_E:sn};class GP extends globalThis.Error{_tag;traces;[qx];constructor(e,n,s){const a=`MicroCause.${e}`;let c,l,d;if(n instanceof globalThis.Error){c=`(${a}) ${n.name}`,l=n.message;const m=l.split(`
`).length;d=n.stack?`(${a}) ${n.stack.split(`
`).slice(0,m+3).join(`
`)}`:`${c}: ${l}`}else c=a,l=xl(n,0),d=`${c}: ${l}`;s.length>0&&(d+=`
    ${s.join(`
    `)}`),super(l),this._tag=e,this.traces=s,this[qx]=Kmt,this.name=c,this.stack=d}pipe(){return Ct(this,arguments)}toString(){return this.stack}[Ae](){return this.stack}}class Hmt extends GP{defect;constructor(e,n=[]){super("Die",e,n),this.defect=e}}const Vmt=(t,e=[])=>new Hmt(t,e);class Ymt extends GP{constructor(e=[]){super("Interrupt","interrupted",e)}}const Gmt=(t=[])=>new Ymt(t),Jmt=t=>t._tag==="Interrupt",Bx=Symbol.for("effect/Micro/MicroFiber"),Qmt={_A:sn,_E:sn};class Xmt{context;interruptible;[Bx];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(e,n=!0){this.context=e,this.interruptible=n,this[Bx]=Qmt}getRef(e){return jut(this.context,e)}addObserver(e){return this._exit?(e(this._exit),Bat):(this._observers.push(e),()=>{const n=this._observers.indexOf(e);n>=0&&this._observers.splice(n,1)})}_interrupted=!1;unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(tR))}unsafePoll(){return this._exit}evaluate(e){if(this._exit)return;if(this._yielded!==void 0){const a=this._yielded;this._yielded=void 0,a()}const n=this.runLoop(e);if(n===wg)return;const s=Kx.interruptChildren&&Kx.interruptChildren(this);if(s!==void 0)return this.evaluate(gb(s,()=>n));this._exit=n;for(let a=0;a<this._observers.length;a++)this._observers[a](n);this._observers.length=0}runLoop(e){let n=!1,s=e;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!n&&this.getRef(eR).shouldYield(this)){n=!0;const a=s;s=gb(npt,()=>a)}if(s=s[Mw](this),s===wg){const a=this._yielded;return mb in a?(this._yielded=void 0,a):wg}}}catch(a){return Ut(s,Mw)?Aw(a):Aw(`MicroFiber.runLoop: Not a valid effect: ${String(s)}`)}}getCont(e){for(;;){const n=this._stack.pop();if(!n)return;const s=n[pb]&&n[pb](this);if(s)return{[e]:s};if(n[e])return n}}_yielded=void 0;yieldWith(e){return this._yielded=e,wg}children(){return this._children??=new Set}}const Kx=Xt("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),JP=Symbol.for("effect/Micro/identifier"),dn=Symbol.for("effect/Micro/args"),Mw=Symbol.for("effect/Micro/evaluate"),Zl=Symbol.for("effect/Micro/successCont"),ol=Symbol.for("effect/Micro/failureCont"),pb=Symbol.for("effect/Micro/ensureCont"),wg=Symbol.for("effect/Micro/Yield"),Zmt={_A:sn,_E:sn,_R:sn},Wmt={...Zdt,_op:"Micro",[Bmt]:Zmt,pipe(){return Ct(this,arguments)},[Symbol.iterator](){return new $4(new km(this))},toJSON(){return{_id:"Micro",op:this[JP],...dn in this?{args:this[dn]}:void 0}},toString(){return On(this)},[Ae](){return On(this)}};function tpt(t){return Aw("Micro.evaluate: Not implemented")}const aS=t=>({...Wmt,[JP]:t.op,[Mw]:t.eval??tpt,[Zl]:t.contA,[ol]:t.contE,[pb]:t.ensure}),QO=t=>{const e=aS(t);return function(){const n=Object.create(e);return n[dn]=t.single===!1?arguments:arguments[0],n}},QP=t=>{const e={...aS(t),[mb]:mb,_tag:t.op,get[t.prop](){return this[dn]},toJSON(){return{_id:"MicroExit",_tag:t.op,[t.prop]:this[dn]}},[Pt](n){return ipt(n)&&n._tag===t.op&&qt(this[dn],n[dn])},[Kt](){return Le(this,Wt(tn(t.op))(mt(this[dn])))}};return function(n){const s=Object.create(e);return s[dn]=n,s[Zl]=void 0,s[ol]=void 0,s[pb]=void 0,s}},XO=QP({op:"Success",prop:"value",eval(t){const e=t.getCont(Zl);return e?e[Zl](this[dn],t):t.yieldWith(this)}}),XP=QP({op:"Failure",prop:"cause",eval(t){let e=t.getCont(ol);for(;Jmt(this[dn])&&e&&t.interruptible;)e=t.getCont(ol);return e?e[ol](this[dn],t):t.yieldWith(this)}}),ept=QO({op:"Yield",eval(t){let e=!1;return t.getRef(eR).scheduleTask(()=>{e||t.evaluate(apt)},this[dn]??0),t.yieldWith(()=>{e=!0})}}),npt=ept(0),rpt=XO(void 0),ZO=QO({op:"WithMicroFiber",eval(t){return this[dn](t)}}),gb=D(2,(t,e)=>{const n=Object.create(spt);return n[dn]=t,n[Zl]=e,n}),spt=aS({op:"OnSuccess",eval(t){return t._stack.push(this),this[dn]}}),ipt=t=>Ut(t,mb),ZP=XO,WO=XP,tR=WO(Gmt()),Aw=t=>WO(Vmt(t)),apt=ZP(void 0),opt="setImmediate"in globalThis?globalThis.setImmediate:t=>setTimeout(t,0);class WP{tasks=[];running=!1;scheduleTask(e,n){this.tasks.push(e),this.running||(this.running=!0,opt(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){const e=this.tasks;this.tasks=[];for(let n=0,s=e.length;n<s;n++)e[n]()}shouldYield(e){return e.currentOpCount>=e.getRef(lpt)}flush(){for(;this.tasks.length>0;)this.runTasks()}}const cpt=D(2,(t,e)=>ZO(n=>{const s=n.context;return n.context=e(s),dpt(t,()=>(n.context=s,rpt))})),upt=D(2,(t,e)=>cpt(t,kj(e)));class lpt extends Mj()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class eR extends Mj()("effect/Micro/currentScheduler",{defaultValue:()=>new WP}){}const fpt=D(2,(t,e)=>{const n=Object.create(hpt);return n[dn]=t,n[Zl]=e.onSuccess,n[ol]=e.onFailure,n}),hpt=aS({op:"OnSuccessAndFailure",eval(t){return t._stack.push(this),this[dn]}}),dpt=D(2,(t,e)=>ppt(n=>fpt(n(t),{onFailure:s=>gb(e(WO(s)),()=>XP(s)),onSuccess:s=>gb(e(ZP(s)),()=>XO(s))}))),t6=QO({op:"SetInterruptible",ensure(t){if(t.interruptible=this[dn],t._interrupted&&t.interruptible)return()=>tR}}),mpt=t=>ZO(e=>e.interruptible?t:(e.interruptible=!0,e._stack.push(t6(!1)),e._interrupted?tR:t)),ppt=t=>ZO(e=>e.interruptible?(e.interruptible=!1,e._stack.push(t6(!0)),t(mpt)):t(sn)),gpt=(t,e)=>{const n=new Xmt(eR.context(new WP));return n.evaluate(t),n};class e6{buckets=[];scheduleTask(e,n){const s=this.buckets.length;let a,c=0;for(;c<s&&this.buckets[c][0]<=n;c++)a=this.buckets[c];a&&a[0]===n?a[1].push(e):c===s?this.buckets.push([n,[e]]):this.buckets.splice(c,0,[n,[e]])}}class ypt{maxNextTickBeforeTimer;running=!1;tasks=new e6;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[s,a]of n)for(let c=0;c<a.length;c++)a[c]();this.tasks.buckets.length===0?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef($P)?e.getFiberRef(rS):!1}scheduleTask(e,n){this.tasks.scheduleTask(e,n),this.running||(this.running=!0,this.starve())}}const n6=Xt(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new ypt(2048));class r6{tasks=new e6;deferred=!1;scheduleTask(e,n){this.deferred?n6.scheduleTask(e,n):this.tasks.scheduleTask(e,n)}shouldYield(e){return e.currentOpCount>e.getFiberRef($P)?e.getFiberRef(rS):!1}flush(){for(;this.tasks.buckets.length>0;){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[n,s]of e)for(let a=0;a<s.length;a++)s[a]()}this.deferred=!0}}const s6=Xt(Symbol.for("effect/FiberRef/currentScheduler"),()=>kr(n6)),i6=Xt(Symbol.for("effect/FiberRef/currentRequestMap"),()=>kr(new Map)),Hx=(t,e,n,s)=>{switch(t){case void 0:return e();case"unbounded":return n();case"inherit":return KO(Nht,a=>a==="unbounded"?n():a>1?s(a):e());default:return t>1?s(t):e()}},a6=t=>t.replace(/[\s="]/g,"_"),bpt=t=>e=>`${a6(e.label)}=${t-e.startTime}ms`,o6="effect/MetricLabel",Cw=Symbol.for(o6);class _pt{key;value;[Cw]=Cw;_hash;constructor(e,n){this.key=e,this.value=n,this._hash=tn(o6+this.key+this.value)}[Kt](){return this._hash}[Pt](e){return vpt(e)&&this.key===e.key&&this.value===e.value}pipe(){return Ct(this,arguments)}}const Spt=(t,e)=>new _pt(t,e),vpt=t=>Ut(t,Cw),$pt=qht,nR="InterruptSignal",rR="Stateful",sR="Resume",iR="YieldNow",Ev=t=>({_tag:nR,cause:t}),ey=t=>({_tag:rR,onFiber:t}),Nu=t=>({_tag:sR,effect:t}),wpt=()=>({_tag:iR}),Ept="effect/FiberScope",yb=Symbol.for(Ept);class Tpt{[yb]=yb;fiberId=Yl;roots=new Set;add(e,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}}class Opt{fiberId;parent;[yb]=yb;constructor(e,n){this.fiberId=e,this.parent=n}add(e,n){this.parent.tell(ey(s=>{s.addChild(n),n.addObserver(()=>{s.removeChild(n)})}))}}const Rpt=t=>new Opt(t.id(),t),aR=Xt(Symbol.for("effect/FiberScope/Global"),()=>new Tpt),kpt="effect/Fiber",Mpt=Symbol.for(kpt),Apt={_E:t=>t,_A:t=>t},Cpt="effect/Fiber",Npt=Symbol.for(Cpt),c6=t=>gP(fP(t.await),t.inheritAll);({...Nm});const Mo="effect/FiberCurrent",xpt="effect/Logger",Ipt=Symbol.for(xpt),Fpt={_Message:t=>t,_Output:t=>t},oR=t=>({[Ipt]:Fpt,log:t,pipe(){return Ct(this,arguments)}}),Dpt=/^[^\s"=]*$/,zpt=(t,e)=>({annotations:n,cause:s,date:a,fiberId:c,logLevel:l,message:d,spans:m})=>{const p=E=>E.match(Dpt)?E:t(E),y=(E,N)=>`${a6(E)}=${p(N)}`,b=(E,N)=>" "+y(E,N);let S=y("timestamp",a.toISOString());S+=b("level",l.label),S+=b("fiber",Dj(c));const v=Qot(d);for(let E=0;E<v.length;E++)S+=b("message",xl(v[E],e));cut(s)||(S+=b("cause",vf(s,{renderErrorCause:!0})));for(const E of m)S+=" "+bpt(a.getTime())(E);for(const[E,N]of n)S+=b(E,xl(N,e));return S},Upt=t=>`"${t.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,Lpt=oR(zpt(Upt)),jpt=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null;jpt&&process.stdout.isTTY;const u6="effect/MetricBoundaries",Nw=Symbol.for(u6);class Ppt{values;[Nw]=Nw;constructor(e){this.values=e,this._hash=Q(tn(u6),Wt(Mm(this.values)))}_hash;[Kt](){return this._hash}[Pt](e){return qpt(e)&&qt(this.values,e.values)}pipe(){return Ct(this,arguments)}}const qpt=t=>Ut(t,Nw),Bpt=t=>{const e=Q(t,H4(Hr(Number.POSITIVE_INFINITY)),mct);return new Ppt(e)},Kpt=t=>Q(Jot(t.count-1,e=>t.start*Math.pow(t.factor,e)),L_,Bpt),Hpt="effect/MetricKeyType",l6=Symbol.for(Hpt),f6="effect/MetricKeyType/Counter",xw=Symbol.for(f6),Vpt="effect/MetricKeyType/Frequency",Ypt=Symbol.for(Vpt),Gpt="effect/MetricKeyType/Gauge",Jpt=Symbol.for(Gpt),h6="effect/MetricKeyType/Histogram",Iw=Symbol.for(h6),Qpt="effect/MetricKeyType/Summary",Xpt=Symbol.for(Qpt),d6={_In:t=>t,_Out:t=>t};class Zpt{incremental;bigint;[l6]=d6;[xw]=xw;constructor(e,n){this.incremental=e,this.bigint=n,this._hash=tn(f6)}_hash;[Kt](){return this._hash}[Pt](e){return m6(e)}pipe(){return Ct(this,arguments)}}class Wpt{boundaries;[l6]=d6;[Iw]=Iw;constructor(e){this.boundaries=e,this._hash=Q(tn(h6),Wt(mt(this.boundaries)))}_hash;[Kt](){return this._hash}[Pt](e){return p6(e)&&qt(this.boundaries,e.boundaries)}pipe(){return Ct(this,arguments)}}const tgt=t=>new Zpt(t?.incremental??!1,t?.bigint??!1),egt=t=>new Wpt(t),m6=t=>Ut(t,xw),ngt=t=>Ut(t,Ypt),rgt=t=>Ut(t,Jpt),p6=t=>Ut(t,Iw),sgt=t=>Ut(t,Xpt),igt="effect/MetricKey",g6=Symbol.for(igt),agt={_Type:t=>t},ogt=U_(qt);class cR{name;keyType;description;tags;[g6]=agt;constructor(e,n,s,a=[]){this.name=e,this.keyType=n,this.description=s,this.tags=a,this._hash=Q(tn(this.name+this.description),Wt(mt(this.keyType)),Wt(Mm(this.tags)))}_hash;[Kt](){return this._hash}[Pt](e){return cgt(e)&&this.name===e.name&&qt(this.keyType,e.keyType)&&qt(this.description,e.description)&&ogt(this.tags,e.tags)}pipe(){return Ct(this,arguments)}}const cgt=t=>Ut(t,g6),ugt=(t,e)=>new cR(t,tgt(e),F_(e?.description)),lgt=(t,e,n)=>new cR(t,egt(e),F_(n)),fgt=D(2,(t,e)=>e.length===0?t:new cR(t.name,t.keyType,t.description,Qg(t.tags,e))),Vx=Symbol.for("effect/MutableHashMap"),hgt={[Vx]:Vx,[Symbol.iterator](){return new uR(this)},toString(){return On(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(mn)}},[Ae](){return this.toJSON()},pipe(){return Ct(this,arguments)}};class uR{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const e=this.referentialIterator.next();return e.done?(this.bucketIterator=new dgt(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new uR(this.self)}}class dgt{backing;constructor(e){this.backing=e}currentBucket;next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}const mgt=()=>{const t=Object.create(hgt);return t.referential=new Map,t.buckets=new Map,t.bucketsSize=0,t},Co=D(2,(t,e)=>{if(Qy(e)===!1)return t.referential.has(e)?jt(t.referential.get(e)):St();const n=e[Kt](),s=t.buckets.get(n);return s===void 0?St():pgt(t,s,e)}),pgt=(t,e,n,s=!1)=>{for(let a=0,c=e.length;a<c;a++)if(n[Pt](e[a][0])){const l=e[a][1];return s&&(e.splice(a,1),t.bucketsSize--),jt(l)}return St()},Lh=D(2,(t,e)=>Wn(Co(t,e))),jh=D(3,(t,e,n)=>{if(Qy(e)===!1)return t.referential.set(e,n),t;const s=e[Kt](),a=t.buckets.get(s);return a===void 0?(t.buckets.set(s,[[e,n]]),t.bucketsSize++,t):(ggt(t,a,e),a.push([e,n]),t.bucketsSize++,t)}),ggt=(t,e,n)=>{for(let s=0,a=e.length;s<a;s++)if(n[Pt](e[s][0])){e.splice(s,1),t.bucketsSize--;return}},ygt="effect/MetricState",Bm=Symbol.for(ygt),y6="effect/MetricState/Counter",Fw=Symbol.for(y6),b6="effect/MetricState/Frequency",Dw=Symbol.for(b6),_6="effect/MetricState/Gauge",zw=Symbol.for(_6),S6="effect/MetricState/Histogram",Uw=Symbol.for(S6),v6="effect/MetricState/Summary",Lw=Symbol.for(v6),Km={_A:t=>t};class bgt{count;[Bm]=Km;[Fw]=Fw;constructor(e){this.count=e}[Kt](){return Q(mt(y6),Wt(mt(this.count)),Le(this))}[Pt](e){return Mgt(e)&&this.count===e.count}pipe(){return Ct(this,arguments)}}const _gt=U_(qt);class Sgt{occurrences;[Bm]=Km;[Dw]=Dw;constructor(e){this.occurrences=e}_hash;[Kt](){return Q(tn(b6),Wt(Mm(an(this.occurrences.entries()))),Le(this))}[Pt](e){return Agt(e)&&_gt(an(this.occurrences.entries()),an(e.occurrences.entries()))}pipe(){return Ct(this,arguments)}}class vgt{value;[Bm]=Km;[zw]=zw;constructor(e){this.value=e}[Kt](){return Q(mt(_6),Wt(mt(this.value)),Le(this))}[Pt](e){return Cgt(e)&&this.value===e.value}pipe(){return Ct(this,arguments)}}class $gt{buckets;count;min;max;sum;[Bm]=Km;[Uw]=Uw;constructor(e,n,s,a,c){this.buckets=e,this.count=n,this.min=s,this.max=a,this.sum=c}[Kt](){return Q(mt(S6),Wt(mt(this.buckets)),Wt(mt(this.count)),Wt(mt(this.min)),Wt(mt(this.max)),Wt(mt(this.sum)),Le(this))}[Pt](e){return Ngt(e)&&qt(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return Ct(this,arguments)}}class wgt{error;quantiles;count;min;max;sum;[Bm]=Km;[Lw]=Lw;constructor(e,n,s,a,c,l){this.error=e,this.quantiles=n,this.count=s,this.min=a,this.max=c,this.sum=l}[Kt](){return Q(mt(v6),Wt(mt(this.error)),Wt(mt(this.quantiles)),Wt(mt(this.count)),Wt(mt(this.min)),Wt(mt(this.max)),Wt(mt(this.sum)),Le(this))}[Pt](e){return xgt(e)&&this.error===e.error&&qt(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return Ct(this,arguments)}}const Egt=t=>new bgt(t),Tgt=t=>new Sgt(t),Ogt=t=>new vgt(t),Rgt=t=>new $gt(t.buckets,t.count,t.min,t.max,t.sum),kgt=t=>new wgt(t.error,t.quantiles,t.count,t.min,t.max,t.sum),Mgt=t=>Ut(t,Fw),Agt=t=>Ut(t,Dw),Cgt=t=>Ut(t,zw),Ngt=t=>Ut(t,Uw),xgt=t=>Ut(t,Lw),Igt="effect/MetricHook",Fgt=Symbol.for(Igt),Dgt={_In:t=>t,_Out:t=>t},Hm=t=>({[Fgt]:Dgt,pipe(){return Ct(this,arguments)},...t}),Yx=BigInt(0),zgt=t=>{let e=t.keyType.bigint?Yx:0;const n=t.keyType.incremental?t.keyType.bigint?a=>a>=Yx:a=>a>=0:a=>!0,s=a=>{n(a)&&(e=e+a)};return Hm({get:()=>Egt(e),update:s,modify:s})},Ugt=t=>{const e=new Map;for(const s of t.keyType.preregisteredWords)e.set(s,0);const n=s=>{const a=e.get(s)??0;e.set(s,a+1)};return Hm({get:()=>Tgt(e),update:n,modify:n})},Lgt=(t,e)=>{let n=e;return Hm({get:()=>Ogt(n),update:s=>{n=s},modify:s=>{n=n+s}})},jgt=t=>{const e=t.keyType.boundaries.values,n=e.length,s=new Uint32Array(n+1),a=new Float32Array(n);let c=0,l=0,d=Number.MAX_VALUE,m=Number.MIN_VALUE;Q(e,Ud(Xl),sl((b,S)=>{a[S]=b}));const p=b=>{let S=0,v=n;for(;S!==v;){const E=Math.floor(S+(v-S)/2),N=a[E];b<=N?v=E:S=E,v===S+1&&(b<=a[S]?v=S:S=v)}s[S]=s[S]+1,c=c+1,l=l+b,b<d&&(d=b),b>m&&(m=b)},y=()=>{const b=z_(n);let S=0;for(let v=0;v<n;v++){const E=a[v],N=s[v];S=S+N,b[v]=[E,S]}return b};return Hm({get:()=>Rgt({buckets:y(),count:c,min:d,max:m,sum:l}),update:p,modify:p})},Pgt=t=>{const{error:e,maxAge:n,maxSize:s,quantiles:a}=t.keyType,c=Q(a,Ud(Xl)),l=z_(s);let d=0,m=0,p=0,y=0,b=0;const S=E=>{const N=[];let C=0;for(;C!==s-1;){const x=l[C];if(x!=null){const[q,A]=x,P=hw(E-q);olt(P,Nj)&&alt(P,n)&&N.push(A)}C=C+1}return qgt(e,c,Ud(N,Xl))},v=(E,N)=>{if(s>0){d=d+1;const C=d%s;l[C]=[N,E]}y=m===0?E:Math.min(y,E),b=m===0?E:Math.max(b,E),m=m+1,p=p+E};return Hm({get:()=>kgt({error:e,quantiles:S(Date.now()),count:m,min:y,max:b,sum:p}),update:([E,N])=>v(E,N),modify:([E,N])=>v(E,N)})},qgt=(t,e,n)=>{const s=n.length;if(!kn(e))return Fl();const a=e[0],c=e.slice(1),l=Gx(t,s,St(),0,a,n),d=$s(l);return c.forEach(m=>{d.push(Gx(t,s,l.value,l.consumed,m,l.rest))}),sl(d,m=>[m.quantile,m.value])},Gx=(t,e,n,s,a,c)=>{let l=t,d=e,m=n,p=s,y=a,b=c,S=t,v=e,E=n,N=s,C=a,x=c;for(;;){if(!kn(b))return{quantile:y,value:St(),consumed:p,rest:[]};if(y===1)return{quantile:y,value:jt(G4(b)),consumed:p+b.length,rest:[]};const q=ur(b),A=act(b,B=>B===q),P=y*d,k=l/2*P,U=p+A[0].length,K=Math.abs(U-P);if(U<P-k){S=l,v=d,E=ld(b),N=U,C=y,x=A[1],l=S,d=v,m=E,p=N,y=C,b=x;continue}if(U>P+k){const B=Ue(m)?jt(q):m;return{quantile:y,value:B,consumed:p,rest:b}}switch(m._tag){case"None":{S=l,v=d,E=ld(b),N=U,C=y,x=A[1],l=S,d=v,m=E,p=N,y=C,b=x;continue}case"Some":{const B=Math.abs(P-m.value);if(K<B){S=l,v=d,E=ld(b),N=U,C=y,x=A[1],l=S,d=v,m=E,p=N,y=C,b=x;continue}return{quantile:y,value:jt(m.value),consumed:p,rest:b}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},Bgt="effect/MetricPair",Kgt=Symbol.for(Bgt),Hgt={_Type:t=>t},Vgt=(t,e)=>({[Kgt]:Hgt,metricKey:t,metricState:e,pipe(){return Ct(this,arguments)}}),Ygt="effect/MetricRegistry",Jx=Symbol.for(Ygt);class Ggt{[Jx]=Jx;map=mgt();snapshot(){const e=[];for(const[n,s]of this.map)e.push(Vgt(n,s.get()));return e}get(e){const n=Q(this.map,Co(e),Ws);if(n==null){if(m6(e.keyType))return this.getCounter(e);if(rgt(e.keyType))return this.getGauge(e);if(ngt(e.keyType))return this.getFrequency(e);if(p6(e.keyType))return this.getHistogram(e);if(sgt(e.keyType))return this.getSummary(e);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(e){let n=Q(this.map,Co(e),Ws);if(n==null){const s=zgt(e);Q(this.map,Lh(e))||Q(this.map,jh(e,s)),n=s}return n}getFrequency(e){let n=Q(this.map,Co(e),Ws);if(n==null){const s=Ugt(e);Q(this.map,Lh(e))||Q(this.map,jh(e,s)),n=s}return n}getGauge(e){let n=Q(this.map,Co(e),Ws);if(n==null){const s=Lgt(e,e.keyType.bigint?BigInt(0):0);Q(this.map,Lh(e))||Q(this.map,jh(e,s)),n=s}return n}getHistogram(e){let n=Q(this.map,Co(e),Ws);if(n==null){const s=jgt(e);Q(this.map,Lh(e))||Q(this.map,jh(e,s)),n=s}return n}getSummary(e){let n=Q(this.map,Co(e),Ws);if(n==null){const s=Pgt(e);Q(this.map,Lh(e))||Q(this.map,jh(e,s)),n=s}return n}}const Jgt=()=>new Ggt,Qgt="effect/Metric",Xgt=Symbol.for(Qgt),Zgt={_Type:t=>t,_In:t=>t,_Out:t=>t},Qx=Xt(Symbol.for("effect/Metric/globalMetricRegistry"),()=>Jgt()),$6=function(t,e,n,s){const a=Object.assign(c=>hht(c,l=>nyt(a,l)),{[Xgt]:Zgt,keyType:t,unsafeUpdate:e,unsafeValue:n,unsafeModify:s,register(){return this.unsafeValue([]),this},pipe(){return Ct(this,arguments)}});return a},oS=(t,e)=>w6(ugt(t,e)),w6=t=>{let e;const n=new WeakMap,s=a=>{if(a.length===0)return e!==void 0||(e=Qx.get(t)),e;let c=n.get(a);return c!==void 0||(c=Qx.get(fgt(t,a)),n.set(a,c)),c};return $6(t.keyType,(a,c)=>s(c).update(a),a=>s(a).get(),(a,c)=>s(c).modify(a))},Wgt=(t,e,n)=>w6(lgt(t,e,n)),tyt=D(3,(t,e,n)=>eyt(t,[Spt(e,n)])),eyt=D(2,(t,e)=>$6(t.keyType,(n,s)=>t.unsafeUpdate(n,Qg(e,s)),n=>t.unsafeValue(Qg(e,n)),(n,s)=>t.unsafeModify(n,Qg(e,s)))),nyt=D(2,(t,e)=>KO($w,n=>xt(()=>t.unsafeUpdate(e,n))));({...dO});const ryt=D(2,(t,e)=>KO(i6,n=>xt(()=>{if(n.has(t)){const s=n.get(t);s.state.completed||(s.state.completed=!0,RP(s.result,e))}}))),syt="effect/Supervisor",cS=Symbol.for(syt),lR={_T:t=>t};class uS{underlying;value0;[cS]=lR;constructor(e,n){this.underlying=e,this.value0=n}get value(){return this.value0}onStart(e,n,s,a){this.underlying.onStart(e,n,s,a)}onEnd(e,n){this.underlying.onEnd(e,n)}onEffect(e,n){this.underlying.onEffect(e,n)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new uS(this,Q(this.value,Er(e)))}zip(e){return new lS(this,e)}}class lS{left;right;_tag="Zip";[cS]=lR;constructor(e,n){this.left=e,this.right=n}get value(){return pP(this.left.value,this.right.value)}onStart(e,n,s,a){this.left.onStart(e,n,s,a),this.right.onStart(e,n,s,a)}onEnd(e,n){this.left.onEnd(e,n),this.right.onEnd(e,n)}onEffect(e,n){this.left.onEffect(e,n),this.right.onEffect(e,n)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new uS(this,Q(this.value,Er(e)))}zip(e){return new lS(this,e)}}const E6=t=>Ut(t,cS)&&S4(t,"Zip");class iyt{effect;[cS]=lR;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,n,s,a){}onEnd(e,n){}onEffect(e,n){}onSuspend(e){}onResume(e){}map(e){return new uS(this,Q(this.value,Er(e)))}zip(e){return new lS(this,e)}onRun(e,n){return e()}}const ayt=t=>new iyt(t),fS=Xt("effect/Supervisor/none",()=>ayt(Ls)),oyt=$f,T6="Empty",O6="AddSupervisor",R6="RemoveSupervisor",k6="AndThen",hd={_tag:T6},ny=(t,e)=>({_tag:k6,first:t,second:e}),cyt=(t,e)=>uyt(e,Hr(t)),uyt=(t,e)=>{let n=t,s=e;for(;zl(s);){const a=Ul(s);switch(a._tag){case T6:{s=zo(s);break}case O6:{n=n.zip(a.supervisor),s=zo(s);break}case R6:{n=jw(n,a.supervisor),s=zo(s);break}case k6:{s=zs(a.first)(zs(a.second)(zo(s)));break}}}return n},jw=(t,e)=>qt(t,e)?fS:E6(t)?jw(t.left,e).zip(jw(t.right,e)):t,bb=t=>qt(t,fS)?Sc():E6(t)?Q(bb(t.left),Pd(bb(t.right))):OO(t),lyt=(t,e)=>{if(qt(t,e))return hd;const n=bb(t),s=bb(e),a=Q(s,ix(n),nb(hd,(l,d)=>ny(l,{_tag:O6,supervisor:d}))),c=Q(n,ix(s),nb(hd,(l,d)=>ny(l,{_tag:R6,supervisor:d})));return ny(a,c)},fyt=oyt({empty:hd,patch:cyt,combine:ny,diff:lyt}),hyt=oS("effect_fiber_started",{incremental:!0}),Xx=oS("effect_fiber_active"),dyt=oS("effect_fiber_successes",{incremental:!0}),myt=oS("effect_fiber_failures",{incremental:!0}),pyt=tyt(Wgt("effect_fiber_lifetimes",Kpt({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Ph="Continue",gyt="Done",Zx="Yield",yyt={_E:t=>t,_A:t=>t},Eg=t=>{throw new Error(`BUG: FiberRuntime - ${xl(t)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},Ii=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Fi=Xt("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),qh={[Xy]:(t,e,n)=>or(()=>e.effect_instruction_i1(n)),OnStep:(t,e,n)=>en(en(n)),[Zy]:(t,e,n)=>or(()=>e.effect_instruction_i2(n)),[fO]:(t,e,n)=>(t.patchRuntimeFlags(t.currentRuntimeFlags,e.patch),Da(t.currentRuntimeFlags)&&t.isInterrupted()?be(t.getInterruptedCause()):en(n)),[Wy]:(t,e,n)=>(or(()=>e.effect_instruction_i2(n)),or(()=>e.effect_instruction_i0())?(t.pushStack(e),or(()=>e.effect_instruction_i1())):Ls),[Yg]:(t,e,n)=>{const s=or(()=>e.effect_instruction_i0.next(n));return s.done?en(s.value):(t.pushStack(e),oot(s.value))}},byt={[nR]:(t,e,n,s)=>(t.processNewInterruptSignal(s.cause),Da(e)?be(s.cause):n),[sR]:(t,e,n,s)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[rR]:(t,e,n,s)=>(s.onFiber(t,YP(e)),n),[iR]:(t,e,n,s)=>Mt(qO(),()=>n)},_yt=t=>Z_(zft(t),e=>Xo(Xft(e),([n,s])=>{const a=new Map,c=[];for(const d of s){c.push(Jo(d));for(const m of d)a.set(m.request,m)}const l=c.flat();return nS(xyt(n.runAll(c),l,()=>l.forEach(d=>{d.listeners.interrupted=!0})),i6,a)},!1,!1)),Syt=hO();class M6 extends tmt{[Mpt]=Apt;[Npt]=yyt;_fiberRefs;_fiberId;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_isYielding=!1;currentRuntimeFlags;currentOpCount=0;currentSupervisor;currentScheduler;currentTracer;currentSpan;currentContext;currentDefaultServices;constructor(e,n,s){if(super(),this.currentRuntimeFlags=s,this._fiberId=e,this._fiberRefs=n,yx(s)){const a=this.getFiberRef($w);hyt.unsafeUpdate(1,a),Xx.unsafeUpdate(1,a)}this.refreshRefCache()}commit(){return c6(this)}id(){return this._fiberId}resume(e){this.tell(Nu(e))}get status(){return this.ask((e,n)=>n)}get runtimeFlags(){return this.ask((e,n)=>Cmt(n)?e.currentRuntimeFlags:n.runtimeFlags)}scope(){return Rpt(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef($g)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return fn(()=>{const n=Yht(this._fiberId);return this.tell(ey((s,a)=>{RP(n,xt(()=>e(s,a)))})),OP(n)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return Hd(e=>{const n=s=>e(Me(s));return this.tell(ey((s,a)=>{s._exitValue!==null?n(this._exitValue):s.addObserver(n)})),xt(()=>this.tell(ey((s,a)=>{s.removeObserver(n)})))},this.id())}get inheritAll(){return Vr((e,n)=>{const s=e.id(),a=e.getFiberRefs(),c=n.runtimeFlags,l=this.getFiberRefs(),d=umt(a,s,l);e.setFiberRefs(d);const m=e.getFiberRef(rI),p=Q(Wg(c,m),_x(wf),_x(Sw));return mht(p)})}get poll(){return xt(()=>F_(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return xt(()=>this.tell(Ev(La(e))))}unsafeInterruptAsFork(e){this.tell(Ev(La(e)))}addObserver(e){this._exitValue!==null?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(n=>n!==e)}getFiberRefs(){return this.setFiberRef(rI,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=PP(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,n){this._fiberRefs=Rw(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:n}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(hb),this.currentTracer=this.currentDefaultServices.unsafeMap.get(zP.key),this.currentSupervisor=this.getFiberRef(Nyt),this.currentScheduler=this.getFiberRef(s6),this.currentContext=this.getFiberRef(Pm),this.currentSpan=this.currentContext.unsafeMap.get(UP.key)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}transferChildren(e){const n=this._children;if(this._children=null,n!==null&&n.size>0)for(const s of n)s._exitValue===null&&e.add(this.currentRuntimeFlags,s)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let n=Ph;const s=globalThis[Mo];globalThis[Mo]=this;try{for(;n===Ph;)n=this._queue.length===0?gyt:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[Mo]=s}this._queue.length>0&&!this._running?(this._running=!0,n===Zx?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(rS))}drainQueueWhileRunning(e,n){let s=n;for(;this._queue.length>0;){const a=this._queue.splice(0,1)[0];s=byt[a._tag](this,e,s,a)}return s}isInterrupted(){return!lut(this.getFiberRef($g))}addInterruptedCause(e){const n=this.getFiberRef($g);this.setFiberRef($g,us(n,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let e=!1;for(const n of this._children)n.tell(Ev(La(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const e=this._children.values();this._children=null;let n=!1;return PO({while:()=>!n,body:()=>{const a=e.next();return a.done?xt(()=>{n=!0}):jm(a.value.await)},step:()=>{}})}return null}reportExitValue(e){if(yx(this.currentRuntimeFlags)){const n=this.getFiberRef($w),s=this.id().startTimeMillis,a=Date.now();switch(pyt.unsafeUpdate(a-s,n),Xx.unsafeUpdate(-1,n),e._tag){case Fs:{dyt.unsafeUpdate(1,n);break}case Is:{myt.unsafeUpdate(1,n);break}}}if(e._tag==="Failure"){const n=this.getFiberRef(Iht);!RO(e.cause)&&n._tag==="Some"&&this.log("Fiber terminated with an unhandled error",e.cause,n)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let n=this._observers.length-1;n>=0;n--)this._observers[n](e);this._observers=[]}getLoggers(){return this.getFiberRef(Tyt)}log(e,n,s){const a=Wn(s)?s.value:this.getFiberRef(Mht),c=this.getFiberRef(vyt);if(Pmt(c,a))return;const l=this.getFiberRef(Aht),d=this.getFiberRef(kht),m=this.getLoggers(),p=this.getFiberRefs();if(mj(m)>0){const y=Oj(this.getFiberRef(hb),GO),b=new Date(y.unsafeCurrentTimeMillis());hot(p,()=>{for(const S of m)S.log({fiberId:this.id(),logLevel:a,message:e,cause:n,context:p,spans:l,annotations:d,date:b})})}}evaluateMessageWhileSuspended(e){switch(e._tag){case iR:return Zx;case nR:return this.processNewInterruptSignal(e.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(be(e.cause)),this._asyncInterruptor=null),Ph;case sR:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),Ph;case rR:return e.onFiber(this,this._exitValue!==null?Mmt:Amt(this.currentRuntimeFlags,this._asyncBlockingOn)),Ph;default:return Eg(e)}}evaluateEffect(e){this.currentSupervisor.onResume(this);try{let n=Da(this.currentRuntimeFlags)&&this.isInterrupted()?be(this.getInterruptedCause()):e;for(;n!==null;){const s=n,a=this.runLoop(s);if(a===Ii){const c=Fi.currentOp;Fi.currentOp=null,c._op===Gg?Nft(this.currentRuntimeFlags)?(this.tell(wpt()),this.tell(Nu(Uo)),n=null):n=Uo:c._op===ud&&(n=null)}else{this.currentRuntimeFlags=Q(this.currentRuntimeFlags,xft(Sw));const c=this.interruptAllChildren();c!==null?n=Mt(c,()=>a):(this._queue.length===0?this.setExitValue(a):this.tell(Nu(a)),n=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(e){if(this._running)this.tell(Nu(e));else{this._running=!0;const n=globalThis[Mo];globalThis[Mo]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[Mo]=n,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(Nu(e))}patchRuntimeFlags(e,n){const s=ty(e,n);return globalThis[Mo]=this,this.currentRuntimeFlags=s,s}initiateAsync(e,n){let s=!1;const a=c=>{s||(s=!0,this.tell(Nu(c)))};Da(e)&&(this._asyncInterruptor=a);try{n(a)}catch(c){a(Us(ci(c)))}}pushStack(e){this._stack.push(e),e._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const e=this._stack.pop();if(e)return e._op==="OnStep"&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==pv)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==Xy&&e._op!==Wy&&e._op!==Yg)return e;e=this.popStack()}}[mot](e){return xt(()=>Rj(this.currentContext,e))}Left(e){return Sr(e.left)}None(e){return Sr(new EP)}Right(e){return en(e.right)}Some(e){return en(e.value)}Micro(e){return cb(n=>{let s=n;const a=gpt(upt(e,this.currentContext));return a.addObserver(c=>{if(c._tag==="Success")return s(en(c.value));switch(c.cause._tag){case"Interrupt":return s(be(La(Yl)));case"Fail":return s(Sr(c.cause.error));case"Die":return s(vx(c.cause.defect))}}),cb(c=>{s=l=>{c(Ls)},a.unsafeInterrupt()})})}[k4](e){const n=or(()=>e.effect_instruction_i0()),s=this.getNextSuccessCont();return s!==void 0?(s._op in qh||Eg(s),qh[s._op](this,s,n)):(Fi.currentOp=en(n),Ii)}[Fs](e){const n=e,s=this.getNextSuccessCont();return s!==void 0?(s._op in qh||Eg(s),qh[s._op](this,s,n.effect_instruction_i0)):(Fi.currentOp=n,Ii)}[Is](e){const n=e.effect_instruction_i0,s=this.getNextFailCont();if(s!==void 0)switch(s._op){case pv:case Zy:return Da(this.currentRuntimeFlags)&&this.isInterrupted()?be(ax(n)):or(()=>s.effect_instruction_i1(n));case"OnStep":return Da(this.currentRuntimeFlags)&&this.isInterrupted()?be(ax(n)):en(be(n));case fO:return this.patchRuntimeFlags(this.currentRuntimeFlags,s.patch),Da(this.currentRuntimeFlags)&&this.isInterrupted()?be(us(n,this.getInterruptedCause())):be(n);default:Eg(s)}else return Fi.currentOp=be(n),Ii}[M4](e){return or(()=>e.effect_instruction_i0(this,YP(this.currentRuntimeFlags)))}Blocked(e){const n=this.getFiberRefs(),s=this.currentRuntimeFlags;if(this._steps.length>0){const a=[],c=this._steps[this._steps.length-1];let l=this.popStack();for(;l&&l._op!=="OnStep";)a.push(l),l=this.popStack();this.setFiberRefs(c.refs),this.currentRuntimeFlags=c.flags;const d=_mt(c.refs,n),m=Wg(c.flags,s);return en(sP(e.effect_instruction_i0,Vr(p=>{for(;a.length>0;)p.pushStack(a.pop());return p.setFiberRefs(Smt(p.id(),p.getFiberRefs())(d)),p.currentRuntimeFlags=ty(m)(p.currentRuntimeFlags),e.effect_instruction_i1})))}return tS(a=>Mt(A6(rht(e.effect_instruction_i0)),()=>a(e.effect_instruction_i1)))}RunBlocked(e){return _yt(e.effect_instruction_i0)}[Am](e){const n=e.effect_instruction_i0,s=this.currentRuntimeFlags,a=ty(s,n);if(Da(a)&&this.isInterrupted())return be(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,n),e.effect_instruction_i1){const c=Wg(a,s);return this.pushStack(new sht(c,e)),or(()=>e.effect_instruction_i1(s))}else return Uo}[Xy](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[pv](e){return this.pushStack(e),e.effect_instruction_i0}[Zy](e){return this.pushStack(e),e.effect_instruction_i0}[ud](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,e.effect_instruction_i0),Fi.currentOp=e,Ii}[Gg](e){return this._isYielding=!1,Fi.currentOp=e,Ii}[Wy](e){const n=e.effect_instruction_i0,s=e.effect_instruction_i1;return n()?(this.pushStack(e),s()):Uo}[Yg](e){return qh[Yg](this,e,void 0)}[I_](e){return or(()=>e.commit())}runLoop(e){let n=e;for(this.currentOpCount=0;;){if((this.currentRuntimeFlags&Cft)!==0&&this.currentSupervisor.onEffect(this,n),this._queue.length>0&&(n=this.drainQueueWhileRunning(this.currentRuntimeFlags,n)),!this._isYielding){this.currentOpCount+=1;const s=this.currentScheduler.shouldYield(this);if(s!==!1){this._isYielding=!0,this.currentOpCount=0;const a=n;n=Mt(qO({priority:s}),()=>a)}}try{if(n=this.currentTracer.context(()=>{if(Syt!==n[Jl]._V){const s=this.getFiberRef(Fht);if(s._tag==="Some"){const a=n[Jl]._V;this.log(`Executing an Effect versioned ${a} with a Runtime of version ${hO()}, you may want to dedupe the effect dependencies, you can use the language service plugin to detect this at compile time: https://github.com/Effect-TS/language-service`,Bl,s)}}return this[n._op](n)},this),n===Ii){const s=Fi.currentOp;return s._op===Gg||s._op===ud?Ii:(Fi.currentOp=null,s._op===Fs||s._op===Is?s:be(ci(s)))}}catch(s){n!==Ii&&!Ut(n,"_op")||!(n._op in this)?n=oht(`Not a valid effect: ${xl(n)}`):jht(s)?n=be(us(ci(s),La(Yl))):n=vx(s)}}}run=()=>{this.drainQueueOnCurrentThread()}}const vyt=Xt("effect/FiberRef/currentMinimumLogLevel",()=>kr(qmt("Info"))),$yt=t=>oR(e=>{const n=dmt(e.context,hb);Oj(n,DP).unsafe.log(t.log(e))}),wyt=Xt(Symbol.for("effect/Logger/defaultLogger"),()=>$yt(Lpt)),Eyt=Xt(Symbol.for("effect/Logger/tracerLogger"),()=>oR(({annotations:t,cause:e,context:n,fiberId:s,logLevel:a,message:c})=>{const l=Im(Vd(n,Pm),UP);if(l._tag==="None"||l.value._tag==="ExternalSpan")return;const d=Rj(Vd(n,hb),GO),m={};for(const[p,y]of t)m[p]=y;m["effect.fiberId"]=blt(s),m["effect.logLevel"]=a.label,e!==null&&e._tag!=="Empty"&&(m["effect.cause"]=vf(e,{renderErrorCause:!0})),l.value.event(xl(Array.isArray(c)?c[0]:c),d.unsafeCurrentTimeNanos(),m)})),Tyt=Xt(Symbol.for("effect/FiberRef/currentLoggers"),()=>Tht(OO(wyt,Eyt))),Oyt=D(t=>v4(t[0]),(t,e,n)=>Vr(s=>{const a=n?.batching===!0||n?.batching==="inherit"&&s.getFiberRef(xht);return n?.discard?Hx(n.concurrency,()=>xu(Ew,n?.concurrentFinalizers)(c=>a?Xo(t,(l,d)=>c(e(l,d)),!0,!1,1):Z_(t,(l,d)=>c(e(l,d)))),()=>xu(Tw,n?.concurrentFinalizers)(c=>Xo(t,(l,d)=>c(e(l,d)),a,!1)),c=>xu(Ow(c),n?.concurrentFinalizers)(l=>Xo(t,(d,m)=>l(e(d,m)),a,!1,c))):Hx(n?.concurrency,()=>xu(Ew,n?.concurrentFinalizers)(c=>a?Wx(t,1,(l,d)=>c(e(l,d)),!0):Ba(t,(l,d)=>c(e(l,d)))),()=>xu(Tw,n?.concurrentFinalizers)(c=>Ryt(t,(l,d)=>c(e(l,d)),a)),c=>xu(Ow(c),n?.concurrentFinalizers)(l=>Wx(t,c,(d,m)=>l(e(d,m)),a)))})),Ryt=(t,e,n)=>fn(()=>{const s=an(t),a=new Array(s.length);return eS(Xo(s,(l,d)=>Mt(e(l,d),m=>xt(()=>a[d]=m)),n,!1),Me(a))}),Xo=(t,e,n,s,a)=>tS(c=>dht(l=>Vr(d=>{let m=Array.from(t).reverse(),p=m.length;if(p===0)return Ls;let y=0,b=!1;const S=a?Math.min(m.length,a):m.length,v=new Set,E=new Array,N=()=>v.forEach(B=>{B.currentScheduler.scheduleTask(()=>{B.unsafeInterruptAsFork(d.id())},0)}),C=new Array,x=new Array,q=new Array,A=()=>{const B=E.filter(({exit:et})=>et._tag==="Failure").sort((et,tt)=>et.index<tt.index?-1:et.index===tt.index?0:1).map(({exit:et})=>et);return B.length===0&&B.push(Uo),B},P=(B,et=!1)=>{const tt=mP(l(B)),Z=Myt(tt,d,d.currentRuntimeFlags,aR);return d.currentScheduler.scheduleTask(()=>{et&&Z.unsafeInterruptAsFork(d.id()),Z.resume(tt)},0),Z},k=()=>{s||(p-=m.length,m=[]),b=!0,N()},U=n?lht:cP,K=P(Hd(B=>{const et=(Z,rt)=>{Z._op==="Blocked"?q.push(Z):(E.push({index:rt,exit:Z}),Z._op==="Failure"&&!b&&k())},tt=()=>{if(m.length>0){const Z=m.pop();let rt=y++;const vt=()=>{const G=m.pop();return rt=y++,Mt(qO(),()=>Mt(U(c(e(G,rt))),ut))},ut=G=>m.length>0&&(et(G,rt),m.length>0)?vt():Me(G),Et=Mt(U(c(e(Z,rt))),ut),z=P(Et);C.push(z),v.add(z),b&&z.currentScheduler.scheduleTask(()=>{z.unsafeInterruptAsFork(d.id())},0),z.addObserver(G=>{let st;if(G._op==="Failure"?st=G:st=G.effect_instruction_i0,x.push(z),v.delete(z),et(st,rt),E.length===p)B(Me(Rn(Ox(A(),{parallel:!0}),()=>Uo)));else if(q.length+E.length===p){const Nt=A(),O=q.map(Y=>Y.effect_instruction_i0).reduce(tP);B(Me(sP(O,Xo([Rn(Ox(Nt,{parallel:!0}),()=>Uo),...q.map(Y=>Y.effect_instruction_i1)],Y=>Y,n,!0,a))))}else tt()})}};for(let Z=0;Z<S;Z++)tt()}));return jm(jO(fP(c(c6(K))),TP({onFailure:B=>{k();const et=q.length+1,tt=Math.min(typeof a=="number"?a:q.length,q.length),Z=Array.from(q);return Hd(rt=>{let vt=0,ut=0;const Et=(G,st)=>Nt=>{vt++,vt===et&&rt(en(be(B))),Z.length>0&&st&&z()},z=()=>{P(Z.pop(),!0).addObserver(Et(ut,!0)),ut++};K.addObserver(Et(ut,!1)),ut++;for(let G=0;G<tt;G++)z()})},onSuccess:()=>Ba(x,B=>B.inheritAll)})))}))),Wx=(t,e,n,s)=>fn(()=>{const a=an(t),c=new Array(a.length);return eS(Xo(a,(d,m)=>Er(n(d,m),p=>c[m]=p),s,!1,e),Me(c))}),A6=t=>Ayt(t,aR),kyt=(t,e,n,s=null)=>{const a=C6(t,e,n,s);return a.resume(t),a},Myt=(t,e,n,s=null)=>C6(t,e,n,s),C6=(t,e,n,s=null)=>{const a=zj(),c=e.getFiberRefs(),l=lmt(c,a),d=new M6(a,l,n),m=Vd(l,Pm),p=d.currentSupervisor;return p.onStart(m,t,jt(e),d),d.addObserver(b=>p.onEnd(b,d)),(s!==null?s:Q(e.getFiberRef(ww),Rn(()=>e.scope()))).add(n,d),d},Ayt=(t,e)=>Vr((n,s)=>Me(kyt(t,n,s.runtimeFlags,e))),tI=t=>qm(e=>lr(Im(e,Vm),{onNone:()=>t,onSome:n=>{switch(n.strategy._tag){case"Parallel":return t;case"Sequential":case"ParallelN":return Mt(sS(n,Tw),s=>fR(t,s))}}})),eI=t=>e=>qm(n=>lr(Im(n,Vm),{onNone:()=>e,onSome:s=>s.strategy._tag==="ParallelN"&&s.strategy.parallelism===t?e:Mt(sS(s,Ow(t)),a=>fR(e,a))})),xu=(t,e)=>n=>qm(s=>lr(Im(s,Vm),{onNone:()=>n(sn),onSome:a=>{if(e===!0){const c=t._tag==="Parallel"?tI:t._tag==="Sequential"?nI:eI(t.parallelism);switch(a.strategy._tag){case"Parallel":return c(n(tI));case"Sequential":return c(n(nI));case"ParallelN":return c(n(eI(a.strategy.parallelism)))}}else return n(sn)}})),nI=t=>qm(e=>lr(Im(e,Vm),{onNone:()=>t,onSome:n=>{switch(n.strategy._tag){case"Sequential":return t;case"Parallel":case"ParallelN":return Mt(sS(n,Ew),s=>fR(t,s))}}})),Vm=Fc("effect/Scope"),fR=D(2,(t,e)=>Zht(t,kj(Kut(Vm,e)))),Cyt=t=>Ef(t,{differ:fyt,fork:hd}),rI=Rht(Ift),Nyt=Cyt(fS),xyt=(t,e,n)=>lP(s=>Mt(Mt(A6(hP(t)),a=>Hd(c=>{const l=e.map(p=>p.listeners.count),d=()=>{l.every(p=>p===0)&&e.every(p=>p.result.state.current._tag==="Pending"?!0:!!(p.result.state.current._tag==="Done"&&VO(p.result.state.current.effect)&&p.result.state.current.effect._tag==="Failure"&&fut(p.result.state.current.effect.cause)))&&(m.forEach(p=>p()),n?.(),c(pht(a)))};a.addObserver(p=>{m.forEach(y=>y()),c(p)});const m=e.map((p,y)=>{const b=S=>{l[y]=S,d()};return p.listeners.addObserver(b),()=>p.listeners.removeObserver(b)});return d(),xt(()=>{m.forEach(p=>p())})})),()=>fn(()=>{const a=e.flatMap(c=>c.state.completed?[]:[c]);return Z_(a,c=>ryt(c.request,Kht(s)))}))),Iyt=zht,Fyt=sS,hR=t=>function(){if(arguments.length===1){const e=arguments[0];return(n,...s)=>t(e,n,...s)}return t.apply(this,arguments)},N6=hR((t,e,n)=>{const s=zj(),a=[[Pm,[[s,t.context]]]];n?.scheduler&&a.push([s6,[[s,n.scheduler]]]);let c=mmt(t.fiberRefs,{entries:a,forkAs:s});n?.updateRefs&&(c=n.updateRefs(c,s));const l=new M6(s,c,t.runtimeFlags);let d=e;n?.scope&&(d=Mt(Fyt(n.scope,LP),p=>eS(Dht(p,lP(y=>qt(y,l.id())?Ls:yP(l,y))),jO(e,y=>Iyt(p,y)))));const m=l.currentSupervisor;return m!==fS&&(m.onStart(t.context,d,St(),l),l.addObserver(p=>m.onEnd(p,l))),aR.add(t.runtimeFlags,l),n?.immediate===!1?l.resume(d):l.start(d),l}),Dyt=hR((t,e)=>{const n=qyt(t)(e);if(n._tag==="Failure")throw jyt(n.effect_instruction_i0);return n.effect_instruction_i0});class zyt extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}}const Uyt=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new zyt(t);return Error.stackTraceLimit=e,n},Tv=Symbol.for("effect/Runtime/FiberFailure"),Tg=Symbol.for("effect/Runtime/FiberFailure/Cause");class Lyt extends Error{[Tv];[Tg];constructor(e){const n=vj(e)[0];super(n?.message||"An error has occurred"),this[Tv]=Tv,this[Tg]=e,this.name=n?`(FiberFailure) ${n.name}`:"FiberFailure",n?.stack&&(this.stack=n.stack)}toJSON(){return{_id:"FiberFailure",cause:this[Tg].toJSON()}}toString(){return"(FiberFailure) "+vf(this[Tg],{renderErrorCause:!0})}[Ae](){return this.toString()}}const jyt=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new Lyt(t);return Error.stackTraceLimit=e,n},Pyt=t=>{const e=t;switch(e._op){case"Failure":case"Success":return e;case"Left":return Rx(e.left);case"Right":return en(e.right);case"Some":return en(e.value);case"None":return Rx(EP())}},qyt=hR((t,e)=>{const n=Pyt(e);if(n)return n;const s=new r6,a=N6(t)(e,{scheduler:s});s.flush();const c=a.unsafePoll();return c||Bht(zO(Uyt(a),YO(a)))});class Byt{context;runtimeFlags;fiberRefs;constructor(e,n,s){this.context=e,this.runtimeFlags=n,this.fiberRefs=s}pipe(){return Ct(this,arguments)}}const Kyt=t=>new Byt(t.context,t.runtimeFlags,t.fiberRefs),Hyt=Zj(wf,Qj,Jj),x6=Kyt({context:AO(),runtimeFlags:Hyt,fiberRefs:pmt()}),Vyt=N6(x6),Yyt=Dyt(x6),Gyt=X_,ry=Oyt,Og=fn,ns=Ls,Jyt=vw,Pw=Er,Qyt=LO,Xyt=W_,Iu=ub,Ys=Mt,Zyt=Vyt,Wyt=Yyt,I6=(t,e)=>{switch(e._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(t);case"SymbolKeyword":return Object.getOwnPropertySymbols(t);case"Refinement":return I6(t,e.from)}},cl=t=>Object.keys(t).concat(Object.getOwnPropertySymbols(t)),F6=t=>{let e=!1,n;return()=>(e||(n=t(),e=!0),n)},tbt=t=>{try{return t.toISOString()}catch{return String(t)}},ui=(t,e=!0)=>{if(Array.isArray(t))return`[${t.map(n=>ui(n,e)).join(",")}]`;if(Qat(t))return tbt(t);if(Ut(t,"toString")&&Rm(t.toString)&&t.toString!==Object.prototype.toString)return t.toString();if(na(t))return JSON.stringify(t);if(yc(t)||t==null||iO(t)||ew(t))return String(t);if(C_(t))return String(t)+"n";if(v4(t))return`${t.constructor.name}(${ui(Array.from(t),e)})`;try{e&&JSON.stringify(t);const n=`{${cl(t).map(a=>`${na(a)?JSON.stringify(a):String(a)}:${ui(t[a],!1)}`).join(",")}}`,s=t.constructor.name;return t.constructor!==Object.prototype.constructor?`${s}(${n})`:n}catch{return"<circular structure>"}},ebt=t=>typeof t=="string"?JSON.stringify(t):String(t),D6=t=>Array.isArray(t),sI=t=>`[${ebt(t)}]`,nbt=t=>D6(t)?t.map(sI).join(""):sI(t),Dc=(t,e,n,s)=>{let a=t;return e!==void 0&&(a+=`
details: ${e}`),s&&(a+=`
schema (${s._tag}): ${s}`),a},rbt=t=>Dc("Unsupported key schema",void 0,void 0,t),sbt=t=>Dc("Unsupported literal",`literal value: ${ui(t)}`),iI=t=>Dc("Duplicate index signature",`${t} index signature`),ibt=Dc("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),abt=Dc("Invalid element","A required element cannot follow an optional element. ts(1257)"),aI=t=>Dc("Duplicate property signature transformation",`Duplicate key ${ui(t)}`),obt=t=>Dc("Duplicate property signature",`Duplicate key ${ui(t)}`),cbt=Symbol.for("effect/annotation/Brand"),ubt=Symbol.for("effect/annotation/SchemaId"),z6=Symbol.for("effect/annotation/Message"),dR=Symbol.for("effect/annotation/MissingMessage"),U6=Symbol.for("effect/annotation/Identifier"),co=Symbol.for("effect/annotation/Title"),qw=Symbol.for("effect/annotation/AutoTitle"),Ym=Symbol.for("effect/annotation/Description"),L6=Symbol.for("effect/annotation/Examples"),j6=Symbol.for("effect/annotation/Default"),P6=Symbol.for("effect/annotation/JSONSchema"),q6=Symbol.for("effect/annotation/Arbitrary"),B6=Symbol.for("effect/annotation/Pretty"),K6=Symbol.for("effect/annotation/Equivalence"),lbt=Symbol.for("effect/annotation/Documentation"),H6=Symbol.for("effect/annotation/Concurrency"),V6=Symbol.for("effect/annotation/Batching"),Y6=Symbol.for("effect/annotation/ParseIssueTitle"),G6=Symbol.for("effect/annotation/ParseOptions"),J6=Symbol.for("effect/annotation/DecodingFallback"),Q6=Symbol.for("effect/annotation/Surrogate"),fbt=Symbol.for("effect/annotation/StableFilter"),hr=D(2,(t,e)=>Object.prototype.hasOwnProperty.call(t.annotations,e)?jt(t.annotations[e]):St()),hbt=hr(cbt),dbt=hr(z6),mbt=hr(dR),X6=hr(co),Z6=hr(qw),hS=hr(U6),W6=hr(Ym),pbt=hr(H6),gbt=hr(V6),ybt=hr(Y6),bbt=hr(G6),_bt=hr(J6),tq=hr(Q6),Sbt=hr(fbt),vbt=t=>Yot(Sbt(t),e=>e===!0),eq=Symbol.for("effect/annotation/JSONIdentifier"),$bt=hr(eq),wbt=t=>Qa($bt(t),()=>hS(t));class dS{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(e,n,s,a={}){this.typeParameters=e,this.decodeUnknown=n,this.encodeUnknown=s,this.annotations=a}toString(){return Rn(di(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(e=>e.toJSON()),annotations:An(this.annotations)}}}const Gm=t=>e=>e._tag===t;let Bw=class{literal;annotations;_tag="Literal";constructor(e,n={}){this.literal=e,this.annotations=n}toString(){return Rn(di(this),()=>ui(this.literal))}toJSON(){return{_tag:this._tag,literal:C_(this.literal)?String(this.literal):this.literal,annotations:An(this.annotations)}}};const oI=Gm("Literal");class Ebt{symbol;annotations;_tag="UniqueSymbol";constructor(e,n={}){this.symbol=e,this.annotations=n}toString(){return Rn(di(this),()=>ui(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:An(this.annotations)}}}class Tbt{annotations;_tag="NeverKeyword";constructor(e={}){this.annotations=e}toString(){return Of(this)}toJSON(){return{_tag:this._tag,annotations:An(this.annotations)}}}const nq=new Tbt({[co]:"never"});class Obt{annotations;_tag="UnknownKeyword";constructor(e={}){this.annotations=e}toString(){return Of(this)}toJSON(){return{_tag:this._tag,annotations:An(this.annotations)}}}const rq=new Obt({[co]:"unknown"});class Rbt{annotations;_tag="AnyKeyword";constructor(e={}){this.annotations=e}toString(){return Of(this)}toJSON(){return{_tag:this._tag,annotations:An(this.annotations)}}}const kbt=new Rbt({[co]:"any"});class Mbt{annotations;_tag="StringKeyword";constructor(e={}){this.annotations=e}toString(){return Of(this)}toJSON(){return{_tag:this._tag,annotations:An(this.annotations)}}}const Abt=new Mbt({[co]:"string",[Ym]:"a string"}),Cbt=Gm("StringKeyword");class Nbt{annotations;_tag="BooleanKeyword";constructor(e={}){this.annotations=e}toString(){return Of(this)}toJSON(){return{_tag:this._tag,annotations:An(this.annotations)}}}const xbt=new Nbt({[co]:"boolean",[Ym]:"a boolean"});class Ibt{annotations;_tag="BigIntKeyword";constructor(e={}){this.annotations=e}toString(){return Of(this)}toJSON(){return{_tag:this._tag,annotations:An(this.annotations)}}}const Fbt=new Ibt({[co]:"bigint",[Ym]:"a bigint"}),Dbt=Gm("SymbolKeyword");let mS=class{type;annotations;constructor(e,n={}){this.type=e,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:An(this.annotations)}}toString(){return String(this.type)}};class pS extends mS{isOptional;constructor(e,n,s={}){super(e,s),this.isOptional=n}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:An(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}const sq=t=>t.map(e=>e.type);class mR{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(e,n,s,a={}){this.elements=e,this.rest=n,this.isReadonly=s,this.annotations=a;let c=!1,l=!1;for(const d of e)if(d.isOptional)c=!0;else if(c){l=!0;break}if(l||c&&n.length>1)throw new Error(abt)}toString(){return Rn(di(this),()=>zbt(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(e=>e.toJSON()),rest:this.rest.map(e=>e.toJSON()),isReadonly:this.isReadonly,annotations:An(this.annotations)}}}const zbt=t=>{const e=t.elements.map(String).join(", ");return Xot(t.rest,{onEmpty:()=>`readonly [${e}]`,onNonEmpty:(n,s)=>{const a=String(n),c=a.includes(" | ")?`(${a})`:a;if(s.length>0){const l=s.map(String).join(", ");return t.elements.length>0?`readonly [${e}, ...${c}[], ${l}]`:`readonly [...${c}[], ${l}]`}else return t.elements.length>0?`readonly [${e}, ...${c}[]]`:`ReadonlyArray<${a}>`}})};class Zn extends pS{name;isReadonly;constructor(e,n,s,a,c){super(n,s,c),this.name=e,this.isReadonly=a}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:An(this.annotations)}}}const iq=t=>{switch(t._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return iq(t.from)}return!1};class gS{type;isReadonly;parameter;constructor(e,n,s){if(this.type=n,this.isReadonly=s,iq(e))this.parameter=e;else throw new Error(ibt)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class Zo{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(e,n,s={}){this.annotations=s;const a={};for(let l=0;l<e.length;l++){const d=e[l].name;if(Object.prototype.hasOwnProperty.call(a,d))throw new Error(obt(d));a[d]=null}const c={string:!1,symbol:!1};for(let l=0;l<n.length;l++){const d=hq(n[l].parameter);if(Cbt(d)){if(c.string)throw new Error(iI("string"));c.string=!0}else if(Dbt(d)){if(c.symbol)throw new Error(iI("symbol"));c.symbol=!0}}this.propertySignatures=e,this.indexSignatures=n}toString(){return Rn(di(this),()=>Ubt(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(e=>e.toJSON()),indexSignatures:this.indexSignatures.map(e=>e.toJSON()),annotations:An(this.annotations)}}}const cI=t=>t.map(String).join("; "),Ubt=t=>{if(t.propertySignatures.length>0){const e=t.propertySignatures.map(String).join("; ");return t.indexSignatures.length>0?`{ ${e}; ${cI(t.indexSignatures)} }`:`{ ${e} }`}else return t.indexSignatures.length>0?`{ ${cI(t.indexSignatures)} }`:"{}"},Lbt=Ud(B4(Xl,t=>{switch(t._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),jbt={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},aq=t=>J4(t,e=>oq(e)?aq(e.types):[e]),Pbt=t=>{const e=Lbt(t),n=[],s={},a=[];for(const c of e)switch(c._tag){case"NeverKeyword":break;case"AnyKeyword":return[kbt];case"UnknownKeyword":return[rq];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{s[c._tag]||(s[c._tag]=c,n.push(c));break}case"Literal":{const l=typeof c.literal;switch(l){case"string":case"number":case"bigint":case"boolean":{const d=jbt[l];!s[d]&&!a.includes(c.literal)&&(a.push(c.literal),n.push(c));break}case"object":{a.includes(c.literal)||(a.push(c.literal),n.push(c));break}}break}case"UniqueSymbol":{!s.SymbolKeyword&&!a.includes(c.symbol)&&(a.push(c.symbol),n.push(c));break}case"TupleType":{s.ObjectKeyword||n.push(c);break}case"TypeLiteral":{c.propertySignatures.length===0&&c.indexSignatures.length===0?s["{}"]||(s["{}"]=c,n.push(c)):s.ObjectKeyword||n.push(c);break}default:n.push(c)}return n};let ei=class Kw{types;annotations;static make=(e,n)=>pR(e)?new Kw(e,n):e.length===1?e[0]:nq;static unify=(e,n)=>Kw.make(Pbt(aq(e)),n);_tag="Union";constructor(e,n={}){this.types=e,this.annotations=n}toString(){return Rn(di(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(e=>e.toJSON()),annotations:An(this.annotations)}}};const qbt=(t,e)=>t.map(e),pR=t=>t.length>1,oq=Gm("Union"),Ov=Xt(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);class gR{f;annotations;_tag="Suspend";constructor(e,n={}){this.f=e,this.annotations=n,this.f=F6(e)}toString(){return di(this).pipe(Qa(()=>D_(Pot(this.f)(),e=>di(e))),Rn(()=>"<suspended schema>"))}toJSON(){const e=this.f();let n=Ov.get(e);return n||(Ov.set(e,{_tag:this._tag}),n={_tag:this._tag,ast:e.toJSON(),annotations:An(this.annotations)},Ov.set(e,n),n)}}let Bbt=class{from;filter;annotations;_tag="Refinement";constructor(e,n,s={}){this.from=e,this.filter=n,this.annotations=s}toString(){return hS(this).pipe(Rn(()=>lr(dq(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:e=>yR(this.from)?String(this.from)+" & "+e:e})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:An(this.annotations)}}};const yR=Gm("Refinement"),Rv={};let cq=class{from;to;transformation;annotations;_tag="Transformation";constructor(e,n,s,a={}){this.from=e,this.to=n,this.transformation=s,this.annotations=a}toString(){return Rn(di(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:An(this.annotations)}}};class Kbt{decode;encode;_tag="FinalTransformation";constructor(e,n){this.decode=e,this.encode=n}}class Hbt{from;to;decode;encode;constructor(e,n,s,a){this.from=e,this.to=n,this.decode=s,this.encode=a}}class Vbt{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(e){this.propertySignatureTransformations=e;const n={},s={};for(const a of e){const c=a.from;if(n[c])throw new Error(aI(c));n[c]=!0;const l=a.to;if(s[l])throw new Error(aI(l));s[l]=!0}}}const Wl=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={...t.annotations,...e},a=tq(t);return Wn(a)&&(s[Q6]=Wl(a.value,e)),n.annotations.value=s,Object.create(Object.getPrototypeOf(t),n)},Ybt="[\\s\\S]*",Gbt="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",uq=(t,e)=>{switch(t._tag){case"Literal":return lb(String(t.literal));case"StringKeyword":return Ybt;case"NumberKeyword":return Gbt;case"TemplateLiteral":return lq(t);case"Union":return t.types.map(n=>uq(n)).join("|")}},Jbt=(t,e,n,s)=>oq(t)?`(${e})`:e,lq=(t,e,n)=>{let s="";if(t.head!==""){const a=lb(t.head);s+=a}for(const a of t.spans){const c=uq(a.type);if(s+=Jbt(a.type,c),a.literal!==""){const l=lb(a.literal);s+=l}}return s},Qbt=t=>new RegExp(`^${lq(t)}$`),uI=(t,e)=>{const n=[],s=[],a=c=>{switch(c._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":s.push(new gS(c,e,!0));break;case"Literal":if(na(c.literal)||yc(c.literal))n.push(new Zn(c.literal,e,!1,!0));else throw new Error(sbt(c.literal));break;case"Enums":{for(const[l,d]of c.enums)n.push(new Zn(d,e,!1,!0));break}case"UniqueSymbol":n.push(new Zn(c.symbol,e,!1,!0));break;case"Union":c.types.forEach(a);break;default:throw new Error(rbt(c))}};return a(t),{propertySignatures:n,indexSignatures:s}},fq=t=>e=>{let n;for(const s of t)Object.prototype.hasOwnProperty.call(e.annotations,s)&&(n===void 0&&(n={}),n[s]=e.annotations[s]);return n},Xbt=fq([L6,j6,P6,q6,B6,K6]),En=t=>{switch(t._tag){case"Declaration":{const e=cs(t.typeParameters,En);return e===t.typeParameters?t:new dS(e,t.decodeUnknown,t.encodeUnknown,t.annotations)}case"TupleType":{const e=cs(t.elements,a=>{const c=En(a.type);return c===a.type?a:new pS(c,a.isOptional)}),n=sq(t.rest),s=cs(n,En);return e===t.elements&&s===n?t:new mR(e,s.map(a=>new mS(a)),t.isReadonly,t.annotations)}case"TypeLiteral":{const e=cs(t.propertySignatures,s=>{const a=En(s.type);return a===s.type?s:new Zn(s.name,a,s.isOptional,s.isReadonly)}),n=cs(t.indexSignatures,s=>{const a=En(s.type);return a===s.type?s:new gS(s.parameter,a,s.isReadonly)});return e===t.propertySignatures&&n===t.indexSignatures?t:new Zo(e,n,t.annotations)}case"Union":{const e=cs(t.types,En);return e===t.types?t:ei.make(e,t.annotations)}case"Suspend":return new gR(()=>En(t.f()),t.annotations);case"Refinement":{const e=En(t.from);return e===t.from?t:new Bbt(e,t.filter,t.annotations)}case"Transformation":{const e=Xbt(t);return En(e!==void 0?Wl(t.to,e):t.to)}}return t},Fu=t=>lr(wbt(t),{onNone:()=>{},onSome:e=>({[eq]:e})});function cs(t,e){let n=!1;const s=z_(t.length);for(let a=0;a<t.length;a++){const c=t[a],l=e(c);l!==c&&(n=!0),s[a]=l}return n?s:t}const Gs=(t,e)=>{switch(t._tag){case"Declaration":{const n=cs(t.typeParameters,s=>Gs(s));return n===t.typeParameters?t:new dS(n,t.decodeUnknown,t.encodeUnknown,t.annotations)}case"TupleType":{const n=cs(t.elements,c=>{const l=Gs(c.type);return l===c.type?c:new pS(l,c.isOptional)}),s=sq(t.rest),a=cs(s,c=>Gs(c));return n===t.elements&&a===s?t:new mR(n,a.map(c=>new mS(c)),t.isReadonly,Fu(t))}case"TypeLiteral":{const n=cs(t.propertySignatures,a=>{const c=Gs(a.type);return c===a.type?a:new Zn(a.name,c,a.isOptional,a.isReadonly)}),s=cs(t.indexSignatures,a=>{const c=Gs(a.type);return c===a.type?a:new gS(a.parameter,c,a.isReadonly)});return n===t.propertySignatures&&s===t.indexSignatures?t:new Zo(n,s,Fu(t))}case"Union":{const n=cs(t.types,s=>Gs(s));return n===t.types?t:ei.make(n,Fu(t))}case"Suspend":return new gR(()=>Gs(t.f()),Fu(t));case"Refinement":{const n=Gs(t.from),s=Fu(t);return s?Wl(n,s):n}case"Transformation":{const n=Fu(t);return Gs(n?Wl(t.from,n):t.from)}}return t},lI=t=>Gs(t),An=t=>{const e={};for(const n of Object.getOwnPropertySymbols(t))e[String(n)]=t[n];return e},hq=t=>{switch(t._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return t;case"Refinement":return hq(t.from)}},Of=t=>Rn(di(t),()=>t._tag);function Zbt(t){return lr(hbt(t),{onNone:()=>"",onSome:e=>e.map(n=>` & Brand<${ui(n)}>`).join("")})}const dq=t=>X6(t).pipe(Qa(()=>W6(t)),Qa(()=>Z6(t)),K4(e=>e+Zbt(t))),di=t=>Qa(hS(t),()=>dq(t));class Qn{path;actual;issue;_tag="Pointer";constructor(e,n,s){this.path=e,this.actual=n,this.issue=s}}class fI{actual;message;_tag="Unexpected";constructor(e,n){this.actual=e,this.message=n}}class Bh{ast;message;_tag="Missing";actual=void 0;constructor(e,n){this.ast=e,this.message=n}}class qe{ast;actual;issues;output;_tag="Composite";constructor(e,n,s,a){this.ast=e,this.actual=n,this.issues=s,this.output=a}}class kv{ast;actual;kind;issue;_tag="Refinement";constructor(e,n,s,a){this.ast=e,this.actual=n,this.kind=s,this.issue=a}}class Mv{ast;actual;kind;issue;_tag="Transformation";constructor(e,n,s,a){this.ast=e,this.actual=n,this.kind=s,this.issue=a}}class ni{ast;actual;message;_tag="Type";constructor(e,n,s){this.ast=e,this.actual=n,this.message=s}}class hI{ast;actual;message;_tag="Forbidden";constructor(e,n,s){this.ast=e,this.actual=n,this.message=s}}const dI=Symbol.for("effect/Schema/ParseErrorTypeId");class Wbt extends Xdt("ParseError"){[dI]=dI;get message(){return this.toString()}toString(){return sy.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[Ae](){return this.toJSON()}}const t_t=t=>new Wbt({issue:t}),Yd=te,bR=Lt,e_t=Aot,sr=Cot,Ka=D(2,(t,e)=>sr(t)?yO(t,{onLeft:Lt,onRight:e}):Ys(t,e)),Js=D(2,(t,e)=>sr(t)?Iot(t,e):Pw(t,e)),Av=D(2,(t,e)=>sr(t)?xot(t,e):Xyt(t,e)),n_t=D(2,(t,e)=>sr(t)?Not(t,{onLeft:e.onFailure,onRight:e.onSuccess}):Qyt(t,e)),mq=D(2,(t,e)=>sr(t)?yO(t,{onLeft:e,onRight:te}):Jyt(t,e)),_R=(t,e)=>e===void 0||yc(e)?t:t===void 0?e:{...t,...e},r_t=(t,e,n)=>{const s=In(t,e);return(a,c)=>s(a,_R(n,c))},s_t=(t,e,n)=>{const s=r_t(t,e,n);return(a,c)=>j4(s(a,c),t_t)},pq=(t,e,n)=>{const s=In(t,e);return(a,c)=>s(a,{..._R(n,c),isEffectAllowed:!0})},gq=(t,e)=>pq(t.ast,!0,e),yq=(t,e)=>pq(t.ast,!1,e),i_t=(t,e)=>s_t(En(t.ast),!0,e),a_t=Xt(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),o_t=Xt(Symbol.for("effect/ParseResult/encodeMemoMap"),()=>new WeakMap),In=(t,e)=>{const n=e?a_t:o_t,s=n.get(t);if(s)return s;const a=c_t(t,e),c=bbt(t),l=Wn(c)?(p,y)=>a(p,_R(y,c.value)):a,d=_bt(t),m=e&&Wn(d)?(p,y)=>td(mq(l(p,y),d.value),t,p,y):l;return n.set(t,m),m},Cv=t=>Ws(pbt(t)),Nv=t=>Ws(gbt(t)),c_t=(t,e)=>{switch(t._tag){case"Refinement":if(e){const n=In(t.from,!0);return(s,a)=>{a=a??Rv;const c=a?.errors==="all",l=Ka(mq(n(s,a),d=>{const m=new kv(t,s,"From",d);return c&&vbt(t)&&vq(d)?lr(t.filter(s,a,t),{onNone:()=>Lt(m),onSome:p=>Lt(new qe(t,s,[m,new kv(t,s,"Predicate",p)]))}):Lt(m)}),d=>lr(t.filter(d,a,t),{onNone:()=>te(d),onSome:m=>Lt(new kv(t,s,"Predicate",m))}));return td(l,t,s,a)}}else{const n=In(En(t),!0),s=In(bq(t.from),!1);return(a,c)=>td(Ka(n(a,c),l=>s(l,c)),t,a,c)}case"Transformation":{const n=f_t(t.transformation,e),s=e?In(t.from,!0):In(t.to,!1),a=e?In(t.to,!0):In(t.from,!1);return(c,l)=>td(Ka(Av(s(c,l),d=>new Mv(t,c,e?"Encoded":"Type",d)),d=>Ka(Av(n(d,l??Rv,t,c),m=>new Mv(t,c,"Transformation",m)),m=>Av(a(m,l),p=>new Mv(t,c,e?"Type":"Encoded",p)))),t,c,l)}case"Declaration":{const n=e?t.decodeUnknown(...t.typeParameters):t.encodeUnknown(...t.typeParameters);return(s,a)=>td(n(s,a??Rv,t),t,s,a)}case"Literal":return jr(t,n=>n===t.literal);case"UniqueSymbol":return jr(t,n=>n===t.symbol);case"UndefinedKeyword":return jr(t,Yat);case"NeverKeyword":return jr(t,Gat);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return te;case"StringKeyword":return jr(t,na);case"NumberKeyword":return jr(t,yc);case"BooleanKeyword":return jr(t,iO);case"BigIntKeyword":return jr(t,C_);case"SymbolKeyword":return jr(t,ew);case"ObjectKeyword":return jr(t,oo);case"Enums":return jr(t,n=>t.enums.some(([s,a])=>a===n));case"TemplateLiteral":{const n=Qbt(t);return jr(t,s=>na(s)&&n.test(s))}case"TupleType":{const n=t.elements.map(p=>In(p.type,e)),s=t.rest.map(p=>In(p.type,e));let a=t.elements.filter(p=>!p.isOptional);t.rest.length>0&&(a=a.concat(t.rest.slice(1)));const c=a.length,l=t.elements.length>0?t.elements.map((p,y)=>y).join(" | "):"never",d=Cv(t),m=Nv(t);return(p,y)=>{if(!Wot(p))return Lt(new ni(t,p));const b=y?.errors==="all",S=[];let v=0;const E=[],N=p.length;for(let A=N;A<=c-1;A++){const P=new Qn(A,p,new Bh(a[A-N]));if(b){S.push([v++,P]);continue}else return Lt(new qe(t,p,P,E))}if(t.rest.length===0)for(let A=t.elements.length;A<=N-1;A++){const P=new Qn(A,p,new fI(p[A],`is unexpected, expected: ${l}`));if(b){S.push([v++,P]);continue}else return Lt(new qe(t,p,P,E))}let C=0,x;for(;C<n.length;C++)if(N<C+1){if(t.elements[C].isOptional)continue}else{const A=n[C],P=A(p[C],y);if(sr(P)){if(wn(P)){const k=new Qn(C,p,P.left);if(b){S.push([v++,k]);continue}else return Lt(new qe(t,p,k,Ss(E)))}E.push([v++,P.right])}else{const k=v++,U=C;x||(x=[]),x.push(({es:K,output:B})=>Ys(Iu(P),et=>{if(wn(et)){const tt=new Qn(U,p,et.left);return b?(K.push([k,tt]),ns):Lt(new qe(t,p,tt,Ss(B)))}return B.push([k,et.right]),ns}))}}if(kn(s)){const[A,...P]=s;for(;C<N-P.length;C++){const k=A(p[C],y);if(sr(k))if(wn(k)){const U=new Qn(C,p,k.left);if(b){S.push([v++,U]);continue}else return Lt(new qe(t,p,U,Ss(E)))}else E.push([v++,k.right]);else{const U=v++,K=C;x||(x=[]),x.push(({es:B,output:et})=>Ys(Iu(k),tt=>{if(wn(tt)){const Z=new Qn(K,p,tt.left);return b?(B.push([U,Z]),ns):Lt(new qe(t,p,Z,Ss(et)))}else return et.push([U,tt.right]),ns}))}}for(let k=0;k<P.length;k++)if(C+=k,!(N<C+1)){const U=P[k](p[C],y);if(sr(U)){if(wn(U)){const K=new Qn(C,p,U.left);if(b){S.push([v++,K]);continue}else return Lt(new qe(t,p,K,Ss(E)))}E.push([v++,U.right])}else{const K=v++,B=C;x||(x=[]),x.push(({es:et,output:tt})=>Ys(Iu(U),Z=>{if(wn(Z)){const rt=new Qn(B,p,Z.left);return b?(et.push([K,rt]),ns):Lt(new qe(t,p,rt,Ss(tt)))}return tt.push([K,Z.right]),ns}))}}}const q=({es:A,output:P})=>Jg(A)?Lt(new qe(t,p,Ss(A),Ss(P))):te(Ss(P));if(x&&x.length>0){const A=x;return Og(()=>{const P={es:Zh(S),output:Zh(E)};return Ys(ry(A,k=>k(P),{concurrency:d,batching:m,discard:!0}),()=>q(P))})}return q({output:E,es:S})}}case"TypeLiteral":{if(t.propertySignatures.length===0&&t.indexSignatures.length===0)return jr(t,Jat);const n=[],s={},a=[];for(const y of t.propertySignatures)n.push([In(y.type,e),y]),s[y.name]=null,a.push(y.name);const c=t.indexSignatures.map(y=>[In(y.parameter,e),In(y.type,e),y.parameter]),l=ei.make(t.indexSignatures.map(y=>y.parameter).concat(a.map(y=>ew(y)?new Ebt(y):new Bw(y)))),d=In(l,e),m=Cv(t),p=Nv(t);return(y,b)=>{if(!Xat(y))return Lt(new ni(t,y));const S=b?.errors==="all",v=[];let E=0;const N=b?.onExcessProperty==="error",C=b?.onExcessProperty==="preserve",x={};let q;if(N||C){q=cl(y);for(const U of q){const K=d(U,b);if(sr(K)&&wn(K))if(N){const B=new Qn(U,y,new fI(y[U],`is unexpected, expected: ${String(l)}`));if(S){v.push([E++,B]);continue}else return Lt(new qe(t,y,B,x))}else x[U]=y[U]}}let A;const P=b?.exact===!0;for(let U=0;U<n.length;U++){const K=n[U][1],B=K.name,et=Object.prototype.hasOwnProperty.call(y,B);if(!et){if(K.isOptional)continue;if(P){const rt=new Qn(B,y,new Bh(K));if(S){v.push([E++,rt]);continue}else return Lt(new qe(t,y,rt,x))}}const tt=n[U][0],Z=tt(y[B],b);if(sr(Z)){if(wn(Z)){const rt=new Qn(B,y,et?Z.left:new Bh(K));if(S){v.push([E++,rt]);continue}else return Lt(new qe(t,y,rt,x))}x[B]=Z.right}else{const rt=E++,vt=B;A||(A=[]),A.push(({es:ut,output:Et})=>Ys(Iu(Z),z=>{if(wn(z)){const G=new Qn(vt,y,et?z.left:new Bh(K));return S?(ut.push([rt,G]),ns):Lt(new qe(t,y,G,Et))}return Et[vt]=z.right,ns}))}}for(let U=0;U<c.length;U++){const K=c[U],B=K[0],et=K[1],tt=I6(y,K[2]);for(const Z of tt){const rt=B(Z,b);if(sr(rt)&&Bi(rt)){const vt=et(y[Z],b);if(sr(vt))if(wn(vt)){const ut=new Qn(Z,y,vt.left);if(S){v.push([E++,ut]);continue}else return Lt(new qe(t,y,ut,x))}else Object.prototype.hasOwnProperty.call(s,Z)||(x[Z]=vt.right);else{const ut=E++,Et=Z;A||(A=[]),A.push(({es:z,output:G})=>Ys(Iu(vt),st=>{if(wn(st)){const Nt=new Qn(Et,y,st.left);return S?(z.push([ut,Nt]),ns):Lt(new qe(t,y,Nt,G))}else return Object.prototype.hasOwnProperty.call(s,Z)||(G[Z]=st.right),ns}))}}}}const k=({es:U,output:K})=>{if(Jg(U))return Lt(new qe(t,y,Ss(U),K));if(b?.propertyOrder==="original"){const B=q||cl(y);for(const tt of a)B.indexOf(tt)===-1&&B.push(tt);const et={};for(const tt of B)Object.prototype.hasOwnProperty.call(K,tt)&&(et[tt]=K[tt]);return te(et)}return te(K)};if(A&&A.length>0){const U=A;return Og(()=>{const K={es:Zh(v),output:Object.assign({},x)};return Ys(ry(U,B=>B(K),{concurrency:m,batching:p,discard:!0}),()=>k(K))})}return k({es:v,output:x})}}case"Union":{const n=u_t(t.types,e),s=cl(n.keys),a=s.length,c=t.types.length,l=new Map;for(let p=0;p<c;p++)l.set(t.types[p],In(t.types[p],e));const d=Cv(t)??1,m=Nv(t);return(p,y)=>{const b=[];let S=0,v=[];if(a>0)if(aO(p))for(let C=0;C<a;C++){const x=s[C],q=n.keys[x].buckets;if(Object.prototype.hasOwnProperty.call(p,x)){const A=String(p[x]);if(Object.prototype.hasOwnProperty.call(q,A))v=v.concat(q[A]);else{const{candidates:P,literals:k}=n.keys[x],U=ei.make(k),K=P.length===c?new Zo([new Zn(x,U,!1,!0)],[]):ei.make(P);b.push([S++,new qe(K,p,new Qn(x,p,new ni(U,p[x])))])}}else{const{candidates:A,literals:P}=n.keys[x],k=new Zn(x,ei.make(P),!1,!0),U=A.length===c?new Zo([k],[]):ei.make(A);b.push([S++,new qe(U,p,new Qn(x,p,new Bh(k)))])}}else{const C=n.candidates.length===c?t:ei.make(n.candidates);b.push([S++,new ni(C,p)])}n.otherwise.length>0&&(v=v.concat(n.otherwise));let E;for(let C=0;C<v.length;C++){const x=v[C],q=l.get(x)(p,y);if(sr(q)&&(!E||E.length===0)){if(Bi(q))return q;b.push([S++,q.left])}else{const A=S++;E||(E=[]),E.push(P=>Og(()=>"finalResult"in P?ns:Ys(Iu(q),k=>(Bi(k)?P.finalResult=k:P.es.push([A,k.left]),ns))))}}const N=C=>Jg(C)?C.length===1&&C[0][1]._tag==="Type"?Lt(C[0][1]):Lt(new qe(t,p,Ss(C))):Lt(new ni(t,p));if(E&&E.length>0){const C=E;return Og(()=>{const x={es:Zh(b)};return Ys(ry(C,q=>q(x),{concurrency:d,batching:m,discard:!0}),()=>"finalResult"in x?x.finalResult:N(x.es))})}return N(b)}}case"Suspend":{const n=F6(()=>In(Wl(t.f(),t.annotations),e));return(s,a)=>n()(s,a)}}},jr=(t,e)=>n=>e(n)?te(n):Lt(new ni(t,n)),Wh=(t,e)=>{switch(t._tag){case"Declaration":{const n=tq(t);if(Wn(n))return Wh(n.value,e);break}case"TypeLiteral":{const n=[];for(let s=0;s<t.propertySignatures.length;s++){const a=t.propertySignatures[s],c=e?lI(a.type):En(a.type);oI(c)&&!a.isOptional&&n.push([a.name,c])}return n}case"TupleType":{const n=[];for(let s=0;s<t.elements.length;s++){const a=t.elements[s],c=e?lI(a.type):En(a.type);oI(c)&&!a.isOptional&&n.push([s,c])}return n}case"Refinement":return Wh(t.from,e);case"Suspend":return Wh(t.f(),e);case"Transformation":return Wh(e?t.from:t.to,e)}return[]},u_t=(t,e)=>{const n={},s=[],a=[];for(let c=0;c<t.length;c++){const l=t[c],d=Wh(l,e);if(d.length>0){a.push(l);for(let m=0;m<d.length;m++){const[p,y]=d[m],b=String(y.literal);n[p]=n[p]||{buckets:{},literals:[],candidates:[]};const S=n[p].buckets;if(Object.prototype.hasOwnProperty.call(S,b)){if(m<d.length-1)continue;S[b].push(l),n[p].literals.push(y),n[p].candidates.push(l)}else{S[b]=[l],n[p].literals.push(y),n[p].candidates.push(l);break}}}else s.push(l)}return{keys:n,otherwise:s,candidates:a}},bq=t=>yR(t)?bq(t.from):t,td=(t,e,n,s)=>{if(s?.isEffectAllowed===!0||sr(t))return t;const a=new r6,c=Zyt(t,{scheduler:a});a.flush();const l=c.unsafePoll();if(l){if($pt(l))return te(l.value);const d=l.cause;return Wht(d)?Lt(d.error):Lt(new hI(e,n,tdt(d)))}return Lt(new hI(e,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))},l_t=([t],[e])=>t>e?1:t<e?-1:0;function Ss(t){return t.sort(l_t).map(e=>e[1])}const f_t=(t,e)=>{switch(t._tag){case"FinalTransformation":return e?t.decode:t.encode;case"ComposeTransformation":return te;case"TypeLiteralTransformation":return n=>{let s=te(n);for(const a of t.propertySignatureTransformations){const[c,l]=e?[a.from,a.to]:[a.to,a.from],d=e?a.decode:a.encode;s=Js(s,p=>{const y=d(Object.prototype.hasOwnProperty.call(p,c)?jt(p[c]):St());return delete p[c],Wn(y)&&(p[l]=y.value),p})}return s}}},rr=(t,e=[])=>({value:t,forest:e}),sy={formatIssue:t=>Js(Lu(t),h_t),formatIssueSync:t=>{const e=sy.formatIssue(t);return sr(e)?Dot(e):Wyt(e)},formatError:t=>sy.formatIssue(t.issue),formatErrorSync:t=>sy.formatIssueSync(t.issue)},h_t=t=>t.value+_q(`
`,t.forest),_q=(t,e)=>{let n="";const s=e.length;let a;for(let c=0;c<s;c++){a=e[c];const l=c===s-1;n+=t+(l?"":"")+" "+a.value,n+=_q(t+(s>1&&!l?"  ":"   "),a.forest)}return n},d_t=t=>{switch(t){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},m_t=t=>{switch(t){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},Sq=t=>"ast"in t?jt(t.ast):St(),Hw=te(void 0),p_t=t=>Sq(t).pipe(D_(dbt),lr({onNone:()=>Hw,onSome:e=>{const n=e(t);return na(n)?te({message:n,override:!1}):Gyt(n)?Pw(n,s=>({message:s,override:!1})):na(n.message)?te({message:n.message,override:n.override}):Pw(n.message,s=>({message:s,override:n.override}))}})),SR=t=>e=>e._tag===t,vq=SR("Composite"),mI=SR("Refinement"),pI=SR("Transformation"),dd=t=>Ka(p_t(t),e=>e!==void 0?!e.override&&(vq(t)||mI(t)&&t.kind==="From"||pI(t)&&t.kind!=="Transformation")?pI(t)||mI(t)?dd(t.issue):Hw:te(e.message):Hw),$q=t=>Sq(t).pipe(D_(ybt),qot(e=>e(t)),Ws);function g_t(t){return W6(t).pipe(Qa(()=>X6(t)),Qa(()=>Z6(t)),Qa(()=>hS(t)),Rn(()=>`{ ${t.from} | filter }`))}function y_t(t){return t.message!==void 0?t.message:`Expected ${yR(t.ast)?g_t(t.ast):String(t.ast)}, actual ${ui(t.actual)}`}const b_t=t=>Js(dd(t),e=>e??$q(t)??y_t(t)),Rg=t=>$q(t)??String(t.ast),__t=t=>t.message??"is forbidden",S_t=t=>t.message??"is unexpected",v_t=t=>{const e=mbt(t.ast);if(Wn(e)){const n=e.value();return na(n)?te(n):n}return te(t.message??"is missing")},Lu=t=>{switch(t._tag){case"Type":return Js(b_t(t),rr);case"Forbidden":return te(rr(Rg(t),[rr(__t(t))]));case"Unexpected":return te(rr(S_t(t)));case"Missing":return Js(v_t(t),rr);case"Transformation":return Ka(dd(t),e=>e!==void 0?te(rr(e)):Js(Lu(t.issue),n=>rr(Rg(t),[rr(d_t(t.kind),[n])])));case"Refinement":return Ka(dd(t),e=>e!==void 0?te(rr(e)):Js(Lu(t.issue),n=>rr(Rg(t),[rr(m_t(t.kind),[n])])));case"Pointer":return Js(Lu(t.issue),e=>rr(nbt(t.path),[e]));case"Composite":return Ka(dd(t),e=>{if(e!==void 0)return te(rr(e));const n=Rg(t);return D6(t.issues)?Js(ry(t.issues,Lu),s=>rr(n,s)):Js(Lu(t.issues),s=>rr(n,[s]))})}},$_t=D(t=>oo(t[0]),(t,...e)=>{const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}),w_t=D(t=>oo(t[0]),(t,...e)=>{const n={...t};for(const s of e)delete n[s];return n}),_b=Symbol.for("effect/Schema");function tr(t){return class{[_b]=gI;static ast=t;static annotations(n){return tr(ca(this.ast,n))}static pipe(){return Ct(this,arguments)}static toString(){return String(t)}static Type;static Encoded;static Context;static[_b]=gI}}const gI={_A:t=>t,_I:t=>t,_R:t=>t},yI={schemaId:ubt,message:z6,missingMessage:dR,identifier:U6,title:co,description:Ym,examples:L6,default:j6,documentation:lbt,jsonSchema:P6,arbitrary:q6,pretty:B6,equivalence:K6,concurrency:H6,batching:V6,parseIssueTitle:Y6,parseOptions:G6,decodingFallback:J6},vR=t=>{if(!t)return{};const e={...t};for(const n in yI)if(n in t){const s=yI[n];e[s]=t[n],delete e[n]}return e},ca=(t,e)=>Wl(t,vR(e));const Gd=t=>String(t.ast),Vw=t=>tr(En(t.ast)),tf=t=>Ut(t,_b)&&oo(t[_b]);function E_t(t){return pR(t)?ei.make(qbt(t,e=>new Bw(e))):new Bw(t[0])}function wq(t,e=E_t(t)){return class extends tr(e){static annotations(s){return wq(this.literals,ca(this.ast,s))}static literals=[...t]}}function zc(...t){return kn(t)?wq(t):Tq}const T_t=(t,e,n)=>$R(t,new dS(t.map(s=>s.ast),(...s)=>e.decode(...s.map(tr)),(...s)=>e.encode(...s.map(tr)),vR(n))),O_t=(t,e)=>{const n=()=>(a,c,l)=>t(a)?Yd(a):bR(new ni(l,a)),s=n;return $R([],new dS([],n,s,vR(e)))};function $R(t,e){return class extends tr(e){static annotations(s){return $R(this.typeParameters,ca(this.ast,s))}static typeParameters=[...t]}}const Eq=function(){if(Array.isArray(arguments[0])){const n=arguments[0],s=arguments[1],a=arguments[2];return T_t(n,s,a)}const t=arguments[0],e=arguments[1];return O_t(t,e)};class Tq extends tr(nq){}class Oq extends tr(rq){}class R_t extends tr(Fbt){}class Cs extends tr(Abt){}class Rq extends tr(xbt){}const k_t=t=>ei.make(t.map(e=>e.ast));function kq(t,e=k_t(t)){return class extends tr(e){static annotations(s){return kq(this.members,ca(this.ast,s))}static members=[...t]}}function wR(...t){return pR(t)?kq(t):kn(t)?t[0]:Tq}const M_t=(t,e)=>new mR(t.map(n=>tf(n)?new pS(n.ast,!1):n.ast),e.map(n=>tf(n)?new mS(n.ast):n.ast),!0);function Sb(t,e,n=M_t(t,e)){return class extends tr(n){static annotations(a){return Sb(this.elements,this.rest,ca(this.ast,a))}static elements=[...t];static rest=[...e]}}function Yw(...t){return Array.isArray(t[0])?Sb(t[0],t.slice(1)):Sb(t,[])}function Mq(t,e){return class extends Sb([],[t],e){static annotations(s){return Mq(this.value,ca(this.ast,s))}static value=t}}const Gw=t=>Mq(t),A_t=Symbol.for("effect/PropertySignature"),Aq=t=>Ut(t,A_t),C_t=fq([dR]),N_t=(t,e)=>{const n=cl(t),s=[];if(n.length>0){const c=[],l=[],d=[];for(let m=0;m<n.length;m++){const p=n[m],y=t[p];if(Aq(y)){const b=y.ast;switch(b._tag){case"PropertySignatureDeclaration":{const S=b.type,v=b.isOptional,E=b.annotations;c.push(new Zn(p,S,v,!0,C_t(b))),l.push(new Zn(p,En(S),v,!0,E)),s.push(new Zn(p,S,v,!0,E));break}case"PropertySignatureTransformation":{const S=b.from.fromKey??p;c.push(new Zn(S,b.from.type,b.from.isOptional,!0,b.from.annotations)),l.push(new Zn(p,b.to.type,b.to.isOptional,!0,b.to.annotations)),d.push(new Hbt(S,p,b.decode,b.encode));break}}}else c.push(new Zn(p,y.ast,!1,!0)),l.push(new Zn(p,En(y.ast),!1,!0)),s.push(new Zn(p,y.ast,!1,!0))}if(kn(d)){const m=[],p=[];for(const y of e){const{indexSignatures:b,propertySignatures:S}=uI(y.key.ast,y.value.ast);S.forEach(v=>{c.push(v),l.push(new Zn(v.name,En(v.type),v.isOptional,v.isReadonly,v.annotations))}),b.forEach(v=>{m.push(v),p.push(new gS(v.parameter,En(v.type),v.isReadonly))})}return new cq(new Zo(c,m,{[qw]:"Struct (Encoded side)"}),new Zo(l,p,{[qw]:"Struct (Type side)"}),new Vbt(d))}}const a=[];for(const c of e){const{indexSignatures:l,propertySignatures:d}=uI(c.key.ast,c.value.ast);d.forEach(m=>s.push(m)),l.forEach(m=>a.push(m))}return new Zo(s,a)},x_t=(t,e)=>{const n=cl(t);for(const s of n){const a=t[s];if(e[s]===void 0&&Aq(a)){const c=a.ast,l=c._tag==="PropertySignatureDeclaration"?c.defaultValue:c.to.defaultValue;l!==void 0&&(e[s]=l())}}return e};function ER(t,e,n=N_t(t,e)){return class extends tr(n){static annotations(a){return ER(this.fields,this.records,ca(this.ast,a))}static fields={...t};static records=[...e];static make=(a,c)=>{const l=x_t(t,{...a});return X_t(c)?l:i_t(this)(l)};static pick(...a){return ia($_t(t,...a))}static omit(...a){return ia(w_t(t,...a))}}}function ia(t,...e){return ER(t,e)}function Cq(t,e,n){return class extends ER({},[{key:t,value:e}],n){static annotations(a){return Cq(t,e,ca(this.ast,a))}static key=t;static value=e}}const I_t=t=>Cq(t.key,t.value),F_t=t=>tr(new gR(()=>t().ast));function Nq(t,e,n){return class extends tr(n){static annotations(a){return Nq(this.from,this.to,ca(this.ast,a))}static from=t;static to=e}}const xq=D(t=>tf(t[0])&&tf(t[1]),(t,e,n)=>Nq(t,e,new cq(t.ast,e.ast,new Kbt(n.decode,n.encode)))),Iq=D(t=>tf(t[0])&&tf(t[1]),(t,e,n)=>xq(t,e,{strict:!0,decode:(s,a,c,l)=>Yd(n.decode(s,l)),encode:(s,a,c,l)=>Yd(n.encode(s,l))}));class vb extends xq(Cs.annotations({description:"a string to be decoded into a bigint"}),R_t,{strict:!0,decode:(e,n,s)=>e_t(pct(e),()=>new ni(s,e,`Unable to decode ${JSON.stringify(e)} into a bigint`)),encode:e=>Yd(String(e))}).annotations({identifier:"BigInt"}){}const Fq=(t,e,n,s)=>n_t(t,{onFailure:a=>new qe(n,s,a),onSuccess:e}),D_t=ia({_tag:zc("None")}).annotations({description:"NoneEncoded"}),z_t=t=>ia({_tag:zc("Some"),value:t}).annotations({description:`SomeEncoded<${Gd(t)}>`}),U_t=t=>wR(D_t,z_t(t)).annotations({description:`OptionEncoded<${Gd(t)}>`}),Dq=t=>t._tag==="None"?St():jt(t.value),L_t=(t,e)=>n=>n.oneof(e,n.record({_tag:n.constant("None")}),n.record({_tag:n.constant("Some"),value:t(n)})).map(Dq),j_t=t=>lr({onNone:()=>"none()",onSome:e=>`some(${t(e)})`}),bI=t=>(e,n,s)=>Lot(e)?Ue(e)?Yd(St()):Fq(t(e.value,n),jt,s,e):bR(new ni(s,e)),P_t=t=>Eq([t],{decode:e=>bI(gq(e)),encode:e=>bI(yq(e))},{description:`Option<${Gd(t)}>`,pretty:j_t,arbitrary:L_t,equivalence:Bot}),q_t={_tag:"None"},B_t=t=>({_tag:"Some",value:t});function K_t(t){const e=t;return Iq(U_t(e),P_t(Vw(e)),{strict:!0,decode:s=>Dq(s),encode:s=>lr(s,{onNone:()=>q_t,onSome:B_t})})}const H_t=(t,e,n)=>s=>{const a=s.array(s.tuple(t(s),e(s)));return(n.depthIdentifier!==void 0?s.oneof(n,s.constant([]),a):a).map(c=>new Map(c))},V_t=(t,e)=>n=>`new Map([${Array.from(n.entries()).map(([s,a])=>`[${t(s)}, ${e(a)}]`).join(", ")}])`,Y_t=(t,e)=>{const n=U_(Nl(([s,a],[c,l])=>t(s,c)&&e(a,l)));return Nl((s,a)=>n(Array.from(s.entries()),Array.from(a.entries())))},_I=t=>(e,n,s)=>Vat(e)?Fq(t(Array.from(e.entries()),n),a=>new Map(a),s,e):bR(new ni(s,e)),G_t=(t,e,n)=>Eq([t,e],{decode:(s,a)=>_I(gq(Gw(Yw(s,a)))),encode:(s,a)=>_I(yq(Gw(Yw(s,a))))},{description:n,pretty:V_t,arbitrary:H_t,equivalence:Y_t}),J_t=({key:t,value:e})=>G_t(t,e,`ReadonlyMap<${Gd(t)}, ${Gd(e)}>`);function Q_t({key:t,value:e}){return Iq(Gw(Yw(t,e)),J_t({key:Vw(t),value:Vw(e)}),{strict:!0,decode:n=>new Map(n),encode:n=>Array.from(n.entries())})}function X_t(t){return iO(t)?t:t?.disableValidation??!1}const Z_t=ia({_tag:zc("Started"),startTime:vb}),W_t=ia({_tag:zc("Ended"),startTime:vb,endTime:vb}),tSt=wR(Z_t,W_t),eSt=ia({_tag:zc("ExternalSpan"),spanId:Cs,traceId:Cs,sampled:Rq}),zq=ia({_tag:zc("Span"),spanId:Cs,traceId:Cs,name:Cs,sampled:Rq,attributes:Q_t({key:Cs,value:Oq}),status:tSt,parent:K_t(F_t(()=>rSt).annotations({title:"ParentSpan"}))}),nSt=ia({_tag:zc("SpanEvent"),traceId:Cs,spanId:Cs,name:Cs,startTime:vb,attributes:I_t({key:Cs,value:Oq})}),rSt=wR(zq,eSt);class sSt extends QU()("Booted",{}){}class iSt extends QU()("ResetTracer",{}){}const aSt=Xnt(sSt,iSt,zq,nSt),oSt=wnt(aSt),cSt={_tag:"Booted"};class SI extends Kz()("VscodeWebview",{accessors:!0,scoped:Wu(function*(){const e=acquireVsCodeApi(),n=yield*zy(bat(),a=>a.shutdown);e.postMessage(cSt);const s=a=>{n.unsafeOffer(oSt(a.data))};return yield*zy(xe(()=>{window.addEventListener("message",s)}),()=>xe(()=>{window.removeEventListener("message",s)})),{api:e,messages:n}})}){}class TR extends Kz()("RxStore",{accessors:!0,scoped:Wu(function*(){const e=yield*SI,n=yield*zN([]),s=yield*zN(BigInt(Date.now())*1000000n),a=new Map,c=Vy(n,[]).pipe(pet(()=>Vy(s,BigInt(Date.now())*1000000n)));function l(d){const m=d._tag==="Span"&&d.parent._tag==="Some"?d.parent.value.spanId:"<root>";return a.set(m,[...a.get(m)??[],d.spanId]),eat(n,p=>{const y=p.filter(N=>N.id!==d.spanId),b=y.filter(N=>d._tag==="ExternalSpan"?!0:N.startTime<=d.status.startTime),S=y.filter(N=>d._tag==="ExternalSpan"?!1:N.startTime>d.status.startTime).map((N,C)=>({...N,depth:b.length+1+C})),v=BigInt(Date.now())*1000000n,E={id:d.spanId,name:d._tag==="ExternalSpan"?"<external>":d.name,startTime:d._tag==="Span"?d.status.startTime:v,endTime:d._tag==="Span"&&d.status._tag==="Ended"?d.status.endTime:v,color:d._tag==="ExternalSpan"?"#8e44ad":d.status._tag==="Started"?"#95a5a6":"#2980b9",depth:b.length};return[...b,E,...S]})}return yield*e.messages.take.pipe(TT(d=>{switch(d._tag){case"Span":return l(d);case"ResetTracer":return c}}),get,cet(_et),het),{traceEvents:n,timeOrigin:s}}),dependencies:[SI.Default]}){}const Uq=Oat(TR.Default).pipe(b4),vI=Uq.subscribable(me(TR,t=>t.traceEvents)),uSt=wat(t=>(t.subscribe(vI,e=>{t.setSelf(e)}),t.once(vI))),lSt=Uq.subscribable(me(TR,t=>t.timeOrigin));function fSt(){const{value:t}=XN(uSt),{value:e}=XN(lSt),[n,s]=Xe.useState({startTime:e,endTime:e+60000000000n,offsetY:0}),a=Xe.useCallback(m=>{m.endTime-m.startTime<3600n*1000000000n&&s(m)},[s]),c={barHeight:18,barPadding:4,timelineHeight:16},l=m=>{console.log("Trace clicked:",m)},d=m=>{m?console.log("Hovering over trace:",m):console.log("No longer hovering over any trace")};return Qs.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[Qs.jsx("div",{style:{height:"80px",borderBottom:"1px solid #e0e0e0"},children:Qs.jsx(g5,{traces:t,viewState:n,onViewStateChange:a,height:80,barHeight:c.barHeight||18,barPadding:c.barPadding||4})}),Qs.jsx("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:Qs.jsx("div",{style:{flex:1},children:Qs.jsx(S5,{traces:t,viewState:n,timeOrigin:e,onViewStateChange:a,options:c,onTraceClick:l,onTraceHover:d})})})]})}p5.createRoot(document.getElementById("tracer-root")).render(Qs.jsx(Xe.StrictMode,{children:Qs.jsx(fSt,{})}));
