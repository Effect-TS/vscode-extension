(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var C0={exports:{}},wh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yA;function aK(){if(yA)return wh;yA=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,a,c){var l=null;if(c!==void 0&&(l=""+c),a.key!==void 0&&(l=""+a.key),"key"in a){c={};for(var d in a)d!=="key"&&(c[d]=a[d])}else c=a;return a=c.ref,{$$typeof:t,type:s,key:l,ref:a!==void 0?a:null,props:c}}return wh.Fragment=e,wh.jsx=n,wh.jsxs=n,wh}var bA;function oK(){return bA||(bA=1,C0.exports=aK()),C0.exports}var Wn=oK(),N0={exports:{}},Ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _A;function cK(){if(_A)return Ft;_A=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,D={};function C(O,Y,ot){this.props=O,this.context=Y,this.refs=D,this.updater=ot||v}C.prototype.isReactComponent={},C.prototype.setState=function(O,Y){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Y,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function N(){}N.prototype=C.prototype;function q(O,Y,ot){this.props=O,this.context=Y,this.refs=D,this.updater=ot||v}var A=q.prototype=new N;A.constructor=q,E(A,C.prototype),A.isPureReactComponent=!0;var P=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function K(O,Y,ot,it,pt,ne){return ot=ne.ref,{$$typeof:t,type:O,key:Y,ref:ot!==void 0?ot:null,props:ne}}function B(O,Y){return K(O.type,Y,void 0,void 0,void 0,O.props)}function et(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function tt(O){var Y={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ot){return Y[ot]})}var Z=/\/+/g;function rt(O,Y){return typeof O=="object"&&O!==null&&O.key!=null?tt(""+O.key):Y.toString(36)}function vt(){}function ut(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(vt,vt):(O.status="pending",O.then(function(Y){O.status==="pending"&&(O.status="fulfilled",O.value=Y)},function(Y){O.status==="pending"&&(O.status="rejected",O.reason=Y)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Et(O,Y,ot,it,pt){var ne=typeof O;(ne==="undefined"||ne==="boolean")&&(O=null);var Tt=!1;if(O===null)Tt=!0;else switch(ne){case"bigint":case"string":case"number":Tt=!0;break;case"object":switch(O.$$typeof){case t:case e:Tt=!0;break;case g:return Tt=O._init,Et(Tt(O._payload),Y,ot,it,pt)}}if(Tt)return pt=pt(O),Tt=it===""?"."+rt(O,0):it,P(pt)?(ot="",Tt!=null&&(ot=Tt.replace(Z,"$&/")+"/"),Et(pt,Y,ot,"",function(ua){return ua})):pt!=null&&(et(pt)&&(pt=B(pt,ot+(pt.key==null||O&&O.key===pt.key?"":(""+pt.key).replace(Z,"$&/")+"/")+Tt)),Y.push(pt)),1;Tt=0;var Ar=it===""?".":it+":";if(P(O))for(var $e=0;$e<O.length;$e++)it=O[$e],ne=Ar+rt(it,$e),Tt+=Et(it,Y,ot,ne,pt);else if($e=S(O),typeof $e=="function")for(O=$e.call(O),$e=0;!(it=O.next()).done;)it=it.value,ne=Ar+rt(it,$e++),Tt+=Et(it,Y,ot,ne,pt);else if(ne==="object"){if(typeof O.then=="function")return Et(ut(O),Y,ot,it,pt);throw Y=String(O),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Tt}function z(O,Y,ot){if(O==null)return O;var it=[],pt=0;return Et(O,it,"","",function(ne){return Y.call(ot,ne,pt++)}),it}function G(O){if(O._status===-1){var Y=O._result;Y=Y(),Y.then(function(ot){(O._status===0||O._status===-1)&&(O._status=1,O._result=ot)},function(ot){(O._status===0||O._status===-1)&&(O._status=2,O._result=ot)}),O._status===-1&&(O._status=0,O._result=Y)}if(O._status===1)return O._result.default;throw O._result}var st=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Nt(){}return Ft.Children={map:z,forEach:function(O,Y,ot){z(O,function(){Y.apply(this,arguments)},ot)},count:function(O){var Y=0;return z(O,function(){Y++}),Y},toArray:function(O){return z(O,function(Y){return Y})||[]},only:function(O){if(!et(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ft.Component=C,Ft.Fragment=n,Ft.Profiler=a,Ft.PureComponent=q,Ft.StrictMode=s,Ft.Suspense=m,Ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ft.__COMPILER_RUNTIME={__proto__:null,c:function(O){return M.H.useMemoCache(O)}},Ft.cache=function(O){return function(){return O.apply(null,arguments)}},Ft.cloneElement=function(O,Y,ot){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var it=E({},O.props),pt=O.key,ne=void 0;if(Y!=null)for(Tt in Y.ref!==void 0&&(ne=void 0),Y.key!==void 0&&(pt=""+Y.key),Y)!U.call(Y,Tt)||Tt==="key"||Tt==="__self"||Tt==="__source"||Tt==="ref"&&Y.ref===void 0||(it[Tt]=Y[Tt]);var Tt=arguments.length-2;if(Tt===1)it.children=ot;else if(1<Tt){for(var Ar=Array(Tt),$e=0;$e<Tt;$e++)Ar[$e]=arguments[$e+2];it.children=Ar}return K(O.type,pt,void 0,void 0,ne,it)},Ft.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Ft.createElement=function(O,Y,ot){var it,pt={},ne=null;if(Y!=null)for(it in Y.key!==void 0&&(ne=""+Y.key),Y)U.call(Y,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(pt[it]=Y[it]);var Tt=arguments.length-2;if(Tt===1)pt.children=ot;else if(1<Tt){for(var Ar=Array(Tt),$e=0;$e<Tt;$e++)Ar[$e]=arguments[$e+2];pt.children=Ar}if(O&&O.defaultProps)for(it in Tt=O.defaultProps,Tt)pt[it]===void 0&&(pt[it]=Tt[it]);return K(O,ne,void 0,void 0,null,pt)},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(O){return{$$typeof:d,render:O}},Ft.isValidElement=et,Ft.lazy=function(O){return{$$typeof:g,_payload:{_status:-1,_result:O},_init:G}},Ft.memo=function(O,Y){return{$$typeof:p,type:O,compare:Y===void 0?null:Y}},Ft.startTransition=function(O){var Y=M.T,ot={};M.T=ot;try{var it=O(),pt=M.S;pt!==null&&pt(ot,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(Nt,st)}catch(ne){st(ne)}finally{M.T=Y}},Ft.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ft.use=function(O){return M.H.use(O)},Ft.useActionState=function(O,Y,ot){return M.H.useActionState(O,Y,ot)},Ft.useCallback=function(O,Y){return M.H.useCallback(O,Y)},Ft.useContext=function(O){return M.H.useContext(O)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(O,Y){return M.H.useDeferredValue(O,Y)},Ft.useEffect=function(O,Y,ot){var it=M.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return it.useEffect(O,Y)},Ft.useId=function(){return M.H.useId()},Ft.useImperativeHandle=function(O,Y,ot){return M.H.useImperativeHandle(O,Y,ot)},Ft.useInsertionEffect=function(O,Y){return M.H.useInsertionEffect(O,Y)},Ft.useLayoutEffect=function(O,Y){return M.H.useLayoutEffect(O,Y)},Ft.useMemo=function(O,Y){return M.H.useMemo(O,Y)},Ft.useOptimistic=function(O,Y){return M.H.useOptimistic(O,Y)},Ft.useReducer=function(O,Y,ot){return M.H.useReducer(O,Y,ot)},Ft.useRef=function(O){return M.H.useRef(O)},Ft.useState=function(O){return M.H.useState(O)},Ft.useSyncExternalStore=function(O,Y,ot){return M.H.useSyncExternalStore(O,Y,ot)},Ft.useTransition=function(){return M.H.useTransition()},Ft.version="19.1.0",Ft}var SA;function Gw(){return SA||(SA=1,N0.exports=cK()),N0.exports}var Fe=Gw(),x0={exports:{}},Eh={},I0={exports:{}},F0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA;function uK(){return vA||(vA=1,function(t){function e(z,G){var st=z.length;z.push(G);t:for(;0<st;){var Nt=st-1>>>1,O=z[Nt];if(0<a(O,G))z[Nt]=G,z[st]=O,st=Nt;else break t}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var G=z[0],st=z.pop();if(st!==G){z[0]=st;t:for(var Nt=0,O=z.length,Y=O>>>1;Nt<Y;){var ot=2*(Nt+1)-1,it=z[ot],pt=ot+1,ne=z[pt];if(0>a(it,st))pt<O&&0>a(ne,it)?(z[Nt]=ne,z[pt]=st,Nt=pt):(z[Nt]=it,z[ot]=st,Nt=ot);else if(pt<O&&0>a(ne,st))z[Nt]=ne,z[pt]=st,Nt=pt;else break t}}return G}function a(z,G){var st=z.sortIndex-G.sortIndex;return st!==0?st:z.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var m=[],p=[],g=1,b=null,S=3,v=!1,E=!1,D=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function P(z){for(var G=n(p);G!==null;){if(G.callback===null)s(p);else if(G.startTime<=z)s(p),G.sortIndex=G.expirationTime,e(m,G);else break;G=n(p)}}function M(z){if(D=!1,P(z),!E)if(n(m)!==null)E=!0,U||(U=!0,rt());else{var G=n(p);G!==null&&Et(M,G.startTime-z)}}var U=!1,K=-1,B=5,et=-1;function tt(){return C?!0:!(t.unstable_now()-et<B)}function Z(){if(C=!1,U){var z=t.unstable_now();et=z;var G=!0;try{t:{E=!1,D&&(D=!1,q(K),K=-1),v=!0;var st=S;try{e:{for(P(z),b=n(m);b!==null&&!(b.expirationTime>z&&tt());){var Nt=b.callback;if(typeof Nt=="function"){b.callback=null,S=b.priorityLevel;var O=Nt(b.expirationTime<=z);if(z=t.unstable_now(),typeof O=="function"){b.callback=O,P(z),G=!0;break e}b===n(m)&&s(m),P(z)}else s(m);b=n(m)}if(b!==null)G=!0;else{var Y=n(p);Y!==null&&Et(M,Y.startTime-z),G=!1}}break t}finally{b=null,S=st,v=!1}G=void 0}}finally{G?rt():U=!1}}}var rt;if(typeof A=="function")rt=function(){A(Z)};else if(typeof MessageChannel<"u"){var vt=new MessageChannel,ut=vt.port2;vt.port1.onmessage=Z,rt=function(){ut.postMessage(null)}}else rt=function(){N(Z,0)};function Et(z,G){K=N(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(z){switch(S){case 1:case 2:case 3:var G=3;break;default:G=S}var st=S;S=G;try{return z()}finally{S=st}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var st=S;S=z;try{return G()}finally{S=st}},t.unstable_scheduleCallback=function(z,G,st){var Nt=t.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?Nt+st:Nt):st=Nt,z){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=st+O,z={id:g++,callback:G,priorityLevel:z,startTime:st,expirationTime:O,sortIndex:-1},st>Nt?(z.sortIndex=st,e(p,z),n(m)===null&&z===n(p)&&(D?(q(K),K=-1):D=!0,Et(M,st-Nt))):(z.sortIndex=O,e(m,z),E||v||(E=!0,U||(U=!0,rt()))),z},t.unstable_shouldYield=tt,t.unstable_wrapCallback=function(z){var G=S;return function(){var st=S;S=G;try{return z.apply(this,arguments)}finally{S=st}}}}(F0)),F0}var $A;function $I(){return $A||($A=1,I0.exports=uK()),I0.exports}var D0={exports:{}},Gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wA;function lK(){if(wA)return Gn;wA=1;var t=Gw();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(m,p,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:p,implementation:g}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Gn.createPortal=function(m,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(m,p,null,g)},Gn.flushSync=function(m){var p=l.T,g=s.p;try{if(l.T=null,s.p=2,m)return m()}finally{l.T=p,s.p=g,s.d.f()}},Gn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},Gn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Gn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var g=p.as,b=d(g,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,v=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:v}):g==="script"&&s.d.X(m,{crossOrigin:b,integrity:S,fetchPriority:v,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Gn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=d(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},Gn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,b=d(g,p.crossOrigin);s.d.L(m,g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Gn.preloadModule=function(m,p){if(typeof m=="string")if(p){var g=d(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},Gn.requestFormReset=function(m){s.d.r(m)},Gn.unstable_batchedUpdates=function(m,p){return m(p)},Gn.useFormState=function(m,p,g){return l.H.useFormState(m,p,g)},Gn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Gn.version="19.1.0",Gn}var EA;function fK(){if(EA)return D0.exports;EA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),D0.exports=lK(),D0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA;function hK(){if(TA)return Eh;TA=1;var t=$I(),e=Gw(),n=fK();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function c(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function l(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(c(r)!==r)throw Error(s(188))}function m(r){var i=r.alternate;if(!i){if(i=c(r),i===null)throw Error(s(188));return i!==r?null:r}for(var o=r,u=i;;){var f=o.return;if(f===null)break;var h=f.alternate;if(h===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===o)return d(f),r;if(h===u)return d(f),i;h=h.sibling}throw Error(s(188))}if(o.return!==u.return)o=f,u=h;else{for(var y=!1,_=f.child;_;){if(_===o){y=!0,o=f,u=h;break}if(_===u){y=!0,u=f,o=h;break}_=_.sibling}if(!y){for(_=h.child;_;){if(_===o){y=!0,o=h,u=f;break}if(_===u){y=!0,u=h,o=f;break}_=_.sibling}if(!y)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:i}function p(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=p(r),i!==null)return i;r=r.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),A=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),et=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function rt(r){return r===null||typeof r!="object"?null:(r=Z&&r[Z]||r["@@iterator"],typeof r=="function"?r:null)}var vt=Symbol.for("react.client.reference");function ut(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===vt?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case E:return"Fragment";case C:return"Profiler";case D:return"StrictMode";case M:return"Suspense";case U:return"SuspenseList";case et:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case v:return"Portal";case A:return(r.displayName||"Context")+".Provider";case q:return(r._context.displayName||"Context")+".Consumer";case P:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case K:return i=r.displayName||null,i!==null?i:ut(r.type)||"Memo";case B:i=r._payload,r=r._init;try{return ut(r(i))}catch{}}return null}var Et=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st={pending:!1,data:null,method:null,action:null},Nt=[],O=-1;function Y(r){return{current:r}}function ot(r){0>O||(r.current=Nt[O],Nt[O]=null,O--)}function it(r,i){O++,Nt[O]=r.current,r.current=i}var pt=Y(null),ne=Y(null),Tt=Y(null),Ar=Y(null);function $e(r,i){switch(it(Tt,i),it(ne,r),it(pt,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?H2(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=H2(i),r=V2(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ot(pt),it(pt,r)}function ua(){ot(pt),ot(ne),ot(Tt)}function gS(r){r.memoizedState!==null&&it(Ar,r);var i=pt.current,o=V2(i,r.type);i!==o&&(it(ne,r),it(pt,o))}function Jm(r){ne.current===r&&(ot(pt),ot(ne)),Ar.current===r&&(ot(Ar),bh._currentValue=st)}var yS=Object.prototype.hasOwnProperty,bS=t.unstable_scheduleCallback,_S=t.unstable_cancelCallback,Uq=t.unstable_shouldYield,Lq=t.unstable_requestPaint,Ps=t.unstable_now,jq=t.unstable_getCurrentPriorityLevel,TR=t.unstable_ImmediatePriority,OR=t.unstable_UserBlockingPriority,Qm=t.unstable_NormalPriority,Pq=t.unstable_LowPriority,RR=t.unstable_IdlePriority,qq=t.log,Bq=t.unstable_setDisableYieldValue,Of=null,Cr=null;function la(r){if(typeof qq=="function"&&Bq(r),Cr&&typeof Cr.setStrictMode=="function")try{Cr.setStrictMode(Of,r)}catch{}}var Nr=Math.clz32?Math.clz32:Vq,Kq=Math.log,Hq=Math.LN2;function Vq(r){return r>>>=0,r===0?32:31-(Kq(r)/Hq|0)|0}var Xm=256,Zm=4194304;function uo(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Wm(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,h=r.suspendedLanes,y=r.pingedLanes;r=r.warmLanes;var _=u&134217727;return _!==0?(u=_&~h,u!==0?f=uo(u):(y&=_,y!==0?f=uo(y):o||(o=_&~r,o!==0&&(f=uo(o))))):(_=u&~h,_!==0?f=uo(_):y!==0?f=uo(y):o||(o=u&~r,o!==0&&(f=uo(o)))),f===0?0:i!==0&&i!==f&&(i&h)===0&&(h=f&-f,o=i&-i,h>=o||h===32&&(o&4194048)!==0)?i:f}function Rf(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Yq(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kR(){var r=Xm;return Xm<<=1,(Xm&4194048)===0&&(Xm=256),r}function MR(){var r=Zm;return Zm<<=1,(Zm&62914560)===0&&(Zm=4194304),r}function SS(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function kf(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Gq(r,i,o,u,f,h){var y=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var _=r.entanglements,T=r.expirationTimes,I=r.hiddenUpdates;for(o=y&~o;0<o;){var H=31-Nr(o),J=1<<H;_[H]=0,T[H]=-1;var L=I[H];if(L!==null)for(I[H]=null,H=0;H<L.length;H++){var j=L[H];j!==null&&(j.lane&=-536870913)}o&=~J}u!==0&&AR(r,u,0),h!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=h&~(y&~i))}function AR(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Nr(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function CR(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Nr(o),f=1<<u;f&i|r[u]&i&&(r[u]|=i),o&=~f}}function vS(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function $S(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function NR(){var r=G.p;return r!==0?r:(r=window.event,r===void 0?32:fA(r.type))}function Jq(r,i){var o=G.p;try{return G.p=r,i()}finally{G.p=o}}var fa=Math.random().toString(36).slice(2),Vn="__reactFiber$"+fa,mr="__reactProps$"+fa,Uc="__reactContainer$"+fa,wS="__reactEvents$"+fa,Qq="__reactListeners$"+fa,Xq="__reactHandles$"+fa,xR="__reactResources$"+fa,Mf="__reactMarker$"+fa;function ES(r){delete r[Vn],delete r[mr],delete r[wS],delete r[Qq],delete r[Xq]}function Lc(r){var i=r[Vn];if(i)return i;for(var o=r.parentNode;o;){if(i=o[Uc]||o[Vn]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=Q2(r);r!==null;){if(o=r[Vn])return o;r=Q2(r)}return i}r=o,o=r.parentNode}return null}function jc(r){if(r=r[Vn]||r[Uc]){var i=r.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return r}return null}function Af(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function Pc(r){var i=r[xR];return i||(i=r[xR]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function bn(r){r[Mf]=!0}var IR=new Set,FR={};function lo(r,i){qc(r,i),qc(r+"Capture",i)}function qc(r,i){for(FR[r]=i,r=0;r<i.length;r++)IR.add(i[r])}var Zq=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),DR={},zR={};function Wq(r){return yS.call(zR,r)?!0:yS.call(DR,r)?!1:Zq.test(r)?zR[r]=!0:(DR[r]=!0,!1)}function tp(r,i,o){if(Wq(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function ep(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function yi(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}var TS,UR;function Bc(r){if(TS===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);TS=i&&i[1]||"",UR=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+TS+r+UR}var OS=!1;function RS(r,i){if(!r||OS)return"";OS=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(j){var L=j}Reflect.construct(r,[],J)}else{try{J.call()}catch(j){L=j}r.call(J.prototype)}}else{try{throw Error()}catch(j){L=j}(J=r())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(j){if(j&&L&&typeof j.stack=="string")return[j.stack,L.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=u.DetermineComponentFrameRoot(),y=h[0],_=h[1];if(y&&_){var T=y.split(`
`),I=_.split(`
`);for(f=u=0;u<T.length&&!T[u].includes("DetermineComponentFrameRoot");)u++;for(;f<I.length&&!I[f].includes("DetermineComponentFrameRoot");)f++;if(u===T.length||f===I.length)for(u=T.length-1,f=I.length-1;1<=u&&0<=f&&T[u]!==I[f];)f--;for(;1<=u&&0<=f;u--,f--)if(T[u]!==I[f]){if(u!==1||f!==1)do if(u--,f--,0>f||T[u]!==I[f]){var H=`
`+T[u].replace(" at new "," at ");return r.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",r.displayName)),H}while(1<=u&&0<=f);break}}}finally{OS=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Bc(o):""}function tB(r){switch(r.tag){case 26:case 27:case 5:return Bc(r.type);case 16:return Bc("Lazy");case 13:return Bc("Suspense");case 19:return Bc("SuspenseList");case 0:case 15:return RS(r.type,!1);case 11:return RS(r.type.render,!1);case 1:return RS(r.type,!0);case 31:return Bc("Activity");default:return""}}function LR(r){try{var i="";do i+=tB(r),r=r.return;while(r);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Gr(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function jR(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function eB(r){var i=jR(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,h=o.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(y){u=""+y,h.call(this,y)}}),Object.defineProperty(r,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(y){u=""+y},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function np(r){r._valueTracker||(r._valueTracker=eB(r))}function PR(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=jR(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function rp(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var nB=/[\n"\\]/g;function Jr(r){return r.replace(nB,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function kS(r,i,o,u,f,h,y,_){r.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?r.type=y:r.removeAttribute("type"),i!=null?y==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Gr(i)):r.value!==""+Gr(i)&&(r.value=""+Gr(i)):y!=="submit"&&y!=="reset"||r.removeAttribute("value"),i!=null?MS(r,y,Gr(i)):o!=null?MS(r,y,Gr(o)):u!=null&&r.removeAttribute("value"),f==null&&h!=null&&(r.defaultChecked=!!h),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.name=""+Gr(_):r.removeAttribute("name")}function qR(r,i,o,u,f,h,y,_){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(r.type=h),i!=null||o!=null){if(!(h!=="submit"&&h!=="reset"||i!=null))return;o=o!=null?""+Gr(o):"",i=i!=null?""+Gr(i):o,_||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=_?r.checked:!!u,r.defaultChecked=!!u,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.name=y)}function MS(r,i,o){i==="number"&&rp(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Kc(r,i,o,u){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Gr(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function BR(r,i,o){if(i!=null&&(i=""+Gr(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+Gr(o):""}function KR(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(Et(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Gr(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function Hc(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var rB=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function HR(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||rB.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function VR(r,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&HR(r,f,u)}else for(var h in i)i.hasOwnProperty(h)&&HR(r,h,i[h])}function AS(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sB=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),iB=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sp(r){return iB.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var CS=null;function NS(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Vc=null,Yc=null;function YR(r){var i=jc(r);if(i&&(r=i.stateNode)){var o=r[mr]||null;t:switch(r=i.stateNode,i.type){case"input":if(kS(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Jr(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var f=u[mr]||null;if(!f)throw Error(s(90));kS(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&PR(u)}break t;case"textarea":BR(r,o.value,o.defaultValue);break t;case"select":i=o.value,i!=null&&Kc(r,!!o.multiple,i,!1)}}}var xS=!1;function GR(r,i,o){if(xS)return r(i,o);xS=!0;try{var u=r(i);return u}finally{if(xS=!1,(Vc!==null||Yc!==null)&&(Bp(),Vc&&(i=Vc,r=Yc,Yc=Vc=null,YR(i),r)))for(i=0;i<r.length;i++)YR(r[i])}}function Cf(r,i){var o=r.stateNode;if(o===null)return null;var u=o[mr]||null;if(u===null)return null;o=u[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break t;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),IS=!1;if(bi)try{var Nf={};Object.defineProperty(Nf,"passive",{get:function(){IS=!0}}),window.addEventListener("test",Nf,Nf),window.removeEventListener("test",Nf,Nf)}catch{IS=!1}var ha=null,FS=null,ip=null;function JR(){if(ip)return ip;var r,i=FS,o=i.length,u,f="value"in ha?ha.value:ha.textContent,h=f.length;for(r=0;r<o&&i[r]===f[r];r++);var y=o-r;for(u=1;u<=y&&i[o-u]===f[h-u];u++);return ip=f.slice(r,1<u?1-u:void 0)}function ap(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function op(){return!0}function QR(){return!1}function pr(r){function i(o,u,f,h,y){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=h,this.target=y,this.currentTarget=null;for(var _ in r)r.hasOwnProperty(_)&&(o=r[_],this[_]=o?o(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?op:QR,this.isPropagationStopped=QR,this}return g(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=op)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=op)},persist:function(){},isPersistent:op}),i}var fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cp=pr(fo),xf=g({},fo,{view:0,detail:0}),aB=pr(xf),DS,zS,If,up=g({},xf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:LS,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==If&&(If&&r.type==="mousemove"?(DS=r.screenX-If.screenX,zS=r.screenY-If.screenY):zS=DS=0,If=r),DS)},movementY:function(r){return"movementY"in r?r.movementY:zS}}),XR=pr(up),oB=g({},up,{dataTransfer:0}),cB=pr(oB),uB=g({},xf,{relatedTarget:0}),US=pr(uB),lB=g({},fo,{animationName:0,elapsedTime:0,pseudoElement:0}),fB=pr(lB),hB=g({},fo,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),dB=pr(hB),mB=g({},fo,{data:0}),ZR=pr(mB),pB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bB(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=yB[r])?!!i[r]:!1}function LS(){return bB}var _B=g({},xf,{key:function(r){if(r.key){var i=pB[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=ap(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?gB[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:LS,charCode:function(r){return r.type==="keypress"?ap(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ap(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),SB=pr(_B),vB=g({},up,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),WR=pr(vB),$B=g({},xf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:LS}),wB=pr($B),EB=g({},fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),TB=pr(EB),OB=g({},up,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),RB=pr(OB),kB=g({},fo,{newState:0,oldState:0}),MB=pr(kB),AB=[9,13,27,32],jS=bi&&"CompositionEvent"in window,Ff=null;bi&&"documentMode"in document&&(Ff=document.documentMode);var CB=bi&&"TextEvent"in window&&!Ff,tk=bi&&(!jS||Ff&&8<Ff&&11>=Ff),ek=" ",nk=!1;function rk(r,i){switch(r){case"keyup":return AB.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sk(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Gc=!1;function NB(r,i){switch(r){case"compositionend":return sk(i);case"keypress":return i.which!==32?null:(nk=!0,ek);case"textInput":return r=i.data,r===ek&&nk?null:r;default:return null}}function xB(r,i){if(Gc)return r==="compositionend"||!jS&&rk(r,i)?(r=JR(),ip=FS=ha=null,Gc=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return tk&&i.locale!=="ko"?null:i.data;default:return null}}var IB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ik(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!IB[r.type]:i==="textarea"}function ak(r,i,o,u){Vc?Yc?Yc.push(u):Yc=[u]:Vc=u,i=Jp(i,"onChange"),0<i.length&&(o=new cp("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var Df=null,zf=null;function FB(r){j2(r,0)}function lp(r){var i=Af(r);if(PR(i))return r}function ok(r,i){if(r==="change")return i}var ck=!1;if(bi){var PS;if(bi){var qS="oninput"in document;if(!qS){var uk=document.createElement("div");uk.setAttribute("oninput","return;"),qS=typeof uk.oninput=="function"}PS=qS}else PS=!1;ck=PS&&(!document.documentMode||9<document.documentMode)}function lk(){Df&&(Df.detachEvent("onpropertychange",fk),zf=Df=null)}function fk(r){if(r.propertyName==="value"&&lp(zf)){var i=[];ak(i,zf,r,NS(r)),GR(FB,i)}}function DB(r,i,o){r==="focusin"?(lk(),Df=i,zf=o,Df.attachEvent("onpropertychange",fk)):r==="focusout"&&lk()}function zB(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return lp(zf)}function UB(r,i){if(r==="click")return lp(i)}function LB(r,i){if(r==="input"||r==="change")return lp(i)}function jB(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var xr=typeof Object.is=="function"?Object.is:jB;function Uf(r,i){if(xr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!yS.call(i,f)||!xr(r[f],i[f]))return!1}return!0}function hk(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function dk(r,i){var o=hk(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=hk(o)}}function mk(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?mk(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function pk(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=rp(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=rp(r.document)}return i}function BS(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var PB=bi&&"documentMode"in document&&11>=document.documentMode,Jc=null,KS=null,Lf=null,HS=!1;function gk(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;HS||Jc==null||Jc!==rp(u)||(u=Jc,"selectionStart"in u&&BS(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Lf&&Uf(Lf,u)||(Lf=u,u=Jp(KS,"onSelect"),0<u.length&&(i=new cp("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Jc)))}function ho(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Qc={animationend:ho("Animation","AnimationEnd"),animationiteration:ho("Animation","AnimationIteration"),animationstart:ho("Animation","AnimationStart"),transitionrun:ho("Transition","TransitionRun"),transitionstart:ho("Transition","TransitionStart"),transitioncancel:ho("Transition","TransitionCancel"),transitionend:ho("Transition","TransitionEnd")},VS={},yk={};bi&&(yk=document.createElement("div").style,"AnimationEvent"in window||(delete Qc.animationend.animation,delete Qc.animationiteration.animation,delete Qc.animationstart.animation),"TransitionEvent"in window||delete Qc.transitionend.transition);function mo(r){if(VS[r])return VS[r];if(!Qc[r])return r;var i=Qc[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in yk)return VS[r]=i[o];return r}var bk=mo("animationend"),_k=mo("animationiteration"),Sk=mo("animationstart"),qB=mo("transitionrun"),BB=mo("transitionstart"),KB=mo("transitioncancel"),vk=mo("transitionend"),$k=new Map,YS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");YS.push("scrollEnd");function ys(r,i){$k.set(r,i),lo(i,[r])}var wk=new WeakMap;function Qr(r,i){if(typeof r=="object"&&r!==null){var o=wk.get(r);return o!==void 0?o:(i={value:r,source:i,stack:LR(i)},wk.set(r,i),i)}return{value:r,source:i,stack:LR(i)}}var Xr=[],Xc=0,GS=0;function fp(){for(var r=Xc,i=GS=Xc=0;i<r;){var o=Xr[i];Xr[i++]=null;var u=Xr[i];Xr[i++]=null;var f=Xr[i];Xr[i++]=null;var h=Xr[i];if(Xr[i++]=null,u!==null&&f!==null){var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}h!==0&&Ek(o,f,h)}}function hp(r,i,o,u){Xr[Xc++]=r,Xr[Xc++]=i,Xr[Xc++]=o,Xr[Xc++]=u,GS|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function JS(r,i,o,u){return hp(r,i,o,u),dp(r)}function Zc(r,i){return hp(r,null,null,i),dp(r)}function Ek(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,h=r.return;h!==null;)h.childLanes|=o,u=h.alternate,u!==null&&(u.childLanes|=o),h.tag===22&&(r=h.stateNode,r===null||r._visibility&1||(f=!0)),r=h,h=h.return;return r.tag===3?(h=r.stateNode,f&&i!==null&&(f=31-Nr(o),r=h.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=o|536870912),h):null}function dp(r){if(50<lh)throw lh=0,e0=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Wc={};function HB(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(r,i,o,u){return new HB(r,i,o,u)}function QS(r){return r=r.prototype,!(!r||!r.isReactComponent)}function _i(r,i){var o=r.alternate;return o===null?(o=Ir(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Tk(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function mp(r,i,o,u,f,h){var y=0;if(u=r,typeof r=="function")QS(r)&&(y=1);else if(typeof r=="string")y=Y5(r,o,pt.current)?26:r==="html"||r==="head"||r==="body"?27:5;else t:switch(r){case et:return r=Ir(31,o,i,f),r.elementType=et,r.lanes=h,r;case E:return po(o.children,f,h,i);case D:y=8,f|=24;break;case C:return r=Ir(12,o,i,f|2),r.elementType=C,r.lanes=h,r;case M:return r=Ir(13,o,i,f),r.elementType=M,r.lanes=h,r;case U:return r=Ir(19,o,i,f),r.elementType=U,r.lanes=h,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:case A:y=10;break t;case q:y=9;break t;case P:y=11;break t;case K:y=14;break t;case B:y=16,u=null;break t}y=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=Ir(y,o,i,f),i.elementType=r,i.type=u,i.lanes=h,i}function po(r,i,o,u){return r=Ir(7,r,u,i),r.lanes=o,r}function XS(r,i,o){return r=Ir(6,r,null,i),r.lanes=o,r}function ZS(r,i,o){return i=Ir(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var tu=[],eu=0,pp=null,gp=0,Zr=[],Wr=0,go=null,Si=1,vi="";function yo(r,i){tu[eu++]=gp,tu[eu++]=pp,pp=r,gp=i}function Ok(r,i,o){Zr[Wr++]=Si,Zr[Wr++]=vi,Zr[Wr++]=go,go=r;var u=Si;r=vi;var f=32-Nr(u)-1;u&=~(1<<f),o+=1;var h=32-Nr(i)+f;if(30<h){var y=f-f%5;h=(u&(1<<y)-1).toString(32),u>>=y,f-=y,Si=1<<32-Nr(i)+f|o<<f|u,vi=h+r}else Si=1<<h|o<<f|u,vi=r}function WS(r){r.return!==null&&(yo(r,1),Ok(r,1,0))}function t1(r){for(;r===pp;)pp=tu[--eu],tu[eu]=null,gp=tu[--eu],tu[eu]=null;for(;r===go;)go=Zr[--Wr],Zr[Wr]=null,vi=Zr[--Wr],Zr[Wr]=null,Si=Zr[--Wr],Zr[Wr]=null}var nr=null,Ce=null,ie=!1,bo=null,qs=!1,e1=Error(s(519));function _o(r){var i=Error(s(418,""));throw qf(Qr(i,r)),e1}function Rk(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[Vn]=r,i[mr]=u,o){case"dialog":Yt("cancel",i),Yt("close",i);break;case"iframe":case"object":case"embed":Yt("load",i);break;case"video":case"audio":for(o=0;o<hh.length;o++)Yt(hh[o],i);break;case"source":Yt("error",i);break;case"img":case"image":case"link":Yt("error",i),Yt("load",i);break;case"details":Yt("toggle",i);break;case"input":Yt("invalid",i),qR(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),np(i);break;case"select":Yt("invalid",i);break;case"textarea":Yt("invalid",i),KR(i,u.value,u.defaultValue,u.children),np(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||K2(i.textContent,o)?(u.popover!=null&&(Yt("beforetoggle",i),Yt("toggle",i)),u.onScroll!=null&&Yt("scroll",i),u.onScrollEnd!=null&&Yt("scrollend",i),u.onClick!=null&&(i.onclick=Qp),i=!0):i=!1,i||_o(r)}function kk(r){for(nr=r.return;nr;)switch(nr.tag){case 5:case 13:qs=!1;return;case 27:case 3:qs=!0;return;default:nr=nr.return}}function jf(r){if(r!==nr)return!1;if(!ie)return kk(r),ie=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||y0(r.type,r.memoizedProps)),o=!o),o&&Ce&&_o(r),kk(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));t:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(i===0){Ce=_s(r.nextSibling);break t}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;r=r.nextSibling}Ce=null}}else i===27?(i=Ce,ka(r.type)?(r=v0,v0=null,Ce=r):Ce=i):Ce=nr?_s(r.stateNode.nextSibling):null;return!0}function Pf(){Ce=nr=null,ie=!1}function Mk(){var r=bo;return r!==null&&(br===null?br=r:br.push.apply(br,r),bo=null),r}function qf(r){bo===null?bo=[r]:bo.push(r)}var n1=Y(null),So=null,$i=null;function da(r,i,o){it(n1,i._currentValue),i._currentValue=o}function wi(r){r._currentValue=n1.current,ot(n1)}function r1(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function s1(r,i,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var h=f.dependencies;if(h!==null){var y=f.child;h=h.firstContext;t:for(;h!==null;){var _=h;h=f;for(var T=0;T<i.length;T++)if(_.context===i[T]){h.lanes|=o,_=h.alternate,_!==null&&(_.lanes|=o),r1(h.return,o,r),u||(y=null);break t}h=_.next}}else if(f.tag===18){if(y=f.return,y===null)throw Error(s(341));y.lanes|=o,h=y.alternate,h!==null&&(h.lanes|=o),r1(y,o,r),y=null}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===r){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}}function Bf(r,i,o,u){r=null;for(var f=i,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var y=f.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var _=f.type;xr(f.pendingProps.value,y.value)||(r!==null?r.push(_):r=[_])}}else if(f===Ar.current){if(y=f.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(bh):r=[bh])}f=f.return}r!==null&&s1(i,r,o,u),i.flags|=262144}function yp(r){for(r=r.firstContext;r!==null;){if(!xr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function vo(r){So=r,$i=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Yn(r){return Ak(So,r)}function bp(r,i){return So===null&&vo(r),Ak(r,i)}function Ak(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},$i===null){if(r===null)throw Error(s(308));$i=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else $i=$i.next=i;return o}var VB=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},YB=t.unstable_scheduleCallback,GB=t.unstable_NormalPriority,cn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function i1(){return{controller:new VB,data:new Map,refCount:0}}function Kf(r){r.refCount--,r.refCount===0&&YB(GB,function(){r.controller.abort()})}var Hf=null,a1=0,nu=0,ru=null;function JB(r,i){if(Hf===null){var o=Hf=[];a1=0,nu=c0(),ru={status:"pending",value:void 0,then:function(u){o.push(u)}}}return a1++,i.then(Ck,Ck),i}function Ck(){if(--a1===0&&Hf!==null){ru!==null&&(ru.status="fulfilled");var r=Hf;Hf=null,nu=0,ru=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function QB(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Nk=z.S;z.S=function(r,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&JB(r,i),Nk!==null&&Nk(r,i)};var $o=Y(null);function o1(){var r=$o.current;return r!==null?r:ye.pooledCache}function _p(r,i){i===null?it($o,$o.current):it($o,i.pool)}function xk(){var r=o1();return r===null?null:{parent:cn._currentValue,pool:r}}var Vf=Error(s(460)),Ik=Error(s(474)),Sp=Error(s(542)),c1={then:function(){}};function Fk(r){return r=r.status,r==="fulfilled"||r==="rejected"}function vp(){}function Dk(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(vp,vp),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Uk(r),r;default:if(typeof i.status=="string")i.then(vp,vp);else{if(r=ye,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Uk(r),r}throw Yf=i,Vf}}var Yf=null;function zk(){if(Yf===null)throw Error(s(459));var r=Yf;return Yf=null,r}function Uk(r){if(r===Vf||r===Sp)throw Error(s(483))}var ma=!1;function u1(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function l1(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function pa(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ga(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ae&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=dp(r),Ek(r,null,o),i}return hp(r,u,i,o),dp(r)}function Gf(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,CR(r,o)}}function f1(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,h=null;if(o=o.firstBaseUpdate,o!==null){do{var y={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};h===null?f=h=y:h=h.next=y,o=o.next}while(o!==null);h===null?f=h=i:h=h.next=i}else f=h=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var h1=!1;function Jf(){if(h1){var r=ru;if(r!==null)throw r}}function Qf(r,i,o,u){h1=!1;var f=r.updateQueue;ma=!1;var h=f.firstBaseUpdate,y=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var T=_,I=T.next;T.next=null,y===null?h=I:y.next=I,y=T;var H=r.alternate;H!==null&&(H=H.updateQueue,_=H.lastBaseUpdate,_!==y&&(_===null?H.firstBaseUpdate=I:_.next=I,H.lastBaseUpdate=T))}if(h!==null){var J=f.baseState;y=0,H=I=T=null,_=h;do{var L=_.lane&-536870913,j=L!==_.lane;if(j?(Zt&L)===L:(u&L)===L){L!==0&&L===nu&&(h1=!0),H!==null&&(H=H.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var $t=r,gt=_;L=i;var de=o;switch(gt.tag){case 1:if($t=gt.payload,typeof $t=="function"){J=$t.call(de,J,L);break t}J=$t;break t;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=gt.payload,L=typeof $t=="function"?$t.call(de,J,L):$t,L==null)break t;J=g({},J,L);break t;case 2:ma=!0}}L=_.callback,L!==null&&(r.flags|=64,j&&(r.flags|=8192),j=f.callbacks,j===null?f.callbacks=[L]:j.push(L))}else j={lane:L,tag:_.tag,payload:_.payload,callback:_.callback,next:null},H===null?(I=H=j,T=J):H=H.next=j,y|=L;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;j=_,_=j.next,j.next=null,f.lastBaseUpdate=j,f.shared.pending=null}}while(!0);H===null&&(T=J),f.baseState=T,f.firstBaseUpdate=I,f.lastBaseUpdate=H,h===null&&(f.shared.lanes=0),Ea|=y,r.lanes=y,r.memoizedState=J}}function Lk(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function jk(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Lk(o[r],i)}var su=Y(null),$p=Y(0);function Pk(r,i){r=Ai,it($p,r),it(su,i),Ai=r|i.baseLanes}function d1(){it($p,Ai),it(su,su.current)}function m1(){Ai=$p.current,ot(su),ot($p)}var ya=0,Bt=null,fe=null,Ye=null,wp=!1,iu=!1,wo=!1,Ep=0,Xf=0,au=null,XB=0;function Pe(){throw Error(s(321))}function p1(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!xr(r[o],i[o]))return!1;return!0}function g1(r,i,o,u,f,h){return ya=h,Bt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,z.H=r===null||r.memoizedState===null?EM:TM,wo=!1,h=o(u,f),wo=!1,iu&&(h=Bk(i,o,u,f)),qk(r),h}function qk(r){z.H=Ap;var i=fe!==null&&fe.next!==null;if(ya=0,Ye=fe=Bt=null,wp=!1,Xf=0,au=null,i)throw Error(s(300));r===null||_n||(r=r.dependencies,r!==null&&yp(r)&&(_n=!0))}function Bk(r,i,o,u){Bt=r;var f=0;do{if(iu&&(au=null),Xf=0,iu=!1,25<=f)throw Error(s(301));if(f+=1,Ye=fe=null,r.updateQueue!=null){var h=r.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}z.H=s5,h=i(o,u)}while(iu);return h}function ZB(){var r=z.H,i=r.useState()[0];return i=typeof i.then=="function"?Zf(i):i,r=r.useState()[0],(fe!==null?fe.memoizedState:null)!==r&&(Bt.flags|=1024),i}function y1(){var r=Ep!==0;return Ep=0,r}function b1(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function _1(r){if(wp){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wp=!1}ya=0,Ye=fe=Bt=null,iu=!1,Xf=Ep=0,au=null}function gr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Bt.memoizedState=Ye=r:Ye=Ye.next=r,Ye}function Ge(){if(fe===null){var r=Bt.alternate;r=r!==null?r.memoizedState:null}else r=fe.next;var i=Ye===null?Bt.memoizedState:Ye.next;if(i!==null)Ye=i,fe=r;else{if(r===null)throw Bt.alternate===null?Error(s(467)):Error(s(310));fe=r,r={memoizedState:fe.memoizedState,baseState:fe.baseState,baseQueue:fe.baseQueue,queue:fe.queue,next:null},Ye===null?Bt.memoizedState=Ye=r:Ye=Ye.next=r}return Ye}function S1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zf(r){var i=Xf;return Xf+=1,au===null&&(au=[]),r=Dk(au,r,i),i=Bt,(Ye===null?i.memoizedState:Ye.next)===null&&(i=i.alternate,z.H=i===null||i.memoizedState===null?EM:TM),r}function Tp(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Zf(r);if(r.$$typeof===A)return Yn(r)}throw Error(s(438,String(r)))}function v1(r){var i=null,o=Bt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Bt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=S1(),Bt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=tt;return i.index++,o}function Ei(r,i){return typeof i=="function"?i(r):i}function Op(r){var i=Ge();return $1(i,fe,r)}function $1(r,i,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var f=r.baseQueue,h=u.pending;if(h!==null){if(f!==null){var y=f.next;f.next=h.next,h.next=y}i.baseQueue=f=h,u.pending=null}if(h=r.baseState,f===null)r.memoizedState=h;else{i=f.next;var _=y=null,T=null,I=i,H=!1;do{var J=I.lane&-536870913;if(J!==I.lane?(Zt&J)===J:(ya&J)===J){var L=I.revertLane;if(L===0)T!==null&&(T=T.next={lane:0,revertLane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),J===nu&&(H=!0);else if((ya&L)===L){I=I.next,L===nu&&(H=!0);continue}else J={lane:0,revertLane:I.revertLane,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},T===null?(_=T=J,y=h):T=T.next=J,Bt.lanes|=L,Ea|=L;J=I.action,wo&&o(h,J),h=I.hasEagerState?I.eagerState:o(h,J)}else L={lane:J,revertLane:I.revertLane,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},T===null?(_=T=L,y=h):T=T.next=L,Bt.lanes|=J,Ea|=J;I=I.next}while(I!==null&&I!==i);if(T===null?y=h:T.next=_,!xr(h,r.memoizedState)&&(_n=!0,H&&(o=ru,o!==null)))throw o;r.memoizedState=h,r.baseState=y,r.baseQueue=T,u.lastRenderedState=h}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function w1(r){var i=Ge(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,h=i.memoizedState;if(f!==null){o.pending=null;var y=f=f.next;do h=r(h,y.action),y=y.next;while(y!==f);xr(h,i.memoizedState)||(_n=!0),i.memoizedState=h,i.baseQueue===null&&(i.baseState=h),o.lastRenderedState=h}return[h,u]}function Kk(r,i,o){var u=Bt,f=Ge(),h=ie;if(h){if(o===void 0)throw Error(s(407));o=o()}else o=i();var y=!xr((fe||f).memoizedState,o);y&&(f.memoizedState=o,_n=!0),f=f.queue;var _=Yk.bind(null,u,f,r);if(Wf(2048,8,_,[r]),f.getSnapshot!==i||y||Ye!==null&&Ye.memoizedState.tag&1){if(u.flags|=2048,ou(9,Rp(),Vk.bind(null,u,f,o,i),null),ye===null)throw Error(s(349));h||(ya&124)!==0||Hk(u,i,o)}return o}function Hk(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=Bt.updateQueue,i===null?(i=S1(),Bt.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function Vk(r,i,o,u){i.value=o,i.getSnapshot=u,Gk(i)&&Jk(r)}function Yk(r,i,o){return o(function(){Gk(i)&&Jk(r)})}function Gk(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!xr(r,o)}catch{return!0}}function Jk(r){var i=Zc(r,2);i!==null&&Lr(i,r,2)}function E1(r){var i=gr();if(typeof r=="function"){var o=r;if(r=o(),wo){la(!0);try{o()}finally{la(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:r},i}function Qk(r,i,o,u){return r.baseState=o,$1(r,fe,typeof u=="function"?u:Ei)}function WB(r,i,o,u,f){if(Mp(r))throw Error(s(485));if(r=i.action,r!==null){var h={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){h.listeners.push(y)}};z.T!==null?o(!0):h.isTransition=!1,u(h),o=i.pending,o===null?(h.next=i.pending=h,Xk(i,h)):(h.next=o.next,i.pending=o.next=h)}}function Xk(r,i){var o=i.action,u=i.payload,f=r.state;if(i.isTransition){var h=z.T,y={};z.T=y;try{var _=o(f,u),T=z.S;T!==null&&T(y,_),Zk(r,i,_)}catch(I){T1(r,i,I)}finally{z.T=h}}else try{h=o(f,u),Zk(r,i,h)}catch(I){T1(r,i,I)}}function Zk(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Wk(r,i,u)},function(u){return T1(r,i,u)}):Wk(r,i,o)}function Wk(r,i,o){i.status="fulfilled",i.value=o,tM(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,Xk(r,o)))}function T1(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,tM(i),i=i.next;while(i!==u)}r.action=null}function tM(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function eM(r,i){return i}function nM(r,i){if(ie){var o=ye.formState;if(o!==null){t:{var u=Bt;if(ie){if(Ce){e:{for(var f=Ce,h=qs;f.nodeType!==8;){if(!h){f=null;break e}if(f=_s(f.nextSibling),f===null){f=null;break e}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){Ce=_s(f.nextSibling),u=f.data==="F!";break t}}_o(u)}u=!1}u&&(i=o[0])}}return o=gr(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eM,lastRenderedState:i},o.queue=u,o=vM.bind(null,Bt,u),u.dispatch=o,u=E1(!1),h=A1.bind(null,Bt,!1,u.queue),u=gr(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,o=WB.bind(null,Bt,f,h,o),f.dispatch=o,u.memoizedState=r,[i,o,!1]}function rM(r){var i=Ge();return sM(i,fe,r)}function sM(r,i,o){if(i=$1(r,i,eM)[0],r=Op(Ei)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Zf(i)}catch(y){throw y===Vf?Sp:y}else u=i;i=Ge();var f=i.queue,h=f.dispatch;return o!==i.memoizedState&&(Bt.flags|=2048,ou(9,Rp(),t5.bind(null,f,o),null)),[u,h,r]}function t5(r,i){r.action=i}function iM(r){var i=Ge(),o=fe;if(o!==null)return sM(i,o,r);Ge(),i=i.memoizedState,o=Ge();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function ou(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=Bt.updateQueue,i===null&&(i=S1(),Bt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function Rp(){return{destroy:void 0,resource:void 0}}function aM(){return Ge().memoizedState}function kp(r,i,o,u){var f=gr();u=u===void 0?null:u,Bt.flags|=r,f.memoizedState=ou(1|i,Rp(),o,u)}function Wf(r,i,o,u){var f=Ge();u=u===void 0?null:u;var h=f.memoizedState.inst;fe!==null&&u!==null&&p1(u,fe.memoizedState.deps)?f.memoizedState=ou(i,h,o,u):(Bt.flags|=r,f.memoizedState=ou(1|i,h,o,u))}function oM(r,i){kp(8390656,8,r,i)}function cM(r,i){Wf(2048,8,r,i)}function uM(r,i){return Wf(4,2,r,i)}function lM(r,i){return Wf(4,4,r,i)}function fM(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function hM(r,i,o){o=o!=null?o.concat([r]):null,Wf(4,4,fM.bind(null,i,r),o)}function O1(){}function dM(r,i){var o=Ge();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&p1(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function mM(r,i){var o=Ge();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&p1(i,u[1]))return u[0];if(u=r(),wo){la(!0);try{r()}finally{la(!1)}}return o.memoizedState=[u,i],u}function R1(r,i,o){return o===void 0||(ya&1073741824)!==0?r.memoizedState=i:(r.memoizedState=o,r=y2(),Bt.lanes|=r,Ea|=r,o)}function pM(r,i,o,u){return xr(o,i)?o:su.current!==null?(r=R1(r,o,u),xr(r,i)||(_n=!0),r):(ya&42)===0?(_n=!0,r.memoizedState=o):(r=y2(),Bt.lanes|=r,Ea|=r,i)}function gM(r,i,o,u,f){var h=G.p;G.p=h!==0&&8>h?h:8;var y=z.T,_={};z.T=_,A1(r,!1,i,o);try{var T=f(),I=z.S;if(I!==null&&I(_,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var H=QB(T,u);th(r,i,H,Ur(r))}else th(r,i,u,Ur(r))}catch(J){th(r,i,{then:function(){},status:"rejected",reason:J},Ur())}finally{G.p=h,z.T=y}}function e5(){}function k1(r,i,o,u){if(r.tag!==5)throw Error(s(476));var f=yM(r).queue;gM(r,f,i,st,o===null?e5:function(){return bM(r),o(u)})}function yM(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:st,baseState:st,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:st},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function bM(r){var i=yM(r).next.queue;th(r,i,{},Ur())}function M1(){return Yn(bh)}function _M(){return Ge().memoizedState}function SM(){return Ge().memoizedState}function n5(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Ur();r=pa(o);var u=ga(i,r,o);u!==null&&(Lr(u,i,o),Gf(u,i,o)),i={cache:i1()},r.payload=i;return}i=i.return}}function r5(r,i,o){var u=Ur();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Mp(r)?$M(i,o):(o=JS(r,i,o,u),o!==null&&(Lr(o,r,u),wM(o,i,u)))}function vM(r,i,o){var u=Ur();th(r,i,o,u)}function th(r,i,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Mp(r))$M(i,f);else{var h=r.alternate;if(r.lanes===0&&(h===null||h.lanes===0)&&(h=i.lastRenderedReducer,h!==null))try{var y=i.lastRenderedState,_=h(y,o);if(f.hasEagerState=!0,f.eagerState=_,xr(_,y))return hp(r,i,f,0),ye===null&&fp(),!1}catch{}finally{}if(o=JS(r,i,f,u),o!==null)return Lr(o,r,u),wM(o,i,u),!0}return!1}function A1(r,i,o,u){if(u={lane:2,revertLane:c0(),action:u,hasEagerState:!1,eagerState:null,next:null},Mp(r)){if(i)throw Error(s(479))}else i=JS(r,o,u,2),i!==null&&Lr(i,r,2)}function Mp(r){var i=r.alternate;return r===Bt||i!==null&&i===Bt}function $M(r,i){iu=wp=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function wM(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,CR(r,o)}}var Ap={readContext:Yn,use:Tp,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useLayoutEffect:Pe,useInsertionEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useSyncExternalStore:Pe,useId:Pe,useHostTransitionStatus:Pe,useFormState:Pe,useActionState:Pe,useOptimistic:Pe,useMemoCache:Pe,useCacheRefresh:Pe},EM={readContext:Yn,use:Tp,useCallback:function(r,i){return gr().memoizedState=[r,i===void 0?null:i],r},useContext:Yn,useEffect:oM,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,kp(4194308,4,fM.bind(null,i,r),o)},useLayoutEffect:function(r,i){return kp(4194308,4,r,i)},useInsertionEffect:function(r,i){kp(4,2,r,i)},useMemo:function(r,i){var o=gr();i=i===void 0?null:i;var u=r();if(wo){la(!0);try{r()}finally{la(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=gr();if(o!==void 0){var f=o(i);if(wo){la(!0);try{o(i)}finally{la(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=r5.bind(null,Bt,r),[u.memoizedState,r]},useRef:function(r){var i=gr();return r={current:r},i.memoizedState=r},useState:function(r){r=E1(r);var i=r.queue,o=vM.bind(null,Bt,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:O1,useDeferredValue:function(r,i){var o=gr();return R1(o,r,i)},useTransition:function(){var r=E1(!1);return r=gM.bind(null,Bt,r.queue,!0,!1),gr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=Bt,f=gr();if(ie){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),ye===null)throw Error(s(349));(Zt&124)!==0||Hk(u,i,o)}f.memoizedState=o;var h={value:o,getSnapshot:i};return f.queue=h,oM(Yk.bind(null,u,h,r),[r]),u.flags|=2048,ou(9,Rp(),Vk.bind(null,u,h,o,i),null),o},useId:function(){var r=gr(),i=ye.identifierPrefix;if(ie){var o=vi,u=Si;o=(u&~(1<<32-Nr(u)-1)).toString(32)+o,i="«"+i+"R"+o,o=Ep++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=XB++,i="«"+i+"r"+o.toString(32)+"»";return r.memoizedState=i},useHostTransitionStatus:M1,useFormState:nM,useActionState:nM,useOptimistic:function(r){var i=gr();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=A1.bind(null,Bt,!0,o),o.dispatch=i,[r,i]},useMemoCache:v1,useCacheRefresh:function(){return gr().memoizedState=n5.bind(null,Bt)}},TM={readContext:Yn,use:Tp,useCallback:dM,useContext:Yn,useEffect:cM,useImperativeHandle:hM,useInsertionEffect:uM,useLayoutEffect:lM,useMemo:mM,useReducer:Op,useRef:aM,useState:function(){return Op(Ei)},useDebugValue:O1,useDeferredValue:function(r,i){var o=Ge();return pM(o,fe.memoizedState,r,i)},useTransition:function(){var r=Op(Ei)[0],i=Ge().memoizedState;return[typeof r=="boolean"?r:Zf(r),i]},useSyncExternalStore:Kk,useId:_M,useHostTransitionStatus:M1,useFormState:rM,useActionState:rM,useOptimistic:function(r,i){var o=Ge();return Qk(o,fe,r,i)},useMemoCache:v1,useCacheRefresh:SM},s5={readContext:Yn,use:Tp,useCallback:dM,useContext:Yn,useEffect:cM,useImperativeHandle:hM,useInsertionEffect:uM,useLayoutEffect:lM,useMemo:mM,useReducer:w1,useRef:aM,useState:function(){return w1(Ei)},useDebugValue:O1,useDeferredValue:function(r,i){var o=Ge();return fe===null?R1(o,r,i):pM(o,fe.memoizedState,r,i)},useTransition:function(){var r=w1(Ei)[0],i=Ge().memoizedState;return[typeof r=="boolean"?r:Zf(r),i]},useSyncExternalStore:Kk,useId:_M,useHostTransitionStatus:M1,useFormState:iM,useActionState:iM,useOptimistic:function(r,i){var o=Ge();return fe!==null?Qk(o,fe,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:v1,useCacheRefresh:SM},cu=null,eh=0;function Cp(r){var i=eh;return eh+=1,cu===null&&(cu=[]),Dk(cu,r,i)}function nh(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Np(r,i){throw i.$$typeof===b?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function OM(r){var i=r._init;return i(r._payload)}function RM(r){function i(k,R){if(r){var x=k.deletions;x===null?(k.deletions=[R],k.flags|=16):x.push(R)}}function o(k,R){if(!r)return null;for(;R!==null;)i(k,R),R=R.sibling;return null}function u(k){for(var R=new Map;k!==null;)k.key!==null?R.set(k.key,k):R.set(k.index,k),k=k.sibling;return R}function f(k,R){return k=_i(k,R),k.index=0,k.sibling=null,k}function h(k,R,x){return k.index=x,r?(x=k.alternate,x!==null?(x=x.index,x<R?(k.flags|=67108866,R):x):(k.flags|=67108866,R)):(k.flags|=1048576,R)}function y(k){return r&&k.alternate===null&&(k.flags|=67108866),k}function _(k,R,x,V){return R===null||R.tag!==6?(R=XS(x,k.mode,V),R.return=k,R):(R=f(R,x),R.return=k,R)}function T(k,R,x,V){var ct=x.type;return ct===E?H(k,R,x.props.children,V,x.key):R!==null&&(R.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===B&&OM(ct)===R.type)?(R=f(R,x.props),nh(R,x),R.return=k,R):(R=mp(x.type,x.key,x.props,null,k.mode,V),nh(R,x),R.return=k,R)}function I(k,R,x,V){return R===null||R.tag!==4||R.stateNode.containerInfo!==x.containerInfo||R.stateNode.implementation!==x.implementation?(R=ZS(x,k.mode,V),R.return=k,R):(R=f(R,x.children||[]),R.return=k,R)}function H(k,R,x,V,ct){return R===null||R.tag!==7?(R=po(x,k.mode,V,ct),R.return=k,R):(R=f(R,x),R.return=k,R)}function J(k,R,x){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=XS(""+R,k.mode,x),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case S:return x=mp(R.type,R.key,R.props,null,k.mode,x),nh(x,R),x.return=k,x;case v:return R=ZS(R,k.mode,x),R.return=k,R;case B:var V=R._init;return R=V(R._payload),J(k,R,x)}if(Et(R)||rt(R))return R=po(R,k.mode,x,null),R.return=k,R;if(typeof R.then=="function")return J(k,Cp(R),x);if(R.$$typeof===A)return J(k,bp(k,R),x);Np(k,R)}return null}function L(k,R,x,V){var ct=R!==null?R.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return ct!==null?null:_(k,R,""+x,V);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case S:return x.key===ct?T(k,R,x,V):null;case v:return x.key===ct?I(k,R,x,V):null;case B:return ct=x._init,x=ct(x._payload),L(k,R,x,V)}if(Et(x)||rt(x))return ct!==null?null:H(k,R,x,V,null);if(typeof x.then=="function")return L(k,R,Cp(x),V);if(x.$$typeof===A)return L(k,R,bp(k,x),V);Np(k,x)}return null}function j(k,R,x,V,ct){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return k=k.get(x)||null,_(R,k,""+V,ct);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return k=k.get(V.key===null?x:V.key)||null,T(R,k,V,ct);case v:return k=k.get(V.key===null?x:V.key)||null,I(R,k,V,ct);case B:var Ht=V._init;return V=Ht(V._payload),j(k,R,x,V,ct)}if(Et(V)||rt(V))return k=k.get(x)||null,H(R,k,V,ct,null);if(typeof V.then=="function")return j(k,R,x,Cp(V),ct);if(V.$$typeof===A)return j(k,R,x,bp(R,V),ct);Np(R,V)}return null}function $t(k,R,x,V){for(var ct=null,Ht=null,dt=R,yt=R=0,vn=null;dt!==null&&yt<x.length;yt++){dt.index>yt?(vn=dt,dt=null):vn=dt.sibling;var re=L(k,dt,x[yt],V);if(re===null){dt===null&&(dt=vn);break}r&&dt&&re.alternate===null&&i(k,dt),R=h(re,R,yt),Ht===null?ct=re:Ht.sibling=re,Ht=re,dt=vn}if(yt===x.length)return o(k,dt),ie&&yo(k,yt),ct;if(dt===null){for(;yt<x.length;yt++)dt=J(k,x[yt],V),dt!==null&&(R=h(dt,R,yt),Ht===null?ct=dt:Ht.sibling=dt,Ht=dt);return ie&&yo(k,yt),ct}for(dt=u(dt);yt<x.length;yt++)vn=j(dt,k,yt,x[yt],V),vn!==null&&(r&&vn.alternate!==null&&dt.delete(vn.key===null?yt:vn.key),R=h(vn,R,yt),Ht===null?ct=vn:Ht.sibling=vn,Ht=vn);return r&&dt.forEach(function(xa){return i(k,xa)}),ie&&yo(k,yt),ct}function gt(k,R,x,V){if(x==null)throw Error(s(151));for(var ct=null,Ht=null,dt=R,yt=R=0,vn=null,re=x.next();dt!==null&&!re.done;yt++,re=x.next()){dt.index>yt?(vn=dt,dt=null):vn=dt.sibling;var xa=L(k,dt,re.value,V);if(xa===null){dt===null&&(dt=vn);break}r&&dt&&xa.alternate===null&&i(k,dt),R=h(xa,R,yt),Ht===null?ct=xa:Ht.sibling=xa,Ht=xa,dt=vn}if(re.done)return o(k,dt),ie&&yo(k,yt),ct;if(dt===null){for(;!re.done;yt++,re=x.next())re=J(k,re.value,V),re!==null&&(R=h(re,R,yt),Ht===null?ct=re:Ht.sibling=re,Ht=re);return ie&&yo(k,yt),ct}for(dt=u(dt);!re.done;yt++,re=x.next())re=j(dt,k,yt,re.value,V),re!==null&&(r&&re.alternate!==null&&dt.delete(re.key===null?yt:re.key),R=h(re,R,yt),Ht===null?ct=re:Ht.sibling=re,Ht=re);return r&&dt.forEach(function(iK){return i(k,iK)}),ie&&yo(k,yt),ct}function de(k,R,x,V){if(typeof x=="object"&&x!==null&&x.type===E&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case S:t:{for(var ct=x.key;R!==null;){if(R.key===ct){if(ct=x.type,ct===E){if(R.tag===7){o(k,R.sibling),V=f(R,x.props.children),V.return=k,k=V;break t}}else if(R.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===B&&OM(ct)===R.type){o(k,R.sibling),V=f(R,x.props),nh(V,x),V.return=k,k=V;break t}o(k,R);break}else i(k,R);R=R.sibling}x.type===E?(V=po(x.props.children,k.mode,V,x.key),V.return=k,k=V):(V=mp(x.type,x.key,x.props,null,k.mode,V),nh(V,x),V.return=k,k=V)}return y(k);case v:t:{for(ct=x.key;R!==null;){if(R.key===ct)if(R.tag===4&&R.stateNode.containerInfo===x.containerInfo&&R.stateNode.implementation===x.implementation){o(k,R.sibling),V=f(R,x.children||[]),V.return=k,k=V;break t}else{o(k,R);break}else i(k,R);R=R.sibling}V=ZS(x,k.mode,V),V.return=k,k=V}return y(k);case B:return ct=x._init,x=ct(x._payload),de(k,R,x,V)}if(Et(x))return $t(k,R,x,V);if(rt(x)){if(ct=rt(x),typeof ct!="function")throw Error(s(150));return x=ct.call(x),gt(k,R,x,V)}if(typeof x.then=="function")return de(k,R,Cp(x),V);if(x.$$typeof===A)return de(k,R,bp(k,x),V);Np(k,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,R!==null&&R.tag===6?(o(k,R.sibling),V=f(R,x),V.return=k,k=V):(o(k,R),V=XS(x,k.mode,V),V.return=k,k=V),y(k)):o(k,R)}return function(k,R,x,V){try{eh=0;var ct=de(k,R,x,V);return cu=null,ct}catch(dt){if(dt===Vf||dt===Sp)throw dt;var Ht=Ir(29,dt,null,k.mode);return Ht.lanes=V,Ht.return=k,Ht}finally{}}}var uu=RM(!0),kM=RM(!1),ts=Y(null),Bs=null;function ba(r){var i=r.alternate;it(un,un.current&1),it(ts,r),Bs===null&&(i===null||su.current!==null||i.memoizedState!==null)&&(Bs=r)}function MM(r){if(r.tag===22){if(it(un,un.current),it(ts,r),Bs===null){var i=r.alternate;i!==null&&i.memoizedState!==null&&(Bs=r)}}else _a()}function _a(){it(un,un.current),it(ts,ts.current)}function Ti(r){ot(ts),Bs===r&&(Bs=null),ot(un)}var un=Y(0);function xp(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||S0(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function C1(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:g({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var N1={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Ur(),f=pa(u);f.payload=i,o!=null&&(f.callback=o),i=ga(r,f,u),i!==null&&(Lr(i,r,u),Gf(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Ur(),f=pa(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=ga(r,f,u),i!==null&&(Lr(i,r,u),Gf(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Ur(),u=pa(o);u.tag=2,i!=null&&(u.callback=i),i=ga(r,u,o),i!==null&&(Lr(i,r,o),Gf(i,r,o))}};function AM(r,i,o,u,f,h,y){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,h,y):i.prototype&&i.prototype.isPureReactComponent?!Uf(o,u)||!Uf(f,h):!0}function CM(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&N1.enqueueReplaceState(i,i.state,null)}function Eo(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=g({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Ip=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function NM(r){Ip(r)}function xM(r){console.error(r)}function IM(r){Ip(r)}function Fp(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function FM(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function x1(r,i,o){return o=pa(o),o.tag=3,o.payload={element:null},o.callback=function(){Fp(r,i)},o}function DM(r){return r=pa(r),r.tag=3,r}function zM(r,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var h=u.value;r.payload=function(){return f(h)},r.callback=function(){FM(i,o,u)}}var y=o.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(r.callback=function(){FM(i,o,u),typeof f!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var _=u.stack;this.componentDidCatch(u.value,{componentStack:_!==null?_:""})})}function i5(r,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Bf(i,o,f,!0),o=ts.current,o!==null){switch(o.tag){case 13:return Bs===null?r0():o.alternate===null&&Ne===0&&(Ne=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===c1?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),i0(r,u,f)),!1;case 22:return o.flags|=65536,u===c1?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),i0(r,u,f)),!1}throw Error(s(435,o.tag))}return i0(r,u,f),r0(),!1}if(ie)return i=ts.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==e1&&(r=Error(s(422),{cause:u}),qf(Qr(r,o)))):(u!==e1&&(i=Error(s(423),{cause:u}),qf(Qr(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Qr(u,o),f=x1(r.stateNode,u,f),f1(r,f),Ne!==4&&(Ne=2)),!1;var h=Error(s(520),{cause:u});if(h=Qr(h,o),uh===null?uh=[h]:uh.push(h),Ne!==4&&(Ne=2),i===null)return!0;u=Qr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=x1(o.stateNode,u,r),f1(o,r),!1;case 1:if(i=o.type,h=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ta===null||!Ta.has(h))))return o.flags|=65536,f&=-f,o.lanes|=f,f=DM(f),zM(f,r,o,u),f1(o,f),!1}o=o.return}while(o!==null);return!1}var UM=Error(s(461)),_n=!1;function Cn(r,i,o,u){i.child=r===null?kM(i,null,o,u):uu(i,r.child,o,u)}function LM(r,i,o,u,f){o=o.render;var h=i.ref;if("ref"in u){var y={};for(var _ in u)_!=="ref"&&(y[_]=u[_])}else y=u;return vo(i),u=g1(r,i,o,y,h,f),_=y1(),r!==null&&!_n?(b1(r,i,f),Oi(r,i,f)):(ie&&_&&WS(i),i.flags|=1,Cn(r,i,u,f),i.child)}function jM(r,i,o,u,f){if(r===null){var h=o.type;return typeof h=="function"&&!QS(h)&&h.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=h,PM(r,i,h,u,f)):(r=mp(o.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(h=r.child,!P1(r,f)){var y=h.memoizedProps;if(o=o.compare,o=o!==null?o:Uf,o(y,u)&&r.ref===i.ref)return Oi(r,i,f)}return i.flags|=1,r=_i(h,u),r.ref=i.ref,r.return=i,i.child=r}function PM(r,i,o,u,f){if(r!==null){var h=r.memoizedProps;if(Uf(h,u)&&r.ref===i.ref)if(_n=!1,i.pendingProps=u=h,P1(r,f))(r.flags&131072)!==0&&(_n=!0);else return i.lanes=r.lanes,Oi(r,i,f)}return I1(r,i,o,u,f)}function qM(r,i,o){var u=i.pendingProps,f=u.children,h=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=h!==null?h.baseLanes|o:o,r!==null){for(f=i.child=r.child,h=0;f!==null;)h=h|f.lanes|f.childLanes,f=f.sibling;i.childLanes=h&~u}else i.childLanes=0,i.child=null;return BM(r,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&_p(i,h!==null?h.cachePool:null),h!==null?Pk(i,h):d1(),MM(i);else return i.lanes=i.childLanes=536870912,BM(r,i,h!==null?h.baseLanes|o:o,o)}else h!==null?(_p(i,h.cachePool),Pk(i,h),_a(),i.memoizedState=null):(r!==null&&_p(i,null),d1(),_a());return Cn(r,i,f,o),i.child}function BM(r,i,o,u){var f=o1();return f=f===null?null:{parent:cn._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},r!==null&&_p(i,null),d1(),MM(i),r!==null&&Bf(r,i,u,!0),null}function Dp(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function I1(r,i,o,u,f){return vo(i),o=g1(r,i,o,u,void 0,f),u=y1(),r!==null&&!_n?(b1(r,i,f),Oi(r,i,f)):(ie&&u&&WS(i),i.flags|=1,Cn(r,i,o,f),i.child)}function KM(r,i,o,u,f,h){return vo(i),i.updateQueue=null,o=Bk(i,u,o,f),qk(r),u=y1(),r!==null&&!_n?(b1(r,i,h),Oi(r,i,h)):(ie&&u&&WS(i),i.flags|=1,Cn(r,i,o,h),i.child)}function HM(r,i,o,u,f){if(vo(i),i.stateNode===null){var h=Wc,y=o.contextType;typeof y=="object"&&y!==null&&(h=Yn(y)),h=new o(u,h),i.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=N1,i.stateNode=h,h._reactInternals=i,h=i.stateNode,h.props=u,h.state=i.memoizedState,h.refs={},u1(i),y=o.contextType,h.context=typeof y=="object"&&y!==null?Yn(y):Wc,h.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(C1(i,o,y,u),h.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(y=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),y!==h.state&&N1.enqueueReplaceState(h,h.state,null),Qf(i,u,h,f),Jf(),h.state=i.memoizedState),typeof h.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){h=i.stateNode;var _=i.memoizedProps,T=Eo(o,_);h.props=T;var I=h.context,H=o.contextType;y=Wc,typeof H=="object"&&H!==null&&(y=Yn(H));var J=o.getDerivedStateFromProps;H=typeof J=="function"||typeof h.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,H||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_||I!==y)&&CM(i,h,u,y),ma=!1;var L=i.memoizedState;h.state=L,Qf(i,u,h,f),Jf(),I=i.memoizedState,_||L!==I||ma?(typeof J=="function"&&(C1(i,o,J,u),I=i.memoizedState),(T=ma||AM(i,o,T,u,L,I,y))?(H||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(i.flags|=4194308)):(typeof h.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=I),h.props=u,h.state=I,h.context=y,u=T):(typeof h.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{h=i.stateNode,l1(r,i),y=i.memoizedProps,H=Eo(o,y),h.props=H,J=i.pendingProps,L=h.context,I=o.contextType,T=Wc,typeof I=="object"&&I!==null&&(T=Yn(I)),_=o.getDerivedStateFromProps,(I=typeof _=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(y!==J||L!==T)&&CM(i,h,u,T),ma=!1,L=i.memoizedState,h.state=L,Qf(i,u,h,f),Jf();var j=i.memoizedState;y!==J||L!==j||ma||r!==null&&r.dependencies!==null&&yp(r.dependencies)?(typeof _=="function"&&(C1(i,o,_,u),j=i.memoizedState),(H=ma||AM(i,o,H,u,L,j,T)||r!==null&&r.dependencies!==null&&yp(r.dependencies))?(I||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(u,j,T),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(u,j,T)),typeof h.componentDidUpdate=="function"&&(i.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof h.componentDidUpdate!="function"||y===r.memoizedProps&&L===r.memoizedState||(i.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===r.memoizedProps&&L===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=j),h.props=u,h.state=j,h.context=T,u=H):(typeof h.componentDidUpdate!="function"||y===r.memoizedProps&&L===r.memoizedState||(i.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||y===r.memoizedProps&&L===r.memoizedState||(i.flags|=1024),u=!1)}return h=u,Dp(r,i),u=(i.flags&128)!==0,h||u?(h=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:h.render(),i.flags|=1,r!==null&&u?(i.child=uu(i,r.child,null,f),i.child=uu(i,null,o,f)):Cn(r,i,o,f),i.memoizedState=h.state,r=i.child):r=Oi(r,i,f),r}function VM(r,i,o,u){return Pf(),i.flags|=256,Cn(r,i,o,u),i.child}var F1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function D1(r){return{baseLanes:r,cachePool:xk()}}function z1(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=es),r}function YM(r,i,o){var u=i.pendingProps,f=!1,h=(i.flags&128)!==0,y;if((y=h)||(y=r!==null&&r.memoizedState===null?!1:(un.current&2)!==0),y&&(f=!0,i.flags&=-129),y=(i.flags&32)!==0,i.flags&=-33,r===null){if(ie){if(f?ba(i):_a(),ie){var _=Ce,T;if(T=_){t:{for(T=_,_=qs;T.nodeType!==8;){if(!_){_=null;break t}if(T=_s(T.nextSibling),T===null){_=null;break t}}_=T}_!==null?(i.memoizedState={dehydrated:_,treeContext:go!==null?{id:Si,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},T=Ir(18,null,null,0),T.stateNode=_,T.return=i,i.child=T,nr=i,Ce=null,T=!0):T=!1}T||_o(i)}if(_=i.memoizedState,_!==null&&(_=_.dehydrated,_!==null))return S0(_)?i.lanes=32:i.lanes=536870912,null;Ti(i)}return _=u.children,u=u.fallback,f?(_a(),f=i.mode,_=zp({mode:"hidden",children:_},f),u=po(u,f,o,null),_.return=i,u.return=i,_.sibling=u,i.child=_,f=i.child,f.memoizedState=D1(o),f.childLanes=z1(r,y,o),i.memoizedState=F1,u):(ba(i),U1(i,_))}if(T=r.memoizedState,T!==null&&(_=T.dehydrated,_!==null)){if(h)i.flags&256?(ba(i),i.flags&=-257,i=L1(r,i,o)):i.memoizedState!==null?(_a(),i.child=r.child,i.flags|=128,i=null):(_a(),f=u.fallback,_=i.mode,u=zp({mode:"visible",children:u.children},_),f=po(f,_,o,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,uu(i,r.child,null,o),u=i.child,u.memoizedState=D1(o),u.childLanes=z1(r,y,o),i.memoizedState=F1,i=f);else if(ba(i),S0(_)){if(y=_.nextSibling&&_.nextSibling.dataset,y)var I=y.dgst;y=I,u=Error(s(419)),u.stack="",u.digest=y,qf({value:u,source:null,stack:null}),i=L1(r,i,o)}else if(_n||Bf(r,i,o,!1),y=(o&r.childLanes)!==0,_n||y){if(y=ye,y!==null&&(u=o&-o,u=(u&42)!==0?1:vS(u),u=(u&(y.suspendedLanes|o))!==0?0:u,u!==0&&u!==T.retryLane))throw T.retryLane=u,Zc(r,u),Lr(y,r,u),UM;_.data==="$?"||r0(),i=L1(r,i,o)}else _.data==="$?"?(i.flags|=192,i.child=r.child,i=null):(r=T.treeContext,Ce=_s(_.nextSibling),nr=i,ie=!0,bo=null,qs=!1,r!==null&&(Zr[Wr++]=Si,Zr[Wr++]=vi,Zr[Wr++]=go,Si=r.id,vi=r.overflow,go=i),i=U1(i,u.children),i.flags|=4096);return i}return f?(_a(),f=u.fallback,_=i.mode,T=r.child,I=T.sibling,u=_i(T,{mode:"hidden",children:u.children}),u.subtreeFlags=T.subtreeFlags&65011712,I!==null?f=_i(I,f):(f=po(f,_,o,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,_=r.child.memoizedState,_===null?_=D1(o):(T=_.cachePool,T!==null?(I=cn._currentValue,T=T.parent!==I?{parent:I,pool:I}:T):T=xk(),_={baseLanes:_.baseLanes|o,cachePool:T}),f.memoizedState=_,f.childLanes=z1(r,y,o),i.memoizedState=F1,u):(ba(i),o=r.child,r=o.sibling,o=_i(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(y=i.deletions,y===null?(i.deletions=[r],i.flags|=16):y.push(r)),i.child=o,i.memoizedState=null,o)}function U1(r,i){return i=zp({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function zp(r,i){return r=Ir(22,r,null,i),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function L1(r,i,o){return uu(i,r.child,null,o),r=U1(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function GM(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),r1(r.return,i,o)}function j1(r,i,o,u,f){var h=r.memoizedState;h===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(h.isBackwards=i,h.rendering=null,h.renderingStartTime=0,h.last=u,h.tail=o,h.tailMode=f)}function JM(r,i,o){var u=i.pendingProps,f=u.revealOrder,h=u.tail;if(Cn(r,i,u.children,o),u=un.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)t:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&GM(r,o,i);else if(r.tag===19)GM(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(it(un,u),f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&xp(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),j1(i,!1,f,o,h);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&xp(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}j1(i,!0,o,null,h);break;case"together":j1(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Oi(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Ea|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Bf(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,o=_i(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=_i(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function P1(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&yp(r)))}function a5(r,i,o){switch(i.tag){case 3:$e(i,i.stateNode.containerInfo),da(i,cn,r.memoizedState.cache),Pf();break;case 27:case 5:gS(i);break;case 4:$e(i,i.stateNode.containerInfo);break;case 10:da(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ba(i),i.flags|=128,null):(o&i.child.childLanes)!==0?YM(r,i,o):(ba(i),r=Oi(r,i,o),r!==null?r.sibling:null);ba(i);break;case 19:var f=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Bf(r,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return JM(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),it(un,un.current),u)break;return null;case 22:case 23:return i.lanes=0,qM(r,i,o);case 24:da(i,cn,r.memoizedState.cache)}return Oi(r,i,o)}function QM(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)_n=!0;else{if(!P1(r,o)&&(i.flags&128)===0)return _n=!1,a5(r,i,o);_n=(r.flags&131072)!==0}else _n=!1,ie&&(i.flags&1048576)!==0&&Ok(i,gp,i.index);switch(i.lanes=0,i.tag){case 16:t:{r=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")QS(u)?(r=Eo(u,r),i.tag=1,i=HM(null,i,u,r,o)):(i.tag=0,i=I1(null,i,u,r,o));else{if(u!=null){if(f=u.$$typeof,f===P){i.tag=11,i=LM(null,i,u,r,o);break t}else if(f===K){i.tag=14,i=jM(null,i,u,r,o);break t}}throw i=ut(u)||u,Error(s(306,i,""))}}return i;case 0:return I1(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=Eo(u,i.pendingProps),HM(r,i,u,f,o);case 3:t:{if($e(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var h=i.memoizedState;f=h.element,l1(r,i),Qf(i,u,null,o);var y=i.memoizedState;if(u=y.cache,da(i,cn,u),u!==h.cache&&s1(i,[cn],o,!0),Jf(),u=y.element,h.isDehydrated)if(h={element:u,isDehydrated:!1,cache:y.cache},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){i=VM(r,i,u,o);break t}else if(u!==f){f=Qr(Error(s(424)),i),qf(f),i=VM(r,i,u,o);break t}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ce=_s(r.firstChild),nr=i,ie=!0,bo=null,qs=!0,o=kM(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Pf(),u===f){i=Oi(r,i,o);break t}Cn(r,i,u,o)}i=i.child}return i;case 26:return Dp(r,i),r===null?(o=tA(i.type,null,i.pendingProps,null))?i.memoizedState=o:ie||(o=i.type,r=i.pendingProps,u=Xp(Tt.current).createElement(o),u[Vn]=i,u[mr]=r,xn(u,o,r),bn(u),i.stateNode=u):i.memoizedState=tA(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return gS(i),r===null&&ie&&(u=i.stateNode=X2(i.type,i.pendingProps,Tt.current),nr=i,qs=!0,f=Ce,ka(i.type)?(v0=f,Ce=_s(u.firstChild)):Ce=f),Cn(r,i,i.pendingProps.children,o),Dp(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&ie&&((f=u=Ce)&&(u=I5(u,i.type,i.pendingProps,qs),u!==null?(i.stateNode=u,nr=i,Ce=_s(u.firstChild),qs=!1,f=!0):f=!1),f||_o(i)),gS(i),f=i.type,h=i.pendingProps,y=r!==null?r.memoizedProps:null,u=h.children,y0(f,h)?u=null:y!==null&&y0(f,y)&&(i.flags|=32),i.memoizedState!==null&&(f=g1(r,i,ZB,null,null,o),bh._currentValue=f),Dp(r,i),Cn(r,i,u,o),i.child;case 6:return r===null&&ie&&((r=o=Ce)&&(o=F5(o,i.pendingProps,qs),o!==null?(i.stateNode=o,nr=i,Ce=null,r=!0):r=!1),r||_o(i)),null;case 13:return YM(r,i,o);case 4:return $e(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=uu(i,null,u,o):Cn(r,i,u,o),i.child;case 11:return LM(r,i,i.type,i.pendingProps,o);case 7:return Cn(r,i,i.pendingProps,o),i.child;case 8:return Cn(r,i,i.pendingProps.children,o),i.child;case 12:return Cn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,da(i,i.type,u.value),Cn(r,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,vo(i),f=Yn(f),u=u(f),i.flags|=1,Cn(r,i,u,o),i.child;case 14:return jM(r,i,i.type,i.pendingProps,o);case 15:return PM(r,i,i.type,i.pendingProps,o);case 19:return JM(r,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},r===null?(o=zp(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=_i(r.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return qM(r,i,o);case 24:return vo(i),u=Yn(cn),r===null?(f=o1(),f===null&&(f=ye,h=i1(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=o),f=h),i.memoizedState={parent:u,cache:f},u1(i),da(i,cn,f)):((r.lanes&o)!==0&&(l1(r,i),Qf(i,null,null,o),Jf()),f=r.memoizedState,h=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),da(i,cn,u)):(u=h.cache,da(i,cn,u),u!==f.cache&&s1(i,[cn],o,!0))),Cn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ri(r){r.flags|=4}function XM(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!iA(i)){if(i=ts.current,i!==null&&((Zt&4194048)===Zt?Bs!==null:(Zt&62914560)!==Zt&&(Zt&536870912)===0||i!==Bs))throw Yf=c1,Ik;r.flags|=8192}}function Up(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?MR():536870912,r.lanes|=i,du|=i)}function rh(r,i){if(!ie)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Oe(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function o5(r,i,o){var u=i.pendingProps;switch(t1(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(i),null;case 1:return Oe(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),wi(cn),ua(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(jf(i)?Ri(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Mk())),Oe(i),null;case 26:return o=i.memoizedState,r===null?(Ri(i),o!==null?(Oe(i),XM(i,o)):(Oe(i),i.flags&=-16777217)):o?o!==r.memoizedState?(Ri(i),Oe(i),XM(i,o)):(Oe(i),i.flags&=-16777217):(r.memoizedProps!==u&&Ri(i),Oe(i),i.flags&=-16777217),null;case 27:Jm(i),o=Tt.current;var f=i.type;if(r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Ri(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Oe(i),null}r=pt.current,jf(i)?Rk(i):(r=X2(f,u,o),i.stateNode=r,Ri(i))}return Oe(i),null;case 5:if(Jm(i),o=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Ri(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Oe(i),null}if(r=pt.current,jf(i))Rk(i);else{switch(f=Xp(Tt.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}r[Vn]=i,r[mr]=u;t:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break t;for(;f.sibling===null;){if(f.return===null||f.return===i)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=r;t:switch(xn(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break t;case"img":r=!0;break t;default:r=!1}r&&Ri(i)}}return Oe(i),i.flags&=-16777217,null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Ri(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=Tt.current,jf(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,f=nr,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Vn]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||K2(r.nodeValue,o)),r||_o(i)}else r=Xp(r).createTextNode(u),r[Vn]=i,i.stateNode=r}return Oe(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=jf(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Vn]=i}else Pf(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Oe(i),f=!1}else f=Mk(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Ti(i),i):(Ti(i),null)}if(Ti(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var h=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(h=u.memoizedState.cachePool.pool),h!==f&&(u.flags|=2048)}return o!==r&&o&&(i.child.flags|=8192),Up(i,i.updateQueue),Oe(i),null;case 4:return ua(),r===null&&h0(i.stateNode.containerInfo),Oe(i),null;case 10:return wi(i.type),Oe(i),null;case 19:if(ot(un),f=i.memoizedState,f===null)return Oe(i),null;if(u=(i.flags&128)!==0,h=f.rendering,h===null)if(u)rh(f,!1);else{if(Ne!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(h=xp(r),h!==null){for(i.flags|=128,rh(f,!1),r=h.updateQueue,i.updateQueue=r,Up(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)Tk(o,r),o=o.sibling;return it(un,un.current&1|2),i.child}r=r.sibling}f.tail!==null&&Ps()>Pp&&(i.flags|=128,u=!0,rh(f,!1),i.lanes=4194304)}else{if(!u)if(r=xp(h),r!==null){if(i.flags|=128,u=!0,r=r.updateQueue,i.updateQueue=r,Up(i,r),rh(f,!0),f.tail===null&&f.tailMode==="hidden"&&!h.alternate&&!ie)return Oe(i),null}else 2*Ps()-f.renderingStartTime>Pp&&o!==536870912&&(i.flags|=128,u=!0,rh(f,!1),i.lanes=4194304);f.isBackwards?(h.sibling=i.child,i.child=h):(r=f.last,r!==null?r.sibling=h:i.child=h,f.last=h)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Ps(),i.sibling=null,r=un.current,it(un,u?r&1|2:r&1),i):(Oe(i),null);case 22:case 23:return Ti(i),m1(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Oe(i),i.subtreeFlags&6&&(i.flags|=8192)):Oe(i),o=i.updateQueue,o!==null&&Up(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&ot($o),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),wi(cn),Oe(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function c5(r,i){switch(t1(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return wi(cn),ua(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Jm(i),null;case 13:if(Ti(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Pf()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ot(un),null;case 4:return ua(),null;case 10:return wi(i.type),null;case 22:case 23:return Ti(i),m1(),r!==null&&ot($o),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return wi(cn),null;case 25:return null;default:return null}}function ZM(r,i){switch(t1(i),i.tag){case 3:wi(cn),ua();break;case 26:case 27:case 5:Jm(i);break;case 4:ua();break;case 13:Ti(i);break;case 19:ot(un);break;case 10:wi(i.type);break;case 22:case 23:Ti(i),m1(),r!==null&&ot($o);break;case 24:wi(cn)}}function sh(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var h=o.create,y=o.inst;u=h(),y.destroy=u}o=o.next}while(o!==f)}}catch(_){ge(i,i.return,_)}}function Sa(r,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var h=f.next;u=h;do{if((u.tag&r)===r){var y=u.inst,_=y.destroy;if(_!==void 0){y.destroy=void 0,f=i;var T=o,I=_;try{I()}catch(H){ge(f,T,H)}}}u=u.next}while(u!==h)}}catch(H){ge(i,i.return,H)}}function WM(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{jk(i,o)}catch(u){ge(r,r.return,u)}}}function t2(r,i,o){o.props=Eo(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){ge(r,i,u)}}function ih(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){ge(r,i,f)}}function Ks(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ge(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ge(r,i,f)}else o.current=null}function e2(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ge(r,r.return,f)}}function q1(r,i,o){try{var u=r.stateNode;M5(u,r.type,o,i),u[mr]=i}catch(f){ge(r,r.return,f)}}function n2(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ka(r.type)||r.tag===4}function B1(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||n2(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ka(r.type)||r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function K1(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Qp));else if(u!==4&&(u===27&&ka(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(K1(r,i,o),r=r.sibling;r!==null;)K1(r,i,o),r=r.sibling}function Lp(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&ka(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Lp(r,i,o),r=r.sibling;r!==null;)Lp(r,i,o),r=r.sibling}function r2(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);xn(i,u,o),i[Vn]=r,i[mr]=o}catch(h){ge(r,r.return,h)}}var ki=!1,qe=!1,H1=!1,s2=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function u5(r,i){if(r=r.containerInfo,p0=rg,r=pk(r),BS(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else t:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{o.nodeType,h.nodeType}catch{o=null;break t}var y=0,_=-1,T=-1,I=0,H=0,J=r,L=null;e:for(;;){for(var j;J!==o||f!==0&&J.nodeType!==3||(_=y+f),J!==h||u!==0&&J.nodeType!==3||(T=y+u),J.nodeType===3&&(y+=J.nodeValue.length),(j=J.firstChild)!==null;)L=J,J=j;for(;;){if(J===r)break e;if(L===o&&++I===f&&(_=y),L===h&&++H===u&&(T=y),(j=J.nextSibling)!==null)break;J=L,L=J.parentNode}J=j}o=_===-1||T===-1?null:{start:_,end:T}}else o=null}o=o||{start:0,end:0}}else o=null;for(g0={focusedElem:r,selectionRange:o},rg=!1,Sn=i;Sn!==null;)if(i=Sn,r=i.child,(i.subtreeFlags&1024)!==0&&r!==null)r.return=i,Sn=r;else for(;Sn!==null;){switch(i=Sn,h=i.alternate,r=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&h!==null){r=void 0,o=i,f=h.memoizedProps,h=h.memoizedState,u=o.stateNode;try{var $t=Eo(o.type,f,o.elementType===o.type);r=u.getSnapshotBeforeUpdate($t,h),u.__reactInternalSnapshotBeforeUpdate=r}catch(gt){ge(o,o.return,gt)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)_0(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":_0(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Sn=r;break}Sn=i.return}}function i2(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:va(r,o),u&4&&sh(5,o);break;case 1:if(va(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(y){ge(o,o.return,y)}else{var f=Eo(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(y){ge(o,o.return,y)}}u&64&&WM(o),u&512&&ih(o,o.return);break;case 3:if(va(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{jk(r,i)}catch(y){ge(o,o.return,y)}}break;case 27:i===null&&u&4&&r2(o);case 26:case 5:va(r,o),i===null&&u&4&&e2(o),u&512&&ih(o,o.return);break;case 12:va(r,o);break;case 13:va(r,o),u&4&&c2(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=b5.bind(null,o),D5(r,o))));break;case 22:if(u=o.memoizedState!==null||ki,!u){i=i!==null&&i.memoizedState!==null||qe,f=ki;var h=qe;ki=u,(qe=i)&&!h?$a(r,o,(o.subtreeFlags&8772)!==0):va(r,o),ki=f,qe=h}break;case 30:break;default:va(r,o)}}function a2(r){var i=r.alternate;i!==null&&(r.alternate=null,a2(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&ES(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var we=null,yr=!1;function Mi(r,i,o){for(o=o.child;o!==null;)o2(r,i,o),o=o.sibling}function o2(r,i,o){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(Of,o)}catch{}switch(o.tag){case 26:qe||Ks(o,i),Mi(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:qe||Ks(o,i);var u=we,f=yr;ka(o.type)&&(we=o.stateNode,yr=!1),Mi(r,i,o),mh(o.stateNode),we=u,yr=f;break;case 5:qe||Ks(o,i);case 6:if(u=we,f=yr,we=null,Mi(r,i,o),we=u,yr=f,we!==null)if(yr)try{(we.nodeType===9?we.body:we.nodeName==="HTML"?we.ownerDocument.body:we).removeChild(o.stateNode)}catch(h){ge(o,i,h)}else try{we.removeChild(o.stateNode)}catch(h){ge(o,i,h)}break;case 18:we!==null&&(yr?(r=we,J2(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),$h(r)):J2(we,o.stateNode));break;case 4:u=we,f=yr,we=o.stateNode.containerInfo,yr=!0,Mi(r,i,o),we=u,yr=f;break;case 0:case 11:case 14:case 15:qe||Sa(2,o,i),qe||Sa(4,o,i),Mi(r,i,o);break;case 1:qe||(Ks(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&t2(o,i,u)),Mi(r,i,o);break;case 21:Mi(r,i,o);break;case 22:qe=(u=qe)||o.memoizedState!==null,Mi(r,i,o),qe=u;break;default:Mi(r,i,o)}}function c2(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{$h(r)}catch(o){ge(i,i.return,o)}}function l5(r){switch(r.tag){case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new s2),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new s2),i;default:throw Error(s(435,r.tag))}}function V1(r,i){var o=l5(r);i.forEach(function(u){var f=_5.bind(null,r,u);o.has(u)||(o.add(u),u.then(f,f))})}function Fr(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],h=r,y=i,_=y;t:for(;_!==null;){switch(_.tag){case 27:if(ka(_.type)){we=_.stateNode,yr=!1;break t}break;case 5:we=_.stateNode,yr=!1;break t;case 3:case 4:we=_.stateNode.containerInfo,yr=!0;break t}_=_.return}if(we===null)throw Error(s(160));o2(h,y,f),we=null,yr=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)u2(i,r),i=i.sibling}var bs=null;function u2(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Fr(i,r),Dr(r),u&4&&(Sa(3,r,r.return),sh(3,r),Sa(5,r,r.return));break;case 1:Fr(i,r),Dr(r),u&512&&(qe||o===null||Ks(o,o.return)),u&64&&ki&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=bs;if(Fr(i,r),Dr(r),u&512&&(qe||o===null||Ks(o,o.return)),u&4){var h=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){t:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":h=f.getElementsByTagName("title")[0],(!h||h[Mf]||h[Vn]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(u),f.head.insertBefore(h,f.querySelector("head > title"))),xn(h,u,o),h[Vn]=r,bn(h),u=h;break t;case"link":var y=rA("link","href",f).get(u+(o.href||""));if(y){for(var _=0;_<y.length;_++)if(h=y[_],h.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&h.getAttribute("rel")===(o.rel==null?null:o.rel)&&h.getAttribute("title")===(o.title==null?null:o.title)&&h.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){y.splice(_,1);break e}}h=f.createElement(u),xn(h,u,o),f.head.appendChild(h);break;case"meta":if(y=rA("meta","content",f).get(u+(o.content||""))){for(_=0;_<y.length;_++)if(h=y[_],h.getAttribute("content")===(o.content==null?null:""+o.content)&&h.getAttribute("name")===(o.name==null?null:o.name)&&h.getAttribute("property")===(o.property==null?null:o.property)&&h.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&h.getAttribute("charset")===(o.charSet==null?null:o.charSet)){y.splice(_,1);break e}}h=f.createElement(u),xn(h,u,o),f.head.appendChild(h);break;default:throw Error(s(468,u))}h[Vn]=r,bn(h),u=h}r.stateNode=u}else sA(f,r.type,r.stateNode);else r.stateNode=nA(f,u,r.memoizedProps);else h!==u?(h===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):h.count--,u===null?sA(f,r.type,r.stateNode):nA(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&q1(r,r.memoizedProps,o.memoizedProps)}break;case 27:Fr(i,r),Dr(r),u&512&&(qe||o===null||Ks(o,o.return)),o!==null&&u&4&&q1(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Fr(i,r),Dr(r),u&512&&(qe||o===null||Ks(o,o.return)),r.flags&32){f=r.stateNode;try{Hc(f,"")}catch(j){ge(r,r.return,j)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,q1(r,f,o!==null?o.memoizedProps:f)),u&1024&&(H1=!0);break;case 6:if(Fr(i,r),Dr(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(j){ge(r,r.return,j)}}break;case 3:if(tg=null,f=bs,bs=Zp(i.containerInfo),Fr(i,r),bs=f,Dr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{$h(i.containerInfo)}catch(j){ge(r,r.return,j)}H1&&(H1=!1,l2(r));break;case 4:u=bs,bs=Zp(r.stateNode.containerInfo),Fr(i,r),Dr(r),bs=u;break;case 12:Fr(i,r),Dr(r);break;case 13:Fr(i,r),Dr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Z1=Ps()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,V1(r,u)));break;case 22:f=r.memoizedState!==null;var T=o!==null&&o.memoizedState!==null,I=ki,H=qe;if(ki=I||f,qe=H||T,Fr(i,r),qe=H,ki=I,Dr(r),u&8192)t:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||T||ki||qe||To(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){T=o=i;try{if(h=T.stateNode,f)y=h.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{_=T.stateNode;var J=T.memoizedProps.style,L=J!=null&&J.hasOwnProperty("display")?J.display:null;_.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(j){ge(T,T.return,j)}}}else if(i.tag===6){if(o===null){T=i;try{T.stateNode.nodeValue=f?"":T.memoizedProps}catch(j){ge(T,T.return,j)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,V1(r,o))));break;case 19:Fr(i,r),Dr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,V1(r,u)));break;case 30:break;case 21:break;default:Fr(i,r),Dr(r)}}function Dr(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(n2(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,h=B1(r);Lp(r,h,f);break;case 5:var y=o.stateNode;o.flags&32&&(Hc(y,""),o.flags&=-33);var _=B1(r);Lp(r,_,y);break;case 3:case 4:var T=o.stateNode.containerInfo,I=B1(r);K1(r,I,T);break;default:throw Error(s(161))}}catch(H){ge(r,r.return,H)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function l2(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;l2(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function va(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)i2(r,i.alternate,i),i=i.sibling}function To(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Sa(4,i,i.return),To(i);break;case 1:Ks(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&t2(i,i.return,o),To(i);break;case 27:mh(i.stateNode);case 26:case 5:Ks(i,i.return),To(i);break;case 22:i.memoizedState===null&&To(i);break;case 30:To(i);break;default:To(i)}r=r.sibling}}function $a(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,h=i,y=h.flags;switch(h.tag){case 0:case 11:case 15:$a(f,h,o),sh(4,h);break;case 1:if($a(f,h,o),u=h,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(I){ge(u,u.return,I)}if(u=h,f=u.updateQueue,f!==null){var _=u.stateNode;try{var T=f.shared.hiddenCallbacks;if(T!==null)for(f.shared.hiddenCallbacks=null,f=0;f<T.length;f++)Lk(T[f],_)}catch(I){ge(u,u.return,I)}}o&&y&64&&WM(h),ih(h,h.return);break;case 27:r2(h);case 26:case 5:$a(f,h,o),o&&u===null&&y&4&&e2(h),ih(h,h.return);break;case 12:$a(f,h,o);break;case 13:$a(f,h,o),o&&y&4&&c2(f,h);break;case 22:h.memoizedState===null&&$a(f,h,o),ih(h,h.return);break;case 30:break;default:$a(f,h,o)}i=i.sibling}}function Y1(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Kf(o))}function G1(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Kf(r))}function Hs(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)f2(r,i,o,u),i=i.sibling}function f2(r,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Hs(r,i,o,u),f&2048&&sh(9,i);break;case 1:Hs(r,i,o,u);break;case 3:Hs(r,i,o,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Kf(r)));break;case 12:if(f&2048){Hs(r,i,o,u),r=i.stateNode;try{var h=i.memoizedProps,y=h.id,_=h.onPostCommit;typeof _=="function"&&_(y,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(T){ge(i,i.return,T)}}else Hs(r,i,o,u);break;case 13:Hs(r,i,o,u);break;case 23:break;case 22:h=i.stateNode,y=i.alternate,i.memoizedState!==null?h._visibility&2?Hs(r,i,o,u):ah(r,i):h._visibility&2?Hs(r,i,o,u):(h._visibility|=2,lu(r,i,o,u,(i.subtreeFlags&10256)!==0)),f&2048&&Y1(y,i);break;case 24:Hs(r,i,o,u),f&2048&&G1(i.alternate,i);break;default:Hs(r,i,o,u)}}function lu(r,i,o,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var h=r,y=i,_=o,T=u,I=y.flags;switch(y.tag){case 0:case 11:case 15:lu(h,y,_,T,f),sh(8,y);break;case 23:break;case 22:var H=y.stateNode;y.memoizedState!==null?H._visibility&2?lu(h,y,_,T,f):ah(h,y):(H._visibility|=2,lu(h,y,_,T,f)),f&&I&2048&&Y1(y.alternate,y);break;case 24:lu(h,y,_,T,f),f&&I&2048&&G1(y.alternate,y);break;default:lu(h,y,_,T,f)}i=i.sibling}}function ah(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,f=u.flags;switch(u.tag){case 22:ah(o,u),f&2048&&Y1(u.alternate,u);break;case 24:ah(o,u),f&2048&&G1(u.alternate,u);break;default:ah(o,u)}i=i.sibling}}var oh=8192;function fu(r){if(r.subtreeFlags&oh)for(r=r.child;r!==null;)h2(r),r=r.sibling}function h2(r){switch(r.tag){case 26:fu(r),r.flags&oh&&r.memoizedState!==null&&J5(bs,r.memoizedState,r.memoizedProps);break;case 5:fu(r);break;case 3:case 4:var i=bs;bs=Zp(r.stateNode.containerInfo),fu(r),bs=i;break;case 22:r.memoizedState===null&&(i=r.alternate,i!==null&&i.memoizedState!==null?(i=oh,oh=16777216,fu(r),oh=i):fu(r));break;default:fu(r)}}function d2(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function ch(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Sn=u,p2(u,r)}d2(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)m2(r),r=r.sibling}function m2(r){switch(r.tag){case 0:case 11:case 15:ch(r),r.flags&2048&&Sa(9,r,r.return);break;case 3:ch(r);break;case 12:ch(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,jp(r)):ch(r);break;default:ch(r)}}function jp(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Sn=u,p2(u,r)}d2(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Sa(8,i,i.return),jp(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,jp(i));break;default:jp(i)}r=r.sibling}}function p2(r,i){for(;Sn!==null;){var o=Sn;switch(o.tag){case 0:case 11:case 15:Sa(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Kf(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Sn=u;else t:for(o=r;Sn!==null;){u=Sn;var f=u.sibling,h=u.return;if(a2(u),u===o){Sn=null;break t}if(f!==null){f.return=h,Sn=f;break t}Sn=h}}}var f5={getCacheForType:function(r){var i=Yn(cn),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o}},h5=typeof WeakMap=="function"?WeakMap:Map,ae=0,ye=null,Vt=null,Zt=0,oe=0,zr=null,wa=!1,hu=!1,J1=!1,Ai=0,Ne=0,Ea=0,Oo=0,Q1=0,es=0,du=0,uh=null,br=null,X1=!1,Z1=0,Pp=1/0,qp=null,Ta=null,Nn=0,Oa=null,mu=null,pu=0,W1=0,t0=null,g2=null,lh=0,e0=null;function Ur(){if((ae&2)!==0&&Zt!==0)return Zt&-Zt;if(z.T!==null){var r=nu;return r!==0?r:c0()}return NR()}function y2(){es===0&&(es=(Zt&536870912)===0||ie?kR():536870912);var r=ts.current;return r!==null&&(r.flags|=32),es}function Lr(r,i,o){(r===ye&&(oe===2||oe===9)||r.cancelPendingCommit!==null)&&(gu(r,0),Ra(r,Zt,es,!1)),kf(r,o),((ae&2)===0||r!==ye)&&(r===ye&&((ae&2)===0&&(Oo|=o),Ne===4&&Ra(r,Zt,es,!1)),Vs(r))}function b2(r,i,o){if((ae&6)!==0)throw Error(s(327));var u=!o&&(i&124)===0&&(i&r.expiredLanes)===0||Rf(r,i),f=u?p5(r,i):s0(r,i,!0),h=u;do{if(f===0){hu&&!u&&Ra(r,i,0,!1);break}else{if(o=r.current.alternate,h&&!d5(o)){f=s0(r,i,!1),h=!1;continue}if(f===2){if(h=i,r.errorRecoveryDisabledLanes&h)var y=0;else y=r.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){i=y;t:{var _=r;f=uh;var T=_.current.memoizedState.isDehydrated;if(T&&(gu(_,y).flags|=256),y=s0(_,y,!1),y!==2){if(J1&&!T){_.errorRecoveryDisabledLanes|=h,Oo|=h,f=4;break t}h=br,br=f,h!==null&&(br===null?br=h:br.push.apply(br,h))}f=y}if(h=!1,f!==2)continue}}if(f===1){gu(r,0),Ra(r,i,0,!0);break}t:{switch(u=r,h=f,h){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ra(u,i,es,!wa);break t;case 2:br=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=Z1+300-Ps(),10<f)){if(Ra(u,i,es,!wa),Wm(u,0,!0)!==0)break t;u.timeoutHandle=Y2(_2.bind(null,u,o,br,qp,X1,i,es,Oo,du,wa,h,2,-0,0),f);break t}_2(u,o,br,qp,X1,i,es,Oo,du,wa,h,0,-0,0)}}break}while(!0);Vs(r)}function _2(r,i,o,u,f,h,y,_,T,I,H,J,L,j){if(r.timeoutHandle=-1,J=i.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(yh={stylesheets:null,count:0,unsuspend:G5},h2(i),J=Q5(),J!==null)){r.cancelPendingCommit=J(O2.bind(null,r,i,h,o,u,f,y,_,T,H,1,L,j)),Ra(r,h,y,!I);return}O2(r,i,h,o,u,f,y,_,T)}function d5(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],h=f.getSnapshot;f=f.value;try{if(!xr(h(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ra(r,i,o,u){i&=~Q1,i&=~Oo,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var h=31-Nr(f),y=1<<h;u[h]=-1,f&=~y}o!==0&&AR(r,o,i)}function Bp(){return(ae&6)===0?(fh(0),!1):!0}function n0(){if(Vt!==null){if(oe===0)var r=Vt.return;else r=Vt,$i=So=null,_1(r),cu=null,eh=0,r=Vt;for(;r!==null;)ZM(r.alternate,r),r=r.return;Vt=null}}function gu(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,C5(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),n0(),ye=r,Vt=o=_i(r.current,null),Zt=i,oe=0,zr=null,wa=!1,hu=Rf(r,i),J1=!1,du=es=Q1=Oo=Ea=Ne=0,br=uh=null,X1=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-Nr(u),h=1<<f;i|=r[f],u&=~h}return Ai=i,fp(),o}function S2(r,i){Bt=null,z.H=Ap,i===Vf||i===Sp?(i=zk(),oe=3):i===Ik?(i=zk(),oe=4):oe=i===UM?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,zr=i,Vt===null&&(Ne=1,Fp(r,Qr(i,r.current)))}function v2(){var r=z.H;return z.H=Ap,r===null?Ap:r}function $2(){var r=z.A;return z.A=f5,r}function r0(){Ne=4,wa||(Zt&4194048)!==Zt&&ts.current!==null||(hu=!0),(Ea&134217727)===0&&(Oo&134217727)===0||ye===null||Ra(ye,Zt,es,!1)}function s0(r,i,o){var u=ae;ae|=2;var f=v2(),h=$2();(ye!==r||Zt!==i)&&(qp=null,gu(r,i)),i=!1;var y=Ne;t:do try{if(oe!==0&&Vt!==null){var _=Vt,T=zr;switch(oe){case 8:n0(),y=6;break t;case 3:case 2:case 9:case 6:ts.current===null&&(i=!0);var I=oe;if(oe=0,zr=null,yu(r,_,T,I),o&&hu){y=0;break t}break;default:I=oe,oe=0,zr=null,yu(r,_,T,I)}}m5(),y=Ne;break}catch(H){S2(r,H)}while(!0);return i&&r.shellSuspendCounter++,$i=So=null,ae=u,z.H=f,z.A=h,Vt===null&&(ye=null,Zt=0,fp()),y}function m5(){for(;Vt!==null;)w2(Vt)}function p5(r,i){var o=ae;ae|=2;var u=v2(),f=$2();ye!==r||Zt!==i?(qp=null,Pp=Ps()+500,gu(r,i)):hu=Rf(r,i);t:do try{if(oe!==0&&Vt!==null){i=Vt;var h=zr;e:switch(oe){case 1:oe=0,zr=null,yu(r,i,h,1);break;case 2:case 9:if(Fk(h)){oe=0,zr=null,E2(i);break}i=function(){oe!==2&&oe!==9||ye!==r||(oe=7),Vs(r)},h.then(i,i);break t;case 3:oe=7;break t;case 4:oe=5;break t;case 7:Fk(h)?(oe=0,zr=null,E2(i)):(oe=0,zr=null,yu(r,i,h,7));break;case 5:var y=null;switch(Vt.tag){case 26:y=Vt.memoizedState;case 5:case 27:var _=Vt;if(!y||iA(y)){oe=0,zr=null;var T=_.sibling;if(T!==null)Vt=T;else{var I=_.return;I!==null?(Vt=I,Kp(I)):Vt=null}break e}}oe=0,zr=null,yu(r,i,h,5);break;case 6:oe=0,zr=null,yu(r,i,h,6);break;case 8:n0(),Ne=6;break t;default:throw Error(s(462))}}g5();break}catch(H){S2(r,H)}while(!0);return $i=So=null,z.H=u,z.A=f,ae=o,Vt!==null?0:(ye=null,Zt=0,fp(),Ne)}function g5(){for(;Vt!==null&&!Uq();)w2(Vt)}function w2(r){var i=QM(r.alternate,r,Ai);r.memoizedProps=r.pendingProps,i===null?Kp(r):Vt=i}function E2(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=KM(o,i,i.pendingProps,i.type,void 0,Zt);break;case 11:i=KM(o,i,i.pendingProps,i.type.render,i.ref,Zt);break;case 5:_1(i);default:ZM(o,i),i=Vt=Tk(i,Ai),i=QM(o,i,Ai)}r.memoizedProps=r.pendingProps,i===null?Kp(r):Vt=i}function yu(r,i,o,u){$i=So=null,_1(i),cu=null,eh=0;var f=i.return;try{if(i5(r,f,i,o,Zt)){Ne=1,Fp(r,Qr(o,r.current)),Vt=null;return}}catch(h){if(f!==null)throw Vt=f,h;Ne=1,Fp(r,Qr(o,r.current)),Vt=null;return}i.flags&32768?(ie||u===1?r=!0:hu||(Zt&536870912)!==0?r=!1:(wa=r=!0,(u===2||u===9||u===3||u===6)&&(u=ts.current,u!==null&&u.tag===13&&(u.flags|=16384))),T2(i,r)):Kp(i)}function Kp(r){var i=r;do{if((i.flags&32768)!==0){T2(i,wa);return}r=i.return;var o=o5(i.alternate,i,Ai);if(o!==null){Vt=o;return}if(i=i.sibling,i!==null){Vt=i;return}Vt=i=r}while(i!==null);Ne===0&&(Ne=5)}function T2(r,i){do{var o=c5(r.alternate,r);if(o!==null){o.flags&=32767,Vt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){Vt=r;return}Vt=r=o}while(r!==null);Ne=6,Vt=null}function O2(r,i,o,u,f,h,y,_,T){r.cancelPendingCommit=null;do Hp();while(Nn!==0);if((ae&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(h=i.lanes|i.childLanes,h|=GS,Gq(r,o,h,y,_,T),r===ye&&(Vt=ye=null,Zt=0),mu=i,Oa=r,pu=o,W1=h,t0=f,g2=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,S5(Qm,function(){return C2(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=z.T,z.T=null,f=G.p,G.p=2,y=ae,ae|=4;try{u5(r,i,o)}finally{ae=y,G.p=f,z.T=u}}Nn=1,R2(),k2(),M2()}}function R2(){if(Nn===1){Nn=0;var r=Oa,i=mu,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=z.T,z.T=null;var u=G.p;G.p=2;var f=ae;ae|=4;try{u2(i,r);var h=g0,y=pk(r.containerInfo),_=h.focusedElem,T=h.selectionRange;if(y!==_&&_&&_.ownerDocument&&mk(_.ownerDocument.documentElement,_)){if(T!==null&&BS(_)){var I=T.start,H=T.end;if(H===void 0&&(H=I),"selectionStart"in _)_.selectionStart=I,_.selectionEnd=Math.min(H,_.value.length);else{var J=_.ownerDocument||document,L=J&&J.defaultView||window;if(L.getSelection){var j=L.getSelection(),$t=_.textContent.length,gt=Math.min(T.start,$t),de=T.end===void 0?gt:Math.min(T.end,$t);!j.extend&&gt>de&&(y=de,de=gt,gt=y);var k=dk(_,gt),R=dk(_,de);if(k&&R&&(j.rangeCount!==1||j.anchorNode!==k.node||j.anchorOffset!==k.offset||j.focusNode!==R.node||j.focusOffset!==R.offset)){var x=J.createRange();x.setStart(k.node,k.offset),j.removeAllRanges(),gt>de?(j.addRange(x),j.extend(R.node,R.offset)):(x.setEnd(R.node,R.offset),j.addRange(x))}}}}for(J=[],j=_;j=j.parentNode;)j.nodeType===1&&J.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<J.length;_++){var V=J[_];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}rg=!!p0,g0=p0=null}finally{ae=f,G.p=u,z.T=o}}r.current=i,Nn=2}}function k2(){if(Nn===2){Nn=0;var r=Oa,i=mu,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=z.T,z.T=null;var u=G.p;G.p=2;var f=ae;ae|=4;try{i2(r,i.alternate,i)}finally{ae=f,G.p=u,z.T=o}}Nn=3}}function M2(){if(Nn===4||Nn===3){Nn=0,Lq();var r=Oa,i=mu,o=pu,u=g2;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nn=5:(Nn=0,mu=Oa=null,A2(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Ta=null),$S(o),i=i.stateNode,Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(Of,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=z.T,f=G.p,G.p=2,z.T=null;try{for(var h=r.onRecoverableError,y=0;y<u.length;y++){var _=u[y];h(_.value,{componentStack:_.stack})}}finally{z.T=i,G.p=f}}(pu&3)!==0&&Hp(),Vs(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===e0?lh++:(lh=0,e0=r):lh=0,fh(0)}}function A2(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Kf(i)))}function Hp(r){return R2(),k2(),M2(),C2()}function C2(){if(Nn!==5)return!1;var r=Oa,i=W1;W1=0;var o=$S(pu),u=z.T,f=G.p;try{G.p=32>o?32:o,z.T=null,o=t0,t0=null;var h=Oa,y=pu;if(Nn=0,mu=Oa=null,pu=0,(ae&6)!==0)throw Error(s(331));var _=ae;if(ae|=4,m2(h.current),f2(h,h.current,y,o),ae=_,fh(0,!1),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(Of,h)}catch{}return!0}finally{G.p=f,z.T=u,A2(r,i)}}function N2(r,i,o){i=Qr(o,i),i=x1(r.stateNode,i,2),r=ga(r,i,2),r!==null&&(kf(r,2),Vs(r))}function ge(r,i,o){if(r.tag===3)N2(r,r,o);else for(;i!==null;){if(i.tag===3){N2(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ta===null||!Ta.has(u))){r=Qr(o,r),o=DM(2),u=ga(i,o,2),u!==null&&(zM(o,u,i,r),kf(u,2),Vs(u));break}}i=i.return}}function i0(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new h5;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(J1=!0,f.add(o),r=y5.bind(null,r,i,o),i.then(r,r))}function y5(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,ye===r&&(Zt&o)===o&&(Ne===4||Ne===3&&(Zt&62914560)===Zt&&300>Ps()-Z1?(ae&2)===0&&gu(r,0):Q1|=o,du===Zt&&(du=0)),Vs(r)}function x2(r,i){i===0&&(i=MR()),r=Zc(r,i),r!==null&&(kf(r,i),Vs(r))}function b5(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),x2(r,o)}function _5(r,i){var o=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),x2(r,o)}function S5(r,i){return bS(r,i)}var Vp=null,bu=null,a0=!1,Yp=!1,o0=!1,Ro=0;function Vs(r){r!==bu&&r.next===null&&(bu===null?Vp=bu=r:bu=bu.next=r),Yp=!0,a0||(a0=!0,$5())}function fh(r,i){if(!o0&&Yp){o0=!0;do for(var o=!1,u=Vp;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var h=0;else{var y=u.suspendedLanes,_=u.pingedLanes;h=(1<<31-Nr(42|r)+1)-1,h&=f&~(y&~_),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(o=!0,z2(u,h))}else h=Zt,h=Wm(u,u===ye?h:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(h&3)===0||Rf(u,h)||(o=!0,z2(u,h));u=u.next}while(o);o0=!1}}function v5(){I2()}function I2(){Yp=a0=!1;var r=0;Ro!==0&&(A5()&&(r=Ro),Ro=0);for(var i=Ps(),o=null,u=Vp;u!==null;){var f=u.next,h=F2(u,i);h===0?(u.next=null,o===null?Vp=f:o.next=f,f===null&&(bu=o)):(o=u,(r!==0||(h&3)!==0)&&(Yp=!0)),u=f}fh(r)}function F2(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,h=r.pendingLanes&-62914561;0<h;){var y=31-Nr(h),_=1<<y,T=f[y];T===-1?((_&o)===0||(_&u)!==0)&&(f[y]=Yq(_,i)):T<=i&&(r.expiredLanes|=_),h&=~_}if(i=ye,o=Zt,o=Wm(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(oe===2||oe===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&_S(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Rf(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&_S(u),$S(o)){case 2:case 8:o=OR;break;case 32:o=Qm;break;case 268435456:o=RR;break;default:o=Qm}return u=D2.bind(null,r),o=bS(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&_S(u),r.callbackPriority=2,r.callbackNode=null,2}function D2(r,i){if(Nn!==0&&Nn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Hp()&&r.callbackNode!==o)return null;var u=Zt;return u=Wm(r,r===ye?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(b2(r,u,i),F2(r,Ps()),r.callbackNode!=null&&r.callbackNode===o?D2.bind(null,r):null)}function z2(r,i){if(Hp())return null;b2(r,i,!0)}function $5(){N5(function(){(ae&6)!==0?bS(TR,v5):I2()})}function c0(){return Ro===0&&(Ro=kR()),Ro}function U2(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:sp(""+r)}function L2(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function w5(r,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var h=U2((f[mr]||null).action),y=u.submitter;y&&(i=(i=y[mr]||null)?U2(i.formAction):y.getAttribute("formAction"),i!==null&&(h=i,y=null));var _=new cp("action","action",null,u,f);r.push({event:_,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ro!==0){var T=y?L2(f,y):new FormData(f);k1(o,{pending:!0,data:T,method:f.method,action:h},null,T)}}else typeof h=="function"&&(_.preventDefault(),T=y?L2(f,y):new FormData(f),k1(o,{pending:!0,data:T,method:f.method,action:h},h,T))},currentTarget:f}]})}}for(var u0=0;u0<YS.length;u0++){var l0=YS[u0],E5=l0.toLowerCase(),T5=l0[0].toUpperCase()+l0.slice(1);ys(E5,"on"+T5)}ys(bk,"onAnimationEnd"),ys(_k,"onAnimationIteration"),ys(Sk,"onAnimationStart"),ys("dblclick","onDoubleClick"),ys("focusin","onFocus"),ys("focusout","onBlur"),ys(qB,"onTransitionRun"),ys(BB,"onTransitionStart"),ys(KB,"onTransitionCancel"),ys(vk,"onTransitionEnd"),qc("onMouseEnter",["mouseout","mouseover"]),qc("onMouseLeave",["mouseout","mouseover"]),qc("onPointerEnter",["pointerout","pointerover"]),qc("onPointerLeave",["pointerout","pointerover"]),lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lo("onBeforeInput",["compositionend","keypress","textInput","paste"]),lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hh));function j2(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;t:{var h=void 0;if(i)for(var y=u.length-1;0<=y;y--){var _=u[y],T=_.instance,I=_.currentTarget;if(_=_.listener,T!==h&&f.isPropagationStopped())break t;h=_,f.currentTarget=I;try{h(f)}catch(H){Ip(H)}f.currentTarget=null,h=T}else for(y=0;y<u.length;y++){if(_=u[y],T=_.instance,I=_.currentTarget,_=_.listener,T!==h&&f.isPropagationStopped())break t;h=_,f.currentTarget=I;try{h(f)}catch(H){Ip(H)}f.currentTarget=null,h=T}}}}function Yt(r,i){var o=i[wS];o===void 0&&(o=i[wS]=new Set);var u=r+"__bubble";o.has(u)||(P2(i,r,2,!1),o.add(u))}function f0(r,i,o){var u=0;i&&(u|=4),P2(o,r,u,i)}var Gp="_reactListening"+Math.random().toString(36).slice(2);function h0(r){if(!r[Gp]){r[Gp]=!0,IR.forEach(function(o){o!=="selectionchange"&&(O5.has(o)||f0(o,!1,r),f0(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Gp]||(i[Gp]=!0,f0("selectionchange",!1,i))}}function P2(r,i,o,u){switch(fA(i)){case 2:var f=W5;break;case 8:f=tK;break;default:f=O0}o=f.bind(null,i,o,r),f=void 0,!IS||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function d0(r,i,o,u,f){var h=u;if((i&1)===0&&(i&2)===0&&u!==null)t:for(;;){if(u===null)return;var y=u.tag;if(y===3||y===4){var _=u.stateNode.containerInfo;if(_===f)break;if(y===4)for(y=u.return;y!==null;){var T=y.tag;if((T===3||T===4)&&y.stateNode.containerInfo===f)return;y=y.return}for(;_!==null;){if(y=Lc(_),y===null)return;if(T=y.tag,T===5||T===6||T===26||T===27){u=h=y;continue t}_=_.parentNode}}u=u.return}GR(function(){var I=h,H=NS(o),J=[];t:{var L=$k.get(r);if(L!==void 0){var j=cp,$t=r;switch(r){case"keypress":if(ap(o)===0)break t;case"keydown":case"keyup":j=SB;break;case"focusin":$t="focus",j=US;break;case"focusout":$t="blur",j=US;break;case"beforeblur":case"afterblur":j=US;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=XR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=cB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=wB;break;case bk:case _k:case Sk:j=fB;break;case vk:j=TB;break;case"scroll":case"scrollend":j=aB;break;case"wheel":j=RB;break;case"copy":case"cut":case"paste":j=dB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=WR;break;case"toggle":case"beforetoggle":j=MB}var gt=(i&4)!==0,de=!gt&&(r==="scroll"||r==="scrollend"),k=gt?L!==null?L+"Capture":null:L;gt=[];for(var R=I,x;R!==null;){var V=R;if(x=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||x===null||k===null||(V=Cf(R,k),V!=null&&gt.push(dh(R,V,x))),de)break;R=R.return}0<gt.length&&(L=new j(L,$t,null,o,H),J.push({event:L,listeners:gt}))}}if((i&7)===0){t:{if(L=r==="mouseover"||r==="pointerover",j=r==="mouseout"||r==="pointerout",L&&o!==CS&&($t=o.relatedTarget||o.fromElement)&&(Lc($t)||$t[Uc]))break t;if((j||L)&&(L=H.window===H?H:(L=H.ownerDocument)?L.defaultView||L.parentWindow:window,j?($t=o.relatedTarget||o.toElement,j=I,$t=$t?Lc($t):null,$t!==null&&(de=c($t),gt=$t.tag,$t!==de||gt!==5&&gt!==27&&gt!==6)&&($t=null)):(j=null,$t=I),j!==$t)){if(gt=XR,V="onMouseLeave",k="onMouseEnter",R="mouse",(r==="pointerout"||r==="pointerover")&&(gt=WR,V="onPointerLeave",k="onPointerEnter",R="pointer"),de=j==null?L:Af(j),x=$t==null?L:Af($t),L=new gt(V,R+"leave",j,o,H),L.target=de,L.relatedTarget=x,V=null,Lc(H)===I&&(gt=new gt(k,R+"enter",$t,o,H),gt.target=x,gt.relatedTarget=de,V=gt),de=V,j&&$t)e:{for(gt=j,k=$t,R=0,x=gt;x;x=_u(x))R++;for(x=0,V=k;V;V=_u(V))x++;for(;0<R-x;)gt=_u(gt),R--;for(;0<x-R;)k=_u(k),x--;for(;R--;){if(gt===k||k!==null&&gt===k.alternate)break e;gt=_u(gt),k=_u(k)}gt=null}else gt=null;j!==null&&q2(J,L,j,gt,!1),$t!==null&&de!==null&&q2(J,de,$t,gt,!0)}}t:{if(L=I?Af(I):window,j=L.nodeName&&L.nodeName.toLowerCase(),j==="select"||j==="input"&&L.type==="file")var ct=ok;else if(ik(L))if(ck)ct=LB;else{ct=zB;var Ht=DB}else j=L.nodeName,!j||j.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?I&&AS(I.elementType)&&(ct=ok):ct=UB;if(ct&&(ct=ct(r,I))){ak(J,ct,o,H);break t}Ht&&Ht(r,L,I),r==="focusout"&&I&&L.type==="number"&&I.memoizedProps.value!=null&&MS(L,"number",L.value)}switch(Ht=I?Af(I):window,r){case"focusin":(ik(Ht)||Ht.contentEditable==="true")&&(Jc=Ht,KS=I,Lf=null);break;case"focusout":Lf=KS=Jc=null;break;case"mousedown":HS=!0;break;case"contextmenu":case"mouseup":case"dragend":HS=!1,gk(J,o,H);break;case"selectionchange":if(PB)break;case"keydown":case"keyup":gk(J,o,H)}var dt;if(jS)t:{switch(r){case"compositionstart":var yt="onCompositionStart";break t;case"compositionend":yt="onCompositionEnd";break t;case"compositionupdate":yt="onCompositionUpdate";break t}yt=void 0}else Gc?rk(r,o)&&(yt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(yt="onCompositionStart");yt&&(tk&&o.locale!=="ko"&&(Gc||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&Gc&&(dt=JR()):(ha=H,FS="value"in ha?ha.value:ha.textContent,Gc=!0)),Ht=Jp(I,yt),0<Ht.length&&(yt=new ZR(yt,r,null,o,H),J.push({event:yt,listeners:Ht}),dt?yt.data=dt:(dt=sk(o),dt!==null&&(yt.data=dt)))),(dt=CB?NB(r,o):xB(r,o))&&(yt=Jp(I,"onBeforeInput"),0<yt.length&&(Ht=new ZR("onBeforeInput","beforeinput",null,o,H),J.push({event:Ht,listeners:yt}),Ht.data=dt)),w5(J,r,I,o,H)}j2(J,i)})}function dh(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Jp(r,i){for(var o=i+"Capture",u=[];r!==null;){var f=r,h=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=Cf(r,o),f!=null&&u.unshift(dh(r,f,h)),f=Cf(r,i),f!=null&&u.push(dh(r,f,h))),r.tag===3)return u;r=r.return}return[]}function _u(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function q2(r,i,o,u,f){for(var h=i._reactName,y=[];o!==null&&o!==u;){var _=o,T=_.alternate,I=_.stateNode;if(_=_.tag,T!==null&&T===u)break;_!==5&&_!==26&&_!==27||I===null||(T=I,f?(I=Cf(o,h),I!=null&&y.unshift(dh(o,I,T))):f||(I=Cf(o,h),I!=null&&y.push(dh(o,I,T)))),o=o.return}y.length!==0&&r.push({event:i,listeners:y})}var R5=/\r\n?/g,k5=/\u0000|\uFFFD/g;function B2(r){return(typeof r=="string"?r:""+r).replace(R5,`
`).replace(k5,"")}function K2(r,i){return i=B2(i),B2(r)===i}function Qp(){}function he(r,i,o,u,f,h){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Hc(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Hc(r,""+u);break;case"className":ep(r,"class",u);break;case"tabIndex":ep(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ep(r,o,u);break;case"style":VR(r,u,h);break;case"data":if(i!=="object"){ep(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=sp(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(o==="formAction"?(i!=="input"&&he(r,i,"name",f.name,f,null),he(r,i,"formEncType",f.formEncType,f,null),he(r,i,"formMethod",f.formMethod,f,null),he(r,i,"formTarget",f.formTarget,f,null)):(he(r,i,"encType",f.encType,f,null),he(r,i,"method",f.method,f,null),he(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=sp(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Qp);break;case"onScroll":u!=null&&Yt("scroll",r);break;case"onScrollEnd":u!=null&&Yt("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=sp(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Yt("beforetoggle",r),Yt("toggle",r),tp(r,"popover",u);break;case"xlinkActuate":yi(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":yi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":yi(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":yi(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":yi(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":yi(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":yi(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":yi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":yi(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":tp(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=sB.get(o)||o,tp(r,o,u))}}function m0(r,i,o,u,f,h){switch(o){case"style":VR(r,u,h);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Hc(r,u):(typeof u=="number"||typeof u=="bigint")&&Hc(r,""+u);break;case"onScroll":u!=null&&Yt("scroll",r);break;case"onScrollEnd":u!=null&&Yt("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Qp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!FR.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),h=r[mr]||null,h=h!=null?h[o]:null,typeof h=="function"&&r.removeEventListener(i,h,f),typeof u=="function")){typeof h!="function"&&h!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,f);break t}o in r?r[o]=u:u===!0?r.setAttribute(o,""):tp(r,o,u)}}}function xn(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",r),Yt("load",r);var u=!1,f=!1,h;for(h in o)if(o.hasOwnProperty(h)){var y=o[h];if(y!=null)switch(h){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:he(r,i,h,y,o,null)}}f&&he(r,i,"srcSet",o.srcSet,o,null),u&&he(r,i,"src",o.src,o,null);return;case"input":Yt("invalid",r);var _=h=y=f=null,T=null,I=null;for(u in o)if(o.hasOwnProperty(u)){var H=o[u];if(H!=null)switch(u){case"name":f=H;break;case"type":y=H;break;case"checked":T=H;break;case"defaultChecked":I=H;break;case"value":h=H;break;case"defaultValue":_=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:he(r,i,u,H,o,null)}}qR(r,h,_,T,I,y,f,!1),np(r);return;case"select":Yt("invalid",r),u=y=h=null;for(f in o)if(o.hasOwnProperty(f)&&(_=o[f],_!=null))switch(f){case"value":h=_;break;case"defaultValue":y=_;break;case"multiple":u=_;default:he(r,i,f,_,o,null)}i=h,o=y,r.multiple=!!u,i!=null?Kc(r,!!u,i,!1):o!=null&&Kc(r,!!u,o,!0);return;case"textarea":Yt("invalid",r),h=f=u=null;for(y in o)if(o.hasOwnProperty(y)&&(_=o[y],_!=null))switch(y){case"value":u=_;break;case"defaultValue":f=_;break;case"children":h=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:he(r,i,y,_,o,null)}KR(r,u,f,h),np(r);return;case"option":for(T in o)if(o.hasOwnProperty(T)&&(u=o[T],u!=null))switch(T){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:he(r,i,T,u,o,null)}return;case"dialog":Yt("beforetoggle",r),Yt("toggle",r),Yt("cancel",r),Yt("close",r);break;case"iframe":case"object":Yt("load",r);break;case"video":case"audio":for(u=0;u<hh.length;u++)Yt(hh[u],r);break;case"image":Yt("error",r),Yt("load",r);break;case"details":Yt("toggle",r);break;case"embed":case"source":case"link":Yt("error",r),Yt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in o)if(o.hasOwnProperty(I)&&(u=o[I],u!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:he(r,i,I,u,o,null)}return;default:if(AS(i)){for(H in o)o.hasOwnProperty(H)&&(u=o[H],u!==void 0&&m0(r,i,H,u,o,void 0));return}}for(_ in o)o.hasOwnProperty(_)&&(u=o[_],u!=null&&he(r,i,_,u,o,null))}function M5(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,y=null,_=null,T=null,I=null,H=null;for(j in o){var J=o[j];if(o.hasOwnProperty(j)&&J!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":T=J;default:u.hasOwnProperty(j)||he(r,i,j,null,u,J)}}for(var L in u){var j=u[L];if(J=o[L],u.hasOwnProperty(L)&&(j!=null||J!=null))switch(L){case"type":h=j;break;case"name":f=j;break;case"checked":I=j;break;case"defaultChecked":H=j;break;case"value":y=j;break;case"defaultValue":_=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,i));break;default:j!==J&&he(r,i,L,j,u,J)}}kS(r,y,_,T,I,H,h,f);return;case"select":j=y=_=L=null;for(h in o)if(T=o[h],o.hasOwnProperty(h)&&T!=null)switch(h){case"value":break;case"multiple":j=T;default:u.hasOwnProperty(h)||he(r,i,h,null,u,T)}for(f in u)if(h=u[f],T=o[f],u.hasOwnProperty(f)&&(h!=null||T!=null))switch(f){case"value":L=h;break;case"defaultValue":_=h;break;case"multiple":y=h;default:h!==T&&he(r,i,f,h,u,T)}i=_,o=y,u=j,L!=null?Kc(r,!!o,L,!1):!!u!=!!o&&(i!=null?Kc(r,!!o,i,!0):Kc(r,!!o,o?[]:"",!1));return;case"textarea":j=L=null;for(_ in o)if(f=o[_],o.hasOwnProperty(_)&&f!=null&&!u.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:he(r,i,_,null,u,f)}for(y in u)if(f=u[y],h=o[y],u.hasOwnProperty(y)&&(f!=null||h!=null))switch(y){case"value":L=f;break;case"defaultValue":j=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==h&&he(r,i,y,f,u,h)}BR(r,L,j);return;case"option":for(var $t in o)if(L=o[$t],o.hasOwnProperty($t)&&L!=null&&!u.hasOwnProperty($t))switch($t){case"selected":r.selected=!1;break;default:he(r,i,$t,null,u,L)}for(T in u)if(L=u[T],j=o[T],u.hasOwnProperty(T)&&L!==j&&(L!=null||j!=null))switch(T){case"selected":r.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:he(r,i,T,L,u,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in o)L=o[gt],o.hasOwnProperty(gt)&&L!=null&&!u.hasOwnProperty(gt)&&he(r,i,gt,null,u,L);for(I in u)if(L=u[I],j=o[I],u.hasOwnProperty(I)&&L!==j&&(L!=null||j!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(137,i));break;default:he(r,i,I,L,u,j)}return;default:if(AS(i)){for(var de in o)L=o[de],o.hasOwnProperty(de)&&L!==void 0&&!u.hasOwnProperty(de)&&m0(r,i,de,void 0,u,L);for(H in u)L=u[H],j=o[H],!u.hasOwnProperty(H)||L===j||L===void 0&&j===void 0||m0(r,i,H,L,u,j);return}}for(var k in o)L=o[k],o.hasOwnProperty(k)&&L!=null&&!u.hasOwnProperty(k)&&he(r,i,k,null,u,L);for(J in u)L=u[J],j=o[J],!u.hasOwnProperty(J)||L===j||L==null&&j==null||he(r,i,J,L,u,j)}var p0=null,g0=null;function Xp(r){return r.nodeType===9?r:r.ownerDocument}function H2(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function V2(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function y0(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var b0=null;function A5(){var r=window.event;return r&&r.type==="popstate"?r===b0?!1:(b0=r,!0):(b0=null,!1)}var Y2=typeof setTimeout=="function"?setTimeout:void 0,C5=typeof clearTimeout=="function"?clearTimeout:void 0,G2=typeof Promise=="function"?Promise:void 0,N5=typeof queueMicrotask=="function"?queueMicrotask:typeof G2<"u"?function(r){return G2.resolve(null).then(r).catch(x5)}:Y2;function x5(r){setTimeout(function(){throw r})}function ka(r){return r==="head"}function J2(r,i){var o=i,u=0,f=0;do{var h=o.nextSibling;if(r.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(0<u&&8>u){o=u;var y=r.ownerDocument;if(o&1&&mh(y.documentElement),o&2&&mh(y.body),o&4)for(o=y.head,mh(o),y=o.firstChild;y;){var _=y.nextSibling,T=y.nodeName;y[Mf]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=_}}if(f===0){r.removeChild(h),$h(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=h}while(o);$h(i)}function _0(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":_0(o),ES(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function I5(r,i,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Mf])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(h=r.getAttribute("rel"),h==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(h!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(h=r.getAttribute("src"),(h!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===h)return r}else return r;if(r=_s(r.nextSibling),r===null)break}return null}function F5(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=_s(r.nextSibling),r===null))return null;return r}function S0(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function D5(r,i){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function _s(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return r}var v0=null;function Q2(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return r;i--}else o==="/$"&&i++}r=r.previousSibling}return null}function X2(r,i,o){switch(i=Xp(o),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function mh(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);ES(r)}var ns=new Map,Z2=new Set;function Zp(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ci=G.d;G.d={f:z5,r:U5,D:L5,C:j5,L:P5,m:q5,X:K5,S:B5,M:H5};function z5(){var r=Ci.f(),i=Bp();return r||i}function U5(r){var i=jc(r);i!==null&&i.tag===5&&i.type==="form"?bM(i):Ci.r(r)}var Su=typeof document>"u"?null:document;function W2(r,i,o){var u=Su;if(u&&typeof i=="string"&&i){var f=Jr(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Z2.has(f)||(Z2.add(f),r={rel:r,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),xn(i,"link",r),bn(i),u.head.appendChild(i)))}}function L5(r){Ci.D(r),W2("dns-prefetch",r,null)}function j5(r,i){Ci.C(r,i),W2("preconnect",r,i)}function P5(r,i,o){Ci.L(r,i,o);var u=Su;if(u&&r&&i){var f='link[rel="preload"][as="'+Jr(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Jr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Jr(o.imageSizes)+'"]')):f+='[href="'+Jr(r)+'"]';var h=f;switch(i){case"style":h=vu(r);break;case"script":h=$u(r)}ns.has(h)||(r=g({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),ns.set(h,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(ph(h))||i==="script"&&u.querySelector(gh(h))||(i=u.createElement("link"),xn(i,"link",r),bn(i),u.head.appendChild(i)))}}function q5(r,i){Ci.m(r,i);var o=Su;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Jr(u)+'"][href="'+Jr(r)+'"]',h=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=$u(r)}if(!ns.has(h)&&(r=g({rel:"modulepreload",href:r},i),ns.set(h,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(gh(h)))return}u=o.createElement("link"),xn(u,"link",r),bn(u),o.head.appendChild(u)}}}function B5(r,i,o){Ci.S(r,i,o);var u=Su;if(u&&r){var f=Pc(u).hoistableStyles,h=vu(r);i=i||"default";var y=f.get(h);if(!y){var _={loading:0,preload:null};if(y=u.querySelector(ph(h)))_.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":i},o),(o=ns.get(h))&&$0(r,o);var T=y=u.createElement("link");bn(T),xn(T,"link",r),T._p=new Promise(function(I,H){T.onload=I,T.onerror=H}),T.addEventListener("load",function(){_.loading|=1}),T.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Wp(y,i,u)}y={type:"stylesheet",instance:y,count:1,state:_},f.set(h,y)}}}function K5(r,i){Ci.X(r,i);var o=Su;if(o&&r){var u=Pc(o).hoistableScripts,f=$u(r),h=u.get(f);h||(h=o.querySelector(gh(f)),h||(r=g({src:r,async:!0},i),(i=ns.get(f))&&w0(r,i),h=o.createElement("script"),bn(h),xn(h,"link",r),o.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},u.set(f,h))}}function H5(r,i){Ci.M(r,i);var o=Su;if(o&&r){var u=Pc(o).hoistableScripts,f=$u(r),h=u.get(f);h||(h=o.querySelector(gh(f)),h||(r=g({src:r,async:!0,type:"module"},i),(i=ns.get(f))&&w0(r,i),h=o.createElement("script"),bn(h),xn(h,"link",r),o.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},u.set(f,h))}}function tA(r,i,o,u){var f=(f=Tt.current)?Zp(f):null;if(!f)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=vu(o.href),o=Pc(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=vu(o.href);var h=Pc(f).hoistableStyles,y=h.get(r);if(y||(f=f.ownerDocument||f,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(r,y),(h=f.querySelector(ph(r)))&&!h._p&&(y.instance=h,y.state.loading=5),ns.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ns.set(r,o),h||V5(f,r,o,y.state))),i&&u===null)throw Error(s(528,""));return y}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=$u(o),o=Pc(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function vu(r){return'href="'+Jr(r)+'"'}function ph(r){return'link[rel="stylesheet"]['+r+"]"}function eA(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function V5(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),xn(i,"link",o),bn(i),r.head.appendChild(i))}function $u(r){return'[src="'+Jr(r)+'"]'}function gh(r){return"script[async]"+r}function nA(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Jr(o.href)+'"]');if(u)return i.instance=u,bn(u),u;var f=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),bn(u),xn(u,"style",f),Wp(u,o.precedence,r),i.instance=u;case"stylesheet":f=vu(o.href);var h=r.querySelector(ph(f));if(h)return i.state.loading|=4,i.instance=h,bn(h),h;u=eA(o),(f=ns.get(f))&&$0(u,f),h=(r.ownerDocument||r).createElement("link"),bn(h);var y=h;return y._p=new Promise(function(_,T){y.onload=_,y.onerror=T}),xn(h,"link",u),i.state.loading|=4,Wp(h,o.precedence,r),i.instance=h;case"script":return h=$u(o.src),(f=r.querySelector(gh(h)))?(i.instance=f,bn(f),f):(u=o,(f=ns.get(h))&&(u=g({},o),w0(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),bn(f),xn(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Wp(u,o.precedence,r));return i.instance}function Wp(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,h=f,y=0;y<u.length;y++){var _=u[y];if(_.dataset.precedence===i)h=_;else if(h!==f)break}h?h.parentNode.insertBefore(r,h.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function $0(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function w0(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var tg=null;function rA(r,i,o){if(tg===null){var u=new Map,f=tg=new Map;f.set(o,u)}else f=tg,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var h=o[f];if(!(h[Mf]||h[Vn]||r==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var y=h.getAttribute(i)||"";y=r+y;var _=u.get(y);_?_.push(h):u.set(y,[h])}}return u}function sA(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function Y5(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function iA(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var yh=null;function G5(){}function J5(r,i,o){if(yh===null)throw Error(s(475));var u=yh;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=vu(o.href),h=r.querySelector(ph(f));if(h){r=h._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=eg.bind(u),r.then(u,u)),i.state.loading|=4,i.instance=h,bn(h);return}h=r.ownerDocument||r,o=eA(o),(f=ns.get(f))&&$0(o,f),h=h.createElement("link"),bn(h);var y=h;y._p=new Promise(function(_,T){y.onload=_,y.onerror=T}),xn(h,"link",o),i.instance=h}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,r),(r=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=eg.bind(u),r.addEventListener("load",i),r.addEventListener("error",i))}}function Q5(){if(yh===null)throw Error(s(475));var r=yh;return r.stylesheets&&r.count===0&&E0(r,r.stylesheets),0<r.count?function(i){var o=setTimeout(function(){if(r.stylesheets&&E0(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=i,function(){r.unsuspend=null,clearTimeout(o)}}:null}function eg(){if(this.count--,this.count===0){if(this.stylesheets)E0(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var ng=null;function E0(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,ng=new Map,i.forEach(X5,r),ng=null,eg.call(r))}function X5(r,i){if(!(i.state.loading&4)){var o=ng.get(r);if(o)var u=o.get(null);else{o=new Map,ng.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var y=f[h];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(o.set(y.dataset.precedence,y),u=y)}u&&o.set(null,u)}f=i.instance,y=f.getAttribute("data-precedence"),h=o.get(y)||u,h===u&&o.set(null,f),o.set(y,f),this.count++,u=eg.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),h?h.parentNode.insertBefore(f,h.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var bh={$$typeof:A,Provider:null,Consumer:null,_currentValue:st,_currentValue2:st,_threadCount:0};function Z5(r,i,o,u,f,h,y,_){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=SS(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=SS(0),this.hiddenUpdates=SS(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function aA(r,i,o,u,f,h,y,_,T,I,H,J){return r=new Z5(r,i,o,y,_,T,I,J),i=1,h===!0&&(i|=24),h=Ir(3,null,null,i),r.current=h,h.stateNode=r,i=i1(),i.refCount++,r.pooledCache=i,i.refCount++,h.memoizedState={element:u,isDehydrated:o,cache:i},u1(h),r}function oA(r){return r?(r=Wc,r):Wc}function cA(r,i,o,u,f,h){f=oA(f),u.context===null?u.context=f:u.pendingContext=f,u=pa(i),u.payload={element:o},h=h===void 0?null:h,h!==null&&(u.callback=h),o=ga(r,u,i),o!==null&&(Lr(o,r,i),Gf(o,r,i))}function uA(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function T0(r,i){uA(r,i),(r=r.alternate)&&uA(r,i)}function lA(r){if(r.tag===13){var i=Zc(r,67108864);i!==null&&Lr(i,r,67108864),T0(r,67108864)}}var rg=!0;function W5(r,i,o,u){var f=z.T;z.T=null;var h=G.p;try{G.p=2,O0(r,i,o,u)}finally{G.p=h,z.T=f}}function tK(r,i,o,u){var f=z.T;z.T=null;var h=G.p;try{G.p=8,O0(r,i,o,u)}finally{G.p=h,z.T=f}}function O0(r,i,o,u){if(rg){var f=R0(u);if(f===null)d0(r,i,u,sg,o),hA(r,u);else if(nK(f,r,i,o,u))u.stopPropagation();else if(hA(r,u),i&4&&-1<eK.indexOf(r)){for(;f!==null;){var h=jc(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var y=uo(h.pendingLanes);if(y!==0){var _=h;for(_.pendingLanes|=2,_.entangledLanes|=2;y;){var T=1<<31-Nr(y);_.entanglements[1]|=T,y&=~T}Vs(h),(ae&6)===0&&(Pp=Ps()+500,fh(0))}}break;case 13:_=Zc(h,2),_!==null&&Lr(_,h,2),Bp(),T0(h,2)}if(h=R0(u),h===null&&d0(r,i,u,sg,o),h===f)break;f=h}f!==null&&u.stopPropagation()}else d0(r,i,u,null,o)}}function R0(r){return r=NS(r),k0(r)}var sg=null;function k0(r){if(sg=null,r=Lc(r),r!==null){var i=c(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=l(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return sg=r,null}function fA(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jq()){case TR:return 2;case OR:return 8;case Qm:case Pq:return 32;case RR:return 268435456;default:return 32}default:return 32}}var M0=!1,Ma=null,Aa=null,Ca=null,_h=new Map,Sh=new Map,Na=[],eK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hA(r,i){switch(r){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":Ca=null;break;case"pointerover":case"pointerout":_h.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sh.delete(i.pointerId)}}function vh(r,i,o,u,f,h){return r===null||r.nativeEvent!==h?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:h,targetContainers:[f]},i!==null&&(i=jc(i),i!==null&&lA(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function nK(r,i,o,u,f){switch(i){case"focusin":return Ma=vh(Ma,r,i,o,u,f),!0;case"dragenter":return Aa=vh(Aa,r,i,o,u,f),!0;case"mouseover":return Ca=vh(Ca,r,i,o,u,f),!0;case"pointerover":var h=f.pointerId;return _h.set(h,vh(_h.get(h)||null,r,i,o,u,f)),!0;case"gotpointercapture":return h=f.pointerId,Sh.set(h,vh(Sh.get(h)||null,r,i,o,u,f)),!0}return!1}function dA(r){var i=Lc(r.target);if(i!==null){var o=c(i);if(o!==null){if(i=o.tag,i===13){if(i=l(o),i!==null){r.blockedOn=i,Jq(r.priority,function(){if(o.tag===13){var u=Ur();u=vS(u);var f=Zc(o,u);f!==null&&Lr(f,o,u),T0(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ig(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=R0(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);CS=u,o.target.dispatchEvent(u),CS=null}else return i=jc(o),i!==null&&lA(i),r.blockedOn=o,!1;i.shift()}return!0}function mA(r,i,o){ig(r)&&o.delete(i)}function rK(){M0=!1,Ma!==null&&ig(Ma)&&(Ma=null),Aa!==null&&ig(Aa)&&(Aa=null),Ca!==null&&ig(Ca)&&(Ca=null),_h.forEach(mA),Sh.forEach(mA)}function ag(r,i){r.blockedOn===i&&(r.blockedOn=null,M0||(M0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,rK)))}var og=null;function pA(r){og!==r&&(og=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){og===r&&(og=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(k0(u||o)===null)continue;break}var h=jc(o);h!==null&&(r.splice(i,3),i-=3,k1(h,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function $h(r){function i(T){return ag(T,r)}Ma!==null&&ag(Ma,r),Aa!==null&&ag(Aa,r),Ca!==null&&ag(Ca,r),_h.forEach(i),Sh.forEach(i);for(var o=0;o<Na.length;o++){var u=Na[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Na.length&&(o=Na[0],o.blockedOn===null);)dA(o),o.blockedOn===null&&Na.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],h=o[u+1],y=f[mr]||null;if(typeof h=="function")y||pA(o);else if(y){var _=null;if(h&&h.hasAttribute("formAction")){if(f=h,y=h[mr]||null)_=y.formAction;else if(k0(f)!==null)continue}else _=y.action;typeof _=="function"?o[u+1]=_:(o.splice(u,3),u-=3),pA(o)}}}function A0(r){this._internalRoot=r}cg.prototype.render=A0.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=Ur();cA(o,u,r,i,null,null)},cg.prototype.unmount=A0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;cA(r.current,2,null,r,null,null),Bp(),i[Uc]=null}};function cg(r){this._internalRoot=r}cg.prototype.unstable_scheduleHydration=function(r){if(r){var i=NR();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Na.length&&i!==0&&i<Na[o].priority;o++);Na.splice(o,0,r),o===0&&dA(r)}};var gA=e.version;if(gA!=="19.1.0")throw Error(s(527,gA,"19.1.0"));G.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=m(i),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var sK={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ug=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ug.isDisabled&&ug.supportsFiber)try{Of=ug.inject(sK),Cr=ug}catch{}}return Eh.createRoot=function(r,i){if(!a(r))throw Error(s(299));var o=!1,u="",f=NM,h=xM,y=IM,_=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(h=i.onCaughtError),i.onRecoverableError!==void 0&&(y=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(_=i.unstable_transitionCallbacks)),i=aA(r,1,!1,null,null,o,u,f,h,y,_,null),r[Uc]=i.current,h0(r),new A0(i)},Eh.hydrateRoot=function(r,i,o){if(!a(r))throw Error(s(299));var u=!1,f="",h=NM,y=xM,_=IM,T=null,I=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(h=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(_=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(T=o.unstable_transitionCallbacks),o.formState!==void 0&&(I=o.formState)),i=aA(r,1,!0,i,o??null,u,f,h,y,_,T,I),i.context=oA(null),o=i.current,u=Ur(),u=vS(u),f=pa(u),f.callback=null,ga(o,f,u),o=u,i.current.lanes=o,kf(i,o),Vs(i),r[Uc]=i.current,h0(r),new cg(i)},Eh.version="19.1.0",Eh}var OA;function dK(){if(OA)return x0.exports;OA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),x0.exports=hK(),x0.exports}var mK=dK();const pK=(t,e,n,s={})=>{const{barHeight:a=30,barPadding:c=4,timelineHeight:l=25}=s;return t.filter(d=>{const m=d.startTime,g=d.endTime>=e.startTime&&m<=e.endTime,b=l+d.depth*(a+c)+e.offsetY,S=b+a>=0&&b<=n;return g&&S})},gK=(t,e,n={})=>{const{barHeight:s=30,barPadding:a=4,timelineHeight:c=25}=n;return c+t.depth*(s+a)+e.offsetY},yK=({traces:t,viewState:e,options:n={},width:s})=>{const a=Fe.useRef(null),[c,l]=Fe.useState(0),{barHeight:d=30,timelineHeight:m=25}=n;Fe.useEffect(()=>{const g=()=>{a.current&&l(a.current.offsetHeight)};return g(),window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]);const p=pK(t,e,c,n);return Wn.jsxs("div",{ref:a,style:{width:`${s}px`,height:"100%",position:"relative",overflow:"hidden",backgroundColor:"#fafafa"},children:[Wn.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:`${m}px`,borderBottom:"1px solid #e0e0e0"}}),p.map(g=>{const b=gK(g,e,n);return Wn.jsx("div",{style:{position:"absolute",top:`${b}px`,left:0,right:0,height:`${d}px`,borderBottom:"1px solid #e0e0e0",display:"flex",alignItems:"center",paddingLeft:"5px",paddingRight:"5px",boxSizing:"border-box"},children:Wn.jsx("div",{style:{fontSize:"11px",fontFamily:"Arial, sans-serif",color:"#333333",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%"},title:g.name,children:g.name})},g.id)})]})},bK=({traces:t,viewState:e,onViewStateChange:n,height:s,barHeight:a,barPadding:c})=>{const l=Fe.useRef(null),d=Fe.useRef(!1),m=Fe.useRef(null),p=Fe.useCallback(()=>{const E=l.current;if(!E||t.length===0||s===0)return;const D=E.getContext("2d");if(!D)return;const C=t.map(ut=>ut.startTime),N=t.map(ut=>ut.endTime),q={start:C.reduce((ut,Et)=>Et<ut?Et:ut),end:N.reduce((ut,Et)=>Et>ut?Et:ut)};m.current=q,D.clearRect(0,0,E.width,s);const A=q.end-q.start,P=E.width/Number(A),M=Math.max(...t.map(ut=>ut.depth))+1,U=Math.max(1,(s-10)/M);t.forEach(ut=>{const Et=Number(ut.startTime-q.start)*P,z=5+ut.depth*U,G=Number(ut.endTime-ut.startTime)*P,st=ut.startTime,O=ut.endTime>=e.startTime&&st<=e.endTime;D.globalAlpha=O?.8:.3,D.fillStyle=ut.color,D.fillRect(Et,z,Math.max(1,G),U-1)}),D.globalAlpha=1,D.strokeStyle="#ffffff",D.lineWidth=2;const K=Number(e.startTime-q.start)*P,B=Number(e.endTime-e.startTime)*P,et=M*(a+c),tt=window.innerHeight-s-25-100,Z=s/et,rt=-e.offsetY*Z,vt=Math.min(s,tt*Z);D.strokeRect(K,0,B,s),et>tt&&(D.fillStyle="rgba(255, 255, 255, 0.1)",D.fillRect(K,rt,B,vt),D.strokeStyle="rgba(255, 255, 255, 0.5)",D.strokeRect(K,rt,B,vt)),D.lineWidth=1},[t,e,s,a,c]);Fe.useEffect(()=>{const E=l.current;if(!E)return;const D=()=>{E.width=E.offsetWidth,E.height=s,p()};return D(),window.addEventListener("resize",D),()=>{window.removeEventListener("resize",D)}},[p,s]),Fe.useEffect(()=>{p()},[p]);const g=E=>{const D=l.current.getBoundingClientRect(),C=E.clientX-D.left;if(d.current=!0,m.current){const N=m.current.end-m.current.start,q=e.endTime-e.startTime,A=m.current.start+BigInt(Math.round(Number(N)*(C/D.width))),P=A-q/2n,M=A+q/2n;n({startTime:P,endTime:M,offsetY:e.offsetY})}},b=E=>{if(!d.current||!m.current)return;const D=l.current.getBoundingClientRect(),C=E.clientX-D.left,N=Math.max(0,Math.min(D.width,C)),q=m.current.end-m.current.start,A=e.endTime-e.startTime,P=m.current.start+BigInt(Math.round(Number(q)*(N/D.width))),M=P-A/2n,U=P+A/2n;n({startTime:M,endTime:U,offsetY:e.offsetY})},S=()=>{d.current=!1},v=()=>{d.current=!1};return s===0?null:Wn.jsx("canvas",{ref:l,style:{width:"100%",height:`${s}px`,cursor:"pointer",display:"block"},onMouseDown:g,onMouseMove:b,onMouseUp:S,onMouseLeave:v})},_K=(t,e,n,s,a,c)=>{t.clearRect(0,a,e,s);const l=n.endTime-n.startTime,d=e/Number(l),m=d*1e9;t.strokeStyle="#e0e0e0",t.lineWidth=1,t.beginPath(),t.moveTo(0,a+s),t.lineTo(e,a+s),t.stroke();const g=50/m;let b=.001;const S=[.001,.005,.01,.05,.1,.5,1,5,10,30,60,300,600,1800,3600];for(const C of S)if(C>=g){b=C;break}t.fillStyle="#666",t.font="10px Arial";const v=Number(n.startTime)/1e9,E=Number(n.endTime)/1e9,D=Math.ceil(v/b)*b;for(let C=D;C<=E;C+=b){const N=C-Number(c/1000000000n),q=BigInt(Math.round(C*1e9)),A=Number(q-n.startTime)*d;if(A>=-100&&A<=e+100){let P;if(b<1)P=`${N.toFixed(3)}s`;else if(b<60)P=`${N.toFixed(0)}s`;else if(b<3600){const M=Math.floor(N/60),U=N%60;P=U===0?`${M}m`:`${M}m${U}s`}else{const M=Math.floor(N/3600),U=Math.floor(N%3600/60);P=U===0?`${M}h`:`${M}h${U}m`}t.fillText(P,A+2,a+12),t.strokeStyle="#d0d0d0",t.beginPath(),t.moveTo(A,a+s-5),t.lineTo(A,a+s),t.stroke()}}},SK=(t,e,n,s,a,c,l)=>{const d=Math.max(0,n),m=Math.min(l-d,a-(d-n));t.fillStyle=e.color,t.fillRect(d,s,m,c),t.strokeStyle="rgba(0, 0, 0, 0.2)",t.lineWidth=1,t.strokeRect(d,s,m,c),t.fillStyle="#333",t.font="11px Arial";const p=e.name,g=t.measureText(p).width,b=d+5,S=m-10;if(g<S)t.fillText(p,b,s+c/2+4);else if(S>20){let E=p;for(;t.measureText(E+"...").width>S&&E.length>0;)E=E.slice(0,-1);E.length>0&&t.fillText(E+"...",b,s+c/2+4)}if(n+a<=l){const E=`${(Number(e.endTime-e.startTime)/1e9).toFixed(3)}s`,D=t.measureText(E).width,C=b+Math.min(g,S);m>D+(C-d)+20&&(t.fillStyle="#666",t.font="10px Arial",t.fillText(E,n+a-D-5,s+c/2+4))}},vK=(t,e,n,s,a,c,l,d)=>{const m=n.endTime-n.startTime,p=s/Number(m);e.forEach(g=>{const b=Number(g.startTime-n.startTime)*p,S=d+g.depth*(c+l)+n.offsetY,v=Number(g.endTime-g.startTime)*p;b+v<0||b>s||S+c<0||S>a||SK(t,g,b,S,v,c,s)})},$K=({traces:t,viewState:e,timeOrigin:n,onViewStateChange:s,options:a={},onTraceClick:c,onTraceHover:l})=>{const{barHeight:d=30,barPadding:m=4,timelineHeight:p=25}=a,g=Fe.useRef(null),b=Fe.useRef(!1),S=Fe.useRef({x:0,y:0}),v=Fe.useRef(null),E=Fe.useCallback((M,U)=>{const K=g.current;if(!K)return null;const B=e.endTime-e.startTime,et=K.width/Number(B);if(U<p)return null;for(const tt of t){const Z=Number(tt.startTime-e.startTime)*et,rt=p+tt.depth*(d+m)+e.offsetY,vt=Number(tt.endTime-tt.startTime)*et;if(M>=Z&&M<=Z+vt&&U>=rt&&U<=rt+d)return tt}return null},[t,e,d,m,p]),D=Fe.useCallback(()=>{const M=g.current;if(!M)return;const U=M.getContext("2d");U&&(U.clearRect(0,0,M.width,M.height),vK(U,t,e,M.width,M.height,d,m,p),_K(U,M.width,e,p,0,n))},[t,e,d,m,p]);Fe.useEffect(()=>{const M=g.current;if(!M)return;const U=()=>{M.width=M.offsetWidth,M.height=M.offsetHeight,D()},K=B=>{B.preventDefault();const et=M.getBoundingClientRect(),tt=B.clientX-et.left,Z=e.endTime-e.startTime,rt=M.width/Number(Z),vt=e.startTime+BigInt(Math.round(tt/rt)),ut=B.deltaY>0?1.1:.9,Et=vt-e.startTime,z=e.endTime-vt,G=BigInt(Math.round(Number(Et)*ut)),st=BigInt(Math.round(Number(z)*ut)),Nt=vt-G,O=vt+st;s({startTime:Nt,endTime:O,offsetY:e.offsetY})};return U(),window.addEventListener("resize",U),M.addEventListener("wheel",K,{passive:!1}),()=>{window.removeEventListener("resize",U),M.removeEventListener("wheel",K)}},[D,e,s]),Fe.useEffect(()=>{D()},[D]);const C=M=>{const U=g.current.getBoundingClientRect(),K=M.clientX-U.left,B=M.clientY-U.top,et=E(K,B);et&&c?c(et):(b.current=!0,S.current={x:M.clientX,y:M.clientY-e.offsetY})},N=M=>{const U=g.current,K=U.getBoundingClientRect(),B=M.clientX-K.left,et=M.clientY-K.top;if(b.current){const tt=e.endTime-e.startTime,Z=U.width/Number(tt),rt=S.current.x-M.clientX,vt=BigInt(Math.round(rt/Z));s({startTime:e.startTime+vt,endTime:e.endTime+vt,offsetY:Math.min(0,M.clientY-S.current.y)}),S.current.x=M.clientX}else if(l){const tt=E(B,et);tt!==v.current&&(v.current=tt,l(tt),g.current&&(g.current.style.cursor=tt?"pointer":"grab"))}},q=()=>{b.current=!1},A=()=>{b.current=!1,l&&v.current&&(v.current=null,l(null)),g.current&&(g.current.style.cursor="grab")},P={width:"100%",height:"100%",cursor:"grab",display:"block"};return Wn.jsx("canvas",{ref:g,style:P,onMouseDown:C,onMouseMove:N,onMouseUp:q,onMouseLeave:A})},wK=t=>typeof t=="function",$=function(t,e){if(typeof t=="function")return function(){return t(arguments)?e.apply(this,arguments):n=>e(n,...arguments)};switch(t){case 0:case 1:throw new RangeError(`Invalid arity ${t}`);case 2:return function(n,s){return arguments.length>=2?e(n,s):function(a){return e(a,n)}};case 3:return function(n,s,a){return arguments.length>=3?e(n,s,a):function(c){return e(c,n,s)}};case 4:return function(n,s,a,c){return arguments.length>=4?e(n,s,a,c):function(l){return e(l,n,s,a)}};case 5:return function(n,s,a,c,l){return arguments.length>=5?e(n,s,a,c,l):function(d){return e(d,n,s,a,c)}};default:return function(){if(arguments.length>=t)return e.apply(this,arguments);const n=arguments;return function(s){return e(s,...n)}}}},At=t=>t,vb=t=>()=>t,RA=vb(!0),Nv=vb(!1),wI=vb(void 0),md=wI;function w(t,e,n,s,a,c,l,d,m){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return s(n(e(t)));case 5:return a(s(n(e(t))));case 6:return c(a(s(n(e(t)))));case 7:return l(c(a(s(n(e(t))))));case 8:return d(l(c(a(s(n(e(t)))))));case 9:return m(d(l(c(a(s(n(e(t))))))));default:{let p=arguments[0];for(let g=1;g<arguments.length;g++)p=arguments[g](p);return p}}}const kA="effect/GlobalValue";let Th;const zt=(t,e)=>(Th||(globalThis[kA]??=new Map,Th=globalThis[kA]),Th.has(t)||Th.set(t,e()),Th.get(t)),ds=t=>typeof t=="string",Zi=t=>typeof t=="number",pd=t=>typeof t=="boolean",$b=t=>typeof t=="bigint",xv=t=>typeof t=="symbol",Jd=wK,EK=t=>t===void 0,TK=t=>!1,Jw=t=>typeof t=="object"&&t!==null,ro=t=>Jw(t)||Jd(t),_t=$(2,(t,e)=>ro(t)&&e in t),EI=$(2,(t,e)=>_t(t,"_tag")&&t._tag===e),wu=t=>t==null,OK=t=>t!=null,RK=t=>t instanceof Date,Qw=t=>_t(t,Symbol.iterator),kK=t=>Jw(t)&&!Array.isArray(t),TI=t=>_t(t,"then")&&Jd(t.then),wb=t=>`BUG: ${t} - please report an issue at https://github.com/Effect-TS/effect/issues`;let OI=class RI{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new RI(this.self)}};const MK=335903614,AK=4150755663,CK=1481765933,NK=1284865837,xK=9007199254740992,IK=134217728;let FK=class{_state;constructor(e,n,s,a){return wu(n)&&wu(e)?(n=Math.random()*4294967295>>>0,e=0):wu(n)&&(n=e,e=0),wu(a)&&wu(s)?(a=this._state?this._state[3]:AK,s=this._state?this._state[2]:MK):wu(a)&&(a=s,s=0),this._state=new Int32Array([0,0,s>>>0,((a||0)|1)>>>0]),this._next(),MA(this._state,this._state[0],this._state[1],e>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=e[3]|1}integer(e){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%e}number(){const e=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(e*IK+n)/xK}_next(){const e=this._state[0]>>>0,n=this._state[1]>>>0;DK(this._state,e,n,CK,NK),MA(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let s=e>>>18,a=(n>>>18|e<<14)>>>0;s=(s^e)>>>0,a=(a^n)>>>0;const c=(a>>>27|s<<5)>>>0,l=e>>>27,d=(-l>>>0&31)>>>0;return(c>>>l|c<<d)>>>0}};function DK(t,e,n,s,a){let c=(n>>>16)*(a&65535)>>>0,l=(n&65535)*(a>>>16)>>>0,d=(n&65535)*(a&65535)>>>0,m=(n>>>16)*(a>>>16)+((l>>>16)+(c>>>16))>>>0;l=l<<16>>>0,d=d+l>>>0,d>>>0<l>>>0&&(m=m+1>>>0),c=c<<16>>>0,d=d+c>>>0,d>>>0<c>>>0&&(m=m+1>>>0),m=m+Math.imul(n,s)>>>0,m=m+Math.imul(e,a)>>>0,t[0]=m,t[1]=d}function MA(t,e,n,s,a){let c=e+s>>>0;const l=n+a>>>0;l>>>0<n>>>0&&(c=c+1|0),t[0]=c,t[1]=l}const Iv=Symbol.for("effect/Utils/YieldWrap");let Qd=class{#t;constructor(e){this.#t=e}[Iv](){return this.#t}};function zK(t){if(typeof t=="object"&&t!==null&&Iv in t)return t[Iv]();throw new Error(wb("yieldWrapGet"))}const ss=zt("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),kI={effect_internal_function:t=>t()},UK={effect_internal_function:t=>{try{return t()}finally{}}},LK=kI.effect_internal_function(()=>new Error().stack)?.includes("effect_internal_function")===!0,ar=LK?kI.effect_internal_function:UK.effect_internal_function,z0=zt(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),Dt=Symbol.for("effect/Hash"),ft=t=>{if(ss.enabled===!0)return 0;switch(typeof t){case"number":return Zw(t);case"bigint":return De(t.toString(10));case"boolean":return De(String(t));case"symbol":return De(String(t));case"string":return De(t);case"undefined":return De("undefined");case"function":case"object":return t===null?De("null"):t instanceof Date?ft(t.toISOString()):t instanceof URL?ft(t.href):jK(t)?t[Dt]():Xw(t);default:throw new Error(`BUG: unhandled typeof ${typeof t} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},Xw=t=>(z0.has(t)||z0.set(t,Zw(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),z0.get(t)),Gt=t=>e=>e*53^t,Eb=t=>t&3221225471|t>>>1&1073741824,jK=t=>_t(t,Dt),Zw=t=>{if(t!==t||t===1/0)return 0;let e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)e^=t/=4294967295;return Eb(e)},De=t=>{let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return Eb(e)},PK=(t,e)=>{let n=12289;for(let s=0;s<e.length;s++)n^=w(De(e[s]),Gt(ft(t[e[s]])));return Eb(n)},MI=t=>PK(t,Object.keys(t)),Xd=t=>{let e=6151;for(let n=0;n<t.length;n++)e=w(e,Gt(ft(t[n])));return Eb(e)},ve=function(){if(arguments.length===1){const n=arguments[0];return function(s){return Object.defineProperty(n,Dt,{value(){return s},enumerable:!1}),s}}const t=arguments[0],e=arguments[1];return Object.defineProperty(t,Dt,{value(){return e},enumerable:!1}),e},It=Symbol.for("effect/Equal");function wt(){return arguments.length===1?t=>iy(t,arguments[0]):iy(arguments[0],arguments[1])}function iy(t,e){if(t===e)return!0;const n=typeof t;if(n!==typeof e)return!1;if(n==="object"||n==="function"){if(t!==null&&e!==null){if(ay(t)&&ay(e))return ft(t)===ft(e)&&t[It](e)?!0:ss.enabled&&ss.tester?ss.tester(t,e):!1;if(t instanceof Date&&e instanceof Date)return t.toISOString()===e.toISOString();if(t instanceof URL&&e instanceof URL)return t.href===e.href}if(ss.enabled){if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every((s,a)=>iy(s,e[a]));if(Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const s=Object.keys(t),a=Object.keys(e);if(s.length===a.length){for(const c of s)if(!(c in e&&iy(t[c],e[c])))return ss.tester?ss.tester(t,e):!1;return!0}}return ss.tester?ss.tester(t,e):!1}}return ss.enabled&&ss.tester?ss.tester(t,e):!1}const ay=t=>_t(t,It),Ww=()=>wt,pe=Symbol.for("nodejs.util.inspect.custom"),Re=t=>{try{if(_t(t,"toJSON")&&Jd(t.toJSON)&&t.toJSON.length===0)return t.toJSON();if(Array.isArray(t))return t.map(Re)}catch{return{}}return BK(t)},Te=t=>JSON.stringify(t,null,2),cl=(t,e=2)=>{if(typeof t=="string")return t;try{return typeof t=="object"?AI(t,e):String(t)}catch{return String(t)}},AI=(t,e)=>{let n=[];const s=JSON.stringify(t,(a,c)=>typeof c=="object"&&c!==null?n.includes(c)?void 0:n.push(c)&&(jo.fiberRefs!==void 0&&CI(c)?c[tE](jo.fiberRefs):c):c,e);return n=void 0,s},tE=Symbol.for("effect/Inspectable/Redactable"),CI=t=>typeof t=="object"&&t!==null&&tE in t,jo=zt("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),qK=(t,e)=>{const n=jo.fiberRefs;jo.fiberRefs=t;try{return e()}finally{jo.fiberRefs=n}},BK=t=>CI(t)&&jo.fiberRefs!==void 0?t[tE](jo.fiberRefs):t,lt=(t,e)=>{switch(e.length){case 0:return t;case 1:return e[0](t);case 2:return e[1](e[0](t));case 3:return e[2](e[1](e[0](t)));case 4:return e[3](e[2](e[1](e[0](t))));case 5:return e[4](e[3](e[2](e[1](e[0](t)))));case 6:return e[5](e[4](e[3](e[2](e[1](e[0](t))))));case 7:return e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))));case 8:return e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t))))))));case 9:return e[8](e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))))));default:{let n=t;for(let s=0,a=e.length;s<a;s++)n=e[s](n);return n}}},ed="Async",Tb="Commit",qn="Failure",kg="OnFailure",oy="OnSuccess",cy="OnSuccessAndFailure",Bn="Success",NI="Sync",KK="Tag",tf="UpdateRuntimeFlags",uy="While",nd="Iterator",xI="WithRuntime",Mg="Yield",eE="RevertFlags";let HK="3.17.3";const nE=()=>HK,VK=Symbol.for("effect/Effect"),YK=Symbol.for("effect/Stream"),GK=Symbol.for("effect/Sink"),JK=Symbol.for("effect/Channel"),ul={_R:t=>t,_E:t=>t,_A:t=>t,_V:nE()},QK={_A:t=>t,_In:t=>t,_L:t=>t,_E:t=>t,_R:t=>t},XK={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutElem:t=>t,_OutDone:t=>t},Zd={[VK]:ul,[YK]:ul,[GK]:QK,[JK]:XK,[It](t){return this===t},[Dt](){return ve(this,Xw(this))},[Symbol.iterator](){return new OI(new Qd(this))},pipe(){return lt(this,arguments)}},rE={[Dt](){return ve(this,MI(this))},[It](t){const e=Object.keys(this),n=Object.keys(t);if(e.length!==n.length)return!1;for(const s of e)if(!(s in t&&wt(this[s],t[s])))return!1;return!0}},Wd={...Zd,_op:Tb},ZK={...Wd,...rE},WK=function(){function t(){}return t.prototype=Wd,t}(),II=Symbol.for("effect/Option"),FI={...Zd,[II]:{_A:t=>t},[pe](){return this.toJSON()},toString(){return Te(this.toJSON())}},t8=Object.assign(Object.create(FI),{_tag:"Some",_op:"Some",[It](t){return DI(t)&&UI(t)&&wt(this.value,t.value)},[Dt](){return ve(this,Gt(ft(this._tag))(ft(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:Re(this.value)}}}),e8=ft("None"),n8=Object.assign(Object.create(FI),{_tag:"None",_op:"None",[It](t){return DI(t)&&zI(t)},[Dt](){return e8},toJSON(){return{_id:"Option",_tag:this._tag}}}),DI=t=>_t(t,II),zI=t=>t._tag==="None",UI=t=>t._tag==="Some",sE=Object.create(n8),ly=t=>{const e=Object.create(t8);return e.value=t,e},LI=Symbol.for("effect/Context/Tag"),fy=Symbol.for("effect/Context/Reference"),r8="effect/STM",s8=Symbol.for(r8),Ob={...Zd,_op:"Tag",[s8]:ul,[LI]:{_Service:t=>t,_Identifier:t=>t},toString(){return Te(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[pe](){return this.toJSON()},of(t){return t},context(t){return qI(this,t)}},i8={...Ob,[fy]:fy},a8=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=e;const s=Object.create(Ob);return Object.defineProperty(s,"stack",{get(){return n.stack}}),s.key=t,s},o8=t=>()=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=e;function s(){}return Object.setPrototypeOf(s,Ob),s.key=t,Object.defineProperty(s,"stack",{get(){return n.stack}}),s},c8=()=>(t,e)=>{const n=Error.stackTraceLimit;Error.stackTraceLimit=2;const s=new Error;Error.stackTraceLimit=n;function a(){}return Object.setPrototypeOf(a,i8),a.key=t,a.defaultValue=e.defaultValue,Object.defineProperty(a,"stack",{get(){return s.stack}}),a},jI=Symbol.for("effect/Context"),u8={[jI]:{_Services:t=>t},[It](t){if(PI(t)&&this.unsafeMap.size===t.unsafeMap.size){for(const e of this.unsafeMap.keys())if(!t.unsafeMap.has(e)||!wt(this.unsafeMap.get(e),t.unsafeMap.get(e)))return!1;return!0}return!1},[Dt](){return ve(this,Zw(this.unsafeMap.size))},pipe(){return lt(this,arguments)},toString(){return Te(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(Re)}},[pe](){return this.toJSON()}},Wo=t=>{const e=Object.create(u8);return e.unsafeMap=t,e},l8=t=>{const e=new Error(`Service not found${t.key?`: ${String(t.key)}`:""}`);if(t.stack){const n=t.stack.split(`
`);if(n.length>2){const s=n[2].match(/at (.*)/);s&&(e.message=e.message+` (defined at ${s[1]})`)}}if(e.stack){const n=e.stack.split(`
`);n.splice(1,3),e.stack=n.join(`
`)}return e},PI=t=>_t(t,jI),f8=t=>_t(t,LI),h8=t=>_t(t,fy),d8=Wo(new Map),m8=()=>d8,qI=(t,e)=>Wo(new Map([[t.key,e]])),p8=$(3,(t,e,n)=>{const s=new Map(t.unsafeMap);return s.set(e.key,n),Wo(s)}),U0=zt("effect/Context/defaultValueCache",()=>new Map),iE=t=>{if(U0.has(t.key))return U0.get(t.key);const e=t.defaultValue();return U0.set(t.key,e),e},g8=(t,e)=>t.unsafeMap.has(e.key)?t.unsafeMap.get(e.key):iE(e),BI=$(2,(t,e)=>{if(!t.unsafeMap.has(e.key)){if(fy in e)return iE(e);throw l8(e)}return t.unsafeMap.get(e.key)}),y8=BI,b8=$(2,(t,e)=>t.unsafeMap.has(e.key)?ly(t.unsafeMap.get(e.key)):h8(e)?ly(iE(e)):sE),_8=$(2,(t,e)=>{const n=new Map(t.unsafeMap);for(const[s,a]of e.unsafeMap)n.set(s,a);return Wo(n)}),Tc=a8,S8=Wo,v8=PI,Rb=f8,aE=m8,tm=qI,za=p8,KI=y8,HI=BI,em=b8,Oc=_8,$8=o8,kb=c8,oE=t=>(e,n)=>e===n||t(e,n),w8=$(2,(t,e)=>oE((n,s)=>t(e(n),e(s)))),E8=t=>oE((e,n)=>{if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(!t(e[s],n[s]))return!1;return!0}),cE=Symbol.for("effect/Either"),VI={...Zd,[cE]:{_R:t=>t},[pe](){return this.toJSON()},toString(){return Te(this.toJSON())}},T8=Object.assign(Object.create(VI),{_tag:"Right",_op:"Right",[It](t){return uE(t)&&GI(t)&&wt(this.right,t.right)},[Dt](){return Gt(ft(this._tag))(ft(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:Re(this.right)}}}),O8=Object.assign(Object.create(VI),{_tag:"Left",_op:"Left",[It](t){return uE(t)&&YI(t)&&wt(this.left,t.left)},[Dt](){return Gt(ft(this._tag))(ft(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:Re(this.left)}}}),uE=t=>_t(t,cE),YI=t=>t._tag==="Left",GI=t=>t._tag==="Right",R8=t=>{const e=Object.create(O8);return e.left=t,e},k8=t=>{const e=Object.create(T8);return e.right=t,e},M8=cE,Jt=k8,Ot=R8,A8=uE,Fn=YI,ri=GI,C8=$(2,(t,e)=>Fn(t)?Ot(e(t.left)):Jt(t.right)),N8=$(2,(t,e)=>ri(t)?Jt(e(t.right)):Ot(t.left)),$r=$(2,(t,{onLeft:e,onRight:n})=>Fn(t)?e(t.left):n(t.right)),x8=$r({onLeft:At,onRight:At}),JI=$(2,(t,e)=>{if(ri(t))return t.right;throw e(t.left)}),I8=JI(()=>new Error("getOrThrow called on a Left")),QI=t=>t.length>0,XI=t=>(e,n)=>e===n?0:t(e,n),F8=XI((t,e)=>t<e?-1:1),ZI=$(2,(t,e)=>XI((n,s)=>t(e(n),e(s)))),D8=t=>$(2,(e,n)=>t(e,n)===1),z8=Symbol.for("effect/Option"),at=()=>sE,ht=ly,pn=zI,Ue=UI,He=$(2,(t,{onNone:e,onSome:n})=>pn(t)?e():n(t.value)),Ee=$(2,(t,e)=>pn(t)?e():t.value),Ha=$(2,(t,e)=>pn(t)?e():t),U8=$(2,(t,e)=>pn(t)?ht(e()):t),ef=t=>t==null?at():ht(t),Xs=Ee(wI),L8=t=>(...e)=>{try{return ht(t(...e))}catch{return at()}},WI=$(2,(t,e)=>{if(Ue(t))return t.value;throw e()}),j8=WI(()=>new Error("getOrThrow called on a None")),Po=$(2,(t,e)=>pn(t)?at():ht(e(t.value))),nf=$(2,(t,e)=>pn(t)?at():e(t.value)),P8=$(2,(t,e)=>pn(t)?at():ef(e(t.value))),q8=nf,B8=$(2,(t,e)=>q8(t,n=>e(n)?ly(n):sE)),K8=t=>$(2,(e,n)=>pn(e)?!1:t(e.value,n)),H8=Ww(),V8=K8(H8),Y8=$(2,(t,e)=>pn(t)?!1:e(t.value)),G8=(...t)=>t,J8=t=>{const n=t[Symbol.iterator]().next();if(n.done)throw new Error("unsafeHead: empty iterable");return n.value},Mb=t=>new Array(t),Q8=$(2,(t,e)=>{const n=Math.max(1,Math.floor(t)),s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a);return s}),le=t=>Array.isArray(t)?t:Array.from(t),X8=t=>Array.isArray(t)?t:[t],Z8=$(2,(t,{onEmpty:e,onNonEmpty:n})=>gn(t)?n(ur(t),tc(t)):e()),hy=$(2,(t,e)=>[e,...t]),W8=$(2,(t,e)=>[...t,e]),t3=$(2,(t,e)=>le(t).concat(le(e))),tH=Array.isArray,eH=t=>t.length===0,nH=eH,Ag=QI,gn=QI,e3=(t,e)=>t<0||t>=e.length,rH=(t,e)=>Math.floor(Math.min(Math.max(0,t),e.length)),sH=$(2,(t,e)=>{const n=Math.floor(e);return e3(n,t)?at():ht(t[n])}),n3=$(2,(t,e)=>{const n=Math.floor(e);if(e3(n,t))throw new Error(`Index ${n} out of bounds`);return t[n]}),rd=sH(0),ur=n3(0),iH=t=>gn(t)?ht(r3(t)):at(),r3=t=>t[t.length-1],tc=t=>t.slice(1),aH=(t,e)=>{let n=0;for(const s of t){if(!e(s,n))break;n++}return n},oH=$(2,(t,e)=>s3(t,aH(t,e))),cH=$(2,(t,e)=>{const n=le(t);return n.slice(rH(e,n),n.length)}),AA=t=>Array.from(t).reverse(),gd=$(2,(t,e)=>{const n=Array.from(t);return n.sort(e),n}),CA=$(2,(t,e)=>uH(t,e,G8)),uH=$(3,(t,e,n)=>{const s=le(t),a=le(e);if(gn(s)&&gn(a)){const c=[n(ur(s),ur(a))],l=Math.min(s.length,a.length);for(let d=1;d<l;d++)c[d]=n(s[d],a[d]);return c}return[]}),lH=Ww(),s3=$(2,(t,e)=>{const n=Array.from(t),s=Math.floor(e);return gn(n)?s>=1?fH(n,s):[[],n]:[n,[]]}),fH=$(2,(t,e)=>{const n=Math.max(1,Math.floor(e));return n>=t.length?[Bh(t),[]]:[hy(t.slice(1,n),ur(t)),t.slice(n)]}),Bh=t=>t.slice(),hH=$(3,(t,e,n)=>{const s=le(t),a=le(e);return gn(s)?gn(a)?i3(n)(t3(s,a)):s:a}),Cg=$(2,(t,e)=>hH(t,e,lH)),ec=()=>[],$s=t=>[t],qo=$(2,(t,e)=>t.map(e)),dy=$(2,(t,e)=>{if(nH(t))return[];const n=[];for(let s=0;s<t.length;s++){const a=e(t[s],s);for(let c=0;c<a.length;c++)n.push(a[c])}return n}),dH=dy(At),mH=$(2,(t,e)=>{const n=le(t),s=[];for(let a=0;a<n.length;a++)e(n[a],a)&&s.push(n[a]);return s}),lE=$(3,(t,e,n)=>le(t).reduce((s,a,c)=>n(s,a,c),e)),NA=(t,e)=>{const n=[];let s=t,a;for(;Ue(a=e(s));){const[c,l]=a.value;n.push(c),s=l}return n},fE=E8,i3=$(2,(t,e)=>{const n=le(t);if(gn(n)){const s=[ur(n)],a=tc(n);for(const c of a)s.every(l=>!e(c,l))&&s.push(c);return s}return[]}),pH=t=>i3(t,Ww()),rf=$(2,(t,e)=>le(t).join(e)),a3=Symbol.for("effect/Chunk");function gH(t,e,n,s,a){for(let c=e;c<Math.min(t.length,e+a);c++)n[s+c-e]=t[c];return n}const o3=[],yH=t=>oE((e,n)=>e.length===n.length&&ai(e).every((s,a)=>t(s,Va(n,a)))),bH=yH(wt),_H={[a3]:{_A:t=>t},toString(){return Te(this.toJSON())},toJSON(){return{_id:"Chunk",values:ai(this).map(Re)}},[pe](){return this.toJSON()},[It](t){return Ab(t)&&bH(this,t)},[Dt](){return ve(this,Xd(ai(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return o3[Symbol.iterator]();default:return ai(this)[Symbol.iterator]()}},pipe(){return lt(this,arguments)}},Ie=t=>{const e=Object.create(_H);switch(e.backing=t,t._tag){case"IEmpty":{e.length=0,e.depth=0,e.left=e,e.right=e;break}case"IConcat":{e.length=t.left.length+t.right.length,e.depth=1+Math.max(t.left.depth,t.right.depth),e.left=t.left,e.right=t.right;break}case"IArray":{e.length=t.array.length,e.depth=0,e.left=Es,e.right=Es;break}case"ISingleton":{e.length=1,e.depth=0,e.left=Es,e.right=Es;break}case"ISlice":{e.length=t.length,e.depth=t.chunk.depth+1,e.left=Es,e.right=Es;break}}return e},Ab=t=>_t(t,a3),Es=Ie({_tag:"IEmpty"}),ke=()=>Es,L0=(...t)=>$H(t),Ve=t=>Ie({_tag:"ISingleton",a:t}),nc=t=>Ab(t)?t:Dn(le(t)),Fv=(t,e,n)=>{switch(t.backing._tag){case"IArray":{gH(t.backing.array,0,e,n,t.length);break}case"IConcat":{Fv(t.left,e,n),Fv(t.right,e,n+t.left.length);break}case"ISingleton":{e[n]=t.backing.a;break}case"ISlice":{let s=0,a=n;for(;s<t.length;)e[a]=Va(t,s),s+=1,a+=1;break}}},SH=t=>{switch(t.backing._tag){case"IEmpty":return o3;case"IArray":return t.backing.array;default:{const e=new Array(t.length);return Fv(t,e,0),t.backing={_tag:"IArray",array:e},t.left=Es,t.right=Es,t.depth=0,e}}},ai=SH,vH=t=>{switch(t.backing._tag){case"IEmpty":case"ISingleton":return t;case"IArray":return Ie({_tag:"IArray",array:AA(t.backing.array)});case"IConcat":return Ie({_tag:"IConcat",left:Wi(t.backing.right),right:Wi(t.backing.left)});case"ISlice":return Dn(AA(ai(t)))}},Wi=vH,c3=$(2,(t,e)=>e<0||e>=t.length?at():ht(Va(t,e))),Dn=t=>t.length===0?ke():t.length===1?Ve(t[0]):Ie({_tag:"IArray",array:t}),$H=t=>Dn(t),Va=$(2,(t,e)=>{switch(t.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(e!==0)throw new Error("Index out of bounds");return t.backing.a}case"IArray":{if(e>=t.length||e<0)throw new Error("Index out of bounds");return t.backing.array[e]}case"IConcat":return e<t.left.length?Va(t.left,e):Va(t.right,e-t.left.length);case"ISlice":return Va(t.backing.chunk,e+t.backing.offset)}}),yd=$(2,(t,e)=>_e(t,Ve(e))),Kn=$(2,(t,e)=>_e(Ve(e),t)),my=$(2,(t,e)=>{if(e<=0)return Es;if(e>=t.length)return t;switch(t.backing._tag){case"ISlice":return Ie({_tag:"ISlice",chunk:t.backing.chunk,length:e,offset:t.backing.offset});case"IConcat":return e>t.left.length?Ie({_tag:"IConcat",left:t.left,right:my(t.right,e-t.left.length)}):my(t.left,e);default:return Ie({_tag:"ISlice",chunk:t,offset:0,length:e})}}),ja=$(2,(t,e)=>{if(e<=0)return t;if(e>=t.length)return Es;switch(t.backing._tag){case"ISlice":return Ie({_tag:"ISlice",chunk:t.backing.chunk,offset:t.backing.offset+e,length:t.backing.length-e});case"IConcat":return e>t.left.length?ja(t.right,e-t.left.length):Ie({_tag:"IConcat",left:ja(t.left,e),right:t.right});default:return Ie({_tag:"ISlice",chunk:t,offset:e,length:t.length-e})}}),_e=$(2,(t,e)=>{if(t.backing._tag==="IEmpty")return e;if(e.backing._tag==="IEmpty")return t;const n=e.depth-t.depth;if(Math.abs(n)<=1)return Ie({_tag:"IConcat",left:t,right:e});if(n<-1)if(t.left.depth>=t.right.depth){const s=_e(t.right,e);return Ie({_tag:"IConcat",left:t.left,right:s})}else{const s=_e(t.right.right,e);if(s.depth===t.depth-3){const a=Ie({_tag:"IConcat",left:t.right.left,right:s});return Ie({_tag:"IConcat",left:t.left,right:a})}else{const a=Ie({_tag:"IConcat",left:t.left,right:t.right.left});return Ie({_tag:"IConcat",left:a,right:s})}}else if(e.right.depth>=e.left.depth){const s=_e(t,e.left);return Ie({_tag:"IConcat",left:s,right:e.right})}else{const s=_e(t,e.left.left);if(s.depth===e.depth-3){const a=Ie({_tag:"IConcat",left:s,right:e.left.right});return Ie({_tag:"IConcat",left:a,right:e.right})}else{const a=Ie({_tag:"IConcat",left:e.left.right,right:e.right});return Ie({_tag:"IConcat",left:s,right:a})}}}),Cb=$(2,(t,e)=>Dn(mH(t,e))),Nb=t=>t.length===0,ta=t=>t.length>0,hE=c3(0),dE=t=>Va(t,0),si=dE,wH=t=>c3(t,t.length-1),EH=$(2,(t,e)=>t.backing._tag==="ISingleton"?Ve(e(t.backing.a,0)):Dn(w(ai(t),qo((n,s)=>e(n,s))))),Ui=t=>ja(t,1),TH=$(2,(t,e)=>ja(t,t.length-e)),OH=lE,rc=5,mE=Math.pow(2,rc),RH=mE-1,kH=mE/2,MH=mE/4;function AH(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function ll(t,e){return e>>>t&RH}function ju(t){return 1<<t}function u3(t,e){return AH(t&e-1)}const CH=(t,e)=>({value:t,previous:e});function Yu(t,e,n,s){let a=s;if(!t){const c=s.length;a=new Array(c);for(let l=0;l<c;++l)a[l]=s[l]}return a[e]=n,a}function l3(t,e,n){const s=n.length-1;let a=0,c=0,l=n;if(t)a=c=e;else for(l=new Array(s);a<e;)l[c++]=n[a++];for(++a;a<=s;)l[c++]=n[a++];return t&&(l.length=s),l}function NH(t,e,n,s){const a=s.length;if(t){let m=a;for(;m>=e;)s[m--]=s[m];return s[e]=n,s}let c=0,l=0;const d=new Array(a+1);for(;c<e;)d[l++]=s[c++];for(d[e]=n;c<a;)d[++l]=s[c++];return d}let fl=class f3{_tag="EmptyNode";modify(e,n,s,a,c,l){const d=s(at());return pn(d)?new f3:(++l.value,new Ng(e,a,c,d))}};function Ms(t){return EI(t,"EmptyNode")}function xH(t){return Ms(t)||t._tag==="LeafNode"||t._tag==="CollisionNode"}function xb(t,e){return Ms(t)?!1:e===t.edit}let Ng=class Dv{edit;hash;key;value;_tag="LeafNode";constructor(e,n,s,a){this.edit=e,this.hash=n,this.key=s,this.value=a}modify(e,n,s,a,c,l){if(wt(c,this.key)){const m=s(this.value);return m===this.value?this:pn(m)?(--l.value,new fl):xb(this,e)?(this.value=m,this):new Dv(e,a,c,m)}const d=s(at());return pn(d)?this:(++l.value,m3(e,n,this.hash,this,a,new Dv(e,a,c,d)))}},IH=class h3{edit;hash;children;_tag="CollisionNode";constructor(e,n,s){this.edit=e,this.hash=n,this.children=s}modify(e,n,s,a,c,l){if(a===this.hash){const m=xb(this,e),p=this.updateCollisionList(m,e,this.hash,this.children,s,c,l);return p===this.children?this:p.length>1?new h3(e,this.hash,p):p[0]}const d=s(at());return pn(d)?this:(++l.value,m3(e,n,this.hash,this,a,new Ng(e,a,c,d)))}updateCollisionList(e,n,s,a,c,l,d){const m=a.length;for(let g=0;g<m;++g){const b=a[g];if("key"in b&&wt(l,b.key)){const S=b.value,v=c(S);return v===S?a:pn(v)?(--d.value,l3(e,g,a)):Yu(e,g,new Ng(n,s,l,v),a)}}const p=c(at());return pn(p)?a:(++d.value,Yu(e,m,new Ng(n,s,l,p),a))}},zv=class Uv{edit;mask;children;_tag="IndexedNode";constructor(e,n,s){this.edit=e,this.mask=n,this.children=s}modify(e,n,s,a,c,l){const d=this.mask,m=this.children,p=ll(n,a),g=ju(p),b=u3(d,g),S=d&g,v=xb(this,e);if(!S){const q=new fl().modify(e,n+rc,s,a,c,l);return q?m.length>=kH?zH(e,p,q,d,m):new Uv(e,d|g,NH(v,b,q,m)):this}const E=m[b],D=E.modify(e,n+rc,s,a,c,l);if(E===D)return this;let C=d,N;if(Ms(D)){if(C&=~g,!C)return new fl;if(m.length<=2&&xH(m[b^1]))return m[b^1];N=l3(v,b,m)}else N=Yu(v,b,D,m);return v?(this.mask=C,this.children=N,this):new Uv(e,C,N)}},FH=class d3{edit;size;children;_tag="ArrayNode";constructor(e,n,s){this.edit=e,this.size=n,this.children=s}modify(e,n,s,a,c,l){let d=this.size;const m=this.children,p=ll(n,a),g=m[p],b=(g||new fl).modify(e,n+rc,s,a,c,l);if(g===b)return this;const S=xb(this,e);let v;if(Ms(g)&&!Ms(b))++d,v=Yu(S,p,b,m);else if(!Ms(g)&&Ms(b)){if(--d,d<=MH)return DH(e,d,p,m);v=Yu(S,p,new fl,m)}else v=Yu(S,p,b,m);return S?(this.size=d,this.children=v,this):new d3(e,d,v)}};function DH(t,e,n,s){const a=new Array(e-1);let c=0,l=0;for(let d=0,m=s.length;d<m;++d)if(d!==n){const p=s[d];p&&!Ms(p)&&(a[c++]=p,l|=1<<d)}return new zv(t,l,a)}function zH(t,e,n,s,a){const c=[];let l=s,d=0;for(let m=0;l;++m)l&1&&(c[m]=a[d++]),l>>>=1;return c[e]=n,new FH(t,d+1,c)}function UH(t,e,n,s,a,c){if(n===a)return new IH(t,n,[c,s]);const l=ll(e,n),d=ll(e,a);if(l===d)return m=>new zv(t,ju(l)|ju(d),[m]);{const m=l<d?[s,c]:[c,s];return new zv(t,ju(l)|ju(d),m)}}function m3(t,e,n,s,a,c){let l,d=e;for(;;){const m=UH(t,d,n,s,a,c);if(typeof m=="function")l=CH(m,l),d=d+rc;else{let p=m;for(;l!=null;)p=l.value(p),l=l.previous;return p}}}const p3="effect/HashMap",Lv=Symbol.for(p3),LH={[Lv]:Lv,[Symbol.iterator](){return new g3(this,(t,e)=>[t,e])},[Dt](){let t=ft(p3);for(const e of this)t^=w(ft(e[0]),Gt(ft(e[1])));return ve(this,t)},[It](t){if(qH(t)){if(t._size!==this._size)return!1;for(const e of this){const n=w(t,gE(e[0],ft(e[0])));if(pn(n))return!1;if(!wt(e[1],n.value))return!1}return!0}return!1},toString(){return Te(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(Re)}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}},pE=(t,e,n,s)=>{const a=Object.create(LH);return a._editable=t,a._edit=e,a._root=n,a._size=s,a};let g3=class y3{map;f;v;constructor(e,n){this.map=e,this.f=n,this.v=b3(this.map._root,this.f,void 0)}next(){if(pn(this.v))return{done:!0,value:void 0};const e=this.v.value;return this.v=py(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new y3(this.map,this.f)}};const py=t=>t?_3(t[0],t[1],t[2],t[3],t[4]):at(),b3=(t,e,n=void 0)=>{switch(t._tag){case"LeafNode":return Ue(t.value)?ht({value:e(t.key,t.value.value),cont:n}):py(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const s=t.children;return _3(s.length,s,0,e,n)}default:return py(n)}},_3=(t,e,n,s,a)=>{for(;n<t;){const c=e[n++];if(c&&!Ms(c))return b3(c,s,[t,e,n,s,a])}return py(a)},jH=pE(!1,0,new fl,0),Ib=()=>jH,PH=t=>{const e=v3(Ib());for(const n of t)bd(e,n[0],n[1]);return YH(e)},qH=t=>_t(t,Lv),BH=t=>t&&Ms(t._root),KH=$(2,(t,e)=>gE(t,e,ft(e))),gE=$(3,(t,e,n)=>{let s=t._root,a=0;for(;;)switch(s._tag){case"LeafNode":return wt(e,s.key)?s.value:at();case"CollisionNode":{if(n===s.hash){const c=s.children;for(let l=0,d=c.length;l<d;++l){const m=c[l];if("key"in m&&wt(e,m.key))return m.value}}return at()}case"IndexedNode":{const c=ll(a,n),l=ju(c);if(s.mask&l){s=s.children[u3(s.mask,l)],a+=rc;break}return at()}case"ArrayNode":{if(s=s.children[ll(a,n)],s){a+=rc;break}return at()}default:return at()}}),HH=$(2,(t,e)=>Ue(gE(t,e,ft(e)))),bd=$(3,(t,e,n)=>yE(t,e,()=>ht(n))),VH=$(3,(t,e,n)=>t._editable?(t._root=e,t._size=n,t):e===t._root?t:pE(t._editable,t._edit,e,n)),S3=t=>new g3(t,e=>e),jv=t=>t._size,v3=t=>pE(!0,t._edit+1,t._root,t._size),YH=t=>(t._editable=!1,t),yE=$(3,(t,e,n)=>GH(t,e,ft(e),n)),GH=$(4,(t,e,n,s)=>{const a={value:t._size},c=t._root.modify(t._editable?t._edit:NaN,0,s,n,e,a);return w(t,VH(c,a.value))}),xA=$(2,(t,e)=>yE(t,e,at)),JH=$(2,(t,e)=>Fb(t,Ib(),(n,s,a)=>bd(n,a,e(s,a)))),QH=$(2,(t,e)=>Fb(t,void 0,(n,s,a)=>e(s,a))),Fb=$(3,(t,e,n)=>{const s=t._root;if(s._tag==="LeafNode")return Ue(s.value)?n(e,s.value.value,s.key):e;if(s._tag==="EmptyNode")return e;const a=[s.children];let c;for(;c=a.pop();)for(let l=0,d=c.length;l<d;){const m=c[l++];m&&!Ms(m)&&(m._tag==="LeafNode"?Ue(m.value)&&(e=n(e,m.value.value,m.key)):a.push(m.children))}return e}),$3="effect/HashSet",Pv=Symbol.for($3),XH={[Pv]:Pv,[Symbol.iterator](){return S3(this._keyMap)},[Dt](){return ve(this,Gt(ft(this._keyMap))(ft($3)))},[It](t){return ZH(t)?jv(this._keyMap)===jv(t._keyMap)&&wt(this._keyMap,t._keyMap):!1},toString(){return Te(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(Re)}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}},Db=t=>{const e=Object.create(XH);return e._keyMap=t,e},ZH=t=>_t(t,Pv),WH=Db(Ib()),zb=()=>WH,t7=t=>{const e=bE(zb());for(const n of t)_d(e,n);return _E(e)},e7=(...t)=>{const e=bE(zb());for(const n of t)_d(e,n);return _E(e)},n7=$(2,(t,e)=>HH(t._keyMap,e)),r7=t=>jv(t._keyMap),bE=t=>Db(v3(t._keyMap)),_E=t=>(t._keyMap._editable=!1,t),w3=$(2,(t,e)=>{const n=bE(t);return e(n),_E(n)}),_d=$(2,(t,e)=>t._keyMap._editable?(bd(e,!0)(t._keyMap),t):Db(bd(e,!0)(t._keyMap))),E3=$(2,(t,e)=>t._keyMap._editable?(xA(e)(t._keyMap),t):Db(xA(e)(t._keyMap))),s7=$(2,(t,e)=>w3(t,n=>{for(const s of e)E3(n,s)})),i7=$(2,(t,e)=>w3(zb(),n=>{a7(t,s=>_d(n,s));for(const s of e)_d(n,s)})),a7=$(2,(t,e)=>QH(t._keyMap,(n,s)=>e(s))),o7=$(3,(t,e,n)=>Fb(t._keyMap,e,(s,a,c)=>n(s,c))),sc=zb,c7=t7,SE=e7,u7=n7,vE=r7,sd=_d,T3=E3,IA=s7,Sd=i7,vd=o7,sf="Die",ic="Empty",Rc="Fail",af="Interrupt",hl="Parallel",dl="Sequential",O3="effect/Cause",R3=Symbol.for(O3),l7={_E:t=>t},of={[R3]:l7,[Dt](){return w(ft(O3),Gt(ft(S7(this))),ve(this))},[It](t){return k3(t)&&_7(this,t)},pipe(){return lt(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:Re(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:Re(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:Re(this.left),right:Re(this.right)}}},toString(){return cf(this)},[pe](){return this.toJSON()}},Xa=(()=>{const t=Object.create(of);return t._tag=ic,t})(),ac=t=>{const e=Object.create(of);return e._tag=Rc,e.error=t,e},fs=t=>{const e=Object.create(of);return e._tag=sf,e.defect=t,e},Rs=t=>{const e=Object.create(of);return e._tag=af,e.fiberId=t,e},oc=(t,e)=>{const n=Object.create(of);return n._tag=hl,n.left=t,n.right=e,n},jn=(t,e)=>{const n=Object.create(of);return n._tag=dl,n.left=t,n.right=e,n},k3=t=>_t(t,R3),f7=t=>t._tag===ic,h7=t=>t._tag===Rc,M3=t=>t._tag===sf,d7=t=>t._tag===ic?!0:ml(t,!0,(e,n)=>{switch(n._tag){case ic:return ht(e);case sf:case Rc:case af:return ht(!1);default:return at()}}),A3=t=>Ue(p7(t)),$E=t=>OE(void 0,$7)(t),m7=t=>Wi(ml(t,ke(),(e,n)=>n._tag===Rc?ht(w(e,Kn(n.error))):at())),C3=t=>Wi(ml(t,ke(),(e,n)=>n._tag===sf?ht(w(e,Kn(n.defect))):at())),wE=t=>ml(t,sc(),(e,n)=>n._tag===af?ht(w(e,sd(n.fiberId))):at()),N3=t=>EE(t,e=>e._tag===Rc?ht(e.error):at()),x3=t=>{const e=N3(t);switch(e._tag){case"None":return Jt(t);case"Some":return Ot(e.value)}},p7=t=>EE(t,e=>e._tag===af?ht(e.fiberId):at()),FA=t=>TE(t,{onEmpty:Xa,onFail:()=>Xa,onDie:fs,onInterrupt:Rs,onSequential:jn,onParallel:oc}),g7=t=>TE(t,{onEmpty:Xa,onFail:fs,onDie:fs,onInterrupt:Rs,onSequential:jn,onParallel:oc}),y7=$(2,(t,e)=>b7(t,n=>ac(e(n)))),b7=$(2,(t,e)=>TE(t,{onEmpty:Xa,onFail:n=>e(n),onDie:n=>fs(n),onInterrupt:n=>Rs(n),onSequential:(n,s)=>jn(n,s),onParallel:(n,s)=>oc(n,s)})),_7=(t,e)=>{let n=Ve(t),s=Ve(e);for(;ta(n)&&ta(s);){const[a,c]=w(si(n),ml([sc(),ke()],([m,p],g)=>{const[b,S]=qv(g);return ht([w(m,Sd(b)),w(p,_e(S))])})),[l,d]=w(si(s),ml([sc(),ke()],([m,p],g)=>{const[b,S]=qv(g);return ht([w(m,Sd(b)),w(p,_e(S))])}));if(!wt(a,l))return!1;n=c,s=d}return!0},S7=t=>v7(Ve(t),ke()),v7=(t,e)=>{for(;;){const[n,s]=w(t,lE([sc(),ke()],([c,l],d)=>{const[m,p]=qv(d);return[w(c,Sd(m)),w(l,_e(p))]})),a=vE(n)>0?w(e,Kn(n)):e;if(Nb(s))return Wi(a);t=s,e=a}throw new Error(wb("Cause.flattenCauseLoop"))},EE=$(2,(t,e)=>{const n=[t];for(;n.length>0;){const s=n.pop(),a=e(s);switch(a._tag){case"None":{switch(s._tag){case dl:case hl:{n.push(s.right),n.push(s.left);break}}break}case"Some":return a}}return at()}),qv=t=>{let e=t;const n=[];let s=sc(),a=ke();for(;e!==void 0;)switch(e._tag){case ic:{if(n.length===0)return[s,a];e=n.pop();break}case Rc:{if(s=sd(s,L0(e._tag,e.error)),n.length===0)return[s,a];e=n.pop();break}case sf:{if(s=sd(s,L0(e._tag,e.defect)),n.length===0)return[s,a];e=n.pop();break}case af:{if(s=sd(s,L0(e._tag,e.fiberId)),n.length===0)return[s,a];e=n.pop();break}case dl:{switch(e.left._tag){case ic:{e=e.right;break}case dl:{e=jn(e.left.left,jn(e.left.right,e.right));break}case hl:{e=oc(jn(e.left.left,e.right),jn(e.left.right,e.right));break}default:{a=Kn(a,e.right),e=e.left;break}}break}case hl:{n.push(e.right),e=e.left;break}}throw new Error(wb("Cause.evaluateCauseLoop"))},$7={emptyCase:RA,failCase:Nv,dieCase:Nv,interruptCase:RA,sequentialCase:(t,e,n)=>e&&n,parallelCase:(t,e,n)=>e&&n},DA="SequentialCase",zA="ParallelCase",TE=$(2,(t,{onDie:e,onEmpty:n,onFail:s,onInterrupt:a,onParallel:c,onSequential:l})=>OE(t,void 0,{emptyCase:()=>n,failCase:(d,m)=>s(m),dieCase:(d,m)=>e(m),interruptCase:(d,m)=>a(m),sequentialCase:(d,m,p)=>l(m,p),parallelCase:(d,m,p)=>c(m,p)})),ml=$(3,(t,e,n)=>{let s=e,a=t;const c=[];for(;a!==void 0;){const l=n(s,a);switch(s=Ue(l)?l.value:s,a._tag){case dl:{c.push(a.right),a=a.left;break}case hl:{c.push(a.right),a=a.left;break}default:{a=void 0;break}}a===void 0&&c.length>0&&(a=c.pop())}return s}),OE=$(3,(t,e,n)=>{const s=[t],a=[];for(;s.length>0;){const l=s.pop();switch(l._tag){case ic:{a.push(Jt(n.emptyCase(e)));break}case Rc:{a.push(Jt(n.failCase(e,l.error)));break}case sf:{a.push(Jt(n.dieCase(e,l.defect)));break}case af:{a.push(Jt(n.interruptCase(e,l.fiberId)));break}case dl:{s.push(l.right),s.push(l.left),a.push(Ot({_tag:DA}));break}case hl:{s.push(l.right),s.push(l.left),a.push(Ot({_tag:zA}));break}}}const c=[];for(;a.length>0;){const l=a.pop();switch(l._tag){case"Left":{switch(l.left._tag){case DA:{const d=c.pop(),m=c.pop(),p=n.sequentialCase(e,d,m);c.push(p);break}case zA:{const d=c.pop(),m=c.pop(),p=n.parallelCase(e,d,m);c.push(p);break}}break}case"Right":{c.push(l.right);break}}}if(c.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return c.pop()}),cf=(t,e)=>$E(t)?"All fibers interrupted without errors.":D3(t).map(function(n){return e?.renderErrorCause!==!0||n.cause===void 0?n.stack:`${n.stack} {
${I3(n.cause,"  ")}
}`}).join(`
`),I3=(t,e)=>{const n=t.stack.split(`
`);let s=`${e}[cause]: ${n[0]}`;for(let a=1,c=n.length;a<c;a++)s+=`
${e}${n[a]}`;return t.cause&&(s+=` {
${I3(t.cause,`${e}  `)}
${e}}`),s};let UA=class F3 extends globalThis.Error{span=void 0;constructor(e){const n=typeof e=="object"&&e!==null,s=Error.stackTraceLimit;Error.stackTraceLimit=1,super(w7(e),n&&"cause"in e&&typeof e.cause<"u"?{cause:new F3(e.cause)}:void 0),this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=s,this.name=e instanceof Error?e.name:"Error",n&&(pl in e&&(this.span=e[pl]),Object.keys(e).forEach(a=>{a in this||(this[a]=e[a])})),this.stack=O7(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}};const w7=t=>{if(typeof t=="string")return t;if(typeof t=="object"&&t!==null&&t instanceof Error)return t.message;try{if(_t(t,"toString")&&Jd(t.toString)&&t.toString!==Object.prototype.toString&&t.toString!==globalThis.Array.prototype.toString)return t.toString()}catch{}return AI(t)},E7=/\((.*)\)/g,T7=zt("effect/Tracer/spanToTrace",()=>new WeakMap),O7=(t,e,n)=>{const s=[t],a=e.startsWith(t)?e.slice(t.length).split(`
`):e.split(`
`);for(let c=1;c<a.length;c++){if(a[c].includes(" at new BaseEffectError")||a[c].includes(" at new YieldableError")){c++;continue}if(a[c].includes("Generator.next")||a[c].includes("effect_internal_function"))break;s.push(a[c].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let c=n,l=0;for(;c&&c._tag==="Span"&&l<10;){const d=T7.get(c);if(typeof d=="function"){const m=d();if(typeof m=="string"){const p=m.matchAll(E7);let g=!1;for(const[,b]of p)g=!0,s.push(`    at ${c.name} (${b})`);g||s.push(`    at ${c.name} (${m.replace(/^at /,"")})`)}else s.push(`    at ${c.name}`)}else s.push(`    at ${c.name}`);c=Xs(c.parent),l++}}return s.join(`
`)},pl=Symbol.for("effect/SpanAnnotation"),D3=t=>OE(t,void 0,{emptyCase:()=>[],dieCase:(e,n)=>[new UA(n)],failCase:(e,n)=>[new UA(n)],interruptCase:()=>[],parallelCase:(e,n,s)=>[...n,...s],sequentialCase:(e,n,s)=>[...n,...s]}),Bv=Symbol.for("effect/Duration"),z3=BigInt(0),LA=BigInt(24),lg=BigInt(60),Kv=BigInt(1e3),jA=BigInt(1e6),PA=BigInt(1e9),R7=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,li=t=>{if(U3(t))return t;if(Zi(t))return yl(t);if($b(t))return j0(t);if(Array.isArray(t)&&t.length===2&&t.every(Zi))return t[0]===-1/0||t[1]===-1/0||Number.isNaN(t[0])||Number.isNaN(t[1])?gl:t[0]===1/0||t[1]===1/0?C7:j0(BigInt(Math.round(t[0]*1e9))+BigInt(Math.round(t[1])));if(ds(t)){const e=R7.exec(t);if(e){const[n,s,a]=e,c=Number(s);switch(a){case"nano":case"nanos":return j0(BigInt(s));case"micro":case"micros":return N7(BigInt(s));case"milli":case"millis":return yl(c);case"second":case"seconds":return x7(c);case"minute":case"minutes":return I7(c);case"hour":case"hours":return F7(c);case"day":case"days":return D7(c);case"week":case"weeks":return z7(c)}}}throw new Error("Invalid DurationInput")},qA={_tag:"Millis",millis:0},k7={_tag:"Infinity"},M7={[Bv]:Bv,[Dt](){return ve(this,MI(this.value))},[It](t){return U3(t)&&K7(this,t)},toString(){return`Duration(${V7(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:L7(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}},mi=t=>{const e=Object.create(M7);return Zi(t)?isNaN(t)||t<=0?e.value=qA:Number.isFinite(t)?Number.isInteger(t)?e.value={_tag:"Millis",millis:t}:e.value={_tag:"Nanos",nanos:BigInt(Math.round(t*1e6))}:e.value=k7:t<=z3?e.value=qA:e.value={_tag:"Nanos",nanos:t},e},U3=t=>_t(t,Bv),A7=t=>{switch(t.value._tag){case"Millis":return t.value.millis===0;case"Nanos":return t.value.nanos===z3;case"Infinity":return!1}},gl=mi(0),C7=mi(1/0),j0=t=>mi(t),N7=t=>mi(t*Kv),yl=t=>mi(t),x7=t=>mi(t*1e3),I7=t=>mi(t*6e4),F7=t=>mi(t*36e5),D7=t=>mi(t*864e5),z7=t=>mi(t*6048e5),Hv=t=>j7(t,{onMillis:e=>e,onNanos:e=>Number(e)/1e6}),U7=t=>{const e=li(t);switch(e.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return e.value.nanos;case"Millis":return BigInt(Math.round(e.value.millis*1e6))}},L7=t=>{const e=li(t);switch(e.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(e.value.nanos/PA),Number(e.value.nanos%PA)];case"Millis":return[Math.floor(e.value.millis/1e3),Math.round(e.value.millis%1e3*1e6)]}},j7=$(2,(t,e)=>{const n=li(t);switch(n.value._tag){case"Nanos":return e.onNanos(n.value.nanos);case"Infinity":return e.onMillis(1/0);case"Millis":return e.onMillis(n.value.millis)}}),RE=$(3,(t,e,n)=>{const s=li(t),a=li(e);if(s.value._tag==="Infinity"||a.value._tag==="Infinity")return n.onMillis(Hv(s),Hv(a));if(s.value._tag==="Nanos"||a.value._tag==="Nanos"){const c=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6)),l=a.value._tag==="Nanos"?a.value.nanos:BigInt(Math.round(a.value.millis*1e6));return n.onNanos(c,l)}return n.onMillis(s.value.millis,a.value.millis)}),P7=(t,e)=>RE(t,e,{onMillis:(n,s)=>n===s,onNanos:(n,s)=>n===s}),q7=$(2,(t,e)=>RE(t,e,{onMillis:(n,s)=>n<=s,onNanos:(n,s)=>n<=s})),B7=$(2,(t,e)=>RE(t,e,{onMillis:(n,s)=>n>=s,onNanos:(n,s)=>n>=s})),K7=$(2,(t,e)=>P7(li(t),li(e))),H7=t=>{const e=li(t);if(e.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=U7(e),s=n/jA,a=s/Kv,c=a/lg,l=c/lg,d=l/LA;return{days:Number(d),hours:Number(l%LA),minutes:Number(c%lg),seconds:Number(a%lg),millis:Number(s%Kv),nanos:Number(n%jA)}},V7=t=>{const e=li(t);if(e.value._tag==="Infinity")return"Infinity";if(A7(e))return"0";const n=H7(e),s=[];return n.days!==0&&s.push(`${n.days}d`),n.hours!==0&&s.push(`${n.hours}h`),n.minutes!==0&&s.push(`${n.minutes}m`),n.seconds!==0&&s.push(`${n.seconds}s`),n.millis!==0&&s.push(`${n.millis}ms`),n.nanos!==0&&s.push(`${n.nanos}ns`),s.join(" ")},BA=Symbol.for("effect/MutableRef"),Y7={[BA]:BA,toString(){return Te(this.toJSON())},toJSON(){return{_id:"MutableRef",current:Re(this.current)}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}},kc=t=>{const e=Object.create(Y7);return e.current=t,e},G7=$(3,(t,e,n)=>wt(e,t.current)?(t.current=n,!0):!1),Qt=t=>t.current,Mc=$(2,(t,e)=>(t.current=e,t)),Ub="effect/FiberId",cc=Symbol.for(Ub),bl="None",Vv="Runtime",Yv="Composite",J7=De(`${Ub}-${bl}`);let Q7=class{[cc]=cc;_tag=bl;id=-1;startTimeMillis=-1;[Dt](){return J7}[It](e){return kE(e)&&e._tag===bl}toString(){return Te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[pe](){return this.toJSON()}},X7=class{id;startTimeMillis;[cc]=cc;_tag=Vv;constructor(e,n){this.id=e,this.startTimeMillis=n}[Dt](){return ve(this,De(`${Ub}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[It](e){return kE(e)&&e._tag===Vv&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return Te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[pe](){return this.toJSON()}},Z7=class{left;right;[cc]=cc;_tag=Yv;constructor(e,n){this.left=e,this.right=n}_hash;[Dt](){return w(De(`${Ub}-${this._tag}`),Gt(ft(this.left)),Gt(ft(this.right)),ve(this))}[It](e){return kE(e)&&e._tag===Yv&&wt(this.left,e.left)&&wt(this.right,e.right)}toString(){return Te(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:Re(this.left),right:Re(this.right)}}[pe](){return this.toJSON()}};const L3=new Q7,kE=t=>_t(t,cc),j3=$(2,(t,e)=>t._tag===bl?e:e._tag===bl?t:new Z7(t,e)),W7=t=>w(t,vd(L3,(e,n)=>j3(n)(e))),gy=t=>{switch(t._tag){case bl:return sc();case Vv:return SE(t.id);case Yv:return w(gy(t.left),Sd(gy(t.right)))}},KA=zt(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>kc(0)),P3=t=>Array.from(gy(t)).map(n=>`#${n}`).join(","),t9=()=>{const t=Qt(KA);return w(KA,Mc(t+1)),new X7(t,Date.now())},Za=L3,e9=j3,n9=W7,r9=gy,s9=P3,q3=t9,ME=Ib,i9=PH,a9=BH,B3=KH,K3=bd,H3=S3,o9=yE,c9=JH,V3=Fb,$d=Symbol.for("effect/List"),Gv=t=>le(t),u9=t=>w8(fE(t),Gv),l9=u9(wt),f9={[$d]:$d,_tag:"Cons",toString(){return Te(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:Gv(this).map(Re)}},[pe](){return this.toJSON()},[It](t){return G3(t)&&this._tag===t._tag&&l9(this,t)},[Dt](){return ve(this,Xd(Gv(this)))},[Symbol.iterator](){let t=!1,e=this;return{next(){if(t)return this.return();if(e._tag==="Nil")return t=!0,this.return();const n=e.head;return e=e.tail,{done:t,value:n}},return(n){return t||(t=!0),{done:!0,value:n}}}},pipe(){return lt(this,arguments)}},yy=(t,e)=>{const n=Object.create(f9);return n.head=t,n.tail=e,n},h9=De("Nil"),d9={[$d]:$d,_tag:"Nil",toString(){return Te(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[pe](){return this.toJSON()},[Dt](){return h9},[It](t){return G3(t)&&this._tag===t._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return lt(this,arguments)}},Y3=Object.create(d9),G3=t=>_t(t,$d),Ki=t=>t._tag==="Nil",m9=t=>t._tag==="Cons",p9=()=>Y3,uc=(t,e)=>yy(t,e),_l=p9,AE=t=>yy(t,Y3),g9=$(2,(t,e)=>b9(e,t)),y9=$(2,(t,e)=>uc(e,t)),b9=$(2,(t,e)=>{if(Ki(t))return e;if(Ki(e))return t;{const n=yy(e.head,t);let s=n,a=e.tail;for(;!Ki(a);){const c=yy(a.head,t);s.tail=c,s=c,a=a.tail}return n}}),_9=$(3,(t,e,n)=>{let s=e,a=t;for(;!Ki(a);)s=n(s,a.head),a=a.tail;return s}),S9=t=>{let e=_l(),n=t;for(;!Ki(n);)e=y9(e,n.head),n=n.tail;return e},Lb=function(){function t(e){e&&Object.assign(this,e)}return t.prototype=rE,t}(),v9=Symbol.for("effect/DifferContextPatch");function HA(t){return t}const nm={...Lb.prototype,[v9]:{_Value:HA,_Patch:HA}},$9=Object.assign(Object.create(nm),{_tag:"Empty"}),w9=Object.create($9),J3=()=>w9,E9=Object.assign(Object.create(nm),{_tag:"AndThen"}),T9=(t,e)=>{const n=Object.create(E9);return n.first=t,n.second=e,n},O9=Object.assign(Object.create(nm),{_tag:"AddService"}),R9=(t,e)=>{const n=Object.create(O9);return n.key=t,n.service=e,n},k9=Object.assign(Object.create(nm),{_tag:"RemoveService"}),M9=t=>{const e=Object.create(k9);return e.key=t,e},A9=Object.assign(Object.create(nm),{_tag:"UpdateService"}),C9=(t,e)=>{const n=Object.create(A9);return n.key=t,n.update=e,n},N9=(t,e)=>{const n=new Map(t.unsafeMap);let s=J3();for(const[a,c]of e.unsafeMap.entries())if(n.has(a)){const l=n.get(a);n.delete(a),wt(l,c)||(s=xg(C9(a,()=>c))(s))}else n.delete(a),s=xg(R9(a,c))(s);for(const[a]of n.entries())s=xg(M9(a))(s);return s},xg=$(2,(t,e)=>T9(t,e)),x9=$(2,(t,e)=>{if(t._tag==="Empty")return e;let n=!1,s=Ve(t);const a=new Map(e.unsafeMap);for(;ta(s);){const l=si(s),d=Ui(s);switch(l._tag){case"Empty":{s=d;break}case"AddService":{a.set(l.key,l.service),s=d;break}case"AndThen":{s=Kn(Kn(d,l.second),l.first);break}case"RemoveService":{a.delete(l.key),s=d;break}case"UpdateService":{a.set(l.key,l.update(a.get(l.key))),n=!0,s=d;break}}}if(!n)return Wo(a);const c=new Map;for(const[l]of e.unsafeMap)a.has(l)&&(c.set(l,a.get(l)),a.delete(l));for(const[l,d]of a)c.set(l,d);return Wo(c)}),I9=Symbol.for("effect/DifferHashSetPatch");function P0(t){return t}const jb={...Lb.prototype,[I9]:{_Value:P0,_Key:P0,_Patch:P0}},F9=Object.assign(Object.create(jb),{_tag:"Empty"}),D9=Object.create(F9),Q3=()=>D9,z9=Object.assign(Object.create(jb),{_tag:"AndThen"}),U9=(t,e)=>{const n=Object.create(z9);return n.first=t,n.second=e,n},L9=Object.assign(Object.create(jb),{_tag:"Add"}),j9=t=>{const e=Object.create(L9);return e.value=t,e},P9=Object.assign(Object.create(jb),{_tag:"Remove"}),q9=t=>{const e=Object.create(P9);return e.value=t,e},B9=(t,e)=>{const[n,s]=vd([t,Q3()],([a,c],l)=>u7(l)(a)?[T3(l)(a),c]:[a,Jv(j9(l))(c)])(e);return vd(s,(a,c)=>Jv(q9(c))(a))(n)},Jv=$(2,(t,e)=>U9(t,e)),K9=$(2,(t,e)=>{if(t._tag==="Empty")return e;let n=e,s=Ve(t);for(;ta(s);){const a=si(s),c=Ui(s);switch(a._tag){case"Empty":{s=c;break}case"AndThen":{s=Kn(a.first)(Kn(a.second)(c));break}case"Add":{n=sd(a.value)(n),s=c;break}case"Remove":n=T3(a.value)(n),s=c}}return n}),H9=Symbol.for("effect/DifferReadonlyArrayPatch");function VA(t){return t}const rm={...Lb.prototype,[H9]:{_Value:VA,_Patch:VA}},V9=Object.assign(Object.create(rm),{_tag:"Empty"}),Y9=Object.create(V9),X3=()=>Y9,G9=Object.assign(Object.create(rm),{_tag:"AndThen"}),J9=(t,e)=>{const n=Object.create(G9);return n.first=t,n.second=e,n},Q9=Object.assign(Object.create(rm),{_tag:"Append"}),X9=t=>{const e=Object.create(Q9);return e.values=t,e},Z9=Object.assign(Object.create(rm),{_tag:"Slice"}),W9=(t,e)=>{const n=Object.create(Z9);return n.from=t,n.until=e,n},tV=Object.assign(Object.create(rm),{_tag:"Update"}),eV=(t,e)=>{const n=Object.create(tV);return n.index=t,n.patch=e,n},nV=t=>{let e=0,n=X3();for(;e<t.oldValue.length&&e<t.newValue.length;){const s=t.oldValue[e],a=t.newValue[e],c=t.differ.diff(s,a);wt(c,t.differ.empty)||(n=Ig(n,eV(e,c))),e=e+1}return e<t.oldValue.length&&(n=Ig(n,W9(0,e))),e<t.newValue.length&&(n=Ig(n,X9(cH(e)(t.newValue)))),n},Ig=$(2,(t,e)=>J9(t,e)),rV=$(3,(t,e,n)=>{if(t._tag==="Empty")return e;let s=e.slice(),a=$s(t);for(;Ag(a);){const c=ur(a),l=tc(a);switch(c._tag){case"Empty":{a=l;break}case"AndThen":{l.unshift(c.first,c.second),a=l;break}case"Append":{for(const d of c.values)s.push(d);a=l;break}case"Slice":{s=s.slice(c.from,c.until),a=l;break}case"Update":{s[c.index]=n.patch(c.patch,s[c.index]),a=l;break}}}return s}),sV=Symbol.for("effect/Differ"),iV={[sV]:{_P:At,_V:At},pipe(){return lt(this,arguments)}},uf=t=>{const e=Object.create(iV);return e.empty=t.empty,e.diff=t.diff,e.combine=t.combine,e.patch=t.patch,e},aV=()=>uf({empty:J3(),combine:(t,e)=>xg(e)(t),diff:(t,e)=>N9(t,e),patch:(t,e)=>x9(e)(t)}),oV=()=>uf({empty:Q3(),combine:(t,e)=>Jv(e)(t),diff:(t,e)=>B9(t,e),patch:(t,e)=>K9(e)(t)}),cV=t=>uf({empty:X3(),combine:(e,n)=>Ig(e,n),diff:(e,n)=>nV({oldValue:e,newValue:n,differ:t}),patch:(e,n)=>rV(e,n,t)}),Z3=()=>uV((t,e)=>e),uV=t=>uf({empty:At,combine:(e,n)=>e===At?n:n===At?e:s=>n(e(s)),diff:(e,n)=>wt(e,n)?At:vb(n),patch:(e,n)=>t(n,e(n))}),wd=255,W3=8,Qv=t=>t&wd,Xv=t=>t>>W3&wd,sm=(t,e)=>(t&wd)+((e&t&wd)<<W3),lV=sm(0,0),fV=t=>sm(t,t),hV=t=>sm(t,0),dV=$(2,(t,e)=>sm(Qv(t)&~e,Xv(t))),mV=$(2,(t,e)=>t|e),pV=t=>~t>>>0&wd,gV=0,Ac=1,yV=2,tF=4,Zv=16,eF=32,bV=t=>Pb(t,eF),_V=$(2,(t,e)=>t&~e),SV=$(2,(t,e)=>t|e),Fa=t=>nF(t)&&!$V(t),nF=t=>Pb(t,Ac),Pb=$(2,(t,e)=>(t&e)!==0),rF=(...t)=>t.reduce((e,n)=>e|n,0),vV=rF(gV),YA=t=>Pb(t,tF),$V=t=>Pb(t,Zv),Bo=$(2,(t,e)=>sm(t^e,e)),Gu=$(2,(t,e)=>t&(pV(Qv(e))|Xv(e))|Qv(e)&Xv(e)),GA=uf({empty:lV,diff:(t,e)=>Bo(t,e),combine:(t,e)=>mV(e)(t),patch:(t,e)=>Gu(e,t)}),wV=fV,sF=hV,JA=dV,iF=(t,e)=>({_tag:"Par",left:t,right:e}),fg=(t,e)=>({_tag:"Seq",left:t,right:e}),EV=t=>{let e=AE(t),n=_l();for(;;){const[s,a]=_9(e,[aF(),_l()],([c,l],d)=>{const[m,p]=TV(d);return[AV(c,m),g9(l,p)]});if(n=OV(n,s),Ki(a))return S9(n);e=a}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},TV=t=>{let e=t,n=aF(),s=_l(),a=_l();for(;;)switch(e._tag){case"Empty":{if(Ki(s))return[n,a];e=s.head,s=s.tail;break}case"Par":{s=uc(e.right,s),e=e.left;break}case"Seq":{const c=e.left,l=e.right;switch(c._tag){case"Empty":{e=l;break}case"Par":{const d=c.left,m=c.right;e=iF(fg(d,l),fg(m,l));break}case"Seq":{const d=c.left,m=c.right;e=fg(d,fg(m,l));break}case"Single":{e=c,a=uc(l,a);break}}break}case"Single":{if(n=MV(n,e),Ki(s))return[n,a];e=s.head,s=s.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},OV=(t,e)=>{if(Ki(t))return AE(q0(e));if(CV(e))return t;const n=zV(t.head),s=NV(e);return n.length===1&&s.length===1&&wt(n[0],s[0])?uc(DV(t.head,q0(e)),t.tail):uc(q0(e),t)},RV=Symbol.for("effect/RequestBlock/RequestBlockParallel"),kV={_R:t=>t};let CE=class{map;[RV]=kV;constructor(e){this.map=e}};const aF=()=>new CE(ME()),MV=(t,e)=>new CE(o9(t.map,e.dataSource,n=>U8(Po(n,yd(e.blockedRequest)),()=>Ve(e.blockedRequest)))),AV=(t,e)=>new CE(V3(t.map,e.map,(n,s,a)=>K3(n,a,He(B3(n,a),{onNone:()=>s,onSome:c=>_e(s,c)})))),CV=t=>a9(t.map),NV=t=>Array.from(H3(t.map)),q0=t=>FV(c9(t.map,e=>Ve(e))),xV=Symbol.for("effect/RequestBlock/RequestBlockSequential"),IV={_R:t=>t};let oF=class{map;[xV]=IV;constructor(e){this.map=e}};const FV=t=>new oF(t),DV=(t,e)=>new oF(V3(e.map,t.map,(n,s,a)=>K3(n,a,He(B3(n,a),{onNone:()=>ke(),onSome:c=>_e(c,s)})))),zV=t=>Array.from(H3(t.map)),UV=t=>Array.from(t.map),im="Pending",qb="Done",LV="effect/Deferred",jV=Symbol.for(LV),PV={_E:t=>t,_A:t=>t},qV=t=>({_tag:im,joiners:t}),cF=t=>({_tag:qb,effect:t});let NE=class uF{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new uF(this.self)}};const lF=(t,e)=>{const n=new on("Blocked");return n.effect_instruction_i0=t,n.effect_instruction_i1=e,n},BV=t=>{const e=new on("RunBlocked");return e.effect_instruction_i0=t,e},lc=Symbol.for("effect/Effect");let KV=class{patch;op;_op=eE;constructor(e,n){this.patch=e,this.op=n}},on=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[lc]=ul;constructor(e){this._op=e}[It](e){return this===e}[Dt](){return ve(this,Xw(this))}pipe(){return lt(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:Re(this.effect_instruction_i0),effect_instruction_i1:Re(this.effect_instruction_i1),effect_instruction_i2:Re(this.effect_instruction_i2)}}toString(){return Te(this.toJSON())}[pe](){return this.toJSON()}[Symbol.iterator](){return new NE(new Qd(this))}},fF=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[lc]=ul;constructor(e){this._op=e,this._tag=e}[It](e){return PE(e)&&e._op==="Failure"&&wt(this.effect_instruction_i0,e.effect_instruction_i0)}[Dt](){return w(De(this._tag),Gt(ft(this.effect_instruction_i0)),ve(this))}get cause(){return this.effect_instruction_i0}pipe(){return lt(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return Te(this.toJSON())}[pe](){return this.toJSON()}[Symbol.iterator](){return new NE(new Qd(this))}},hF=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[lc]=ul;constructor(e){this._op=e,this._tag=e}[It](e){return PE(e)&&e._op==="Success"&&wt(this.effect_instruction_i0,e.effect_instruction_i0)}[Dt](){return w(De(this._tag),Gt(ft(this.effect_instruction_i0)),ve(this))}get value(){return this.effect_instruction_i0}pipe(){return lt(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:Re(this.value)}}toString(){return Te(this.toJSON())}[pe](){return this.toJSON()}[Symbol.iterator](){return new NE(new Qd(this))}};const pi=t=>_t(t,lc),ee=t=>{const e=new on(xI);return e.effect_instruction_i0=t,e},dF=$(3,(t,e,n)=>zs(s=>X(t,a=>X(Ya(bt(()=>s(e(a)))),c=>bt(()=>n(a,c)).pipe(ms({onFailure:l=>{switch(c._tag){case qn:return yn(jn(c.effect_instruction_i0,l));case Bn:return yn(l)}},onSuccess:()=>c})))))),Or=$(2,(t,e)=>X(t,()=>nt(e))),gs=t=>Or(t,void 0),mF=function(){const t=new on(Tb);switch(arguments.length){case 2:{t.effect_instruction_i0=arguments[0],t.commit=arguments[1];break}case 3:{t.effect_instruction_i0=arguments[0],t.effect_instruction_i1=arguments[1],t.commit=arguments[2];break}case 4:{t.effect_instruction_i0=arguments[0],t.effect_instruction_i1=arguments[1],t.effect_instruction_i2=arguments[2],t.commit=arguments[3];break}default:throw new Error(wb("you're not supposed to end up here"))}return t},Ed=(t,e=Za)=>{const n=new on(ed);let s;return n.effect_instruction_i0=a=>{s=t(a)},n.effect_instruction_i1=e,om(n,a=>pi(s)?s:Se)},Io=(t,e=Za)=>bt(()=>Ed(t,e)),fc=(t,e=Za)=>mF(t,function(){let n,s;function a(m){n?n(m):s===void 0&&(s=m)}const c=new on(ed);c.effect_instruction_i0=m=>{n=m,s&&m(s)},c.effect_instruction_i1=e;let l,d;return this.effect_instruction_i0.length!==1?(d=new AbortController,l=ar(()=>this.effect_instruction_i0(a,d.signal))):l=ar(()=>this.effect_instruction_i0(a)),l||d?om(c,m=>(d&&d.abort(),l??Se)):c}),pF=$(2,(t,e)=>{const n=new on(kg);return n.effect_instruction_i0=t,n.effect_instruction_i1=e,n}),Td=$(2,(t,e)=>Wa(t,{onFailure:e,onSuccess:nt})),QA=Symbol.for("effect/OriginalAnnotation"),xE=(t,e)=>Ue(e)?new Proxy(t,{has(n,s){return s===pl||s===QA||s in n},get(n,s){return s===pl?e.value:s===QA?t:n[s]}}):t,by=t=>ro(t)&&!(pl in t)?ee(e=>yn(fs(xE(t,HE(e))))):yn(fs(t)),gF=t=>yF(()=>fs(new EY(t))),Sl=t=>Wa(t,{onFailure:e=>nt(Ot(e)),onSuccess:e=>nt(Jt(e))}),Ya=t=>bF(t,{onFailure:ce,onSuccess:ue}),Ze=t=>ro(t)&&!(pl in t)?ee(e=>yn(ac(xE(t,HE(e))))):yn(ac(t)),IE=t=>X(W(t),Ze),yn=t=>{const e=new fF(qn);return e.effect_instruction_i0=t,e},yF=t=>X(W(t),yn),Bb=ee(t=>nt(t.id())),am=t=>ee(e=>t(e.id())),X=$(2,(t,e)=>{const n=new on(oy);return n.effect_instruction_i0=t,n.effect_instruction_i1=e,n}),Kh=$(2,(t,e)=>X(t,n=>{const s=typeof e=="function"?e(n):e;return pi(s)?s:TI(s)?Ed(a=>{s.then(c=>a(nt(c)),c=>a(Ze(new MF(c,"An unknown error occurred in Effect.andThen"))))}):nt(s)})),HV=t=>{const e=new on("OnStep");return e.effect_instruction_i0=t,e},Kb=t=>X(t,At),bF=$(2,(t,e)=>ms(t,{onFailure:n=>nt(e.onFailure(n)),onSuccess:n=>nt(e.onSuccess(n))})),ms=$(2,(t,e)=>{const n=new on(cy);return n.effect_instruction_i0=t,n.effect_instruction_i1=e.onFailure,n.effect_instruction_i2=e.onSuccess,n}),Wa=$(2,(t,e)=>ms(t,{onFailure:n=>{if(C3(n).length>0)return yn(g7(n));const a=m7(n);return a.length>0?e.onFailure(dE(a)):yn(n)},onSuccess:e.onSuccess})),Li=$(2,(t,e)=>bt(()=>{const n=le(t),s=Mb(n.length);let a=0;return Or(DE({while:()=>a<n.length,body:()=>e(n[a],a),step:c=>{s[a++]=c}}),s)})),Hb=$(2,(t,e)=>bt(()=>{const n=le(t);let s=0;return DE({while:()=>s<n.length,body:()=>e(n[s],s),step:()=>{s++}})})),Tn=X(Bb,t=>_F(t)),_F=t=>yn(Rs(t)),FE=t=>{const e=new on(tf);return e.effect_instruction_i0=wV(Ac),e.effect_instruction_i1=()=>t,e},VV=$(2,(t,e)=>zs(n=>X(Ya(n(t)),s=>IY(e,s)))),kt=$(2,(t,e)=>X(t,n=>W(()=>e(n)))),SF=$(2,(t,e)=>Wa(t,{onFailure:n=>IE(()=>e.onFailure(n)),onSuccess:n=>W(()=>e.onSuccess(n))})),Vb=$(2,(t,e)=>ms(t,{onFailure:n=>{const s=x3(n);switch(s._tag){case"Left":return IE(()=>e(s.left));case"Right":return yn(s.right)}},onSuccess:nt})),hc=$(2,(t,e)=>zs(n=>ms(n(t),{onFailure:s=>{const a=ce(s);return ms(e(a),{onFailure:c=>ce(jn(s,c)),onSuccess:()=>a})},onSuccess:s=>{const a=ue(s);return ze(e(a),a)}}))),om=$(2,(t,e)=>hc(t,t_({onFailure:n=>$E(n)?gs(e(wE(n))):Se,onSuccess:()=>Se}))),YV=t=>GV(t,At),GV=$(2,(t,e)=>Wa(t,{onFailure:n=>by(e(n)),onSuccess:nt})),nt=t=>{const e=new hF(Bn);return e.effect_instruction_i0=t,e},bt=t=>{const e=new on(Tb);return e.commit=t,e},W=t=>{const e=new on(NI);return e.effect_instruction_i0=t,e},Yb=$(t=>t.length===3||t.length===2&&!(ro(t[1])&&"onlyEffect"in t[1]),(t,e)=>X(t,n=>{const s=typeof e=="function"?e(n):e;return pi(s)?Or(s,n):TI(s)?Ed(a=>{s.then(c=>a(nt(n)),c=>a(Ze(new MF(c,"An unknown error occurred in Effect.tap"))))}):nt(n)})),JV=t=>ee(e=>{const n=e.getFiberRef(t$),s=w(n,Ee(()=>e.scope()));return t(lf(t$,ht(s)))}),Cc=t=>{const e=new on(tf);return e.effect_instruction_i0=sF(Ac),e.effect_instruction_i1=()=>t,e},zs=t=>mF(t,function(){const e=new on(tf);return e.effect_instruction_i0=sF(Ac),e.effect_instruction_i1=n=>nF(n)?ar(()=>this.effect_instruction_i0(FE)):ar(()=>this.effect_instruction_i0(Cc)),e}),Se=nt(void 0),QV=t=>{const e=new on(tf);return e.effect_instruction_i0=t,e.effect_instruction_i1=void 0,e},Gb=$(2,(t,e)=>X(e,n=>n?w(t,kt(ht)):nt(at()))),DE=t=>{const e=new on(uy);return e.effect_instruction_i0=t.while,e.effect_instruction_i1=t.body,e.effect_instruction_i2=t.step,e},XV=t=>bt(()=>{const e=new on(nd);return e.effect_instruction_i0=t(),e}),ZV=function(){const t=arguments.length===1?arguments[0]:arguments[1].bind(arguments[0]);return XV(()=>t(w))},WV=$(2,(t,e)=>{const n=new on(tf);return n.effect_instruction_i0=e,n.effect_instruction_i1=()=>t,n}),Jb=t=>{const e=new on(Mg);return typeof t?.priority<"u"?yY(e,t.priority):e},vF=$(2,(t,e)=>X(t,n=>kt(e,s=>[n,s]))),Qb=$(2,(t,e)=>X(t,n=>Or(e,n))),ze=$(2,(t,e)=>X(t,()=>e)),$F=$(3,(t,e,n)=>X(t,s=>kt(e,a=>n(s,a)))),tY=Io(()=>{const t=setInterval(()=>{},2147483647);return W(()=>clearInterval(t))}),zE=t=>X(Bb,e=>w(t,Od(e))),Od=$(2,(t,e)=>X(t.interruptAsFork(e),()=>t.await)),eY={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return lt(this,arguments)}},nY={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return lt(this,arguments)}},rY={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return lt(this,arguments)}},wF={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return lt(this,arguments)}},EF={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return lt(this,arguments)}},TF={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return lt(this,arguments)}},sY={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return lt(this,arguments)}},iY={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return lt(this,arguments)}},aY="effect/FiberRef",oY=Symbol.for(aY),cY={_A:t=>t},UE=t=>ee(e=>ue(e.getFiberRef(t))),Xb=$(2,(t,e)=>X(UE(t),e)),XA=$(2,(t,e)=>uY(t,()=>[void 0,e])),uY=$(2,(t,e)=>ee(n=>{const[s,a]=e(n.getFiberRef(t));return n.setFiberRef(t,a),nt(s)})),lf=$(3,(t,e,n)=>dF(Qb(UE(e),XA(e,n)),()=>t,s=>XA(e,s))),lY=$(3,(t,e,n)=>Xb(e,s=>lf(t,e,n(s)))),Rr=(t,e)=>ff(t,{differ:Z3(),fork:e?.fork??At,join:e?.join}),fY=t=>{const e=oV();return ff(t,{differ:e,fork:e.empty})},hY=t=>{const e=cV(Z3());return ff(t,{differ:e,fork:e.empty})},OF=t=>{const e=aV();return ff(t,{differ:e,fork:e.empty})},ff=(t,e)=>({...Wd,[oY]:cY,initial:t,commit(){return UE(this)},diff:(s,a)=>e.differ.diff(s,a),combine:(s,a)=>e.differ.combine(s,a),patch:s=>a=>e.differ.patch(s,a),fork:e.fork,join:e.join??((s,a)=>a)}),dY=t=>ff(t,{differ:GA,fork:GA.empty}),aa=zt(Symbol.for("effect/FiberRef/currentContext"),()=>OF(aE())),cm=zt(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Rr(0)),RF=zt(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Rr(2048)),mY=zt(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Rr(ME())),pY=zt(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Rr(EF)),gY=zt(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Rr(_l())),yY=$(2,(t,e)=>lf(t,cm,e)),bY=zt(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Rr("unbounded")),_Y=zt(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Rr(!0)),SY=zt(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Rr(ht(TF))),vY=zt(Symbol.for("effect/FiberRef/versionMismatchErrorLogLevel"),()=>Rr(ht(wF))),Wv=zt(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>hY(ec())),t$=zt(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Rr(at(),{fork:()=>at(),join:(t,e)=>t})),hg=zt(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Rr(Xa,{fork:()=>Xa,join:(t,e)=>t})),ZA=Symbol.for("effect/Scope"),WA=Symbol.for("effect/CloseableScope"),kF=(t,e)=>t.addFinalizer(()=>gs(e)),_y=(t,e)=>t.addFinalizer(e),e$=(t,e)=>t.close(e),Zb=(t,e)=>t.fork(e),$Y=t=>wY(At)(t),wY=$(2,(t,e)=>{const n=w(t,N3,Po(e));switch(n._tag){case"None":return w(C3(t),hE,He({onNone:()=>{const s=le(wE(t)).flatMap(a=>le(r9(a)).map(c=>`#${c}`));return new TY(s?`Interrupted by fibers: ${s.join(", ")}`:void 0)},onSome:At}));case"Some":return n.value}}),LE=function(){class t extends globalThis.Error{commit(){return Ze(this)}toJSON(){const n={...this};return this.message&&(n.message=this.message),this.cause&&(n.cause=this.cause),n}[pe](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?cf(ac(this),{renderErrorCause:!0}):this}}return Object.assign(t.prototype,ZK),t}(),jE=(t,e)=>{class n extends LE{_tag=e}return Object.assign(n.prototype,t),n.prototype.name=e,n},tC=Symbol.for("effect/Cause/errors/RuntimeException"),EY=jE({[tC]:tC},"RuntimeException"),n$=Symbol.for("effect/Cause/errors/InterruptedException"),TY=jE({[n$]:n$},"InterruptedException"),OY=t=>_t(t,n$),eC=Symbol.for("effect/Cause/errors/NoSuchElement"),Wb=jE({[eC]:eC},"NoSuchElementException"),nC=Symbol.for("effect/Cause/errors/UnknownException"),MF=function(){class t extends LE{_tag="UnknownException";error;constructor(n,s){super(s??"An unknown error occurred",{cause:n}),this.error=n}}return Object.assign(t.prototype,{[nC]:nC,name:"UnknownException"}),t}(),PE=t=>pi(t)&&"_tag"in t&&(t._tag==="Success"||t._tag==="Failure"),RY=t=>t._tag==="Failure",kY=t=>t._tag==="Success",Fg=$(2,(t,e)=>{switch(t._tag){case qn:return ce(t.effect_instruction_i0);case Bn:return ue(e)}}),B0=t=>Fg(t,void 0),Ju=(t,e)=>NY(t,e?.parallel?oc:jn),AF=t=>ce(fs(t)),Rd=t=>ce(ac(t)),ce=t=>{const e=new fF(qn);return e.effect_instruction_i0=t,e},MY=$(2,(t,e)=>{switch(t._tag){case qn:return ce(t.effect_instruction_i0);case Bn:return e(t.effect_instruction_i0)}}),AY=t=>w(t,MY(At)),CF=t=>ce(Rs(t)),Dg=$(2,(t,e)=>{switch(t._tag){case qn:return ce(t.effect_instruction_i0);case Bn:return ue(e(t.effect_instruction_i0))}}),t_=$(2,(t,{onFailure:e,onSuccess:n})=>{switch(t._tag){case qn:return e(t.effect_instruction_i0);case Bn:return n(t.effect_instruction_i0)}}),r$=$(2,(t,{onFailure:e,onSuccess:n})=>{switch(t._tag){case qn:return e(t.effect_instruction_i0);case Bn:return n(t.effect_instruction_i0)}}),ue=t=>{const e=new hF(Bn);return e.effect_instruction_i0=t,e},wr=ue(void 0),CY=$(2,(t,e)=>qE(t,e,{onSuccess:(n,s)=>[n,s],onFailure:jn})),NF=$(2,(t,e)=>qE(t,e,{onSuccess:(n,s)=>s,onFailure:jn})),qE=$(3,(t,e,{onFailure:n,onSuccess:s})=>{switch(t._tag){case qn:switch(e._tag){case Bn:return ce(t.effect_instruction_i0);case qn:return ce(n(t.effect_instruction_i0,e.effect_instruction_i0))}case Bn:switch(e._tag){case Bn:return ue(s(t.effect_instruction_i0,e.effect_instruction_i0));case qn:return ce(e.effect_instruction_i0)}}}),NY=(t,e)=>{const n=nc(t);return ta(n)?w(Ui(n),lE(w(si(n),Dg(Ve)),(s,a)=>w(s,qE(a,{onSuccess:(c,l)=>w(c,Kn(l)),onFailure:e}))),Dg(Wi),Dg(s=>ai(s)),ht):at()},um=t=>({...Wd,[jV]:PV,state:kc(qV([])),commit(){return fi(this)},blockingOn:t}),lm=()=>X(Bb,t=>xY(t)),xY=t=>W(()=>um(t)),fi=t=>Io(e=>{const n=Qt(t.state);switch(n._tag){case qb:return e(n.effect);case im:return n.joiners.push(e),DY(t,e)}},t.blockingOn),e_=$(2,(t,e)=>W(()=>{const n=Qt(t.state);switch(n._tag){case qb:return!1;case im:{Mc(t.state,cF(e));for(let s=0,a=n.joiners.length;s<a;s++)n.joiners[s](e);return!0}}})),IY=$(2,(t,e)=>e_(t,e)),xF=$(2,(t,e)=>e_(t,yn(e))),BE=$(2,(t,e)=>e_(t,_F(e))),FY=t=>W(()=>Qt(t.state)._tag===qb),fm=$(2,(t,e)=>e_(t,nt(e))),n_=(t,e)=>{const n=Qt(t.state);if(n._tag===im){Mc(t.state,cF(e));for(let s=0,a=n.joiners.length;s<a;s++)n.joiners[s](e)}},DY=(t,e)=>W(()=>{const n=Qt(t.state);if(n._tag===im){const s=n.joiners.indexOf(e);s>=0&&n.joiners.splice(s,1)}}),zY=ee(t=>ue(t.currentContext)),IF=()=>zY,Nc=t=>X(IF(),t),r_=$(2,(t,e)=>lf(aa,e)(t)),KE=$(2,(t,e)=>lY(aa,n=>Oc(n,e))(t)),UY=$(2,(t,e)=>Nc(n=>r_(t,e(n)))),HE=t=>{const e=t.currentSpan;return e!==void 0&&e._tag==="Span"?ht(e):at()},LY="effect/Clock",rC=Symbol.for(LY),s_=Tc("effect/Clock"),jY=2**31-1,sC={unsafeSchedule(t,e){const n=Hv(e);if(n>jY)return Nv;let s=!1;const a=setTimeout(()=>{s=!0,t()},n);return()=>(clearTimeout(a),!s)}},iC=function(){const t=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*t;let e;return()=>(e===void 0&&(e=BigInt(Date.now())*t-BigInt(Math.round(performance.now()*1e6))),e+BigInt(Math.round(performance.now()*1e6)))}(),PY=function(){const t=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!t)return iC;const e=iC()-t.bigint();return()=>e+t.bigint()}();let qY=class{[rC]=rC;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return PY()}currentTimeMillis=W(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=W(()=>this.unsafeCurrentTimeNanos());scheduler(){return nt(sC)}sleep(e){return fc(n=>{const s=sC.unsafeSchedule(()=>n(Se),e);return gs(W(s))})}};const BY=()=>new qY,vl=F8,Sy=t=>t.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),FF="And",DF="Or",zF="InvalidData",UF="MissingData",LF="SourceUnavailable",jF="Unsupported",KY="effect/ConfigError",aC=Symbol.for(KY),hf={_tag:"ConfigError",[aC]:aC},PF=(t,e)=>{const n=Object.create(hf);return n._op=FF,n.left=t,n.right=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},qF=(t,e)=>{const n=Object.create(hf);return n._op=DF,n.left=t,n.right=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},HY=(t,e,n={pathDelim:"."})=>{const s=Object.create(hf);return s._op=zF,s.path=t,s.message=e,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Invalid data at ${w(this.path,rf(n.pathDelim))}: "${this.message}")`}}),s},dc=(t,e,n={pathDelim:"."})=>{const s=Object.create(hf);return s._op=UF,s.path=t,s.message=e,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Missing data at ${w(this.path,rf(n.pathDelim))}: "${this.message}")`}}),s},VY=(t,e,n,s={pathDelim:"."})=>{const a=Object.create(hf);return a._op=LF,a.path=t,a.message=e,a.cause=n,Object.defineProperty(a,"toString",{enumerable:!1,value(){return`(Source unavailable at ${w(this.path,rf(s.pathDelim))}: "${this.message}")`}}),a},YY=(t,e,n={pathDelim:"."})=>{const s=Object.create(hf);return s._op=jF,s.path=t,s.message=e,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${w(this.path,rf(n.pathDelim))}: "${this.message}")`}}),s},Fo=$(2,(t,e)=>{switch(t._op){case FF:return PF(Fo(t.left,e),Fo(t.right,e));case DF:return qF(Fo(t.left,e),Fo(t.right,e));case zF:return HY([...e,...t.path],t.message);case UF:return dc([...e,...t.path],t.message);case LF:return VY([...e,...t.path],t.message,t.cause);case jF:return YY([...e,...t.path],t.message)}}),GY={_tag:"Empty"},K0=$(2,(t,e)=>{let n=AE(e),s=t;for(;m9(n);){const a=n.head;switch(a._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=uc(a.first,uc(a.second,n.tail));break}case"MapName":{s=qo(s,a.f),n=n.tail;break}case"Nested":{s=hy(s,a.name),n=n.tail;break}case"Unnested":{if(w(rd(s),V8(a.name)))s=tc(s),n=n.tail;else return Ot(dc(s,`Expected ${a.name} to be in path in ConfigProvider#unnested`));break}}}return Jt(s)}),JY="Constant",QY="Fail",XY="Fallback",ZY="Described",WY="Lazy",tG="MapOrFail",eG="Nested",nG="Primitive",rG="Sequence",sG="HashMap",iG="ZipWith";var oC={};const vy=(t,e)=>[...t,...e],aG="effect/ConfigProvider",cC=Symbol.for(aG),oG=Tc("effect/ConfigProvider"),cG="effect/ConfigProviderFlat",uC=Symbol.for(cG),uG=t=>({[cC]:cC,pipe(){return lt(this,arguments)},...t}),lG=t=>({[uC]:uC,patch:t.patch,load:(e,n,s=!0)=>t.load(e,n,s),enumerateChildren:t.enumerateChildren}),fG=t=>uG({load:e=>X(is(t,ec(),e,!1),n=>He(rd(n),{onNone:()=>Ze(dc(ec(),`Expected a single value having structure: ${e}`)),onSome:nt})),flattened:t}),hG=t=>{const{pathDelim:e,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},t),s=m=>w(m,rf(e)),a=m=>m.split(e),c=()=>typeof process<"u"&&"env"in process&&typeof oC=="object"?oC:{};return fG(lG({load:(m,p,g=!0)=>{const b=s(m),S=c(),v=b in S?ht(S[b]):at();return w(v,Vb(()=>dc(m,`Expected ${b} to exist in the process context`)),X(E=>yG(E,m,p,n,g)))},enumerateChildren:m=>W(()=>{const p=c(),S=Object.keys(p).map(v=>a(v.toUpperCase())).filter(v=>{for(let E=0;E<m.length;E++){const D=w(m,n3(E)),C=v[E];if(C===void 0||D!==C)return!1}return!0}).flatMap(v=>v.slice(m.length,m.length+1));return c7(S)}),patch:GY}))},dG=(t,e,n,s)=>{const a=NA(n.length,m=>m>=s.length?at():ht([t(m),m+1])),c=NA(s.length,m=>m>=n.length?at():ht([e(m),m+1])),l=vy(n,a),d=vy(s,c);return[l,d]},mG=(t,e)=>{let n=e;if(n._tag==="Nested"){const s=t.slice();for(;n._tag==="Nested";)s.push(n.name),n=n.config;return s}return t},is=(t,e,n,s)=>{const a=n;switch(a._tag){case JY:return nt($s(a.value));case ZY:return bt(()=>is(t,e,a.config,s));case QY:return Ze(dc(e,a.message));case XY:return w(bt(()=>is(t,e,a.first,s)),Td(c=>a.condition(c)?w(is(t,e,a.second,s),Td(l=>Ze(qF(c,l)))):Ze(c)));case WY:return bt(()=>is(t,e,a.config(),s));case tG:return bt(()=>w(is(t,e,a.original,s),X(Li(c=>w(a.mapOrFail(c),Vb(Fo(mG(e,a.original))))))));case eG:return bt(()=>is(t,vy(e,$s(a.name)),a.config,s));case nG:return w(K0(e,t.patch),X(c=>w(t.load(c,a,s),X(l=>{if(l.length===0){const d=w(iH(c),Ee(()=>"<n/a>"));return Ze(dc([],`Expected ${a.description} with name ${d}`))}return nt(l)}))));case rG:return w(K0(e,t.patch),X(c=>w(t.enumerateChildren(c),X(_G),X(l=>l.length===0?bt(()=>kt(is(t,e,a.config,!0),$s)):w(Li(l,d=>is(t,W8(e,`[${d}]`),a.config,!0)),kt(d=>{const m=dH(d);return m.length===0?$s(ec()):$s(m)}))))));case sG:return bt(()=>w(K0(e,t.patch),X(c=>w(t.enumerateChildren(c),X(l=>w(l,Li(d=>is(t,vy(c,$s(d)),a.valueConfig,s)),kt(d=>d.length===0?$s(ME()):w(bG(d),qo(m=>i9(CA(le(l),m)))))))))));case iG:return bt(()=>w(is(t,e,a.left,s),Sl,X(c=>w(is(t,e,a.right,s),Sl,X(l=>{if(Fn(c)&&Fn(l))return Ze(PF(c.left,l.left));if(Fn(c)&&ri(l))return Ze(c.left);if(ri(c)&&Fn(l))return Ze(l.left);if(ri(c)&&ri(l)){const d=w(e,rf(".")),m=pG(e,d),[p,g]=dG(m,m,w(c.right,qo(Jt)),w(l.right,qo(Jt)));return w(p,CA(g),Li(([b,S])=>w(vF(b,S),kt(([v,E])=>a.zip(v,E)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},pG=(t,e)=>n=>Ot(dc(t,`The element at index ${n} in a sequence at path "${e}" was missing`)),gG=(t,e)=>t.split(new RegExp(`\\s*${Sy(e)}\\s*`)),yG=(t,e,n,s,a)=>a?w(gG(t,s),Li(c=>n.parse(c.trim())),Vb(Fo(e))):w(n.parse(t),SF({onFailure:Fo(e),onSuccess:$s})),bG=t=>Object.keys(t[0]).map(e=>t.map(n=>n[e])),_G=t=>w(Li(t,vG),SF({onFailure:()=>ec(),onSuccess:gd(vl)}),Sl,kt(x8)),SG=/^(\[(\d+)\])$/,vG=t=>{const e=t.match(SG);if(e!==null){const n=e[2];return w(n!==void 0&&n.length>0?ht(n):at(),nf($G))}return at()},$G=t=>{const e=Number.parseInt(t);return Number.isNaN(e)?at():ht(e)},lC=Symbol.for("effect/Console"),BF=Tc("effect/Console"),wG={[lC]:lC,assert(t,...e){return W(()=>{console.assert(t,...e)})},clear:W(()=>{console.clear()}),count(t){return W(()=>{console.count(t)})},countReset(t){return W(()=>{console.countReset(t)})},debug(...t){return W(()=>{console.debug(...t)})},dir(t,e){return W(()=>{console.dir(t,e)})},dirxml(...t){return W(()=>{console.dirxml(...t)})},error(...t){return W(()=>{console.error(...t)})},group(t){return t?.collapsed?W(()=>console.groupCollapsed(t?.label)):W(()=>console.group(t?.label))},groupEnd:W(()=>{console.groupEnd()}),info(...t){return W(()=>{console.info(...t)})},log(...t){return W(()=>{console.log(...t)})},table(t,e){return W(()=>{console.table(t,e)})},time(t){return W(()=>console.time(t))},timeEnd(t){return W(()=>console.timeEnd(t))},timeLog(t,...e){return W(()=>{console.timeLog(t,...e)})},trace(...t){return W(()=>{console.trace(...t)})},warn(...t){return W(()=>{console.warn(...t)})},unsafe:console},EG="effect/Random",fC=Symbol.for(EG),TG=Tc("effect/Random");let OG=class{seed;[fC]=fC;PRNG;constructor(e){this.seed=e,this.PRNG=new FK(e)}get next(){return W(()=>this.PRNG.number())}get nextBoolean(){return kt(this.next,e=>e>.5)}get nextInt(){return W(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,n){return kt(this.next,s=>(n-e)*s+e)}nextIntBetween(e,n){return W(()=>this.PRNG.integer(n-e)+e)}shuffle(e){return RG(e,n=>this.nextIntBetween(0,n))}};const RG=(t,e)=>bt(()=>w(W(()=>Array.from(t)),X(n=>{const s=[];for(let a=n.length;a>=2;a=a-1)s.push(a);return w(s,Hb(a=>w(e(a),kt(c=>kG(n,a-1,c)))),Or(nc(n)))}))),kG=(t,e,n)=>{const s=t[e];return t[e]=t[n],t[n]=s,t},MG=t=>new OG(ft(t)),hC=Symbol.for("effect/Tracer"),AG=t=>({[hC]:hC,...t}),KF=Tc("effect/Tracer"),HF=Tc("effect/ParentSpan"),dC=function(){const t="abcdef0123456789",e=t.length;return function(n){let s="";for(let a=0;a<n;a++)s+=t.charAt(Math.floor(Math.random()*e));return s}}();let CG=class{name;parent;context;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];links;constructor(e,n,s,a,c,l){this.name=e,this.parent=n,this.context=s,this.startTime=c,this.kind=l,this.status={_tag:"Started",startTime:c},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:dC(32),this.spanId=dC(16),this.links=Array.from(a)}end(e,n){this.status={_tag:"Ended",endTime:e,exit:n,startTime:this.status.startTime}}attribute(e,n){this.attributes.set(e,n)}event(e,n,s){this.events.push([e,n,s??{}])}addLinks(e){this.links.push(...e)}};const NG=AG({span:(t,e,n,s,a,c)=>new CG(t,e,n,s,a,c),context:t=>t()}),xG=w(aE(),za(s_,BY()),za(BF,wG),za(TG,MG(Math.random())),za(oG,hG()),za(KF,NG)),$y=zt(Symbol.for("effect/DefaultServices/currentServices"),()=>OF(xG)),IG=t=>{const e=li(t);return VF(n=>n.sleep(e))},FG=t=>ee(e=>t(e.currentDefaultServices)),VF=t=>FG(e=>t(e.unsafeMap.get(s_.key))),DG=VF(t=>t.currentTimeMillis),ji=lm,or=fi,zG=xF,s$=FY,Pi=fm,UG=Zd,LG=WK;let xc=class extends LG{};const YF="Sequential",GF="Parallel",jG="ParallelN",hm={_tag:YF},PG={_tag:GF},qG=t=>({_tag:jG,parallelism:t}),BG=t=>t._tag===YF,KG=t=>t._tag===GF,wy=hm,i$=PG,a$=qG;function HG(t){return new to(t)}function VG(){return HG(new Map)}const mC=Symbol.for("effect/FiberRefs");let to=class{locals;[mC]=mC;constructor(e){this.locals=e}pipe(){return lt(this,arguments)}};const YG=(t,e,n,s=!1)=>{const a=t;let c=e,l=n,d=s,m;for(;m===void 0;)if(gn(c)&&gn(l)){const p=ur(c)[0],g=tc(c),b=ur(l)[0],S=ur(l)[1],v=tc(l);p.startTimeMillis<b.startTimeMillis?(l=v,d=!0):p.startTimeMillis>b.startTimeMillis?c=g:p.id<b.id?(l=v,d=!0):p.id>b.id?c=g:m=[S,d]}else m=[a.initial,!0];return m},GG=$(3,(t,e,n)=>{const s=new Map(t.locals);return n.locals.forEach((a,c)=>{const l=a[0][1];if(!a[0][0][It](e)){if(!s.has(c)){if(wt(l,c.initial))return;s.set(c,[[e,c.join(c.initial,l)]]);return}const d=s.get(c),[m,p]=YG(c,d,a);if(p){const g=c.diff(m,l),b=d[0][1],S=c.join(b,c.patch(g)(b));if(!wt(b,S)){let v;const E=d[0][0];E[It](e)?v=[[E,S],...d.slice(1)]:v=[[e,S],...d],s.set(c,v)}}}}),new to(s)}),JG=$(2,(t,e)=>{const n=new Map;return JF(t,n,e),new to(n)}),JF=(t,e,n)=>{t.locals.forEach((s,a)=>{const c=s[0][1],l=a.patch(a.fork)(c);wt(c,l)?e.set(a,s):e.set(a,[[n,l],...s])})},QF=$(2,(t,e)=>{const n=new Map(t.locals);return n.delete(e),new to(n)}),QG=$(2,(t,e)=>t.locals.has(e)?ht(ur(t.locals.get(e))[1]):at()),kd=$(2,(t,e)=>w(QG(t,e),Ee(()=>e.initial))),o$=$(2,(t,{fiberId:e,fiberRef:n,value:s})=>{if(t.locals.size===0)return new to(new Map([[n,[[e,s]]]]));const a=new Map(t.locals);return c$(a,e,n,s),new to(a)}),c$=(t,e,n,s)=>{const a=t.get(n)??[];let c;if(gn(a)){const[l,d]=ur(a);if(l[It](e)){if(wt(d,s))return;c=[[e,s],...a.slice(1)]}else c=[[e,s],...a]}else c=[[e,s]];t.set(n,c)},XG=$(2,(t,{entries:e,forkAs:n})=>{if(t.locals.size===0)return new to(new Map(e));const s=new Map(t.locals);return n!==void 0&&JF(t,s,n),e.forEach(([a,c])=>{c.length===1?c$(s,c[0][0],a,c[0][1]):c.forEach(([l,d])=>{c$(s,l,a,d)})}),new to(s)}),ZG=kd,WG=XG,tJ=VG,XF="Empty",ZF="Add",WF="Remove",tD="Update",eD="AndThen",eJ={_tag:XF},nD=(t,e)=>{const n=new Map(t.locals);let s=eJ;for(const[a,c]of e.locals.entries()){const l=ur(c)[1],d=n.get(a);if(d!==void 0){const m=ur(d)[1];wt(m,l)||(s=H0({_tag:tD,fiberRef:a,patch:a.diff(m,l)})(s))}else s=H0({_tag:ZF,fiberRef:a,value:l})(s);n.delete(a)}for(const[a]of n.entries())s=H0({_tag:WF,fiberRef:a})(s);return s},H0=$(2,(t,e)=>({_tag:eD,first:t,second:e})),rD=$(3,(t,e,n)=>{let s=n,a=$s(t);for(;gn(a);){const c=ur(a),l=tc(a);switch(c._tag){case XF:{a=l;break}case ZF:{s=o$(s,{fiberId:e,fiberRef:c.fiberRef,value:c.value}),a=l;break}case WF:{s=QF(s,c.fiberRef),a=l;break}case tD:{const d=kd(s,c.fiberRef);s=o$(s,{fiberId:e,fiberRef:c.fiberRef,value:c.fiberRef.patch(c.patch)(d)}),a=l;break}case eD:{a=hy(c.first)(hy(c.second)(l));break}}}return s}),Md=nD,Ad=rD,i_="effect/FiberStatus",mc=Symbol.for(i_),Ey="Done",pC="Running",gC="Suspended",nJ=De(`${i_}-${Ey}`);let rJ=class{[mc]=mc;_tag=Ey;[Dt](){return nJ}[It](e){return VE(e)&&e._tag===Ey}},sJ=class{runtimeFlags;[mc]=mc;_tag=pC;constructor(e){this.runtimeFlags=e}[Dt](){return w(ft(i_),Gt(ft(this._tag)),Gt(ft(this.runtimeFlags)),ve(this))}[It](e){return VE(e)&&e._tag===pC&&this.runtimeFlags===e.runtimeFlags}},iJ=class{runtimeFlags;blockingOn;[mc]=mc;_tag=gC;constructor(e,n){this.runtimeFlags=e,this.blockingOn=n}[Dt](){return w(ft(i_),Gt(ft(this._tag)),Gt(ft(this.runtimeFlags)),Gt(ft(this.blockingOn)),ve(this))}[It](e){return VE(e)&&e._tag===gC&&this.runtimeFlags===e.runtimeFlags&&wt(this.blockingOn,e.blockingOn)}};const aJ=new rJ,oJ=t=>new sJ(t),cJ=(t,e)=>new iJ(t,e),VE=t=>_t(t,mc),uJ=t=>t._tag===Ey,lJ=aJ,sD=oJ,fJ=cJ,hJ=uJ,dJ=eY,mJ=nY,pJ=rY,gJ=wF,yJ=EF,bJ=TF,_J=sY,SJ=iY,vJ=w(vl,ZI(t=>t.ordinal)),$J=D8(vJ),wJ=t=>{switch(t){case"All":return dJ;case"Debug":return bJ;case"Error":return pJ;case"Fatal":return mJ;case"Info":return yJ;case"Trace":return _J;case"None":return SJ;case"Warning":return gJ}},EJ=Symbol.for("effect/Micro"),Ty=Symbol.for("effect/Micro/MicroExit"),yC=Symbol.for("effect/Micro/MicroCause"),TJ={_E:At};let iD=class extends globalThis.Error{_tag;traces;[yC];constructor(e,n,s){const a=`MicroCause.${e}`;let c,l,d;if(n instanceof globalThis.Error){c=`(${a}) ${n.name}`,l=n.message;const m=l.split(`
`).length;d=n.stack?`(${a}) ${n.stack.split(`
`).slice(0,m+3).join(`
`)}`:`${c}: ${l}`}else c=a,l=cl(n,0),d=`${c}: ${l}`;s.length>0&&(d+=`
    ${s.join(`
    `)}`),super(l),this._tag=e,this.traces=s,this[yC]=TJ,this.name=c,this.stack=d}pipe(){return lt(this,arguments)}toString(){return this.stack}[pe](){return this.stack}},OJ=class extends iD{defect;constructor(e,n=[]){super("Die",e,n),this.defect=e}};const RJ=(t,e=[])=>new OJ(t,e);let kJ=class extends iD{constructor(e=[]){super("Interrupt","interrupted",e)}};const MJ=(t=[])=>new kJ(t),AJ=t=>t._tag==="Interrupt",bC=Symbol.for("effect/Micro/MicroFiber"),CJ={_A:At,_E:At};let NJ=class{context;interruptible;[bC];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(e,n=!0){this.context=e,this.interruptible=n,this[bC]=CJ}getRef(e){return g8(this.context,e)}addObserver(e){return this._exit?(e(this._exit),md):(this._observers.push(e),()=>{const n=this._observers.indexOf(e);n>=0&&this._observers.splice(n,1)})}_interrupted=!1;unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(XE))}unsafePoll(){return this._exit}evaluate(e){if(this._exit)return;if(this._yielded!==void 0){const a=this._yielded;this._yielded=void 0,a()}const n=this.runLoop(e);if(n===dg)return;const s=_C.interruptChildren&&_C.interruptChildren(this);if(s!==void 0)return this.evaluate(Ry(s,()=>n));this._exit=n;for(let a=0;a<this._observers.length;a++)this._observers[a](n);this._observers.length=0}runLoop(e){let n=!1,s=e;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!n&&this.getRef(ZE).shouldYield(this)){n=!0;const a=s;s=Ry(zJ,()=>a)}if(s=s[u$](this),s===dg){const a=this._yielded;return Ty in a?(this._yielded=void 0,a):dg}}}catch(a){return _t(s,u$)?l$(a):l$(`MicroFiber.runLoop: Not a valid effect: ${String(s)}`)}}getCont(e){for(;;){const n=this._stack.pop();if(!n)return;const s=n[Oy]&&n[Oy](this);if(s)return{[e]:s};if(n[e])return n}}_yielded=void 0;yieldWith(e){return this._yielded=e,dg}children(){return this._children??=new Set}};const _C=zt("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),aD=Symbol.for("effect/Micro/identifier"),hn=Symbol.for("effect/Micro/args"),u$=Symbol.for("effect/Micro/evaluate"),$l=Symbol.for("effect/Micro/successCont"),Qu=Symbol.for("effect/Micro/failureCont"),Oy=Symbol.for("effect/Micro/ensureCont"),dg=Symbol.for("effect/Micro/Yield"),xJ={_A:At,_E:At,_R:At},IJ={...UG,_op:"Micro",[EJ]:xJ,pipe(){return lt(this,arguments)},[Symbol.iterator](){return new OI(new Qd(this))},toJSON(){return{_id:"Micro",op:this[aD],...hn in this?{args:this[hn]}:void 0}},toString(){return Te(this)},[pe](){return Te(this)}};function FJ(t){return l$("Micro.evaluate: Not implemented")}const a_=t=>({...IJ,[aD]:t.op,[u$]:t.eval??FJ,[$l]:t.contA,[Qu]:t.contE,[Oy]:t.ensure}),YE=t=>{const e=a_(t);return function(){const n=Object.create(e);return n[hn]=t.single===!1?arguments:arguments[0],n}},oD=t=>{const e={...a_(t),[Ty]:Ty,_tag:t.op,get[t.prop](){return this[hn]},toJSON(){return{_id:"MicroExit",_tag:t.op,[t.prop]:this[hn]}},[It](n){return jJ(n)&&n._tag===t.op&&wt(this[hn],n[hn])},[Dt](){return ve(this,Gt(De(t.op))(ft(this[hn])))}};return function(n){const s=Object.create(e);return s[hn]=n,s[$l]=void 0,s[Qu]=void 0,s[Oy]=void 0,s}},GE=oD({op:"Success",prop:"value",eval(t){const e=t.getCont($l);return e?e[$l](this[hn],t):t.yieldWith(this)}}),cD=oD({op:"Failure",prop:"cause",eval(t){let e=t.getCont(Qu);for(;AJ(this[hn])&&e&&t.interruptible;)e=t.getCont(Qu);return e?e[Qu](this[hn],t):t.yieldWith(this)}}),DJ=YE({op:"Yield",eval(t){let e=!1;return t.getRef(ZE).scheduleTask(()=>{e||t.evaluate(PJ)},this[hn]??0),t.yieldWith(()=>{e=!0})}}),zJ=DJ(0),UJ=GE(void 0),JE=YE({op:"WithMicroFiber",eval(t){return this[hn](t)}}),Ry=$(2,(t,e)=>{const n=Object.create(LJ);return n[hn]=t,n[$l]=e,n}),LJ=a_({op:"OnSuccess",eval(t){return t._stack.push(this),this[hn]}}),jJ=t=>_t(t,Ty),uD=GE,QE=cD,XE=QE(MJ()),l$=t=>QE(RJ(t)),PJ=uD(void 0),qJ="setImmediate"in globalThis?globalThis.setImmediate:t=>setTimeout(t,0);let lD=class{tasks=[];running=!1;scheduleTask(e,n){this.tasks.push(e),this.running||(this.running=!0,qJ(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){const e=this.tasks;this.tasks=[];for(let n=0,s=e.length;n<s;n++)e[n]()}shouldYield(e){return e.currentOpCount>=e.getRef(HJ)}flush(){for(;this.tasks.length>0;)this.runTasks()}};const BJ=$(2,(t,e)=>JE(n=>{const s=n.context;return n.context=e(s),GJ(t,()=>(n.context=s,UJ))})),KJ=$(2,(t,e)=>BJ(t,Oc(e)));let HJ=class extends kb()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){},ZE=class extends kb()("effect/Micro/currentScheduler",{defaultValue:()=>new lD}){};const VJ=$(2,(t,e)=>{const n=Object.create(YJ);return n[hn]=t,n[$l]=e.onSuccess,n[Qu]=e.onFailure,n}),YJ=a_({op:"OnSuccessAndFailure",eval(t){return t._stack.push(this),this[hn]}}),GJ=$(2,(t,e)=>QJ(n=>VJ(n(t),{onFailure:s=>Ry(e(QE(s)),()=>cD(s)),onSuccess:s=>Ry(e(uD(s)),()=>GE(s))}))),fD=YE({op:"SetInterruptible",ensure(t){if(t.interruptible=this[hn],t._interrupted&&t.interruptible)return()=>XE}}),JJ=t=>JE(e=>e.interruptible?t:(e.interruptible=!0,e._stack.push(fD(!1)),e._interrupted?XE:t)),QJ=t=>JE(e=>e.interruptible?(e.interruptible=!1,e._stack.push(fD(!0)),t(JJ)):t(At)),XJ=(t,e)=>{const n=new NJ(ZE.context(new lD));return n.evaluate(t),n},wl=Symbol.for("effect/Readable"),WE=Symbol.for("effect/Ref"),tT={_A:t=>t};class ZJ extends xc{ref;commit(){return this.get}[WE]=tT;[wl]=wl;constructor(e){super(),this.ref=e,this.get=W(()=>Qt(this.ref))}get;modify(e){return W(()=>{const n=Qt(this.ref),[s,a]=e(n);return n!==a&&Mc(a)(this.ref),s})}}const eT=t=>new ZJ(kc(t)),ky=t=>W(()=>eT(t)),oi=t=>t.get,Xu=$(2,(t,e)=>t.modify(()=>[void 0,e])),hD=$(2,(t,e)=>t.modify(e)),My=$(2,(t,e)=>t.modify(n=>[void 0,e(n)])),WJ=WE,nT=ky,zg=oi,Oh=hD,dD=Xu,mD=My;let pD=class{buckets=[];scheduleTask(e,n){const s=this.buckets.length;let a,c=0;for(;c<s&&this.buckets[c][0]<=n;c++)a=this.buckets[c];a&&a[0]===n?a[1].push(e):c===s?this.buckets.push([n,[e]]):this.buckets.splice(c,0,[n,[e]])}},tQ=class{maxNextTickBeforeTimer;running=!1;tasks=new pD;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[s,a]of n)for(let c=0;c<a.length;c++)a[c]();this.tasks.buckets.length===0?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(RF)?e.getFiberRef(cm):!1}scheduleTask(e,n){this.tasks.scheduleTask(e,n),this.running||(this.running=!0,this.starve())}};const gD=zt(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new tQ(2048));let rT=class{tasks=new pD;deferred=!1;scheduleTask(e,n){this.deferred?gD.scheduleTask(e,n):this.tasks.scheduleTask(e,n)}shouldYield(e){return e.currentOpCount>e.getFiberRef(RF)?e.getFiberRef(cm):!1}flush(){for(;this.tasks.buckets.length>0;){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[n,s]of e)for(let a=0;a<s.length;a++)s[a]()}this.deferred=!0}};const sT=zt(Symbol.for("effect/FiberRef/currentScheduler"),()=>Rr(gD)),yD=zt(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Rr(new Map)),SC=(t,e,n,s)=>{switch(t){case void 0:return e();case"unbounded":return n();case"inherit":return Xb(bY,a=>a==="unbounded"?n():a>1?s(a):e());default:return t>1?s(t):e()}},eQ=IG,nQ=DG,bD=t=>t.replace(/[\s="]/g,"_"),rQ=t=>e=>`${bD(e.label)}=${t-e.startTime}ms`,_D="effect/MetricLabel",f$=Symbol.for(_D);let sQ=class{key;value;[f$]=f$;_hash;constructor(e,n){this.key=e,this.value=n,this._hash=De(_D+this.key+this.value)}[Dt](){return this._hash}[It](e){return aQ(e)&&this.key===e.key&&this.value===e.value}pipe(){return lt(this,arguments)}};const iQ=(t,e)=>new sQ(t,e),aQ=t=>_t(t,f$),oQ=t=>kt(t,ht),cQ=t=>_Q(t,lQ,nD),SD=$(2,(t,e)=>Wa(t,{onFailure:n=>nt(e.onFailure(n)),onSuccess:n=>nt(e.onSuccess(n))})),uQ=t=>{const e=X(X(t,()=>Jb()),()=>e);return e},lQ=ee(t=>nt(t.getFiberRefs())),fQ=t=>SD(t,{onFailure:md,onSuccess:md}),hQ=t=>(...e)=>{const n=ef(t);let s;for(let a=0,c=e.length;a<c;a++){const l=e[a];k3(l)&&(s!==void 0?s=jn(s,l):s=l,e=[...e.slice(0,a),...e.slice(a+1)],a--)}return s===void 0&&(s=Xa),ee(a=>(a.log(e,s,n),Se))},dQ=hQ(),vC=$(2,(t,e)=>ms(t,{onFailure:n=>yF(()=>e(n)),onSuccess:nt})),mQ=t=>kt(t,e=>!e),pQ=t=>vQ((e,n)=>w(t,rD(e,n))),gQ=$(3,(t,e,n)=>Nc(s=>r_(t,za(s,e,n)))),$C=$(3,(t,e,n)=>Nc(s=>X(n,a=>r_(t,w(s,za(e,a)))))),yQ=eQ,bQ=nt(at()),_Q=$(3,(t,e,n)=>X(e,s=>X(t,a=>kt(e,c=>[n(s,c),a])))),SQ=$(2,(t,e)=>ms(t,{onFailure:n=>ze(e(n),yn(n)),onSuccess:nt})),vQ=t=>ee(e=>(e.setFiberRefs(t(e.id(),e.getFiberRefs())),Se)),$Q=$(2,(t,e)=>bt(()=>e()?kt(t,ht):nt(at()))),vD=RY,wQ=kY,EQ=Ju,TQ=AF,Ay=Rd,Kr=ce,OQ=AY,RQ=Dg,qi=t_,Br=ue,$D=wr,wC=CY,Cd=NF,iT="InterruptSignal",aT="Stateful",oT="Resume",cT="YieldNow",V0=t=>({_tag:iT,cause:t}),Ug=t=>({_tag:aT,onFiber:t}),Eu=t=>({_tag:oT,effect:t}),kQ=()=>({_tag:cT}),MQ="effect/FiberScope",Cy=Symbol.for(MQ);let AQ=class{[Cy]=Cy;fiberId=Za;roots=new Set;add(e,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}},CQ=class{fiberId;parent;[Cy]=Cy;constructor(e,n){this.fiberId=e,this.parent=n}add(e,n){this.parent.tell(Ug(s=>{s.addChild(n),n.addObserver(()=>{s.removeChild(n)})}))}};const NQ=t=>new CQ(t.id(),t),o_=zt(Symbol.for("effect/FiberScope/Global"),()=>new AQ),xQ="effect/Fiber",IQ=Symbol.for(xQ),FQ={_E:t=>t,_A:t=>t},DQ="effect/Fiber",zQ=Symbol.for(DQ),UQ=t=>t.await,LQ=t=>t.inheritAll,Nd=t=>Qb(Kb(t.await),t.inheritAll);({...Wd});const Ia="effect/FiberCurrent",jQ=()=>ef(globalThis[Ia]),PQ="effect/Logger",qQ=Symbol.for(PQ),BQ={_Message:t=>t,_Output:t=>t},uT=t=>({[qQ]:BQ,log:t,pipe(){return lt(this,arguments)}}),KQ=/^[^\s"=]*$/,HQ=(t,e)=>({annotations:n,cause:s,date:a,fiberId:c,logLevel:l,message:d,spans:m})=>{const p=E=>E.match(KQ)?E:t(E),g=(E,D)=>`${bD(E)}=${p(D)}`,b=(E,D)=>" "+g(E,D);let S=g("timestamp",a.toISOString());S+=b("level",l.label),S+=b("fiber",P3(c));const v=X8(d);for(let E=0;E<v.length;E++)S+=b("message",cl(v[E],e));f7(s)||(S+=b("cause",cf(s,{renderErrorCause:!0})));for(const E of m)S+=" "+rQ(a.getTime())(E);for(const[E,D]of n)S+=b(E,cl(D,e));return S},VQ=t=>`"${t.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,YQ=uT(HQ(VQ)),GQ=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null;GQ&&process.stdout.isTTY;const wD="effect/MetricBoundaries",h$=Symbol.for(wD);let JQ=class{values;[h$]=h$;constructor(e){this.values=e,this._hash=w(De(wD),Gt(Xd(this.values)))}_hash;[Dt](){return this._hash}[It](e){return QQ(e)&&wt(this.values,e.values)}pipe(){return lt(this,arguments)}};const QQ=t=>_t(t,h$),XQ=t=>{const e=w(t,t3(Ve(Number.POSITIVE_INFINITY)),pH);return new JQ(e)},ZQ=t=>w(Q8(t.count-1,e=>t.start*Math.pow(t.factor,e)),Dn,XQ),WQ="effect/MetricKeyType",ED=Symbol.for(WQ),TD="effect/MetricKeyType/Counter",d$=Symbol.for(TD),tX="effect/MetricKeyType/Frequency",eX=Symbol.for(tX),nX="effect/MetricKeyType/Gauge",rX=Symbol.for(nX),OD="effect/MetricKeyType/Histogram",m$=Symbol.for(OD),sX="effect/MetricKeyType/Summary",iX=Symbol.for(sX),RD={_In:t=>t,_Out:t=>t};let aX=class{incremental;bigint;[ED]=RD;[d$]=d$;constructor(e,n){this.incremental=e,this.bigint=n,this._hash=De(TD)}_hash;[Dt](){return this._hash}[It](e){return kD(e)}pipe(){return lt(this,arguments)}},oX=class{boundaries;[ED]=RD;[m$]=m$;constructor(e){this.boundaries=e,this._hash=w(De(OD),Gt(ft(this.boundaries)))}_hash;[Dt](){return this._hash}[It](e){return MD(e)&&wt(this.boundaries,e.boundaries)}pipe(){return lt(this,arguments)}};const cX=t=>new aX(t?.incremental??!1,t?.bigint??!1),uX=t=>new oX(t),kD=t=>_t(t,d$),lX=t=>_t(t,eX),fX=t=>_t(t,rX),MD=t=>_t(t,m$),hX=t=>_t(t,iX),dX="effect/MetricKey",AD=Symbol.for(dX),mX={_Type:t=>t},pX=fE(wt);let lT=class{name;keyType;description;tags;[AD]=mX;constructor(e,n,s,a=[]){this.name=e,this.keyType=n,this.description=s,this.tags=a,this._hash=w(De(this.name+this.description),Gt(ft(this.keyType)),Gt(Xd(this.tags)))}_hash;[Dt](){return this._hash}[It](e){return gX(e)&&this.name===e.name&&wt(this.keyType,e.keyType)&&wt(this.description,e.description)&&pX(this.tags,e.tags)}pipe(){return lt(this,arguments)}};const gX=t=>_t(t,AD),yX=(t,e)=>new lT(t,cX(e),ef(e?.description)),bX=(t,e,n)=>new lT(t,uX(e),ef(n)),_X=$(2,(t,e)=>e.length===0?t:new lT(t.name,t.keyType,t.description,Cg(t.tags,e))),EC=Symbol.for("effect/MutableHashMap"),SX={[EC]:EC,[Symbol.iterator](){return new vX(this)},toString(){return Te(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(Re)}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}};let vX=class CD{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const e=this.referentialIterator.next();return e.done?(this.bucketIterator=new $X(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new CD(this.self)}},$X=class{backing;constructor(e){this.backing=e}currentBucket;next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}};const wX=()=>{const t=Object.create(SX);return t.referential=new Map,t.buckets=new Map,t.bucketsSize=0,t},Ao=$(2,(t,e)=>{if(ay(e)===!1)return t.referential.has(e)?ht(t.referential.get(e)):at();const n=e[Dt](),s=t.buckets.get(n);return s===void 0?at():EX(t,s,e)}),EX=(t,e,n,s=!1)=>{for(let a=0,c=e.length;a<c;a++)if(n[It](e[a][0])){const l=e[a][1];return s&&(e.splice(a,1),t.bucketsSize--),ht(l)}return at()},Rh=$(2,(t,e)=>Ue(Ao(t,e))),kh=$(3,(t,e,n)=>{if(ay(e)===!1)return t.referential.set(e,n),t;const s=e[Dt](),a=t.buckets.get(s);return a===void 0?(t.buckets.set(s,[[e,n]]),t.bucketsSize++,t):(TX(t,a,e),a.push([e,n]),t.bucketsSize++,t)}),TX=(t,e,n)=>{for(let s=0,a=e.length;s<a;s++)if(n[It](e[s][0])){e.splice(s,1),t.bucketsSize--;return}},OX="effect/MetricState",dm=Symbol.for(OX),ND="effect/MetricState/Counter",p$=Symbol.for(ND),xD="effect/MetricState/Frequency",g$=Symbol.for(xD),ID="effect/MetricState/Gauge",y$=Symbol.for(ID),FD="effect/MetricState/Histogram",b$=Symbol.for(FD),DD="effect/MetricState/Summary",_$=Symbol.for(DD),mm={_A:t=>t};let RX=class{count;[dm]=mm;[p$]=p$;constructor(e){this.count=e}[Dt](){return w(ft(ND),Gt(ft(this.count)),ve(this))}[It](e){return UX(e)&&this.count===e.count}pipe(){return lt(this,arguments)}};const kX=fE(wt);let MX=class{occurrences;[dm]=mm;[g$]=g$;constructor(e){this.occurrences=e}_hash;[Dt](){return w(De(xD),Gt(Xd(le(this.occurrences.entries()))),ve(this))}[It](e){return LX(e)&&kX(le(this.occurrences.entries()),le(e.occurrences.entries()))}pipe(){return lt(this,arguments)}},AX=class{value;[dm]=mm;[y$]=y$;constructor(e){this.value=e}[Dt](){return w(ft(ID),Gt(ft(this.value)),ve(this))}[It](e){return jX(e)&&this.value===e.value}pipe(){return lt(this,arguments)}},CX=class{buckets;count;min;max;sum;[dm]=mm;[b$]=b$;constructor(e,n,s,a,c){this.buckets=e,this.count=n,this.min=s,this.max=a,this.sum=c}[Dt](){return w(ft(FD),Gt(ft(this.buckets)),Gt(ft(this.count)),Gt(ft(this.min)),Gt(ft(this.max)),Gt(ft(this.sum)),ve(this))}[It](e){return PX(e)&&wt(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return lt(this,arguments)}},NX=class{error;quantiles;count;min;max;sum;[dm]=mm;[_$]=_$;constructor(e,n,s,a,c,l){this.error=e,this.quantiles=n,this.count=s,this.min=a,this.max=c,this.sum=l}[Dt](){return w(ft(DD),Gt(ft(this.error)),Gt(ft(this.quantiles)),Gt(ft(this.count)),Gt(ft(this.min)),Gt(ft(this.max)),Gt(ft(this.sum)),ve(this))}[It](e){return qX(e)&&this.error===e.error&&wt(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return lt(this,arguments)}};const xX=t=>new RX(t),IX=t=>new MX(t),FX=t=>new AX(t),DX=t=>new CX(t.buckets,t.count,t.min,t.max,t.sum),zX=t=>new NX(t.error,t.quantiles,t.count,t.min,t.max,t.sum),UX=t=>_t(t,p$),LX=t=>_t(t,g$),jX=t=>_t(t,y$),PX=t=>_t(t,b$),qX=t=>_t(t,_$),BX="effect/MetricHook",KX=Symbol.for(BX),HX={_In:t=>t,_Out:t=>t},pm=t=>({[KX]:HX,pipe(){return lt(this,arguments)},...t}),TC=BigInt(0),VX=t=>{let e=t.keyType.bigint?TC:0;const n=t.keyType.incremental?t.keyType.bigint?a=>a>=TC:a=>a>=0:a=>!0,s=a=>{n(a)&&(e=e+a)};return pm({get:()=>xX(e),update:s,modify:s})},YX=t=>{const e=new Map;for(const s of t.keyType.preregisteredWords)e.set(s,0);const n=s=>{const a=e.get(s)??0;e.set(s,a+1)};return pm({get:()=>IX(e),update:n,modify:n})},GX=(t,e)=>{let n=e;return pm({get:()=>FX(n),update:s=>{n=s},modify:s=>{n=n+s}})},JX=t=>{const e=t.keyType.boundaries.values,n=e.length,s=new Uint32Array(n+1),a=new Float32Array(n);let c=0,l=0,d=Number.MAX_VALUE,m=Number.MIN_VALUE;w(e,gd(vl),qo((b,S)=>{a[S]=b}));const p=b=>{let S=0,v=n;for(;S!==v;){const E=Math.floor(S+(v-S)/2),D=a[E];b<=D?v=E:S=E,v===S+1&&(b<=a[S]?v=S:S=v)}s[S]=s[S]+1,c=c+1,l=l+b,b<d&&(d=b),b>m&&(m=b)},g=()=>{const b=Mb(n);let S=0;for(let v=0;v<n;v++){const E=a[v],D=s[v];S=S+D,b[v]=[E,S]}return b};return pm({get:()=>DX({buckets:g(),count:c,min:d,max:m,sum:l}),update:p,modify:p})},QX=t=>{const{error:e,maxAge:n,maxSize:s,quantiles:a}=t.keyType,c=w(a,gd(vl)),l=Mb(s);let d=0,m=0,p=0,g=0,b=0;const S=E=>{const D=[];let C=0;for(;C!==s-1;){const N=l[C];if(N!=null){const[q,A]=N,P=yl(E-q);B7(P,gl)&&q7(P,n)&&D.push(A)}C=C+1}return XX(e,c,gd(D,vl))},v=(E,D)=>{if(s>0){d=d+1;const C=d%s;l[C]=[D,E]}g=m===0?E:Math.min(g,E),b=m===0?E:Math.max(b,E),m=m+1,p=p+E};return pm({get:()=>zX({error:e,quantiles:S(Date.now()),count:m,min:g,max:b,sum:p}),update:([E,D])=>v(E,D),modify:([E,D])=>v(E,D)})},XX=(t,e,n)=>{const s=n.length;if(!gn(e))return ec();const a=e[0],c=e.slice(1),l=OC(t,s,at(),0,a,n),d=$s(l);return c.forEach(m=>{d.push(OC(t,s,l.value,l.consumed,m,l.rest))}),qo(d,m=>[m.quantile,m.value])},OC=(t,e,n,s,a,c)=>{let l=t,d=e,m=n,p=s,g=a,b=c,S=t,v=e,E=n,D=s,C=a,N=c;for(;;){if(!gn(b))return{quantile:g,value:at(),consumed:p,rest:[]};if(g===1)return{quantile:g,value:ht(r3(b)),consumed:p+b.length,rest:[]};const q=ur(b),A=oH(b,B=>B===q),P=g*d,M=l/2*P,U=p+A[0].length,K=Math.abs(U-P);if(U<P-M){S=l,v=d,E=rd(b),D=U,C=g,N=A[1],l=S,d=v,m=E,p=D,g=C,b=N;continue}if(U>P+M){const B=pn(m)?ht(q):m;return{quantile:g,value:B,consumed:p,rest:b}}switch(m._tag){case"None":{S=l,v=d,E=rd(b),D=U,C=g,N=A[1],l=S,d=v,m=E,p=D,g=C,b=N;continue}case"Some":{const B=Math.abs(P-m.value);if(K<B){S=l,v=d,E=rd(b),D=U,C=g,N=A[1],l=S,d=v,m=E,p=D,g=C,b=N;continue}return{quantile:g,value:ht(m.value),consumed:p,rest:b}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},ZX="effect/MetricPair",WX=Symbol.for(ZX),tZ={_Type:t=>t},eZ=(t,e)=>({[WX]:tZ,metricKey:t,metricState:e,pipe(){return lt(this,arguments)}}),nZ="effect/MetricRegistry",RC=Symbol.for(nZ);let rZ=class{[RC]=RC;map=wX();snapshot(){const e=[];for(const[n,s]of this.map)e.push(eZ(n,s.get()));return e}get(e){const n=w(this.map,Ao(e),Xs);if(n==null){if(kD(e.keyType))return this.getCounter(e);if(fX(e.keyType))return this.getGauge(e);if(lX(e.keyType))return this.getFrequency(e);if(MD(e.keyType))return this.getHistogram(e);if(hX(e.keyType))return this.getSummary(e);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(e){let n=w(this.map,Ao(e),Xs);if(n==null){const s=VX(e);w(this.map,Rh(e))||w(this.map,kh(e,s)),n=s}return n}getFrequency(e){let n=w(this.map,Ao(e),Xs);if(n==null){const s=YX(e);w(this.map,Rh(e))||w(this.map,kh(e,s)),n=s}return n}getGauge(e){let n=w(this.map,Ao(e),Xs);if(n==null){const s=GX(e,e.keyType.bigint?BigInt(0):0);w(this.map,Rh(e))||w(this.map,kh(e,s)),n=s}return n}getHistogram(e){let n=w(this.map,Ao(e),Xs);if(n==null){const s=JX(e);w(this.map,Rh(e))||w(this.map,kh(e,s)),n=s}return n}getSummary(e){let n=w(this.map,Ao(e),Xs);if(n==null){const s=QX(e);w(this.map,Rh(e))||w(this.map,kh(e,s)),n=s}return n}};const sZ=()=>new rZ,iZ="effect/Metric",aZ=Symbol.for(iZ),oZ={_Type:t=>t,_In:t=>t,_Out:t=>t},kC=zt(Symbol.for("effect/Metric/globalMetricRegistry"),()=>sZ()),zD=function(t,e,n,s){const a=Object.assign(c=>Yb(c,l=>fZ(a,l)),{[aZ]:oZ,keyType:t,unsafeUpdate:e,unsafeValue:n,unsafeModify:s,register(){return this.unsafeValue([]),this},pipe(){return lt(this,arguments)}});return a},c_=(t,e)=>UD(yX(t,e)),UD=t=>{let e;const n=new WeakMap,s=a=>{if(a.length===0)return e!==void 0||(e=kC.get(t)),e;let c=n.get(a);return c!==void 0||(c=kC.get(_X(t,a)),n.set(a,c)),c};return zD(t.keyType,(a,c)=>s(c).update(a),a=>s(a).get(),(a,c)=>s(c).modify(a))},cZ=(t,e,n)=>UD(bX(t,e,n)),uZ=$(3,(t,e,n)=>lZ(t,[iQ(e,n)])),lZ=$(2,(t,e)=>zD(t.keyType,(n,s)=>t.unsafeUpdate(n,Cg(e,s)),n=>t.unsafeValue(Cg(e,n)),(n,s)=>t.unsafeModify(n,Cg(e,s)))),fZ=$(2,(t,e)=>Xb(Wv,n=>W(()=>t.unsafeUpdate(e,n))));({...rE});const hZ=$(2,(t,e)=>Xb(yD,n=>W(()=>{if(n.has(t)){const s=n.get(t);s.state.completed||(s.state.completed=!0,n_(s.result,e))}}))),dZ="effect/Supervisor",u_=Symbol.for(dZ),fT={_T:t=>t};let LD=class jD{underlying;value0;[u_]=fT;constructor(e,n){this.underlying=e,this.value0=n}get value(){return this.value0}onStart(e,n,s,a){this.underlying.onStart(e,n,s,a)}onEnd(e,n){this.underlying.onEnd(e,n)}onEffect(e,n){this.underlying.onEffect(e,n)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new jD(this,w(this.value,kt(e)))}zip(e){return new PD(this,e)}},PD=class qD{left;right;_tag="Zip";[u_]=fT;constructor(e,n){this.left=e,this.right=n}get value(){return vF(this.left.value,this.right.value)}onStart(e,n,s,a){this.left.onStart(e,n,s,a),this.right.onStart(e,n,s,a)}onEnd(e,n){this.left.onEnd(e,n),this.right.onEnd(e,n)}onEffect(e,n){this.left.onEffect(e,n),this.right.onEffect(e,n)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new LD(this,w(this.value,kt(e)))}zip(e){return new qD(this,e)}};const BD=t=>_t(t,u_)&&EI(t,"Zip");let mZ=class{effect;[u_]=fT;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,n,s,a){}onEnd(e,n){}onEffect(e,n){}onSuspend(e){}onResume(e){}map(e){return new LD(this,w(this.value,kt(e)))}zip(e){return new PD(this,e)}onRun(e,n){return e()}};const pZ=t=>new mZ(t),l_=zt("effect/Supervisor/none",()=>pZ(Se)),gZ=uf,KD="Empty",HD="AddSupervisor",VD="RemoveSupervisor",YD="AndThen",id={_tag:KD},Lg=(t,e)=>({_tag:YD,first:t,second:e}),yZ=(t,e)=>bZ(e,Ve(t)),bZ=(t,e)=>{let n=t,s=e;for(;ta(s);){const a=si(s);switch(a._tag){case KD:{s=Ui(s);break}case HD:{n=n.zip(a.supervisor),s=Ui(s);break}case VD:{n=S$(n,a.supervisor),s=Ui(s);break}case YD:{s=Kn(a.first)(Kn(a.second)(Ui(s)));break}}}return n},S$=(t,e)=>wt(t,e)?l_:BD(t)?S$(t.left,e).zip(S$(t.right,e)):t,Ny=t=>wt(t,l_)?sc():BD(t)?w(Ny(t.left),Sd(Ny(t.right))):SE(t),_Z=(t,e)=>{if(wt(t,e))return id;const n=Ny(t),s=Ny(e),a=w(s,IA(n),vd(id,(l,d)=>Lg(l,{_tag:HD,supervisor:d}))),c=w(n,IA(s),vd(id,(l,d)=>Lg(l,{_tag:VD,supervisor:d})));return Lg(a,c)},SZ=gZ({empty:id,patch:yZ,combine:Lg,diff:_Z}),vZ=c_("effect_fiber_started",{incremental:!0}),MC=c_("effect_fiber_active"),$Z=c_("effect_fiber_successes",{incremental:!0}),wZ=c_("effect_fiber_failures",{incremental:!0}),EZ=uZ(cZ("effect_fiber_lifetimes",ZQ({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Mh="Continue",TZ="Done",AC="Yield",OZ={_E:t=>t,_A:t=>t},mg=t=>{throw new Error(`BUG: FiberRuntime - ${cl(t)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},Ni=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),xi=zt("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Ah={[oy]:(t,e,n)=>ar(()=>e.effect_instruction_i1(n)),OnStep:(t,e,n)=>ue(ue(n)),[cy]:(t,e,n)=>ar(()=>e.effect_instruction_i2(n)),[eE]:(t,e,n)=>(t.patchRuntimeFlags(t.currentRuntimeFlags,e.patch),Fa(t.currentRuntimeFlags)&&t.isInterrupted()?ce(t.getInterruptedCause()):ue(n)),[uy]:(t,e,n)=>(ar(()=>e.effect_instruction_i2(n)),ar(()=>e.effect_instruction_i0())?(t.pushStack(e),ar(()=>e.effect_instruction_i1())):Se),[nd]:(t,e,n)=>{const s=ar(()=>e.effect_instruction_i0.next(n));return s.done?ue(s.value):(t.pushStack(e),zK(s.value))}},RZ={[iT]:(t,e,n,s)=>(t.processNewInterruptSignal(s.cause),Fa(e)?ce(s.cause):n),[oT]:(t,e,n,s)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[aT]:(t,e,n,s)=>(s.onFiber(t,sD(e)),n),[cT]:(t,e,n,s)=>X(Jb(),()=>n)},kZ=t=>Hb(EV(t),e=>Hi(UV(e),([n,s])=>{const a=new Map,c=[];for(const d of s){c.push(ai(d));for(const m of d)a.set(m.request,m)}const l=c.flat();return lf(QZ(n.runAll(c),l,()=>l.forEach(d=>{d.listeners.interrupted=!0})),yD,a)},!1,!1)),MZ=nE();let GD=class extends xc{[IQ]=FQ;[zQ]=OZ;_fiberRefs;_fiberId;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_isYielding=!1;currentRuntimeFlags;currentOpCount=0;currentSupervisor;currentScheduler;currentTracer;currentSpan;currentContext;currentDefaultServices;constructor(e,n,s){if(super(),this.currentRuntimeFlags=s,this._fiberId=e,this._fiberRefs=n,YA(s)){const a=this.getFiberRef(Wv);vZ.unsafeUpdate(1,a),MC.unsafeUpdate(1,a)}this.refreshRefCache()}commit(){return Nd(this)}id(){return this._fiberId}resume(e){this.tell(Eu(e))}get status(){return this.ask((e,n)=>n)}get runtimeFlags(){return this.ask((e,n)=>hJ(n)?e.currentRuntimeFlags:n.runtimeFlags)}scope(){return NQ(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(hg)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return bt(()=>{const n=um(this._fiberId);return this.tell(Ug((s,a)=>{n_(n,W(()=>e(s,a)))})),fi(n)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return fc(e=>{const n=s=>e(nt(s));return this.tell(Ug((s,a)=>{s._exitValue!==null?n(this._exitValue):s.addObserver(n)})),W(()=>this.tell(Ug((s,a)=>{s.removeObserver(n)})))},this.id())}get inheritAll(){return ee((e,n)=>{const s=e.id(),a=e.getFiberRefs(),c=n.runtimeFlags,l=this.getFiberRefs(),d=GG(a,s,l);e.setFiberRefs(d);const m=e.getFiberRef(IC),p=w(Bo(c,m),JA(Ac),JA(Zv));return QV(p)})}get poll(){return W(()=>ef(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return W(()=>this.tell(V0(Rs(e))))}unsafeInterruptAsFork(e){this.tell(V0(Rs(e)))}addObserver(e){this._exitValue!==null?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(n=>n!==e)}getFiberRefs(){return this.setFiberRef(IC,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=QF(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,n){this._fiberRefs=o$(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:n}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef($y),this.currentTracer=this.currentDefaultServices.unsafeMap.get(KF.key),this.currentSupervisor=this.getFiberRef(YZ),this.currentScheduler=this.getFiberRef(sT),this.currentContext=this.getFiberRef(aa),this.currentSpan=this.currentContext.unsafeMap.get(HF.key)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}transferChildren(e){const n=this._children;if(this._children=null,n!==null&&n.size>0)for(const s of n)s._exitValue===null&&e.add(this.currentRuntimeFlags,s)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let n=Mh;const s=globalThis[Ia];globalThis[Ia]=this;try{for(;n===Mh;)n=this._queue.length===0?TZ:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[Ia]=s}this._queue.length>0&&!this._running?(this._running=!0,n===AC?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(cm))}drainQueueWhileRunning(e,n){let s=n;for(;this._queue.length>0;){const a=this._queue.splice(0,1)[0];s=RZ[a._tag](this,e,s,a)}return s}isInterrupted(){return!d7(this.getFiberRef(hg))}addInterruptedCause(e){const n=this.getFiberRef(hg);this.setFiberRef(hg,jn(n,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let e=!1;for(const n of this._children)n.tell(V0(Rs(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const e=this._children.values();this._children=null;let n=!1;return DE({while:()=>!n,body:()=>{const a=e.next();return a.done?W(()=>{n=!0}):gs(a.value.await)},step:()=>{}})}return null}reportExitValue(e){if(YA(this.currentRuntimeFlags)){const n=this.getFiberRef(Wv),s=this.id().startTimeMillis,a=Date.now();switch(EZ.unsafeUpdate(a-s,n),MC.unsafeUpdate(-1,n),e._tag){case Bn:{$Z.unsafeUpdate(1,n);break}case qn:{wZ.unsafeUpdate(1,n);break}}}if(e._tag==="Failure"){const n=this.getFiberRef(SY);!$E(e.cause)&&n._tag==="Some"&&this.log("Fiber terminated with an unhandled error",e.cause,n)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let n=this._observers.length-1;n>=0;n--)this._observers[n](e);this._observers=[]}getLoggers(){return this.getFiberRef(IZ)}log(e,n,s){const a=Ue(s)?s.value:this.getFiberRef(pY),c=this.getFiberRef(AZ);if($J(c,a))return;const l=this.getFiberRef(gY),d=this.getFiberRef(mY),m=this.getLoggers(),p=this.getFiberRefs();if(vE(m)>0){const g=KI(this.getFiberRef($y),s_),b=new Date(g.unsafeCurrentTimeMillis());qK(p,()=>{for(const S of m)S.log({fiberId:this.id(),logLevel:a,message:e,cause:n,context:p,spans:l,annotations:d,date:b})})}}evaluateMessageWhileSuspended(e){switch(e._tag){case cT:return AC;case iT:return this.processNewInterruptSignal(e.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(ce(e.cause)),this._asyncInterruptor=null),Mh;case oT:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),Mh;case aT:return e.onFiber(this,this._exitValue!==null?lJ:fJ(this.currentRuntimeFlags,this._asyncBlockingOn)),Mh;default:return mg(e)}}evaluateEffect(e){this.currentSupervisor.onResume(this);try{let n=Fa(this.currentRuntimeFlags)&&this.isInterrupted()?ce(this.getInterruptedCause()):e;for(;n!==null;){const s=n,a=this.runLoop(s);if(a===Ni){const c=xi.currentOp;xi.currentOp=null,c._op===Mg?bV(this.currentRuntimeFlags)?(this.tell(kQ()),this.tell(Eu(wr)),n=null):n=wr:c._op===ed&&(n=null)}else{this.currentRuntimeFlags=w(this.currentRuntimeFlags,SV(Zv));const c=this.interruptAllChildren();c!==null?n=X(c,()=>a):(this._queue.length===0?this.setExitValue(a):this.tell(Eu(a)),n=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(e){if(this._running)this.tell(Eu(e));else{this._running=!0;const n=globalThis[Ia];globalThis[Ia]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[Ia]=n,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(Eu(e))}patchRuntimeFlags(e,n){const s=Gu(e,n);return globalThis[Ia]=this,this.currentRuntimeFlags=s,s}initiateAsync(e,n){let s=!1;const a=c=>{s||(s=!0,this.tell(Eu(c)))};Fa(e)&&(this._asyncInterruptor=a);try{n(a)}catch(c){a(yn(fs(c)))}}pushStack(e){this._stack.push(e),e._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const e=this._stack.pop();if(e)return e._op==="OnStep"&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==kg)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==oy&&e._op!==uy&&e._op!==nd)return e;e=this.popStack()}}[KK](e){return W(()=>HI(this.currentContext,e))}Left(e){return Ze(e.left)}None(e){return Ze(new Wb)}Right(e){return ue(e.right)}Some(e){return ue(e.value)}Micro(e){return Ed(n=>{let s=n;const a=XJ(KJ(e,this.currentContext));return a.addObserver(c=>{if(c._tag==="Success")return s(ue(c.value));switch(c.cause._tag){case"Interrupt":return s(ce(Rs(Za)));case"Fail":return s(Ze(c.cause.error));case"Die":return s(by(c.cause.defect))}}),Ed(c=>{s=l=>{c(Se)},a.unsafeInterrupt()})})}[NI](e){const n=ar(()=>e.effect_instruction_i0()),s=this.getNextSuccessCont();return s!==void 0?(s._op in Ah||mg(s),Ah[s._op](this,s,n)):(xi.currentOp=ue(n),Ni)}[Bn](e){const n=e,s=this.getNextSuccessCont();return s!==void 0?(s._op in Ah||mg(s),Ah[s._op](this,s,n.effect_instruction_i0)):(xi.currentOp=n,Ni)}[qn](e){const n=e.effect_instruction_i0,s=this.getNextFailCont();if(s!==void 0)switch(s._op){case kg:case cy:return Fa(this.currentRuntimeFlags)&&this.isInterrupted()?ce(FA(n)):ar(()=>s.effect_instruction_i1(n));case"OnStep":return Fa(this.currentRuntimeFlags)&&this.isInterrupted()?ce(FA(n)):ue(ce(n));case eE:return this.patchRuntimeFlags(this.currentRuntimeFlags,s.patch),Fa(this.currentRuntimeFlags)&&this.isInterrupted()?ce(jn(n,this.getInterruptedCause())):ce(n);default:mg(s)}else return xi.currentOp=ce(n),Ni}[xI](e){return ar(()=>e.effect_instruction_i0(this,sD(this.currentRuntimeFlags)))}Blocked(e){const n=this.getFiberRefs(),s=this.currentRuntimeFlags;if(this._steps.length>0){const a=[],c=this._steps[this._steps.length-1];let l=this.popStack();for(;l&&l._op!=="OnStep";)a.push(l),l=this.popStack();this.setFiberRefs(c.refs),this.currentRuntimeFlags=c.flags;const d=Md(c.refs,n),m=Bo(c.flags,s);return ue(lF(e.effect_instruction_i0,ee(p=>{for(;a.length>0;)p.pushStack(a.pop());return p.setFiberRefs(Ad(p.id(),p.getFiberRefs())(d)),p.currentRuntimeFlags=Gu(m)(p.currentRuntimeFlags),e.effect_instruction_i1})))}return zs(a=>X(mT(BV(e.effect_instruction_i0)),()=>a(e.effect_instruction_i1)))}RunBlocked(e){return kZ(e.effect_instruction_i0)}[tf](e){const n=e.effect_instruction_i0,s=this.currentRuntimeFlags,a=Gu(s,n);if(Fa(a)&&this.isInterrupted())return ce(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,n),e.effect_instruction_i1){const c=Bo(a,s);return this.pushStack(new KV(c,e)),ar(()=>e.effect_instruction_i1(s))}else return wr}[oy](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[kg](e){return this.pushStack(e),e.effect_instruction_i0}[cy](e){return this.pushStack(e),e.effect_instruction_i0}[ed](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,e.effect_instruction_i0),xi.currentOp=e,Ni}[Mg](e){return this._isYielding=!1,xi.currentOp=e,Ni}[uy](e){const n=e.effect_instruction_i0,s=e.effect_instruction_i1;return n()?(this.pushStack(e),s()):wr}[nd](e){return Ah[nd](this,e,void 0)}[Tb](e){return ar(()=>e.commit())}runLoop(e){let n=e;for(this.currentOpCount=0;;){if((this.currentRuntimeFlags&yV)!==0&&this.currentSupervisor.onEffect(this,n),this._queue.length>0&&(n=this.drainQueueWhileRunning(this.currentRuntimeFlags,n)),!this._isYielding){this.currentOpCount+=1;const s=this.currentScheduler.shouldYield(this);if(s!==!1){this._isYielding=!0,this.currentOpCount=0;const a=n;n=X(Jb({priority:s}),()=>a)}}try{if(n=this.currentTracer.context(()=>{if(MZ!==n[lc]._V){const s=this.getFiberRef(vY);if(s._tag==="Some"){const a=n[lc]._V;this.log(`Executing an Effect versioned ${a} with a Runtime of version ${nE()}, you may want to dedupe the effect dependencies, you can use the language service plugin to detect this at compile time: https://github.com/Effect-TS/language-service`,Xa,s)}}return this[n._op](n)},this),n===Ni){const s=xi.currentOp;return s._op===Mg||s._op===ed?Ni:(xi.currentOp=null,s._op===Bn||s._op===qn?s:ce(fs(s)))}}catch(s){n!==Ni&&!_t(n,"_op")||!(n._op in this)?n=gF(`Not a valid effect: ${cl(n)}`):OY(s)?n=ce(jn(fs(s),Rs(Za))):n=by(s)}}}run=()=>{this.drainQueueOnCurrentThread()}};const AZ=zt("effect/FiberRef/currentMinimumLogLevel",()=>Rr(wJ("Info"))),CZ=t=>uT(e=>{const n=ZG(e.context,$y);KI(n,BF).unsafe.log(t.log(e))}),NZ=zt(Symbol.for("effect/Logger/defaultLogger"),()=>CZ(YQ)),xZ=zt(Symbol.for("effect/Logger/tracerLogger"),()=>uT(({annotations:t,cause:e,context:n,fiberId:s,logLevel:a,message:c})=>{const l=em(kd(n,aa),HF);if(l._tag==="None"||l.value._tag==="ExternalSpan")return;const d=HI(kd(n,$y),s_),m={};for(const[p,g]of t)m[p]=g;m["effect.fiberId"]=s9(s),m["effect.logLevel"]=a.label,e!==null&&e._tag!=="Empty"&&(m["effect.cause"]=cf(e,{renderErrorCause:!0})),l.value.event(cl(Array.isArray(c)?c[0]:c),d.unsafeCurrentTimeNanos(),m)})),IZ=zt(Symbol.for("effect/FiberRef/currentLoggers"),()=>fY(SE(NZ,xZ))),JD=$(t=>pi(t[0]),(t,e)=>Cc(Yb(t,n=>FZ(s=>e(n,s))))),FZ=t=>ee(e=>{const n=e.getFiberRefs(),s=_V(e.currentRuntimeFlags,Ac);return X(WD,a=>_y(a,c=>ee(l=>{const d=l.getFiberRefs(),m=l.currentRuntimeFlags,p=Md(d,n),g=Bo(m,s),b=Md(n,d);return l.setFiberRefs(Ad(p,l.id(),n)),xd(WV(t(c),g),W(()=>{l.setFiberRefs(Ad(b,l.id(),l.getFiberRefs()))}))})))}),DZ=t=>{if(Array.isArray(t)||Qw(t))return[t,at()];const e=Object.keys(t),n=e.length;return[e.map(s=>t[s]),ht(s=>{const a={};for(let c=0;c<n;c++)a[e[c]]=s[c];return a})]},zZ=(t,e,n)=>{const s=[];for(const a of t)s.push(Sl(a));return X(El(s,At,{concurrency:n?.concurrency,batching:n?.batching,concurrentFinalizers:n?.concurrentFinalizers}),a=>{const c=at(),l=a.length,d=new Array(l),m=new Array(l);let p=!1;for(let g=0;g<l;g++){const b=a[g];b._tag==="Left"?(d[g]=ht(b.left),p=!0):(m[g]=b.right,d[g]=c)}return p?e._tag==="Some"?Ze(e.value(d)):Ze(d):n?.discard?Se:e._tag==="Some"?nt(e.value(m)):nt(m)})},UZ=(t,e,n)=>{const s=[];for(const a of t)s.push(Sl(a));return n?.discard?El(s,At,{concurrency:n?.concurrency,batching:n?.batching,discard:!0,concurrentFinalizers:n?.concurrentFinalizers}):kt(El(s,At,{concurrency:n?.concurrency,batching:n?.batching,concurrentFinalizers:n?.concurrentFinalizers}),a=>e._tag==="Some"?e.value(a):a)},hT=(t,e)=>{const[n,s]=DZ(t);return e?.mode==="validate"?zZ(n,s,e):e?.mode==="either"?UZ(n,s,e):e?.discard!==!0&&s._tag==="Some"?kt(El(n,At,e),s.value):El(n,At,e)},El=$(t=>Qw(t[0]),(t,e,n)=>ee(s=>{const a=n?.batching===!0||n?.batching==="inherit"&&s.getFiberRef(_Y);return n?.discard?SC(n.concurrency,()=>Tu(wy,n?.concurrentFinalizers)(c=>a?Hi(t,(l,d)=>c(e(l,d)),!0,!1,1):Hb(t,(l,d)=>c(e(l,d)))),()=>Tu(i$,n?.concurrentFinalizers)(c=>Hi(t,(l,d)=>c(e(l,d)),a,!1)),c=>Tu(a$(c),n?.concurrentFinalizers)(l=>Hi(t,(d,m)=>l(e(d,m)),a,!1,c))):SC(n?.concurrency,()=>Tu(wy,n?.concurrentFinalizers)(c=>a?v$(t,1,(l,d)=>c(e(l,d)),!0):Li(t,(l,d)=>c(e(l,d)))),()=>Tu(i$,n?.concurrentFinalizers)(c=>dT(t,(l,d)=>c(e(l,d)),a)),c=>Tu(a$(c),n?.concurrentFinalizers)(l=>v$(t,c,(d,m)=>l(e(d,m)),a)))})),dT=(t,e,n)=>bt(()=>{const s=le(t),a=new Array(s.length);return ze(Hi(s,(l,d)=>X(e(l,d),m=>W(()=>a[d]=m)),n,!1),nt(a))}),Hi=(t,e,n,s,a)=>zs(c=>JV(l=>ee(d=>{let m=Array.from(t).reverse(),p=m.length;if(p===0)return Se;let g=0,b=!1;const S=a?Math.min(m.length,a):m.length,v=new Set,E=new Array,D=()=>v.forEach(B=>{B.currentScheduler.scheduleTask(()=>{B.unsafeInterruptAsFork(d.id())},0)}),C=new Array,N=new Array,q=new Array,A=()=>{const B=E.filter(({exit:et})=>et._tag==="Failure").sort((et,tt)=>et.index<tt.index?-1:et.index===tt.index?0:1).map(({exit:et})=>et);return B.length===0&&B.push(wr),B},P=(B,et=!1)=>{const tt=Cc(l(B)),Z=LZ(tt,d,d.currentRuntimeFlags,o_);return d.currentScheduler.scheduleTask(()=>{et&&Z.unsafeInterruptAsFork(d.id()),Z.resume(tt)},0),Z},M=()=>{s||(p-=m.length,m=[]),b=!0,D()},U=n?HV:Ya,K=P(fc(B=>{const et=(Z,rt)=>{Z._op==="Blocked"?q.push(Z):(E.push({index:rt,exit:Z}),Z._op==="Failure"&&!b&&M())},tt=()=>{if(m.length>0){const Z=m.pop();let rt=g++;const vt=()=>{const G=m.pop();return rt=g++,X(Jb(),()=>X(U(c(e(G,rt))),ut))},ut=G=>m.length>0&&(et(G,rt),m.length>0)?vt():nt(G),Et=X(U(c(e(Z,rt))),ut),z=P(Et);C.push(z),v.add(z),b&&z.currentScheduler.scheduleTask(()=>{z.unsafeInterruptAsFork(d.id())},0),z.addObserver(G=>{let st;if(G._op==="Failure"?st=G:st=G.effect_instruction_i0,N.push(z),v.delete(z),et(st,rt),E.length===p)B(nt(Ee(Ju(A(),{parallel:!0}),()=>wr)));else if(q.length+E.length===p){const Nt=A(),O=q.map(Y=>Y.effect_instruction_i0).reduce(iF);B(nt(lF(O,Hi([Ee(Ju(Nt,{parallel:!0}),()=>wr),...q.map(Y=>Y.effect_instruction_i1)],Y=>Y,n,!0,a))))}else tt()})}};for(let Z=0;Z<S;Z++)tt()}));return gs(hc(Kb(c(Nd(K))),t_({onFailure:B=>{M();const et=q.length+1,tt=Math.min(typeof a=="number"?a:q.length,q.length),Z=Array.from(q);return fc(rt=>{let vt=0,ut=0;const Et=(G,st)=>Nt=>{vt++,vt===et&&rt(ue(ce(B))),Z.length>0&&st&&z()},z=()=>{P(Z.pop(),!0).addObserver(Et(ut,!0)),ut++};K.addObserver(Et(ut,!1)),ut++;for(let G=0;G<tt;G++)z()})},onSuccess:()=>Li(N,B=>B.inheritAll)})))}))),v$=(t,e,n,s)=>bt(()=>{const a=le(t),c=new Array(a.length);return ze(Hi(a,(d,m)=>kt(n(d,m),p=>c[m]=p),s,!1,e),nt(c))}),mT=t=>jZ(t,o_),QD=(t,e,n,s=null)=>{const a=xy(t,e,n,s);return a.resume(t),a},LZ=(t,e,n,s=null)=>xy(t,e,n,s),xy=(t,e,n,s=null)=>{const a=q3(),c=e.getFiberRefs(),l=JG(c,a),d=new GD(a,l,n),m=kd(l,aa),p=d.currentSupervisor;return p.onStart(m,t,ht(e),d),d.addObserver(b=>p.onEnd(b,d)),(s!==null?s:w(e.getFiberRef(t$),Ee(()=>e.scope()))).add(n,d),d},jZ=(t,e)=>ee((n,s)=>nt(QD(t,n,s.runtimeFlags,e))),CC=t=>Nc(e=>He(em(e,so),{onNone:()=>t,onSome:n=>{switch(n.strategy._tag){case"Parallel":return t;case"Sequential":case"ParallelN":return X(Zb(n,i$),s=>ym(t,s))}}})),NC=t=>e=>Nc(n=>He(em(n,so),{onNone:()=>e,onSome:s=>s.strategy._tag==="ParallelN"&&s.strategy.parallelism===t?e:X(Zb(s,a$(t)),a=>ym(e,a))})),Tu=(t,e)=>n=>Nc(s=>He(em(s,so),{onNone:()=>n(At),onSome:a=>{if(e===!0){const c=t._tag==="Parallel"?CC:t._tag==="Sequential"?xC:NC(t.parallelism);switch(a.strategy._tag){case"Parallel":return c(n(CC));case"Sequential":return c(n(xC));case"ParallelN":return c(n(NC(a.strategy.parallelism)))}}else return n(At)}})),XD=t=>X(so,t),ZD=t=>X(f_(),e=>hc(t(e),n=>e.close(n))),xC=t=>Nc(e=>He(em(e,so),{onNone:()=>t,onSome:n=>{switch(n.strategy._tag){case"Sequential":return t;case"Parallel":case"ParallelN":return X(Zb(n,wy),s=>ym(t,s))}}})),PZ=$(t=>pi(t[1]),(t,e,n)=>gm(t,e,(s,a)=>[s,a],n)),qZ=$(t=>pi(t[1]),(t,e,n)=>n?.concurrent!==!0&&(n?.batching===void 0||n.batching===!1)?Qb(t,e):gm(t,e,(s,a)=>s,n)),BZ=$(t=>pi(t[1]),(t,e,n)=>n?.concurrent!==!0&&(n?.batching===void 0||n.batching===!1)?ze(t,e):gm(t,e,(s,a)=>a,n)),gm=$(t=>pi(t[1]),(t,e,n,s)=>kt(hT([t,e],{concurrency:s?.concurrent?2:1,batching:s?.batching,concurrentFinalizers:s?.concurrentFinalizers}),([a,c])=>n(a,c))),so=Tc("effect/Scope"),WD=so,KZ=(t,e)=>{t.state._tag==="Open"&&t.state.finalizers.set({},e)},HZ={[ZA]:ZA,[WA]:WA,pipe(){return lt(this,arguments)},fork(t){return W(()=>{const e=tz(t);if(this.state._tag==="Closed")return e.state=this.state,e;const n={},s=a=>e.close(a);return this.state.finalizers.set(n,s),KZ(e,a=>W(()=>{this.state._tag==="Open"&&this.state.finalizers.delete(n)})),e})},close(t){return bt(()=>{if(this.state._tag==="Closed")return Se;const e=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:t},e.length===0?Se:BG(this.strategy)?w(Li(e,n=>Ya(n(t))),X(n=>w(Ju(n),Po(B0),Ee(()=>wr)))):KG(this.strategy)?w(dT(e,n=>Ya(n(t)),!1),X(n=>w(Ju(n,{parallel:!0}),Po(B0),Ee(()=>wr)))):w(v$(e,this.strategy.parallelism,n=>Ya(n(t)),!1),X(n=>w(Ju(n,{parallel:!0}),Po(B0),Ee(()=>wr))))})},addFinalizer(t){return bt(()=>this.state._tag==="Closed"?t(this.state.exit):(this.state.finalizers.set({},t),Se))}},tz=(t=hm)=>{const e=Object.create(HZ);return e.strategy=t,e.state={_tag:"Open",finalizers:new Map},e},f_=(t=hm)=>W(()=>tz(t)),ym=$(2,(t,e)=>UY(t,Oc(tm(so,e)))),VZ=t=>ff(t,{differ:SZ,fork:id}),IC=dY(vV),YZ=VZ(l_),ez=$(3,(t,e,n)=>JZ(t,e,{onSelfWin:(s,a)=>X(s.await,c=>{switch(c._tag){case Bn:return X(s.inheritAll,()=>n.onSelfDone(c,a));case qn:return n.onSelfDone(c,a)}}),onOtherWin:(s,a)=>X(s.await,c=>{switch(c._tag){case Bn:return X(s.inheritAll,()=>n.onOtherDone(c,a));case qn:return n.onOtherDone(c,a)}})})),GZ=$(2,(t,e)=>am(n=>ez(t,e,{onSelfDone:(s,a)=>r$(s,{onFailure:c=>w(Nd(a),vC(l=>oc(c,l))),onSuccess:c=>w(a,Od(n),Or(c))}),onOtherDone:(s,a)=>r$(s,{onFailure:c=>w(Nd(a),vC(l=>oc(l,c))),onSuccess:c=>w(a,Od(n),Or(c))})}))),JZ=$(3,(t,e,n)=>ee((s,a)=>{const c=a.runtimeFlags,l=kc(!0),d=xy(t,s,c,n.selfScope),m=xy(e,s,c,n.otherScope);return fc(p=>{d.addObserver(()=>FC(d,m,n.onSelfWin,l,p)),m.addObserver(()=>FC(m,d,n.onOtherWin,l,p)),d.startFork(t),m.startFork(e)},e9(d.id(),m.id()))})),FC=(t,e,n,s,a)=>{G7(!0,!1)(s)&&a(n(t,e))},xd=$(2,(t,e)=>zs(n=>ms(n(t),{onFailure:s=>ms(e,{onFailure:a=>yn(jn(s,a)),onSuccess:()=>yn(s)}),onSuccess:s=>Or(e,s)}))),QZ=(t,e,n)=>am(s=>X(X(mT(FE(t)),a=>fc(c=>{const l=e.map(p=>p.listeners.count),d=()=>{l.every(p=>p===0)&&e.every(p=>p.result.state.current._tag==="Pending"?!0:!!(p.result.state.current._tag==="Done"&&PE(p.result.state.current.effect)&&p.result.state.current.effect._tag==="Failure"&&A3(p.result.state.current.effect.cause)))&&(m.forEach(p=>p()),n?.(),c(zE(a)))};a.addObserver(p=>{m.forEach(g=>g()),c(p)});const m=e.map((p,g)=>{const b=S=>{l[g]=S,d()};return p.listeners.addObserver(b),()=>p.listeners.removeObserver(b)});return d(),W(()=>{m.forEach(p=>p())})})),()=>bt(()=>{const a=e.flatMap(c=>c.state.completed?[]:[c]);return Hb(a,c=>hZ(c.request,CF(s)))}))),nz=ac,$$=fs,XZ=Rs,ZZ=h7,WZ=M3,rz=A3,tW=wE,eW=x3,nW=y7,rW=$Y,bm=Wb,sW=cf,iW="effect/ScheduleInterval",Iy=Symbol.for(iW),sz={[Iy]:Iy,startMillis:0,endMillis:0},iz=(t,e)=>t>e?sz:{[Iy]:Iy,startMillis:t,endMillis:e},aW=$(2,(t,e)=>oW(t,e)===t),oW=$(2,(t,e)=>t.endMillis<=e.startMillis?t:e.endMillis<=t.startMillis?e:t.startMillis<e.startMillis?t:e.startMillis<t.startMillis?e:t.endMillis<=e.endMillis?t:e),cW=t=>t.startMillis>=t.endMillis,uW=$(2,(t,e)=>{const n=Math.max(t.startMillis,e.startMillis),s=Math.min(t.endMillis,e.endMillis);return iz(n,s)}),lW=t=>iz(t,Number.POSITIVE_INFINITY),az=sz,fW=aW,hW=cW,dW=uW,mW=lW,pW="effect/ScheduleIntervals",DC=Symbol.for(pW),oz=t=>({[DC]:DC,intervals:t}),gW=$(2,(t,e)=>yW(t.intervals,e.intervals,ke())),yW=(t,e,n)=>{let s=t,a=e,c=n;for(;ta(s)&&ta(a);){const l=w(si(s),dW(si(a))),d=hW(l)?c:w(c,Kn(l));w(si(s),fW(si(a)))?s=Ui(s):a=Ui(a),c=d}return oz(Wi(c))},w$=t=>w(t.intervals,hE,Ee(()=>az)).startMillis,bW=t=>w(t.intervals,hE,Ee(()=>az)).endMillis,_W=$(2,(t,e)=>w$(t)<w$(e)),SW=t=>ta(t.intervals),vW=oz,$W=gW,wW=w$,zC=bW,EW=_W,TW=SW,pT="Continue",cz="Done",OW=t=>({_tag:pT,intervals:t}),RW=t=>({_tag:pT,intervals:vW(Ve(t))}),kW={_tag:cz},MW=t=>t._tag===pT,AW=t=>t._tag===cz,CW=OW,NW=RW,Id=kW,UC=MW,Fy=AW,xW=so,E$=kF,IW=_y,Dy=e$,FW=ym,uz=Zb,lz=f_;class DW{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>Io(n=>{if(this.free<e){const s=()=>{this.free<e||(this.waiters.delete(s),this.taken+=e,n(nt(e)))};return this.waiters.add(s),W(()=>{this.waiters.delete(s)})}return this.taken+=e,n(nt(e))});updateTaken=e=>ee(n=>(this.taken=e(this.taken),this.waiters.size>0&&n.getFiberRef(sT).scheduleTask(()=>{const s=this.waiters.values();let a=s.next();for(;a.done===!1&&this.free>0;)a.value(),a=s.next()},n.getFiberRef(cm)),nt(this.free)));release=e=>this.updateTaken(n=>n-e);releaseAll=this.updateTaken(e=>0);withPermits=e=>n=>zs(s=>X(s(this.take(e)),a=>xd(s(n),this.release(a))));withPermitsIfAvailable=e=>n=>zs(s=>bt(()=>this.free<e?bQ:(this.taken+=e,xd(s(oQ(n)),this.release(e)))))}const gT=t=>new DW(t),zW=t=>W(()=>gT(t)),fz=$(2,(t,e)=>ee((n,s)=>{const a=e,c=QD(t,n,s.runtimeFlags,o_);if(a.state._tag==="Open"){const l=()=>am(m=>wt(m,c.id())?Se:gs(zE(c))),d={};a.state.finalizers.set(d,l),c.addObserver(()=>{a.state._tag!=="Closed"&&a.state.finalizers.delete(d)})}else c.unsafeInterruptAsFork(n.id());return nt(c)})),UW=t=>XD(e=>fz(t,e)),LW="effect/Ref/SynchronizedRef",hz=Symbol.for(LW),dz={_A:t=>t};class jW extends xc{ref;withLock;[hz]=dz;[WE]=tT;[wl]=wl;constructor(e,n){super(),this.ref=e,this.withLock=n,this.get=oi(this.ref)}get;commit(){return this.get}modify(e){return this.modifyEffect(n=>nt(e(n)))}modifyEffect(e){return this.withLock(w(X(oi(this.ref),e),X(([n,s])=>Or(Xu(this.ref,s),n))))}}const PW=t=>W(()=>mz(t)),mz=t=>{const e=eT(t),n=gT(1);return new jW(e,n.withPermits(1))},qW=Symbol.for("effect/ManagedRuntime"),BW="Fresh",KW="FromEffect",HW="Scoped",VW="Suspend",YW="Provide",pz="ProvideMerge",GW="ZipWith",gz=UQ,JW=jQ,LC=LQ,Ko=zE,yz=Od,jC=Nd,h_=t=>function(){if(arguments.length===1){const e=arguments[0];return(n,...s)=>t(e,n,...s)}return t.apply(this,arguments)},d_=h_((t,e,n)=>{const s=q3(),a=[[aa,[[s,t.context]]]];n?.scheduler&&a.push([sT,[[s,n.scheduler]]]);let c=WG(t.fiberRefs,{entries:a,forkAs:s});n?.updateRefs&&(c=n.updateRefs(c,s));const l=new GD(s,c,t.runtimeFlags);let d=e;n?.scope&&(d=X(uz(n.scope,hm),p=>ze(kF(p,am(g=>wt(g,l.id())?Se:Od(l,g))),hc(e,g=>Dy(p,g)))));const m=l.currentSupervisor;return m!==l_&&(m.onStart(t.context,d,at(),l),l.addObserver(p=>m.onEnd(p,l))),o_.add(t.runtimeFlags,l),n?.immediate===!1?l.resume(d):l.start(d),l}),bz=h_((t,e,n={})=>{const s=d_(t,e,n);return n.onExit&&s.addObserver(a=>{n.onExit(a)}),(a,c)=>bz(t)(w(s,yz(a??Za)),{...c,onExit:c?.onExit?l=>c.onExit(OQ(l)):void 0})}),_z=h_((t,e)=>{const n=ett(t)(e);if(n._tag==="Failure")throw WW(n.effect_instruction_i0);return n.effect_instruction_i0});let QW=class extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}};const XW=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new QW(t);return Error.stackTraceLimit=e,n},Y0=Symbol.for("effect/Runtime/FiberFailure"),pg=Symbol.for("effect/Runtime/FiberFailure/Cause");let ZW=class extends Error{[Y0];[pg];constructor(e){const n=D3(e)[0];super(n?.message||"An error has occurred"),this[Y0]=Y0,this[pg]=e,this.name=n?`(FiberFailure) ${n.name}`:"FiberFailure",n?.stack&&(this.stack=n.stack)}toJSON(){return{_id:"FiberFailure",cause:this[pg].toJSON()}}toString(){return"(FiberFailure) "+cf(this[pg],{renderErrorCause:!0})}[pe](){return this.toString()}};const WW=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new ZW(t);return Error.stackTraceLimit=e,n},ttt=t=>{const e=t;switch(e._op){case"Failure":case"Success":return e;case"Left":return Rd(e.left);case"Right":return ue(e.right);case"Some":return ue(e.value);case"None":return Rd(Wb())}},ett=h_((t,e)=>{const n=ttt(e);if(n)return n;const s=new rT,a=d_(t)(e,{scheduler:s});s.flush();const c=a.unsafePoll();return c||AF(xE(XW(a),HE(a)))});let Sz=class{context;runtimeFlags;fiberRefs;constructor(e,n,s){this.context=e,this.runtimeFlags=n,this.fiberRefs=s}pipe(){return lt(this,arguments)}};const vz=t=>new Sz(t.context,t.runtimeFlags,t.fiberRefs),ntt=()=>ee((t,e)=>nt(new Sz(t.getFiberRef(aa),e.runtimeFlags,t.getFiberRefs()))),rtt=rF(Ac,eF,tF),Fd=vz({context:aE(),runtimeFlags:rtt,fiberRefs:tJ()}),stt=d_(Fd),itt=_z(Fd),att=$(2,(t,e)=>t.modifyEffect(e)),ott="effect/Layer",$z=Symbol.for(ott),ctt={_RIn:t=>t,_E:t=>t,_ROut:t=>t},pc={[$z]:ctt,pipe(){return lt(this,arguments)}},utt="effect/Layer/MemoMap",G0=Symbol.for(utt),ltt=kb()("effect/Layer/CurrentMemoMap",{defaultValue:()=>dtt()}),ftt=t=>_t(t,$z),htt=t=>t._op_layer===BW;class wz{ref;[G0];constructor(e){this.ref=e,this[G0]=G0}getOrElseMemoize(e,n){return w(att(this.ref,s=>{const a=s.get(e);if(a!==void 0){const[c,l]=a,d=w(c,X(([m,p])=>w(pQ(m),Or(p))),hc(t_({onFailure:()=>Se,onSuccess:()=>_y(n,l)})));return nt([d,s])}return w(ky(0),X(c=>w(lm(),X(l=>w(ky(()=>Se),kt(d=>{const m=zs(g=>w(f_(),X(b=>w(g(X(Rz(e,b,!0),S=>cQ(S(this)))),Ya,X(S=>{switch(S._tag){case qn:return w(xF(l,S.effect_instruction_i0),ze(e$(b,S)),ze(yn(S.effect_instruction_i0)));case Bn:return w(Xu(d,v=>w(e$(b,v),Gb(hD(c,E=>[E===1,E-1])),gs)),ze(My(c,v=>v+1)),ze(_y(n,v=>w(W(()=>s.delete(e)),ze(oi(d)),X(E=>E(v))))),ze(fm(l,S.effect_instruction_i0)),Or(S.effect_instruction_i0[1]))}}))))),p=[w(fi(l),hc(r$({onFailure:()=>Se,onSuccess:()=>My(c,g=>g+1)}))),g=>w(oi(d),X(b=>b(g)))];return[m,htt(e)?s:s.set(e,p)]}))))))}),Kb)}}const Ez=bt(()=>kt(PW(new Map),t=>new wz(t))),dtt=()=>new wz(mz(new Map)),Tz=$(2,(t,e)=>X(Ez,n=>Oz(t,n,e))),Oz=$(3,(t,e,n)=>X(Rz(t,n),s=>gQ(s(e),ltt,e))),Rz=(t,e,n=!1)=>{const s=t;switch(s._op_layer){case"Locally":return W(()=>a=>s.f(a.getOrElseMemoize(s.self,e)));case"ExtendScope":return W(()=>a=>XD(c=>a.getOrElseMemoize(s.layer,c)));case"Fold":return W(()=>a=>w(a.getOrElseMemoize(s.layer,e),ms({onFailure:c=>a.getOrElseMemoize(s.failureK(c),e),onSuccess:c=>a.getOrElseMemoize(s.successK(c),e)})));case"Fresh":return W(()=>a=>w(s.layer,Tz(e)));case"FromEffect":return W(n?()=>a=>s.effect:()=>a=>a.getOrElseMemoize(t,e));case"Provide":return W(()=>a=>w(a.getOrElseMemoize(s.first,e),X(c=>w(a.getOrElseMemoize(s.second,e),r_(c)))));case"Scoped":return W(n?()=>a=>ym(s.effect,e):()=>a=>a.getOrElseMemoize(t,e));case"Suspend":return W(()=>a=>a.getOrElseMemoize(s.evaluate(),e));case"ProvideMerge":return W(()=>a=>w(a.getOrElseMemoize(s.first,e),$F(a.getOrElseMemoize(s.second,e),s.zipK)));case"ZipWith":return W(()=>a=>w(a.getOrElseMemoize(s.first,e),gm(a.getOrElseMemoize(s.second,e),s.zipK,{concurrent:!0})))}},mtt=()=>m_(IF()),PC=$(2,(t,e)=>{const n=Rb(t),s=n?t:e;return m_(kt(n?e:t,c=>tm(s,c)))});function m_(t){const e=Object.create(pc);return e._op_layer=KW,e.effect=t,e}const ptt=$(2,(t,e)=>Stt(t,e,(n,s)=>Oc(n,s))),kz=(...t)=>{let e=t[0];for(let n=1;n<t.length;n++)e=ptt(e,t[n]);return e},qC=$(2,(t,e)=>{const n=Rb(t),s=n?t:e;return gtt(kt(n?e:t,c=>tm(s,c)))}),gtt=t=>{const e=Object.create(pc);return e._op_layer=HW,e.effect=t,e},ytt=$(2,(t,e)=>{const n=Rb(t);return m_(nt(tm(n?t:e,n?e:t)))}),Mz=t=>{const e=Object.create(pc);return e._op_layer=VW,e.evaluate=t,e},btt=$(2,(t,e)=>{const n=Rb(t),s=n?t:e,a=n?e:t;return m_(W(()=>tm(s,a())))}),T$=$(2,(t,e)=>Mz(()=>{const n=Object.create(pc);return n._op_layer=YW,n.first=Object.create(pc,{_op_layer:{value:pz,enumerable:!0},first:{value:mtt(),enumerable:!0},second:{value:Array.isArray(e)?kz(...e):e},zipK:{value:(s,a)=>w(s,Oc(a))}}),n.second=t,n})),_tt=$(2,(t,e)=>{const n=Object.create(pc);return n._op_layer=pz,n.first=e,n.second=T$(t,e),n.zipK=(s,a)=>w(s,Oc(a)),n}),Stt=$(3,(t,e,n)=>Mz(()=>{const s=Object.create(pc);return s._op_layer=GW,s.first=t,s.second=e,s.zipK=n,s})),BC=$(2,(t,e)=>ZD(n=>X(Tz(e,n),s=>KE(t,s)))),KC=$(2,(t,e)=>{const n=Md(Fd.fiberRefs,e.fiberRefs),s=Bo(Fd.runtimeFlags,e.runtimeFlags);return zs(a=>ee(c=>{const l=c.getFiberRef(aa),d=c.getFiberRefs(),m=Ad(c.id(),d)(n),p=c.currentRuntimeFlags,g=Gu(s)(p),b=Md(m,d),S=Bo(g,p);return c.setFiberRefs(m),c.currentRuntimeFlags=g,xd(KE(a(t),Oc(l,e.context)),ee(v=>(v.setFiberRefs(Ad(v.id(),v.getFiberRefs())(b)),v.currentRuntimeFlags=Gu(S)(v.currentRuntimeFlags),Se)))}))}),vtt=$(2,(t,e)=>Array.isArray(e)?BC(t,kz(...e)):ftt(e)?BC(t,e):v8(e)?KE(t,e):qW in e?X(e.runtimeEffect,n=>KC(t,n)):KC(t,e)),$tt=Lb,wtt=function(){const t=Symbol.for("effect/Data/Error/plainArgs");return{BaseEffectError:class extends LE{constructor(n){super(n?.message,n?.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,t,{value:n,enumerable:!1}))}toJSON(){return{...this[t],...this}}}}.BaseEffectError}(),Ett=t=>{const e={BaseEffectError:class extends wtt{_tag=t}};return e.BaseEffectError.prototype.name=t,e.BaseEffectError},Ttt="effect/Schedule",Az=Symbol.for(Ttt),Ott=t=>_t(t,Az),Rtt="effect/ScheduleDriver",ktt=Symbol.for(Rtt),O$={start:0,now:0,input:void 0,output:void 0,elapsed:gl,elapsedSincePrevious:gl,recurrence:0},HC=kb()("effect/Schedule/CurrentIterationMetadata",{defaultValue:()=>O$}),Mtt={_Out:t=>t,_In:t=>t,_R:t=>t},Att={_Out:t=>t,_In:t=>t,_R:t=>t};class Ctt{initial;step;[Az]=Mtt;constructor(e,n){this.initial=e,this.step=n}pipe(){return lt(this,arguments)}}const VC=(t,e,n,s)=>My(t,a=>a.recurrence===0?{now:e,input:n,output:s,recurrence:a.recurrence+1,elapsed:gl,elapsedSincePrevious:gl,start:e}:{now:e,input:n,output:s,recurrence:a.recurrence+1,elapsed:yl(e-a.start),elapsedSincePrevious:yl(e-a.now),start:a.start});class Ntt{schedule;ref;[ktt]=Att;constructor(e,n){this.schedule=e,this.ref=n}get state(){return kt(oi(this.ref),e=>e[1])}get last(){return X(oi(this.ref),([e,n])=>{switch(e._tag){case"None":return IE(()=>new Wb);case"Some":return nt(e.value)}})}iterationMeta=eT(O$);get reset(){return Xu(this.ref,[at(),this.schedule.initial]).pipe(Qb(Xu(this.iterationMeta,O$)))}next(e){return w(kt(oi(this.ref),n=>n[1]),X(n=>w(nQ,X(s=>w(bt(()=>this.schedule.step(s,e,n)),X(([a,c,l])=>{const d=Xu(this.ref,[ht(c),a]);if(Fy(l))return d.pipe(ze(Ze(at())));const m=wW(l.intervals)-s;if(m<=0)return d.pipe(ze(VC(this.iterationMeta,s,e,c)),Or(c));const p=yl(m);return w(d,ze(VC(this.iterationMeta,s,e,c)),ze(yQ(p)),Or(c))}))))))}}const _m=(t,e)=>new Ctt(t,e),xtt=$(2,(t,e)=>yT(t,(n,s)=>W(()=>e(n,s)))),yT=$(2,(t,e)=>_m(t.initial,(n,s,a)=>X(t.step(n,s,a),([c,l,d])=>Fy(d)?nt([c,l,Id]):kt(e(s,l),m=>m?[c,l,d]:[c,l,Id])))),Itt=t=>w(ky([at(),t.initial]),kt(e=>new Ntt(t,e))),Ftt=$(2,(t,e)=>Dtt(t,e,$W)),Dtt=$(3,(t,e,n)=>_m([t.initial,e.initial],(s,a,c)=>w($F(t.step(s,a,c[0]),e.step(s,a,c[1]),(l,d)=>[l,d]),X(([[l,d,m],[p,g,b]])=>UC(m)&&UC(b)?R$(t,e,a,l,d,m.intervals,p,g,b.intervals,n):nt([[l,p],[d,g],Id]))))),R$=(t,e,n,s,a,c,l,d,m,p)=>{const g=p(c,m);return TW(g)?nt([[s,l],[a,d],CW(g)]):w(c,EW(m))?X(t.step(zC(c),n,s),([b,S,v])=>Fy(v)?nt([[b,l],[S,d],Id]):R$(t,e,n,b,S,v.intervals,l,d,m,p)):X(e.step(zC(m),n,l),([b,S,v])=>Fy(v)?nt([[s,b],[a,S],Id]):R$(t,e,n,s,a,c,b,S,v.intervals,p))},ztt=$(2,(t,e)=>Utt(t,n=>W(()=>e(n)))),Utt=$(2,(t,e)=>_m(t.initial,(n,s,a)=>X(t.step(n,s,a),([c,l,d])=>kt(e(l),m=>[c,m,d])))),Ltt=t=>_m(t.initial,(e,n,s)=>w(t.step(e,n,s),kt(([a,c,l])=>[a,n,l]))),jtt=t=>Ktt(Nz,e=>e<t),Ptt=(t,e)=>_m(t,(n,s,a)=>W(()=>[e(a),a,NW(mW(n))])),qtt=$(2,(t,e)=>yT(t,(n,s)=>mQ(e(n)))),Btt=$(2,(t,e)=>yT(t,(n,s)=>e(n))),Ktt=$(2,(t,e)=>xtt(t,(n,s)=>e(s))),jg=Symbol.for("effect/Schedule/ScheduleDefect");class Htt{error;[jg];constructor(e){this.error=e,this[jg]=jg}}const Vtt=t=>_t(t,jg),YC=t=>Td(t,e=>by(new Htt(e))),Ytt=t=>He(EE(t,e=>M3(e)&&Vtt(e.defect)?ht(e.defect):at()),{onNone:()=>t,onSome:e=>ac(e.error)}),Gtt=t=>pF(t,e=>yn(Ytt(e))),GC=$(2,(t,e)=>Qtt(t,e,(n,s)=>Ze(n))),Jtt=$(2,(t,e)=>{if(Ott(e))return GC(t,e);const n=e.schedule??Ltt(Nz),s=e.while?Btt(n,l=>{const d=e.while(l);return typeof d=="boolean"?nt(d):YC(d)}):n,a=e.until?qtt(s,l=>{const d=e.until(l);return typeof d=="boolean"?nt(d):YC(d)}):s,c=e.times?Ftt(a,jtt(e.times)).pipe(ztt(l=>l[0])):a;return Gtt(GC(t,c))}),Qtt=$(3,(t,e,n)=>X(Itt(e),s=>Wa(t,{onFailure:a=>n(a,at()),onSuccess:a=>Cz($C(t,HC,oi(s.iterationMeta)),s,(c,l)=>$C(n(c,l),HC,oi(s.iterationMeta)),a)}))),Cz=(t,e,n,s)=>Wa(e.next(s),{onFailure:()=>YV(e.last),onSuccess:a=>Wa(t,{onFailure:c=>n(c,ht(a)),onSuccess:c=>Cz(t,e,n,c)})}),Nz=Ptt(0,t=>t+1),JC=Symbol.for("effect/MutableList"),Xtt={[JC]:JC,[Symbol.iterator](){let t=!1,e=this.head;return{next(){if(t)return this.return();if(e==null)return t=!0,this.return();const n=e.value;return e=e.next,{done:t,value:n}},return(n){return t||(t=!0),{done:!0,value:n}}}},toString(){return Te(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(Re)}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}},Ztt=t=>({value:t,removed:!1,prev:void 0,next:void 0}),Wtt=()=>{const t=Object.create(Xtt);return t.head=void 0,t.tail=void 0,t._length=0,t},xz=t=>bT(t)===0,bT=t=>t._length,tet=$(2,(t,e)=>{const n=Ztt(e);return t.head===void 0&&(t.head=n),t.tail===void 0||(t.tail.next=n,n.prev=t.tail),t.tail=n,t._length+=1,t}),eet=t=>{const e=t.head;if(e!==void 0)return net(t,e),e.value},net=(t,e)=>{e.removed||(e.removed=!0,e.prev!==void 0&&e.next!==void 0?(e.prev.next=e.next,e.next.prev=e.prev):e.prev!==void 0?(t.tail=e.prev,e.prev.next=void 0):e.next!==void 0?(t.head=e.next,e.next.prev=void 0):(t.tail=void 0,t.head=void 0),t._length>0&&(t._length-=1))},QC=Symbol.for("effect/MutableQueue"),Ke=Symbol.for("effect/mutable/MutableQueue/Empty"),ret={[QC]:QC,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return Te(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(Re)}},[pe](){return this.toJSON()},pipe(){return lt(this,arguments)}},Iz=t=>{const e=Object.create(ret);return e.queue=Wtt(),e.capacity=t,e},set=t=>Iz(t),p_=()=>Iz(void 0),_T=t=>bT(t.queue),Ho=t=>xz(t.queue),iet=t=>t.capacity===void 0?1/0:t.capacity,Tl=$(2,(t,e)=>{const n=bT(t.queue);return t.capacity!==void 0&&n===t.capacity?!1:(tet(e)(t.queue),!0)}),ST=$(2,(t,e)=>{const n=e[Symbol.iterator]();let s,a=ke(),c=!0;for(;c&&(s=n.next())&&!s.done;)c=Tl(s.value)(t);for(;s!=null&&!s.done;)a=Kn(s.value)(a),s=n.next();return Wi(a)}),Vi=$(2,(t,e)=>xz(t.queue)?e:eet(t.queue)),g_=$(2,(t,e)=>{let n=ke(),s=0;for(;s<e;){const a=Vi(Ke)(t);if(a===Ke)break;n=Kn(a)(n),s+=1}return Wi(n)}),k$=lc,df=pi,Fz=hT,Yi=El,XC=fc,ZC=ee,Dz=Ze,Gi=yn,aet=gF,Zu=ZV,J0=tY,nn=nt,We=bt,xe=W,se=Se,zz=Td,vT=pF,oet=fQ,Ou=Tn,ks=FE,Hh=Cc,Uz=zs,Pg=Or,cet=gs,me=kt,$T=Vb,zy=JD,uet=dF,Pu=xd,fet=hc,wT=WD,M$=ZD,het=am,det=mT,Vo=fz,met=UW,Uy=vtt,Ru=Sl,Ln=Ya,pet=VV,get=$Q,Rt=X,Du=Kb,Q0=GZ,Lz=ez,ET=Yb,jz=SQ,yet=uQ,WC=Jtt,bet=lf,_et=SD,A$=bF,zi=ms,vet=dQ,Pz=ntt,$et=gT,qz=zW,Bz=stt,Ol=itt,C$=PZ,TT=qZ,Un=BZ,y_=gm,wet=t=>{const e=new Map;return new Proxy(t,{get(n,s,a){if(s in n)return Reflect.get(n,s,a);if(e.has(s))return e.get(s);const c=(...b)=>Kh(n,S=>typeof S[s]=="function"?(e.set(s,(...v)=>Kh(n,E=>E[s](...v))),S[s](...b)):(e.set(s,Kh(n,v=>v[s])),S[s])),l=Kh(n,b=>b[s]);Object.assign(c,l);const d=c.apply,m=c.bind,p=c.call,g=Object.setPrototypeOf({},Object.getPrototypeOf(l));return g.apply=d,g.bind=m,g.call=p,Object.setPrototypeOf(c,g),e.set(s,c),c}})},Kz=function(){return function(){const[t,e]=arguments,n="accessors"in e?e.accessors:!1,s=Error.stackTraceLimit;Error.stackTraceLimit=2;const a=new Error;Error.stackTraceLimit=s;let c="unchecked";const l=function(b){if(c==="unchecked"){const S=Object.getPrototypeOf(b);if(S===Object.prototype||S===null)c="plain";else{const v=Object.getPrototypeOf(this);Object.setPrototypeOf(v,S),c="patched"}}if(c==="plain")Object.assign(this,b);else if(c==="patched")return Object.setPrototypeOf(b,Object.getPrototypeOf(this)),b};l.prototype._tag=t,Object.defineProperty(l,"make",{get(){return b=>new this(b)}}),Object.defineProperty(l,"use",{get(){return b=>Kh(this,b)}}),l.key=t,Object.assign(l,Ob),Object.defineProperty(l,"stack",{get(){return a.stack}});const d="dependencies"in e&&e.dependencies.length>0,m=d?"DefaultWithoutDependencies":"Default";let p,g=!1;if("effect"in e?(g=typeof e.effect=="function",Object.defineProperty(l,m,{get(){return g?(function(){return PC(l,me(e.effect.apply(null,arguments),b=>new this(b)))}).bind(this):p??=PC(l,me(e.effect,b=>new this(b)))}})):"scoped"in e?(g=typeof e.scoped=="function",Object.defineProperty(l,m,{get(){return g?(function(){return qC(l,me(e.scoped.apply(null,arguments),b=>new this(b)))}).bind(this):p??=qC(l,me(e.scoped,b=>new this(b)))}})):"sync"in e?Object.defineProperty(l,m,{get(){return p??=btt(l,()=>new this(e.sync()))}}):Object.defineProperty(l,m,{get(){return p??=ytt(l,new this(e.succeed))}}),d){let b;Object.defineProperty(l,"Default",{get(){return g?function(){return T$(this.DefaultWithoutDependencies.apply(null,arguments),e.dependencies)}:b??=T$(this.DefaultWithoutDependencies,e.dependencies)}})}return n===!0?wet(l):l}},X0=_tt,Hz=Ez,Eet=Oz,Vz=(t,e)=>{switch(e._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(t);case"SymbolKeyword":return Object.getOwnPropertySymbols(t);case"Refinement":return Vz(t,e.from)}},Ji=t=>Object.keys(t).concat(Object.getOwnPropertySymbols(t)),Yz=t=>{let e=!1,n;return()=>(e||(n=t(),e=!0),n)},Tet=t=>{try{return t.toISOString()}catch{return String(t)}},xs=(t,e=!0)=>{if(Array.isArray(t))return`[${t.map(n=>xs(n,e)).join(",")}]`;if(RK(t))return Tet(t);if(_t(t,"toString")&&Jd(t.toString)&&t.toString!==Object.prototype.toString)return t.toString();if(ds(t))return JSON.stringify(t);if(Zi(t)||t==null||pd(t)||xv(t))return String(t);if($b(t))return String(t)+"n";if(Qw(t))return`${t.constructor.name}(${xs(Array.from(t),e)})`;try{e&&JSON.stringify(t);const n=`{${Ji(t).map(a=>`${ds(a)?JSON.stringify(a):String(a)}:${xs(t[a],!1)}`).join(",")}}`,s=t.constructor.name;return t.constructor!==Object.prototype.constructor?`${s}(${n})`:n}catch{return"<circular structure>"}},Gz=t=>typeof t=="string"?JSON.stringify(t):String(t),Jz=t=>Array.isArray(t),tN=t=>`[${Gz(t)}]`,Qz=t=>Jz(t)?t.map(tN).join(""):tN(t),io=(t,e,n,s)=>{let a=t;return n&&gn(n)&&(a+=`
at path: ${Qz(n)}`),e!==void 0&&(a+=`
details: ${e}`),s&&(a+=`
schema (${s._tag}): ${s}`),a},Xz=(t,e,n)=>io("Unsupported schema or overlapping types",`cannot extend ${t} with ${e}`,n),Oet=t=>io("Unsupported key schema",void 0,void 0,t),Ret=t=>io("Unsupported literal",`literal value: ${xs(t)}`),eN=t=>io("Duplicate index signature",`${t} index signature`),ket=io("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),Met=io("Invalid element","A required element cannot follow an optional element. ts(1257)"),nN=t=>io("Duplicate property signature transformation",`Duplicate key ${xs(t)}`),Zz=t=>io("Duplicate property signature",`Duplicate key ${xs(t)}`),Aet=Symbol.for("effect/annotation/Brand"),Cet=Symbol.for("effect/annotation/SchemaId"),Wz=Symbol.for("effect/annotation/Message"),OT=Symbol.for("effect/annotation/MissingMessage"),RT=Symbol.for("effect/annotation/Identifier"),ao=Symbol.for("effect/annotation/Title"),Wu=Symbol.for("effect/annotation/AutoTitle"),Sm=Symbol.for("effect/annotation/Description"),tU=Symbol.for("effect/annotation/Examples"),eU=Symbol.for("effect/annotation/Default"),nU=Symbol.for("effect/annotation/JSONSchema"),rU=Symbol.for("effect/annotation/Arbitrary"),sU=Symbol.for("effect/annotation/Pretty"),iU=Symbol.for("effect/annotation/Equivalence"),Net=Symbol.for("effect/annotation/Documentation"),aU=Symbol.for("effect/annotation/Concurrency"),oU=Symbol.for("effect/annotation/Batching"),cU=Symbol.for("effect/annotation/ParseIssueTitle"),uU=Symbol.for("effect/annotation/ParseOptions"),lU=Symbol.for("effect/annotation/DecodingFallback"),Ly=Symbol.for("effect/annotation/Surrogate"),xet=Symbol.for("effect/annotation/StableFilter"),hr=$(2,(t,e)=>Object.prototype.hasOwnProperty.call(t.annotations,e)?ht(t.annotations[e]):at()),Iet=hr(Aet),Fet=hr(Wz),Det=hr(OT),fU=hr(ao),hU=hr(Wu),b_=hr(RT),dU=hr(Sm),zet=hr(aU),Uet=hr(oU),Let=hr(cU),jet=hr(uU),Pet=hr(lU),mU=hr(Ly),qet=hr(xet),Bet=t=>Y8(qet(t),e=>e===!0),kT=Symbol.for("effect/annotation/JSONIdentifier"),Ket=hr(kT),Het=t=>Ha(Ket(t),()=>b_(t));let __=class{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(e,n,s,a={}){this.typeParameters=e,this.decodeUnknown=n,this.encodeUnknown=s,this.annotations=a}toString(){return Ee(hi(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(e=>e.toJSON()),annotations:Mn(this.annotations)}}};const oa=t=>e=>e._tag===t;let N$=class{literal;annotations;_tag="Literal";constructor(e,n={}){this.literal=e,this.annotations=n}toString(){return Ee(hi(this),()=>xs(this.literal))}toJSON(){return{_tag:this._tag,literal:$b(this.literal)?String(this.literal):this.literal,annotations:Mn(this.annotations)}}};const ad=oa("Literal");let Vet=class{symbol;annotations;_tag="UniqueSymbol";constructor(e,n={}){this.symbol=e,this.annotations=n}toString(){return Ee(hi(this),()=>xs(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:Mn(this.annotations)}}},Yet=class{annotations;_tag="NeverKeyword";constructor(e={}){this.annotations=e}toString(){return mf(this)}toJSON(){return{_tag:this._tag,annotations:Mn(this.annotations)}}};const pU=new Yet({[ao]:"never"});let Get=class{annotations;_tag="UnknownKeyword";constructor(e={}){this.annotations=e}toString(){return mf(this)}toJSON(){return{_tag:this._tag,annotations:Mn(this.annotations)}}};const Jet=new Get({[ao]:"unknown"});let Qet=class{annotations;_tag="AnyKeyword";constructor(e={}){this.annotations=e}toString(){return mf(this)}toJSON(){return{_tag:this._tag,annotations:Mn(this.annotations)}}};const Xet=new Qet({[ao]:"any"});let Zet=class{annotations;_tag="StringKeyword";constructor(e={}){this.annotations=e}toString(){return mf(this)}toJSON(){return{_tag:this._tag,annotations:Mn(this.annotations)}}};const rN=new Zet({[ao]:"string",[Sm]:"a string"}),x$=oa("StringKeyword");class Wet{annotations;_tag="NumberKeyword";constructor(e={}){this.annotations=e}toString(){return mf(this)}toJSON(){return{_tag:this._tag,annotations:Mn(this.annotations)}}}const sN=new Wet({[ao]:"number",[Sm]:"a number"}),iN=oa("NumberKeyword");let tnt=class{annotations;_tag="BooleanKeyword";constructor(e={}){this.annotations=e}toString(){return mf(this)}toJSON(){return{_tag:this._tag,annotations:Mn(this.annotations)}}};const aN=new tnt({[ao]:"boolean",[Sm]:"a boolean"}),oN=oa("BooleanKeyword"),ent=oa("SymbolKeyword");let MT=class{type;annotations;constructor(e,n={}){this.type=e,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:Mn(this.annotations)}}toString(){return String(this.type)}},vm=class extends MT{isOptional;constructor(e,n,s={}){super(e,s),this.isOptional=n}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:Mn(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}};const gU=t=>t.map(e=>e.type);let yU=class{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(e,n,s,a={}){this.elements=e,this.rest=n,this.isReadonly=s,this.annotations=a;let c=!1,l=!1;for(const d of e)if(d.isOptional)c=!0;else if(c){l=!0;break}if(l||c&&n.length>1)throw new Error(Met)}toString(){return Ee(hi(this),()=>nnt(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(e=>e.toJSON()),rest:this.rest.map(e=>e.toJSON()),isReadonly:this.isReadonly,annotations:Mn(this.annotations)}}};const nnt=t=>{const e=t.elements.map(String).join(", ");return Z8(t.rest,{onEmpty:()=>`readonly [${e}]`,onNonEmpty:(n,s)=>{const a=String(n),c=a.includes(" | ")?`(${a})`:a;if(s.length>0){const l=s.map(String).join(", ");return t.elements.length>0?`readonly [${e}, ...${c}[], ${l}]`:`readonly [...${c}[], ${l}]`}else return t.elements.length>0?`readonly [${e}, ...${c}[]]`:`ReadonlyArray<${a}>`}})};let zn=class extends vm{name;isReadonly;constructor(e,n,s,a,c){super(n,s,c),this.name=e,this.isReadonly=a}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:Mn(this.annotations)}}};const bU=t=>{switch(t._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return bU(t.from)}return!1};let S_=class{type;isReadonly;parameter;constructor(e,n,s){if(this.type=n,this.isReadonly=s,bU(e))this.parameter=e;else throw new Error(ket)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}},Ga=class{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(e,n,s={}){this.annotations=s;const a={};for(let l=0;l<e.length;l++){const d=e[l].name;if(Object.prototype.hasOwnProperty.call(a,d))throw new Error(Zz(d));a[d]=null}const c={string:!1,symbol:!1};for(let l=0;l<n.length;l++){const d=TU(n[l].parameter);if(x$(d)){if(c.string)throw new Error(eN("string"));c.string=!0}else if(ent(d)){if(c.symbol)throw new Error(eN("symbol"));c.symbol=!0}}this.propertySignatures=e,this.indexSignatures=n}toString(){return Ee(hi(this),()=>rnt(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(e=>e.toJSON()),indexSignatures:this.indexSignatures.map(e=>e.toJSON()),annotations:Mn(this.annotations)}}};const cN=t=>t.map(String).join("; "),rnt=t=>{if(t.propertySignatures.length>0){const e=t.propertySignatures.map(String).join("; ");return t.indexSignatures.length>0?`{ ${e}; ${cN(t.indexSignatures)} }`:`{ ${e} }`}else return t.indexSignatures.length>0?`{ ${cN(t.indexSignatures)} }`:"{}"},uN=oa("TypeLiteral"),snt=gd(ZI(vl,t=>{switch(t._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),int={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},_U=t=>dy(t,e=>CT(e)?_U(e.types):[e]),ant=t=>{const e=snt(t),n=[],s={},a=[];for(const c of e)switch(c._tag){case"NeverKeyword":break;case"AnyKeyword":return[Xet];case"UnknownKeyword":return[Jet];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{s[c._tag]||(s[c._tag]=c,n.push(c));break}case"Literal":{const l=typeof c.literal;switch(l){case"string":case"number":case"bigint":case"boolean":{const d=int[l];!s[d]&&!a.includes(c.literal)&&(a.push(c.literal),n.push(c));break}case"object":{a.includes(c.literal)||(a.push(c.literal),n.push(c));break}}break}case"UniqueSymbol":{!s.SymbolKeyword&&!a.includes(c.symbol)&&(a.push(c.symbol),n.push(c));break}case"TupleType":{s.ObjectKeyword||n.push(c);break}case"TypeLiteral":{c.propertySignatures.length===0&&c.indexSignatures.length===0?s["{}"]||(s["{}"]=c,n.push(c)):s.ObjectKeyword||n.push(c);break}default:n.push(c)}return n};let Ts=class I${types;annotations;static make=(e,n)=>AT(e)?new I$(e,n):e.length===1?e[0]:pU;static unify=(e,n)=>I$.make(ant(_U(e)),n);_tag="Union";constructor(e,n={}){this.types=e,this.annotations=n}toString(){return Ee(hi(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(e=>e.toJSON()),annotations:Mn(this.annotations)}}};const ont=(t,e)=>t.map(e),AT=t=>t.length>1,CT=oa("Union"),Z0=zt(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);let jy=class{f;annotations;_tag="Suspend";constructor(e,n={}){this.f=e,this.annotations=n,this.f=Yz(e)}toString(){return hi(this).pipe(Ha(()=>nf(L8(this.f)(),e=>hi(e))),Ee(()=>"<suspended schema>"))}toJSON(){const e=this.f();let n=Z0.get(e);return n||(Z0.set(e,{_tag:this._tag}),n={_tag:this._tag,ast:e.toJSON(),annotations:Mn(this.annotations)},Z0.set(e,n),n)}},SU=class{from;filter;annotations;_tag="Refinement";constructor(e,n,s={}){this.from=e,this.filter=n,this.annotations=s}toString(){return b_(this).pipe(Ee(()=>He(OU(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:e=>tl(this.from)?String(this.from)+" & "+e:e})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:Mn(this.annotations)}}};const tl=oa("Refinement"),W0={};let qu=class{from;to;transformation;annotations;_tag="Transformation";constructor(e,n,s,a={}){this.from=e,this.to=n,this.transformation=s,this.annotations=a}toString(){return Ee(hi(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:Mn(this.annotations)}}};const cnt=oa("Transformation");let vU=class{decode;encode;_tag="FinalTransformation";constructor(e,n){this.decode=e,this.encode=n}};const unt=t=>e=>e._tag===t;class lnt{_tag="ComposeTransformation"}const fnt=new lnt;let hnt=class{from;to;decode;encode;constructor(e,n,s,a){this.from=e,this.to=n,this.decode=s,this.encode=a}},F$=class{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(e){this.propertySignatureTransformations=e;const n={},s={};for(const a of e){const c=a.from;if(n[c])throw new Error(nN(c));n[c]=!0;const l=a.to;if(s[l])throw new Error(nN(l));s[l]=!0}}};const lN=unt("TypeLiteralTransformation"),Rl=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={...t.annotations,...e},a=mU(t);return Ue(a)&&(s[Ly]=Rl(a.value,e)),n.annotations.value=s,Object.create(Object.getPrototypeOf(t),n)},dnt="[\\s\\S]*",mnt="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",$U=(t,e)=>{switch(t._tag){case"Literal":return Sy(String(t.literal));case"StringKeyword":return dnt;case"NumberKeyword":return mnt;case"TemplateLiteral":return wU(t);case"Union":return t.types.map(n=>$U(n)).join("|")}},pnt=(t,e,n,s)=>CT(t)?`(${e})`:e,wU=(t,e,n)=>{let s="";if(t.head!==""){const a=Sy(t.head);s+=a}for(const a of t.spans){const c=$U(a.type);if(s+=pnt(a.type,c),a.literal!==""){const l=Sy(a.literal);s+=l}}return s},gnt=t=>new RegExp(`^${wU(t)}$`),fN=(t,e)=>{const n=[],s=[],a=c=>{switch(c._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":s.push(new S_(c,e,!0));break;case"Literal":if(ds(c.literal)||Zi(c.literal))n.push(new zn(c.literal,e,!1,!0));else throw new Error(Ret(c.literal));break;case"Enums":{for(const[l,d]of c.enums)n.push(new zn(d,e,!1,!0));break}case"UniqueSymbol":n.push(new zn(c.symbol,e,!1,!0));break;case"Union":c.types.forEach(a);break;default:throw new Error(Oet(c))}};return a(t),{propertySignatures:n,indexSignatures:s}},EU=t=>e=>{let n;for(const s of t)Object.prototype.hasOwnProperty.call(e.annotations,s)&&(n===void 0&&(n={}),n[s]=e.annotations[s]);return n},ynt=t=>e=>{const n={...e.annotations};for(const s of t)delete n[s];return n},bnt=EU([tU,eU,nU,rU,sU,iU]),Xe=t=>{switch(t._tag){case"Declaration":{const e=cs(t.typeParameters,Xe);return e===t.typeParameters?t:new __(e,t.decodeUnknown,t.encodeUnknown,t.annotations)}case"TupleType":{const e=cs(t.elements,a=>{const c=Xe(a.type);return c===a.type?a:new vm(c,a.isOptional)}),n=gU(t.rest),s=cs(n,Xe);return e===t.elements&&s===n?t:new yU(e,s.map(a=>new MT(a)),t.isReadonly,t.annotations)}case"TypeLiteral":{const e=cs(t.propertySignatures,s=>{const a=Xe(s.type);return a===s.type?s:new zn(s.name,a,s.isOptional,s.isReadonly)}),n=cs(t.indexSignatures,s=>{const a=Xe(s.type);return a===s.type?s:new S_(s.parameter,a,s.isReadonly)});return e===t.propertySignatures&&n===t.indexSignatures?t:new Ga(e,n,t.annotations)}case"Union":{const e=cs(t.types,Xe);return e===t.types?t:Ts.make(e,t.annotations)}case"Suspend":return new jy(()=>Xe(t.f()),t.annotations);case"Refinement":{const e=Xe(t.from);return e===t.from?t:new SU(e,t.filter,t.annotations)}case"Transformation":{const e=bnt(t);return Xe(e!==void 0?Rl(t.to,e):t.to)}}return t},ku=t=>He(Het(t),{onNone:()=>{},onSome:e=>({[kT]:e})});function cs(t,e){let n=!1;const s=Mb(t.length);for(let a=0;a<t.length;a++){const c=t[a],l=e(c);l!==c&&(n=!0),s[a]=l}return n?s:t}const Ys=(t,e)=>{switch(t._tag){case"Declaration":{const n=cs(t.typeParameters,s=>Ys(s));return n===t.typeParameters?t:new __(n,t.decodeUnknown,t.encodeUnknown,t.annotations)}case"TupleType":{const n=cs(t.elements,c=>{const l=Ys(c.type);return l===c.type?c:new vm(l,c.isOptional)}),s=gU(t.rest),a=cs(s,c=>Ys(c));return n===t.elements&&a===s?t:new yU(n,a.map(c=>new MT(c)),t.isReadonly,ku(t))}case"TypeLiteral":{const n=cs(t.propertySignatures,a=>{const c=Ys(a.type);return c===a.type?a:new zn(a.name,c,a.isOptional,a.isReadonly)}),s=cs(t.indexSignatures,a=>{const c=Ys(a.type);return c===a.type?a:new S_(a.parameter,c,a.isReadonly)});return n===t.propertySignatures&&s===t.indexSignatures?t:new Ga(n,s,ku(t))}case"Union":{const n=cs(t.types,s=>Ys(s));return n===t.types?t:Ts.make(n,ku(t))}case"Suspend":return new jy(()=>Ys(t.f()),ku(t));case"Refinement":{const n=Ys(t.from),s=ku(t);return s?Rl(n,s):n}case"Transformation":{const n=ku(t);return Ys(n?Rl(t.from,n):t.from)}}return t},D$=t=>Ys(t),Mn=t=>{const e={};for(const n of Object.getOwnPropertySymbols(t))e[String(n)]=t[n];return e},TU=t=>{switch(t._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return t;case"Refinement":return TU(t.from)}},mf=t=>Ee(hi(t),()=>t._tag);function _nt(t){return He(Iet(t),{onNone:()=>"",onSome:e=>e.map(n=>` & Brand<${xs(n)}>`).join("")})}const OU=t=>fU(t).pipe(Ha(()=>dU(t)),Ha(()=>hU(t)),Po(e=>e+_nt(t))),hi=t=>Ha(b_(t),()=>OU(t));let Jn=class{path;actual;issue;_tag="Pointer";constructor(e,n,s){this.path=e,this.actual=n,this.issue=s}},hN=class{actual;message;_tag="Unexpected";constructor(e,n){this.actual=e,this.message=n}},Ch=class{ast;message;_tag="Missing";actual=void 0;constructor(e,n){this.ast=e,this.message=n}},Je=class{ast;actual;issues;output;_tag="Composite";constructor(e,n,s,a){this.ast=e,this.actual=n,this.issues=s,this.output=a}},tv=class{ast;actual;kind;issue;_tag="Refinement";constructor(e,n,s,a){this.ast=e,this.actual=n,this.kind=s,this.issue=a}},ev=class{ast;actual;kind;issue;_tag="Transformation";constructor(e,n,s,a){this.ast=e,this.actual=n,this.kind=s,this.issue=a}},Ua=class{ast;actual;message;_tag="Type";constructor(e,n,s){this.ast=e,this.actual=n,this.message=s}},dN=class{ast;actual;message;_tag="Forbidden";constructor(e,n,s){this.ast=e,this.actual=n,this.message=s}};const mN=Symbol.for("effect/Schema/ParseErrorTypeId");let Snt=class extends Ett("ParseError"){[mN]=mN;get message(){return this.toString()}toString(){return qg.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[pe](){return this.toJSON()}};const vnt=t=>new Snt({issue:t}),Dd=Jt,RU=Ot,Sr=A8,Pa=$(2,(t,e)=>Sr(t)?$r(t,{onLeft:Ot,onRight:e}):Rt(t,e)),qr=$(2,(t,e)=>Sr(t)?N8(t,e):me(t,e)),nv=$(2,(t,e)=>Sr(t)?C8(t,e):$T(t,e)),kU=$(2,(t,e)=>Sr(t)?$r(t,{onLeft:e,onRight:Jt}):zz(t,e)),v_=(t,e)=>e===void 0||Zi(e)?t:t===void 0?e:{...t,...e},$nt=(t,e,n)=>{const s=$n(t,e);return(a,c)=>s(a,v_(n,c))},MU=(t,e,n)=>{const s=$nt(t,e,n);return(a,c)=>JI(s(a,c),vnt)},wnt=(t,e,n)=>{const s=$n(t,e);return(a,c)=>s(a,{...v_(n,c),isEffectAllowed:!0})},Ent=(t,e)=>MU(t.ast,!0,e),Tnt=(t,e)=>wnt(t.ast,!1,e),AU=(t,e)=>MU(Xe(t.ast),!0,e),Ont=(t,e)=>{const n=$n(Xe(t.ast),!0);return(s,a)=>ri(n(s,{exact:!0,...v_(e,a)}))},Rnt=zt(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),knt=zt(Symbol.for("effect/ParseResult/encodeMemoMap"),()=>new WeakMap),$n=(t,e)=>{const n=e?Rnt:knt,s=n.get(t);if(s)return s;const a=Mnt(t,e),c=jet(t),l=Ue(c)?(p,g)=>a(p,v_(g,c.value)):a,d=Pet(t),m=e&&Ue(d)?(p,g)=>Yh(kU(l(p,g),d.value),t,p,g):l;return n.set(t,m),m},rv=t=>Xs(zet(t)),sv=t=>Xs(Uet(t)),Mnt=(t,e)=>{switch(t._tag){case"Refinement":if(e){const n=$n(t.from,!0);return(s,a)=>{a=a??W0;const c=a?.errors==="all",l=Pa(kU(n(s,a),d=>{const m=new tv(t,s,"From",d);return c&&Bet(t)&&IU(d)?He(t.filter(s,a,t),{onNone:()=>Ot(m),onSome:p=>Ot(new Je(t,s,[m,new tv(t,s,"Predicate",p)]))}):Ot(m)}),d=>He(t.filter(d,a,t),{onNone:()=>Jt(d),onSome:m=>Ot(new tv(t,s,"Predicate",m))}));return Yh(l,t,s,a)}}else{const n=$n(Xe(t),!0),s=$n(CU(t.from),!1);return(a,c)=>Yh(Pa(n(a,c),l=>s(l,c)),t,a,c)}case"Transformation":{const n=Nnt(t.transformation,e),s=e?$n(t.from,!0):$n(t.to,!1),a=e?$n(t.to,!0):$n(t.from,!1);return(c,l)=>Yh(Pa(nv(s(c,l),d=>new ev(t,c,e?"Encoded":"Type",d)),d=>Pa(nv(n(d,l??W0,t,c),m=>new ev(t,c,"Transformation",m)),m=>nv(a(m,l),p=>new ev(t,c,e?"Type":"Encoded",p)))),t,c,l)}case"Declaration":{const n=e?t.decodeUnknown(...t.typeParameters):t.encodeUnknown(...t.typeParameters);return(s,a)=>Yh(n(s,a??W0,t),t,s,a)}case"Literal":return jr(t,n=>n===t.literal);case"UniqueSymbol":return jr(t,n=>n===t.symbol);case"UndefinedKeyword":return jr(t,EK);case"NeverKeyword":return jr(t,TK);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return Jt;case"StringKeyword":return jr(t,ds);case"NumberKeyword":return jr(t,Zi);case"BooleanKeyword":return jr(t,pd);case"BigIntKeyword":return jr(t,$b);case"SymbolKeyword":return jr(t,xv);case"ObjectKeyword":return jr(t,ro);case"Enums":return jr(t,n=>t.enums.some(([s,a])=>a===n));case"TemplateLiteral":{const n=gnt(t);return jr(t,s=>ds(s)&&n.test(s))}case"TupleType":{const n=t.elements.map(p=>$n(p.type,e)),s=t.rest.map(p=>$n(p.type,e));let a=t.elements.filter(p=>!p.isOptional);t.rest.length>0&&(a=a.concat(t.rest.slice(1)));const c=a.length,l=t.elements.length>0?t.elements.map((p,g)=>g).join(" | "):"never",d=rv(t),m=sv(t);return(p,g)=>{if(!tH(p))return Ot(new Ua(t,p));const b=g?.errors==="all",S=[];let v=0;const E=[],D=p.length;for(let A=D;A<=c-1;A++){const P=new Jn(A,p,new Ch(a[A-D]));if(b){S.push([v++,P]);continue}else return Ot(new Je(t,p,P,E))}if(t.rest.length===0)for(let A=t.elements.length;A<=D-1;A++){const P=new Jn(A,p,new hN(p[A],`is unexpected, expected: ${l}`));if(b){S.push([v++,P]);continue}else return Ot(new Je(t,p,P,E))}let C=0,N;for(;C<n.length;C++)if(D<C+1){if(t.elements[C].isOptional)continue}else{const A=n[C],P=A(p[C],g);if(Sr(P)){if(Fn(P)){const M=new Jn(C,p,P.left);if(b){S.push([v++,M]);continue}else return Ot(new Je(t,p,M,Ss(E)))}E.push([v++,P.right])}else{const M=v++,U=C;N||(N=[]),N.push(({es:K,output:B})=>Rt(Ru(P),et=>{if(Fn(et)){const tt=new Jn(U,p,et.left);return b?(K.push([M,tt]),se):Ot(new Je(t,p,tt,Ss(B)))}return B.push([M,et.right]),se}))}}if(gn(s)){const[A,...P]=s;for(;C<D-P.length;C++){const M=A(p[C],g);if(Sr(M))if(Fn(M)){const U=new Jn(C,p,M.left);if(b){S.push([v++,U]);continue}else return Ot(new Je(t,p,U,Ss(E)))}else E.push([v++,M.right]);else{const U=v++,K=C;N||(N=[]),N.push(({es:B,output:et})=>Rt(Ru(M),tt=>{if(Fn(tt)){const Z=new Jn(K,p,tt.left);return b?(B.push([U,Z]),se):Ot(new Je(t,p,Z,Ss(et)))}else return et.push([U,tt.right]),se}))}}for(let M=0;M<P.length;M++)if(C+=M,!(D<C+1)){const U=P[M](p[C],g);if(Sr(U)){if(Fn(U)){const K=new Jn(C,p,U.left);if(b){S.push([v++,K]);continue}else return Ot(new Je(t,p,K,Ss(E)))}E.push([v++,U.right])}else{const K=v++,B=C;N||(N=[]),N.push(({es:et,output:tt})=>Rt(Ru(U),Z=>{if(Fn(Z)){const rt=new Jn(B,p,Z.left);return b?(et.push([K,rt]),se):Ot(new Je(t,p,rt,Ss(tt)))}return tt.push([K,Z.right]),se}))}}}const q=({es:A,output:P})=>Ag(A)?Ot(new Je(t,p,Ss(A),Ss(P))):Jt(Ss(P));if(N&&N.length>0){const A=N;return We(()=>{const P={es:Bh(S),output:Bh(E)};return Rt(Yi(A,M=>M(P),{concurrency:d,batching:m,discard:!0}),()=>q(P))})}return q({output:E,es:S})}}case"TypeLiteral":{if(t.propertySignatures.length===0&&t.indexSignatures.length===0)return jr(t,OK);const n=[],s={},a=[];for(const g of t.propertySignatures)n.push([$n(g.type,e),g]),s[g.name]=null,a.push(g.name);const c=t.indexSignatures.map(g=>[$n(g.parameter,e),$n(g.type,e),g.parameter]),l=Ts.make(t.indexSignatures.map(g=>g.parameter).concat(a.map(g=>xv(g)?new Vet(g):new N$(g)))),d=$n(l,e),m=rv(t),p=sv(t);return(g,b)=>{if(!kK(g))return Ot(new Ua(t,g));const S=b?.errors==="all",v=[];let E=0;const D=b?.onExcessProperty==="error",C=b?.onExcessProperty==="preserve",N={};let q;if(D||C){q=Ji(g);for(const U of q){const K=d(U,b);if(Sr(K)&&Fn(K))if(D){const B=new Jn(U,g,new hN(g[U],`is unexpected, expected: ${String(l)}`));if(S){v.push([E++,B]);continue}else return Ot(new Je(t,g,B,N))}else N[U]=g[U]}}let A;const P=b?.exact===!0;for(let U=0;U<n.length;U++){const K=n[U][1],B=K.name,et=Object.prototype.hasOwnProperty.call(g,B);if(!et){if(K.isOptional)continue;if(P){const rt=new Jn(B,g,new Ch(K));if(S){v.push([E++,rt]);continue}else return Ot(new Je(t,g,rt,N))}}const tt=n[U][0],Z=tt(g[B],b);if(Sr(Z)){if(Fn(Z)){const rt=new Jn(B,g,et?Z.left:new Ch(K));if(S){v.push([E++,rt]);continue}else return Ot(new Je(t,g,rt,N))}N[B]=Z.right}else{const rt=E++,vt=B;A||(A=[]),A.push(({es:ut,output:Et})=>Rt(Ru(Z),z=>{if(Fn(z)){const G=new Jn(vt,g,et?z.left:new Ch(K));return S?(ut.push([rt,G]),se):Ot(new Je(t,g,G,Et))}return Et[vt]=z.right,se}))}}for(let U=0;U<c.length;U++){const K=c[U],B=K[0],et=K[1],tt=Vz(g,K[2]);for(const Z of tt){const rt=B(Z,b);if(Sr(rt)&&ri(rt)){const vt=et(g[Z],b);if(Sr(vt))if(Fn(vt)){const ut=new Jn(Z,g,vt.left);if(S){v.push([E++,ut]);continue}else return Ot(new Je(t,g,ut,N))}else Object.prototype.hasOwnProperty.call(s,Z)||(N[Z]=vt.right);else{const ut=E++,Et=Z;A||(A=[]),A.push(({es:z,output:G})=>Rt(Ru(vt),st=>{if(Fn(st)){const Nt=new Jn(Et,g,st.left);return S?(z.push([ut,Nt]),se):Ot(new Je(t,g,Nt,G))}else return Object.prototype.hasOwnProperty.call(s,Z)||(G[Z]=st.right),se}))}}}}const M=({es:U,output:K})=>{if(Ag(U))return Ot(new Je(t,g,Ss(U),K));if(b?.propertyOrder==="original"){const B=q||Ji(g);for(const tt of a)B.indexOf(tt)===-1&&B.push(tt);const et={};for(const tt of B)Object.prototype.hasOwnProperty.call(K,tt)&&(et[tt]=K[tt]);return Jt(et)}return Jt(K)};if(A&&A.length>0){const U=A;return We(()=>{const K={es:Bh(v),output:Object.assign({},N)};return Rt(Yi(U,B=>B(K),{concurrency:m,batching:p,discard:!0}),()=>M(K))})}return M({es:v,output:N})}}case"Union":{const n=Ant(t.types,e),s=Ji(n.keys),a=s.length,c=t.types.length,l=new Map;for(let p=0;p<c;p++)l.set(t.types[p],$n(t.types[p],e));const d=rv(t)??1,m=sv(t);return(p,g)=>{const b=[];let S=0,v=[];if(a>0)if(Jw(p))for(let C=0;C<a;C++){const N=s[C],q=n.keys[N].buckets;if(Object.prototype.hasOwnProperty.call(p,N)){const A=String(p[N]);if(Object.prototype.hasOwnProperty.call(q,A))v=v.concat(q[A]);else{const{candidates:P,literals:M}=n.keys[N],U=Ts.make(M),K=P.length===c?new Ga([new zn(N,U,!1,!0)],[]):Ts.make(P);b.push([S++,new Je(K,p,new Jn(N,p,new Ua(U,p[N])))])}}else{const{candidates:A,literals:P}=n.keys[N],M=new zn(N,Ts.make(P),!1,!0),U=A.length===c?new Ga([M],[]):Ts.make(A);b.push([S++,new Je(U,p,new Jn(N,p,new Ch(M)))])}}else{const C=n.candidates.length===c?t:Ts.make(n.candidates);b.push([S++,new Ua(C,p)])}n.otherwise.length>0&&(v=v.concat(n.otherwise));let E;for(let C=0;C<v.length;C++){const N=v[C],q=l.get(N)(p,g);if(Sr(q)&&(!E||E.length===0)){if(ri(q))return q;b.push([S++,q.left])}else{const A=S++;E||(E=[]),E.push(P=>We(()=>"finalResult"in P?se:Rt(Ru(q),M=>(ri(M)?P.finalResult=M:P.es.push([A,M.left]),se))))}}const D=C=>Ag(C)?C.length===1&&C[0][1]._tag==="Type"?Ot(C[0][1]):Ot(new Je(t,p,Ss(C))):Ot(new Ua(t,p));if(E&&E.length>0){const C=E;return We(()=>{const N={es:Bh(b)};return Rt(Yi(C,q=>q(N),{concurrency:d,batching:m,discard:!0}),()=>"finalResult"in N?N.finalResult:D(N.es))})}return D(b)}}case"Suspend":{const n=Yz(()=>$n(Rl(t.f(),t.annotations),e));return(s,a)=>n()(s,a)}}},jr=(t,e)=>n=>e(n)?Jt(n):Ot(new Ua(t,n)),Vh=(t,e)=>{switch(t._tag){case"Declaration":{const n=mU(t);if(Ue(n))return Vh(n.value,e);break}case"TypeLiteral":{const n=[];for(let s=0;s<t.propertySignatures.length;s++){const a=t.propertySignatures[s],c=e?D$(a.type):Xe(a.type);ad(c)&&!a.isOptional&&n.push([a.name,c])}return n}case"TupleType":{const n=[];for(let s=0;s<t.elements.length;s++){const a=t.elements[s],c=e?D$(a.type):Xe(a.type);ad(c)&&!a.isOptional&&n.push([s,c])}return n}case"Refinement":return Vh(t.from,e);case"Suspend":return Vh(t.f(),e);case"Transformation":return Vh(e?t.from:t.to,e)}return[]},Ant=(t,e)=>{const n={},s=[],a=[];for(let c=0;c<t.length;c++){const l=t[c],d=Vh(l,e);if(d.length>0){a.push(l);for(let m=0;m<d.length;m++){const[p,g]=d[m],b=String(g.literal);n[p]=n[p]||{buckets:{},literals:[],candidates:[]};const S=n[p].buckets;if(Object.prototype.hasOwnProperty.call(S,b)){if(m<d.length-1)continue;S[b].push(l),n[p].literals.push(g),n[p].candidates.push(l)}else{S[b]=[l],n[p].literals.push(g),n[p].candidates.push(l);break}}}else s.push(l)}return{keys:n,otherwise:s,candidates:a}},CU=t=>tl(t)?CU(t.from):t,Yh=(t,e,n,s)=>{if(s?.isEffectAllowed===!0||Sr(t))return t;const a=new rT,c=Bz(t,{scheduler:a});a.flush();const l=c.unsafePoll();if(l){if(wQ(l))return Jt(l.value);const d=l.cause;return ZZ(d)?Ot(d.error):Ot(new dN(e,n,sW(d)))}return Ot(new dN(e,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))},Cnt=([t],[e])=>t>e?1:t<e?-1:0;function Ss(t){return t.sort(Cnt).map(e=>e[1])}const Nnt=(t,e)=>{switch(t._tag){case"FinalTransformation":return e?t.decode:t.encode;case"ComposeTransformation":return Jt;case"TypeLiteralTransformation":return n=>{let s=Jt(n);for(const a of t.propertySignatureTransformations){const[c,l]=e?[a.from,a.to]:[a.to,a.from],d=e?a.decode:a.encode;s=qr(s,p=>{const g=d(Object.prototype.hasOwnProperty.call(p,c)?ht(p[c]):at());return delete p[c],Ue(g)&&(p[l]=g.value),p})}return s}}},rr=(t,e=[])=>({value:t,forest:e}),qg={formatIssue:t=>qr(zu(t),xnt),formatIssueSync:t=>{const e=qg.formatIssue(t);return Sr(e)?I8(e):Ol(e)},formatError:t=>qg.formatIssue(t.issue),formatErrorSync:t=>qg.formatIssueSync(t.issue)},xnt=t=>t.value+NU(`
`,t.forest),NU=(t,e)=>{let n="";const s=e.length;let a;for(let c=0;c<s;c++){a=e[c];const l=c===s-1;n+=t+(l?"└":"├")+"─ "+a.value,n+=NU(t+(s>1&&!l?"│  ":"   "),a.forest)}return n},Int=t=>{switch(t){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},Fnt=t=>{switch(t){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},xU=t=>"ast"in t?ht(t.ast):at(),z$=Jt(void 0),Dnt=t=>xU(t).pipe(nf(Fet),He({onNone:()=>z$,onSome:e=>{const n=e(t);return ds(n)?Jt({message:n,override:!1}):df(n)?me(n,s=>({message:s,override:!1})):ds(n.message)?Jt({message:n.message,override:n.override}):me(n.message,s=>({message:s,override:n.override}))}})),NT=t=>e=>e._tag===t,IU=NT("Composite"),pN=NT("Refinement"),gN=NT("Transformation"),od=t=>Pa(Dnt(t),e=>e!==void 0?!e.override&&(IU(t)||pN(t)&&t.kind==="From"||gN(t)&&t.kind!=="Transformation")?gN(t)||pN(t)?od(t.issue):z$:Jt(e.message):z$),FU=t=>xU(t).pipe(nf(Let),P8(e=>e(t)),Xs);function znt(t){return dU(t).pipe(Ha(()=>fU(t)),Ha(()=>hU(t)),Ha(()=>b_(t)),Ee(()=>`{ ${t.from} | filter }`))}function Unt(t){return t.message!==void 0?t.message:`Expected ${tl(t.ast)?znt(t.ast):String(t.ast)}, actual ${xs(t.actual)}`}const Lnt=t=>qr(od(t),e=>e??FU(t)??Unt(t)),gg=t=>FU(t)??String(t.ast),jnt=t=>t.message??"is forbidden",Pnt=t=>t.message??"is unexpected",qnt=t=>{const e=Det(t.ast);if(Ue(e)){const n=e.value();return ds(n)?Jt(n):n}return Jt(t.message??"is missing")},zu=t=>{switch(t._tag){case"Type":return qr(Lnt(t),rr);case"Forbidden":return Jt(rr(gg(t),[rr(jnt(t))]));case"Unexpected":return Jt(rr(Pnt(t)));case"Missing":return qr(qnt(t),rr);case"Transformation":return Pa(od(t),e=>e!==void 0?Jt(rr(e)):qr(zu(t.issue),n=>rr(gg(t),[rr(Int(t.kind),[n])])));case"Refinement":return Pa(od(t),e=>e!==void 0?Jt(rr(e)):qr(zu(t.issue),n=>rr(gg(t),[rr(Fnt(t.kind),[n])])));case"Pointer":return qr(zu(t.issue),e=>rr(Qz(t.path),[e]));case"Composite":return Pa(od(t),e=>{if(e!==void 0)return Jt(rr(e));const n=gg(t);return Jz(t.issues)?qr(Yi(t.issues,zu),s=>rr(n,s)):qr(zu(t.issues),s=>rr(n,[s]))})}},Bnt=$(t=>ro(t[0]),(t,...e)=>{const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}),Knt=$(t=>ro(t[0]),(t,...e)=>{const n={...t};for(const s of e)delete n[s];return n}),kl=Symbol.for("effect/Schema");function Hr(t){return class{[kl]=U$;static ast=t;static annotations(n){return Hr(pf(this.ast,n))}static pipe(){return lt(this,arguments)}static toString(){return String(t)}static Type;static Encoded;static Context;static[kl]=U$}}const U$={_A:t=>t,_I:t=>t,_R:t=>t},yN={schemaId:Cet,message:Wz,missingMessage:OT,identifier:RT,title:ao,description:Sm,examples:tU,default:eU,documentation:Net,jsonSchema:nU,arbitrary:rU,pretty:sU,equivalence:iU,concurrency:aU,batching:oU,parseIssueTitle:cU,parseOptions:uU,decodingFallback:lU},$m=t=>{if(!t)return{};const e={...t};for(const n in yN)if(n in t){const s=yN[n];e[s]=t[n],delete e[n]}return e},pf=(t,e)=>Rl(t,$m(e)),Hnt=t=>Hr(D$(t.ast)),bN=t=>Hr(Xe(t.ast)),Ml=t=>_t(t,kl)&&ro(t[kl]);function Vnt(t){return AT(t)?Ts.make(ont(t,e=>new N$(e))):new N$(t[0])}function DU(t,e=Vnt(t)){return class extends Hr(e){static annotations(s){return DU(this.literals,pf(this.ast,s))}static literals=[...t]}}function Ynt(...t){return gn(t)?DU(t):zU}const Gnt=(t,e,n)=>xT(t,new __(t.map(s=>s.ast),(...s)=>e.decode(...s.map(Hr)),(...s)=>e.encode(...s.map(Hr)),$m(n))),Jnt=(t,e)=>{const n=()=>(a,c,l)=>t(a)?Dd(a):RU(new Ua(l,a)),s=n;return xT([],new __([],n,s,$m(e)))};function xT(t,e){return class extends Hr(e){static annotations(s){return xT(this.typeParameters,pf(this.ast,s))}static typeParameters=[...t]}}const Qnt=function(){if(Array.isArray(arguments[0])){const n=arguments[0],s=arguments[1],a=arguments[2];return Gnt(n,s,a)}const t=arguments[0],e=arguments[1];return Jnt(t,e)};let zU=class extends Hr(pU){};const Xnt=t=>Ts.make(t.map(e=>e.ast));function UU(t,e=Xnt(t)){return class extends Hr(e){static annotations(s){return UU(this.members,pf(this.ast,s))}static members=[...t]}}function Znt(...t){return AT(t)?UU(t):gn(t)?t[0]:zU}const L$=t=>t?'"?:"':'":"';class IT extends vm{isReadonly;defaultValue;_tag="PropertySignatureDeclaration";constructor(e,n,s,a,c){super(e,n,a),this.isReadonly=s,this.defaultValue=c}toString(){const e=L$(this.isOptional),n=String(this.type);return`PropertySignature<${e}, ${n}, never, ${e}, ${n}>`}}class LU extends vm{isReadonly;defaultValue;constructor(e,n,s,a,c){super(e,n,a),this.isReadonly=s,this.defaultValue=c}}const Wnt=t=>t===void 0?"never":ds(t)?JSON.stringify(t):String(t);let jU=class{from;to;decode;encode;_tag="PropertySignatureTransformation";constructor(e,n,s,a){this.from=e,this.to=n,this.decode=s,this.encode=a}toString(){return`PropertySignature<${L$(this.to.isOptional)}, ${this.to.type}, ${Wnt(this.from.fromKey)}, ${L$(this.from.isOptional)}, ${this.from.type}>`}};const PU=(t,e)=>{switch(t._tag){case"PropertySignatureDeclaration":return new IT(t.type,t.isOptional,t.isReadonly,{...t.annotations,...e},t.defaultValue);case"PropertySignatureTransformation":return new jU(t.from,new LU(t.to.type,t.to.isOptional,t.to.isReadonly,{...t.to.annotations,...e},t.to.defaultValue),t.decode,t.encode)}},qU=Symbol.for("effect/PropertySignature"),FT=t=>_t(t,qU);class $_{ast;[kl];[qU]=null;_TypeToken;_Key;_EncodedToken;_HasDefault;constructor(e){this.ast=e}pipe(){return lt(this,arguments)}annotations(e){return new $_(PU(this.ast,$m(e)))}toString(){return String(this.ast)}}const _N=t=>new $_(t);class DT extends $_{from;constructor(e,n){super(e),this.from=n}annotations(e){return new DT(PU(this.ast,$m(e)),this.from)}}const trt=t=>new DT(new IT(t.ast,!1,!0,{},void 0),t),ert=$(2,(t,e)=>{const n=t.ast;switch(n._tag){case"PropertySignatureDeclaration":return _N(new IT(n.type,n.isOptional,n.isReadonly,n.annotations,e));case"PropertySignatureTransformation":return _N(new jU(n.from,new LU(n.to.type,n.to.isOptional,n.to.isReadonly,n.to.annotations,e),n.decode,n.encode))}}),nrt=EU([OT]),rrt=(t,e)=>{const n=Ji(t),s=[];if(n.length>0){const c=[],l=[],d=[];for(let m=0;m<n.length;m++){const p=n[m],g=t[p];if(FT(g)){const b=g.ast;switch(b._tag){case"PropertySignatureDeclaration":{const S=b.type,v=b.isOptional,E=b.annotations;c.push(new zn(p,S,v,!0,nrt(b))),l.push(new zn(p,Xe(S),v,!0,E)),s.push(new zn(p,S,v,!0,E));break}case"PropertySignatureTransformation":{const S=b.from.fromKey??p;c.push(new zn(S,b.from.type,b.from.isOptional,!0,b.from.annotations)),l.push(new zn(p,b.to.type,b.to.isOptional,!0,b.to.annotations)),d.push(new hnt(S,p,b.decode,b.encode));break}}}else c.push(new zn(p,g.ast,!1,!0)),l.push(new zn(p,Xe(g.ast),!1,!0)),s.push(new zn(p,g.ast,!1,!0))}if(gn(d)){const m=[],p=[];for(const g of e){const{indexSignatures:b,propertySignatures:S}=fN(g.key.ast,g.value.ast);S.forEach(v=>{c.push(v),l.push(new zn(v.name,Xe(v.type),v.isOptional,v.isReadonly,v.annotations))}),b.forEach(v=>{m.push(v),p.push(new S_(v.parameter,Xe(v.type),v.isReadonly))})}return new qu(new Ga(c,m,{[Wu]:"Struct (Encoded side)"}),new Ga(l,p,{[Wu]:"Struct (Type side)"}),new F$(d))}}const a=[];for(const c of e){const{indexSignatures:l,propertySignatures:d}=fN(c.key.ast,c.value.ast);d.forEach(m=>s.push(m)),l.forEach(m=>a.push(m))}return new Ga(s,a)},BU=(t,e)=>{const n=Ji(t);for(const s of n){const a=t[s];if(e[s]===void 0&&FT(a)){const c=a.ast,l=c._tag==="PropertySignatureDeclaration"?c.defaultValue:c.to.defaultValue;l!==void 0&&(e[s]=l())}}return e};function KU(t,e,n=rrt(t,e)){return class extends Hr(n){static annotations(a){return KU(this.fields,this.records,pf(this.ast,a))}static fields={...t};static records=[...e];static make=(a,c)=>{const l=BU(t,{...a});return QU(c)?l:AU(this)(l)};static pick(...a){return gc(Bnt(t,...a))}static omit(...a){return gc(Knt(t,...a))}}}function gc(t,...e){return KU(t,e)}const Nh=(t,e,n)=>{if(uN(t)&&uN(e)){const s=[...t.propertySignatures];for(const a of e.propertySignatures){const c=a.name,l=s.findIndex(d=>d.name===c);if(l===-1)s.push(a);else{const{isOptional:d,type:m}=s[l];s[l]=new zn(c,Py(m,a.type,n.concat(c)),d,!0)}}return new Ga(s,t.indexSignatures.concat(e.indexSignatures))}throw new Error(Xz(t,e,n))},srt=ynt([RT]),xh=(t,e)=>e.map(n=>new SU(n,t.filter,srt(t))),Py=(t,e,n)=>Ts.make(Di([t],[e],n)),ko=t=>CT(t)?t.types:[t],Di=(t,e,n)=>dy(t,s=>dy(e,a=>{switch(a._tag){case"Literal":{if(ds(a.literal)&&x$(s)||Zi(a.literal)&&iN(s)||pd(a.literal)&&oN(s))return[a];break}case"StringKeyword":{if(a===rN){if(x$(s)||ad(s)&&ds(s.literal))return[s];if(tl(s))return xh(s,Di(ko(s.from),[a],n))}else if(s===rN)return[a];break}case"NumberKeyword":{if(a===sN){if(iN(s)||ad(s)&&Zi(s.literal))return[s];if(tl(s))return xh(s,Di(ko(s.from),[a],n))}else if(s===sN)return[a];break}case"BooleanKeyword":{if(a===aN){if(oN(s)||ad(s)&&pd(s.literal))return[s];if(tl(s))return xh(s,Di(ko(s.from),[a],n))}else if(s===aN)return[a];break}case"Union":return Di(ko(s),a.types,n);case"Suspend":return[new jy(()=>Py(s,a.f(),n))];case"Refinement":return xh(a,Di(ko(s),ko(a.from),n));case"TypeLiteral":{switch(s._tag){case"Union":return Di(s.types,[a],n);case"Suspend":return[new jy(()=>Py(s.f(),a,n))];case"Refinement":return xh(s,Di(ko(s.from),[a],n));case"TypeLiteral":return[Nh(s,a,n)];case"Transformation":{const c=s.transformation,l=Nh(s.from,a,n),d=Nh(s.to,Xe(a),n);switch(c._tag){case"TypeLiteralTransformation":return[new qu(l,d,new F$(c.propertySignatureTransformations))];case"ComposeTransformation":return[new qu(l,d,fnt)];case"FinalTransformation":return[new qu(l,d,new vU((m,p,g,b)=>qr(c.decode(m,p,g,b),S=>({...m,...S})),(m,p,g,b)=>qr(c.encode(m,p,g,b),S=>({...m,...S}))))]}}}break}case"Transformation":{if(cnt(s)){if(lN(a.transformation)&&lN(s.transformation))return[new qu(Nh(s.from,a.from,n),Nh(s.to,a.to,n),new F$(a.transformation.propertySignatureTransformations.concat(s.transformation.propertySignatureTransformations)))]}else return Di([a],[s],n);break}}throw new Error(Xz(s,a,n))})),HU=$(2,(t,e)=>Hr(Py(t.ast,e.ast,[]))),irt=Symbol.for("effect/SchemaId/Refine");function VU(t,e,n){return class extends Hr(n){static annotations(a){return VU(this.from,this.to,pf(this.ast,a))}static from=t;static to=e}}const j$=$(t=>Ml(t[0])&&Ml(t[1]),(t,e,n)=>VU(t,e,new qu(t.ast,e.ast,new vU(n.decode,n.encode)))),art=$(t=>Ml(t[0])&&Ml(t[1]),(t,e,n)=>j$(t,e,{strict:!0,decode:(s,a,c,l)=>Dd(n.decode(s,l)),encode:(s,a,c,l)=>Dd(n.encode(s,l))})),ort=t=>Ml(t)||FT(t),YU=t=>Ji(t).every(e=>ort(t[e])),zT=t=>"fields"in t?t.fields:zT(t[irt]),GU=t=>YU(t)?gc(t):Ml(t)?t:gc(zT(t)),JU=t=>YU(t)?t:zT(t),crt=t=>ert(trt(Ynt(t)),()=>t),urt=t=>(e,n,s)=>{const a=JU(n),c=GU(n),l={_tag:crt(e)},d=Bg(l,a);return class extends Kg({kind:"TaggedClass",identifier:e,schema:HU(c,gc(l)),fields:d,Base:$tt,annotations:s}){static _tag=e}},Bg=(t,e)=>{const n={...t};for(const s of Ji(e)){if(s in t)throw new Error(Zz(s));n[s]=e[s]}return n};function QU(t){return pd(t)?t:t?.disableValidation??!1}const SN=zt("effect/Schema/astCache",()=>new WeakMap),lrt=t=>t===void 0?[]:Array.isArray(t)?t:[t],Kg=({Base:t,annotations:e,disableToString:n,fields:s,identifier:a,kind:c,schema:l})=>{const d=Symbol.for(`effect/Schema/${c}/${a}`),[m,p,g]=lrt(e),b=bN(l),S=b.annotations({identifier:a,...m}),v=b.annotations({[Wu]:`${a} (Type side)`,...m}),E=l.annotations({[Wu]:`${a} (Constructor)`,...m}),D=l.annotations({[Wu]:`${a} (Encoded side)`,...g}),C=l.annotations({[kT]:a,...g,...m,...p}),N=A=>_t(A,d)&&Ont(v)(A),q=class extends t{constructor(A={},P=!1){A={...A},delete A._tag,A=BU(s,A),QU(P)||(A=AU(E)(A)),super(A,!0)}static[kl]=U$;static get ast(){let A=SN.get(this);if(A)return A;const P=Qnt([l],{decode:()=>(M,U,K)=>M instanceof this||N(M)?Dd(M):RU(new Ua(K,M)),encode:()=>(M,U)=>M instanceof this?Dd(M):qr(Tnt(v)(M,U),K=>new this(K,!0))},{identifier:a,pretty:M=>U=>`${a}(${M(U)})`,arbitrary:M=>U=>M(U).map(K=>new this(K)),equivalence:At,[Ly]:S.ast,...m});return A=art(D,P,{strict:!0,decode:M=>new this(M,!0),encode:At}).annotations({[Ly]:C.ast,...p}).ast,SN.set(this,A),A}static pipe(){return lt(this,arguments)}static annotations(A){return Hr(this.ast).annotations(A)}static toString(){return`(${String(D)} <-> ${a})`}static make(...A){return new this(...A)}static fields={...s};static identifier=a;static extend(A){return(P,M)=>{const U=JU(P),K=GU(P),B=Bg(s,U);return Kg({kind:c,identifier:A,schema:HU(l,K),fields:B,Base:this,annotations:M})}}static transformOrFail(A){return(P,M,U)=>{const K=Bg(s,P);return Kg({kind:c,identifier:A,schema:j$(l,bN(gc(K)),M),fields:K,Base:this,annotations:U})}}static transformOrFailFrom(A){return(P,M,U)=>{const K=Bg(s,P);return Kg({kind:c,identifier:A,schema:j$(Hnt(l),gc(K),M),fields:K,Base:this,annotations:U})}}get[d](){return d}};return n!==!0&&Object.defineProperty(q.prototype,"toString",{value(){return`${a}({ ${Ji(s).map(A=>`${Gz(A)}: ${xs(this[A])}`).join(", ")} })`},configurable:!0,writable:!0}),q},frt=aa,hrt="effect/QueueEnqueue",XU=Symbol.for(hrt),drt="effect/QueueDequeue",UT=Symbol.for(drt),mrt="effect/QueueStrategy",ZU=Symbol.for(mrt),prt="effect/BackingQueue",grt=Symbol.for(prt),WU={_A:t=>t},yrt={_A:t=>t},tL={_In:t=>t},LT={_Out:t=>t};class brt extends xc{queue;takers;shutdownHook;shutdownFlag;strategy;[XU]=tL;[UT]=LT;constructor(e,n,s,a,c){super(),this.queue=e,this.takers=n,this.shutdownHook=s,this.shutdownFlag=a,this.strategy=c}pipe(){return lt(this,arguments)}commit(){return this.take}capacity(){return this.queue.capacity()}get size(){return bt(()=>Td(this.unsafeSize(),()=>Tn))}unsafeSize(){return Qt(this.shutdownFlag)?at():ht(this.queue.length()-_T(this.takers)+this.strategy.surplusSize())}get isEmpty(){return kt(this.size,e=>e<=0)}get isFull(){return kt(this.size,e=>e>=this.capacity())}get shutdown(){return Cc(ee(e=>(w(this.shutdownFlag,Mc(!0)),w(Hi(el(this.takers),n=>BE(n,e.id()),!1,!1),ze(this.strategy.shutdown),Gb(fm(this.shutdownHook,void 0)),gs))))}get isShutdown(){return W(()=>Qt(this.shutdownFlag))}get awaitShutdown(){return fi(this.shutdownHook)}isActive(){return!Qt(this.shutdownFlag)}unsafeOffer(e){if(Qt(this.shutdownFlag))return!1;let n;if(this.queue.length()===0){const a=w(this.takers,Vi(Ke));a!==Ke?(Yo(a,e),n=!0):n=!1}else n=!1;if(n)return!0;const s=this.queue.offer(e);return Bu(this.strategy,this.queue,this.takers),s}offer(e){return bt(()=>{if(Qt(this.shutdownFlag))return Tn;let n;if(this.queue.length()===0){const a=w(this.takers,Vi(Ke));a!==Ke?(Yo(a,e),n=!0):n=!1}else n=!1;if(n)return nt(!0);const s=this.queue.offer(e);return Bu(this.strategy,this.queue,this.takers),s?nt(!0):this.strategy.handleSurplus([e],this.queue,this.takers,this.shutdownFlag)})}offerAll(e){return bt(()=>{if(Qt(this.shutdownFlag))return Tn;const n=le(e),s=this.queue.length()===0?le(Irt(this.takers,n.length)):ec,[a,c]=w(n,s3(s.length));for(let d=0;d<s.length;d++){const m=s[d],p=a[d];Yo(m,p)}if(c.length===0)return nt(!0);const l=this.queue.offerAll(c);return Bu(this.strategy,this.queue,this.takers),Nb(l)?nt(!0):this.strategy.handleSurplus(l,this.queue,this.takers,this.shutdownFlag)})}get take(){return ee(e=>{if(Qt(this.shutdownFlag))return Tn;const n=this.queue.poll(Ke);if(n!==Ke)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),nt(n);{const s=um(e.id());return w(bt(()=>(w(this.takers,Tl(s)),Bu(this.strategy,this.queue,this.takers),Qt(this.shutdownFlag)?Tn:fi(s))),om(()=>W(()=>Frt(this.takers,s))))}})}get takeAll(){return bt(()=>Qt(this.shutdownFlag)?Tn:W(()=>{const e=this.queue.pollUpTo(Number.POSITIVE_INFINITY);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),nc(e)}))}takeUpTo(e){return bt(()=>Qt(this.shutdownFlag)?Tn:W(()=>{const n=this.queue.pollUpTo(e);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),nc(n)}))}takeBetween(e,n){return bt(()=>eL(this,e,n,ke()))}}const eL=(t,e,n,s)=>n<e?nt(s):w(krt(t,n),X(a=>{const c=e-a.length;return c===1?w(P$(t),kt(l=>w(s,_e(a),yd(l)))):c>1?w(P$(t),X(l=>eL(t,c-1,n-a.length-1,w(s,_e(a),yd(l))))):nt(w(s,_e(a)))})),_rt=t=>w(W(()=>set(t)),X(e=>nL(rL(e),Art()))),Srt=()=>w(W(()=>p_()),X(t=>nL(rL(t),Crt()))),vrt=(t,e,n,s,a)=>new brt(t,e,n,s,a),nL=(t,e)=>w(lm(),kt(n=>vrt(t,p_(),n,kc(!1),e)));class $rt{mutable;[grt]=yrt;constructor(e){this.mutable=e}poll(e){return Vi(this.mutable,e)}pollUpTo(e){return g_(this.mutable,e)}offerAll(e){return ST(this.mutable,e)}offer(e){return Tl(this.mutable,e)}capacity(){return iet(this.mutable)}length(){return _T(this.mutable)}}const rL=t=>new $rt(t),wrt=t=>t.size,Ert=t=>t.isShutdown,Trt=t=>t.shutdown,Ort=$(2,(t,e)=>t.offer(e)),Rrt=$(2,(t,e)=>t.unsafeOffer(e)),P$=t=>t.take,krt=$(2,(t,e)=>t.takeUpTo(e)),Mrt=$(3,(t,e,n)=>t.takeBetween(e,n)),Art=()=>new Nrt,Crt=()=>new xrt;class Nrt{[ZU]=WU;putters=p_();surplusSize(){return _T(this.putters)}onCompleteTakersWithEmptyQueue(e){for(;!Ho(this.putters)&&!Ho(e);){const n=Vi(e,void 0),s=Vi(this.putters,void 0);s[2]&&Yo(s[1],!0),Yo(n,s[0])}}get shutdown(){return w(Bb,X(e=>w(W(()=>el(this.putters)),X(n=>Hi(n,([s,a,c])=>c?w(BE(a,e),gs):Se,!1,!1)))))}handleSurplus(e,n,s,a){return ee(c=>{const l=um(c.id());return w(bt(()=>(this.unsafeOffer(e,l),this.unsafeOnQueueEmptySpace(n,s),Bu(this,n,s),Qt(a)?Tn:fi(l))),om(()=>W(()=>this.unsafeRemove(l))))})}unsafeOnQueueEmptySpace(e,n){let s=!0;for(;s&&(e.capacity()===Number.POSITIVE_INFINITY||e.length()<e.capacity());){const a=w(this.putters,Vi(Ke));if(a===Ke)s=!1;else{const c=e.offer(a[0]);c&&a[2]?Yo(a[1],!0):c||qy(this.putters,w(el(this.putters),Kn(a))),Bu(this,e,n)}}}unsafeOffer(e,n){const s=le(e);for(let a=0;a<s.length;a++){const c=s[a];a===s.length-1?w(this.putters,Tl([c,n,!0])):w(this.putters,Tl([c,n,!1]))}}unsafeRemove(e){qy(this.putters,w(el(this.putters),Cb(([,n])=>n!==e)))}}let xrt=class{[ZU]=WU;surplusSize(){return 0}get shutdown(){return Se}onCompleteTakersWithEmptyQueue(){}handleSurplus(e,n,s,a){return nt(!1)}unsafeOnQueueEmptySpace(e,n){}};const Yo=(t,e)=>n_(t,nt(e)),qy=(t,e)=>w(t,ST(e)),el=t=>w(t,g_(Number.POSITIVE_INFINITY)),Irt=(t,e)=>w(t,g_(e)),Frt=(t,e)=>{qy(t,w(el(t),Cb(n=>e!==n)))},Bu=(t,e,n)=>{let s=!0;for(;s&&e.length()!==0;){const a=w(n,Vi(Ke));if(a!==Ke){const c=e.poll(Ke);c!==Ke?(Yo(a,c),t.unsafeOnQueueEmptySpace(e,n)):qy(n,w(el(n),Kn(a))),s=!0}else s=!1}s&&e.length()===0&&!Ho(n)&&t.onCompleteTakersWithEmptyQueue(n)},Zs=Symbol.for("effect/PubSub/AbsentValue"),sL=(t,e)=>n=>{n.has(t)||n.set(t,new Set),n.get(t).add(e)},Drt=(t,e)=>n=>{if(!n.has(t))return;const s=n.get(t);s.delete(e),s.size===0&&n.delete(t)},zrt=t=>bt(()=>{const e=Prt(t);return Grt(e,new est)}),Urt=t=>t.shutdown,Lrt=$(2,(t,e)=>t.publish(e)),jrt=t=>t.subscribe,Prt=t=>new Krt(t?.replay?new sst(t.replay):void 0),qrt=(t,e,n)=>kt(lm(),s=>Brt(t,e,t.subscribe(),p_(),s,kc(!1),n)),Brt=(t,e,n,s,a,c,l)=>new Vrt(t,e,n,s,a,c,l,t.replayWindow());class Krt{replayBuffer;publisherHead={value:Zs,subscribers:0,next:null};publisherTail=this.publisherHead;publisherIndex=0;subscribersIndex=0;capacity=Number.MAX_SAFE_INTEGER;constructor(e){this.replayBuffer=e}replayWindow(){return this.replayBuffer?new ist(this.replayBuffer):ast}isEmpty(){return this.publisherHead===this.publisherTail}isFull(){return!1}size(){return this.publisherIndex-this.subscribersIndex}publish(e){const n=this.publisherTail.subscribers;return n!==0&&(this.publisherTail.next={value:e,subscribers:n,next:null},this.publisherTail=this.publisherTail.next,this.publisherIndex+=1),this.replayBuffer&&this.replayBuffer.offer(e),!0}publishAll(e){if(this.publisherTail.subscribers!==0)for(const n of e)this.publish(n);else this.replayBuffer&&this.replayBuffer.offerAll(e);return ke()}slide(){this.publisherHead!==this.publisherTail&&(this.publisherHead=this.publisherHead.next,this.publisherHead.value=Zs,this.subscribersIndex+=1),this.replayBuffer&&this.replayBuffer.slide()}subscribe(){return this.publisherTail.subscribers+=1,new Hrt(this,this.publisherTail,this.publisherIndex,!1)}}class Hrt{self;subscriberHead;subscriberIndex;unsubscribed;constructor(e,n,s,a){this.self=e,this.subscriberHead=n,this.subscriberIndex=s,this.unsubscribed=a}isEmpty(){if(this.unsubscribed)return!0;let e=!0,n=!0;for(;n;)this.subscriberHead===this.self.publisherTail?n=!1:this.subscriberHead.next.value!==Zs?(e=!1,n=!1):(this.subscriberHead=this.subscriberHead.next,this.subscriberIndex+=1);return e}size(){return this.unsubscribed?0:this.self.publisherIndex-Math.max(this.subscriberIndex,this.self.subscribersIndex)}poll(e){if(this.unsubscribed)return e;let n=!0,s=e;for(;n;)if(this.subscriberHead===this.self.publisherTail)n=!1;else{const a=this.subscriberHead.next.value;a!==Zs&&(s=a,this.subscriberHead.subscribers-=1,this.subscriberHead.subscribers===0&&(this.self.publisherHead=this.self.publisherHead.next,this.self.publisherHead.value=Zs,this.self.subscribersIndex+=1),n=!1),this.subscriberHead=this.subscriberHead.next,this.subscriberIndex+=1}return s}pollUpTo(e){const n=[],s=Zs;let a=0;for(;a!==e;){const c=this.poll(s);c===s?a=e:(n.push(c),a+=1)}return nc(n)}unsubscribe(){if(!this.unsubscribed)for(this.unsubscribed=!0,this.self.publisherTail.subscribers-=1;this.subscriberHead!==this.self.publisherTail;)this.subscriberHead.next.value!==Zs&&(this.subscriberHead.subscribers-=1,this.subscriberHead.subscribers===0&&(this.self.publisherHead=this.self.publisherHead.next,this.self.publisherHead.value=Zs,this.self.subscribersIndex+=1)),this.subscriberHead=this.subscriberHead.next}}class Vrt extends xc{pubsub;subscribers;subscription;pollers;shutdownHook;shutdownFlag;strategy;replayWindow;[UT]=LT;constructor(e,n,s,a,c,l,d,m){super(),this.pubsub=e,this.subscribers=n,this.subscription=s,this.pollers=a,this.shutdownHook=c,this.shutdownFlag=l,this.strategy=d,this.replayWindow=m}commit(){return this.take}pipe(){return lt(this,arguments)}capacity(){return this.pubsub.capacity}isActive(){return!Qt(this.shutdownFlag)}get size(){return bt(()=>Qt(this.shutdownFlag)?Tn:nt(this.subscription.size()+this.replayWindow.remaining))}unsafeSize(){return Qt(this.shutdownFlag)?at():ht(this.subscription.size()+this.replayWindow.remaining)}get isFull(){return bt(()=>Qt(this.shutdownFlag)?Tn:nt(this.subscription.size()===this.capacity()))}get isEmpty(){return kt(this.size,e=>e===0)}get shutdown(){return Cc(ee(e=>(Mc(this.shutdownFlag,!0),w(dT(jT(this.pollers),n=>BE(n,e.id()),!1),ze(W(()=>{this.subscribers.delete(this.subscription),this.subscription.unsubscribe(),this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers)})),Gb(fm(this.shutdownHook,void 0)),gs))))}get isShutdown(){return W(()=>Qt(this.shutdownFlag))}get awaitShutdown(){return fi(this.shutdownHook)}get take(){return ee(e=>{if(Qt(this.shutdownFlag))return Tn;if(this.replayWindow.remaining>0){const s=this.replayWindow.take();return nt(s)}const n=Ho(this.pollers)?this.subscription.poll(Ke):Ke;if(n===Ke){const s=um(e.id());return w(bt(()=>(w(this.pollers,Tl(s)),w(this.subscribers,sL(this.subscription,this.pollers)),this.strategy.unsafeCompletePollers(this.pubsub,this.subscribers,this.subscription,this.pollers),Qt(this.shutdownFlag)?Tn:fi(s))),om(()=>W(()=>tst(this.pollers,s))))}else return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),nt(n)})}get takeAll(){return bt(()=>{if(Qt(this.shutdownFlag))return Tn;const e=Ho(this.pollers)?Xrt(this.subscription):ke();return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),this.replayWindow.remaining>0?nt(_e(this.replayWindow.takeAll(),e)):nt(e)})}takeUpTo(e){return bt(()=>{if(Qt(this.shutdownFlag))return Tn;let n;if(this.replayWindow.remaining>=e){const a=this.replayWindow.takeN(e);return nt(a)}else this.replayWindow.remaining>0&&(n=this.replayWindow.takeAll(),e=e-n.length);const s=Ho(this.pollers)?Zrt(this.subscription,e):ke();return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),nt(n?_e(n,s):s)})}takeBetween(e,n){return bt(()=>iL(this,e,n,ke()))}}const iL=(t,e,n,s)=>n<e?nt(s):w(t.takeUpTo(n),X(a=>{const c=e-a.length;return c===1?w(t.take,kt(l=>w(s,_e(a),yd(l)))):c>1?w(t.take,X(l=>iL(t,c-1,n-a.length-1,w(s,_e(a),yd(l))))):nt(w(s,_e(a)))}));class Yrt{pubsub;subscribers;scope;shutdownHook;shutdownFlag;strategy;[XU]=tL;[UT]=LT;constructor(e,n,s,a,c,l){this.pubsub=e,this.subscribers=n,this.scope=s,this.shutdownHook=a,this.shutdownFlag=c,this.strategy=l}capacity(){return this.pubsub.capacity}get size(){return bt(()=>Qt(this.shutdownFlag)?Tn:W(()=>this.pubsub.size()))}unsafeSize(){return Qt(this.shutdownFlag)?at():ht(this.pubsub.size())}get isFull(){return kt(this.size,e=>e===this.capacity())}get isEmpty(){return kt(this.size,e=>e===0)}get awaitShutdown(){return fi(this.shutdownHook)}get isShutdown(){return W(()=>Qt(this.shutdownFlag))}get shutdown(){return Cc(ee(e=>(w(this.shutdownFlag,Mc(!0)),w(this.scope.close(CF(e.id())),ze(this.strategy.shutdown),Gb(fm(this.shutdownHook,void 0)),gs))))}publish(e){return bt(()=>Qt(this.shutdownFlag)?Tn:this.pubsub.publish(e)?(this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),nt(!0)):this.strategy.handleSurplus(this.pubsub,this.subscribers,Ve(e),this.shutdownFlag))}isActive(){return!Qt(this.shutdownFlag)}unsafeOffer(e){return Qt(this.shutdownFlag)?!1:this.pubsub.publish(e)?(this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),!0):!1}publishAll(e){return bt(()=>{if(Qt(this.shutdownFlag))return Tn;const n=Wrt(this.pubsub,e);return this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),Nb(n)?nt(!0):this.strategy.handleSurplus(this.pubsub,this.subscribers,n,this.shutdownFlag)})}get subscribe(){const e=Yb(hT([this.scope.fork(hm),qrt(this.pubsub,this.subscribers,this.strategy)]),n=>n[0].addFinalizer(()=>n[1].shutdown));return kt(JD(e,(n,s)=>n[0].close(s)),n=>n[1])}offer(e){return this.publish(e)}offerAll(e){return this.publishAll(e)}pipe(){return lt(this,arguments)}}const Grt=(t,e)=>X(f_(),n=>kt(lm(),s=>Jrt(t,new Map,n,s,kc(!1),e))),Jrt=(t,e,n,s,a,c)=>new Yrt(t,e,n,s,a,c),Qrt=(t,e)=>{n_(t,nt(e))},aL=(t,e)=>w(t,ST(e)),jT=t=>w(t,g_(Number.POSITIVE_INFINITY)),Xrt=t=>t.pollUpTo(Number.POSITIVE_INFINITY),Zrt=(t,e)=>t.pollUpTo(e),Wrt=(t,e)=>t.publishAll(e),tst=(t,e)=>{aL(t,w(jT(t),Cb(n=>n!==e)))};class est{get shutdown(){return Se}handleSurplus(e,n,s,a){return nt(!1)}unsafeOnPubSubEmptySpace(e,n){}unsafeCompletePollers(e,n,s,a){return nst(this,e,n,s,a)}unsafeCompleteSubscribers(e,n){return rst(this,e,n)}}const nst=(t,e,n,s,a)=>{let c=!0;for(;c&&!s.isEmpty();){const l=w(a,Vi(Ke));if(l===Ke)w(n,Drt(s,a)),Ho(a)?c=!1:w(n,sL(s,a));else{const d=s.poll(Ke);d===Ke?aL(a,w(jT(a),Kn(l))):(Qrt(l,d),t.unsafeOnPubSubEmptySpace(e,n))}}},rst=(t,e,n)=>{for(const[s,a]of n)for(const c of a)t.unsafeCompletePollers(e,n,s,c)};class sst{capacity;constructor(e){this.capacity=e}head={value:Zs,next:null};tail=this.head;size=0;index=0;slide(){this.index++}offer(e){this.tail.value=e,this.tail.next={value:Zs,next:null},this.tail=this.tail.next,this.size===this.capacity?this.head=this.head.next:this.size+=1}offerAll(e){for(const n of e)this.offer(n)}}class ist{buffer;head;index;remaining;constructor(e){this.buffer=e,this.index=e.index,this.remaining=e.size,this.head=e.head}fastForward(){for(;this.index<this.buffer.index;)this.head=this.head.next,this.index++}take(){if(this.remaining===0)return;this.index<this.buffer.index&&this.fastForward(),this.remaining--;const e=this.head.value;return this.head=this.head.next,e}takeN(e){if(this.remaining===0)return ke();this.index<this.buffer.index&&this.fastForward();const n=Math.min(e,this.remaining),s=new Array(n);for(let a=0;a<n;a++){const c=this.head.value;this.head=this.head.next,s[a]=c}return this.remaining-=n,Dn(s)}takeAll(){return this.takeN(this.remaining)}}const ast={remaining:0,take:()=>{},takeN:()=>ke(),takeAll:()=>ke()},ost=zrt,vN=Urt,oL=Lrt,$N=jrt,cL=_rt,cst=Srt,ust=wrt,lst=Ert,By=Trt,Mu=Ort,fst=Rrt,wN=P$,hst=Mrt,uL="Continue",dst="Close",mst="Yield",pst="effect/ChannelChildExecutorDecision",EN=Symbol.for(pst),gst={[EN]:EN},lL=t=>{const e=Object.create(gst);return e._tag=uL,e},Hg="ContinuationK",yst="ContinuationFinalizer",fL=Symbol.for("effect/ChannelContinuation"),hL={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutDone:t=>t,_OutErr2:t=>t,_OutElem:t=>t,_OutDone2:t=>t};class dL{onSuccess;onHalt;_tag=Hg;[fL]=hL;constructor(e,n){this.onSuccess=e,this.onHalt=n}onExit(e){return vD(e)?this.onHalt(e.cause):this.onSuccess(e.value)}}class bst{finalizer;_tag=yst;[fL]=hL;constructor(e){this.finalizer=e}}const mL="PullAfterNext",_st="PullAfterAllEnqueued",Sst="effect/ChannelUpstreamPullStrategy",vst=Symbol.for(Sst),$st={_A:t=>t},wst={[vst]:$st},pL=t=>{const e=Object.create(wst);return e._tag=mL,e.emitSeparator=t,e},gL="BracketOut",yL="Bridge",PT="ConcatAll",bL="Emit",_L="Ensuring",SL="Fail",vL="Fold",$L="FromEffect",wL="PipeTo",Est="Provide",EL="Read",TL="Succeed",OL="SucceedNow",RL="Suspend",Tst="effect/Channel",kL=Symbol.for(Tst),Ost={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutElem:t=>t,_OutDone:t=>t},kr={[kL]:Ost,pipe(){return lt(this,arguments)}},ML=t=>_t(t,kL)||df(t),Rst=$(2,(t,e)=>{const n=Object.create(kr);return n._tag=gL,n.acquire=()=>t,n.finalizer=e,n}),AL=(t,e,n)=>{const s=Object.create(kr);return s._tag=PT,s.combineInners=e,s.combineAll=n,s.onPull=()=>pL(at()),s.onEmit=()=>lL,s.value=()=>t,s.k=At,s},kst=$(4,(t,e,n,s)=>{const a=Object.create(kr);return a._tag=PT,a.combineInners=n,a.combineAll=s,a.onPull=()=>pL(at()),a.onEmit=()=>lL,a.value=()=>t,a.k=e,a}),CL=$(2,(t,e)=>{const n=Object.create(kr);return n._tag=yL,n.input=e,n.channel=t,n}),Mst=$(2,(t,e)=>{const n=Object.create(kr);return n._tag=_L,n.channel=t,n.finalizer=e,n}),qT=t=>hs(nz(t)),hs=t=>Ast(()=>t),Ast=t=>{const e=Object.create(kr);return e._tag=SL,e.error=t,e},rn=$(2,(t,e)=>{const n=Object.create(kr);return n._tag=vL,n.channel=t,n.k=new dL(e,hs),n}),_r=t=>{const e=Object.create(kr);return e._tag=$L,e.effect=()=>t,e},Is=$(2,(t,e)=>{const n=Object.create(kr);return n._tag=wL,n.left=()=>t,n.right=()=>e,n}),NL=t=>wm({onInput:t.onInput,onFailure:e=>$r(eW(e),{onLeft:t.onFailure,onRight:hs}),onDone:t.onDone}),wm=t=>{const e=Object.create(kr);return e._tag=EL,e.more=t.onInput,e.done=new dL(t.onDone,t.onFailure),e},xL=t=>KT(()=>t),zd=t=>{const e=Object.create(kr);return e._tag=OL,e.terminal=t,e},BT=t=>{const e=Object.create(kr);return e._tag=RL,e.channel=t,e},KT=t=>{const e=Object.create(kr);return e._tag=TL,e.evaluate=t,e},ea=zd(void 0),Pn=t=>{const e=Object.create(kr);return e._tag=bL,e.out=t,e},Em="Done",Tm="Emit",gf="FromEffect",Om="Read",Cst=Symbol.for("effect/ChannelState"),Nst={_E:t=>t,_R:t=>t},w_={[Cst]:Nst},Au=()=>{const t=Object.create(w_);return t._tag=Em,t},iv=()=>{const t=Object.create(w_);return t._tag=Tm,t},Ih=t=>{const e=Object.create(w_);return e._tag=gf,e.effect=t,e},av=(t,e,n,s)=>{const a=Object.create(w_);return a._tag=Om,a.upstream=t,a.onEffect=e,a.onEmit=n,a.onDone=s,a},Ky=t=>t._tag===gf,xst=t=>Ky(t)?t.effect:se,TN=t=>Ky(t)?oet(t.effect):void 0,IL="PullFromChild",q$="PullFromUpstream",B$="DrainChildExecutors",FL="Emit";class yg{childExecutor;parentSubexecutor;onEmit;_tag=IL;constructor(e,n,s){this.childExecutor=e,this.parentSubexecutor=n,this.onEmit=s}close(e){const n=this.childExecutor.close(e),s=this.parentSubexecutor.close(e);return n!==void 0&&s!==void 0?y_(Ln(n),Ln(s),(a,c)=>w(a,Cd(c))):n!==void 0?n:s!==void 0?s:void 0}enqueuePullFromChild(e){return this}}class No{upstreamExecutor;createChild;lastDone;activeChildExecutors;combineChildResults;combineWithChildResult;onPull;onEmit;_tag=q$;constructor(e,n,s,a,c,l,d,m){this.upstreamExecutor=e,this.createChild=n,this.lastDone=s,this.activeChildExecutors=a,this.combineChildResults=c,this.combineWithChildResult=l,this.onPull=d,this.onEmit=m}close(e){const n=this.upstreamExecutor.close(e),a=[...this.activeChildExecutors.map(c=>c!==void 0?c.childExecutor.close(e):void 0),n].reduce((c,l)=>c!==void 0&&l!==void 0?y_(c,Ln(l),(d,m)=>Cd(d,m)):c!==void 0?c:l!==void 0?Ln(l):void 0,void 0);return a}enqueuePullFromChild(e){return new No(this.upstreamExecutor,this.createChild,this.lastDone,[...this.activeChildExecutors,e],this.combineChildResults,this.combineWithChildResult,this.onPull,this.onEmit)}}class Ku{upstreamExecutor;lastDone;activeChildExecutors;upstreamDone;combineChildResults;combineWithChildResult;onPull;_tag=B$;constructor(e,n,s,a,c,l,d){this.upstreamExecutor=e,this.lastDone=n,this.activeChildExecutors=s,this.upstreamDone=a,this.combineChildResults=c,this.combineWithChildResult=l,this.onPull=d}close(e){const n=this.upstreamExecutor.close(e),a=[...this.activeChildExecutors.map(c=>c!==void 0?c.childExecutor.close(e):void 0),n].reduce((c,l)=>c!==void 0&&l!==void 0?y_(c,Ln(l),(d,m)=>Cd(d,m)):c!==void 0?c:l!==void 0?Ln(l):void 0,void 0);return a}enqueuePullFromChild(e){return new Ku(this.upstreamExecutor,this.lastDone,[...this.activeChildExecutors,e],this.upstreamDone,this.combineChildResults,this.combineWithChildResult,this.onPull)}}class ov{value;next;_tag=FL;constructor(e,n){this.value=e,this.next=n}close(e){const n=this.next.close(e);return n}enqueuePullFromChild(e){return this}}const Ist="Pulled",Fst="NoUpstream",Dst="effect/ChannelUpstreamPullRequest",zst=Symbol.for(Dst),Ust={_A:t=>t},DL={[zst]:Ust},ON=t=>{const e=Object.create(DL);return e._tag=Ist,e.value=t,e},Lst=t=>{const e=Object.create(DL);return e._tag=Fst,e.activeDownstreamCount=t,e};class Do{_activeSubexecutor=void 0;_cancelled=void 0;_closeLastSubstream=void 0;_currentChannel;_done=void 0;_doneStack=[];_emitted=void 0;_executeCloseLastSubstream;_input=void 0;_inProgressFinalizer=void 0;_providedEnv;constructor(e,n,s){this._currentChannel=e,this._executeCloseLastSubstream=s,this._providedEnv=n}run(){let e;for(;e===void 0;)if(this._cancelled!==void 0)e=this.processCancellation();else if(this._activeSubexecutor!==void 0)e=this.runSubexecutor();else try{if(this._currentChannel===void 0)e=Au();else switch(df(this._currentChannel)&&(this._currentChannel=_r(this._currentChannel)),this._currentChannel._tag){case gL:{e=this.runBracketOut(this._currentChannel);break}case yL:{const n=this._currentChannel.input;if(this._currentChannel=this._currentChannel.channel,this._input!==void 0){const s=this._input;this._input=void 0;const a=()=>Rt(n.awaitRead(),()=>We(()=>{const c=s.run();switch(c._tag){case Em:return qi(s.getDone(),{onFailure:l=>n.error(l),onSuccess:l=>n.done(l)});case Tm:return Rt(n.emit(s.getEmit()),()=>a());case gf:return zi(c.effect,{onFailure:l=>n.error(l),onSuccess:()=>a()});case Om:return HT(c,()=>a(),l=>n.error(l))}}));e=Ih(Rt(det(ks(a())),c=>xe(()=>this.addFinalizer(l=>Rt(Ko(c),()=>We(()=>{const d=this.restorePipe(l,s);return d!==void 0?d:se}))))))}break}case PT:{const n=new Do(this._currentChannel.value(),this._providedEnv,a=>xe(()=>{const c=this._closeLastSubstream===void 0?se:this._closeLastSubstream;this._closeLastSubstream=w(c,Un(a))}));n._input=this._input;const s=this._currentChannel;this._activeSubexecutor=new No(n,a=>s.k(a),void 0,[],(a,c)=>s.combineInners(a,c),(a,c)=>s.combineAll(a,c),a=>s.onPull(a),a=>s.onEmit(a)),this._closeLastSubstream=void 0,this._currentChannel=void 0;break}case bL:{this._emitted=this._currentChannel.out,this._currentChannel=this._activeSubexecutor!==void 0?void 0:ea,e=iv();break}case _L:{this.runEnsuring(this._currentChannel);break}case SL:{e=this.doneHalt(this._currentChannel.error());break}case vL:{this._doneStack.push(this._currentChannel.k),this._currentChannel=this._currentChannel.channel;break}case $L:{const n=this._providedEnv===void 0?this._currentChannel.effect():w(this._currentChannel.effect(),Uy(this._providedEnv));e=Ih(zi(n,{onFailure:s=>{const a=this.doneHalt(s);return a!==void 0&&Ky(a)?a.effect:se},onSuccess:s=>{const a=this.doneSucceed(s);return a!==void 0&&Ky(a)?a.effect:se}}));break}case wL:{const n=this._input,s=new Do(this._currentChannel.left(),this._providedEnv,a=>this._executeCloseLastSubstream(a));s._input=n,this._input=s,this.addFinalizer(a=>{const c=this.restorePipe(a,n);return c!==void 0?c:se}),this._currentChannel=this._currentChannel.right();break}case Est:{const n=this._providedEnv;this._providedEnv=this._currentChannel.context(),this._currentChannel=this._currentChannel.inner,this.addFinalizer(()=>xe(()=>{this._providedEnv=n}));break}case EL:{const n=this._currentChannel;e=av(this._input,At,s=>{try{this._currentChannel=n.more(s)}catch(a){this._currentChannel=n.done.onExit(TQ(a))}},s=>{const a=c=>n.done.onExit(c);this._currentChannel=a(s)});break}case TL:{e=this.doneSucceed(this._currentChannel.evaluate());break}case OL:{e=this.doneSucceed(this._currentChannel.terminal);break}case RL:{this._currentChannel=this._currentChannel.channel();break}}}catch(n){this._currentChannel=hs($$(n))}return e}getDone(){return this._done}getEmit(){return this._emitted}cancelWith(e){this._cancelled=e}clearInProgressFinalizer(){this._inProgressFinalizer=void 0}storeInProgressFinalizer(e){this._inProgressFinalizer=e}popAllFinalizers(e){const n=[];let s=this._doneStack.pop();for(;s;)s._tag==="ContinuationFinalizer"&&n.push(s.finalizer),s=this._doneStack.pop();const a=n.length===0?se:uv(n,e);return this.storeInProgressFinalizer(a),a}popNextFinalizers(){const e=[];for(;this._doneStack.length!==0;){const n=this._doneStack[this._doneStack.length-1];if(n._tag===Hg)return e;e.push(n),this._doneStack.pop()}return e}restorePipe(e,n){const s=this._input;return this._input=n,s!==void 0?s.close(e):se}close(e){let n;const s=this._inProgressFinalizer;s!==void 0&&(n=w(s,Pu(xe(()=>this.clearInProgressFinalizer()))));let a;const c=this.popAllFinalizers(e);c!==void 0&&(a=w(c,Pu(xe(()=>this.clearInProgressFinalizer()))));const l=this._activeSubexecutor===void 0?void 0:this._activeSubexecutor.close(e);if(!(l===void 0&&n===void 0&&a===void 0))return w(Ln(cv(l)),C$(Ln(cv(n))),C$(Ln(cv(a))),me(([[d,m],p])=>w(d,Cd(m),Cd(p))),Hh,Rt(d=>We(()=>d)))}doneSucceed(e){if(this._doneStack.length===0)return this._done=Br(e),this._currentChannel=void 0,Au();const n=this._doneStack[this._doneStack.length-1];if(n._tag===Hg){this._doneStack.pop(),this._currentChannel=n.onSuccess(e);return}const s=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=s.reverse(),this._done=Br(e),this._currentChannel=void 0,Au();const a=uv(s.map(l=>l.finalizer),Br(e));this.storeInProgressFinalizer(a);const c=w(a,Pu(xe(()=>this.clearInProgressFinalizer())),Hh,Rt(()=>xe(()=>this.doneSucceed(e))));return Ih(c)}doneHalt(e){if(this._doneStack.length===0)return this._done=Kr(e),this._currentChannel=void 0,Au();const n=this._doneStack[this._doneStack.length-1];if(n._tag===Hg){this._doneStack.pop();try{this._currentChannel=n.onHalt(e)}catch(l){this._currentChannel=hs($$(l))}return}const s=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=s.reverse(),this._done=Kr(e),this._currentChannel=void 0,Au();const a=uv(s.map(l=>l.finalizer),Kr(e));this.storeInProgressFinalizer(a);const c=w(a,Pu(xe(()=>this.clearInProgressFinalizer())),Hh,Rt(()=>xe(()=>this.doneHalt(e))));return Ih(c)}processCancellation(){return this._currentChannel=void 0,this._done=this._cancelled,this._cancelled=void 0,Au()}runBracketOut(e){const n=Hh(zi(this.provide(e.acquire()),{onFailure:s=>xe(()=>{this._currentChannel=hs(s)}),onSuccess:s=>xe(()=>{this.addFinalizer(a=>this.provide(e.finalizer(s,a))),this._currentChannel=Pn(s)})}));return Ih(n)}provide(e){return this._providedEnv===void 0?e:w(e,Uy(this._providedEnv))}runEnsuring(e){this.addFinalizer(e.finalizer),this._currentChannel=e.channel}addFinalizer(e){this._doneStack.push(new bst(e))}runSubexecutor(){const e=this._activeSubexecutor;switch(e._tag){case IL:return this.pullFromChild(e.childExecutor,e.parentSubexecutor,e.onEmit,e);case q$:return this.pullFromUpstream(e);case B$:return this.drainChildExecutors(e);case FL:return this._emitted=e.value,this._activeSubexecutor=e.next,iv()}}replaceSubexecutor(e){this._currentChannel=void 0,this._activeSubexecutor=e}finishWithExit(e){const n=qi(e,{onFailure:s=>this.doneHalt(s),onSuccess:s=>this.doneSucceed(s)});return this._activeSubexecutor=void 0,n===void 0?se:xst(n)}finishSubexecutorWithCloseEffect(e,...n){this.addFinalizer(()=>w(n,Yi(a=>w(xe(()=>a(e)),Rt(c=>c!==void 0?c:se)),{discard:!0})));const s=w(e,qi({onFailure:a=>this.doneHalt(a),onSuccess:a=>this.doneSucceed(a)}));return this._activeSubexecutor=void 0,s}applyUpstreamPullStrategy(e,n,s){switch(s._tag){case mL:{const a=!e||n.some(c=>c!==void 0);return[s.emitSeparator,a?[void 0,...n]:n]}case _st:{const a=!e||n.some(c=>c!==void 0);return[s.emitSeparator,a?[...n,void 0]:n]}}}pullFromChild(e,n,s,a){return av(e,At,c=>{const l=s(c);switch(l._tag){case uL:break;case dst:{this.finishWithDoneValue(e,n,l.value);break}case mst:{const d=n.enqueuePullFromChild(a);this.replaceSubexecutor(d);break}}this._activeSubexecutor=new ov(c,this._activeSubexecutor)},qi({onFailure:c=>{const l=this.handleSubexecutorFailure(e,n,c);return l===void 0?void 0:TN(l)},onSuccess:c=>{this.finishWithDoneValue(e,n,c)}}))}finishWithDoneValue(e,n,s){const a=n;switch(a._tag){case q$:{const c=new No(a.upstreamExecutor,a.createChild,a.lastDone!==void 0?a.combineChildResults(a.lastDone,s):s,a.activeChildExecutors,a.combineChildResults,a.combineWithChildResult,a.onPull,a.onEmit);this._closeLastSubstream=e.close(Br(s)),this.replaceSubexecutor(c);break}case B$:{const c=new Ku(a.upstreamExecutor,a.lastDone!==void 0?a.combineChildResults(a.lastDone,s):s,a.activeChildExecutors,a.upstreamDone,a.combineChildResults,a.combineWithChildResult,a.onPull);this._closeLastSubstream=e.close(Br(s)),this.replaceSubexecutor(c);break}}}handleSubexecutorFailure(e,n,s){return this.finishSubexecutorWithCloseEffect(Kr(s),a=>n.close(a),a=>e.close(a))}pullFromUpstream(e){if(e.activeChildExecutors.length===0)return this.performPullFromUpstream(e);const n=e.activeChildExecutors[0],s=new No(e.upstreamExecutor,e.createChild,e.lastDone,e.activeChildExecutors.slice(1),e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit);if(n===void 0)return this.performPullFromUpstream(s);this.replaceSubexecutor(new yg(n.childExecutor,s,n.onEmit))}performPullFromUpstream(e){return av(e.upstreamExecutor,n=>{const s=this._closeLastSubstream===void 0?se:this._closeLastSubstream;return this._closeLastSubstream=void 0,w(this._executeCloseLastSubstream(s),Un(n))},n=>{if(this._closeLastSubstream!==void 0){const l=this._closeLastSubstream;return this._closeLastSubstream=void 0,w(this._executeCloseLastSubstream(l),me(()=>{const d=new Do(e.createChild(n),this._providedEnv,this._executeCloseLastSubstream);d._input=this._input;const[m,p]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(ON(n)));this._activeSubexecutor=new yg(d,new No(e.upstreamExecutor,e.createChild,e.lastDone,p,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),Ue(m)&&(this._activeSubexecutor=new ov(m.value,this._activeSubexecutor))}))}const s=new Do(e.createChild(n),this._providedEnv,this._executeCloseLastSubstream);s._input=this._input;const[a,c]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(ON(n)));this._activeSubexecutor=new yg(s,new No(e.upstreamExecutor,e.createChild,e.lastDone,c,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),Ue(a)&&(this._activeSubexecutor=new ov(a.value,this._activeSubexecutor))},n=>{if(e.activeChildExecutors.some(c=>c!==void 0)){const c=new Ku(e.upstreamExecutor,e.lastDone,[void 0,...e.activeChildExecutors],e.upstreamExecutor.getDone(),e.combineChildResults,e.combineWithChildResult,e.onPull);if(this._closeLastSubstream!==void 0){const l=this._closeLastSubstream;return this._closeLastSubstream=void 0,w(this._executeCloseLastSubstream(l),me(()=>this.replaceSubexecutor(c)))}this.replaceSubexecutor(c);return}const s=this._closeLastSubstream,a=this.finishSubexecutorWithCloseEffect(w(n,RQ(c=>e.combineWithChildResult(e.lastDone,c))),()=>s,c=>e.upstreamExecutor.close(c));return a===void 0?void 0:TN(a)})}drainChildExecutors(e){if(e.activeChildExecutors.length===0){const c=this._closeLastSubstream;return c!==void 0&&this.addFinalizer(()=>nn(c)),this.finishSubexecutorWithCloseEffect(e.upstreamDone,()=>c,l=>e.upstreamExecutor.close(l))}const n=e.activeChildExecutors[0],s=e.activeChildExecutors.slice(1);if(n===void 0){const[c,l]=this.applyUpstreamPullStrategy(!0,s,e.onPull(Lst(s.reduce((d,m)=>m!==void 0?d+1:d,0))));return this.replaceSubexecutor(new Ku(e.upstreamExecutor,e.lastDone,l,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull)),Ue(c)?(this._emitted=c.value,iv()):void 0}const a=new Ku(e.upstreamExecutor,e.lastDone,s,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull);this.replaceSubexecutor(new yg(n.childExecutor,a,n.onEmit))}}const cv=t=>t!==void 0?t:se,uv=(t,e)=>w(Yi(t,n=>Ln(n(e))),me(n=>w(EQ(n),Ee(()=>$D))),Rt(n=>We(()=>n))),HT=(t,e,n)=>{const s=[t],a=()=>{const c=s.pop();if(c===void 0||c.upstream===void 0)return aet("Unexpected end of input for channel execution");const l=c.upstream.run();switch(l._tag){case Tm:{const d=c.onEmit(c.upstream.getEmit());return s.length===0?d===void 0?We(e):w(d,zi({onFailure:n,onSuccess:e})):d===void 0?We(()=>a()):w(d,zi({onFailure:n,onSuccess:()=>a()}))}case Em:{const d=c.onDone(c.upstream.getDone());return s.length===0?d===void 0?We(e):w(d,zi({onFailure:n,onSuccess:e})):d===void 0?We(()=>a()):w(d,zi({onFailure:n,onSuccess:()=>a()}))}case gf:return s.push(c),w(c.onEffect(l.effect),vT(d=>We(()=>{const m=c.onDone(Kr(d));return m===void 0?se:m})),zi({onFailure:n,onSuccess:()=>a()}));case Om:return s.push(c),s.push(l),We(()=>a())}};return a()},jst=$(2,(t,e)=>{const n=(s,a,c)=>uet(xe(()=>new Do(t,void 0,At)),l=>We(()=>Vg(l.run(),l).pipe(pet(s),Un(or(s)),TT(or(a)))),(l,d)=>{const m=l.close(d);return m===void 0?se:jz(m,p=>E$(c,Gi(p)))});return Uz(s=>Fz([uz(e,wy),ji(),ji()]).pipe(Rt(([a,c,l])=>s(n(c,l,a)).pipe(Vo(e),Rt(d=>e.addFinalizer(m=>{const p=vD(m)?tW(m.cause):void 0;return s$(c).pipe(Rt(g=>g?Pi(l,void 0).pipe(Un(gz(d)),Un(LC(d))):Pi(l,void 0).pipe(Un(p&&vE(p)>0?yz(d,n9(p)):Ko(d)),Un(LC(d)))))}).pipe(Un(s(or(c)))))))))}),Vg=(t,e)=>{const n=t;switch(n._tag){case gf:return w(n.effect,Rt(()=>Vg(e.run(),e)));case Tm:return Vg(e.run(),e);case Em:return We(()=>e.getDone());case Om:return HT(n,()=>Vg(e.run(),e),Gi)}},Pst="Done",qst="Await",Bst="effect/ChannelMergeDecision",Kst=Symbol.for(Bst),Hst={[Kst]:{_R:t=>t,_E0:t=>t,_Z0:t=>t,_E:t=>t,_Z:t=>t}},RN=t=>{const e=Object.create(Hst);return e._tag=qst,e.f=t,e},zL="BothRunning",UL="LeftDone",LL="RightDone",Vst="effect/ChannelMergeState",kN=Symbol.for(Vst),VT={[kN]:kN},lv=(t,e)=>{const n=Object.create(VT);return n._tag=zL,n.left=t,n.right=e,n},MN=t=>{const e=Object.create(VT);return e._tag=UL,e.f=t,e},AN=t=>{const e=Object.create(VT);return e._tag=LL,e.f=t,e},jL="BackPressure",PL="BufferSliding",Yst="effect/ChannelMergeStrategy",CN=Symbol.for(Yst),qL={[CN]:CN},Gst=t=>{const e=Object.create(qL);return e._tag=jL,e},Jst=t=>{const e=Object.create(qL);return e._tag=PL,e},Qst=$(2,(t,{onBackPressure:e,onBufferSliding:n})=>{switch(t._tag){case jL:return e();case PL:return n()}}),Uu="Empty",Gh="Emit",Jh="Error",Qh="Done",BL=t=>({_tag:Uu,notifyProducer:t}),fv=t=>({_tag:Gh,notifyConsumers:t}),Xst=t=>({_tag:Jh,cause:t}),Zst=t=>({_tag:Qh,done:t});class Wst{ref;constructor(e){this.ref=e}awaitRead(){return Du(Oh(this.ref,e=>e._tag===Uu?[or(e.notifyProducer),e]:[se,e]))}get close(){return het(e=>this.error(XZ(e)))}done(e){return Du(Oh(this.ref,n=>{switch(n._tag){case Uu:return[or(n.notifyProducer),n];case Gh:return[Yi(n.notifyConsumers,s=>Pi(s,Ot(e)),{discard:!0}),Zst(e)];case Jh:return[Ou,n];case Qh:return[Ou,n]}}))}emit(e){return Rt(ji(),n=>Du(Oh(this.ref,s=>{switch(s._tag){case Uu:return[or(s.notifyProducer),s];case Gh:{const a=s.notifyConsumers[0],c=s.notifyConsumers.slice(1);if(a!==void 0)return[Pi(a,Jt(e)),c.length===0?BL(n):fv(c)];throw new Error("Bug: Channel.SingleProducerAsyncInput.emit - Queue was empty! please report an issue at https://github.com/Effect-TS/effect/issues")}case Jh:return[Ou,s];case Qh:return[Ou,s]}})))}error(e){return Du(Oh(this.ref,n=>{switch(n._tag){case Uu:return[or(n.notifyProducer),n];case Gh:return[Yi(n.notifyConsumers,s=>zG(s,e),{discard:!0}),Xst(e)];case Jh:return[Ou,n];case Qh:return[Ou,n]}}))}get take(){return this.takeWith(e=>Kr(nW(e,Ot)),e=>Br(e),e=>Ay(Jt(e)))}takeWith(e,n,s){return Rt(ji(),a=>Du(Oh(this.ref,c=>{switch(c._tag){case Uu:return[Un(Pi(c.notifyProducer,void 0),A$(or(a),{onFailure:e,onSuccess:$r({onLeft:s,onRight:n})})),fv([a])];case Gh:return[A$(or(a),{onFailure:e,onSuccess:$r({onLeft:s,onRight:n})}),fv([...c.notifyConsumers,a])];case Jh:return[nn(e(c.cause)),c];case Qh:return[nn(s(c.done)),c]}})))}}const KL=()=>w(ji(),Rt(t=>nT(BL(t))),me(t=>new Wst(t))),K$=$(2,(t,e)=>kst(t,e,()=>{},()=>{})),tit=t=>{const e=wm({onInput:()=>e,onFailure:hs,onDone:xL});return Is(t,e)},HL=$(2,(t,e)=>Mst(t,()=>e)),eit=t=>rn(t,At),YT=t=>Qi(t.takeWith(hs,e=>rn(Pn(e),()=>YT(t)),xL)),VL=$(2,(t,e)=>rn(t,n=>KT(()=>e(n)))),YL=$(2,(t,e)=>{const n=NL({onInput:s=>rn(Pn(e(s)),()=>n),onFailure:qT,onDone:zd});return Is(t,n)}),nit=t=>e=>rit(t)(e,md),rit=({bufferSize:t=16,concurrency:e,mergeStrategy:n=Gst()})=>(s,a)=>XL(c=>Zu(function*(){const l=e==="unbounded"?Number.MAX_SAFE_INTEGER:e,d=yield*KL(),m=YT(d),p=yield*cL(t);yield*E$(c,By(p));const g=yield*cst();yield*E$(c,By(g));const b=yield*nT(at()),S=yield*ji(),v=(yield*qz(l)).withPermits,E=yield*nl(Is(m,s),c);function D(N){return N.pipe(Rt($r({onLeft:q=>nn(ht(q)),onRight:q=>Pg(Mu(p,nn(Jt(q))),at())})),WC({until:q=>Ue(q)}),Rt(q=>mD(b,He({onNone:()=>ht(q.value),onSome:A=>ht(a(A,q.value))}))),vT(q=>rz(q)?Gi(q):Mu(p,Gi(q)).pipe(Un(Pi(S,void 0)),cet)))}yield*E.pipe(zi({onFailure:N=>Mu(p,Gi(N)).pipe(Un(nn(!1))),onSuccess:$r({onLeft:N=>Lz(ks(or(S)),ks(v(l)(se)),{onSelfDone:(q,A)=>Pg(Ko(A),!1),onOtherDone:(q,A)=>Un(Ko(A),zg(b).pipe(Rt(He({onNone:()=>Mu(p,nn(Ot(N))),onSome:P=>Mu(p,nn(Ot(a(P,N))))})),Pg(!1)))}),onRight:N=>Qst(n,{onBackPressure:()=>Zu(function*(){const q=yield*ji(),A=M$(M=>nl(Is(m,N),M).pipe(Rt(U=>Q0(Ln(D(U)),Ln(ks(or(S))))),Rt(At)));return yield*Pi(q,void 0).pipe(Un(A),v(1),Vo(c)),yield*or(q),!(yield*s$(S))}),onBufferSliding:()=>Zu(function*(){const q=yield*ji(),A=yield*ji(),P=yield*ust(g);yield*wN(g).pipe(Rt(K=>Pi(K,void 0)),get(()=>P>=l)),yield*Mu(g,q);const M=M$(K=>nl(Is(m,N),K).pipe(Rt(B=>Ln(D(B)).pipe(Q0(Ln(ks(or(S)))),Q0(Ln(ks(or(q)))))),Rt(At)));return yield*Pi(A,void 0).pipe(Un(M),v(1),Vo(c)),yield*or(A),!(yield*s$(S))})})})}),WC({while:N=>N}),Vo(c));const C=w(wN(p),Du,A$({onFailure:hs,onSuccess:$r({onLeft:zd,onRight:N=>rn(Pn(N),()=>C)})}),Qi);return CL(C,d)})),GL=$(3,(t,e,n)=>nit(n)(YL(t,e))),sit=$(2,(t,e)=>{function n(s){return Zu(function*(){const a=yield*KL(),c=YT(a),l=yield*nl(Is(c,t),s),d=yield*nl(Is(c,e.other),s);function m(g,b,S){return(v,E,D)=>{function C(N){const q=N;return q._tag===Pst?nn(_r(Un(Ko(b),q.effect))):me(gz(b),qi({onFailure:A=>_r(q.f(Kr(A))),onSuccess:$r({onLeft:A=>_r(q.f(Br(A))),onRight:A=>GT(Pn(A),p(D(q.f)))})}))}return qi(g,{onFailure:N=>C(v(Kr(N))),onSuccess:$r({onLeft:N=>C(v(Br(N))),onRight:N=>nn(rn(Pn(N),()=>rn(_r(Vo(ks(S),s)),q=>p(E(q,b)))))})})}}function p(g){switch(g._tag){case zL:{const b=ks(jC(g.left)),S=ks(jC(g.right));return Qi(Lz(b,S,{onSelfDone:(v,E)=>Un(Ko(E),m(v,g.right,l)(e.onSelfDone,lv,D=>MN(D))),onOtherDone:(v,E)=>Un(Ko(E),m(v,g.left,d)(e.onOtherDone,(D,C)=>lv(C,D),D=>AN(D)))}))}case UL:return Qi(me(Ln(d),qi({onFailure:b=>_r(g.f(Kr(b))),onSuccess:$r({onLeft:b=>_r(g.f(Br(b))),onRight:b=>rn(Pn(b),()=>p(MN(g.f)))})})));case LL:return Qi(me(Ln(l),qi({onFailure:b=>_r(g.f(Kr(b))),onSuccess:$r({onLeft:b=>_r(g.f(Br(b))),onRight:b=>rn(Pn(b),()=>p(AN(g.f)))})})))}}return _r(ZC(g=>{const b=ZC(E=>(E.transferChildren(g.scope()),se)),S=ks(l).pipe(Pu(b),Vo(s)),v=ks(d).pipe(Pu(b),Vo(s));return y_(S,v,(E,D)=>lv(E,D))})).pipe(rn(p),CL(a))})}return XL(n)}),iit=$(2,(t,e)=>BT(()=>{let n;const s=NL({onInput:c=>rn(Pn(c),()=>s),onFailure:c=>(n=fit(c),hs($$(n))),onDone:zd}),a=wm({onInput:c=>w(Pn(c),rn(()=>a)),onFailure:c=>WZ(c)&&hit(c.defect)&&wt(c.defect,n)?qT(c.defect.error):hs(c),onDone:zd});return Is(Is(Is(t,s),e),a)})),ait=t=>M$(e=>jst(t,e)),JL=t=>ait(tit(t)),QL=t=>Qi(Uz(e=>me(lz(),n=>Rst(jz(e(FW(t,n)),s=>Dy(n,Kr(s))),(s,a)=>Dy(n,a))))),oit=t=>uit(me(wT,e=>rn(_r(t(e)),Pn))),cit=t=>Rt(wT,e=>nl(t,e)),nl=$(2,(t,e)=>C$(xe(()=>new Do(t,void 0,At)),Pz()).pipe(ET(([n,s])=>IW(e,a=>{const c=n.close(a);return c!==void 0?Uy(c,s):se})),Hh,me(([n])=>We(()=>H$(n.run(),n))))),H$=(t,e)=>{const n=t;switch(n._tag){case Em:return qi(e.getDone(),{onFailure:Gi,onSuccess:s=>nn(Ot(s))});case Tm:return nn(Jt(e.getEmit()));case gf:return w(n.effect,Rt(()=>H$(e.run(),e)));case Om:return HT(n,()=>H$(e.run(),e),s=>Gi(s))}},Qi=t=>eit(_r(t)),uit=t=>AL(QL(t),(e,n)=>e,(e,n)=>e),XL=t=>AL(oit(t),(e,n)=>e,(e,n)=>e),ZL=t=>WL(0,t.length,t),WL=(t,e,n)=>t===e?ea:w(Pn(w(n,Va(t))),rn(()=>WL(t+1,e,n))),lit=$(t=>ML(t[1]),(t,e,n)=>n?.concurrent?sit(t,{other:e,onSelfDone:s=>RN(a=>We(()=>wC(s,a))),onOtherDone:s=>RN(a=>We(()=>wC(a,s)))}):rn(t,s=>VL(e,a=>[s,a]))),GT=$(t=>ML(t[1]),(t,e,n)=>n?.concurrent?VL(lit(t,e,{concurrent:!0}),s=>s[1]):rn(t,()=>e)),V$=Symbol.for("effect/Channel/ChannelException"),fit=t=>({_tag:"ChannelException",[V$]:V$,error:t}),hit=t=>_t(t,V$),dit=Symbol.for("effect/Sink"),mit={_A:t=>t,_In:t=>t,_L:t=>t,_E:t=>t,_R:t=>t};class t4{channel;[dit]=mit;constructor(e){this.channel=e}pipe(){return lt(this,arguments)}}const pit=t=>{const e=wm({onInput:n=>w(_r(Yi(n,s=>t(s),{discard:!0})),rn(()=>e)),onFailure:hs,onDone:()=>ea});return new t4(e)},git=t=>new t4(_r(t)),e4=t=>df(t)?e4(git(t)):t.channel,yit=d_,bit=_z,_it=bz,E_=Fd,JT=vz,Sit=()=>Dz(at()),vit=t=>$T(Gi(t),ht),$it="effect/Stream",QT=Symbol.for($it),wit={_R:t=>t,_E:t=>t,_A:t=>t};class ps{channel;[QT]=wit;constructor(e){this.channel=e}pipe(){return lt(this,arguments)}}const n4=t=>_t(t,QT)||df(t),XT=4096,Eit=$(2,(t,e)=>new ps(w(Er(t),GT(Er(e))))),Y$=$(2,(t,e)=>new ps(w(Er(t),HL(e)))),Tit=t=>WT(Gi(t)),Oit=$(2,(t,e)=>Nit(t,Cb(e))),ZT=$(t=>n4(t[0]),(t,e,n)=>{const s=n?.bufferSize??16;return n?.switch?NN(n?.concurrency,()=>xN(t,1,s,e),a=>xN(t,a,s,e)):NN(n?.concurrency,()=>new ps(K$(Er(t),a=>w(a,EH(c=>Er(e(c))),OH(ea,(c,l)=>w(c,GT(l)))))),a=>new ps(w(Er(t),K$(ZL),GL(c=>Er(e(c)),n))))}),NN=(t,e,n)=>{switch(t){case void 0:return e();case"unbounded":return n(Number.MAX_SAFE_INTEGER);default:return t>1?n(t):e()}},xN=$(4,(t,e,n,s)=>new ps(w(Er(t),K$(ZL),GL(a=>Er(s(a)),{concurrency:e,mergeStrategy:Jst(),bufferSize:n})))),r4=$(t=>n4(t[0]),(t,e)=>ZT(t,At,e)),Er=t=>{if("channel"in t)return t.channel;if(df(t))return Er(WT(t));throw new TypeError("Expected a Stream.")},s4=t=>new ps(Nb(t)?ea:Pn(t)),WT=t=>w(t,$T(ht),Rit),Rit=t=>new ps(Qi(_et(t,{onFailure:He({onNone:()=>ea,onSome:qT}),onSuccess:e=>Pn(Ve(e))}))),kit=(t,e)=>{const n=e?.maxChunkSize??XT;if(e?.scoped){const a=me($N(t),c=>G$(c,{maxChunkSize:n,shutdown:!0}));return e.shutdown?me(a,Y$(vN(t))):a}const s=ZT(i4($N(t)),a=>G$(a,{maxChunkSize:n}));return e?.shutdown?Y$(s,vN(t)):s},Mit=t=>a4(()=>Ab(t)?s4(t):Ait(t[Symbol.iterator]())),Ait=(t,e=XT)=>w(xe(()=>{let n=[];const s=a=>w(xe(()=>{let c=a.next();if(e===1)return c.done?ea:w(Pn(Ve(c.value)),rn(()=>s(a)));n=[];let l=0;for(;c.done===!1&&(n.push(c.value),l=l+1,!(l>=e));)c=a.next();return l>0?w(Pn(Dn(n)),rn(()=>s(a))):ea}),Qi);return new ps(s(t))}),Uit),G$=(t,e)=>w(hst(t,1,e?.maxChunkSize??XT),vT(n=>w(lst(t),Rt(s=>s&&rz(n)?Sit():vit(n)))),xit,e?.shutdown?Y$(By(t)):At),Cit=(...t)=>Mit(t),Nit=$(2,(t,e)=>new ps(w(Er(t),YL(e)))),xit=t=>zit(t,e=>w(me(e,n=>ht([n,e])),zz(He({onNone:()=>nn(at()),onSome:Dz})))),Iit=$(2,(t,e)=>Er(t).pipe(iit(e4(e)),JL)),Fit=$(2,(t,e)=>Iit(t,pit(e))),i4=t=>new ps(HL(QL(w(t,me(Ve))),se)),Dit=t=>s4(Ve(t)),a4=t=>new ps(BT(()=>Er(t()))),zit=(t,e)=>a4(()=>{const n=s=>Qi(me(e(s),He({onNone:()=>ea,onSome:([a,c])=>rn(Pn(a),()=>n(c))})));return new ps(n(t))}),Uit=t=>r4(WT(t)),o4=t=>r4(i4(t)),Lit=Is,jit=wm,Pit=JL,qit=BT,IN=KT,Bit=cit,FN=QT,Kit=Tit,Hit=Oit,Vit=ZT,c4=Er,Yit=G$,Git=Fit,Jit=Dit,Qit=o4,Hy=Symbol.for("effect/Subscribable"),u4=t=>_t(t,Hy),Xit=hz,Zit="effect/SubscriptionRef",l4=Symbol.for(Zit),Wit={_A:t=>t};class tat extends xc{ref;pubsub;semaphore;[wl]=wl;[Hy]=Hy;[WJ]=tT;[Xit]=dz;[l4]=Wit;constructor(e,n,s){super(),this.ref=e,this.pubsub=n,this.semaphore=s,this.get=zg(this.ref)}commit(){return this.get}get;get changes(){return w(zg(this.ref),Rt(e=>me(kit(this.pubsub,{scoped:!0}),n=>Eit(Cit(e),n))),this.semaphore.withPermits(1),o4)}modify(e){return this.modifyEffect(n=>nn(e(n)))}modifyEffect(e){return w(zg(this.ref),Rt(e),Rt(([n,s])=>w(dD(this.ref,s),Pg(n),TT(oL(this.pubsub,s)))),this.semaphore.withPermits(1))}}const eat=t=>w(Fz([ost(),nT(t),qz(1)]),me(([e,n,s])=>new tat(n,e,s))),nat=$(2,(t,e)=>w(dD(t.ref,e),TT(oL(t.pubsub,e)),t.semaphore.withPermits(1))),J$=l4,DN=eat,zN=nat,rat=mD,sat=Symbol.for("@effect-rx/rx/Result"),T_={[sat]:{E:At,A:At},pipe(){return lt(this,arguments)},[It](t){if(this._tag!==t._tag&&this.waiting!==t.waiting)return!1;switch(this._tag){case"Initial":return!0;case"Success":return wt(this.value,t.value);case"Failure":return wt(this.cause,t.cause)}},[Dt](){const t=De(`${this._tag}:${this.waiting}`);return this._tag==="Initial"?ve(this,t):ve(this,Gt(t)(this._tag==="Success"?ft(this.value):ft(this.cause)))}},f4=(t,e)=>t._tag==="Success"?Al(t.value):O_(t.cause,{previous:e}),tO=t=>t._tag==="None"?Ja(!0):R_(t.value),iat=t=>t._tag!=="Initial",Ja=(t=!1)=>{const e=Object.create(T_);return e._tag="Initial",e.waiting=t,e},Vy=t=>t._tag==="Success",Al=(t,e)=>{const n=Object.create(T_);return n._tag="Success",n.value=t,n.waiting=e?.waiting??!1,n.timestamp=e?.timestamp??Date.now(),n},aat=(t,e)=>{const n=Object.create(T_);return n._tag="Failure",n.cause=t,n.previousSuccess=e?.previousSuccess??at(),n.waiting=e?.waiting??!1,n},O_=(t,e)=>aat(t,{previousSuccess:e.previous.pipe(B8(Vy)),waiting:e.waiting}),oat=(t,e)=>O_(nz(t),e),R_=t=>{if(t.waiting)return t;const e=Object.assign(Object.create(T_),t);return e.waiting=!0,e},Xh=(t,e)=>t._tag==="Failure"?O_(t.cause,{previous:e,waiting:t.waiting}):t,h4=t=>t._tag==="Success"?ht(t.value):t._tag==="Failure"?Po(t.previousSuccess,e=>e.value):at(),UN=t=>WI(h4(t),()=>new bm("Result.getOrThrow: no value found")),LN=t=>{switch(t._tag){case"Success":return Br(t.value);case"Failure":return Kr(t.cause);default:return Ay(new bm)}},cat={immediate:!0};function uat(t){}const hv=Symbol.for("@effect-rx/rx/Registry"),lat=t=>new fat(t?.initialValues,t?.scheduleTask,t?.timeoutResolution,t?.defaultIdleTTL),Q$=Symbol.for("@effect-rx/rx/Rx/Serializable"),Fh=t=>Q$ in t?t[Q$].key:t;class fat{scheduleTask;defaultIdleTTL;[hv];timeoutResolution;constructor(e,n=c=>queueMicrotask(c),s,a){if(this.scheduleTask=n,this.defaultIdleTTL=a,this[hv]=hv,s===void 0&&a!==void 0?this.timeoutResolution=Math.round(a/2):this.timeoutResolution=s??1e3,e!==void 0)for(const[c,l]of e)this.ensureNode(c).setValue(l)}nodes=new Map;preloadedSerializable=new Map;timeoutBuckets=new Map;nodeTimeoutBucket=new Map;disposed=!1;getNodes(){return this.nodes}get(e){return this.ensureNode(e).value()}set(e,n){e.write(this.ensureNode(e).writeContext,n)}setSerializable(e,n){this.preloadedSerializable.set(e,n)}modify(e,n){const s=this.ensureNode(e),a=n(s.value());return e.write(s.writeContext,a[1]),a[0]}update(e,n){const s=this.ensureNode(e);e.write(s.writeContext,n(s.value()))}refresh=e=>{e.refresh!==void 0?e.refresh(this.refresh):this.invalidateRx(e)};subscribe(e,n,s){const a=this.ensureNode(e);s?.immediate&&n(a.value());const c=a.subscribe(function(){n(a._value)});return()=>{c(),a.canBeRemoved&&this.scheduleNodeRemoval(a)}}mount(e){return this.subscribe(e,uat,cat)}rxHasTTL(e){return!e.keepAlive&&e.idleTTL!==0&&(e.idleTTL!==void 0||this.defaultIdleTTL!==void 0)}ensureNode(e){const n=Fh(e);let s=this.nodes.get(n);if(s===void 0?(s=this.createNode(e),this.nodes.set(n,s)):this.rxHasTTL(e)&&this.removeNodeTimeout(s),typeof n=="string"&&this.preloadedSerializable.has(n)){const a=this.preloadedSerializable.get(n);this.preloadedSerializable.delete(n);const c=e[Q$].decode(a);s.setValue(c)}return s}createNode(e){if(this.disposed)throw new Error(`Cannot access Rx ${e}: registry is disposed`);return e.keepAlive||this.scheduleRxRemoval(e),new hat(this,e)}invalidateRx=e=>{this.ensureNode(e).invalidate()};scheduleRxRemoval(e){this.scheduleTask(()=>{const n=this.nodes.get(Fh(e));n!==void 0&&n.canBeRemoved&&this.removeNode(n)})}scheduleNodeRemoval(e){this.scheduleTask(()=>{e.canBeRemoved&&this.removeNode(e)})}removeNode(e){this.rxHasTTL(e.rx)?this.setNodeTimeout(e):(this.nodes.delete(Fh(e.rx)),e.remove())}setNodeTimeout(e){if(this.nodeTimeoutBucket.has(e))return;let n=e.rx.idleTTL??this.defaultIdleTTL;if(this.#t!==null&&(n-=this.#t,n<=0)){this.nodes.delete(Fh(e.rx)),e.remove();return}const s=Math.ceil(n/this.timeoutResolution)*this.timeoutResolution,a=Date.now()+s,c=a-a%this.timeoutResolution+this.timeoutResolution;let l=this.timeoutBuckets.get(c);l===void 0&&(l=[new Set,setTimeout(()=>this.sweepBucket(c),c-Date.now())],this.timeoutBuckets.set(c,l)),l[0].add(e),this.nodeTimeoutBucket.set(e,c)}removeNodeTimeout(e){const n=this.nodeTimeoutBucket.get(e);if(n===void 0)return;this.nodeTimeoutBucket.delete(e),this.scheduleNodeRemoval(e);const[s,a]=this.timeoutBuckets.get(n);s.delete(e),s.size===0&&(clearTimeout(a),this.timeoutBuckets.delete(n))}#t=null;sweepBucket(e){const n=this.timeoutBuckets.get(e)[0];this.timeoutBuckets.delete(e),n.forEach(s=>{s.canBeRemoved&&(this.nodeTimeoutBucket.delete(s),this.nodes.delete(Fh(s.rx)),this.#t=s.rx.idleTTL??this.defaultIdleTTL,s.remove(),this.#t=null)})}reset(){this.timeoutBuckets.forEach(([,e])=>clearTimeout(e)),this.timeoutBuckets.clear(),this.nodeTimeoutBucket.clear(),this.nodes.forEach(e=>e.remove()),this.nodes.clear()}dispose(){this.disposed=!0,this.reset()}}var Hu;(function(t){t[t.alive=1]="alive",t[t.initialized=2]="initialized",t[t.waitingForValue=4]="waitingForValue"})(Hu||(Hu={}));var Os;(function(t){t[t.uninitialized=5]="uninitialized",t[t.stale=7]="stale",t[t.valid=3]="valid",t[t.removed=0]="removed"})(Os||(Os={}));class hat{registry;rx;constructor(e,n){this.registry=e,this.rx=n,this.writeContext=new pat(e,this)}state=Os.uninitialized;lifetime;writeContext;parents=[];previousParents;children=[];listeners=[];skipInvalidation=!1;get canBeRemoved(){return!this.rx.keepAlive&&this.listeners.length===0&&this.children.length===0&&this.state!==0}_value=void 0;value(){if((this.state&Hu.waitingForValue)!==0){this.lifetime=mat(this);const e=this.rx.read(this.lifetime);if((this.state&Hu.waitingForValue)!==0&&this.setValue(e),this.previousParents){const n=this.previousParents;this.previousParents=void 0;for(let s=0;s<n.length;s++)n[s].removeChild(this),n[s].canBeRemoved&&this.registry.scheduleNodeRemoval(n[s])}}return this._value}valueOption(){return(this.state&Hu.initialized)===0?at():ht(this._value)}setValue(e){if((this.state&Hu.initialized)===0){this.state=Os.valid,this._value=e,Qe.phase===ii.collect?Qe.notify.add(this):this.notify();return}this.state=Os.valid,!wt(this._value,e)&&(this._value=e,this.skipInvalidation?this.skipInvalidation=!1:this.invalidateChildren(),this.listeners.length>0&&(Qe.phase===ii.collect?Qe.notify.add(this):this.notify()))}addParent(e){if(this.parents.push(e),this.previousParents!==void 0){const n=this.previousParents.indexOf(e);n!==-1&&(this.previousParents[n]=this.previousParents[this.previousParents.length-1],this.previousParents.pop()===void 0&&(this.previousParents=void 0))}e.children.indexOf(this)===-1&&e.children.push(this)}removeChild(e){const n=this.children.indexOf(e);n!==-1&&(this.children[n]=this.children[this.children.length-1],this.children.pop())}invalidate(){this.state===Os.valid&&(this.state=Os.stale,this.disposeLifetime()),Qe.phase===ii.collect?Qe.stale.push(this):this.rx.lazy&&this.listeners.length===0&&!d4(this.children)?(this.invalidateChildren(),this.skipInvalidation=!0):this.value()}invalidateChildren(){if(this.children.length===0)return;const e=this.children;this.children=[];for(let n=0;n<e.length;n++)e[n].invalidate()}notify(){for(let e=0;e<this.listeners.length;e++)this.listeners[e]();Qe.phase===ii.commit&&Qe.notify.delete(this)}disposeLifetime(){this.lifetime!==void 0&&(this.lifetime.dispose(),this.lifetime=void 0),this.parents.length!==0&&(this.previousParents=this.parents,this.parents=[])}remove(){if(this.state=Os.removed,this.listeners=[],this.lifetime===void 0||(this.disposeLifetime(),this.previousParents===void 0))return;const e=this.previousParents;this.previousParents=void 0;for(let n=0;n<e.length;n++)e[n].removeChild(this),e[n].canBeRemoved&&this.registry.removeNode(e[n])}subscribe(e){return this.listeners.push(e),()=>{const n=this.listeners.indexOf(e);n!==-1&&(this.listeners[n]=this.listeners[this.listeners.length-1],this.listeners.pop())}}}function d4(t){if(t.length===0)return!1;for(let e=0,n=t.length;e<n;e++){const s=t[e];if(!s.rx.lazy||s.listeners.length>0)return!0}for(let e=0,n=t.length;e<n;e++)if(d4(t[e].children))return!0;return!1}const Xn=t=>new Error(`Cannot use context of disposed Rx: ${t}`),dat={get registry(){return this.node.registry},addFinalizer(t){if(this.disposed)throw Xn(this.node.rx);this.finalizers??=[],this.finalizers.push(t)},get(t){if(this.disposed)throw Xn(this.node.rx);const e=this.node.registry.ensureNode(t);return this.node.addParent(e),e.value()},result(t,e){if(this.disposed)throw Xn(this.node.rx);if(this.isFn)return this.resultOnce(t);const n=this.get(t);if(e?.suspendOnWaiting&&n.waiting)return J0;switch(n._tag){case"Initial":return J0;case"Failure":return Kr(n.cause);case"Success":return nn(n.value)}},resultOnce(t,e){if(this.disposed)throw Xn(this.node.rx);return XC(n=>{const s=this.once(t);if(s._tag!=="Initial"&&!(e?.suspendOnWaiting&&s.waiting))return n(LN(s));const a=this.node.registry.subscribe(t,c=>{c._tag==="Initial"||e?.suspendOnWaiting&&c.waiting||(a(),n(LN(c)))},{immediate:!1});return xe(a)})},some(t){if(this.disposed)throw Xn(this.node.rx);if(this.isFn)return this.someOnce(t);const e=this.get(t);return e._tag==="None"?J0:nn(e.value)},someOnce(t){if(this.disposed)throw Xn(this.node.rx);return XC(e=>{const n=this.once(t);if(Ue(n))return e(nn(n.value));const s=this.node.registry.subscribe(t,a=>{pn(a)||(s(),e(nn(a.value)))},{immediate:!1});return xe(s)})},once(t){if(this.disposed)throw Xn(this.node.rx);return this.node.registry.get(t)},self(){if(this.disposed)throw Xn(this.node.rx);return this.node.valueOption()},refresh(t){if(this.disposed)throw Xn(this.node.rx);this.node.registry.refresh(t)},refreshSelf(){if(this.disposed)throw Xn(this.node.rx);this.node.invalidate()},mount(t){if(this.disposed)throw Xn(this.node.rx);this.addFinalizer(this.node.registry.mount(t))},subscribe(t,e,n){if(this.disposed)throw Xn(this.node.rx);this.addFinalizer(this.node.registry.subscribe(t,e,n))},setSelf(t){if(this.disposed)throw Xn(this.node.rx);this.node.setValue(t)},set(t,e){if(this.disposed)throw Xn(this.node.rx);this.node.registry.set(t,e)},stream(t,e){if(this.disposed)throw Xn(this.node.rx);return w(zy(cL(e?.bufferSize??16),By),ET(n=>zy(xe(()=>this.node.registry.subscribe(t,s=>{fst(n,s)},{immediate:e?.withoutInitialValue!==!0})),s=>xe(s))),me(n=>Yit(n)),Qit)},streamResult(t,e){return w(this.stream(t,e),Hit(iat),Vit(n=>n._tag==="Success"?Jit(n.value):Kit(n.cause)))},dispose(){if(this.disposed=!0,this.finalizers===void 0)return;const t=this.finalizers;this.finalizers=void 0;for(let e=t.length-1;e>=0;e--)t[e]()}},mat=t=>{function e(n){if(e.disposed)throw Xn(n);if(e.isFn)return t.registry.get(n);const s=t.registry.ensureNode(n);return t.addParent(s),s.value()}return Object.setPrototypeOf(e,dat),e.isFn=!1,e.disposed=!1,e.finalizers=void 0,e.node=t,e};class pat{registry;node;constructor(e,n){this.registry=e,this.node=n}get(e){return this.registry.get(e)}set(e,n){return this.registry.set(e,n)}setSelf(e){return this.node.setValue(e)}refreshSelf(){return this.node.invalidate()}}var ii;(function(t){t[t.disabled=0]="disabled",t[t.collect=1]="collect",t[t.commit=2]="commit"})(ii||(ii={}));const Qe=zt("@effect-rx/rx/Registry/batchState",()=>({phase:ii.disabled,depth:0,stale:[],notify:new Set}));function gat(t){Qe.phase=ii.collect,Qe.depth++;try{if(t(),Qe.depth===1){for(let e=0;e<Qe.stale.length;e++)m4(Qe.stale[e]);Qe.phase=ii.commit;for(const e of Qe.notify)e.notify();Qe.notify.clear()}}finally{Qe.depth--,Qe.depth===0&&(Qe.phase=ii.disabled,Qe.stale=[])}}function m4(t){if(t.state!==Os.valid){for(let e=0;e<t.parents.length;e++){const n=t.parents[e];n.state!==Os.valid&&m4(n)}t.state!==Os.valid&&t.value()}}const yat=t=>{const e=t;switch(e._tag){case"Failure":case"Success":return e;case"Left":return Ay(e.left);case"Right":return Br(e.right);case"Some":return Br(e.value);case"None":return Ay(new bm)}},eO=t=>{const e=yit(t);return(n,s,a=!1)=>{const c=yat(n);if(c){s(c);return}const l=new rT,d=e(n,{scheduler:l});l.flush();const m=d.unsafePoll();if(m){s(m);return}return d.addObserver(s),function(){d.removeObserver(s),a||d.unsafeInterruptAsFork(Za)}}},jN=Symbol.for("effect/Mailbox"),PN=Symbol.for("effect/Mailbox/ReadonlyMailbox"),xo=ke(),qN=ue(xo),bg=ue(!1),_g=ue(!0),BN=[xo,!0];class bat extends xc{scheduler;capacity;strategy;[jN]=jN;[PN]=PN;state={_tag:"Open",takers:new Set,offers:new Set,awaiters:new Set};messages=[];messagesChunk=ke();constructor(e,n,s){super(),this.scheduler=e,this.capacity=n,this.strategy=s}offer(e){return bt(()=>{if(this.state._tag!=="Open")return bg;if(this.messages.length+this.messagesChunk.length>=this.capacity)switch(this.strategy){case"dropping":return bg;case"suspend":return this.capacity<=0&&this.state.takers.size>0?(this.messages.push(e),this.releaseTaker(),_g):this.offerRemainingSingle(e);case"sliding":return this.unsafeTake(),this.messages.push(e),_g}return this.messages.push(e),this.scheduleReleaseTaker(),_g})}unsafeOffer(e){return this.state._tag!=="Open"?!1:this.messages.length+this.messagesChunk.length>=this.capacity?this.strategy==="sliding"?(this.unsafeTake(),this.messages.push(e),!0):this.capacity<=0&&this.state.takers.size>0?(this.messages.push(e),this.releaseTaker(),!0):!1:(this.messages.push(e),this.scheduleReleaseTaker(),!0)}offerAll(e){return bt(()=>{if(this.state._tag!=="Open")return nt(nc(e));const n=this.unsafeOfferAllArray(e);return n.length===0?qN:this.strategy==="dropping"?nt(Dn(n)):this.offerRemainingArray(n)})}unsafeOfferAll(e){return Dn(this.unsafeOfferAllArray(e))}unsafeOfferAllArray(e){if(this.state._tag!=="Open")return le(e);if(this.capacity===Number.POSITIVE_INFINITY||this.strategy==="sliding")return this.messages.length>0&&(this.messagesChunk=_e(this.messagesChunk,Dn(this.messages))),this.strategy==="sliding"?this.messagesChunk=this.messagesChunk.pipe(_e(nc(e)),TH(this.capacity)):Ab(e)?this.messagesChunk=_e(this.messagesChunk,e):this.messages=le(e),this.scheduleReleaseTaker(),[];const n=this.capacity<=0?this.state.takers.size:this.capacity-this.messages.length-this.messagesChunk.length;if(n===0)return le(e);const s=[];let a=0;for(const c of e)a<n?this.messages.push(c):s.push(c),a++;return this.scheduleReleaseTaker(),s}fail(e){return this.done(Rd(e))}failCause(e){return this.done(ce(e))}unsafeDone(e){return this.state._tag!=="Open"?!1:this.state.offers.size===0&&this.messages.length===0&&this.messagesChunk.length===0?(this.finalize(e),!0):(this.state={...this.state,_tag:"Closing",exit:e},!0)}shutdown=W(()=>{if(this.state._tag==="Done")return!0;this.messages=[],this.messagesChunk=xo;const e=this.state.offers;if(this.finalize(this.state._tag==="Open"?wr:this.state.exit),e.size>0){for(const n of e)n._tag==="Single"?n.resume(bg):n.resume(ue(Dn(n.remaining.slice(n.offset))));e.clear()}return!0});done(e){return W(()=>this.unsafeDone(e))}end=this.done(wr);clear=bt(()=>{if(this.state._tag==="Done")return Fg(this.state.exit,xo);const e=this.unsafeTakeAll();return this.releaseCapacity(),nt(e)});takeAll=bt(()=>{if(this.state._tag==="Done")return Fg(this.state.exit,BN);const e=this.unsafeTakeAll();return e.length===0?ze(this.awaitTake,this.takeAll):nt([e,this.releaseCapacity()])});takeN(e){return bt(()=>{if(this.state._tag==="Done")return Fg(this.state.exit,BN);if(e<=0)return nt([xo,!1]);e=Math.min(e,this.capacity);let n;if(e<=this.messagesChunk.length)n=my(this.messagesChunk,e),this.messagesChunk=ja(this.messagesChunk,e);else if(e<=this.messages.length+this.messagesChunk.length)this.messagesChunk=_e(this.messagesChunk,Dn(this.messages)),this.messages=[],n=my(this.messagesChunk,e),this.messagesChunk=ja(this.messagesChunk,e);else return ze(this.awaitTake,this.takeN(e));return nt([n,this.releaseCapacity()])})}unsafeTake(){if(this.state._tag==="Done")return NF(this.state.exit,Rd(new bm));let e;if(this.messagesChunk.length>0)e=dE(this.messagesChunk),this.messagesChunk=ja(this.messagesChunk,1);else if(this.messages.length>0)e=this.messages[0],this.messagesChunk=ja(Dn(this.messages),1),this.messages=[];else return this.capacity<=0&&this.state.offers.size>0?(this.capacity=1,this.releaseCapacity(),this.capacity=0,this.messages.length>0?ue(this.messages.pop()):void 0):void 0;return this.releaseCapacity(),ue(e)}take=bt(()=>this.unsafeTake()??ze(this.awaitTake,this.take));await=Io(e=>this.state._tag==="Done"?e(this.state.exit):(this.state.awaiters.add(e),W(()=>{this.state._tag!=="Done"&&this.state.awaiters.delete(e)})));unsafeSize(){const e=this.messages.length+this.messagesChunk.length;return this.state._tag==="Done"?at():ht(e)}size=W(()=>this.unsafeSize());commit(){return this.takeAll}pipe(){return lt(this,arguments)}toJSON(){return{_id:"effect/Mailbox",state:this.state._tag,size:this.unsafeSize().toJSON()}}toString(){return Te(this)}[pe](){return Te(this)}offerRemainingSingle(e){return Io(n=>{if(this.state._tag!=="Open")return n(bg);const s={_tag:"Single",message:e,resume:n};return this.state.offers.add(s),W(()=>{this.state._tag==="Open"&&this.state.offers.delete(s)})})}offerRemainingArray(e){return Io(n=>{if(this.state._tag!=="Open")return n(ue(Dn(e)));const s={_tag:"Array",remaining:e,offset:0,resume:n};return this.state.offers.add(s),W(()=>{this.state._tag==="Open"&&this.state.offers.delete(s)})})}releaseCapacity(){if(this.state._tag==="Done")return this.state.exit._tag==="Success";if(this.state.offers.size===0)return this.state._tag==="Closing"&&this.messages.length===0&&this.messagesChunk.length===0?(this.finalize(this.state.exit),this.state.exit._tag==="Success"):!1;let e=this.capacity-this.messages.length-this.messagesChunk.length;for(const n of this.state.offers){if(e===0)return!1;if(n._tag==="Single")this.messages.push(n.message),e--,n.resume(_g),this.state.offers.delete(n);else{for(;n.offset<n.remaining.length;n.offset++){if(e===0)return!1;this.messages.push(n.remaining[n.offset]),e--}n.resume(qN),this.state.offers.delete(n)}}return!1}awaitTake=Io(e=>this.state._tag==="Done"?e(this.state.exit):(this.state.takers.add(e),W(()=>{this.state._tag!=="Done"&&this.state.takers.delete(e)})));scheduleRunning=!1;scheduleReleaseTaker(){this.scheduleRunning||(this.scheduleRunning=!0,this.scheduler.scheduleTask(this.releaseTaker,0))}releaseTaker=()=>{if(this.scheduleRunning=!1,this.state._tag==="Done")return;if(this.state.takers.size===0)return;const e=J8(this.state.takers);this.state.takers.delete(e),e(wr)};unsafeTakeAll(){if(this.messagesChunk.length>0){const e=this.messages.length>0?_e(this.messagesChunk,Dn(this.messages)):this.messagesChunk;return this.messagesChunk=xo,this.messages=[],e}else if(this.messages.length>0){const e=Dn(this.messages);return this.messages=[],e}else if(this.state._tag!=="Done"&&this.state.offers.size>0)return this.capacity=1,this.releaseCapacity(),this.capacity=0,Ve(this.messages.pop());return xo}finalize(e){if(this.state._tag==="Done")return;const n=this.state;this.state={_tag:"Done",exit:e};for(const s of n.takers)s(e);n.takers.clear();for(const s of n.awaiters)s(e);n.awaiters.clear()}}const _at=t=>ee(e=>nt(new bat(e.currentScheduler,typeof t=="number"?t:t?.capacity??Number.POSITIVE_INFINITY,typeof t=="number"?"suspend":t?.strategy??"suspend"))),Sat=_at,vat=lat;class p4 extends $8("@effect/rx/Registry/CurrentRegistry")(){}const X$=Symbol.for("@effect-rx/rx/Rx"),KN=Symbol.for("@effect-rx/rx/Rx/Writable"),nO={[X$]:X$,pipe(){return lt(this,arguments)},toJSON(){return{_id:"Rx",keepAlive:this.keepAlive,lazy:this.lazy,label:this.label}},toString(){return Te(this)},[pe](){return this.toJSON()}},$at={...nO,rx(t,e){const n=g4(t,e);return qa(s=>{const a=s.self(),c=s(this);return c._tag!=="Success"?Xh(c,a):n(s,c.value)})},fn(t,e){return arguments.length===0?(n,s)=>HN(this,n,s):HN(this,t,e)},pull(t,e){const n=Yy(0),s=qa(a=>{const c=a.self(),l=a(this);return l._tag!=="Success"?Xh(l,c):cd(a,xat(a,n,t,e),Ja(!0),l.value)});return Iat(n,s)},subscriptionRef(t){return Mat(qa(e=>{const n=e.self(),s=e(this);if(s._tag!=="Success")return Xh(s,n);const a=typeof t=="function"?t(e):t;return J$ in a?a:cd(e,a,Ja(!0),s.value)}),(e,n)=>{const s=UN(e(this));return GN(e,n,s)})},subscribable(t){return Aat(qa(e=>{const n=e.self(),s=e(this);if(s._tag!=="Success")return Xh(s,n);const a=typeof t=="function"?t(e):t;return u4(a)?a:cd(e,a,Ja(!0),s.value)}),(e,n)=>{const s=UN(e(this));return GN(e,n,s)})}},HN=(t,e,n)=>{const[s,a,c]=Nat(e,n);return k_(l=>{l.get(c);const d=l.self(),m=l.get(t);return m._tag!=="Success"?Xh(m,d):s(l,m.value)},a)},wat={...nO,[KN]:KN},qa=(t,e)=>{const n=Object.create(nO);return n.keepAlive=!1,n.lazy=!0,n.read=t,n.refresh=e,n},k_=(t,e,n)=>{const s=Object.create(wat);return s.keepAlive=!1,s.lazy=!0,s.read=t,s.write=e,s.refresh=n,s};function Eat(t,e){t.setSelf(e)}const Tat=(t,e)=>{const n=g4(t,e);return X$ in n?n:qa(n)},VN=t=>z8 in t||M8 in t,g4=(t,e)=>{if(typeof t=="function"){const n=t;return function(s,a){const c=n(s);if(typeof c=="object"&&c!==null){if(VN(c))return c;if(k$ in c)return Z$(s,c,e,a);if(FN in c)return YN(s,c,e,a)}return c}}else if(typeof t=="object"&&t!==null){if(VN(t))return Yy(t);if(k$ in t)return function(n,s){return Z$(n,t,e,s)};if(FN in t)return function(n,s){return YN(n,t,e,s)}}return Yy(t)},Yy=t=>k_(function(e){return t},Eat),Z$=(t,e,n,s)=>{const a=n?.initialValue!==void 0?Al(n.initialValue):Ja();return cd(t,e,a,s,n?.uninterruptible)};function cd(t,e,n,s=E_,a=!1){const c=t.self(),l=Ol(lz());t.addFinalizer(()=>{Bz(Dy(l,$D))});const d=new Map(s.context.unsafeMap);d.set(xW.key,l),d.set(p4.key,t.registry);const m=JT({context:S8(d),fiberRefs:s.fiberRefs,runtimeFlags:s.runtimeFlags});let p,g=!1;const b=eO(m)(e,function(S){p=f4(S,c),g&&t.setSelf(p)},a);return g=!0,b!==void 0&&t.addFinalizer(b),p!==void 0?p:c._tag==="Some"?tO(c):R_(n)}const Oat=t=>{const e=t?.memoMap??Ol(Hz);let n;function s(a){const c=Object.create($at);c.keepAlive=!1,c.lazy=!0,c.refresh=void 0;const l=y4(qa(typeof a=="function"?d=>n?X0(a(d),n):a(d):()=>n?X0(a,n):a));return c.layer=l,c.read=function(m){const p=m(l),g=Rt(Rt(wT,b=>Eet(p,e,b)),b=>Uy(Pz(),b));return Z$(m,g,{uninterruptible:!0})},c}return s.memoMap=e,s.addGlobalLayer=a=>{n===void 0?n=a:n=X0(n,a)},s},Rat=zt("@effect-rx/rx/Rx/defaultMemoMap",()=>Ol(Hz)),kat=zt("@effect-rx/rx/Rx/defaultContext",()=>Oat({memoMap:Rat})),YN=(t,e,n,s)=>{const a=n?.initialValue!==void 0?Al(n.initialValue):Ja();return rO(t,e,a,s)};function rO(t,e,n,s=E_){const a=t.self(),c=jit({onInput(m){return qit(()=>{const p=wH(m);return p._tag==="Some"&&t.setSelf(Al(p.value,{waiting:!0})),c})},onFailure(m){return IN(()=>{t.setSelf(O_(m,{previous:a}))})},onDone(m){return IN(()=>{w(t.self(),nf(h4),He({onNone:()=>t.setSelf(oat(new bm,{previous:a})),onSome:p=>t.setSelf(Al(p))}))})}}),l=JT({context:za(s.context,p4,t.registry),fiberRefs:s.fiberRefs,runtimeFlags:s.runtimeFlags}),d=eO(l)(Pit(Lit(c4(e),c)),md);return d!==void 0&&t.addFinalizer(d),a._tag==="Some"?tO(a):R_(n)}const GN=(t,e,n=E_)=>Hy in e?(t.addFinalizer(e.changes.pipe(Git(s=>(t.setSelf(s),se)),_it(n))),bit(n)(e.get)):e._tag!=="Success"?e:rO(t,e.value.changes,Ja(!0),n),Mat=(t,e)=>{function n(s,a){const c=s.get(t);J$ in c?Ol(zN(c,a)):Vy(c)&&Ol(zN(c.value,a))}return k_(s=>{const a=s(t);return J$ in a||Vy(a)?e(s,a):a},n)},Aat=(t,e)=>qa(n=>{const s=n(t);return u4(s)||Vy(s)?e(n,s):s}),Cat=Symbol.for("@effect-rx/rx/Rx/Reset");function Nat(t,e){const n=Yy([0,void 0]),s=e?.initialValue!==void 0?Al(e.initialValue):Ja();function a(l,d){l.isFn=!0;const[m,p]=l.get(n);if(m===0)return s;const g=t(p,l);return k$ in g?cd(l,g,s,d):rO(l,g,s,d)}function c(l,d){Fat(()=>{d===Cat?l.set(n,[0,void 0]):l.set(n,[l.get(n)[0]+1,d]),l.refreshSelf()})}return[a,c,n]}const xat=(t,e,n,s)=>Rt(Bit(c4(typeof n=="function"?n(t):n)),a=>{const c=$et(1),l=j8(JW()),d=l.currentContext;let m=ke();const p=c.withPermits(1)(Rt(bet(We(()=>a),frt,d),$r({onLeft:()=>nn({done:!0,items:ai(m)}),onRight(S){let v;return s?.disableAccumulation?v=S:(v=_e(m,S),m=v),nn({done:!1,items:ai(v)})}}))),g=eO(JT({context:d,fiberRefs:l.getFiberRefs(),runtimeFlags:E_.runtimeFlags})),b=new Set;return t.addFinalizer(()=>{for(const S of b)S()}),t.once(e),t.subscribe(e,()=>{t.setSelf(tO(t.self()));let S;S=g(p,v=>{S&&b.delete(S);const E=f4(v,t.self()),D=b.size>0;t.setSelf(D?R_(E):E)}),S&&b.add(S)}),p}),Iat=(t,e)=>k_(e.read,function(n,s){n.set(t,n.get(t)+1)}),y4=t=>Object.assign(Object.create(Object.getPrototypeOf(t)),{...t,keepAlive:!0}),Fat=gat;var JN=$I();function Dat(t){JN.unstable_scheduleCallback(JN.unstable_LowPriority,t)}const zat=Fe.createContext(vat({scheduleTask:Dat,defaultIdleTTL:400})),QN=zt("@effect-rx/rx-react/storeRegistry",()=>new WeakMap);function Uat(t,e){let n=QN.get(t);n===void 0&&(n=new WeakMap,QN.set(t,n));const s=n.get(e);if(s!==void 0)return s;const a={subscribe(c){return t.subscribe(e,c)},snapshot(){return t.get(e)}};return n.set(e,a),a}function Lat(t,e){const n=Uat(t,e);return Fe.useSyncExternalStore(n.subscribe,n.snapshot,n.snapshot)}const jat=zt("@effect-rx/rx-react/rxPromiseMap",()=>({suspendOnWaiting:new Map,default:new Map}));function Pat(t,e,n){const s=jat.default;let a=s.get(e);return a!==void 0||(a=new Promise(c=>{const l=t.subscribe(e,d=>{d._tag==="Initial"||n||(setTimeout(l,1e3),c(),s.delete(e))})}),s.set(e,a)),a}function qat(t,e,n){const s=Lat(t,e);if(s._tag==="Initial"||n)throw Pat(t,e,n);return s}const Bat=(t,e)=>{const n=Fe.useContext(zat);return qat(n,t,!1)},XN=(t,e)=>{const n=Bat(t);if(n._tag==="Failure")throw rW(n.cause);return n},Kat=t=>typeof t=="function",F=function(t,e){if(typeof t=="function")return function(){return t(arguments)?e.apply(this,arguments):n=>e(n,...arguments)};switch(t){case 0:case 1:throw new RangeError(`Invalid arity ${t}`);case 2:return function(n,s){return arguments.length>=2?e(n,s):function(a){return e(a,n)}};case 3:return function(n,s,a){return arguments.length>=3?e(n,s,a):function(c){return e(c,n,s)}};case 4:return function(n,s,a,c){return arguments.length>=4?e(n,s,a,c):function(l){return e(l,n,s,a)}};case 5:return function(n,s,a,c,l){return arguments.length>=5?e(n,s,a,c,l):function(d){return e(d,n,s,a,c)}};default:return function(){if(arguments.length>=t)return e.apply(this,arguments);const n=arguments;return function(s){return e(s,...n)}}}},sn=t=>t,M_=t=>()=>t,ZN=M_(!0),W$=M_(!1),b4=M_(void 0),Hat=b4;function Q(t,e,n,s,a,c,l,d,m){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return s(n(e(t)));case 5:return a(s(n(e(t))));case 6:return c(a(s(n(e(t)))));case 7:return l(c(a(s(n(e(t))))));case 8:return d(l(c(a(s(n(e(t)))))));case 9:return m(d(l(c(a(s(n(e(t))))))));default:{let p=arguments[0];for(let g=1;g<arguments.length;g++)p=arguments[g](p);return p}}}const Cl=t=>(e,n)=>e===n||t(e,n),Vat=F(2,(t,e)=>Cl((n,s)=>t(e(n),e(s)))),Yat=t=>Cl((e,n)=>{if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(!t(e[s],n[s]))return!1;return!0}),WN="effect/GlobalValue";let Dh;const Xt=(t,e)=>(Dh||(globalThis[WN]??=new Map,Dh=globalThis[WN]),Dh.has(t)||Dh.set(t,e()),Dh.get(t)),Gat=t=>t instanceof Map,na=t=>typeof t=="string",yc=t=>typeof t=="number",sO=t=>typeof t=="boolean",A_=t=>typeof t=="bigint",tw=t=>typeof t=="symbol",Rm=Kat,Jat=t=>t===void 0,Qat=t=>!1,iO=t=>typeof t=="object"&&t!==null,oo=t=>iO(t)||Rm(t),Ut=F(2,(t,e)=>oo(t)&&e in t),_4=F(2,(t,e)=>Ut(t,"_tag")&&t._tag===e),Cu=t=>t==null,Xat=t=>t!=null,Zat=t=>t instanceof Date,S4=t=>Ut(t,Symbol.iterator),Wat=t=>iO(t)&&!Array.isArray(t),tot=t=>Ut(t,"then")&&Rm(t.then),C_=t=>`BUG: ${t} - please report an issue at https://github.com/Effect-TS/effect/issues`;let v4=class $4{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new $4(this.self)}};const eot=335903614,not=4150755663,rot=1481765933,sot=1284865837,iot=9007199254740992,aot=134217728;class oot{_state;constructor(e,n,s,a){return Cu(n)&&Cu(e)?(n=Math.random()*4294967295>>>0,e=0):Cu(n)&&(n=e,e=0),Cu(a)&&Cu(s)?(a=this._state?this._state[3]:not,s=this._state?this._state[2]:eot):Cu(a)&&(a=s,s=0),this._state=new Int32Array([0,0,s>>>0,((a||0)|1)>>>0]),this._next(),tx(this._state,this._state[0],this._state[1],e>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=e[3]|1}integer(e){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%e}number(){const e=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(e*aot+n)/iot}_next(){const e=this._state[0]>>>0,n=this._state[1]>>>0;cot(this._state,e,n,rot,sot),tx(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let s=e>>>18,a=(n>>>18|e<<14)>>>0;s=(s^e)>>>0,a=(a^n)>>>0;const c=(a>>>27|s<<5)>>>0,l=e>>>27,d=(-l>>>0&31)>>>0;return(c>>>l|c<<d)>>>0}}function cot(t,e,n,s,a){let c=(n>>>16)*(a&65535)>>>0,l=(n&65535)*(a>>>16)>>>0,d=(n&65535)*(a&65535)>>>0,m=(n>>>16)*(a>>>16)+((l>>>16)+(c>>>16))>>>0;l=l<<16>>>0,d=d+l>>>0,d>>>0<l>>>0&&(m=m+1>>>0),c=c<<16>>>0,d=d+c>>>0,d>>>0<c>>>0&&(m=m+1>>>0),m=m+Math.imul(n,s)>>>0,m=m+Math.imul(e,a)>>>0,t[0]=m,t[1]=d}function tx(t,e,n,s,a){let c=e+s>>>0;const l=n+a>>>0;l>>>0<n>>>0&&(c=c+1|0),t[0]=c,t[1]=l}const ew=Symbol.for("effect/Utils/YieldWrap");class km{#t;constructor(e){this.#t=e}[ew](){return this.#t}}function uot(t){if(typeof t=="object"&&t!==null&&ew in t)return t[ew]();throw new Error(C_("yieldWrapGet"))}const as=Xt("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),w4={effect_internal_function:t=>t()},lot={effect_internal_function:t=>{try{return t()}finally{}}},fot=w4.effect_internal_function(()=>new Error().stack)?.includes("effect_internal_function")===!0,cr=fot?w4.effect_internal_function:lot.effect_internal_function,dv=Xt(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),Kt=Symbol.for("effect/Hash"),mt=t=>{if(as.enabled===!0)return 0;switch(typeof t){case"number":return oO(t);case"bigint":return tn(t.toString(10));case"boolean":return tn(String(t));case"symbol":return tn(String(t));case"string":return tn(t);case"undefined":return tn("undefined");case"function":case"object":return t===null?tn("null"):t instanceof Date?mt(t.toISOString()):t instanceof URL?mt(t.href):hot(t)?t[Kt]():aO(t);default:throw new Error(`BUG: unhandled typeof ${typeof t} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},aO=t=>(dv.has(t)||dv.set(t,oO(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),dv.get(t)),Wt=t=>e=>e*53^t,N_=t=>t&3221225471|t>>>1&1073741824,hot=t=>Ut(t,Kt),oO=t=>{if(t!==t||t===1/0)return 0;let e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)e^=t/=4294967295;return N_(e)},tn=t=>{let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return N_(e)},dot=(t,e)=>{let n=12289;for(let s=0;s<e.length;s++)n^=Q(tn(e[s]),Wt(mt(t[e[s]])));return N_(n)},E4=t=>dot(t,Object.keys(t)),Mm=t=>{let e=6151;for(let n=0;n<t.length;n++)e=Q(e,Wt(mt(t[n])));return N_(e)},je=function(){if(arguments.length===1){const n=arguments[0];return function(s){return Object.defineProperty(n,Kt,{value(){return s},enumerable:!1}),s}}const t=arguments[0],e=arguments[1];return Object.defineProperty(t,Kt,{value(){return e},enumerable:!1}),e},Pt=Symbol.for("effect/Equal");function qt(){return arguments.length===1?t=>Gy(t,arguments[0]):Gy(arguments[0],arguments[1])}function Gy(t,e){if(t===e)return!0;const n=typeof t;if(n!==typeof e)return!1;if(n==="object"||n==="function"){if(t!==null&&e!==null){if(Jy(t)&&Jy(e))return mt(t)===mt(e)&&t[Pt](e)?!0:as.enabled&&as.tester?as.tester(t,e):!1;if(t instanceof Date&&e instanceof Date)return t.toISOString()===e.toISOString();if(t instanceof URL&&e instanceof URL)return t.href===e.href}if(as.enabled){if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every((s,a)=>Gy(s,e[a]));if(Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const s=Object.keys(t),a=Object.keys(e);if(s.length===a.length){for(const c of s)if(!(c in e&&Gy(t[c],e[c])))return as.tester?as.tester(t,e):!1;return!0}}return as.tester?as.tester(t,e):!1}}return as.enabled&&as.tester?as.tester(t,e):!1}const Jy=t=>Ut(t,Pt),cO=()=>qt,Ae=Symbol.for("nodejs.util.inspect.custom"),mn=t=>{try{if(Ut(t,"toJSON")&&Rm(t.toJSON)&&t.toJSON.length===0)return t.toJSON();if(Array.isArray(t))return t.map(mn)}catch{return{}}return pot(t)},On=t=>JSON.stringify(t,null,2),Nl=(t,e=2)=>{if(typeof t=="string")return t;try{return typeof t=="object"?T4(t,e):String(t)}catch{return String(t)}},T4=(t,e)=>{let n=[];const s=JSON.stringify(t,(a,c)=>typeof c=="object"&&c!==null?n.includes(c)?void 0:n.push(c)&&(Go.fiberRefs!==void 0&&O4(c)?c[uO](Go.fiberRefs):c):c,e);return n=void 0,s},uO=Symbol.for("effect/Inspectable/Redactable"),O4=t=>typeof t=="object"&&t!==null&&uO in t,Go=Xt("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),mot=(t,e)=>{const n=Go.fiberRefs;Go.fiberRefs=t;try{return e()}finally{Go.fiberRefs=n}},pot=t=>O4(t)&&Go.fiberRefs!==void 0?t[uO](Go.fiberRefs):t,Ct=(t,e)=>{switch(e.length){case 0:return t;case 1:return e[0](t);case 2:return e[1](e[0](t));case 3:return e[2](e[1](e[0](t)));case 4:return e[3](e[2](e[1](e[0](t))));case 5:return e[4](e[3](e[2](e[1](e[0](t)))));case 6:return e[5](e[4](e[3](e[2](e[1](e[0](t))))));case 7:return e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))));case 8:return e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t))))))));case 9:return e[8](e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))))));default:{let n=t;for(let s=0,a=e.length;s<a;s++)n=e[s](n);return n}}},ud="Async",x_="Commit",Fs="Failure",mv="OnFailure",Qy="OnSuccess",Xy="OnSuccessAndFailure",Ds="Success",R4="Sync",got="Tag",Am="UpdateRuntimeFlags",Zy="While",Yg="Iterator",k4="WithRuntime",Gg="Yield",lO="RevertFlags";let yot="3.17.3";const fO=()=>yot,bot=Symbol.for("effect/Effect"),_ot=Symbol.for("effect/Stream"),Sot=Symbol.for("effect/Sink"),vot=Symbol.for("effect/Channel"),xl={_R:t=>t,_E:t=>t,_A:t=>t,_V:fO()},$ot={_A:t=>t,_In:t=>t,_L:t=>t,_E:t=>t,_R:t=>t},wot={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutElem:t=>t,_OutDone:t=>t},Cm={[bot]:xl,[_ot]:xl,[Sot]:$ot,[vot]:wot,[Pt](t){return this===t},[Kt](){return je(this,aO(this))},[Symbol.iterator](){return new v4(new km(this))},pipe(){return Ct(this,arguments)}},hO={[Kt](){return je(this,E4(this))},[Pt](t){const e=Object.keys(this),n=Object.keys(t);if(e.length!==n.length)return!1;for(const s of e)if(!(s in t&&qt(this[s],t[s])))return!1;return!0}},Nm={...Cm,_op:x_},Eot={...Nm,...hO},Tot=function(){function t(){}return t.prototype=Nm,t}(),M4=Symbol.for("effect/Option"),A4={...Cm,[M4]:{_A:t=>t},[Ae](){return this.toJSON()},toString(){return On(this.toJSON())}},Oot=Object.assign(Object.create(A4),{_tag:"Some",_op:"Some",[Pt](t){return dO(t)&&C4(t)&&qt(this.value,t.value)},[Kt](){return je(this,Wt(mt(this._tag))(mt(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:mn(this.value)}}}),Rot=mt("None"),kot=Object.assign(Object.create(A4),{_tag:"None",_op:"None",[Pt](t){return dO(t)&&mO(t)},[Kt](){return Rot},toJSON(){return{_id:"Option",_tag:this._tag}}}),dO=t=>Ut(t,M4),mO=t=>t._tag==="None",C4=t=>t._tag==="Some",N4=Object.create(kot),nw=t=>{const e=Object.create(Oot);return e.value=t,e},x4=Symbol.for("effect/Either"),I4={...Cm,[x4]:{_R:t=>t},[Ae](){return this.toJSON()},toString(){return On(this.toJSON())}},Mot=Object.assign(Object.create(I4),{_tag:"Right",_op:"Right",[Pt](t){return pO(t)&&D4(t)&&qt(this.right,t.right)},[Kt](){return Wt(mt(this._tag))(mt(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:mn(this.right)}}}),Aot=Object.assign(Object.create(I4),{_tag:"Left",_op:"Left",[Pt](t){return pO(t)&&F4(t)&&qt(this.left,t.left)},[Kt](){return Wt(mt(this._tag))(mt(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:mn(this.left)}}}),pO=t=>Ut(t,x4),F4=t=>t._tag==="Left",D4=t=>t._tag==="Right",z4=t=>{const e=Object.create(Aot);return e.left=t,e},U4=t=>{const e=Object.create(Mot);return e.right=t,e},Cot=F(2,(t,e)=>mO(t)?z4(e()):U4(t.value)),te=U4,Lt=z4,Not=Cot,xot=pO,wn=F4,Bi=D4,Iot=F(2,(t,{onLeft:e,onRight:n})=>wn(t)?Lt(e(t.left)):te(n(t.right))),Fot=F(2,(t,e)=>wn(t)?Lt(e(t.left)):te(t.right)),Dot=F(2,(t,e)=>Bi(t)?te(e(t.right)):Lt(t.left)),gO=F(2,(t,{onLeft:e,onRight:n})=>wn(t)?e(t.left):n(t.right)),zot=gO({onLeft:sn,onRight:sn}),L4=F(2,(t,e)=>{if(Bi(t))return t.right;throw e(t.left)}),Uot=L4(()=>new Error("getOrThrow called on a Left")),j4=t=>t.length>0,P4=t=>(e,n)=>e===n?0:t(e,n),Lot=P4((t,e)=>t<e?-1:1),q4=F(2,(t,e)=>P4((n,s)=>t(e(n),e(s)))),jot=t=>F(2,(e,n)=>t(e,n)===1),St=()=>N4,jt=nw,Pot=dO,Le=mO,tr=C4,fr=F(2,(t,{onNone:e,onSome:n})=>Le(t)?e():n(t.value)),Rn=F(2,(t,e)=>Le(t)?e():t.value),Qa=F(2,(t,e)=>Le(t)?e():t),qot=F(2,(t,e)=>Le(t)?jt(e()):t),I_=t=>t==null?St():jt(t),Ws=Rn(b4),Bot=t=>(...e)=>{try{return jt(t(...e))}catch{return St()}},B4=F(2,(t,e)=>Le(t)?St():jt(e(t.value))),F_=F(2,(t,e)=>Le(t)?St():e(t.value)),Kot=F(2,(t,e)=>Le(t)?St():I_(e(t.value))),Hot=t=>Cl((e,n)=>Le(e)?Le(n):Le(n)?!1:t(e.value,n.value)),Vot=t=>F(2,(e,n)=>Le(e)?!1:t(e.value,n)),Yot=cO(),Got=Vot(Yot),Jot=F(2,(t,e)=>Le(t)?!1:e(t.value)),Qot=(...t)=>t,D_=t=>new Array(t),Xot=F(2,(t,e)=>{const n=Math.max(1,Math.floor(t)),s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a);return s}),an=t=>Array.isArray(t)?t:Array.from(t),Zot=t=>Array.isArray(t)?t:[t],Wot=F(2,(t,{onEmpty:e,onNonEmpty:n})=>kn(t)?n(lr(t),bc(t)):e()),Wy=F(2,(t,e)=>[e,...t]),tct=F(2,(t,e)=>[...t,e]),K4=F(2,(t,e)=>an(t).concat(an(e))),ect=Array.isArray,nct=t=>t.length===0,rct=nct,Jg=j4,kn=j4,H4=(t,e)=>t<0||t>=e.length,sct=(t,e)=>Math.floor(Math.min(Math.max(0,t),e.length)),ict=F(2,(t,e)=>{const n=Math.floor(e);return H4(n,t)?St():jt(t[n])}),V4=F(2,(t,e)=>{const n=Math.floor(e);if(H4(n,t))throw new Error(`Index ${n} out of bounds`);return t[n]}),ld=ict(0),lr=V4(0),act=t=>kn(t)?jt(Y4(t)):St(),Y4=t=>t[t.length-1],bc=t=>t.slice(1),oct=(t,e)=>{let n=0;for(const s of t){if(!e(s,n))break;n++}return n},cct=F(2,(t,e)=>hct(t,oct(t,e))),uct=F(2,(t,e)=>{const n=an(t);return n.slice(sct(e,n),n.length)}),ex=t=>Array.from(t).reverse(),Ud=F(2,(t,e)=>{const n=Array.from(t);return n.sort(e),n}),nx=F(2,(t,e)=>lct(t,e,Qot)),lct=F(3,(t,e,n)=>{const s=an(t),a=an(e);if(kn(s)&&kn(a)){const c=[n(lr(s),lr(a))],l=Math.min(s.length,a.length);for(let d=1;d<l;d++)c[d]=n(s[d],a[d]);return c}return[]}),fct=cO(),hct=F(2,(t,e)=>{const n=Array.from(t),s=Math.floor(e);return kn(n)?s>=1?dct(n,s):[[],n]:[n,[]]}),dct=F(2,(t,e)=>{const n=Math.max(1,Math.floor(e));return n>=t.length?[Zh(t),[]]:[Wy(t.slice(1,n),lr(t)),t.slice(n)]}),Zh=t=>t.slice(),mct=F(3,(t,e,n)=>{const s=an(t),a=an(e);return kn(s)?kn(a)?Q4(n)(K4(s,a)):s:a}),Qg=F(2,(t,e)=>mct(t,e,fct)),Il=()=>[],ws=t=>[t],rl=F(2,(t,e)=>t.map(e)),G4=F(2,(t,e)=>{if(rct(t))return[];const n=[];for(let s=0;s<t.length;s++){const a=e(t[s],s);for(let c=0;c<a.length;c++)n.push(a[c])}return n}),pct=G4(sn),J4=F(3,(t,e,n)=>an(t).reduce((s,a,c)=>n(s,a,c),e)),rx=(t,e)=>{const n=[];let s=t,a;for(;tr(a=e(s));){const[c,l]=a.value;n.push(c),s=l}return n},z_=Yat,Q4=F(2,(t,e)=>{const n=an(t);if(kn(n)){const s=[lr(n)],a=bc(n);for(const c of a)s.every(l=>!e(c,l))&&s.push(c);return s}return[]}),gct=t=>Q4(t,cO()),yf=F(2,(t,e)=>an(t).join(e)),yct=t=>{try{return t.trim()===""?St():jt(BigInt(t))}catch{return St()}},X4=Symbol.for("effect/Chunk");function bct(t,e,n,s,a){for(let c=e;c<Math.min(t.length,e+a);c++)n[s+c-e]=t[c];return n}const Z4=[],_ct=t=>Cl((e,n)=>e.length===n.length&&Jo(e).every((s,a)=>t(s,sl(n,a)))),Sct=_ct(qt),vct={[X4]:{_A:t=>t},toString(){return On(this.toJSON())},toJSON(){return{_id:"Chunk",values:Jo(this).map(mn)}},[Ae](){return this.toJSON()},[Pt](t){return W4(t)&&Sct(this,t)},[Kt](){return je(this,Mm(Jo(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return Z4[Symbol.iterator]();default:return Jo(this)[Symbol.iterator]()}},pipe(){return Ct(this,arguments)}},ln=t=>{const e=Object.create(vct);switch(e.backing=t,t._tag){case"IEmpty":{e.length=0,e.depth=0,e.left=e,e.right=e;break}case"IConcat":{e.length=t.left.length+t.right.length,e.depth=1+Math.max(t.left.depth,t.right.depth),e.left=t.left,e.right=t.right;break}case"IArray":{e.length=t.array.length,e.depth=0,e.left=ti,e.right=ti;break}case"ISingleton":{e.length=1,e.depth=0,e.left=ti,e.right=ti;break}case"ISlice":{e.length=t.length,e.depth=t.chunk.depth+1,e.left=ti,e.right=ti;break}}return e},W4=t=>Ut(t,X4),ti=ln({_tag:"IEmpty"}),ra=()=>ti,pv=(...t)=>Ect(t),Vr=t=>ln({_tag:"ISingleton",a:t}),tj=t=>W4(t)?t:U_(an(t)),rw=(t,e,n)=>{switch(t.backing._tag){case"IArray":{bct(t.backing.array,0,e,n,t.length);break}case"IConcat":{rw(t.left,e,n),rw(t.right,e,n+t.left.length);break}case"ISingleton":{e[n]=t.backing.a;break}case"ISlice":{let s=0,a=n;for(;s<t.length;)e[a]=sl(t,s),s+=1,a+=1;break}}},$ct=t=>{switch(t.backing._tag){case"IEmpty":return Z4;case"IArray":return t.backing.array;default:{const e=new Array(t.length);return rw(t,e,0),t.backing={_tag:"IArray",array:e},t.left=ti,t.right=ti,t.depth=0,e}}},Jo=$ct,wct=t=>{switch(t.backing._tag){case"IEmpty":case"ISingleton":return t;case"IArray":return ln({_tag:"IArray",array:ex(t.backing.array)});case"IConcat":return ln({_tag:"IConcat",left:Fl(t.backing.right),right:Fl(t.backing.left)});case"ISlice":return U_(ex(Jo(t)))}},Fl=wct,U_=t=>t.length===0?ra():t.length===1?Vr(t[0]):ln({_tag:"IArray",array:t}),Ect=t=>U_(t),sl=F(2,(t,e)=>{switch(t.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(e!==0)throw new Error("Index out of bounds");return t.backing.a}case"IArray":{if(e>=t.length||e<0)throw new Error("Index out of bounds");return t.backing.array[e]}case"IConcat":return e<t.left.length?sl(t.left,e):sl(t.right,e-t.left.length);case"ISlice":return sl(t.backing.chunk,e+t.backing.offset)}}),Tct=F(2,(t,e)=>As(t,Vr(e))),Us=F(2,(t,e)=>As(Vr(e),t)),sw=F(2,(t,e)=>{if(e<=0)return t;if(e>=t.length)return ti;switch(t.backing._tag){case"ISlice":return ln({_tag:"ISlice",chunk:t.backing.chunk,offset:t.backing.offset+e,length:t.backing.length-e});case"IConcat":return e>t.left.length?sw(t.right,e-t.left.length):ln({_tag:"IConcat",left:sw(t.left,e),right:t.right});default:return ln({_tag:"ISlice",chunk:t,offset:e,length:t.length-e})}}),As=F(2,(t,e)=>{if(t.backing._tag==="IEmpty")return e;if(e.backing._tag==="IEmpty")return t;const n=e.depth-t.depth;if(Math.abs(n)<=1)return ln({_tag:"IConcat",left:t,right:e});if(n<-1)if(t.left.depth>=t.right.depth){const s=As(t.right,e);return ln({_tag:"IConcat",left:t.left,right:s})}else{const s=As(t.right.right,e);if(s.depth===t.depth-3){const a=ln({_tag:"IConcat",left:t.right.left,right:s});return ln({_tag:"IConcat",left:t.left,right:a})}else{const a=ln({_tag:"IConcat",left:t.left,right:t.right.left});return ln({_tag:"IConcat",left:a,right:s})}}else if(e.right.depth>=e.left.depth){const s=As(t,e.left);return ln({_tag:"IConcat",left:s,right:e.right})}else{const s=As(t,e.left.left);if(s.depth===e.depth-3){const a=ln({_tag:"IConcat",left:s,right:e.left.right});return ln({_tag:"IConcat",left:a,right:e.right})}else{const a=ln({_tag:"IConcat",left:e.left.right,right:e.right});return ln({_tag:"IConcat",left:s,right:a})}}}),Oct=t=>t.length===0,Dl=t=>t.length>0,ej=t=>sl(t,0),zl=ej,zo=t=>sw(t,1),_c=5,yO=Math.pow(2,_c),Rct=yO-1,kct=yO/2,Mct=yO/4;function Act(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function Ul(t,e){return e>>>t&Rct}function Vu(t){return 1<<t}function nj(t,e){return Act(t&e-1)}const Cct=(t,e)=>({value:t,previous:e});function il(t,e,n,s){let a=s;if(!t){const c=s.length;a=new Array(c);for(let l=0;l<c;++l)a[l]=s[l]}return a[e]=n,a}function rj(t,e,n){const s=n.length-1;let a=0,c=0,l=n;if(t)a=c=e;else for(l=new Array(s);a<e;)l[c++]=n[a++];for(++a;a<=s;)l[c++]=n[a++];return t&&(l.length=s),l}function Nct(t,e,n,s){const a=s.length;if(t){let m=a;for(;m>=e;)s[m--]=s[m];return s[e]=n,s}let c=0,l=0;const d=new Array(a+1);for(;c<e;)d[l++]=s[c++];for(d[e]=n;c<a;)d[++l]=s[c++];return d}class eo{_tag="EmptyNode";modify(e,n,s,a,c,l){const d=s(St());return Le(d)?new eo:(++l.value,new Qo(e,a,c,d))}}function Cs(t){return _4(t,"EmptyNode")}function xct(t){return Cs(t)||t._tag==="LeafNode"||t._tag==="CollisionNode"}function L_(t,e){return Cs(t)?!1:e===t.edit}class Qo{edit;hash;key;value;_tag="LeafNode";constructor(e,n,s,a){this.edit=e,this.hash=n,this.key=s,this.value=a}modify(e,n,s,a,c,l){if(qt(c,this.key)){const m=s(this.value);return m===this.value?this:Le(m)?(--l.value,new eo):L_(this,e)?(this.value=m,this):new Qo(e,a,c,m)}const d=s(St());return Le(d)?this:(++l.value,sj(e,n,this.hash,this,a,new Qo(e,a,c,d)))}}class bO{edit;hash;children;_tag="CollisionNode";constructor(e,n,s){this.edit=e,this.hash=n,this.children=s}modify(e,n,s,a,c,l){if(a===this.hash){const m=L_(this,e),p=this.updateCollisionList(m,e,this.hash,this.children,s,c,l);return p===this.children?this:p.length>1?new bO(e,this.hash,p):p[0]}const d=s(St());return Le(d)?this:(++l.value,sj(e,n,this.hash,this,a,new Qo(e,a,c,d)))}updateCollisionList(e,n,s,a,c,l,d){const m=a.length;for(let g=0;g<m;++g){const b=a[g];if("key"in b&&qt(l,b.key)){const S=b.value,v=c(S);return v===S?a:Le(v)?(--d.value,rj(e,g,a)):il(e,g,new Qo(n,s,l,v),a)}}const p=c(St());return Le(p)?a:(++d.value,il(e,m,new Qo(n,s,l,p),a))}}class Ll{edit;mask;children;_tag="IndexedNode";constructor(e,n,s){this.edit=e,this.mask=n,this.children=s}modify(e,n,s,a,c,l){const d=this.mask,m=this.children,p=Ul(n,a),g=Vu(p),b=nj(d,g),S=d&g,v=L_(this,e);if(!S){const q=new eo().modify(e,n+_c,s,a,c,l);return q?m.length>=kct?Fct(e,p,q,d,m):new Ll(e,d|g,Nct(v,b,q,m)):this}const E=m[b],D=E.modify(e,n+_c,s,a,c,l);if(E===D)return this;let C=d,N;if(Cs(D)){if(C&=~g,!C)return new eo;if(m.length<=2&&xct(m[b^1]))return m[b^1];N=rj(v,b,m)}else N=il(v,b,D,m);return v?(this.mask=C,this.children=N,this):new Ll(e,C,N)}}class _O{edit;size;children;_tag="ArrayNode";constructor(e,n,s){this.edit=e,this.size=n,this.children=s}modify(e,n,s,a,c,l){let d=this.size;const m=this.children,p=Ul(n,a),g=m[p],b=(g||new eo).modify(e,n+_c,s,a,c,l);if(g===b)return this;const S=L_(this,e);let v;if(Cs(g)&&!Cs(b))++d,v=il(S,p,b,m);else if(!Cs(g)&&Cs(b)){if(--d,d<=Mct)return Ict(e,d,p,m);v=il(S,p,new eo,m)}else v=il(S,p,b,m);return S?(this.size=d,this.children=v,this):new _O(e,d,v)}}function Ict(t,e,n,s){const a=new Array(e-1);let c=0,l=0;for(let d=0,m=s.length;d<m;++d)if(d!==n){const p=s[d];p&&!Cs(p)&&(a[c++]=p,l|=1<<d)}return new Ll(t,l,a)}function Fct(t,e,n,s,a){const c=[];let l=s,d=0;for(let m=0;l;++m)l&1&&(c[m]=a[d++]),l>>>=1;return c[e]=n,new _O(t,d+1,c)}function Dct(t,e,n,s,a,c){if(n===a)return new bO(t,n,[c,s]);const l=Ul(e,n),d=Ul(e,a);if(l===d)return m=>new Ll(t,Vu(l)|Vu(d),[m]);{const m=l<d?[s,c]:[c,s];return new Ll(t,Vu(l)|Vu(d),m)}}function sj(t,e,n,s,a,c){let l,d=e;for(;;){const m=Dct(t,d,n,s,a,c);if(typeof m=="function")l=Cct(m,l),d=d+_c;else{let p=m;for(;l!=null;)p=l.value(p),l=l.previous;return p}}}const ij="effect/HashMap",iw=Symbol.for(ij),zct={[iw]:iw,[Symbol.iterator](){return new j_(this,(t,e)=>[t,e])},[Kt](){let t=mt(ij);for(const e of this)t^=Q(mt(e[0]),Wt(mt(e[1])));return je(this,t)},[Pt](t){if(jct(t)){if(t._size!==this._size)return!1;for(const e of this){const n=Q(t,vO(e[0],mt(e[0])));if(Le(n))return!1;if(!qt(e[1],n.value))return!1}return!0}return!1},toString(){return On(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(mn)}},[Ae](){return this.toJSON()},pipe(){return Ct(this,arguments)}},SO=(t,e,n,s)=>{const a=Object.create(zct);return a._editable=t,a._edit=e,a._root=n,a._size=s,a};class j_{map;f;v;constructor(e,n){this.map=e,this.f=n,this.v=aj(this.map._root,this.f,void 0)}next(){if(Le(this.v))return{done:!0,value:void 0};const e=this.v.value;return this.v=tb(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new j_(this.map,this.f)}}const tb=t=>t?oj(t[0],t[1],t[2],t[3],t[4]):St(),aj=(t,e,n=void 0)=>{switch(t._tag){case"LeafNode":return tr(t.value)?jt({value:e(t.key,t.value.value),cont:n}):tb(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const s=t.children;return oj(s.length,s,0,e,n)}default:return tb(n)}},oj=(t,e,n,s,a)=>{for(;n<t;){const c=e[n++];if(c&&!Cs(c))return aj(c,s,[t,e,n,s,a])}return tb(a)},Uct=SO(!1,0,new eo,0),P_=()=>Uct,Lct=t=>{const e=uj(P_());for(const n of t)Ld(e,n[0],n[1]);return Hct(e)},jct=t=>Ut(t,iw),Pct=t=>t&&Cs(t._root),qct=F(2,(t,e)=>vO(t,e,mt(e))),vO=F(3,(t,e,n)=>{let s=t._root,a=0;for(;;)switch(s._tag){case"LeafNode":return qt(e,s.key)?s.value:St();case"CollisionNode":{if(n===s.hash){const c=s.children;for(let l=0,d=c.length;l<d;++l){const m=c[l];if("key"in m&&qt(e,m.key))return m.value}}return St()}case"IndexedNode":{const c=Ul(a,n),l=Vu(c);if(s.mask&l){s=s.children[nj(s.mask,l)],a+=_c;break}return St()}case"ArrayNode":{if(s=s.children[Ul(a,n)],s){a+=_c;break}return St()}default:return St()}}),Bct=F(2,(t,e)=>tr(vO(t,e,mt(e)))),Ld=F(3,(t,e,n)=>$O(t,e,()=>jt(n))),Kct=F(3,(t,e,n)=>t._editable?(t._root=e,t._size=n,t):e===t._root?t:SO(t._editable,t._edit,e,n)),cj=t=>new j_(t,e=>e),aw=t=>t._size,uj=t=>SO(!0,t._edit+1,t._root,t._size),Hct=t=>(t._editable=!1,t),$O=F(3,(t,e,n)=>Vct(t,e,mt(e),n)),Vct=F(4,(t,e,n,s)=>{const a={value:t._size},c=t._root.modify(t._editable?t._edit:NaN,0,s,n,e,a);return Q(t,Kct(c,a.value))}),sx=F(2,(t,e)=>$O(t,e,St)),Yct=F(2,(t,e)=>q_(t,P_(),(n,s,a)=>Ld(n,a,e(s,a)))),Gct=F(2,(t,e)=>q_(t,void 0,(n,s,a)=>e(s,a))),q_=F(3,(t,e,n)=>{const s=t._root;if(s._tag==="LeafNode")return tr(s.value)?n(e,s.value.value,s.key):e;if(s._tag==="EmptyNode")return e;const a=[s.children];let c;for(;c=a.pop();)for(let l=0,d=c.length;l<d;){const m=c[l++];m&&!Cs(m)&&(m._tag==="LeafNode"?tr(m.value)&&(e=n(e,m.value.value,m.key)):a.push(m.children))}return e}),lj="effect/HashSet",ow=Symbol.for(lj),Jct={[ow]:ow,[Symbol.iterator](){return cj(this._keyMap)},[Kt](){return je(this,Wt(mt(this._keyMap))(mt(lj)))},[Pt](t){return Qct(t)?aw(this._keyMap)===aw(t._keyMap)&&qt(this._keyMap,t._keyMap):!1},toString(){return On(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(mn)}},[Ae](){return this.toJSON()},pipe(){return Ct(this,arguments)}},B_=t=>{const e=Object.create(Jct);return e._keyMap=t,e},Qct=t=>Ut(t,ow),Xct=B_(P_()),K_=()=>Xct,Zct=t=>{const e=wO(K_());for(const n of t)jd(e,n);return EO(e)},Wct=(...t)=>{const e=wO(K_());for(const n of t)jd(e,n);return EO(e)},tut=F(2,(t,e)=>Bct(t._keyMap,e)),eut=t=>aw(t._keyMap),wO=t=>B_(uj(t._keyMap)),EO=t=>(t._keyMap._editable=!1,t),fj=F(2,(t,e)=>{const n=wO(t);return e(n),EO(n)}),jd=F(2,(t,e)=>t._keyMap._editable?(Ld(e,!0)(t._keyMap),t):B_(Ld(e,!0)(t._keyMap))),hj=F(2,(t,e)=>t._keyMap._editable?(sx(e)(t._keyMap),t):B_(sx(e)(t._keyMap))),nut=F(2,(t,e)=>fj(t,n=>{for(const s of e)hj(n,s)})),rut=F(2,(t,e)=>fj(K_(),n=>{sut(t,s=>jd(n,s));for(const s of e)jd(n,s)})),sut=F(2,(t,e)=>Gct(t._keyMap,(n,s)=>e(s))),iut=F(3,(t,e,n)=>q_(t._keyMap,e,(s,a,c)=>n(s,c))),Sc=K_,aut=Zct,TO=Wct,out=tut,dj=eut,fd=jd,mj=hj,ix=nut,Pd=rut,eb=iut,xm="Die",vc="Empty",Ic="Fail",bf="Interrupt",jl="Parallel",Pl="Sequential",pj="effect/Cause",gj=Symbol.for(pj),cut={_E:t=>t},_f={[gj]:cut,[Kt](){return Q(mt(pj),Wt(mt($ut(this))),je(this))},[Pt](t){return uut(t)&&vut(this,t)},pipe(){return Ct(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:mn(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:mn(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:mn(this.left),right:mn(this.right)}}},toString(){return Sf(this)},[Ae](){return this.toJSON()}},ql=(()=>{const t=Object.create(_f);return t._tag=vc,t})(),nb=t=>{const e=Object.create(_f);return e._tag=Ic,e.error=t,e},ci=t=>{const e=Object.create(_f);return e._tag=xm,e.defect=t,e},La=t=>{const e=Object.create(_f);return e._tag=bf,e.fiberId=t,e},H_=(t,e)=>{const n=Object.create(_f);return n._tag=jl,n.left=t,n.right=e,n},ls=(t,e)=>{const n=Object.create(_f);return n._tag=Pl,n.left=t,n.right=e,n},uut=t=>Ut(t,gj),lut=t=>t._tag===vc,fut=t=>t._tag===Ic,hut=t=>t._tag===vc?!0:Bl(t,!0,(e,n)=>{switch(n._tag){case vc:return jt(e);case xm:case Ic:case bf:return jt(!1);default:return St()}}),dut=t=>tr(_ut(t)),OO=t=>RO(void 0,Eut)(t),mut=t=>Fl(Bl(t,ra(),(e,n)=>n._tag===Ic?jt(Q(e,Us(n.error))):St())),put=t=>Fl(Bl(t,ra(),(e,n)=>n._tag===xm?jt(Q(e,Us(n.defect))):St())),gut=t=>Bl(t,Sc(),(e,n)=>n._tag===bf?jt(Q(e,fd(n.fiberId))):St()),yut=t=>yj(t,e=>e._tag===Ic?jt(e.error):St()),but=t=>{const e=yut(t);switch(e._tag){case"None":return te(t);case"Some":return Lt(e.value)}},_ut=t=>yj(t,e=>e._tag===bf?jt(e.fiberId):St()),ax=t=>bj(t,{onEmpty:ql,onFail:()=>ql,onDie:ci,onInterrupt:La,onSequential:ls,onParallel:H_}),Sut=t=>bj(t,{onEmpty:ql,onFail:ci,onDie:ci,onInterrupt:La,onSequential:ls,onParallel:H_}),vut=(t,e)=>{let n=Vr(t),s=Vr(e);for(;Dl(n)&&Dl(s);){const[a,c]=Q(zl(n),Bl([Sc(),ra()],([m,p],g)=>{const[b,S]=cw(g);return jt([Q(m,Pd(b)),Q(p,As(S))])})),[l,d]=Q(zl(s),Bl([Sc(),ra()],([m,p],g)=>{const[b,S]=cw(g);return jt([Q(m,Pd(b)),Q(p,As(S))])}));if(!qt(a,l))return!1;n=c,s=d}return!0},$ut=t=>wut(Vr(t),ra()),wut=(t,e)=>{for(;;){const[n,s]=Q(t,J4([Sc(),ra()],([c,l],d)=>{const[m,p]=cw(d);return[Q(c,Pd(m)),Q(l,As(p))]})),a=dj(n)>0?Q(e,Us(n)):e;if(Oct(s))return Fl(a);t=s,e=a}throw new Error(C_("Cause.flattenCauseLoop"))},yj=F(2,(t,e)=>{const n=[t];for(;n.length>0;){const s=n.pop(),a=e(s);switch(a._tag){case"None":{switch(s._tag){case Pl:case jl:{n.push(s.right),n.push(s.left);break}}break}case"Some":return a}}return St()}),cw=t=>{let e=t;const n=[];let s=Sc(),a=ra();for(;e!==void 0;)switch(e._tag){case vc:{if(n.length===0)return[s,a];e=n.pop();break}case Ic:{if(s=fd(s,pv(e._tag,e.error)),n.length===0)return[s,a];e=n.pop();break}case xm:{if(s=fd(s,pv(e._tag,e.defect)),n.length===0)return[s,a];e=n.pop();break}case bf:{if(s=fd(s,pv(e._tag,e.fiberId)),n.length===0)return[s,a];e=n.pop();break}case Pl:{switch(e.left._tag){case vc:{e=e.right;break}case Pl:{e=ls(e.left.left,ls(e.left.right,e.right));break}case jl:{e=H_(ls(e.left.left,e.right),ls(e.left.right,e.right));break}default:{a=Us(a,e.right),e=e.left;break}}break}case jl:{n.push(e.right),e=e.left;break}}throw new Error(C_("Cause.evaluateCauseLoop"))},Eut={emptyCase:ZN,failCase:W$,dieCase:W$,interruptCase:ZN,sequentialCase:(t,e,n)=>e&&n,parallelCase:(t,e,n)=>e&&n},ox="SequentialCase",cx="ParallelCase",bj=F(2,(t,{onDie:e,onEmpty:n,onFail:s,onInterrupt:a,onParallel:c,onSequential:l})=>RO(t,void 0,{emptyCase:()=>n,failCase:(d,m)=>s(m),dieCase:(d,m)=>e(m),interruptCase:(d,m)=>a(m),sequentialCase:(d,m,p)=>l(m,p),parallelCase:(d,m,p)=>c(m,p)})),Bl=F(3,(t,e,n)=>{let s=e,a=t;const c=[];for(;a!==void 0;){const l=n(s,a);switch(s=tr(l)?l.value:s,a._tag){case Pl:{c.push(a.right),a=a.left;break}case jl:{c.push(a.right),a=a.left;break}default:{a=void 0;break}}a===void 0&&c.length>0&&(a=c.pop())}return s}),RO=F(3,(t,e,n)=>{const s=[t],a=[];for(;s.length>0;){const l=s.pop();switch(l._tag){case vc:{a.push(te(n.emptyCase(e)));break}case Ic:{a.push(te(n.failCase(e,l.error)));break}case xm:{a.push(te(n.dieCase(e,l.defect)));break}case bf:{a.push(te(n.interruptCase(e,l.fiberId)));break}case Pl:{s.push(l.right),s.push(l.left),a.push(Lt({_tag:ox}));break}case jl:{s.push(l.right),s.push(l.left),a.push(Lt({_tag:cx}));break}}}const c=[];for(;a.length>0;){const l=a.pop();switch(l._tag){case"Left":{switch(l.left._tag){case ox:{const d=c.pop(),m=c.pop(),p=n.sequentialCase(e,d,m);c.push(p);break}case cx:{const d=c.pop(),m=c.pop(),p=n.parallelCase(e,d,m);c.push(p);break}}break}case"Right":{c.push(l.right);break}}}if(c.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return c.pop()}),Sf=(t,e)=>OO(t)?"All fibers interrupted without errors.":Sj(t).map(function(n){return e?.renderErrorCause!==!0||n.cause===void 0?n.stack:`${n.stack} {
${_j(n.cause,"  ")}
}`}).join(`
`),_j=(t,e)=>{const n=t.stack.split(`
`);let s=`${e}[cause]: ${n[0]}`;for(let a=1,c=n.length;a<c;a++)s+=`
${e}${n[a]}`;return t.cause&&(s+=` {
${_j(t.cause,`${e}  `)}
${e}}`),s};class rb extends globalThis.Error{span=void 0;constructor(e){const n=typeof e=="object"&&e!==null,s=Error.stackTraceLimit;Error.stackTraceLimit=1,super(Tut(e),n&&"cause"in e&&typeof e.cause<"u"?{cause:new rb(e.cause)}:void 0),this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=s,this.name=e instanceof Error?e.name:"Error",n&&(Kl in e&&(this.span=e[Kl]),Object.keys(e).forEach(a=>{a in this||(this[a]=e[a])})),this.stack=kut(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}const Tut=t=>{if(typeof t=="string")return t;if(typeof t=="object"&&t!==null&&t instanceof Error)return t.message;try{if(Ut(t,"toString")&&Rm(t.toString)&&t.toString!==Object.prototype.toString&&t.toString!==globalThis.Array.prototype.toString)return t.toString()}catch{}return T4(t)},Out=/\((.*)\)/g,Rut=Xt("effect/Tracer/spanToTrace",()=>new WeakMap),kut=(t,e,n)=>{const s=[t],a=e.startsWith(t)?e.slice(t.length).split(`
`):e.split(`
`);for(let c=1;c<a.length;c++){if(a[c].includes(" at new BaseEffectError")||a[c].includes(" at new YieldableError")){c++;continue}if(a[c].includes("Generator.next")||a[c].includes("effect_internal_function"))break;s.push(a[c].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let c=n,l=0;for(;c&&c._tag==="Span"&&l<10;){const d=Rut.get(c);if(typeof d=="function"){const m=d();if(typeof m=="string"){const p=m.matchAll(Out);let g=!1;for(const[,b]of p)g=!0,s.push(`    at ${c.name} (${b})`);g||s.push(`    at ${c.name} (${m.replace(/^at /,"")})`)}else s.push(`    at ${c.name}`)}else s.push(`    at ${c.name}`);c=Ws(c.parent),l++}}return s.join(`
`)},Kl=Symbol.for("effect/SpanAnnotation"),Sj=t=>RO(t,void 0,{emptyCase:()=>[],dieCase:(e,n)=>[new rb(n)],failCase:(e,n)=>[new rb(n)],interruptCase:()=>[],parallelCase:(e,n,s)=>[...n,...s],sequentialCase:(e,n,s)=>[...n,...s]}),Mut=Symbol.for("effect/Context/Tag"),sb=Symbol.for("effect/Context/Reference"),Aut="effect/STM",Cut=Symbol.for(Aut),vj={...Cm,_op:"Tag",[Cut]:xl,[Mut]:{_Service:t=>t,_Identifier:t=>t},toString(){return On(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[Ae](){return this.toJSON()},of(t){return t},context(t){return wj(this,t)}},Nut={...vj,[sb]:sb},xut=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=e;const s=Object.create(vj);return Object.defineProperty(s,"stack",{get(){return n.stack}}),s.key=t,s},Iut=()=>(t,e)=>{const n=Error.stackTraceLimit;Error.stackTraceLimit=2;const s=new Error;Error.stackTraceLimit=n;function a(){}return Object.setPrototypeOf(a,Nut),a.key=t,a.defaultValue=e.defaultValue,Object.defineProperty(a,"stack",{get(){return s.stack}}),a},$j=Symbol.for("effect/Context"),Fut={[$j]:{_Services:t=>t},[Pt](t){if(zut(t)&&this.unsafeMap.size===t.unsafeMap.size){for(const e of this.unsafeMap.keys())if(!t.unsafeMap.has(e)||!qt(this.unsafeMap.get(e),t.unsafeMap.get(e)))return!1;return!0}return!1},[Kt](){return je(this,oO(this.unsafeMap.size))},pipe(){return Ct(this,arguments)},toString(){return On(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(mn)}},[Ae](){return this.toJSON()}},Hl=t=>{const e=Object.create(Fut);return e.unsafeMap=t,e},Dut=t=>{const e=new Error(`Service not found${t.key?`: ${String(t.key)}`:""}`);if(t.stack){const n=t.stack.split(`
`);if(n.length>2){const s=n[2].match(/at (.*)/);s&&(e.message=e.message+` (defined at ${s[1]})`)}}if(e.stack){const n=e.stack.split(`
`);n.splice(1,3),e.stack=n.join(`
`)}return e},zut=t=>Ut(t,$j),Uut=t=>Ut(t,sb),Lut=Hl(new Map),jut=()=>Lut,wj=(t,e)=>Hl(new Map([[t.key,e]])),Put=F(3,(t,e,n)=>{const s=new Map(t.unsafeMap);return s.set(e.key,n),Hl(s)}),gv=Xt("effect/Context/defaultValueCache",()=>new Map),kO=t=>{if(gv.has(t.key))return gv.get(t.key);const e=t.defaultValue();return gv.set(t.key,e),e},qut=(t,e)=>t.unsafeMap.has(e.key)?t.unsafeMap.get(e.key):kO(e),Ej=F(2,(t,e)=>{if(!t.unsafeMap.has(e.key)){if(sb in e)return kO(e);throw Dut(e)}return t.unsafeMap.get(e.key)}),But=Ej,Kut=F(2,(t,e)=>t.unsafeMap.has(e.key)?nw(t.unsafeMap.get(e.key)):Uut(e)?nw(kO(e)):N4),Hut=F(2,(t,e)=>{const n=new Map(t.unsafeMap);for(const[s,a]of e.unsafeMap)n.set(s,a);return Hl(n)}),Fc=xut,MO=jut,Vut=wj,zh=Put,Tj=But,Oj=Ej,Im=Kut,Rj=Hut,kj=Iut,uw=Symbol.for("effect/Duration"),Mj=BigInt(0),ux=BigInt(24),Sg=BigInt(60),lw=BigInt(1e3),lx=BigInt(1e6),fx=BigInt(1e9),Yut=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,sa=t=>{if(Aj(t))return t;if(yc(t))return fw(t);if(A_(t))return yv(t);if(Array.isArray(t)&&t.length===2&&t.every(yc))return t[0]===-1/0||t[1]===-1/0||Number.isNaN(t[0])||Number.isNaN(t[1])?Cj:t[0]===1/0||t[1]===1/0?Xut:yv(BigInt(Math.round(t[0]*1e9))+BigInt(Math.round(t[1])));if(na(t)){const e=Yut.exec(t);if(e){const[n,s,a]=e,c=Number(s);switch(a){case"nano":case"nanos":return yv(BigInt(s));case"micro":case"micros":return Zut(BigInt(s));case"milli":case"millis":return fw(c);case"second":case"seconds":return Wut(c);case"minute":case"minutes":return tlt(c);case"hour":case"hours":return elt(c);case"day":case"days":return nlt(c);case"week":case"weeks":return rlt(c)}}}throw new Error("Invalid DurationInput")},hx={_tag:"Millis",millis:0},Gut={_tag:"Infinity"},Jut={[uw]:uw,[Kt](){return je(this,E4(this.value))},[Pt](t){return Aj(t)&&llt(this,t)},toString(){return`Duration(${hlt(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:ilt(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[Ae](){return this.toJSON()},pipe(){return Ct(this,arguments)}},gi=t=>{const e=Object.create(Jut);return yc(t)?isNaN(t)||t<=0?e.value=hx:Number.isFinite(t)?Number.isInteger(t)?e.value={_tag:"Millis",millis:t}:e.value={_tag:"Nanos",nanos:BigInt(Math.round(t*1e6))}:e.value=Gut:t<=Mj?e.value=hx:e.value={_tag:"Nanos",nanos:t},e},Aj=t=>Ut(t,uw),Qut=t=>{switch(t.value._tag){case"Millis":return t.value.millis===0;case"Nanos":return t.value.nanos===Mj;case"Infinity":return!1}},Cj=gi(0),Xut=gi(1/0),yv=t=>gi(t),Zut=t=>gi(t*lw),fw=t=>gi(t),Wut=t=>gi(t*1e3),tlt=t=>gi(t*6e4),elt=t=>gi(t*36e5),nlt=t=>gi(t*864e5),rlt=t=>gi(t*6048e5),hw=t=>alt(t,{onMillis:e=>e,onNanos:e=>Number(e)/1e6}),slt=t=>{const e=sa(t);switch(e.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return e.value.nanos;case"Millis":return BigInt(Math.round(e.value.millis*1e6))}},ilt=t=>{const e=sa(t);switch(e.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(e.value.nanos/fx),Number(e.value.nanos%fx)];case"Millis":return[Math.floor(e.value.millis/1e3),Math.round(e.value.millis%1e3*1e6)]}},alt=F(2,(t,e)=>{const n=sa(t);switch(n.value._tag){case"Nanos":return e.onNanos(n.value.nanos);case"Infinity":return e.onMillis(1/0);case"Millis":return e.onMillis(n.value.millis)}}),AO=F(3,(t,e,n)=>{const s=sa(t),a=sa(e);if(s.value._tag==="Infinity"||a.value._tag==="Infinity")return n.onMillis(hw(s),hw(a));if(s.value._tag==="Nanos"||a.value._tag==="Nanos"){const c=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6)),l=a.value._tag==="Nanos"?a.value.nanos:BigInt(Math.round(a.value.millis*1e6));return n.onNanos(c,l)}return n.onMillis(s.value.millis,a.value.millis)}),olt=(t,e)=>AO(t,e,{onMillis:(n,s)=>n===s,onNanos:(n,s)=>n===s}),clt=F(2,(t,e)=>AO(t,e,{onMillis:(n,s)=>n<=s,onNanos:(n,s)=>n<=s})),ult=F(2,(t,e)=>AO(t,e,{onMillis:(n,s)=>n>=s,onNanos:(n,s)=>n>=s})),llt=F(2,(t,e)=>olt(sa(t),sa(e))),flt=t=>{const e=sa(t);if(e.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=slt(e),s=n/lx,a=s/lw,c=a/Sg,l=c/Sg,d=l/ux;return{days:Number(d),hours:Number(l%ux),minutes:Number(c%Sg),seconds:Number(a%Sg),millis:Number(s%lw),nanos:Number(n%lx)}},hlt=t=>{const e=sa(t);if(e.value._tag==="Infinity")return"Infinity";if(Qut(e))return"0";const n=flt(e),s=[];return n.days!==0&&s.push(`${n.days}d`),n.hours!==0&&s.push(`${n.hours}h`),n.minutes!==0&&s.push(`${n.minutes}m`),n.seconds!==0&&s.push(`${n.seconds}s`),n.millis!==0&&s.push(`${n.millis}ms`),n.nanos!==0&&s.push(`${n.nanos}ns`),s.join(" ")},dx=Symbol.for("effect/MutableRef"),dlt={[dx]:dx,toString(){return On(this.toJSON())},toJSON(){return{_id:"MutableRef",current:mn(this.current)}},[Ae](){return this.toJSON()},pipe(){return Ct(this,arguments)}},Nj=t=>{const e=Object.create(dlt);return e.current=t,e},V_=t=>t.current,xj=F(2,(t,e)=>(t.current=e,t)),CO="effect/FiberId",qd=Symbol.for(CO),ib="None",dw="Runtime",mlt="Composite",plt=tn(`${CO}-${ib}`);let glt=class{[qd]=qd;_tag=ib;id=-1;startTimeMillis=-1;[Kt](){return plt}[Pt](e){return Ij(e)&&e._tag===ib}toString(){return On(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[Ae](){return this.toJSON()}};class ylt{id;startTimeMillis;[qd]=qd;_tag=dw;constructor(e,n){this.id=e,this.startTimeMillis=n}[Kt](){return je(this,tn(`${CO}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[Pt](e){return Ij(e)&&e._tag===dw&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return On(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[Ae](){return this.toJSON()}}const blt=new glt,Ij=t=>Ut(t,qd),mw=t=>{switch(t._tag){case ib:return Sc();case dw:return TO(t.id);case mlt:return Q(mw(t.left),Pd(mw(t.right)))}},mx=Xt(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>Nj(0)),Fj=t=>Array.from(mw(t)).map(n=>`#${n}`).join(","),_lt=()=>{const t=V_(mx);return Q(mx,xj(t+1)),new ylt(t,Date.now())},Vl=blt,Slt=Fj,Dj=_lt,NO=P_,vlt=Lct,$lt=Pct,zj=qct,Uj=Ld,Lj=cj,wlt=$O,Elt=Yct,jj=q_,Bd=Symbol.for("effect/List"),pw=t=>an(t),Tlt=t=>Vat(z_(t),pw),Olt=Tlt(qt),Rlt={[Bd]:Bd,_tag:"Cons",toString(){return On(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:pw(this).map(mn)}},[Ae](){return this.toJSON()},[Pt](t){return qj(t)&&this._tag===t._tag&&Olt(this,t)},[Kt](){return je(this,Mm(pw(this)))},[Symbol.iterator](){let t=!1,e=this;return{next(){if(t)return this.return();if(e._tag==="Nil")return t=!0,this.return();const n=e.head;return e=e.tail,{done:t,value:n}},return(n){return t||(t=!0),{done:!0,value:n}}}},pipe(){return Ct(this,arguments)}},ab=(t,e)=>{const n=Object.create(Rlt);return n.head=t,n.tail=e,n},klt=tn("Nil"),Mlt={[Bd]:Bd,_tag:"Nil",toString(){return On(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[Ae](){return this.toJSON()},[Kt](){return klt},[Pt](t){return qj(t)&&this._tag===t._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return Ct(this,arguments)}},Pj=Object.create(Mlt),qj=t=>Ut(t,Bd),Xi=t=>t._tag==="Nil",Alt=t=>t._tag==="Cons",Clt=()=>Pj,$c=(t,e)=>ab(t,e),Yl=Clt,xO=t=>ab(t,Pj),Nlt=F(2,(t,e)=>Ilt(e,t)),xlt=F(2,(t,e)=>$c(e,t)),Ilt=F(2,(t,e)=>{if(Xi(t))return e;if(Xi(e))return t;{const n=ab(e.head,t);let s=n,a=e.tail;for(;!Xi(a);){const c=ab(a.head,t);s.tail=c,s=c,a=a.tail}return n}}),Flt=F(3,(t,e,n)=>{let s=e,a=t;for(;!Xi(a);)s=n(s,a.head),a=a.tail;return s}),Dlt=t=>{let e=Yl(),n=t;for(;!Xi(n);)e=xlt(e,n.head),n=n.tail;return e},IO=function(){function t(e){e&&Object.assign(this,e)}return t.prototype=hO,t}(),zlt=Symbol.for("effect/DifferContextPatch");function px(t){return t}const Fm={...IO.prototype,[zlt]:{_Value:px,_Patch:px}},Ult=Object.assign(Object.create(Fm),{_tag:"Empty"}),Llt=Object.create(Ult),Bj=()=>Llt,jlt=Object.assign(Object.create(Fm),{_tag:"AndThen"}),Plt=(t,e)=>{const n=Object.create(jlt);return n.first=t,n.second=e,n},qlt=Object.assign(Object.create(Fm),{_tag:"AddService"}),Blt=(t,e)=>{const n=Object.create(qlt);return n.key=t,n.service=e,n},Klt=Object.assign(Object.create(Fm),{_tag:"RemoveService"}),Hlt=t=>{const e=Object.create(Klt);return e.key=t,e},Vlt=Object.assign(Object.create(Fm),{_tag:"UpdateService"}),Ylt=(t,e)=>{const n=Object.create(Vlt);return n.key=t,n.update=e,n},Glt=(t,e)=>{const n=new Map(t.unsafeMap);let s=Bj();for(const[a,c]of e.unsafeMap.entries())if(n.has(a)){const l=n.get(a);n.delete(a),qt(l,c)||(s=Xg(Ylt(a,()=>c))(s))}else n.delete(a),s=Xg(Blt(a,c))(s);for(const[a]of n.entries())s=Xg(Hlt(a))(s);return s},Xg=F(2,(t,e)=>Plt(t,e)),Jlt=F(2,(t,e)=>{if(t._tag==="Empty")return e;let n=!1,s=Vr(t);const a=new Map(e.unsafeMap);for(;Dl(s);){const l=zl(s),d=zo(s);switch(l._tag){case"Empty":{s=d;break}case"AddService":{a.set(l.key,l.service),s=d;break}case"AndThen":{s=Us(Us(d,l.second),l.first);break}case"RemoveService":{a.delete(l.key),s=d;break}case"UpdateService":{a.set(l.key,l.update(a.get(l.key))),n=!0,s=d;break}}}if(!n)return Hl(a);const c=new Map;for(const[l]of e.unsafeMap)a.has(l)&&(c.set(l,a.get(l)),a.delete(l));for(const[l,d]of a)c.set(l,d);return Hl(c)}),Qlt=Symbol.for("effect/DifferHashSetPatch");function bv(t){return t}const Y_={...IO.prototype,[Qlt]:{_Value:bv,_Key:bv,_Patch:bv}},Xlt=Object.assign(Object.create(Y_),{_tag:"Empty"}),Zlt=Object.create(Xlt),Kj=()=>Zlt,Wlt=Object.assign(Object.create(Y_),{_tag:"AndThen"}),tft=(t,e)=>{const n=Object.create(Wlt);return n.first=t,n.second=e,n},eft=Object.assign(Object.create(Y_),{_tag:"Add"}),nft=t=>{const e=Object.create(eft);return e.value=t,e},rft=Object.assign(Object.create(Y_),{_tag:"Remove"}),sft=t=>{const e=Object.create(rft);return e.value=t,e},ift=(t,e)=>{const[n,s]=eb([t,Kj()],([a,c],l)=>out(l)(a)?[mj(l)(a),c]:[a,gw(nft(l))(c)])(e);return eb(s,(a,c)=>gw(sft(c))(a))(n)},gw=F(2,(t,e)=>tft(t,e)),aft=F(2,(t,e)=>{if(t._tag==="Empty")return e;let n=e,s=Vr(t);for(;Dl(s);){const a=zl(s),c=zo(s);switch(a._tag){case"Empty":{s=c;break}case"AndThen":{s=Us(a.first)(Us(a.second)(c));break}case"Add":{n=fd(a.value)(n),s=c;break}case"Remove":n=mj(a.value)(n),s=c}}return n}),oft=Symbol.for("effect/DifferReadonlyArrayPatch");function gx(t){return t}const Dm={...IO.prototype,[oft]:{_Value:gx,_Patch:gx}},cft=Object.assign(Object.create(Dm),{_tag:"Empty"}),uft=Object.create(cft),Hj=()=>uft,lft=Object.assign(Object.create(Dm),{_tag:"AndThen"}),fft=(t,e)=>{const n=Object.create(lft);return n.first=t,n.second=e,n},hft=Object.assign(Object.create(Dm),{_tag:"Append"}),dft=t=>{const e=Object.create(hft);return e.values=t,e},mft=Object.assign(Object.create(Dm),{_tag:"Slice"}),pft=(t,e)=>{const n=Object.create(mft);return n.from=t,n.until=e,n},gft=Object.assign(Object.create(Dm),{_tag:"Update"}),yft=(t,e)=>{const n=Object.create(gft);return n.index=t,n.patch=e,n},bft=t=>{let e=0,n=Hj();for(;e<t.oldValue.length&&e<t.newValue.length;){const s=t.oldValue[e],a=t.newValue[e],c=t.differ.diff(s,a);qt(c,t.differ.empty)||(n=Zg(n,yft(e,c))),e=e+1}return e<t.oldValue.length&&(n=Zg(n,pft(0,e))),e<t.newValue.length&&(n=Zg(n,dft(uct(e)(t.newValue)))),n},Zg=F(2,(t,e)=>fft(t,e)),_ft=F(3,(t,e,n)=>{if(t._tag==="Empty")return e;let s=e.slice(),a=ws(t);for(;Jg(a);){const c=lr(a),l=bc(a);switch(c._tag){case"Empty":{a=l;break}case"AndThen":{l.unshift(c.first,c.second),a=l;break}case"Append":{for(const d of c.values)s.push(d);a=l;break}case"Slice":{s=s.slice(c.from,c.until),a=l;break}case"Update":{s[c.index]=n.patch(c.patch,s[c.index]),a=l;break}}}return s}),Sft=Symbol.for("effect/Differ"),vft={[Sft]:{_P:sn,_V:sn},pipe(){return Ct(this,arguments)}},vf=t=>{const e=Object.create(vft);return e.empty=t.empty,e.diff=t.diff,e.combine=t.combine,e.patch=t.patch,e},$ft=()=>vf({empty:Bj(),combine:(t,e)=>Xg(e)(t),diff:(t,e)=>Glt(t,e),patch:(t,e)=>Jlt(e)(t)}),wft=()=>vf({empty:Kj(),combine:(t,e)=>gw(e)(t),diff:(t,e)=>ift(t,e),patch:(t,e)=>aft(e)(t)}),Eft=t=>vf({empty:Hj(),combine:(e,n)=>Zg(e,n),diff:(e,n)=>bft({oldValue:e,newValue:n,differ:t}),patch:(e,n)=>_ft(e,n,t)}),Vj=()=>Tft((t,e)=>e),Tft=t=>vf({empty:sn,combine:(e,n)=>e===sn?n:n===sn?e:s=>n(e(s)),diff:(e,n)=>qt(e,n)?sn:M_(n),patch:(e,n)=>t(n,e(n))}),Kd=255,Yj=8,yw=t=>t&Kd,bw=t=>t>>Yj&Kd,zm=(t,e)=>(t&Kd)+((e&t&Kd)<<Yj),Oft=zm(0,0),Rft=t=>zm(t,t),kft=t=>zm(t,0),Mft=F(2,(t,e)=>zm(yw(t)&~e,bw(t))),Aft=F(2,(t,e)=>t|e),Cft=t=>~t>>>0&Kd,Nft=0,$f=1,xft=2,Gj=4,_w=16,Jj=32,Ift=t=>G_(t,Jj),Fft=F(2,(t,e)=>t|e),Da=t=>Qj(t)&&!zft(t),Qj=t=>G_(t,$f),G_=F(2,(t,e)=>(t&e)!==0),Xj=(...t)=>t.reduce((e,n)=>e|n,0),Dft=Xj(Nft),yx=t=>G_(t,Gj),zft=t=>G_(t,_w),Wg=F(2,(t,e)=>zm(t^e,e)),ty=F(2,(t,e)=>t&(Cft(yw(e))|bw(e))|yw(e)&bw(e)),bx=vf({empty:Oft,diff:(t,e)=>Wg(t,e),combine:(t,e)=>Aft(e)(t),patch:(t,e)=>ty(e,t)}),Uft=Rft,Zj=kft,_x=Mft,Wj=(t,e)=>({_tag:"Par",left:t,right:e}),vg=(t,e)=>({_tag:"Seq",left:t,right:e}),Lft=t=>{let e=xO(t),n=Yl();for(;;){const[s,a]=Flt(e,[tP(),Yl()],([c,l],d)=>{const[m,p]=jft(d);return[Hft(c,m),Nlt(l,p)]});if(n=Pft(n,s),Xi(a))return Dlt(n);e=a}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},jft=t=>{let e=t,n=tP(),s=Yl(),a=Yl();for(;;)switch(e._tag){case"Empty":{if(Xi(s))return[n,a];e=s.head,s=s.tail;break}case"Par":{s=$c(e.right,s),e=e.left;break}case"Seq":{const c=e.left,l=e.right;switch(c._tag){case"Empty":{e=l;break}case"Par":{const d=c.left,m=c.right;e=Wj(vg(d,l),vg(m,l));break}case"Seq":{const d=c.left,m=c.right;e=vg(d,vg(m,l));break}case"Single":{e=c,a=$c(l,a);break}}break}case"Single":{if(n=Kft(n,e),Xi(s))return[n,a];e=s.head,s=s.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},Pft=(t,e)=>{if(Xi(t))return xO(_v(e));if(Vft(e))return t;const n=Zft(t.head),s=Yft(e);return n.length===1&&s.length===1&&qt(n[0],s[0])?$c(Xft(t.head,_v(e)),t.tail):$c(_v(e),t)},qft=Symbol.for("effect/RequestBlock/RequestBlockParallel"),Bft={_R:t=>t};class FO{map;[qft]=Bft;constructor(e){this.map=e}}const tP=()=>new FO(NO()),Kft=(t,e)=>new FO(wlt(t.map,e.dataSource,n=>qot(B4(n,Tct(e.blockedRequest)),()=>Vr(e.blockedRequest)))),Hft=(t,e)=>new FO(jj(t.map,e.map,(n,s,a)=>Uj(n,a,fr(zj(n,a),{onNone:()=>s,onSome:c=>As(s,c)})))),Vft=t=>$lt(t.map),Yft=t=>Array.from(Lj(t.map)),_v=t=>Qft(Elt(t.map,e=>Vr(e))),Gft=Symbol.for("effect/RequestBlock/RequestBlockSequential"),Jft={_R:t=>t};class eP{map;[Gft]=Jft;constructor(e){this.map=e}}const Qft=t=>new eP(t),Xft=(t,e)=>new eP(jj(e.map,t.map,(n,s,a)=>Uj(n,a,fr(zj(n,a),{onNone:()=>ra(),onSome:c=>As(c,s)})))),Zft=t=>Array.from(Lj(t.map)),Wft=t=>Array.from(t.map),J_="Pending",nP="Done",tht="effect/Deferred",eht=Symbol.for(tht),nht={_E:t=>t,_A:t=>t},rht=t=>({_tag:J_,joiners:t}),sht=t=>({_tag:nP,effect:t});class Um{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new Um(this.self)}}const rP=(t,e)=>{const n=new Hn("Blocked");return n.effect_instruction_i0=t,n.effect_instruction_i1=e,n},iht=t=>{const e=new Hn("RunBlocked");return e.effect_instruction_i0=t,e},Gl=Symbol.for("effect/Effect");class aht{patch;op;_op=lO;constructor(e,n){this.patch=e,this.op=n}}class Hn{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Gl]=xl;constructor(e){this._op=e}[Pt](e){return this===e}[Kt](){return je(this,aO(this))}pipe(){return Ct(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:mn(this.effect_instruction_i0),effect_instruction_i1:mn(this.effect_instruction_i1),effect_instruction_i2:mn(this.effect_instruction_i2)}}toString(){return On(this.toJSON())}[Ae](){return this.toJSON()}[Symbol.iterator](){return new Um(new km(this))}}class sP{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Gl]=xl;constructor(e){this._op=e,this._tag=e}[Pt](e){return HO(e)&&e._op==="Failure"&&qt(this.effect_instruction_i0,e.effect_instruction_i0)}[Kt](){return Q(tn(this._tag),Wt(mt(this.effect_instruction_i0)),je(this))}get cause(){return this.effect_instruction_i0}pipe(){return Ct(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return On(this.toJSON())}[Ae](){return this.toJSON()}[Symbol.iterator](){return new Um(new km(this))}}class iP{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Gl]=xl;constructor(e){this._op=e,this._tag=e}[Pt](e){return HO(e)&&e._op==="Success"&&qt(this.effect_instruction_i0,e.effect_instruction_i0)}[Kt](){return Q(tn(this._tag),Wt(mt(this.effect_instruction_i0)),je(this))}get value(){return this.effect_instruction_i0}pipe(){return Ct(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:mn(this.value)}}toString(){return On(this.toJSON())}[Ae](){return this.toJSON()}[Symbol.iterator](){return new Um(new km(this))}}const Q_=t=>Ut(t,Gl),Yr=t=>{const e=new Hn(k4);return e.effect_instruction_i0=t,e},oht=F(3,(t,e,n)=>W_(s=>Mt(t,a=>Mt(oP(fn(()=>s(e(a)))),c=>fn(()=>n(a,c)).pipe(Jl({onFailure:l=>{switch(c._tag){case Fs:return Ls(ls(c.effect_instruction_i0,l));case Ds:return Ls(l)}},onSuccess:()=>c})))))),Lm=F(2,(t,e)=>Mt(t,()=>Me(e))),jm=t=>Lm(t,void 0),aP=function(){const t=new Hn(x_);switch(arguments.length){case 2:{t.effect_instruction_i0=arguments[0],t.commit=arguments[1];break}case 3:{t.effect_instruction_i0=arguments[0],t.effect_instruction_i1=arguments[1],t.commit=arguments[2];break}case 4:{t.effect_instruction_i0=arguments[0],t.effect_instruction_i1=arguments[1],t.effect_instruction_i2=arguments[2],t.commit=arguments[3];break}default:throw new Error(C_("you're not supposed to end up here"))}return t},ob=(t,e=Vl)=>{const n=new Hn(ud);let s;return n.effect_instruction_i0=a=>{s=t(a)},n.effect_instruction_i1=e,hP(n,a=>Q_(s)?s:js)},cht=(t,e=Vl)=>fn(()=>ob(t,e)),Hd=(t,e=Vl)=>aP(t,function(){let n,s;function a(m){n?n(m):s===void 0&&(s=m)}const c=new Hn(ud);c.effect_instruction_i0=m=>{n=m,s&&m(s)},c.effect_instruction_i1=e;let l,d;return this.effect_instruction_i0.length!==1?(d=new AbortController,l=cr(()=>this.effect_instruction_i0(a,d.signal))):l=cr(()=>this.effect_instruction_i0(a)),l||d?hP(c,m=>(d&&d.abort(),l??js)):c}),Sw=F(2,(t,e)=>zO(t,{onFailure:e,onSuccess:Me})),Sx=Symbol.for("effect/OriginalAnnotation"),DO=(t,e)=>tr(e)?new Proxy(t,{has(n,s){return s===Kl||s===Sx||s in n},get(n,s){return s===Kl?e.value:s===Sx?t:n[s]}}):t,vx=t=>oo(t)&&!(Kl in t)?Yr(e=>Ls(ci(DO(t,VO(e))))):Ls(ci(t)),uht=t=>lht(()=>ci(new jht(t))),cb=t=>zO(t,{onFailure:e=>Me(Lt(e)),onSuccess:e=>Me(te(e))}),oP=t=>dht(t,{onFailure:be,onSuccess:en}),vr=t=>oo(t)&&!(Kl in t)?Yr(e=>Ls(nb(DO(t,VO(e))))):Ls(nb(t)),cP=t=>Mt(xt(t),vr),Ls=t=>{const e=new sP(Fs);return e.effect_instruction_i0=t,e},lht=t=>Mt(xt(t),Ls),fht=Yr(t=>Me(t.id())),uP=t=>Yr(e=>t(e.id())),Mt=F(2,(t,e)=>{const n=new Hn(Qy);return n.effect_instruction_i0=t,n.effect_instruction_i1=e,n}),hht=t=>{const e=new Hn("OnStep");return e.effect_instruction_i0=t,e},lP=t=>Mt(t,sn),dht=F(2,(t,e)=>Jl(t,{onFailure:n=>Me(e.onFailure(n)),onSuccess:n=>Me(e.onSuccess(n))})),Jl=F(2,(t,e)=>{const n=new Hn(Xy);return n.effect_instruction_i0=t,n.effect_instruction_i1=e.onFailure,n.effect_instruction_i2=e.onSuccess,n}),zO=F(2,(t,e)=>Jl(t,{onFailure:n=>{if(put(n).length>0)return Ls(Sut(n));const a=mut(n);return a.length>0?e.onFailure(ej(a)):Ls(n)},onSuccess:e.onSuccess})),Ba=F(2,(t,e)=>fn(()=>{const n=an(t),s=D_(n.length);let a=0;return Lm(jO({while:()=>a<n.length,body:()=>e(n[a],a),step:c=>{s[a++]=c}}),s)})),X_=F(2,(t,e)=>fn(()=>{const n=an(t);let s=0;return jO({while:()=>s<n.length,body:()=>e(n[s],s),step:()=>{s++}})})),fP=t=>{const e=new Hn(Am);return e.effect_instruction_i0=Uft($f),e.effect_instruction_i1=()=>t,e},Tr=F(2,(t,e)=>Mt(t,n=>xt(()=>e(n)))),UO=F(2,(t,e)=>zO(t,{onFailure:n=>cP(()=>e.onFailure(n)),onSuccess:n=>xt(()=>e.onSuccess(n))})),Z_=F(2,(t,e)=>Jl(t,{onFailure:n=>{const s=but(n);switch(s._tag){case"Left":return cP(()=>e(s.left));case"Right":return Ls(s.right)}},onSuccess:Me})),LO=F(2,(t,e)=>W_(n=>Jl(n(t),{onFailure:s=>{const a=be(s);return Jl(e(a),{onFailure:c=>be(ls(s,c)),onSuccess:()=>a})},onSuccess:s=>{const a=en(s);return tS(e(a),a)}}))),hP=F(2,(t,e)=>LO(t,EP({onFailure:n=>OO(n)?jm(e(gut(n))):js,onSuccess:()=>js}))),Me=t=>{const e=new iP(Ds);return e.effect_instruction_i0=t,e},fn=t=>{const e=new Hn(x_);return e.commit=t,e},xt=t=>{const e=new Hn(R4);return e.effect_instruction_i0=t,e},mht=F(t=>t.length===3||t.length===2&&!(oo(t[1])&&"onlyEffect"in t[1]),(t,e)=>Mt(t,n=>{const s=typeof e=="function"?e(n):e;return Q_(s)?Lm(s,n):tot(s)?ob(a=>{s.then(c=>a(Me(n)),c=>a(vr(new Bht(c,"An unknown error occurred in Effect.tap"))))}):Me(n)})),pht=t=>Yr(e=>{const n=e.getFiberRef($w),s=Q(n,Rn(()=>e.scope()));return t(eS($w,jt(s)))}),dP=t=>{const e=new Hn(Am);return e.effect_instruction_i0=Zj($f),e.effect_instruction_i1=()=>t,e},W_=t=>aP(t,function(){const e=new Hn(Am);return e.effect_instruction_i0=Zj($f),e.effect_instruction_i1=n=>Qj(n)?cr(()=>this.effect_instruction_i0(fP)):cr(()=>this.effect_instruction_i0(dP)),e}),js=Me(void 0),ght=t=>{const e=new Hn(Am);return e.effect_instruction_i0=t,e.effect_instruction_i1=void 0,e},jO=t=>{const e=new Hn(Zy);return e.effect_instruction_i0=t.while,e.effect_instruction_i1=t.body,e.effect_instruction_i2=t.step,e},PO=t=>{const e=new Hn(Gg);return typeof t?.priority<"u"?xht(e,t.priority):e},mP=F(2,(t,e)=>Mt(t,n=>Tr(e,s=>[n,s]))),pP=F(2,(t,e)=>Mt(t,n=>Lm(e,n))),tS=F(2,(t,e)=>Mt(t,()=>e)),yht=t=>Mt(fht,e=>Q(t,gP(e))),gP=F(2,(t,e)=>Mt(t.interruptAsFork(e),()=>t.await)),bht={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return Ct(this,arguments)}},_ht={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return Ct(this,arguments)}},Sht={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return Ct(this,arguments)}},yP={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return Ct(this,arguments)}},bP={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return Ct(this,arguments)}},_P={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return Ct(this,arguments)}},vht={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return Ct(this,arguments)}},$ht={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return Ct(this,arguments)}},wht="effect/FiberRef",Eht=Symbol.for(wht),Tht={_A:t=>t},qO=t=>Yr(e=>en(e.getFiberRef(t))),BO=F(2,(t,e)=>Mt(qO(t),e)),$x=F(2,(t,e)=>Oht(t,()=>[void 0,e])),Oht=F(2,(t,e)=>Yr(n=>{const[s,a]=e(n.getFiberRef(t));return n.setFiberRef(t,a),Me(s)})),eS=F(3,(t,e,n)=>oht(pP(qO(e),$x(e,n)),()=>t,s=>$x(e,s))),Mr=(t,e)=>wf(t,{differ:Vj(),fork:e?.fork??sn,join:e?.join}),Rht=t=>{const e=wft();return wf(t,{differ:e,fork:e.empty})},kht=t=>{const e=Eft(Vj());return wf(t,{differ:e,fork:e.empty})},SP=t=>{const e=$ft();return wf(t,{differ:e,fork:e.empty})},wf=(t,e)=>({...Nm,[Eht]:Tht,initial:t,commit(){return qO(this)},diff:(s,a)=>e.differ.diff(s,a),combine:(s,a)=>e.differ.combine(s,a),patch:s=>a=>e.differ.patch(s,a),fork:e.fork,join:e.join??((s,a)=>a)}),Mht=t=>wf(t,{differ:bx,fork:bx.empty}),Pm=Xt(Symbol.for("effect/FiberRef/currentContext"),()=>SP(MO())),nS=Xt(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Mr(0)),vP=Xt(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Mr(2048)),Aht=Xt(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Mr(NO())),Cht=Xt(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Mr(bP)),Nht=Xt(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Mr(Yl())),xht=F(2,(t,e)=>eS(t,nS,e)),Iht=Xt(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Mr("unbounded")),Fht=Xt(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Mr(!0)),Dht=Xt(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Mr(jt(_P))),zht=Xt(Symbol.for("effect/FiberRef/versionMismatchErrorLogLevel"),()=>Mr(jt(yP))),vw=Xt(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>kht(Il())),$w=Xt(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Mr(St(),{fork:()=>St(),join:(t,e)=>t})),$g=Xt(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Mr(ql,{fork:()=>ql,join:(t,e)=>t})),Uht=(t,e)=>t.addFinalizer(()=>jm(e)),Lht=(t,e)=>t.close(e),rS=(t,e)=>t.fork(e),KO=function(){class t extends globalThis.Error{commit(){return vr(this)}toJSON(){const n={...this};return this.message&&(n.message=this.message),this.cause&&(n.cause=this.cause),n}[Ae](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?Sf(nb(this),{renderErrorCause:!0}):this}}return Object.assign(t.prototype,Eot),t}(),$P=(t,e)=>{class n extends KO{_tag=e}return Object.assign(n.prototype,t),n.prototype.name=e,n},wx=Symbol.for("effect/Cause/errors/RuntimeException"),jht=$P({[wx]:wx},"RuntimeException"),Pht=Symbol.for("effect/Cause/errors/InterruptedException"),qht=t=>Ut(t,Pht),Ex=Symbol.for("effect/Cause/errors/NoSuchElement"),wP=$P({[Ex]:Ex},"NoSuchElementException"),Tx=Symbol.for("effect/Cause/errors/UnknownException"),Bht=function(){class t extends KO{_tag="UnknownException";error;constructor(n,s){super(s??"An unknown error occurred",{cause:n}),this.error=n}}return Object.assign(t.prototype,{[Tx]:Tx,name:"UnknownException"}),t}(),HO=t=>Q_(t)&&"_tag"in t&&(t._tag==="Success"||t._tag==="Failure"),Kht=t=>t._tag==="Success",Ox=(t,e)=>Ght(t,e?.parallel?H_:ls),Hht=t=>be(ci(t)),Rx=t=>be(nb(t)),be=t=>{const e=new sP(Fs);return e.effect_instruction_i0=t,e},Vht=t=>be(La(t)),Sv=F(2,(t,e)=>{switch(t._tag){case Fs:return be(t.effect_instruction_i0);case Ds:return en(e(t.effect_instruction_i0))}}),EP=F(2,(t,{onFailure:e,onSuccess:n})=>{switch(t._tag){case Fs:return e(t.effect_instruction_i0);case Ds:return n(t.effect_instruction_i0)}}),en=t=>{const e=new iP(Ds);return e.effect_instruction_i0=t,e},Uo=en(void 0),Yht=F(3,(t,e,{onFailure:n,onSuccess:s})=>{switch(t._tag){case Fs:switch(e._tag){case Ds:return be(t.effect_instruction_i0);case Fs:return be(n(t.effect_instruction_i0,e.effect_instruction_i0))}case Ds:switch(e._tag){case Ds:return en(s(t.effect_instruction_i0,e.effect_instruction_i0));case Fs:return be(e.effect_instruction_i0)}}}),Ght=(t,e)=>{const n=tj(t);return Dl(n)?Q(zo(n),J4(Q(zl(n),Sv(Vr)),(s,a)=>Q(s,Yht(a,{onSuccess:(c,l)=>Q(c,Us(l)),onFailure:e}))),Sv(Fl),Sv(s=>Jo(s)),jt):St()},Jht=t=>({...Nm,[eht]:nht,state:Nj(rht([])),commit(){return TP(this)},blockingOn:t}),TP=t=>cht(e=>{const n=V_(t.state);switch(n._tag){case nP:return e(n.effect);case J_:return n.joiners.push(e),Qht(t,e)}},t.blockingOn),OP=(t,e)=>{const n=V_(t.state);if(n._tag===J_){xj(t.state,sht(e));for(let s=0,a=n.joiners.length;s<a;s++)n.joiners[s](e)}},Qht=(t,e)=>xt(()=>{const n=V_(t.state);if(n._tag===J_){const s=n.joiners.indexOf(e);s>=0&&n.joiners.splice(s,1)}}),Xht=Yr(t=>en(t.currentContext)),Zht=()=>Xht,qm=t=>Mt(Zht(),t),Wht=F(2,(t,e)=>eS(Pm,e)(t)),tdt=F(2,(t,e)=>qm(n=>Wht(t,e(n)))),VO=t=>{const e=t.currentSpan;return e!==void 0&&e._tag==="Span"?jt(e):St()},edt=fut,ndt=Sf,RP="And",kP="Or",MP="InvalidData",AP="MissingData",CP="SourceUnavailable",NP="Unsupported",rdt="effect/ConfigError",kx=Symbol.for(rdt),Ef={_tag:"ConfigError",[kx]:kx},xP=(t,e)=>{const n=Object.create(Ef);return n._op=RP,n.left=t,n.right=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},IP=(t,e)=>{const n=Object.create(Ef);return n._op=kP,n.left=t,n.right=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},sdt=(t,e,n={pathDelim:"."})=>{const s=Object.create(Ef);return s._op=MP,s.path=t,s.message=e,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Invalid data at ${Q(this.path,yf(n.pathDelim))}: "${this.message}")`}}),s},wc=(t,e,n={pathDelim:"."})=>{const s=Object.create(Ef);return s._op=AP,s.path=t,s.message=e,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Missing data at ${Q(this.path,yf(n.pathDelim))}: "${this.message}")`}}),s},idt=(t,e,n,s={pathDelim:"."})=>{const a=Object.create(Ef);return a._op=CP,a.path=t,a.message=e,a.cause=n,Object.defineProperty(a,"toString",{enumerable:!1,value(){return`(Source unavailable at ${Q(this.path,yf(s.pathDelim))}: "${this.message}")`}}),a},adt=(t,e,n={pathDelim:"."})=>{const s=Object.create(Ef);return s._op=NP,s.path=t,s.message=e,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${Q(this.path,yf(n.pathDelim))}: "${this.message}")`}}),s},Lo=F(2,(t,e)=>{switch(t._op){case RP:return xP(Lo(t.left,e),Lo(t.right,e));case kP:return IP(Lo(t.left,e),Lo(t.right,e));case MP:return sdt([...e,...t.path],t.message);case AP:return wc([...e,...t.path],t.message);case CP:return idt([...e,...t.path],t.message,t.cause);case NP:return adt([...e,...t.path],t.message)}}),odt="effect/Clock",Mx=Symbol.for(odt),YO=Fc("effect/Clock"),cdt=2**31-1,Ax={unsafeSchedule(t,e){const n=hw(e);if(n>cdt)return W$;let s=!1;const a=setTimeout(()=>{s=!0,t()},n);return()=>(clearTimeout(a),!s)}},Cx=function(){const t=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*t;let e;return()=>(e===void 0&&(e=BigInt(Date.now())*t-BigInt(Math.round(performance.now()*1e6))),e+BigInt(Math.round(performance.now()*1e6)))}(),udt=function(){const t=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!t)return Cx;const e=Cx()-t.bigint();return()=>e+t.bigint()}();class ldt{[Mx]=Mx;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return udt()}currentTimeMillis=xt(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=xt(()=>this.unsafeCurrentTimeNanos());scheduler(){return Me(Ax)}sleep(e){return Hd(n=>{const s=Ax.unsafeSchedule(()=>n(js),e);return jm(xt(s))})}}const fdt=()=>new ldt,Ql=Lot,ub=t=>t.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),hdt={_tag:"Empty"},vv=F(2,(t,e)=>{let n=xO(e),s=t;for(;Alt(n);){const a=n.head;switch(a._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=$c(a.first,$c(a.second,n.tail));break}case"MapName":{s=rl(s,a.f),n=n.tail;break}case"Nested":{s=Wy(s,a.name),n=n.tail;break}case"Unnested":{if(Q(ld(s),Got(a.name)))s=bc(s),n=n.tail;else return Lt(wc(s,`Expected ${a.name} to be in path in ConfigProvider#unnested`));break}}}return te(s)}),ddt="Constant",mdt="Fail",pdt="Fallback",gdt="Described",ydt="Lazy",bdt="MapOrFail",_dt="Nested",Sdt="Primitive",vdt="Sequence",$dt="HashMap",wdt="ZipWith";var Nx={};const lb=(t,e)=>[...t,...e],Edt="effect/ConfigProvider",xx=Symbol.for(Edt),Tdt=Fc("effect/ConfigProvider"),Odt="effect/ConfigProviderFlat",Ix=Symbol.for(Odt),Rdt=t=>({[xx]:xx,pipe(){return Ct(this,arguments)},...t}),kdt=t=>({[Ix]:Ix,patch:t.patch,load:(e,n,s=!0)=>t.load(e,n,s),enumerateChildren:t.enumerateChildren}),Mdt=t=>Rdt({load:e=>Mt(os(t,Il(),e,!1),n=>fr(ld(n),{onNone:()=>vr(wc(Il(),`Expected a single value having structure: ${e}`)),onSome:Me})),flattened:t}),Adt=t=>{const{pathDelim:e,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},t),s=m=>Q(m,yf(e)),a=m=>m.split(e),c=()=>typeof process<"u"&&"env"in process&&typeof Nx=="object"?Nx:{};return Mdt(kdt({load:(m,p,g=!0)=>{const b=s(m),S=c(),v=b in S?jt(S[b]):St();return Q(v,Z_(()=>wc(m,`Expected ${b} to exist in the process context`)),Mt(E=>Fdt(E,m,p,n,g)))},enumerateChildren:m=>xt(()=>{const p=c(),S=Object.keys(p).map(v=>a(v.toUpperCase())).filter(v=>{for(let E=0;E<m.length;E++){const D=Q(m,V4(E)),C=v[E];if(C===void 0||D!==C)return!1}return!0}).flatMap(v=>v.slice(m.length,m.length+1));return aut(S)}),patch:hdt}))},Cdt=(t,e,n,s)=>{const a=rx(n.length,m=>m>=s.length?St():jt([t(m),m+1])),c=rx(s.length,m=>m>=n.length?St():jt([e(m),m+1])),l=lb(n,a),d=lb(s,c);return[l,d]},Ndt=(t,e)=>{let n=e;if(n._tag==="Nested"){const s=t.slice();for(;n._tag==="Nested";)s.push(n.name),n=n.config;return s}return t},os=(t,e,n,s)=>{const a=n;switch(a._tag){case ddt:return Me(ws(a.value));case gdt:return fn(()=>os(t,e,a.config,s));case mdt:return vr(wc(e,a.message));case pdt:return Q(fn(()=>os(t,e,a.first,s)),Sw(c=>a.condition(c)?Q(os(t,e,a.second,s),Sw(l=>vr(IP(c,l)))):vr(c)));case ydt:return fn(()=>os(t,e,a.config(),s));case bdt:return fn(()=>Q(os(t,e,a.original,s),Mt(Ba(c=>Q(a.mapOrFail(c),Z_(Lo(Ndt(e,a.original))))))));case _dt:return fn(()=>os(t,lb(e,ws(a.name)),a.config,s));case Sdt:return Q(vv(e,t.patch),Mt(c=>Q(t.load(c,a,s),Mt(l=>{if(l.length===0){const d=Q(act(c),Rn(()=>"<n/a>"));return vr(wc([],`Expected ${a.description} with name ${d}`))}return Me(l)}))));case vdt:return Q(vv(e,t.patch),Mt(c=>Q(t.enumerateChildren(c),Mt(zdt),Mt(l=>l.length===0?fn(()=>Tr(os(t,e,a.config,!0),ws)):Q(Ba(l,d=>os(t,tct(e,`[${d}]`),a.config,!0)),Tr(d=>{const m=pct(d);return m.length===0?ws(Il()):ws(m)}))))));case $dt:return fn(()=>Q(vv(e,t.patch),Mt(c=>Q(t.enumerateChildren(c),Mt(l=>Q(l,Ba(d=>os(t,lb(c,ws(d)),a.valueConfig,s)),Tr(d=>d.length===0?ws(NO()):Q(Ddt(d),rl(m=>vlt(nx(an(l),m)))))))))));case wdt:return fn(()=>Q(os(t,e,a.left,s),cb,Mt(c=>Q(os(t,e,a.right,s),cb,Mt(l=>{if(wn(c)&&wn(l))return vr(xP(c.left,l.left));if(wn(c)&&Bi(l))return vr(c.left);if(Bi(c)&&wn(l))return vr(l.left);if(Bi(c)&&Bi(l)){const d=Q(e,yf(".")),m=xdt(e,d),[p,g]=Cdt(m,m,Q(c.right,rl(te)),Q(l.right,rl(te)));return Q(p,nx(g),Ba(([b,S])=>Q(mP(b,S),Tr(([v,E])=>a.zip(v,E)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},xdt=(t,e)=>n=>Lt(wc(t,`The element at index ${n} in a sequence at path "${e}" was missing`)),Idt=(t,e)=>t.split(new RegExp(`\\s*${ub(e)}\\s*`)),Fdt=(t,e,n,s,a)=>a?Q(Idt(t,s),Ba(c=>n.parse(c.trim())),Z_(Lo(e))):Q(n.parse(t),UO({onFailure:Lo(e),onSuccess:ws})),Ddt=t=>Object.keys(t[0]).map(e=>t.map(n=>n[e])),zdt=t=>Q(Ba(t,Ldt),UO({onFailure:()=>Il(),onSuccess:Ud(Ql)}),cb,Tr(zot)),Udt=/^(\[(\d+)\])$/,Ldt=t=>{const e=t.match(Udt);if(e!==null){const n=e[2];return Q(n!==void 0&&n.length>0?jt(n):St(),F_(jdt))}return St()},jdt=t=>{const e=Number.parseInt(t);return Number.isNaN(e)?St():jt(e)},Fx=Symbol.for("effect/Console"),FP=Fc("effect/Console"),Pdt={[Fx]:Fx,assert(t,...e){return xt(()=>{console.assert(t,...e)})},clear:xt(()=>{console.clear()}),count(t){return xt(()=>{console.count(t)})},countReset(t){return xt(()=>{console.countReset(t)})},debug(...t){return xt(()=>{console.debug(...t)})},dir(t,e){return xt(()=>{console.dir(t,e)})},dirxml(...t){return xt(()=>{console.dirxml(...t)})},error(...t){return xt(()=>{console.error(...t)})},group(t){return t?.collapsed?xt(()=>console.groupCollapsed(t?.label)):xt(()=>console.group(t?.label))},groupEnd:xt(()=>{console.groupEnd()}),info(...t){return xt(()=>{console.info(...t)})},log(...t){return xt(()=>{console.log(...t)})},table(t,e){return xt(()=>{console.table(t,e)})},time(t){return xt(()=>console.time(t))},timeEnd(t){return xt(()=>console.timeEnd(t))},timeLog(t,...e){return xt(()=>{console.timeLog(t,...e)})},trace(...t){return xt(()=>{console.trace(...t)})},warn(...t){return xt(()=>{console.warn(...t)})},unsafe:console},qdt="effect/Random",Dx=Symbol.for(qdt),Bdt=Fc("effect/Random");class Kdt{seed;[Dx]=Dx;PRNG;constructor(e){this.seed=e,this.PRNG=new oot(e)}get next(){return xt(()=>this.PRNG.number())}get nextBoolean(){return Tr(this.next,e=>e>.5)}get nextInt(){return xt(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,n){return Tr(this.next,s=>(n-e)*s+e)}nextIntBetween(e,n){return xt(()=>this.PRNG.integer(n-e)+e)}shuffle(e){return Hdt(e,n=>this.nextIntBetween(0,n))}}const Hdt=(t,e)=>fn(()=>Q(xt(()=>Array.from(t)),Mt(n=>{const s=[];for(let a=n.length;a>=2;a=a-1)s.push(a);return Q(s,X_(a=>Q(e(a),Tr(c=>Vdt(n,a-1,c)))),Lm(tj(n)))}))),Vdt=(t,e,n)=>{const s=t[e];return t[e]=t[n],t[n]=s,t},Ydt=t=>new Kdt(mt(t)),zx=Symbol.for("effect/Tracer"),Gdt=t=>({[zx]:zx,...t}),DP=Fc("effect/Tracer"),zP=Fc("effect/ParentSpan"),Ux=function(){const t="abcdef0123456789",e=t.length;return function(n){let s="";for(let a=0;a<n;a++)s+=t.charAt(Math.floor(Math.random()*e));return s}}();class Jdt{name;parent;context;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];links;constructor(e,n,s,a,c,l){this.name=e,this.parent=n,this.context=s,this.startTime=c,this.kind=l,this.status={_tag:"Started",startTime:c},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:Ux(32),this.spanId=Ux(16),this.links=Array.from(a)}end(e,n){this.status={_tag:"Ended",endTime:e,exit:n,startTime:this.status.startTime}}attribute(e,n){this.attributes.set(e,n)}event(e,n,s){this.events.push([e,n,s??{}])}addLinks(e){this.links.push(...e)}}const Qdt=Gdt({span:(t,e,n,s,a,c)=>new Jdt(t,e,n,s,a,c),context:t=>t()}),Xdt=Q(MO(),zh(YO,fdt()),zh(FP,Pdt),zh(Bdt,Ydt(Math.random())),zh(Tdt,Adt()),zh(DP,Qdt)),fb=Xt(Symbol.for("effect/DefaultServices/currentServices"),()=>SP(Xdt)),Zdt=function(){const t=Symbol.for("effect/Data/Error/plainArgs");return{BaseEffectError:class extends KO{constructor(n){super(n?.message,n?.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,t,{value:n,enumerable:!1}))}toJSON(){return{...this[t],...this}}}}.BaseEffectError}(),Wdt=t=>{const e={BaseEffectError:class extends Zdt{_tag=t}};return e.BaseEffectError.prototype.name=t,e.BaseEffectError},tmt=Cm,emt=Tot;class nmt extends emt{}const rmt="Sequential",smt="Parallel",imt="ParallelN",UP={_tag:rmt},amt={_tag:smt},omt=t=>({_tag:imt,parallelism:t}),ww=UP,Ew=amt,Tw=omt;function cmt(t){return new no(t)}function umt(){return cmt(new Map)}const Lx=Symbol.for("effect/FiberRefs");class no{locals;[Lx]=Lx;constructor(e){this.locals=e}pipe(){return Ct(this,arguments)}}const lmt=(t,e,n,s=!1)=>{const a=t;let c=e,l=n,d=s,m;for(;m===void 0;)if(kn(c)&&kn(l)){const p=lr(c)[0],g=bc(c),b=lr(l)[0],S=lr(l)[1],v=bc(l);p.startTimeMillis<b.startTimeMillis?(l=v,d=!0):p.startTimeMillis>b.startTimeMillis?c=g:p.id<b.id?(l=v,d=!0):p.id>b.id?c=g:m=[S,d]}else m=[a.initial,!0];return m},fmt=F(3,(t,e,n)=>{const s=new Map(t.locals);return n.locals.forEach((a,c)=>{const l=a[0][1];if(!a[0][0][Pt](e)){if(!s.has(c)){if(qt(l,c.initial))return;s.set(c,[[e,c.join(c.initial,l)]]);return}const d=s.get(c),[m,p]=lmt(c,d,a);if(p){const g=c.diff(m,l),b=d[0][1],S=c.join(b,c.patch(g)(b));if(!qt(b,S)){let v;const E=d[0][0];E[Pt](e)?v=[[E,S],...d.slice(1)]:v=[[e,S],...d],s.set(c,v)}}}}),new no(s)}),hmt=F(2,(t,e)=>{const n=new Map;return LP(t,n,e),new no(n)}),LP=(t,e,n)=>{t.locals.forEach((s,a)=>{const c=s[0][1],l=a.patch(a.fork)(c);qt(c,l)?e.set(a,s):e.set(a,[[n,l],...s])})},jP=F(2,(t,e)=>{const n=new Map(t.locals);return n.delete(e),new no(n)}),dmt=F(2,(t,e)=>t.locals.has(e)?jt(lr(t.locals.get(e))[1]):St()),Vd=F(2,(t,e)=>Q(dmt(t,e),Rn(()=>e.initial))),Ow=F(2,(t,{fiberId:e,fiberRef:n,value:s})=>{if(t.locals.size===0)return new no(new Map([[n,[[e,s]]]]));const a=new Map(t.locals);return Rw(a,e,n,s),new no(a)}),Rw=(t,e,n,s)=>{const a=t.get(n)??[];let c;if(kn(a)){const[l,d]=lr(a);if(l[Pt](e)){if(qt(d,s))return;c=[[e,s],...a.slice(1)]}else c=[[e,s],...a]}else c=[[e,s]];t.set(n,c)},mmt=F(2,(t,{entries:e,forkAs:n})=>{if(t.locals.size===0)return new no(new Map(e));const s=new Map(t.locals);return n!==void 0&&LP(t,s,n),e.forEach(([a,c])=>{c.length===1?Rw(s,c[0][0],a,c[0][1]):c.forEach(([l,d])=>{Rw(s,l,a,d)})}),new no(s)}),pmt=Vd,gmt=mmt,ymt=umt,PP="Empty",qP="Add",BP="Remove",KP="Update",HP="AndThen",bmt={_tag:PP},_mt=(t,e)=>{const n=new Map(t.locals);let s=bmt;for(const[a,c]of e.locals.entries()){const l=lr(c)[1],d=n.get(a);if(d!==void 0){const m=lr(d)[1];qt(m,l)||(s=$v({_tag:KP,fiberRef:a,patch:a.diff(m,l)})(s))}else s=$v({_tag:qP,fiberRef:a,value:l})(s);n.delete(a)}for(const[a]of n.entries())s=$v({_tag:BP,fiberRef:a})(s);return s},$v=F(2,(t,e)=>({_tag:HP,first:t,second:e})),Smt=F(3,(t,e,n)=>{let s=n,a=ws(t);for(;kn(a);){const c=lr(a),l=bc(a);switch(c._tag){case PP:{a=l;break}case qP:{s=Ow(s,{fiberId:e,fiberRef:c.fiberRef,value:c.value}),a=l;break}case BP:{s=jP(s,c.fiberRef),a=l;break}case KP:{const d=Vd(s,c.fiberRef);s=Ow(s,{fiberId:e,fiberRef:c.fiberRef,value:c.fiberRef.patch(c.patch)(d)}),a=l;break}case HP:{a=Wy(c.first)(Wy(c.second)(l));break}}}return s}),vmt=_mt,$mt=Smt,sS="effect/FiberStatus",Ec=Symbol.for(sS),hb="Done",jx="Running",Px="Suspended",wmt=tn(`${sS}-${hb}`);class Emt{[Ec]=Ec;_tag=hb;[Kt](){return wmt}[Pt](e){return GO(e)&&e._tag===hb}}class Tmt{runtimeFlags;[Ec]=Ec;_tag=jx;constructor(e){this.runtimeFlags=e}[Kt](){return Q(mt(sS),Wt(mt(this._tag)),Wt(mt(this.runtimeFlags)),je(this))}[Pt](e){return GO(e)&&e._tag===jx&&this.runtimeFlags===e.runtimeFlags}}class Omt{runtimeFlags;blockingOn;[Ec]=Ec;_tag=Px;constructor(e,n){this.runtimeFlags=e,this.blockingOn=n}[Kt](){return Q(mt(sS),Wt(mt(this._tag)),Wt(mt(this.runtimeFlags)),Wt(mt(this.blockingOn)),je(this))}[Pt](e){return GO(e)&&e._tag===Px&&this.runtimeFlags===e.runtimeFlags&&qt(this.blockingOn,e.blockingOn)}}const Rmt=new Emt,kmt=t=>new Tmt(t),Mmt=(t,e)=>new Omt(t,e),GO=t=>Ut(t,Ec),Amt=t=>t._tag===hb,Cmt=Rmt,VP=kmt,Nmt=Mmt,xmt=Amt,Imt=bht,Fmt=_ht,Dmt=Sht,zmt=yP,Umt=bP,Lmt=_P,jmt=vht,Pmt=$ht,qmt=Q(Ql,q4(t=>t.ordinal)),Bmt=jot(qmt),Kmt=t=>{switch(t){case"All":return Imt;case"Debug":return Lmt;case"Error":return Dmt;case"Fatal":return Fmt;case"Info":return Umt;case"Trace":return jmt;case"None":return Pmt;case"Warning":return zmt}},Hmt=Symbol.for("effect/Micro"),db=Symbol.for("effect/Micro/MicroExit"),qx=Symbol.for("effect/Micro/MicroCause"),Vmt={_E:sn};class YP extends globalThis.Error{_tag;traces;[qx];constructor(e,n,s){const a=`MicroCause.${e}`;let c,l,d;if(n instanceof globalThis.Error){c=`(${a}) ${n.name}`,l=n.message;const m=l.split(`
`).length;d=n.stack?`(${a}) ${n.stack.split(`
`).slice(0,m+3).join(`
`)}`:`${c}: ${l}`}else c=a,l=Nl(n,0),d=`${c}: ${l}`;s.length>0&&(d+=`
    ${s.join(`
    `)}`),super(l),this._tag=e,this.traces=s,this[qx]=Vmt,this.name=c,this.stack=d}pipe(){return Ct(this,arguments)}toString(){return this.stack}[Ae](){return this.stack}}class Ymt extends YP{defect;constructor(e,n=[]){super("Die",e,n),this.defect=e}}const Gmt=(t,e=[])=>new Ymt(t,e);class Jmt extends YP{constructor(e=[]){super("Interrupt","interrupted",e)}}const Qmt=(t=[])=>new Jmt(t),Xmt=t=>t._tag==="Interrupt",Bx=Symbol.for("effect/Micro/MicroFiber"),Zmt={_A:sn,_E:sn};class Wmt{context;interruptible;[Bx];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(e,n=!0){this.context=e,this.interruptible=n,this[Bx]=Zmt}getRef(e){return qut(this.context,e)}addObserver(e){return this._exit?(e(this._exit),Hat):(this._observers.push(e),()=>{const n=this._observers.indexOf(e);n>=0&&this._observers.splice(n,1)})}_interrupted=!1;unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(WO))}unsafePoll(){return this._exit}evaluate(e){if(this._exit)return;if(this._yielded!==void 0){const a=this._yielded;this._yielded=void 0,a()}const n=this.runLoop(e);if(n===wg)return;const s=Kx.interruptChildren&&Kx.interruptChildren(this);if(s!==void 0)return this.evaluate(pb(s,()=>n));this._exit=n;for(let a=0;a<this._observers.length;a++)this._observers[a](n);this._observers.length=0}runLoop(e){let n=!1,s=e;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!n&&this.getRef(tR).shouldYield(this)){n=!0;const a=s;s=pb(spt,()=>a)}if(s=s[kw](this),s===wg){const a=this._yielded;return db in a?(this._yielded=void 0,a):wg}}}catch(a){return Ut(s,kw)?Mw(a):Mw(`MicroFiber.runLoop: Not a valid effect: ${String(s)}`)}}getCont(e){for(;;){const n=this._stack.pop();if(!n)return;const s=n[mb]&&n[mb](this);if(s)return{[e]:s};if(n[e])return n}}_yielded=void 0;yieldWith(e){return this._yielded=e,wg}children(){return this._children??=new Set}}const Kx=Xt("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),GP=Symbol.for("effect/Micro/identifier"),dn=Symbol.for("effect/Micro/args"),kw=Symbol.for("effect/Micro/evaluate"),Xl=Symbol.for("effect/Micro/successCont"),al=Symbol.for("effect/Micro/failureCont"),mb=Symbol.for("effect/Micro/ensureCont"),wg=Symbol.for("effect/Micro/Yield"),tpt={_A:sn,_E:sn,_R:sn},ept={...tmt,_op:"Micro",[Hmt]:tpt,pipe(){return Ct(this,arguments)},[Symbol.iterator](){return new v4(new km(this))},toJSON(){return{_id:"Micro",op:this[GP],...dn in this?{args:this[dn]}:void 0}},toString(){return On(this)},[Ae](){return On(this)}};function npt(t){return Mw("Micro.evaluate: Not implemented")}const iS=t=>({...ept,[GP]:t.op,[kw]:t.eval??npt,[Xl]:t.contA,[al]:t.contE,[mb]:t.ensure}),JO=t=>{const e=iS(t);return function(){const n=Object.create(e);return n[dn]=t.single===!1?arguments:arguments[0],n}},JP=t=>{const e={...iS(t),[db]:db,_tag:t.op,get[t.prop](){return this[dn]},toJSON(){return{_id:"MicroExit",_tag:t.op,[t.prop]:this[dn]}},[Pt](n){return opt(n)&&n._tag===t.op&&qt(this[dn],n[dn])},[Kt](){return je(this,Wt(tn(t.op))(mt(this[dn])))}};return function(n){const s=Object.create(e);return s[dn]=n,s[Xl]=void 0,s[al]=void 0,s[mb]=void 0,s}},QO=JP({op:"Success",prop:"value",eval(t){const e=t.getCont(Xl);return e?e[Xl](this[dn],t):t.yieldWith(this)}}),QP=JP({op:"Failure",prop:"cause",eval(t){let e=t.getCont(al);for(;Xmt(this[dn])&&e&&t.interruptible;)e=t.getCont(al);return e?e[al](this[dn],t):t.yieldWith(this)}}),rpt=JO({op:"Yield",eval(t){let e=!1;return t.getRef(tR).scheduleTask(()=>{e||t.evaluate(cpt)},this[dn]??0),t.yieldWith(()=>{e=!0})}}),spt=rpt(0),ipt=QO(void 0),XO=JO({op:"WithMicroFiber",eval(t){return this[dn](t)}}),pb=F(2,(t,e)=>{const n=Object.create(apt);return n[dn]=t,n[Xl]=e,n}),apt=iS({op:"OnSuccess",eval(t){return t._stack.push(this),this[dn]}}),opt=t=>Ut(t,db),XP=QO,ZO=QP,WO=ZO(Qmt()),Mw=t=>ZO(Gmt(t)),cpt=XP(void 0),upt="setImmediate"in globalThis?globalThis.setImmediate:t=>setTimeout(t,0);class ZP{tasks=[];running=!1;scheduleTask(e,n){this.tasks.push(e),this.running||(this.running=!0,upt(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){const e=this.tasks;this.tasks=[];for(let n=0,s=e.length;n<s;n++)e[n]()}shouldYield(e){return e.currentOpCount>=e.getRef(hpt)}flush(){for(;this.tasks.length>0;)this.runTasks()}}const lpt=F(2,(t,e)=>XO(n=>{const s=n.context;return n.context=e(s),ppt(t,()=>(n.context=s,ipt))})),fpt=F(2,(t,e)=>lpt(t,Rj(e)));class hpt extends kj()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class tR extends kj()("effect/Micro/currentScheduler",{defaultValue:()=>new ZP}){}const dpt=F(2,(t,e)=>{const n=Object.create(mpt);return n[dn]=t,n[Xl]=e.onSuccess,n[al]=e.onFailure,n}),mpt=iS({op:"OnSuccessAndFailure",eval(t){return t._stack.push(this),this[dn]}}),ppt=F(2,(t,e)=>ypt(n=>dpt(n(t),{onFailure:s=>pb(e(ZO(s)),()=>QP(s)),onSuccess:s=>pb(e(XP(s)),()=>QO(s))}))),WP=JO({op:"SetInterruptible",ensure(t){if(t.interruptible=this[dn],t._interrupted&&t.interruptible)return()=>WO}}),gpt=t=>XO(e=>e.interruptible?t:(e.interruptible=!0,e._stack.push(WP(!1)),e._interrupted?WO:t)),ypt=t=>XO(e=>e.interruptible?(e.interruptible=!1,e._stack.push(WP(!0)),t(gpt)):t(sn)),bpt=(t,e)=>{const n=new Wmt(tR.context(new ZP));return n.evaluate(t),n};class t6{buckets=[];scheduleTask(e,n){const s=this.buckets.length;let a,c=0;for(;c<s&&this.buckets[c][0]<=n;c++)a=this.buckets[c];a&&a[0]===n?a[1].push(e):c===s?this.buckets.push([n,[e]]):this.buckets.splice(c,0,[n,[e]])}}class _pt{maxNextTickBeforeTimer;running=!1;tasks=new t6;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[s,a]of n)for(let c=0;c<a.length;c++)a[c]();this.tasks.buckets.length===0?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(vP)?e.getFiberRef(nS):!1}scheduleTask(e,n){this.tasks.scheduleTask(e,n),this.running||(this.running=!0,this.starve())}}const e6=Xt(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new _pt(2048));class n6{tasks=new t6;deferred=!1;scheduleTask(e,n){this.deferred?e6.scheduleTask(e,n):this.tasks.scheduleTask(e,n)}shouldYield(e){return e.currentOpCount>e.getFiberRef(vP)?e.getFiberRef(nS):!1}flush(){for(;this.tasks.buckets.length>0;){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[n,s]of e)for(let a=0;a<s.length;a++)s[a]()}this.deferred=!0}}const r6=Xt(Symbol.for("effect/FiberRef/currentScheduler"),()=>Mr(e6)),s6=Xt(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Mr(new Map)),Hx=(t,e,n,s)=>{switch(t){case void 0:return e();case"unbounded":return n();case"inherit":return BO(Iht,a=>a==="unbounded"?n():a>1?s(a):e());default:return t>1?s(t):e()}},i6=t=>t.replace(/[\s="]/g,"_"),Spt=t=>e=>`${i6(e.label)}=${t-e.startTime}ms`,a6="effect/MetricLabel",Aw=Symbol.for(a6);class vpt{key;value;[Aw]=Aw;_hash;constructor(e,n){this.key=e,this.value=n,this._hash=tn(a6+this.key+this.value)}[Kt](){return this._hash}[Pt](e){return wpt(e)&&this.key===e.key&&this.value===e.value}pipe(){return Ct(this,arguments)}}const $pt=(t,e)=>new vpt(t,e),wpt=t=>Ut(t,Aw),Ept=Kht,eR="InterruptSignal",nR="Stateful",rR="Resume",sR="YieldNow",wv=t=>({_tag:eR,cause:t}),ey=t=>({_tag:nR,onFiber:t}),Nu=t=>({_tag:rR,effect:t}),Tpt=()=>({_tag:sR}),Opt="effect/FiberScope",gb=Symbol.for(Opt);class Rpt{[gb]=gb;fiberId=Vl;roots=new Set;add(e,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}}class kpt{fiberId;parent;[gb]=gb;constructor(e,n){this.fiberId=e,this.parent=n}add(e,n){this.parent.tell(ey(s=>{s.addChild(n),n.addObserver(()=>{s.removeChild(n)})}))}}const Mpt=t=>new kpt(t.id(),t),iR=Xt(Symbol.for("effect/FiberScope/Global"),()=>new Rpt),Apt="effect/Fiber",Cpt=Symbol.for(Apt),Npt={_E:t=>t,_A:t=>t},xpt="effect/Fiber",Ipt=Symbol.for(xpt),o6=t=>pP(lP(t.await),t.inheritAll);({...Nm});const Mo="effect/FiberCurrent",Fpt="effect/Logger",Dpt=Symbol.for(Fpt),zpt={_Message:t=>t,_Output:t=>t},aR=t=>({[Dpt]:zpt,log:t,pipe(){return Ct(this,arguments)}}),Upt=/^[^\s"=]*$/,Lpt=(t,e)=>({annotations:n,cause:s,date:a,fiberId:c,logLevel:l,message:d,spans:m})=>{const p=E=>E.match(Upt)?E:t(E),g=(E,D)=>`${i6(E)}=${p(D)}`,b=(E,D)=>" "+g(E,D);let S=g("timestamp",a.toISOString());S+=b("level",l.label),S+=b("fiber",Fj(c));const v=Zot(d);for(let E=0;E<v.length;E++)S+=b("message",Nl(v[E],e));lut(s)||(S+=b("cause",Sf(s,{renderErrorCause:!0})));for(const E of m)S+=" "+Spt(a.getTime())(E);for(const[E,D]of n)S+=b(E,Nl(D,e));return S},jpt=t=>`"${t.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,Ppt=aR(Lpt(jpt)),qpt=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null;qpt&&process.stdout.isTTY;const c6="effect/MetricBoundaries",Cw=Symbol.for(c6);class Bpt{values;[Cw]=Cw;constructor(e){this.values=e,this._hash=Q(tn(c6),Wt(Mm(this.values)))}_hash;[Kt](){return this._hash}[Pt](e){return Kpt(e)&&qt(this.values,e.values)}pipe(){return Ct(this,arguments)}}const Kpt=t=>Ut(t,Cw),Hpt=t=>{const e=Q(t,K4(Vr(Number.POSITIVE_INFINITY)),gct);return new Bpt(e)},Vpt=t=>Q(Xot(t.count-1,e=>t.start*Math.pow(t.factor,e)),U_,Hpt),Ypt="effect/MetricKeyType",u6=Symbol.for(Ypt),l6="effect/MetricKeyType/Counter",Nw=Symbol.for(l6),Gpt="effect/MetricKeyType/Frequency",Jpt=Symbol.for(Gpt),Qpt="effect/MetricKeyType/Gauge",Xpt=Symbol.for(Qpt),f6="effect/MetricKeyType/Histogram",xw=Symbol.for(f6),Zpt="effect/MetricKeyType/Summary",Wpt=Symbol.for(Zpt),h6={_In:t=>t,_Out:t=>t};class tgt{incremental;bigint;[u6]=h6;[Nw]=Nw;constructor(e,n){this.incremental=e,this.bigint=n,this._hash=tn(l6)}_hash;[Kt](){return this._hash}[Pt](e){return d6(e)}pipe(){return Ct(this,arguments)}}class egt{boundaries;[u6]=h6;[xw]=xw;constructor(e){this.boundaries=e,this._hash=Q(tn(f6),Wt(mt(this.boundaries)))}_hash;[Kt](){return this._hash}[Pt](e){return m6(e)&&qt(this.boundaries,e.boundaries)}pipe(){return Ct(this,arguments)}}const ngt=t=>new tgt(t?.incremental??!1,t?.bigint??!1),rgt=t=>new egt(t),d6=t=>Ut(t,Nw),sgt=t=>Ut(t,Jpt),igt=t=>Ut(t,Xpt),m6=t=>Ut(t,xw),agt=t=>Ut(t,Wpt),ogt="effect/MetricKey",p6=Symbol.for(ogt),cgt={_Type:t=>t},ugt=z_(qt);class oR{name;keyType;description;tags;[p6]=cgt;constructor(e,n,s,a=[]){this.name=e,this.keyType=n,this.description=s,this.tags=a,this._hash=Q(tn(this.name+this.description),Wt(mt(this.keyType)),Wt(Mm(this.tags)))}_hash;[Kt](){return this._hash}[Pt](e){return lgt(e)&&this.name===e.name&&qt(this.keyType,e.keyType)&&qt(this.description,e.description)&&ugt(this.tags,e.tags)}pipe(){return Ct(this,arguments)}}const lgt=t=>Ut(t,p6),fgt=(t,e)=>new oR(t,ngt(e),I_(e?.description)),hgt=(t,e,n)=>new oR(t,rgt(e),I_(n)),dgt=F(2,(t,e)=>e.length===0?t:new oR(t.name,t.keyType,t.description,Qg(t.tags,e))),Vx=Symbol.for("effect/MutableHashMap"),mgt={[Vx]:Vx,[Symbol.iterator](){return new cR(this)},toString(){return On(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(mn)}},[Ae](){return this.toJSON()},pipe(){return Ct(this,arguments)}};class cR{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const e=this.referentialIterator.next();return e.done?(this.bucketIterator=new pgt(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new cR(this.self)}}class pgt{backing;constructor(e){this.backing=e}currentBucket;next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}const ggt=()=>{const t=Object.create(mgt);return t.referential=new Map,t.buckets=new Map,t.bucketsSize=0,t},Co=F(2,(t,e)=>{if(Jy(e)===!1)return t.referential.has(e)?jt(t.referential.get(e)):St();const n=e[Kt](),s=t.buckets.get(n);return s===void 0?St():ygt(t,s,e)}),ygt=(t,e,n,s=!1)=>{for(let a=0,c=e.length;a<c;a++)if(n[Pt](e[a][0])){const l=e[a][1];return s&&(e.splice(a,1),t.bucketsSize--),jt(l)}return St()},Uh=F(2,(t,e)=>tr(Co(t,e))),Lh=F(3,(t,e,n)=>{if(Jy(e)===!1)return t.referential.set(e,n),t;const s=e[Kt](),a=t.buckets.get(s);return a===void 0?(t.buckets.set(s,[[e,n]]),t.bucketsSize++,t):(bgt(t,a,e),a.push([e,n]),t.bucketsSize++,t)}),bgt=(t,e,n)=>{for(let s=0,a=e.length;s<a;s++)if(n[Pt](e[s][0])){e.splice(s,1),t.bucketsSize--;return}},_gt="effect/MetricState",Bm=Symbol.for(_gt),g6="effect/MetricState/Counter",Iw=Symbol.for(g6),y6="effect/MetricState/Frequency",Fw=Symbol.for(y6),b6="effect/MetricState/Gauge",Dw=Symbol.for(b6),_6="effect/MetricState/Histogram",zw=Symbol.for(_6),S6="effect/MetricState/Summary",Uw=Symbol.for(S6),Km={_A:t=>t};class Sgt{count;[Bm]=Km;[Iw]=Iw;constructor(e){this.count=e}[Kt](){return Q(mt(g6),Wt(mt(this.count)),je(this))}[Pt](e){return Cgt(e)&&this.count===e.count}pipe(){return Ct(this,arguments)}}const vgt=z_(qt);class $gt{occurrences;[Bm]=Km;[Fw]=Fw;constructor(e){this.occurrences=e}_hash;[Kt](){return Q(tn(y6),Wt(Mm(an(this.occurrences.entries()))),je(this))}[Pt](e){return Ngt(e)&&vgt(an(this.occurrences.entries()),an(e.occurrences.entries()))}pipe(){return Ct(this,arguments)}}class wgt{value;[Bm]=Km;[Dw]=Dw;constructor(e){this.value=e}[Kt](){return Q(mt(b6),Wt(mt(this.value)),je(this))}[Pt](e){return xgt(e)&&this.value===e.value}pipe(){return Ct(this,arguments)}}class Egt{buckets;count;min;max;sum;[Bm]=Km;[zw]=zw;constructor(e,n,s,a,c){this.buckets=e,this.count=n,this.min=s,this.max=a,this.sum=c}[Kt](){return Q(mt(_6),Wt(mt(this.buckets)),Wt(mt(this.count)),Wt(mt(this.min)),Wt(mt(this.max)),Wt(mt(this.sum)),je(this))}[Pt](e){return Igt(e)&&qt(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return Ct(this,arguments)}}class Tgt{error;quantiles;count;min;max;sum;[Bm]=Km;[Uw]=Uw;constructor(e,n,s,a,c,l){this.error=e,this.quantiles=n,this.count=s,this.min=a,this.max=c,this.sum=l}[Kt](){return Q(mt(S6),Wt(mt(this.error)),Wt(mt(this.quantiles)),Wt(mt(this.count)),Wt(mt(this.min)),Wt(mt(this.max)),Wt(mt(this.sum)),je(this))}[Pt](e){return Fgt(e)&&this.error===e.error&&qt(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return Ct(this,arguments)}}const Ogt=t=>new Sgt(t),Rgt=t=>new $gt(t),kgt=t=>new wgt(t),Mgt=t=>new Egt(t.buckets,t.count,t.min,t.max,t.sum),Agt=t=>new Tgt(t.error,t.quantiles,t.count,t.min,t.max,t.sum),Cgt=t=>Ut(t,Iw),Ngt=t=>Ut(t,Fw),xgt=t=>Ut(t,Dw),Igt=t=>Ut(t,zw),Fgt=t=>Ut(t,Uw),Dgt="effect/MetricHook",zgt=Symbol.for(Dgt),Ugt={_In:t=>t,_Out:t=>t},Hm=t=>({[zgt]:Ugt,pipe(){return Ct(this,arguments)},...t}),Yx=BigInt(0),Lgt=t=>{let e=t.keyType.bigint?Yx:0;const n=t.keyType.incremental?t.keyType.bigint?a=>a>=Yx:a=>a>=0:a=>!0,s=a=>{n(a)&&(e=e+a)};return Hm({get:()=>Ogt(e),update:s,modify:s})},jgt=t=>{const e=new Map;for(const s of t.keyType.preregisteredWords)e.set(s,0);const n=s=>{const a=e.get(s)??0;e.set(s,a+1)};return Hm({get:()=>Rgt(e),update:n,modify:n})},Pgt=(t,e)=>{let n=e;return Hm({get:()=>kgt(n),update:s=>{n=s},modify:s=>{n=n+s}})},qgt=t=>{const e=t.keyType.boundaries.values,n=e.length,s=new Uint32Array(n+1),a=new Float32Array(n);let c=0,l=0,d=Number.MAX_VALUE,m=Number.MIN_VALUE;Q(e,Ud(Ql),rl((b,S)=>{a[S]=b}));const p=b=>{let S=0,v=n;for(;S!==v;){const E=Math.floor(S+(v-S)/2),D=a[E];b<=D?v=E:S=E,v===S+1&&(b<=a[S]?v=S:S=v)}s[S]=s[S]+1,c=c+1,l=l+b,b<d&&(d=b),b>m&&(m=b)},g=()=>{const b=D_(n);let S=0;for(let v=0;v<n;v++){const E=a[v],D=s[v];S=S+D,b[v]=[E,S]}return b};return Hm({get:()=>Mgt({buckets:g(),count:c,min:d,max:m,sum:l}),update:p,modify:p})},Bgt=t=>{const{error:e,maxAge:n,maxSize:s,quantiles:a}=t.keyType,c=Q(a,Ud(Ql)),l=D_(s);let d=0,m=0,p=0,g=0,b=0;const S=E=>{const D=[];let C=0;for(;C!==s-1;){const N=l[C];if(N!=null){const[q,A]=N,P=fw(E-q);ult(P,Cj)&&clt(P,n)&&D.push(A)}C=C+1}return Kgt(e,c,Ud(D,Ql))},v=(E,D)=>{if(s>0){d=d+1;const C=d%s;l[C]=[D,E]}g=m===0?E:Math.min(g,E),b=m===0?E:Math.max(b,E),m=m+1,p=p+E};return Hm({get:()=>Agt({error:e,quantiles:S(Date.now()),count:m,min:g,max:b,sum:p}),update:([E,D])=>v(E,D),modify:([E,D])=>v(E,D)})},Kgt=(t,e,n)=>{const s=n.length;if(!kn(e))return Il();const a=e[0],c=e.slice(1),l=Gx(t,s,St(),0,a,n),d=ws(l);return c.forEach(m=>{d.push(Gx(t,s,l.value,l.consumed,m,l.rest))}),rl(d,m=>[m.quantile,m.value])},Gx=(t,e,n,s,a,c)=>{let l=t,d=e,m=n,p=s,g=a,b=c,S=t,v=e,E=n,D=s,C=a,N=c;for(;;){if(!kn(b))return{quantile:g,value:St(),consumed:p,rest:[]};if(g===1)return{quantile:g,value:jt(Y4(b)),consumed:p+b.length,rest:[]};const q=lr(b),A=cct(b,B=>B===q),P=g*d,M=l/2*P,U=p+A[0].length,K=Math.abs(U-P);if(U<P-M){S=l,v=d,E=ld(b),D=U,C=g,N=A[1],l=S,d=v,m=E,p=D,g=C,b=N;continue}if(U>P+M){const B=Le(m)?jt(q):m;return{quantile:g,value:B,consumed:p,rest:b}}switch(m._tag){case"None":{S=l,v=d,E=ld(b),D=U,C=g,N=A[1],l=S,d=v,m=E,p=D,g=C,b=N;continue}case"Some":{const B=Math.abs(P-m.value);if(K<B){S=l,v=d,E=ld(b),D=U,C=g,N=A[1],l=S,d=v,m=E,p=D,g=C,b=N;continue}return{quantile:g,value:jt(m.value),consumed:p,rest:b}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},Hgt="effect/MetricPair",Vgt=Symbol.for(Hgt),Ygt={_Type:t=>t},Ggt=(t,e)=>({[Vgt]:Ygt,metricKey:t,metricState:e,pipe(){return Ct(this,arguments)}}),Jgt="effect/MetricRegistry",Jx=Symbol.for(Jgt);class Qgt{[Jx]=Jx;map=ggt();snapshot(){const e=[];for(const[n,s]of this.map)e.push(Ggt(n,s.get()));return e}get(e){const n=Q(this.map,Co(e),Ws);if(n==null){if(d6(e.keyType))return this.getCounter(e);if(igt(e.keyType))return this.getGauge(e);if(sgt(e.keyType))return this.getFrequency(e);if(m6(e.keyType))return this.getHistogram(e);if(agt(e.keyType))return this.getSummary(e);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(e){let n=Q(this.map,Co(e),Ws);if(n==null){const s=Lgt(e);Q(this.map,Uh(e))||Q(this.map,Lh(e,s)),n=s}return n}getFrequency(e){let n=Q(this.map,Co(e),Ws);if(n==null){const s=jgt(e);Q(this.map,Uh(e))||Q(this.map,Lh(e,s)),n=s}return n}getGauge(e){let n=Q(this.map,Co(e),Ws);if(n==null){const s=Pgt(e,e.keyType.bigint?BigInt(0):0);Q(this.map,Uh(e))||Q(this.map,Lh(e,s)),n=s}return n}getHistogram(e){let n=Q(this.map,Co(e),Ws);if(n==null){const s=qgt(e);Q(this.map,Uh(e))||Q(this.map,Lh(e,s)),n=s}return n}getSummary(e){let n=Q(this.map,Co(e),Ws);if(n==null){const s=Bgt(e);Q(this.map,Uh(e))||Q(this.map,Lh(e,s)),n=s}return n}}const Xgt=()=>new Qgt,Zgt="effect/Metric",Wgt=Symbol.for(Zgt),tyt={_Type:t=>t,_In:t=>t,_Out:t=>t},Qx=Xt(Symbol.for("effect/Metric/globalMetricRegistry"),()=>Xgt()),v6=function(t,e,n,s){const a=Object.assign(c=>mht(c,l=>syt(a,l)),{[Wgt]:tyt,keyType:t,unsafeUpdate:e,unsafeValue:n,unsafeModify:s,register(){return this.unsafeValue([]),this},pipe(){return Ct(this,arguments)}});return a},aS=(t,e)=>$6(fgt(t,e)),$6=t=>{let e;const n=new WeakMap,s=a=>{if(a.length===0)return e!==void 0||(e=Qx.get(t)),e;let c=n.get(a);return c!==void 0||(c=Qx.get(dgt(t,a)),n.set(a,c)),c};return v6(t.keyType,(a,c)=>s(c).update(a),a=>s(a).get(),(a,c)=>s(c).modify(a))},eyt=(t,e,n)=>$6(hgt(t,e,n)),nyt=F(3,(t,e,n)=>ryt(t,[$pt(e,n)])),ryt=F(2,(t,e)=>v6(t.keyType,(n,s)=>t.unsafeUpdate(n,Qg(e,s)),n=>t.unsafeValue(Qg(e,n)),(n,s)=>t.unsafeModify(n,Qg(e,s)))),syt=F(2,(t,e)=>BO(vw,n=>xt(()=>t.unsafeUpdate(e,n))));({...hO});const iyt=F(2,(t,e)=>BO(s6,n=>xt(()=>{if(n.has(t)){const s=n.get(t);s.state.completed||(s.state.completed=!0,OP(s.result,e))}}))),ayt="effect/Supervisor",oS=Symbol.for(ayt),uR={_T:t=>t};class cS{underlying;value0;[oS]=uR;constructor(e,n){this.underlying=e,this.value0=n}get value(){return this.value0}onStart(e,n,s,a){this.underlying.onStart(e,n,s,a)}onEnd(e,n){this.underlying.onEnd(e,n)}onEffect(e,n){this.underlying.onEffect(e,n)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new cS(this,Q(this.value,Tr(e)))}zip(e){return new uS(this,e)}}class uS{left;right;_tag="Zip";[oS]=uR;constructor(e,n){this.left=e,this.right=n}get value(){return mP(this.left.value,this.right.value)}onStart(e,n,s,a){this.left.onStart(e,n,s,a),this.right.onStart(e,n,s,a)}onEnd(e,n){this.left.onEnd(e,n),this.right.onEnd(e,n)}onEffect(e,n){this.left.onEffect(e,n),this.right.onEffect(e,n)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new cS(this,Q(this.value,Tr(e)))}zip(e){return new uS(this,e)}}const w6=t=>Ut(t,oS)&&_4(t,"Zip");class oyt{effect;[oS]=uR;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,n,s,a){}onEnd(e,n){}onEffect(e,n){}onSuspend(e){}onResume(e){}map(e){return new cS(this,Q(this.value,Tr(e)))}zip(e){return new uS(this,e)}onRun(e,n){return e()}}const cyt=t=>new oyt(t),lS=Xt("effect/Supervisor/none",()=>cyt(js)),uyt=vf,E6="Empty",T6="AddSupervisor",O6="RemoveSupervisor",R6="AndThen",hd={_tag:E6},ny=(t,e)=>({_tag:R6,first:t,second:e}),lyt=(t,e)=>fyt(e,Vr(t)),fyt=(t,e)=>{let n=t,s=e;for(;Dl(s);){const a=zl(s);switch(a._tag){case E6:{s=zo(s);break}case T6:{n=n.zip(a.supervisor),s=zo(s);break}case O6:{n=Lw(n,a.supervisor),s=zo(s);break}case R6:{s=Us(a.first)(Us(a.second)(zo(s)));break}}}return n},Lw=(t,e)=>qt(t,e)?lS:w6(t)?Lw(t.left,e).zip(Lw(t.right,e)):t,yb=t=>qt(t,lS)?Sc():w6(t)?Q(yb(t.left),Pd(yb(t.right))):TO(t),hyt=(t,e)=>{if(qt(t,e))return hd;const n=yb(t),s=yb(e),a=Q(s,ix(n),eb(hd,(l,d)=>ny(l,{_tag:T6,supervisor:d}))),c=Q(n,ix(s),eb(hd,(l,d)=>ny(l,{_tag:O6,supervisor:d})));return ny(a,c)},dyt=uyt({empty:hd,patch:lyt,combine:ny,diff:hyt}),myt=aS("effect_fiber_started",{incremental:!0}),Xx=aS("effect_fiber_active"),pyt=aS("effect_fiber_successes",{incremental:!0}),gyt=aS("effect_fiber_failures",{incremental:!0}),yyt=nyt(eyt("effect_fiber_lifetimes",Vpt({start:.5,factor:2,count:35})),"time_unit","milliseconds"),jh="Continue",byt="Done",Zx="Yield",_yt={_E:t=>t,_A:t=>t},Eg=t=>{throw new Error(`BUG: FiberRuntime - ${Nl(t)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},Ii=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Fi=Xt("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Ph={[Qy]:(t,e,n)=>cr(()=>e.effect_instruction_i1(n)),OnStep:(t,e,n)=>en(en(n)),[Xy]:(t,e,n)=>cr(()=>e.effect_instruction_i2(n)),[lO]:(t,e,n)=>(t.patchRuntimeFlags(t.currentRuntimeFlags,e.patch),Da(t.currentRuntimeFlags)&&t.isInterrupted()?be(t.getInterruptedCause()):en(n)),[Zy]:(t,e,n)=>(cr(()=>e.effect_instruction_i2(n)),cr(()=>e.effect_instruction_i0())?(t.pushStack(e),cr(()=>e.effect_instruction_i1())):js),[Yg]:(t,e,n)=>{const s=cr(()=>e.effect_instruction_i0.next(n));return s.done?en(s.value):(t.pushStack(e),uot(s.value))}},Syt={[eR]:(t,e,n,s)=>(t.processNewInterruptSignal(s.cause),Da(e)?be(s.cause):n),[rR]:(t,e,n,s)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[nR]:(t,e,n,s)=>(s.onFiber(t,VP(e)),n),[sR]:(t,e,n,s)=>Mt(PO(),()=>n)},vyt=t=>X_(Lft(t),e=>Xo(Wft(e),([n,s])=>{const a=new Map,c=[];for(const d of s){c.push(Jo(d));for(const m of d)a.set(m.request,m)}const l=c.flat();return eS(Fyt(n.runAll(c),l,()=>l.forEach(d=>{d.listeners.interrupted=!0})),s6,a)},!1,!1)),$yt=fO();class k6 extends nmt{[Cpt]=Npt;[Ipt]=_yt;_fiberRefs;_fiberId;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_isYielding=!1;currentRuntimeFlags;currentOpCount=0;currentSupervisor;currentScheduler;currentTracer;currentSpan;currentContext;currentDefaultServices;constructor(e,n,s){if(super(),this.currentRuntimeFlags=s,this._fiberId=e,this._fiberRefs=n,yx(s)){const a=this.getFiberRef(vw);myt.unsafeUpdate(1,a),Xx.unsafeUpdate(1,a)}this.refreshRefCache()}commit(){return o6(this)}id(){return this._fiberId}resume(e){this.tell(Nu(e))}get status(){return this.ask((e,n)=>n)}get runtimeFlags(){return this.ask((e,n)=>xmt(n)?e.currentRuntimeFlags:n.runtimeFlags)}scope(){return Mpt(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef($g)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return fn(()=>{const n=Jht(this._fiberId);return this.tell(ey((s,a)=>{OP(n,xt(()=>e(s,a)))})),TP(n)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return Hd(e=>{const n=s=>e(Me(s));return this.tell(ey((s,a)=>{s._exitValue!==null?n(this._exitValue):s.addObserver(n)})),xt(()=>this.tell(ey((s,a)=>{s.removeObserver(n)})))},this.id())}get inheritAll(){return Yr((e,n)=>{const s=e.id(),a=e.getFiberRefs(),c=n.runtimeFlags,l=this.getFiberRefs(),d=fmt(a,s,l);e.setFiberRefs(d);const m=e.getFiberRef(rI),p=Q(Wg(c,m),_x($f),_x(_w));return ght(p)})}get poll(){return xt(()=>I_(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return xt(()=>this.tell(wv(La(e))))}unsafeInterruptAsFork(e){this.tell(wv(La(e)))}addObserver(e){this._exitValue!==null?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(n=>n!==e)}getFiberRefs(){return this.setFiberRef(rI,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=jP(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,n){this._fiberRefs=Ow(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:n}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(fb),this.currentTracer=this.currentDefaultServices.unsafeMap.get(DP.key),this.currentSupervisor=this.getFiberRef(Iyt),this.currentScheduler=this.getFiberRef(r6),this.currentContext=this.getFiberRef(Pm),this.currentSpan=this.currentContext.unsafeMap.get(zP.key)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}transferChildren(e){const n=this._children;if(this._children=null,n!==null&&n.size>0)for(const s of n)s._exitValue===null&&e.add(this.currentRuntimeFlags,s)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let n=jh;const s=globalThis[Mo];globalThis[Mo]=this;try{for(;n===jh;)n=this._queue.length===0?byt:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[Mo]=s}this._queue.length>0&&!this._running?(this._running=!0,n===Zx?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(nS))}drainQueueWhileRunning(e,n){let s=n;for(;this._queue.length>0;){const a=this._queue.splice(0,1)[0];s=Syt[a._tag](this,e,s,a)}return s}isInterrupted(){return!hut(this.getFiberRef($g))}addInterruptedCause(e){const n=this.getFiberRef($g);this.setFiberRef($g,ls(n,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let e=!1;for(const n of this._children)n.tell(wv(La(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const e=this._children.values();this._children=null;let n=!1;return jO({while:()=>!n,body:()=>{const a=e.next();return a.done?xt(()=>{n=!0}):jm(a.value.await)},step:()=>{}})}return null}reportExitValue(e){if(yx(this.currentRuntimeFlags)){const n=this.getFiberRef(vw),s=this.id().startTimeMillis,a=Date.now();switch(yyt.unsafeUpdate(a-s,n),Xx.unsafeUpdate(-1,n),e._tag){case Ds:{pyt.unsafeUpdate(1,n);break}case Fs:{gyt.unsafeUpdate(1,n);break}}}if(e._tag==="Failure"){const n=this.getFiberRef(Dht);!OO(e.cause)&&n._tag==="Some"&&this.log("Fiber terminated with an unhandled error",e.cause,n)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let n=this._observers.length-1;n>=0;n--)this._observers[n](e);this._observers=[]}getLoggers(){return this.getFiberRef(Ryt)}log(e,n,s){const a=tr(s)?s.value:this.getFiberRef(Cht),c=this.getFiberRef(wyt);if(Bmt(c,a))return;const l=this.getFiberRef(Nht),d=this.getFiberRef(Aht),m=this.getLoggers(),p=this.getFiberRefs();if(dj(m)>0){const g=Tj(this.getFiberRef(fb),YO),b=new Date(g.unsafeCurrentTimeMillis());mot(p,()=>{for(const S of m)S.log({fiberId:this.id(),logLevel:a,message:e,cause:n,context:p,spans:l,annotations:d,date:b})})}}evaluateMessageWhileSuspended(e){switch(e._tag){case sR:return Zx;case eR:return this.processNewInterruptSignal(e.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(be(e.cause)),this._asyncInterruptor=null),jh;case rR:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),jh;case nR:return e.onFiber(this,this._exitValue!==null?Cmt:Nmt(this.currentRuntimeFlags,this._asyncBlockingOn)),jh;default:return Eg(e)}}evaluateEffect(e){this.currentSupervisor.onResume(this);try{let n=Da(this.currentRuntimeFlags)&&this.isInterrupted()?be(this.getInterruptedCause()):e;for(;n!==null;){const s=n,a=this.runLoop(s);if(a===Ii){const c=Fi.currentOp;Fi.currentOp=null,c._op===Gg?Ift(this.currentRuntimeFlags)?(this.tell(Tpt()),this.tell(Nu(Uo)),n=null):n=Uo:c._op===ud&&(n=null)}else{this.currentRuntimeFlags=Q(this.currentRuntimeFlags,Fft(_w));const c=this.interruptAllChildren();c!==null?n=Mt(c,()=>a):(this._queue.length===0?this.setExitValue(a):this.tell(Nu(a)),n=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(e){if(this._running)this.tell(Nu(e));else{this._running=!0;const n=globalThis[Mo];globalThis[Mo]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[Mo]=n,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(Nu(e))}patchRuntimeFlags(e,n){const s=ty(e,n);return globalThis[Mo]=this,this.currentRuntimeFlags=s,s}initiateAsync(e,n){let s=!1;const a=c=>{s||(s=!0,this.tell(Nu(c)))};Da(e)&&(this._asyncInterruptor=a);try{n(a)}catch(c){a(Ls(ci(c)))}}pushStack(e){this._stack.push(e),e._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const e=this._stack.pop();if(e)return e._op==="OnStep"&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==mv)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==Qy&&e._op!==Zy&&e._op!==Yg)return e;e=this.popStack()}}[got](e){return xt(()=>Oj(this.currentContext,e))}Left(e){return vr(e.left)}None(e){return vr(new wP)}Right(e){return en(e.right)}Some(e){return en(e.value)}Micro(e){return ob(n=>{let s=n;const a=bpt(fpt(e,this.currentContext));return a.addObserver(c=>{if(c._tag==="Success")return s(en(c.value));switch(c.cause._tag){case"Interrupt":return s(be(La(Vl)));case"Fail":return s(vr(c.cause.error));case"Die":return s(vx(c.cause.defect))}}),ob(c=>{s=l=>{c(js)},a.unsafeInterrupt()})})}[R4](e){const n=cr(()=>e.effect_instruction_i0()),s=this.getNextSuccessCont();return s!==void 0?(s._op in Ph||Eg(s),Ph[s._op](this,s,n)):(Fi.currentOp=en(n),Ii)}[Ds](e){const n=e,s=this.getNextSuccessCont();return s!==void 0?(s._op in Ph||Eg(s),Ph[s._op](this,s,n.effect_instruction_i0)):(Fi.currentOp=n,Ii)}[Fs](e){const n=e.effect_instruction_i0,s=this.getNextFailCont();if(s!==void 0)switch(s._op){case mv:case Xy:return Da(this.currentRuntimeFlags)&&this.isInterrupted()?be(ax(n)):cr(()=>s.effect_instruction_i1(n));case"OnStep":return Da(this.currentRuntimeFlags)&&this.isInterrupted()?be(ax(n)):en(be(n));case lO:return this.patchRuntimeFlags(this.currentRuntimeFlags,s.patch),Da(this.currentRuntimeFlags)&&this.isInterrupted()?be(ls(n,this.getInterruptedCause())):be(n);default:Eg(s)}else return Fi.currentOp=be(n),Ii}[k4](e){return cr(()=>e.effect_instruction_i0(this,VP(this.currentRuntimeFlags)))}Blocked(e){const n=this.getFiberRefs(),s=this.currentRuntimeFlags;if(this._steps.length>0){const a=[],c=this._steps[this._steps.length-1];let l=this.popStack();for(;l&&l._op!=="OnStep";)a.push(l),l=this.popStack();this.setFiberRefs(c.refs),this.currentRuntimeFlags=c.flags;const d=vmt(c.refs,n),m=Wg(c.flags,s);return en(rP(e.effect_instruction_i0,Yr(p=>{for(;a.length>0;)p.pushStack(a.pop());return p.setFiberRefs($mt(p.id(),p.getFiberRefs())(d)),p.currentRuntimeFlags=ty(m)(p.currentRuntimeFlags),e.effect_instruction_i1})))}return W_(a=>Mt(M6(iht(e.effect_instruction_i0)),()=>a(e.effect_instruction_i1)))}RunBlocked(e){return vyt(e.effect_instruction_i0)}[Am](e){const n=e.effect_instruction_i0,s=this.currentRuntimeFlags,a=ty(s,n);if(Da(a)&&this.isInterrupted())return be(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,n),e.effect_instruction_i1){const c=Wg(a,s);return this.pushStack(new aht(c,e)),cr(()=>e.effect_instruction_i1(s))}else return Uo}[Qy](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[mv](e){return this.pushStack(e),e.effect_instruction_i0}[Xy](e){return this.pushStack(e),e.effect_instruction_i0}[ud](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,e.effect_instruction_i0),Fi.currentOp=e,Ii}[Gg](e){return this._isYielding=!1,Fi.currentOp=e,Ii}[Zy](e){const n=e.effect_instruction_i0,s=e.effect_instruction_i1;return n()?(this.pushStack(e),s()):Uo}[Yg](e){return Ph[Yg](this,e,void 0)}[x_](e){return cr(()=>e.commit())}runLoop(e){let n=e;for(this.currentOpCount=0;;){if((this.currentRuntimeFlags&xft)!==0&&this.currentSupervisor.onEffect(this,n),this._queue.length>0&&(n=this.drainQueueWhileRunning(this.currentRuntimeFlags,n)),!this._isYielding){this.currentOpCount+=1;const s=this.currentScheduler.shouldYield(this);if(s!==!1){this._isYielding=!0,this.currentOpCount=0;const a=n;n=Mt(PO({priority:s}),()=>a)}}try{if(n=this.currentTracer.context(()=>{if($yt!==n[Gl]._V){const s=this.getFiberRef(zht);if(s._tag==="Some"){const a=n[Gl]._V;this.log(`Executing an Effect versioned ${a} with a Runtime of version ${fO()}, you may want to dedupe the effect dependencies, you can use the language service plugin to detect this at compile time: https://github.com/Effect-TS/language-service`,ql,s)}}return this[n._op](n)},this),n===Ii){const s=Fi.currentOp;return s._op===Gg||s._op===ud?Ii:(Fi.currentOp=null,s._op===Ds||s._op===Fs?s:be(ci(s)))}}catch(s){n!==Ii&&!Ut(n,"_op")||!(n._op in this)?n=uht(`Not a valid effect: ${Nl(n)}`):qht(s)?n=be(ls(ci(s),La(Vl))):n=vx(s)}}}run=()=>{this.drainQueueOnCurrentThread()}}const wyt=Xt("effect/FiberRef/currentMinimumLogLevel",()=>Mr(Kmt("Info"))),Eyt=t=>aR(e=>{const n=pmt(e.context,fb);Tj(n,FP).unsafe.log(t.log(e))}),Tyt=Xt(Symbol.for("effect/Logger/defaultLogger"),()=>Eyt(Ppt)),Oyt=Xt(Symbol.for("effect/Logger/tracerLogger"),()=>aR(({annotations:t,cause:e,context:n,fiberId:s,logLevel:a,message:c})=>{const l=Im(Vd(n,Pm),zP);if(l._tag==="None"||l.value._tag==="ExternalSpan")return;const d=Oj(Vd(n,fb),YO),m={};for(const[p,g]of t)m[p]=g;m["effect.fiberId"]=Slt(s),m["effect.logLevel"]=a.label,e!==null&&e._tag!=="Empty"&&(m["effect.cause"]=Sf(e,{renderErrorCause:!0})),l.value.event(Nl(Array.isArray(c)?c[0]:c),d.unsafeCurrentTimeNanos(),m)})),Ryt=Xt(Symbol.for("effect/FiberRef/currentLoggers"),()=>Rht(TO(Tyt,Oyt))),kyt=F(t=>S4(t[0]),(t,e,n)=>Yr(s=>{const a=n?.batching===!0||n?.batching==="inherit"&&s.getFiberRef(Fht);return n?.discard?Hx(n.concurrency,()=>xu(ww,n?.concurrentFinalizers)(c=>a?Xo(t,(l,d)=>c(e(l,d)),!0,!1,1):X_(t,(l,d)=>c(e(l,d)))),()=>xu(Ew,n?.concurrentFinalizers)(c=>Xo(t,(l,d)=>c(e(l,d)),a,!1)),c=>xu(Tw(c),n?.concurrentFinalizers)(l=>Xo(t,(d,m)=>l(e(d,m)),a,!1,c))):Hx(n?.concurrency,()=>xu(ww,n?.concurrentFinalizers)(c=>a?Wx(t,1,(l,d)=>c(e(l,d)),!0):Ba(t,(l,d)=>c(e(l,d)))),()=>xu(Ew,n?.concurrentFinalizers)(c=>Myt(t,(l,d)=>c(e(l,d)),a)),c=>xu(Tw(c),n?.concurrentFinalizers)(l=>Wx(t,c,(d,m)=>l(e(d,m)),a)))})),Myt=(t,e,n)=>fn(()=>{const s=an(t),a=new Array(s.length);return tS(Xo(s,(l,d)=>Mt(e(l,d),m=>xt(()=>a[d]=m)),n,!1),Me(a))}),Xo=(t,e,n,s,a)=>W_(c=>pht(l=>Yr(d=>{let m=Array.from(t).reverse(),p=m.length;if(p===0)return js;let g=0,b=!1;const S=a?Math.min(m.length,a):m.length,v=new Set,E=new Array,D=()=>v.forEach(B=>{B.currentScheduler.scheduleTask(()=>{B.unsafeInterruptAsFork(d.id())},0)}),C=new Array,N=new Array,q=new Array,A=()=>{const B=E.filter(({exit:et})=>et._tag==="Failure").sort((et,tt)=>et.index<tt.index?-1:et.index===tt.index?0:1).map(({exit:et})=>et);return B.length===0&&B.push(Uo),B},P=(B,et=!1)=>{const tt=dP(l(B)),Z=Cyt(tt,d,d.currentRuntimeFlags,iR);return d.currentScheduler.scheduleTask(()=>{et&&Z.unsafeInterruptAsFork(d.id()),Z.resume(tt)},0),Z},M=()=>{s||(p-=m.length,m=[]),b=!0,D()},U=n?hht:oP,K=P(Hd(B=>{const et=(Z,rt)=>{Z._op==="Blocked"?q.push(Z):(E.push({index:rt,exit:Z}),Z._op==="Failure"&&!b&&M())},tt=()=>{if(m.length>0){const Z=m.pop();let rt=g++;const vt=()=>{const G=m.pop();return rt=g++,Mt(PO(),()=>Mt(U(c(e(G,rt))),ut))},ut=G=>m.length>0&&(et(G,rt),m.length>0)?vt():Me(G),Et=Mt(U(c(e(Z,rt))),ut),z=P(Et);C.push(z),v.add(z),b&&z.currentScheduler.scheduleTask(()=>{z.unsafeInterruptAsFork(d.id())},0),z.addObserver(G=>{let st;if(G._op==="Failure"?st=G:st=G.effect_instruction_i0,N.push(z),v.delete(z),et(st,rt),E.length===p)B(Me(Rn(Ox(A(),{parallel:!0}),()=>Uo)));else if(q.length+E.length===p){const Nt=A(),O=q.map(Y=>Y.effect_instruction_i0).reduce(Wj);B(Me(rP(O,Xo([Rn(Ox(Nt,{parallel:!0}),()=>Uo),...q.map(Y=>Y.effect_instruction_i1)],Y=>Y,n,!0,a))))}else tt()})}};for(let Z=0;Z<S;Z++)tt()}));return jm(LO(lP(c(o6(K))),EP({onFailure:B=>{M();const et=q.length+1,tt=Math.min(typeof a=="number"?a:q.length,q.length),Z=Array.from(q);return Hd(rt=>{let vt=0,ut=0;const Et=(G,st)=>Nt=>{vt++,vt===et&&rt(en(be(B))),Z.length>0&&st&&z()},z=()=>{P(Z.pop(),!0).addObserver(Et(ut,!0)),ut++};K.addObserver(Et(ut,!1)),ut++;for(let G=0;G<tt;G++)z()})},onSuccess:()=>Ba(N,B=>B.inheritAll)})))}))),Wx=(t,e,n,s)=>fn(()=>{const a=an(t),c=new Array(a.length);return tS(Xo(a,(d,m)=>Tr(n(d,m),p=>c[m]=p),s,!1,e),Me(c))}),M6=t=>Nyt(t,iR),Ayt=(t,e,n,s=null)=>{const a=A6(t,e,n,s);return a.resume(t),a},Cyt=(t,e,n,s=null)=>A6(t,e,n,s),A6=(t,e,n,s=null)=>{const a=Dj(),c=e.getFiberRefs(),l=hmt(c,a),d=new k6(a,l,n),m=Vd(l,Pm),p=d.currentSupervisor;return p.onStart(m,t,jt(e),d),d.addObserver(b=>p.onEnd(b,d)),(s!==null?s:Q(e.getFiberRef($w),Rn(()=>e.scope()))).add(n,d),d},Nyt=(t,e)=>Yr((n,s)=>Me(Ayt(t,n,s.runtimeFlags,e))),tI=t=>qm(e=>fr(Im(e,Vm),{onNone:()=>t,onSome:n=>{switch(n.strategy._tag){case"Parallel":return t;case"Sequential":case"ParallelN":return Mt(rS(n,Ew),s=>lR(t,s))}}})),eI=t=>e=>qm(n=>fr(Im(n,Vm),{onNone:()=>e,onSome:s=>s.strategy._tag==="ParallelN"&&s.strategy.parallelism===t?e:Mt(rS(s,Tw(t)),a=>lR(e,a))})),xu=(t,e)=>n=>qm(s=>fr(Im(s,Vm),{onNone:()=>n(sn),onSome:a=>{if(e===!0){const c=t._tag==="Parallel"?tI:t._tag==="Sequential"?nI:eI(t.parallelism);switch(a.strategy._tag){case"Parallel":return c(n(tI));case"Sequential":return c(n(nI));case"ParallelN":return c(n(eI(a.strategy.parallelism)))}}else return n(sn)}})),nI=t=>qm(e=>fr(Im(e,Vm),{onNone:()=>t,onSome:n=>{switch(n.strategy._tag){case"Sequential":return t;case"Parallel":case"ParallelN":return Mt(rS(n,ww),s=>lR(t,s))}}})),Vm=Fc("effect/Scope"),lR=F(2,(t,e)=>tdt(t,Rj(Vut(Vm,e)))),xyt=t=>wf(t,{differ:dyt,fork:hd}),rI=Mht(Dft),Iyt=xyt(lS),Fyt=(t,e,n)=>uP(s=>Mt(Mt(M6(fP(t)),a=>Hd(c=>{const l=e.map(p=>p.listeners.count),d=()=>{l.every(p=>p===0)&&e.every(p=>p.result.state.current._tag==="Pending"?!0:!!(p.result.state.current._tag==="Done"&&HO(p.result.state.current.effect)&&p.result.state.current.effect._tag==="Failure"&&dut(p.result.state.current.effect.cause)))&&(m.forEach(p=>p()),n?.(),c(yht(a)))};a.addObserver(p=>{m.forEach(g=>g()),c(p)});const m=e.map((p,g)=>{const b=S=>{l[g]=S,d()};return p.listeners.addObserver(b),()=>p.listeners.removeObserver(b)});return d(),xt(()=>{m.forEach(p=>p())})})),()=>fn(()=>{const a=e.flatMap(c=>c.state.completed?[]:[c]);return X_(a,c=>iyt(c.request,Vht(s)))}))),Dyt=Lht,zyt=rS,fR=t=>function(){if(arguments.length===1){const e=arguments[0];return(n,...s)=>t(e,n,...s)}return t.apply(this,arguments)},C6=fR((t,e,n)=>{const s=Dj(),a=[[Pm,[[s,t.context]]]];n?.scheduler&&a.push([r6,[[s,n.scheduler]]]);let c=gmt(t.fiberRefs,{entries:a,forkAs:s});n?.updateRefs&&(c=n.updateRefs(c,s));const l=new k6(s,c,t.runtimeFlags);let d=e;n?.scope&&(d=Mt(zyt(n.scope,UP),p=>tS(Uht(p,uP(g=>qt(g,l.id())?js:gP(l,g))),LO(e,g=>Dyt(p,g)))));const m=l.currentSupervisor;return m!==lS&&(m.onStart(t.context,d,St(),l),l.addObserver(p=>m.onEnd(p,l))),iR.add(t.runtimeFlags,l),n?.immediate===!1?l.resume(d):l.start(d),l}),Uyt=fR((t,e)=>{const n=Kyt(t)(e);if(n._tag==="Failure")throw qyt(n.effect_instruction_i0);return n.effect_instruction_i0});class Lyt extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}}const jyt=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new Lyt(t);return Error.stackTraceLimit=e,n},Ev=Symbol.for("effect/Runtime/FiberFailure"),Tg=Symbol.for("effect/Runtime/FiberFailure/Cause");class Pyt extends Error{[Ev];[Tg];constructor(e){const n=Sj(e)[0];super(n?.message||"An error has occurred"),this[Ev]=Ev,this[Tg]=e,this.name=n?`(FiberFailure) ${n.name}`:"FiberFailure",n?.stack&&(this.stack=n.stack)}toJSON(){return{_id:"FiberFailure",cause:this[Tg].toJSON()}}toString(){return"(FiberFailure) "+Sf(this[Tg],{renderErrorCause:!0})}[Ae](){return this.toString()}}const qyt=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new Pyt(t);return Error.stackTraceLimit=e,n},Byt=t=>{const e=t;switch(e._op){case"Failure":case"Success":return e;case"Left":return Rx(e.left);case"Right":return en(e.right);case"Some":return en(e.value);case"None":return Rx(wP())}},Kyt=fR((t,e)=>{const n=Byt(e);if(n)return n;const s=new n6,a=C6(t)(e,{scheduler:s});s.flush();const c=a.unsafePoll();return c||Hht(DO(jyt(a),VO(a)))});class Hyt{context;runtimeFlags;fiberRefs;constructor(e,n,s){this.context=e,this.runtimeFlags=n,this.fiberRefs=s}pipe(){return Ct(this,arguments)}}const Vyt=t=>new Hyt(t.context,t.runtimeFlags,t.fiberRefs),Yyt=Xj($f,Jj,Gj),N6=Vyt({context:MO(),runtimeFlags:Yyt,fiberRefs:ymt()}),Gyt=C6(N6),Jyt=Uyt(N6),Qyt=Q_,ry=kyt,Og=fn,rs=js,Xyt=Sw,jw=Tr,Zyt=UO,Wyt=Z_,Iu=cb,Gs=Mt,tbt=Gyt,ebt=Jyt,x6=(t,e)=>{switch(e._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(t);case"SymbolKeyword":return Object.getOwnPropertySymbols(t);case"Refinement":return x6(t,e.from)}},ol=t=>Object.keys(t).concat(Object.getOwnPropertySymbols(t)),I6=t=>{let e=!1,n;return()=>(e||(n=t(),e=!0),n)},nbt=t=>{try{return t.toISOString()}catch{return String(t)}},ui=(t,e=!0)=>{if(Array.isArray(t))return`[${t.map(n=>ui(n,e)).join(",")}]`;if(Zat(t))return nbt(t);if(Ut(t,"toString")&&Rm(t.toString)&&t.toString!==Object.prototype.toString)return t.toString();if(na(t))return JSON.stringify(t);if(yc(t)||t==null||sO(t)||tw(t))return String(t);if(A_(t))return String(t)+"n";if(S4(t))return`${t.constructor.name}(${ui(Array.from(t),e)})`;try{e&&JSON.stringify(t);const n=`{${ol(t).map(a=>`${na(a)?JSON.stringify(a):String(a)}:${ui(t[a],!1)}`).join(",")}}`,s=t.constructor.name;return t.constructor!==Object.prototype.constructor?`${s}(${n})`:n}catch{return"<circular structure>"}},rbt=t=>typeof t=="string"?JSON.stringify(t):String(t),F6=t=>Array.isArray(t),sI=t=>`[${rbt(t)}]`,sbt=t=>F6(t)?t.map(sI).join(""):sI(t),Dc=(t,e,n,s)=>{let a=t;return e!==void 0&&(a+=`
details: ${e}`),s&&(a+=`
schema (${s._tag}): ${s}`),a},ibt=t=>Dc("Unsupported key schema",void 0,void 0,t),abt=t=>Dc("Unsupported literal",`literal value: ${ui(t)}`),iI=t=>Dc("Duplicate index signature",`${t} index signature`),obt=Dc("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),cbt=Dc("Invalid element","A required element cannot follow an optional element. ts(1257)"),aI=t=>Dc("Duplicate property signature transformation",`Duplicate key ${ui(t)}`),ubt=t=>Dc("Duplicate property signature",`Duplicate key ${ui(t)}`),lbt=Symbol.for("effect/annotation/Brand"),fbt=Symbol.for("effect/annotation/SchemaId"),D6=Symbol.for("effect/annotation/Message"),hR=Symbol.for("effect/annotation/MissingMessage"),z6=Symbol.for("effect/annotation/Identifier"),co=Symbol.for("effect/annotation/Title"),Pw=Symbol.for("effect/annotation/AutoTitle"),Ym=Symbol.for("effect/annotation/Description"),U6=Symbol.for("effect/annotation/Examples"),L6=Symbol.for("effect/annotation/Default"),j6=Symbol.for("effect/annotation/JSONSchema"),P6=Symbol.for("effect/annotation/Arbitrary"),q6=Symbol.for("effect/annotation/Pretty"),B6=Symbol.for("effect/annotation/Equivalence"),hbt=Symbol.for("effect/annotation/Documentation"),K6=Symbol.for("effect/annotation/Concurrency"),H6=Symbol.for("effect/annotation/Batching"),V6=Symbol.for("effect/annotation/ParseIssueTitle"),Y6=Symbol.for("effect/annotation/ParseOptions"),G6=Symbol.for("effect/annotation/DecodingFallback"),J6=Symbol.for("effect/annotation/Surrogate"),dbt=Symbol.for("effect/annotation/StableFilter"),dr=F(2,(t,e)=>Object.prototype.hasOwnProperty.call(t.annotations,e)?jt(t.annotations[e]):St()),mbt=dr(lbt),pbt=dr(D6),gbt=dr(hR),Q6=dr(co),X6=dr(Pw),fS=dr(z6),Z6=dr(Ym),ybt=dr(K6),bbt=dr(H6),_bt=dr(V6),Sbt=dr(Y6),vbt=dr(G6),W6=dr(J6),$bt=dr(dbt),wbt=t=>Jot($bt(t),e=>e===!0),tq=Symbol.for("effect/annotation/JSONIdentifier"),Ebt=dr(tq),Tbt=t=>Qa(Ebt(t),()=>fS(t));class hS{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(e,n,s,a={}){this.typeParameters=e,this.decodeUnknown=n,this.encodeUnknown=s,this.annotations=a}toString(){return Rn(di(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(e=>e.toJSON()),annotations:An(this.annotations)}}}const Gm=t=>e=>e._tag===t;let qw=class{literal;annotations;_tag="Literal";constructor(e,n={}){this.literal=e,this.annotations=n}toString(){return Rn(di(this),()=>ui(this.literal))}toJSON(){return{_tag:this._tag,literal:A_(this.literal)?String(this.literal):this.literal,annotations:An(this.annotations)}}};const oI=Gm("Literal");class Obt{symbol;annotations;_tag="UniqueSymbol";constructor(e,n={}){this.symbol=e,this.annotations=n}toString(){return Rn(di(this),()=>ui(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:An(this.annotations)}}}class Rbt{annotations;_tag="NeverKeyword";constructor(e={}){this.annotations=e}toString(){return Tf(this)}toJSON(){return{_tag:this._tag,annotations:An(this.annotations)}}}const eq=new Rbt({[co]:"never"});class kbt{annotations;_tag="UnknownKeyword";constructor(e={}){this.annotations=e}toString(){return Tf(this)}toJSON(){return{_tag:this._tag,annotations:An(this.annotations)}}}const nq=new kbt({[co]:"unknown"});class Mbt{annotations;_tag="AnyKeyword";constructor(e={}){this.annotations=e}toString(){return Tf(this)}toJSON(){return{_tag:this._tag,annotations:An(this.annotations)}}}const Abt=new Mbt({[co]:"any"});class Cbt{annotations;_tag="StringKeyword";constructor(e={}){this.annotations=e}toString(){return Tf(this)}toJSON(){return{_tag:this._tag,annotations:An(this.annotations)}}}const Nbt=new Cbt({[co]:"string",[Ym]:"a string"}),xbt=Gm("StringKeyword");class Ibt{annotations;_tag="BooleanKeyword";constructor(e={}){this.annotations=e}toString(){return Tf(this)}toJSON(){return{_tag:this._tag,annotations:An(this.annotations)}}}const Fbt=new Ibt({[co]:"boolean",[Ym]:"a boolean"});class Dbt{annotations;_tag="BigIntKeyword";constructor(e={}){this.annotations=e}toString(){return Tf(this)}toJSON(){return{_tag:this._tag,annotations:An(this.annotations)}}}const zbt=new Dbt({[co]:"bigint",[Ym]:"a bigint"}),Ubt=Gm("SymbolKeyword");let dS=class{type;annotations;constructor(e,n={}){this.type=e,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:An(this.annotations)}}toString(){return String(this.type)}};class mS extends dS{isOptional;constructor(e,n,s={}){super(e,s),this.isOptional=n}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:An(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}const rq=t=>t.map(e=>e.type);class dR{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(e,n,s,a={}){this.elements=e,this.rest=n,this.isReadonly=s,this.annotations=a;let c=!1,l=!1;for(const d of e)if(d.isOptional)c=!0;else if(c){l=!0;break}if(l||c&&n.length>1)throw new Error(cbt)}toString(){return Rn(di(this),()=>Lbt(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(e=>e.toJSON()),rest:this.rest.map(e=>e.toJSON()),isReadonly:this.isReadonly,annotations:An(this.annotations)}}}const Lbt=t=>{const e=t.elements.map(String).join(", ");return Wot(t.rest,{onEmpty:()=>`readonly [${e}]`,onNonEmpty:(n,s)=>{const a=String(n),c=a.includes(" | ")?`(${a})`:a;if(s.length>0){const l=s.map(String).join(", ");return t.elements.length>0?`readonly [${e}, ...${c}[], ${l}]`:`readonly [...${c}[], ${l}]`}else return t.elements.length>0?`readonly [${e}, ...${c}[]]`:`ReadonlyArray<${a}>`}})};class Zn extends mS{name;isReadonly;constructor(e,n,s,a,c){super(n,s,c),this.name=e,this.isReadonly=a}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:An(this.annotations)}}}const sq=t=>{switch(t._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return sq(t.from)}return!1};class pS{type;isReadonly;parameter;constructor(e,n,s){if(this.type=n,this.isReadonly=s,sq(e))this.parameter=e;else throw new Error(obt)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class Zo{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(e,n,s={}){this.annotations=s;const a={};for(let l=0;l<e.length;l++){const d=e[l].name;if(Object.prototype.hasOwnProperty.call(a,d))throw new Error(ubt(d));a[d]=null}const c={string:!1,symbol:!1};for(let l=0;l<n.length;l++){const d=fq(n[l].parameter);if(xbt(d)){if(c.string)throw new Error(iI("string"));c.string=!0}else if(Ubt(d)){if(c.symbol)throw new Error(iI("symbol"));c.symbol=!0}}this.propertySignatures=e,this.indexSignatures=n}toString(){return Rn(di(this),()=>jbt(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(e=>e.toJSON()),indexSignatures:this.indexSignatures.map(e=>e.toJSON()),annotations:An(this.annotations)}}}const cI=t=>t.map(String).join("; "),jbt=t=>{if(t.propertySignatures.length>0){const e=t.propertySignatures.map(String).join("; ");return t.indexSignatures.length>0?`{ ${e}; ${cI(t.indexSignatures)} }`:`{ ${e} }`}else return t.indexSignatures.length>0?`{ ${cI(t.indexSignatures)} }`:"{}"},Pbt=Ud(q4(Ql,t=>{switch(t._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),qbt={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},iq=t=>G4(t,e=>aq(e)?iq(e.types):[e]),Bbt=t=>{const e=Pbt(t),n=[],s={},a=[];for(const c of e)switch(c._tag){case"NeverKeyword":break;case"AnyKeyword":return[Abt];case"UnknownKeyword":return[nq];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{s[c._tag]||(s[c._tag]=c,n.push(c));break}case"Literal":{const l=typeof c.literal;switch(l){case"string":case"number":case"bigint":case"boolean":{const d=qbt[l];!s[d]&&!a.includes(c.literal)&&(a.push(c.literal),n.push(c));break}case"object":{a.includes(c.literal)||(a.push(c.literal),n.push(c));break}}break}case"UniqueSymbol":{!s.SymbolKeyword&&!a.includes(c.symbol)&&(a.push(c.symbol),n.push(c));break}case"TupleType":{s.ObjectKeyword||n.push(c);break}case"TypeLiteral":{c.propertySignatures.length===0&&c.indexSignatures.length===0?s["{}"]||(s["{}"]=c,n.push(c)):s.ObjectKeyword||n.push(c);break}default:n.push(c)}return n};let ei=class Bw{types;annotations;static make=(e,n)=>mR(e)?new Bw(e,n):e.length===1?e[0]:eq;static unify=(e,n)=>Bw.make(Bbt(iq(e)),n);_tag="Union";constructor(e,n={}){this.types=e,this.annotations=n}toString(){return Rn(di(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(e=>e.toJSON()),annotations:An(this.annotations)}}};const Kbt=(t,e)=>t.map(e),mR=t=>t.length>1,aq=Gm("Union"),Tv=Xt(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);class pR{f;annotations;_tag="Suspend";constructor(e,n={}){this.f=e,this.annotations=n,this.f=I6(e)}toString(){return di(this).pipe(Qa(()=>F_(Bot(this.f)(),e=>di(e))),Rn(()=>"<suspended schema>"))}toJSON(){const e=this.f();let n=Tv.get(e);return n||(Tv.set(e,{_tag:this._tag}),n={_tag:this._tag,ast:e.toJSON(),annotations:An(this.annotations)},Tv.set(e,n),n)}}let Hbt=class{from;filter;annotations;_tag="Refinement";constructor(e,n,s={}){this.from=e,this.filter=n,this.annotations=s}toString(){return fS(this).pipe(Rn(()=>fr(hq(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:e=>gR(this.from)?String(this.from)+" & "+e:e})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:An(this.annotations)}}};const gR=Gm("Refinement"),Ov={};let oq=class{from;to;transformation;annotations;_tag="Transformation";constructor(e,n,s,a={}){this.from=e,this.to=n,this.transformation=s,this.annotations=a}toString(){return Rn(di(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:An(this.annotations)}}};class Vbt{decode;encode;_tag="FinalTransformation";constructor(e,n){this.decode=e,this.encode=n}}class Ybt{from;to;decode;encode;constructor(e,n,s,a){this.from=e,this.to=n,this.decode=s,this.encode=a}}class Gbt{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(e){this.propertySignatureTransformations=e;const n={},s={};for(const a of e){const c=a.from;if(n[c])throw new Error(aI(c));n[c]=!0;const l=a.to;if(s[l])throw new Error(aI(l));s[l]=!0}}}const Zl=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={...t.annotations,...e},a=W6(t);return tr(a)&&(s[J6]=Zl(a.value,e)),n.annotations.value=s,Object.create(Object.getPrototypeOf(t),n)},Jbt="[\\s\\S]*",Qbt="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",cq=(t,e)=>{switch(t._tag){case"Literal":return ub(String(t.literal));case"StringKeyword":return Jbt;case"NumberKeyword":return Qbt;case"TemplateLiteral":return uq(t);case"Union":return t.types.map(n=>cq(n)).join("|")}},Xbt=(t,e,n,s)=>aq(t)?`(${e})`:e,uq=(t,e,n)=>{let s="";if(t.head!==""){const a=ub(t.head);s+=a}for(const a of t.spans){const c=cq(a.type);if(s+=Xbt(a.type,c),a.literal!==""){const l=ub(a.literal);s+=l}}return s},Zbt=t=>new RegExp(`^${uq(t)}$`),uI=(t,e)=>{const n=[],s=[],a=c=>{switch(c._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":s.push(new pS(c,e,!0));break;case"Literal":if(na(c.literal)||yc(c.literal))n.push(new Zn(c.literal,e,!1,!0));else throw new Error(abt(c.literal));break;case"Enums":{for(const[l,d]of c.enums)n.push(new Zn(d,e,!1,!0));break}case"UniqueSymbol":n.push(new Zn(c.symbol,e,!1,!0));break;case"Union":c.types.forEach(a);break;default:throw new Error(ibt(c))}};return a(t),{propertySignatures:n,indexSignatures:s}},lq=t=>e=>{let n;for(const s of t)Object.prototype.hasOwnProperty.call(e.annotations,s)&&(n===void 0&&(n={}),n[s]=e.annotations[s]);return n},Wbt=lq([U6,L6,j6,P6,q6,B6]),En=t=>{switch(t._tag){case"Declaration":{const e=us(t.typeParameters,En);return e===t.typeParameters?t:new hS(e,t.decodeUnknown,t.encodeUnknown,t.annotations)}case"TupleType":{const e=us(t.elements,a=>{const c=En(a.type);return c===a.type?a:new mS(c,a.isOptional)}),n=rq(t.rest),s=us(n,En);return e===t.elements&&s===n?t:new dR(e,s.map(a=>new dS(a)),t.isReadonly,t.annotations)}case"TypeLiteral":{const e=us(t.propertySignatures,s=>{const a=En(s.type);return a===s.type?s:new Zn(s.name,a,s.isOptional,s.isReadonly)}),n=us(t.indexSignatures,s=>{const a=En(s.type);return a===s.type?s:new pS(s.parameter,a,s.isReadonly)});return e===t.propertySignatures&&n===t.indexSignatures?t:new Zo(e,n,t.annotations)}case"Union":{const e=us(t.types,En);return e===t.types?t:ei.make(e,t.annotations)}case"Suspend":return new pR(()=>En(t.f()),t.annotations);case"Refinement":{const e=En(t.from);return e===t.from?t:new Hbt(e,t.filter,t.annotations)}case"Transformation":{const e=Wbt(t);return En(e!==void 0?Zl(t.to,e):t.to)}}return t},Fu=t=>fr(Tbt(t),{onNone:()=>{},onSome:e=>({[tq]:e})});function us(t,e){let n=!1;const s=D_(t.length);for(let a=0;a<t.length;a++){const c=t[a],l=e(c);l!==c&&(n=!0),s[a]=l}return n?s:t}const Js=(t,e)=>{switch(t._tag){case"Declaration":{const n=us(t.typeParameters,s=>Js(s));return n===t.typeParameters?t:new hS(n,t.decodeUnknown,t.encodeUnknown,t.annotations)}case"TupleType":{const n=us(t.elements,c=>{const l=Js(c.type);return l===c.type?c:new mS(l,c.isOptional)}),s=rq(t.rest),a=us(s,c=>Js(c));return n===t.elements&&a===s?t:new dR(n,a.map(c=>new dS(c)),t.isReadonly,Fu(t))}case"TypeLiteral":{const n=us(t.propertySignatures,a=>{const c=Js(a.type);return c===a.type?a:new Zn(a.name,c,a.isOptional,a.isReadonly)}),s=us(t.indexSignatures,a=>{const c=Js(a.type);return c===a.type?a:new pS(a.parameter,c,a.isReadonly)});return n===t.propertySignatures&&s===t.indexSignatures?t:new Zo(n,s,Fu(t))}case"Union":{const n=us(t.types,s=>Js(s));return n===t.types?t:ei.make(n,Fu(t))}case"Suspend":return new pR(()=>Js(t.f()),Fu(t));case"Refinement":{const n=Js(t.from),s=Fu(t);return s?Zl(n,s):n}case"Transformation":{const n=Fu(t);return Js(n?Zl(t.from,n):t.from)}}return t},lI=t=>Js(t),An=t=>{const e={};for(const n of Object.getOwnPropertySymbols(t))e[String(n)]=t[n];return e},fq=t=>{switch(t._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return t;case"Refinement":return fq(t.from)}},Tf=t=>Rn(di(t),()=>t._tag);function t_t(t){return fr(mbt(t),{onNone:()=>"",onSome:e=>e.map(n=>` & Brand<${ui(n)}>`).join("")})}const hq=t=>Q6(t).pipe(Qa(()=>Z6(t)),Qa(()=>X6(t)),B4(e=>e+t_t(t))),di=t=>Qa(fS(t),()=>hq(t));class Qn{path;actual;issue;_tag="Pointer";constructor(e,n,s){this.path=e,this.actual=n,this.issue=s}}class fI{actual;message;_tag="Unexpected";constructor(e,n){this.actual=e,this.message=n}}class qh{ast;message;_tag="Missing";actual=void 0;constructor(e,n){this.ast=e,this.message=n}}class Be{ast;actual;issues;output;_tag="Composite";constructor(e,n,s,a){this.ast=e,this.actual=n,this.issues=s,this.output=a}}class Rv{ast;actual;kind;issue;_tag="Refinement";constructor(e,n,s,a){this.ast=e,this.actual=n,this.kind=s,this.issue=a}}class kv{ast;actual;kind;issue;_tag="Transformation";constructor(e,n,s,a){this.ast=e,this.actual=n,this.kind=s,this.issue=a}}class ni{ast;actual;message;_tag="Type";constructor(e,n,s){this.ast=e,this.actual=n,this.message=s}}class hI{ast;actual;message;_tag="Forbidden";constructor(e,n,s){this.ast=e,this.actual=n,this.message=s}}const dI=Symbol.for("effect/Schema/ParseErrorTypeId");class e_t extends Wdt("ParseError"){[dI]=dI;get message(){return this.toString()}toString(){return sy.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[Ae](){return this.toJSON()}}const n_t=t=>new e_t({issue:t}),Yd=te,yR=Lt,r_t=Not,ir=xot,Ka=F(2,(t,e)=>ir(t)?gO(t,{onLeft:Lt,onRight:e}):Gs(t,e)),Qs=F(2,(t,e)=>ir(t)?Dot(t,e):jw(t,e)),Mv=F(2,(t,e)=>ir(t)?Fot(t,e):Wyt(t,e)),s_t=F(2,(t,e)=>ir(t)?Iot(t,{onLeft:e.onFailure,onRight:e.onSuccess}):Zyt(t,e)),dq=F(2,(t,e)=>ir(t)?gO(t,{onLeft:e,onRight:te}):Xyt(t,e)),bR=(t,e)=>e===void 0||yc(e)?t:t===void 0?e:{...t,...e},i_t=(t,e,n)=>{const s=In(t,e);return(a,c)=>s(a,bR(n,c))},a_t=(t,e,n)=>{const s=i_t(t,e,n);return(a,c)=>L4(s(a,c),n_t)},mq=(t,e,n)=>{const s=In(t,e);return(a,c)=>s(a,{...bR(n,c),isEffectAllowed:!0})},pq=(t,e)=>mq(t.ast,!0,e),gq=(t,e)=>mq(t.ast,!1,e),o_t=(t,e)=>a_t(En(t.ast),!0,e),c_t=Xt(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),u_t=Xt(Symbol.for("effect/ParseResult/encodeMemoMap"),()=>new WeakMap),In=(t,e)=>{const n=e?c_t:u_t,s=n.get(t);if(s)return s;const a=l_t(t,e),c=Sbt(t),l=tr(c)?(p,g)=>a(p,bR(g,c.value)):a,d=vbt(t),m=e&&tr(d)?(p,g)=>td(dq(l(p,g),d.value),t,p,g):l;return n.set(t,m),m},Av=t=>Ws(ybt(t)),Cv=t=>Ws(bbt(t)),l_t=(t,e)=>{switch(t._tag){case"Refinement":if(e){const n=In(t.from,!0);return(s,a)=>{a=a??Ov;const c=a?.errors==="all",l=Ka(dq(n(s,a),d=>{const m=new Rv(t,s,"From",d);return c&&wbt(t)&&Sq(d)?fr(t.filter(s,a,t),{onNone:()=>Lt(m),onSome:p=>Lt(new Be(t,s,[m,new Rv(t,s,"Predicate",p)]))}):Lt(m)}),d=>fr(t.filter(d,a,t),{onNone:()=>te(d),onSome:m=>Lt(new Rv(t,s,"Predicate",m))}));return td(l,t,s,a)}}else{const n=In(En(t),!0),s=In(yq(t.from),!1);return(a,c)=>td(Ka(n(a,c),l=>s(l,c)),t,a,c)}case"Transformation":{const n=d_t(t.transformation,e),s=e?In(t.from,!0):In(t.to,!1),a=e?In(t.to,!0):In(t.from,!1);return(c,l)=>td(Ka(Mv(s(c,l),d=>new kv(t,c,e?"Encoded":"Type",d)),d=>Ka(Mv(n(d,l??Ov,t,c),m=>new kv(t,c,"Transformation",m)),m=>Mv(a(m,l),p=>new kv(t,c,e?"Type":"Encoded",p)))),t,c,l)}case"Declaration":{const n=e?t.decodeUnknown(...t.typeParameters):t.encodeUnknown(...t.typeParameters);return(s,a)=>td(n(s,a??Ov,t),t,s,a)}case"Literal":return Pr(t,n=>n===t.literal);case"UniqueSymbol":return Pr(t,n=>n===t.symbol);case"UndefinedKeyword":return Pr(t,Jat);case"NeverKeyword":return Pr(t,Qat);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return te;case"StringKeyword":return Pr(t,na);case"NumberKeyword":return Pr(t,yc);case"BooleanKeyword":return Pr(t,sO);case"BigIntKeyword":return Pr(t,A_);case"SymbolKeyword":return Pr(t,tw);case"ObjectKeyword":return Pr(t,oo);case"Enums":return Pr(t,n=>t.enums.some(([s,a])=>a===n));case"TemplateLiteral":{const n=Zbt(t);return Pr(t,s=>na(s)&&n.test(s))}case"TupleType":{const n=t.elements.map(p=>In(p.type,e)),s=t.rest.map(p=>In(p.type,e));let a=t.elements.filter(p=>!p.isOptional);t.rest.length>0&&(a=a.concat(t.rest.slice(1)));const c=a.length,l=t.elements.length>0?t.elements.map((p,g)=>g).join(" | "):"never",d=Av(t),m=Cv(t);return(p,g)=>{if(!ect(p))return Lt(new ni(t,p));const b=g?.errors==="all",S=[];let v=0;const E=[],D=p.length;for(let A=D;A<=c-1;A++){const P=new Qn(A,p,new qh(a[A-D]));if(b){S.push([v++,P]);continue}else return Lt(new Be(t,p,P,E))}if(t.rest.length===0)for(let A=t.elements.length;A<=D-1;A++){const P=new Qn(A,p,new fI(p[A],`is unexpected, expected: ${l}`));if(b){S.push([v++,P]);continue}else return Lt(new Be(t,p,P,E))}let C=0,N;for(;C<n.length;C++)if(D<C+1){if(t.elements[C].isOptional)continue}else{const A=n[C],P=A(p[C],g);if(ir(P)){if(wn(P)){const M=new Qn(C,p,P.left);if(b){S.push([v++,M]);continue}else return Lt(new Be(t,p,M,vs(E)))}E.push([v++,P.right])}else{const M=v++,U=C;N||(N=[]),N.push(({es:K,output:B})=>Gs(Iu(P),et=>{if(wn(et)){const tt=new Qn(U,p,et.left);return b?(K.push([M,tt]),rs):Lt(new Be(t,p,tt,vs(B)))}return B.push([M,et.right]),rs}))}}if(kn(s)){const[A,...P]=s;for(;C<D-P.length;C++){const M=A(p[C],g);if(ir(M))if(wn(M)){const U=new Qn(C,p,M.left);if(b){S.push([v++,U]);continue}else return Lt(new Be(t,p,U,vs(E)))}else E.push([v++,M.right]);else{const U=v++,K=C;N||(N=[]),N.push(({es:B,output:et})=>Gs(Iu(M),tt=>{if(wn(tt)){const Z=new Qn(K,p,tt.left);return b?(B.push([U,Z]),rs):Lt(new Be(t,p,Z,vs(et)))}else return et.push([U,tt.right]),rs}))}}for(let M=0;M<P.length;M++)if(C+=M,!(D<C+1)){const U=P[M](p[C],g);if(ir(U)){if(wn(U)){const K=new Qn(C,p,U.left);if(b){S.push([v++,K]);continue}else return Lt(new Be(t,p,K,vs(E)))}E.push([v++,U.right])}else{const K=v++,B=C;N||(N=[]),N.push(({es:et,output:tt})=>Gs(Iu(U),Z=>{if(wn(Z)){const rt=new Qn(B,p,Z.left);return b?(et.push([K,rt]),rs):Lt(new Be(t,p,rt,vs(tt)))}return tt.push([K,Z.right]),rs}))}}}const q=({es:A,output:P})=>Jg(A)?Lt(new Be(t,p,vs(A),vs(P))):te(vs(P));if(N&&N.length>0){const A=N;return Og(()=>{const P={es:Zh(S),output:Zh(E)};return Gs(ry(A,M=>M(P),{concurrency:d,batching:m,discard:!0}),()=>q(P))})}return q({output:E,es:S})}}case"TypeLiteral":{if(t.propertySignatures.length===0&&t.indexSignatures.length===0)return Pr(t,Xat);const n=[],s={},a=[];for(const g of t.propertySignatures)n.push([In(g.type,e),g]),s[g.name]=null,a.push(g.name);const c=t.indexSignatures.map(g=>[In(g.parameter,e),In(g.type,e),g.parameter]),l=ei.make(t.indexSignatures.map(g=>g.parameter).concat(a.map(g=>tw(g)?new Obt(g):new qw(g)))),d=In(l,e),m=Av(t),p=Cv(t);return(g,b)=>{if(!Wat(g))return Lt(new ni(t,g));const S=b?.errors==="all",v=[];let E=0;const D=b?.onExcessProperty==="error",C=b?.onExcessProperty==="preserve",N={};let q;if(D||C){q=ol(g);for(const U of q){const K=d(U,b);if(ir(K)&&wn(K))if(D){const B=new Qn(U,g,new fI(g[U],`is unexpected, expected: ${String(l)}`));if(S){v.push([E++,B]);continue}else return Lt(new Be(t,g,B,N))}else N[U]=g[U]}}let A;const P=b?.exact===!0;for(let U=0;U<n.length;U++){const K=n[U][1],B=K.name,et=Object.prototype.hasOwnProperty.call(g,B);if(!et){if(K.isOptional)continue;if(P){const rt=new Qn(B,g,new qh(K));if(S){v.push([E++,rt]);continue}else return Lt(new Be(t,g,rt,N))}}const tt=n[U][0],Z=tt(g[B],b);if(ir(Z)){if(wn(Z)){const rt=new Qn(B,g,et?Z.left:new qh(K));if(S){v.push([E++,rt]);continue}else return Lt(new Be(t,g,rt,N))}N[B]=Z.right}else{const rt=E++,vt=B;A||(A=[]),A.push(({es:ut,output:Et})=>Gs(Iu(Z),z=>{if(wn(z)){const G=new Qn(vt,g,et?z.left:new qh(K));return S?(ut.push([rt,G]),rs):Lt(new Be(t,g,G,Et))}return Et[vt]=z.right,rs}))}}for(let U=0;U<c.length;U++){const K=c[U],B=K[0],et=K[1],tt=x6(g,K[2]);for(const Z of tt){const rt=B(Z,b);if(ir(rt)&&Bi(rt)){const vt=et(g[Z],b);if(ir(vt))if(wn(vt)){const ut=new Qn(Z,g,vt.left);if(S){v.push([E++,ut]);continue}else return Lt(new Be(t,g,ut,N))}else Object.prototype.hasOwnProperty.call(s,Z)||(N[Z]=vt.right);else{const ut=E++,Et=Z;A||(A=[]),A.push(({es:z,output:G})=>Gs(Iu(vt),st=>{if(wn(st)){const Nt=new Qn(Et,g,st.left);return S?(z.push([ut,Nt]),rs):Lt(new Be(t,g,Nt,G))}else return Object.prototype.hasOwnProperty.call(s,Z)||(G[Z]=st.right),rs}))}}}}const M=({es:U,output:K})=>{if(Jg(U))return Lt(new Be(t,g,vs(U),K));if(b?.propertyOrder==="original"){const B=q||ol(g);for(const tt of a)B.indexOf(tt)===-1&&B.push(tt);const et={};for(const tt of B)Object.prototype.hasOwnProperty.call(K,tt)&&(et[tt]=K[tt]);return te(et)}return te(K)};if(A&&A.length>0){const U=A;return Og(()=>{const K={es:Zh(v),output:Object.assign({},N)};return Gs(ry(U,B=>B(K),{concurrency:m,batching:p,discard:!0}),()=>M(K))})}return M({es:v,output:N})}}case"Union":{const n=f_t(t.types,e),s=ol(n.keys),a=s.length,c=t.types.length,l=new Map;for(let p=0;p<c;p++)l.set(t.types[p],In(t.types[p],e));const d=Av(t)??1,m=Cv(t);return(p,g)=>{const b=[];let S=0,v=[];if(a>0)if(iO(p))for(let C=0;C<a;C++){const N=s[C],q=n.keys[N].buckets;if(Object.prototype.hasOwnProperty.call(p,N)){const A=String(p[N]);if(Object.prototype.hasOwnProperty.call(q,A))v=v.concat(q[A]);else{const{candidates:P,literals:M}=n.keys[N],U=ei.make(M),K=P.length===c?new Zo([new Zn(N,U,!1,!0)],[]):ei.make(P);b.push([S++,new Be(K,p,new Qn(N,p,new ni(U,p[N])))])}}else{const{candidates:A,literals:P}=n.keys[N],M=new Zn(N,ei.make(P),!1,!0),U=A.length===c?new Zo([M],[]):ei.make(A);b.push([S++,new Be(U,p,new Qn(N,p,new qh(M)))])}}else{const C=n.candidates.length===c?t:ei.make(n.candidates);b.push([S++,new ni(C,p)])}n.otherwise.length>0&&(v=v.concat(n.otherwise));let E;for(let C=0;C<v.length;C++){const N=v[C],q=l.get(N)(p,g);if(ir(q)&&(!E||E.length===0)){if(Bi(q))return q;b.push([S++,q.left])}else{const A=S++;E||(E=[]),E.push(P=>Og(()=>"finalResult"in P?rs:Gs(Iu(q),M=>(Bi(M)?P.finalResult=M:P.es.push([A,M.left]),rs))))}}const D=C=>Jg(C)?C.length===1&&C[0][1]._tag==="Type"?Lt(C[0][1]):Lt(new Be(t,p,vs(C))):Lt(new ni(t,p));if(E&&E.length>0){const C=E;return Og(()=>{const N={es:Zh(b)};return Gs(ry(C,q=>q(N),{concurrency:d,batching:m,discard:!0}),()=>"finalResult"in N?N.finalResult:D(N.es))})}return D(b)}}case"Suspend":{const n=I6(()=>In(Zl(t.f(),t.annotations),e));return(s,a)=>n()(s,a)}}},Pr=(t,e)=>n=>e(n)?te(n):Lt(new ni(t,n)),Wh=(t,e)=>{switch(t._tag){case"Declaration":{const n=W6(t);if(tr(n))return Wh(n.value,e);break}case"TypeLiteral":{const n=[];for(let s=0;s<t.propertySignatures.length;s++){const a=t.propertySignatures[s],c=e?lI(a.type):En(a.type);oI(c)&&!a.isOptional&&n.push([a.name,c])}return n}case"TupleType":{const n=[];for(let s=0;s<t.elements.length;s++){const a=t.elements[s],c=e?lI(a.type):En(a.type);oI(c)&&!a.isOptional&&n.push([s,c])}return n}case"Refinement":return Wh(t.from,e);case"Suspend":return Wh(t.f(),e);case"Transformation":return Wh(e?t.from:t.to,e)}return[]},f_t=(t,e)=>{const n={},s=[],a=[];for(let c=0;c<t.length;c++){const l=t[c],d=Wh(l,e);if(d.length>0){a.push(l);for(let m=0;m<d.length;m++){const[p,g]=d[m],b=String(g.literal);n[p]=n[p]||{buckets:{},literals:[],candidates:[]};const S=n[p].buckets;if(Object.prototype.hasOwnProperty.call(S,b)){if(m<d.length-1)continue;S[b].push(l),n[p].literals.push(g),n[p].candidates.push(l)}else{S[b]=[l],n[p].literals.push(g),n[p].candidates.push(l);break}}}else s.push(l)}return{keys:n,otherwise:s,candidates:a}},yq=t=>gR(t)?yq(t.from):t,td=(t,e,n,s)=>{if(s?.isEffectAllowed===!0||ir(t))return t;const a=new n6,c=tbt(t,{scheduler:a});a.flush();const l=c.unsafePoll();if(l){if(Ept(l))return te(l.value);const d=l.cause;return edt(d)?Lt(d.error):Lt(new hI(e,n,ndt(d)))}return Lt(new hI(e,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))},h_t=([t],[e])=>t>e?1:t<e?-1:0;function vs(t){return t.sort(h_t).map(e=>e[1])}const d_t=(t,e)=>{switch(t._tag){case"FinalTransformation":return e?t.decode:t.encode;case"ComposeTransformation":return te;case"TypeLiteralTransformation":return n=>{let s=te(n);for(const a of t.propertySignatureTransformations){const[c,l]=e?[a.from,a.to]:[a.to,a.from],d=e?a.decode:a.encode;s=Qs(s,p=>{const g=d(Object.prototype.hasOwnProperty.call(p,c)?jt(p[c]):St());return delete p[c],tr(g)&&(p[l]=g.value),p})}return s}}},sr=(t,e=[])=>({value:t,forest:e}),sy={formatIssue:t=>Qs(Lu(t),m_t),formatIssueSync:t=>{const e=sy.formatIssue(t);return ir(e)?Uot(e):ebt(e)},formatError:t=>sy.formatIssue(t.issue),formatErrorSync:t=>sy.formatIssueSync(t.issue)},m_t=t=>t.value+bq(`
`,t.forest),bq=(t,e)=>{let n="";const s=e.length;let a;for(let c=0;c<s;c++){a=e[c];const l=c===s-1;n+=t+(l?"└":"├")+"─ "+a.value,n+=bq(t+(s>1&&!l?"│  ":"   "),a.forest)}return n},p_t=t=>{switch(t){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},g_t=t=>{switch(t){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},_q=t=>"ast"in t?jt(t.ast):St(),Kw=te(void 0),y_t=t=>_q(t).pipe(F_(pbt),fr({onNone:()=>Kw,onSome:e=>{const n=e(t);return na(n)?te({message:n,override:!1}):Qyt(n)?jw(n,s=>({message:s,override:!1})):na(n.message)?te({message:n.message,override:n.override}):jw(n.message,s=>({message:s,override:n.override}))}})),_R=t=>e=>e._tag===t,Sq=_R("Composite"),mI=_R("Refinement"),pI=_R("Transformation"),dd=t=>Ka(y_t(t),e=>e!==void 0?!e.override&&(Sq(t)||mI(t)&&t.kind==="From"||pI(t)&&t.kind!=="Transformation")?pI(t)||mI(t)?dd(t.issue):Kw:te(e.message):Kw),vq=t=>_q(t).pipe(F_(_bt),Kot(e=>e(t)),Ws);function b_t(t){return Z6(t).pipe(Qa(()=>Q6(t)),Qa(()=>X6(t)),Qa(()=>fS(t)),Rn(()=>`{ ${t.from} | filter }`))}function __t(t){return t.message!==void 0?t.message:`Expected ${gR(t.ast)?b_t(t.ast):String(t.ast)}, actual ${ui(t.actual)}`}const S_t=t=>Qs(dd(t),e=>e??vq(t)??__t(t)),Rg=t=>vq(t)??String(t.ast),v_t=t=>t.message??"is forbidden",$_t=t=>t.message??"is unexpected",w_t=t=>{const e=gbt(t.ast);if(tr(e)){const n=e.value();return na(n)?te(n):n}return te(t.message??"is missing")},Lu=t=>{switch(t._tag){case"Type":return Qs(S_t(t),sr);case"Forbidden":return te(sr(Rg(t),[sr(v_t(t))]));case"Unexpected":return te(sr($_t(t)));case"Missing":return Qs(w_t(t),sr);case"Transformation":return Ka(dd(t),e=>e!==void 0?te(sr(e)):Qs(Lu(t.issue),n=>sr(Rg(t),[sr(p_t(t.kind),[n])])));case"Refinement":return Ka(dd(t),e=>e!==void 0?te(sr(e)):Qs(Lu(t.issue),n=>sr(Rg(t),[sr(g_t(t.kind),[n])])));case"Pointer":return Qs(Lu(t.issue),e=>sr(sbt(t.path),[e]));case"Composite":return Ka(dd(t),e=>{if(e!==void 0)return te(sr(e));const n=Rg(t);return F6(t.issues)?Qs(ry(t.issues,Lu),s=>sr(n,s)):Qs(Lu(t.issues),s=>sr(n,[s]))})}},E_t=F(t=>oo(t[0]),(t,...e)=>{const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}),T_t=F(t=>oo(t[0]),(t,...e)=>{const n={...t};for(const s of e)delete n[s];return n}),bb=Symbol.for("effect/Schema");function er(t){return class{[bb]=gI;static ast=t;static annotations(n){return er(ca(this.ast,n))}static pipe(){return Ct(this,arguments)}static toString(){return String(t)}static Type;static Encoded;static Context;static[bb]=gI}}const gI={_A:t=>t,_I:t=>t,_R:t=>t},yI={schemaId:fbt,message:D6,missingMessage:hR,identifier:z6,title:co,description:Ym,examples:U6,default:L6,documentation:hbt,jsonSchema:j6,arbitrary:P6,pretty:q6,equivalence:B6,concurrency:K6,batching:H6,parseIssueTitle:V6,parseOptions:Y6,decodingFallback:G6},SR=t=>{if(!t)return{};const e={...t};for(const n in yI)if(n in t){const s=yI[n];e[s]=t[n],delete e[n]}return e},ca=(t,e)=>Zl(t,SR(e));const Gd=t=>String(t.ast),Hw=t=>er(En(t.ast)),Wl=t=>Ut(t,bb)&&oo(t[bb]);function O_t(t){return mR(t)?ei.make(Kbt(t,e=>new qw(e))):new qw(t[0])}function $q(t,e=O_t(t)){return class extends er(e){static annotations(s){return $q(this.literals,ca(this.ast,s))}static literals=[...t]}}function zc(...t){return kn(t)?$q(t):Eq}const R_t=(t,e,n)=>vR(t,new hS(t.map(s=>s.ast),(...s)=>e.decode(...s.map(er)),(...s)=>e.encode(...s.map(er)),SR(n))),k_t=(t,e)=>{const n=()=>(a,c,l)=>t(a)?Yd(a):yR(new ni(l,a)),s=n;return vR([],new hS([],n,s,SR(e)))};function vR(t,e){return class extends er(e){static annotations(s){return vR(this.typeParameters,ca(this.ast,s))}static typeParameters=[...t]}}const wq=function(){if(Array.isArray(arguments[0])){const n=arguments[0],s=arguments[1],a=arguments[2];return R_t(n,s,a)}const t=arguments[0],e=arguments[1];return k_t(t,e)};class Eq extends er(eq){}class Tq extends er(nq){}class M_t extends er(zbt){}class Ns extends er(Nbt){}class Oq extends er(Fbt){}const A_t=t=>ei.make(t.map(e=>e.ast));function Rq(t,e=A_t(t)){return class extends er(e){static annotations(s){return Rq(this.members,ca(this.ast,s))}static members=[...t]}}function $R(...t){return mR(t)?Rq(t):kn(t)?t[0]:Eq}const C_t=(t,e)=>new dR(t.map(n=>Wl(n)?new mS(n.ast,!1):n.ast),e.map(n=>Wl(n)?new dS(n.ast):n.ast),!0);function _b(t,e,n=C_t(t,e)){return class extends er(n){static annotations(a){return _b(this.elements,this.rest,ca(this.ast,a))}static elements=[...t];static rest=[...e]}}function Vw(...t){return Array.isArray(t[0])?_b(t[0],t.slice(1)):_b(t,[])}function kq(t,e){return class extends _b([],[t],e){static annotations(s){return kq(this.value,ca(this.ast,s))}static value=t}}const Yw=t=>kq(t),N_t=Symbol.for("effect/PropertySignature"),Mq=t=>Ut(t,N_t),x_t=lq([hR]),I_t=(t,e)=>{const n=ol(t),s=[];if(n.length>0){const c=[],l=[],d=[];for(let m=0;m<n.length;m++){const p=n[m],g=t[p];if(Mq(g)){const b=g.ast;switch(b._tag){case"PropertySignatureDeclaration":{const S=b.type,v=b.isOptional,E=b.annotations;c.push(new Zn(p,S,v,!0,x_t(b))),l.push(new Zn(p,En(S),v,!0,E)),s.push(new Zn(p,S,v,!0,E));break}case"PropertySignatureTransformation":{const S=b.from.fromKey??p;c.push(new Zn(S,b.from.type,b.from.isOptional,!0,b.from.annotations)),l.push(new Zn(p,b.to.type,b.to.isOptional,!0,b.to.annotations)),d.push(new Ybt(S,p,b.decode,b.encode));break}}}else c.push(new Zn(p,g.ast,!1,!0)),l.push(new Zn(p,En(g.ast),!1,!0)),s.push(new Zn(p,g.ast,!1,!0))}if(kn(d)){const m=[],p=[];for(const g of e){const{indexSignatures:b,propertySignatures:S}=uI(g.key.ast,g.value.ast);S.forEach(v=>{c.push(v),l.push(new Zn(v.name,En(v.type),v.isOptional,v.isReadonly,v.annotations))}),b.forEach(v=>{m.push(v),p.push(new pS(v.parameter,En(v.type),v.isReadonly))})}return new oq(new Zo(c,m,{[Pw]:"Struct (Encoded side)"}),new Zo(l,p,{[Pw]:"Struct (Type side)"}),new Gbt(d))}}const a=[];for(const c of e){const{indexSignatures:l,propertySignatures:d}=uI(c.key.ast,c.value.ast);d.forEach(m=>s.push(m)),l.forEach(m=>a.push(m))}return new Zo(s,a)},F_t=(t,e)=>{const n=ol(t);for(const s of n){const a=t[s];if(e[s]===void 0&&Mq(a)){const c=a.ast,l=c._tag==="PropertySignatureDeclaration"?c.defaultValue:c.to.defaultValue;l!==void 0&&(e[s]=l())}}return e};function wR(t,e,n=I_t(t,e)){return class extends er(n){static annotations(a){return wR(this.fields,this.records,ca(this.ast,a))}static fields={...t};static records=[...e];static make=(a,c)=>{const l=F_t(t,{...a});return W_t(c)?l:o_t(this)(l)};static pick(...a){return ia(E_t(t,...a))}static omit(...a){return ia(T_t(t,...a))}}}function ia(t,...e){return wR(t,e)}function Aq(t,e,n){return class extends wR({},[{key:t,value:e}],n){static annotations(a){return Aq(t,e,ca(this.ast,a))}static key=t;static value=e}}const D_t=t=>Aq(t.key,t.value),z_t=t=>er(new pR(()=>t().ast));function Cq(t,e,n){return class extends er(n){static annotations(a){return Cq(this.from,this.to,ca(this.ast,a))}static from=t;static to=e}}const Nq=F(t=>Wl(t[0])&&Wl(t[1]),(t,e,n)=>Cq(t,e,new oq(t.ast,e.ast,new Vbt(n.decode,n.encode)))),xq=F(t=>Wl(t[0])&&Wl(t[1]),(t,e,n)=>Nq(t,e,{strict:!0,decode:(s,a,c,l)=>Yd(n.decode(s,l)),encode:(s,a,c,l)=>Yd(n.encode(s,l))}));class Sb extends Nq(Ns.annotations({description:"a string to be decoded into a bigint"}),M_t,{strict:!0,decode:(e,n,s)=>r_t(yct(e),()=>new ni(s,e,`Unable to decode ${JSON.stringify(e)} into a bigint`)),encode:e=>Yd(String(e))}).annotations({identifier:"BigInt"}){}const Iq=(t,e,n,s)=>s_t(t,{onFailure:a=>new Be(n,s,a),onSuccess:e}),U_t=ia({_tag:zc("None")}).annotations({description:"NoneEncoded"}),L_t=t=>ia({_tag:zc("Some"),value:t}).annotations({description:`SomeEncoded<${Gd(t)}>`}),j_t=t=>$R(U_t,L_t(t)).annotations({description:`OptionEncoded<${Gd(t)}>`}),Fq=t=>t._tag==="None"?St():jt(t.value),P_t=(t,e)=>n=>n.oneof(e,n.record({_tag:n.constant("None")}),n.record({_tag:n.constant("Some"),value:t(n)})).map(Fq),q_t=t=>fr({onNone:()=>"none()",onSome:e=>`some(${t(e)})`}),bI=t=>(e,n,s)=>Pot(e)?Le(e)?Yd(St()):Iq(t(e.value,n),jt,s,e):yR(new ni(s,e)),B_t=t=>wq([t],{decode:e=>bI(pq(e)),encode:e=>bI(gq(e))},{description:`Option<${Gd(t)}>`,pretty:q_t,arbitrary:P_t,equivalence:Hot}),K_t={_tag:"None"},H_t=t=>({_tag:"Some",value:t});function V_t(t){const e=t;return xq(j_t(e),B_t(Hw(e)),{strict:!0,decode:s=>Fq(s),encode:s=>fr(s,{onNone:()=>K_t,onSome:H_t})})}const Y_t=(t,e,n)=>s=>{const a=s.array(s.tuple(t(s),e(s)));return(n.depthIdentifier!==void 0?s.oneof(n,s.constant([]),a):a).map(c=>new Map(c))},G_t=(t,e)=>n=>`new Map([${Array.from(n.entries()).map(([s,a])=>`[${t(s)}, ${e(a)}]`).join(", ")}])`,J_t=(t,e)=>{const n=z_(Cl(([s,a],[c,l])=>t(s,c)&&e(a,l)));return Cl((s,a)=>n(Array.from(s.entries()),Array.from(a.entries())))},_I=t=>(e,n,s)=>Gat(e)?Iq(t(Array.from(e.entries()),n),a=>new Map(a),s,e):yR(new ni(s,e)),Q_t=(t,e,n)=>wq([t,e],{decode:(s,a)=>_I(pq(Yw(Vw(s,a)))),encode:(s,a)=>_I(gq(Yw(Vw(s,a))))},{description:n,pretty:G_t,arbitrary:Y_t,equivalence:J_t}),X_t=({key:t,value:e})=>Q_t(t,e,`ReadonlyMap<${Gd(t)}, ${Gd(e)}>`);function Z_t({key:t,value:e}){return xq(Yw(Vw(t,e)),X_t({key:Hw(t),value:Hw(e)}),{strict:!0,decode:n=>new Map(n),encode:n=>Array.from(n.entries())})}function W_t(t){return sO(t)?t:t?.disableValidation??!1}const tSt=ia({_tag:zc("Started"),startTime:Sb}),eSt=ia({_tag:zc("Ended"),startTime:Sb,endTime:Sb}),nSt=$R(tSt,eSt),rSt=ia({_tag:zc("ExternalSpan"),spanId:Ns,traceId:Ns,sampled:Oq}),Dq=ia({_tag:zc("Span"),spanId:Ns,traceId:Ns,name:Ns,sampled:Oq,attributes:Z_t({key:Ns,value:Tq}),status:nSt,parent:V_t(z_t(()=>iSt).annotations({title:"ParentSpan"}))}),sSt=ia({_tag:zc("SpanEvent"),traceId:Ns,spanId:Ns,name:Ns,startTime:Sb,attributes:D_t({key:Ns,value:Tq})}),iSt=$R(Dq,rSt);class aSt extends urt()("Booted",{}){}const oSt=Znt(aSt,Dq,sSt),cSt=Ent(oSt),uSt={_tag:"Booted"};class SI extends Kz()("VscodeWebview",{accessors:!0,scoped:Zu(function*(){const e=acquireVsCodeApi(),n=yield*zy(Sat(),a=>a.shutdown);e.postMessage(uSt);const s=a=>{n.unsafeOffer(cSt(a.data))};return yield*zy(xe(()=>{window.addEventListener("message",s)}),()=>xe(()=>{window.removeEventListener("message",s)})),{api:e,messages:n}})}){}class ER extends Kz()("RxStore",{accessors:!0,scoped:Zu(function*(){const e=yield*SI,n=yield*DN([]),s=yield*DN(BigInt(Date.now())*1000000n);function a(c){return rat(n,l=>{const d=l.filter(S=>S.id!==c.spanId),m=d.filter(S=>c._tag==="ExternalSpan"?!0:S.startTime<=c.status.startTime),p=d.filter(S=>c._tag==="ExternalSpan"?!1:S.startTime>c.status.startTime).map((S,v)=>({...S,depth:m.length+1+v})),g=BigInt(Date.now())*1000000n,b={id:c.spanId,name:c._tag==="ExternalSpan"?"<external>":c.name,startTime:c._tag==="Span"?c.status.startTime:g,endTime:c._tag==="Span"&&c.status._tag==="Ended"?c.status.endTime:g,color:c._tag==="ExternalSpan"?"#8e44ad":c.status._tag==="Started"?"#95a5a6":"#2980b9",depth:m.length};return[...m,b,...p]})}return yield*e.messages.take.pipe(ET(c=>{switch(c._tag){case"Span":return a(c)}}),yet,fet(vet),met),{traceEvents:n,timeOrigin:s}}),dependencies:[SI.Default]}){}const zq=kat(ER.Default).pipe(y4),vI=zq.subscribable(me(ER,t=>t.traceEvents)),lSt=Tat(t=>(t.subscribe(vI,e=>{t.setSelf(e)}),t.once(vI))),fSt=zq.subscribable(me(ER,t=>t.timeOrigin));function hSt(){const{value:t}=XN(lSt),{value:e}=XN(fSt),[n,s]=Fe.useState({startTime:e,endTime:e+60000000000n,offsetY:0}),a={barHeight:18,barPadding:4,timelineHeight:16},c=d=>{console.log("Trace clicked:",d)},l=d=>{d?console.log("Hovering over trace:",d):console.log("No longer hovering over any trace")};return Wn.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[Wn.jsx("div",{style:{height:"80px",borderBottom:"1px solid #e0e0e0"},children:Wn.jsx(bK,{traces:t,viewState:n,onViewStateChange:s,height:80,barHeight:a.barHeight||18,barPadding:a.barPadding||4})}),Wn.jsxs("div",{style:{flex:1,display:"flex",overflow:"hidden"},children:[Wn.jsx("div",{style:{width:"250px",borderRight:"1px solid #e0e0e0"},children:Wn.jsx(yK,{traces:t,viewState:n,options:a,width:250})}),Wn.jsx("div",{style:{flex:1},children:Wn.jsx($K,{traces:t,viewState:n,timeOrigin:e,onViewStateChange:s,options:a,onTraceClick:c,onTraceHover:l})})]})]})}mK.createRoot(document.getElementById("tracer-root")).render(Wn.jsx(Fe.StrictMode,{children:Wn.jsx(hSt,{})}));
