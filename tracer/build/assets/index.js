var TV=Object.defineProperty;var dO=e=>{throw TypeError(e)};var CV=(e,t,n)=>t in e?TV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var u=(e,t,n)=>CV(e,typeof t!="symbol"?t+"":t,n),pO=(e,t,n)=>t.has(e)||dO("Cannot "+n);var _l=(e,t,n)=>(pO(e,t,"read from private field"),n?n.call(e):t.get(e)),Qd=(e,t,n)=>t.has(e)?dO("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),vl=(e,t,n,r)=>(pO(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function RV(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var RN={exports:{}},py={},IN={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jh=Symbol.for("react.element"),IV=Symbol.for("react.portal"),PV=Symbol.for("react.fragment"),FV=Symbol.for("react.strict_mode"),NV=Symbol.for("react.profiler"),xV=Symbol.for("react.provider"),MV=Symbol.for("react.context"),AV=Symbol.for("react.forward_ref"),LV=Symbol.for("react.suspense"),DV=Symbol.for("react.memo"),jV=Symbol.for("react.lazy"),mO=Symbol.iterator;function BV(e){return e===null||typeof e!="object"?null:(e=mO&&e[mO]||e["@@iterator"],typeof e=="function"?e:null)}var PN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FN=Object.assign,NN={};function zu(e,t,n){this.props=e,this.context=t,this.refs=NN,this.updater=n||PN}zu.prototype.isReactComponent={};zu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xN(){}xN.prototype=zu.prototype;function ww(e,t,n){this.props=e,this.context=t,this.refs=NN,this.updater=n||PN}var $w=ww.prototype=new xN;$w.constructor=ww;FN($w,zu.prototype);$w.isPureReactComponent=!0;var gO=Array.isArray,MN=Object.prototype.hasOwnProperty,kw={current:null},AN={key:!0,ref:!0,__self:!0,__source:!0};function LN(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)MN.call(t,r)&&!AN.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:jh,type:e,key:i,ref:o,props:s,_owner:kw.current}}function zV(e,t){return{$$typeof:jh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ew(e){return typeof e=="object"&&e!==null&&e.$$typeof===jh}function UV(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yO=/\/+/g;function v_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?UV(""+e.key):t.toString(36)}function jp(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case jh:case IV:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+v_(o,0):r,gO(s)?(n="",e!=null&&(n=e.replace(yO,"$&/")+"/"),jp(s,t,n,"",function(l){return l})):s!=null&&(Ew(s)&&(s=zV(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(yO,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",gO(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+v_(i,a);o+=jp(i,t,n,c,s)}else if(c=BV(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+v_(i,a++),o+=jp(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Yd(e,t,n){if(e==null)return e;var r=[],s=0;return jp(e,r,"","",function(i){return t.call(n,i,s++)}),r}function VV(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var En={current:null},Bp={transition:null},qV={ReactCurrentDispatcher:En,ReactCurrentBatchConfig:Bp,ReactCurrentOwner:kw};function DN(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Yd,forEach:function(e,t,n){Yd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Yd(e,function(){t++}),t},toArray:function(e){return Yd(e,function(t){return t})||[]},only:function(e){if(!Ew(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=zu;me.Fragment=PV;me.Profiler=NV;me.PureComponent=ww;me.StrictMode=FV;me.Suspense=LV;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qV;me.act=DN;me.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=FN({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=kw.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)MN.call(t,c)&&!AN.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:jh,type:e.type,key:s,ref:i,props:r,_owner:o}};me.createContext=function(e){return e={$$typeof:MV,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xV,_context:e},e.Consumer=e};me.createElement=LN;me.createFactory=function(e){var t=LN.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:AV,render:e}};me.isValidElement=Ew;me.lazy=function(e){return{$$typeof:jV,_payload:{_status:-1,_result:e},_init:VV}};me.memo=function(e,t){return{$$typeof:DV,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=Bp.transition;Bp.transition={};try{e()}finally{Bp.transition=t}};me.unstable_act=DN;me.useCallback=function(e,t){return En.current.useCallback(e,t)};me.useContext=function(e){return En.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return En.current.useDeferredValue(e)};me.useEffect=function(e,t){return En.current.useEffect(e,t)};me.useId=function(){return En.current.useId()};me.useImperativeHandle=function(e,t,n){return En.current.useImperativeHandle(e,t,n)};me.useInsertionEffect=function(e,t){return En.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return En.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return En.current.useMemo(e,t)};me.useReducer=function(e,t,n){return En.current.useReducer(e,t,n)};me.useRef=function(e){return En.current.useRef(e)};me.useState=function(e){return En.current.useState(e)};me.useSyncExternalStore=function(e,t,n){return En.current.useSyncExternalStore(e,t,n)};me.useTransition=function(){return En.current.useTransition()};me.version="18.3.1";IN.exports=me;var xa=IN.exports;const KV=RV(xa);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HV=xa,WV=Symbol.for("react.element"),JV=Symbol.for("react.fragment"),GV=Object.prototype.hasOwnProperty,QV=HV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YV={key:!0,ref:!0,__self:!0,__source:!0};function jN(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)GV.call(t,r)&&!YV.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:WV,type:e,key:i,ref:o,props:s,_owner:QV.current}}py.Fragment=JV;py.jsx=jN;py.jsxs=jN;RN.exports=py;var h1=RN.exports,BN={exports:{}},or={},zN={exports:{}},UN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(x,V){var K=x.length;x.push(V);e:for(;0<K;){var ot=K-1>>>1,xt=x[ot];if(0<s(xt,V))x[ot]=V,x[K]=xt,K=ot;else break e}}function n(x){return x.length===0?null:x[0]}function r(x){if(x.length===0)return null;var V=x[0],K=x.pop();if(K!==V){x[0]=K;e:for(var ot=0,xt=x.length,Jd=xt>>>1;ot<Jd;){var ko=2*(ot+1)-1,__=x[ko],Eo=ko+1,Gd=x[Eo];if(0>s(__,K))Eo<xt&&0>s(Gd,__)?(x[ot]=Gd,x[Eo]=K,ot=Eo):(x[ot]=__,x[ko]=K,ot=ko);else if(Eo<xt&&0>s(Gd,K))x[ot]=Gd,x[Eo]=K,ot=Eo;else break e}}return V}function s(x,V){var K=x.sortIndex-V.sortIndex;return K!==0?K:x.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],l=[],f=1,h=null,d=3,p=!1,_=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(x){for(var V=n(l);V!==null;){if(V.callback===null)r(l);else if(V.startTime<=x)r(l),V.sortIndex=V.expirationTime,t(c,V);else break;V=n(l)}}function $(x){if(b=!1,y(x),!_)if(n(c)!==null)_=!0,ye(T);else{var V=n(l);V!==null&&Z($,V.startTime-x)}}function T(x,V){_=!1,b&&(b=!1,m(O),O=-1),p=!0;var K=d;try{for(y(V),h=n(c);h!==null&&(!(h.expirationTime>V)||x&&!M());){var ot=h.callback;if(typeof ot=="function"){h.callback=null,d=h.priorityLevel;var xt=ot(h.expirationTime<=V);V=e.unstable_now(),typeof xt=="function"?h.callback=xt:h===n(c)&&r(c),y(V)}else r(c);h=n(c)}if(h!==null)var Jd=!0;else{var ko=n(l);ko!==null&&Z($,ko.startTime-V),Jd=!1}return Jd}finally{h=null,d=K,p=!1}}var C=!1,E=null,O=-1,A=5,I=-1;function M(){return!(e.unstable_now()-I<A)}function U(){if(E!==null){var x=e.unstable_now();I=x;var V=!0;try{V=E(!0,x)}finally{V?X():(C=!1,E=null)}}else C=!1}var X;if(typeof g=="function")X=function(){g(U)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,De=ve.port2;ve.port1.onmessage=U,X=function(){De.postMessage(null)}}else X=function(){w(U,0)};function ye(x){E=x,C||(C=!0,X())}function Z(x,V){O=w(function(){x(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(x){x.callback=null},e.unstable_continueExecution=function(){_||p||(_=!0,ye(T))},e.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<x?Math.floor(1e3/x):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(x){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var K=d;d=V;try{return x()}finally{d=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(x,V){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var K=d;d=x;try{return V()}finally{d=K}},e.unstable_scheduleCallback=function(x,V,K){var ot=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ot+K:ot):K=ot,x){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=K+xt,x={id:f++,callback:V,priorityLevel:x,startTime:K,expirationTime:xt,sortIndex:-1},K>ot?(x.sortIndex=K,t(l,x),n(c)===null&&x===n(l)&&(b?(m(O),O=-1):b=!0,Z($,K-ot))):(x.sortIndex=xt,t(c,x),_||p||(_=!0,ye(T))),x},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(x){var V=d;return function(){var K=d;d=V;try{return x.apply(this,arguments)}finally{d=K}}}})(UN);zN.exports=UN;var d1=zN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XV=xa,nr=d1;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VN=new Set,Lf={};function Ma(e,t){Kc(e,t),Kc(e+"Capture",t)}function Kc(e,t){for(Lf[e]=t,e=0;e<t.length;e++)VN.add(t[e])}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p1=Object.prototype.hasOwnProperty,ZV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,SO={},_O={};function eq(e){return p1.call(_O,e)?!0:p1.call(SO,e)?!1:ZV.test(e)?_O[e]=!0:(SO[e]=!0,!1)}function tq(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nq(e,t,n,r){if(t===null||typeof t>"u"||tq(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function On(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){sn[e]=new On(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];sn[t]=new On(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){sn[e]=new On(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){sn[e]=new On(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){sn[e]=new On(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){sn[e]=new On(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){sn[e]=new On(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){sn[e]=new On(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){sn[e]=new On(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ow=/[\-:]([a-z])/g;function Tw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ow,Tw);sn[t]=new On(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ow,Tw);sn[t]=new On(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ow,Tw);sn[t]=new On(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){sn[e]=new On(e,1,!1,e.toLowerCase(),null,!1,!1)});sn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){sn[e]=new On(e,1,!1,e.toLowerCase(),null,!0,!0)});function Cw(e,t,n,r){var s=sn.hasOwnProperty(t)?sn[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nq(t,n,s,r)&&(n=null),r||s===null?eq(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var vi=XV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xd=Symbol.for("react.element"),oc=Symbol.for("react.portal"),ac=Symbol.for("react.fragment"),Rw=Symbol.for("react.strict_mode"),m1=Symbol.for("react.profiler"),qN=Symbol.for("react.provider"),KN=Symbol.for("react.context"),Iw=Symbol.for("react.forward_ref"),g1=Symbol.for("react.suspense"),y1=Symbol.for("react.suspense_list"),Pw=Symbol.for("react.memo"),Oi=Symbol.for("react.lazy"),HN=Symbol.for("react.offscreen"),vO=Symbol.iterator;function bl(e){return e===null||typeof e!="object"?null:(e=vO&&e[vO]||e["@@iterator"],typeof e=="function"?e:null)}var et=Object.assign,b_;function Jl(e){if(b_===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);b_=t&&t[1]||""}return`
`+b_+e}var w_=!1;function $_(e,t){if(!e||w_)return"";w_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{w_=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Jl(e):""}function rq(e){switch(e.tag){case 5:return Jl(e.type);case 16:return Jl("Lazy");case 13:return Jl("Suspense");case 19:return Jl("SuspenseList");case 0:case 2:case 15:return e=$_(e.type,!1),e;case 11:return e=$_(e.type.render,!1),e;case 1:return e=$_(e.type,!0),e;default:return""}}function S1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ac:return"Fragment";case oc:return"Portal";case m1:return"Profiler";case Rw:return"StrictMode";case g1:return"Suspense";case y1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case KN:return(e.displayName||"Context")+".Consumer";case qN:return(e._context.displayName||"Context")+".Provider";case Iw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pw:return t=e.displayName||null,t!==null?t:S1(e.type)||"Memo";case Oi:t=e._payload,e=e._init;try{return S1(e(t))}catch{}}return null}function sq(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S1(t);case 8:return t===Rw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function so(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function WN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function iq(e){var t=WN(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zd(e){e._valueTracker||(e._valueTracker=iq(e))}function JN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=WN(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Nm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _1(e,t){var n=t.checked;return et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function bO(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=so(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function GN(e,t){t=t.checked,t!=null&&Cw(e,"checked",t,!1)}function v1(e,t){GN(e,t);var n=so(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?b1(e,t.type,n):t.hasOwnProperty("defaultValue")&&b1(e,t.type,so(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wO(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function b1(e,t,n){(t!=="number"||Nm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Gl=Array.isArray;function kc(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+so(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function w1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $O(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(F(92));if(Gl(n)){if(1<n.length)throw Error(F(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:so(n)}}function QN(e,t){var n=so(t.value),r=so(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function kO(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function YN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?YN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ep,XN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ep=ep||document.createElement("div"),ep.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ep.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Df(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var lf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oq=["Webkit","ms","Moz","O"];Object.keys(lf).forEach(function(e){oq.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),lf[t]=lf[e]})});function ZN(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||lf.hasOwnProperty(e)&&lf[e]?(""+t).trim():t+"px"}function ex(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ZN(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var aq=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function k1(e,t){if(t){if(aq[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function E1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var O1=null;function Fw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var T1=null,Ec=null,Oc=null;function EO(e){if(e=Uh(e)){if(typeof T1!="function")throw Error(F(280));var t=e.stateNode;t&&(t=_y(t),T1(e.stateNode,e.type,t))}}function tx(e){Ec?Oc?Oc.push(e):Oc=[e]:Ec=e}function nx(){if(Ec){var e=Ec,t=Oc;if(Oc=Ec=null,EO(e),t)for(e=0;e<t.length;e++)EO(t[e])}}function rx(e,t){return e(t)}function sx(){}var k_=!1;function ix(e,t,n){if(k_)return e(t,n);k_=!0;try{return rx(e,t,n)}finally{k_=!1,(Ec!==null||Oc!==null)&&(sx(),nx())}}function jf(e,t){var n=e.stateNode;if(n===null)return null;var r=_y(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(F(231,t,typeof n));return n}var C1=!1;if(ii)try{var wl={};Object.defineProperty(wl,"passive",{get:function(){C1=!0}}),window.addEventListener("test",wl,wl),window.removeEventListener("test",wl,wl)}catch{C1=!1}function cq(e,t,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(f){this.onError(f)}}var ff=!1,xm=null,Mm=!1,R1=null,uq={onError:function(e){ff=!0,xm=e}};function lq(e,t,n,r,s,i,o,a,c){ff=!1,xm=null,cq.apply(uq,arguments)}function fq(e,t,n,r,s,i,o,a,c){if(lq.apply(this,arguments),ff){if(ff){var l=xm;ff=!1,xm=null}else throw Error(F(198));Mm||(Mm=!0,R1=l)}}function Aa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ox(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function OO(e){if(Aa(e)!==e)throw Error(F(188))}function hq(e){var t=e.alternate;if(!t){if(t=Aa(e),t===null)throw Error(F(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return OO(s),e;if(i===r)return OO(s),t;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?e:t}function ax(e){return e=hq(e),e!==null?cx(e):null}function cx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cx(e);if(t!==null)return t;e=e.sibling}return null}var ux=nr.unstable_scheduleCallback,TO=nr.unstable_cancelCallback,dq=nr.unstable_shouldYield,pq=nr.unstable_requestPaint,ft=nr.unstable_now,mq=nr.unstable_getCurrentPriorityLevel,Nw=nr.unstable_ImmediatePriority,lx=nr.unstable_UserBlockingPriority,Am=nr.unstable_NormalPriority,gq=nr.unstable_LowPriority,fx=nr.unstable_IdlePriority,my=null,_s=null;function yq(e){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(my,e,void 0,(e.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:vq,Sq=Math.log,_q=Math.LN2;function vq(e){return e>>>=0,e===0?32:31-(Sq(e)/_q|0)|0}var tp=64,np=4194304;function Ql(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Lm(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ql(a):(i&=o,i!==0&&(r=Ql(i)))}else o=n&~s,o!==0?r=Ql(o):i!==0&&(r=Ql(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Zr(t),s=1<<n,r|=e[n],t&=~s;return r}function bq(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wq(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Zr(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=bq(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function I1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hx(){var e=tp;return tp<<=1,!(tp&4194240)&&(tp=64),e}function E_(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zr(t),e[t]=n}function $q(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Zr(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function xw(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Zr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ce=0;function dx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var px,Mw,mx,gx,yx,P1=!1,rp=[],zi=null,Ui=null,Vi=null,Bf=new Map,zf=new Map,Pi=[],kq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function CO(e,t){switch(e){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":Bf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zf.delete(t.pointerId)}}function $l(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Uh(t),t!==null&&Mw(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Eq(e,t,n,r,s){switch(t){case"focusin":return zi=$l(zi,e,t,n,r,s),!0;case"dragenter":return Ui=$l(Ui,e,t,n,r,s),!0;case"mouseover":return Vi=$l(Vi,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Bf.set(i,$l(Bf.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,zf.set(i,$l(zf.get(i)||null,e,t,n,r,s)),!0}return!1}function Sx(e){var t=Do(e.target);if(t!==null){var n=Aa(t);if(n!==null){if(t=n.tag,t===13){if(t=ox(n),t!==null){e.blockedOn=t,yx(e.priority,function(){mx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=F1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);O1=r,n.target.dispatchEvent(r),O1=null}else return t=Uh(n),t!==null&&Mw(t),e.blockedOn=n,!1;t.shift()}return!0}function RO(e,t,n){zp(e)&&n.delete(t)}function Oq(){P1=!1,zi!==null&&zp(zi)&&(zi=null),Ui!==null&&zp(Ui)&&(Ui=null),Vi!==null&&zp(Vi)&&(Vi=null),Bf.forEach(RO),zf.forEach(RO)}function kl(e,t){e.blockedOn===t&&(e.blockedOn=null,P1||(P1=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,Oq)))}function Uf(e){function t(s){return kl(s,e)}if(0<rp.length){kl(rp[0],e);for(var n=1;n<rp.length;n++){var r=rp[n];r.blockedOn===e&&(r.blockedOn=null)}}for(zi!==null&&kl(zi,e),Ui!==null&&kl(Ui,e),Vi!==null&&kl(Vi,e),Bf.forEach(t),zf.forEach(t),n=0;n<Pi.length;n++)r=Pi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pi.length&&(n=Pi[0],n.blockedOn===null);)Sx(n),n.blockedOn===null&&Pi.shift()}var Tc=vi.ReactCurrentBatchConfig,Dm=!0;function Tq(e,t,n,r){var s=Ce,i=Tc.transition;Tc.transition=null;try{Ce=1,Aw(e,t,n,r)}finally{Ce=s,Tc.transition=i}}function Cq(e,t,n,r){var s=Ce,i=Tc.transition;Tc.transition=null;try{Ce=4,Aw(e,t,n,r)}finally{Ce=s,Tc.transition=i}}function Aw(e,t,n,r){if(Dm){var s=F1(e,t,n,r);if(s===null)M_(e,t,r,jm,n),CO(e,r);else if(Eq(s,e,t,n,r))r.stopPropagation();else if(CO(e,r),t&4&&-1<kq.indexOf(e)){for(;s!==null;){var i=Uh(s);if(i!==null&&px(i),i=F1(e,t,n,r),i===null&&M_(e,t,r,jm,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else M_(e,t,r,null,n)}}var jm=null;function F1(e,t,n,r){if(jm=null,e=Fw(r),e=Do(e),e!==null)if(t=Aa(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ox(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jm=e,null}function _x(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mq()){case Nw:return 1;case lx:return 4;case Am:case gq:return 16;case fx:return 536870912;default:return 16}default:return 16}}var Mi=null,Lw=null,Up=null;function vx(){if(Up)return Up;var e,t=Lw,n=t.length,r,s="value"in Mi?Mi.value:Mi.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Up=s.slice(e,1<r?1-r:void 0)}function Vp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sp(){return!0}function IO(){return!1}function ar(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?sp:IO,this.isPropagationStopped=IO,this}return et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sp)},persist:function(){},isPersistent:sp}),t}var Uu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dw=ar(Uu),zh=et({},Uu,{view:0,detail:0}),Rq=ar(zh),O_,T_,El,gy=et({},zh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==El&&(El&&e.type==="mousemove"?(O_=e.screenX-El.screenX,T_=e.screenY-El.screenY):T_=O_=0,El=e),O_)},movementY:function(e){return"movementY"in e?e.movementY:T_}}),PO=ar(gy),Iq=et({},gy,{dataTransfer:0}),Pq=ar(Iq),Fq=et({},zh,{relatedTarget:0}),C_=ar(Fq),Nq=et({},Uu,{animationName:0,elapsedTime:0,pseudoElement:0}),xq=ar(Nq),Mq=et({},Uu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Aq=ar(Mq),Lq=et({},Uu,{data:0}),FO=ar(Lq),Dq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zq(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Bq[e])?!!t[e]:!1}function jw(){return zq}var Uq=et({},zh,{key:function(e){if(e.key){var t=Dq[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jq[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jw,charCode:function(e){return e.type==="keypress"?Vp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vq=ar(Uq),qq=et({},gy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),NO=ar(qq),Kq=et({},zh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jw}),Hq=ar(Kq),Wq=et({},Uu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jq=ar(Wq),Gq=et({},gy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qq=ar(Gq),Yq=[9,13,27,32],Bw=ii&&"CompositionEvent"in window,hf=null;ii&&"documentMode"in document&&(hf=document.documentMode);var Xq=ii&&"TextEvent"in window&&!hf,bx=ii&&(!Bw||hf&&8<hf&&11>=hf),xO=" ",MO=!1;function wx(e,t){switch(e){case"keyup":return Yq.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $x(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cc=!1;function Zq(e,t){switch(e){case"compositionend":return $x(t);case"keypress":return t.which!==32?null:(MO=!0,xO);case"textInput":return e=t.data,e===xO&&MO?null:e;default:return null}}function e5(e,t){if(cc)return e==="compositionend"||!Bw&&wx(e,t)?(e=vx(),Up=Lw=Mi=null,cc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bx&&t.locale!=="ko"?null:t.data;default:return null}}var t5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AO(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!t5[e.type]:t==="textarea"}function kx(e,t,n,r){tx(r),t=Bm(t,"onChange"),0<t.length&&(n=new Dw("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var df=null,Vf=null;function n5(e){Mx(e,0)}function yy(e){var t=fc(e);if(JN(t))return e}function r5(e,t){if(e==="change")return t}var Ex=!1;if(ii){var R_;if(ii){var I_="oninput"in document;if(!I_){var LO=document.createElement("div");LO.setAttribute("oninput","return;"),I_=typeof LO.oninput=="function"}R_=I_}else R_=!1;Ex=R_&&(!document.documentMode||9<document.documentMode)}function DO(){df&&(df.detachEvent("onpropertychange",Ox),Vf=df=null)}function Ox(e){if(e.propertyName==="value"&&yy(Vf)){var t=[];kx(t,Vf,e,Fw(e)),ix(n5,t)}}function s5(e,t,n){e==="focusin"?(DO(),df=t,Vf=n,df.attachEvent("onpropertychange",Ox)):e==="focusout"&&DO()}function i5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yy(Vf)}function o5(e,t){if(e==="click")return yy(t)}function a5(e,t){if(e==="input"||e==="change")return yy(t)}function c5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rs=typeof Object.is=="function"?Object.is:c5;function qf(e,t){if(rs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!p1.call(t,s)||!rs(e[s],t[s]))return!1}return!0}function jO(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function BO(e,t){var n=jO(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jO(n)}}function Tx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cx(){for(var e=window,t=Nm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Nm(e.document)}return t}function zw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function u5(e){var t=Cx(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Tx(n.ownerDocument.documentElement,n)){if(r!==null&&zw(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=BO(n,i);var o=BO(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var l5=ii&&"documentMode"in document&&11>=document.documentMode,uc=null,N1=null,pf=null,x1=!1;function zO(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;x1||uc==null||uc!==Nm(r)||(r=uc,"selectionStart"in r&&zw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pf&&qf(pf,r)||(pf=r,r=Bm(N1,"onSelect"),0<r.length&&(t=new Dw("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=uc)))}function ip(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var lc={animationend:ip("Animation","AnimationEnd"),animationiteration:ip("Animation","AnimationIteration"),animationstart:ip("Animation","AnimationStart"),transitionend:ip("Transition","TransitionEnd")},P_={},Rx={};ii&&(Rx=document.createElement("div").style,"AnimationEvent"in window||(delete lc.animationend.animation,delete lc.animationiteration.animation,delete lc.animationstart.animation),"TransitionEvent"in window||delete lc.transitionend.transition);function Sy(e){if(P_[e])return P_[e];if(!lc[e])return e;var t=lc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Rx)return P_[e]=t[n];return e}var Ix=Sy("animationend"),Px=Sy("animationiteration"),Fx=Sy("animationstart"),Nx=Sy("transitionend"),xx=new Map,UO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mo(e,t){xx.set(e,t),Ma(t,[e])}for(var F_=0;F_<UO.length;F_++){var N_=UO[F_],f5=N_.toLowerCase(),h5=N_[0].toUpperCase()+N_.slice(1);mo(f5,"on"+h5)}mo(Ix,"onAnimationEnd");mo(Px,"onAnimationIteration");mo(Fx,"onAnimationStart");mo("dblclick","onDoubleClick");mo("focusin","onFocus");mo("focusout","onBlur");mo(Nx,"onTransitionEnd");Kc("onMouseEnter",["mouseout","mouseover"]);Kc("onMouseLeave",["mouseout","mouseover"]);Kc("onPointerEnter",["pointerout","pointerover"]);Kc("onPointerLeave",["pointerout","pointerover"]);Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yl));function VO(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,fq(r,t,void 0,e),e.currentTarget=null}function Mx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;VO(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;VO(s,a,l),i=c}}}if(Mm)throw e=R1,Mm=!1,R1=null,e}function je(e,t){var n=t[j1];n===void 0&&(n=t[j1]=new Set);var r=e+"__bubble";n.has(r)||(Ax(t,e,2,!1),n.add(r))}function x_(e,t,n){var r=0;t&&(r|=4),Ax(n,e,r,t)}var op="_reactListening"+Math.random().toString(36).slice(2);function Kf(e){if(!e[op]){e[op]=!0,VN.forEach(function(n){n!=="selectionchange"&&(d5.has(n)||x_(n,!1,e),x_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[op]||(t[op]=!0,x_("selectionchange",!1,t))}}function Ax(e,t,n,r){switch(_x(t)){case 1:var s=Tq;break;case 4:s=Cq;break;default:s=Aw}n=s.bind(null,t,n,e),s=void 0,!C1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function M_(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Do(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}ix(function(){var l=i,f=Fw(n),h=[];e:{var d=xx.get(e);if(d!==void 0){var p=Dw,_=e;switch(e){case"keypress":if(Vp(n)===0)break e;case"keydown":case"keyup":p=Vq;break;case"focusin":_="focus",p=C_;break;case"focusout":_="blur",p=C_;break;case"beforeblur":case"afterblur":p=C_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=PO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Pq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Hq;break;case Ix:case Px:case Fx:p=xq;break;case Nx:p=Jq;break;case"scroll":p=Rq;break;case"wheel":p=Qq;break;case"copy":case"cut":case"paste":p=Aq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=NO}var b=(t&4)!==0,w=!b&&e==="scroll",m=b?d!==null?d+"Capture":null:d;b=[];for(var g=l,y;g!==null;){y=g;var $=y.stateNode;if(y.tag===5&&$!==null&&(y=$,m!==null&&($=jf(g,m),$!=null&&b.push(Hf(g,$,y)))),w)break;g=g.return}0<b.length&&(d=new p(d,_,null,n,f),h.push({event:d,listeners:b}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",d&&n!==O1&&(_=n.relatedTarget||n.fromElement)&&(Do(_)||_[oi]))break e;if((p||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,p?(_=n.relatedTarget||n.toElement,p=l,_=_?Do(_):null,_!==null&&(w=Aa(_),_!==w||_.tag!==5&&_.tag!==6)&&(_=null)):(p=null,_=l),p!==_)){if(b=PO,$="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(b=NO,$="onPointerLeave",m="onPointerEnter",g="pointer"),w=p==null?d:fc(p),y=_==null?d:fc(_),d=new b($,g+"leave",p,n,f),d.target=w,d.relatedTarget=y,$=null,Do(f)===l&&(b=new b(m,g+"enter",_,n,f),b.target=y,b.relatedTarget=w,$=b),w=$,p&&_)t:{for(b=p,m=_,g=0,y=b;y;y=Ua(y))g++;for(y=0,$=m;$;$=Ua($))y++;for(;0<g-y;)b=Ua(b),g--;for(;0<y-g;)m=Ua(m),y--;for(;g--;){if(b===m||m!==null&&b===m.alternate)break t;b=Ua(b),m=Ua(m)}b=null}else b=null;p!==null&&qO(h,d,p,b,!1),_!==null&&w!==null&&qO(h,w,_,b,!0)}}e:{if(d=l?fc(l):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var T=r5;else if(AO(d))if(Ex)T=a5;else{T=i5;var C=s5}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=o5);if(T&&(T=T(e,l))){kx(h,T,n,f);break e}C&&C(e,d,l),e==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&b1(d,"number",d.value)}switch(C=l?fc(l):window,e){case"focusin":(AO(C)||C.contentEditable==="true")&&(uc=C,N1=l,pf=null);break;case"focusout":pf=N1=uc=null;break;case"mousedown":x1=!0;break;case"contextmenu":case"mouseup":case"dragend":x1=!1,zO(h,n,f);break;case"selectionchange":if(l5)break;case"keydown":case"keyup":zO(h,n,f)}var E;if(Bw)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else cc?wx(e,n)&&(O="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(bx&&n.locale!=="ko"&&(cc||O!=="onCompositionStart"?O==="onCompositionEnd"&&cc&&(E=vx()):(Mi=f,Lw="value"in Mi?Mi.value:Mi.textContent,cc=!0)),C=Bm(l,O),0<C.length&&(O=new FO(O,e,null,n,f),h.push({event:O,listeners:C}),E?O.data=E:(E=$x(n),E!==null&&(O.data=E)))),(E=Xq?Zq(e,n):e5(e,n))&&(l=Bm(l,"onBeforeInput"),0<l.length&&(f=new FO("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:l}),f.data=E))}Mx(h,t)})}function Hf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bm(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=jf(e,n),i!=null&&r.unshift(Hf(e,i,s)),i=jf(e,t),i!=null&&r.push(Hf(e,i,s))),e=e.return}return r}function Ua(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qO(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=jf(n,i),c!=null&&o.unshift(Hf(n,c,a))):s||(c=jf(n,i),c!=null&&o.push(Hf(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var p5=/\r\n?/g,m5=/\u0000|\uFFFD/g;function KO(e){return(typeof e=="string"?e:""+e).replace(p5,`
`).replace(m5,"")}function ap(e,t,n){if(t=KO(t),KO(e)!==t&&n)throw Error(F(425))}function zm(){}var M1=null,A1=null;function L1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var D1=typeof setTimeout=="function"?setTimeout:void 0,g5=typeof clearTimeout=="function"?clearTimeout:void 0,HO=typeof Promise=="function"?Promise:void 0,y5=typeof queueMicrotask=="function"?queueMicrotask:typeof HO<"u"?function(e){return HO.resolve(null).then(e).catch(S5)}:D1;function S5(e){setTimeout(function(){throw e})}function A_(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Uf(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Uf(t)}function qi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function WO(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Vu=Math.random().toString(36).slice(2),gs="__reactFiber$"+Vu,Wf="__reactProps$"+Vu,oi="__reactContainer$"+Vu,j1="__reactEvents$"+Vu,_5="__reactListeners$"+Vu,v5="__reactHandles$"+Vu;function Do(e){var t=e[gs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[oi]||n[gs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=WO(e);e!==null;){if(n=e[gs])return n;e=WO(e)}return t}e=n,n=e.parentNode}return null}function Uh(e){return e=e[gs]||e[oi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function _y(e){return e[Wf]||null}var B1=[],hc=-1;function go(e){return{current:e}}function ze(e){0>hc||(e.current=B1[hc],B1[hc]=null,hc--)}function Ae(e,t){hc++,B1[hc]=e.current,e.current=t}var io={},mn=go(io),Mn=go(!1),aa=io;function Hc(e,t){var n=e.type.contextTypes;if(!n)return io;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function An(e){return e=e.childContextTypes,e!=null}function Um(){ze(Mn),ze(mn)}function JO(e,t,n){if(mn.current!==io)throw Error(F(168));Ae(mn,t),Ae(Mn,n)}function Lx(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(F(108,sq(e)||"Unknown",s));return et({},n,r)}function Vm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||io,aa=mn.current,Ae(mn,e),Ae(Mn,Mn.current),!0}function GO(e,t,n){var r=e.stateNode;if(!r)throw Error(F(169));n?(e=Lx(e,t,aa),r.__reactInternalMemoizedMergedChildContext=e,ze(Mn),ze(mn),Ae(mn,e)):ze(Mn),Ae(Mn,n)}var Ls=null,vy=!1,L_=!1;function Dx(e){Ls===null?Ls=[e]:Ls.push(e)}function b5(e){vy=!0,Dx(e)}function yo(){if(!L_&&Ls!==null){L_=!0;var e=0,t=Ce;try{var n=Ls;for(Ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ls=null,vy=!1}catch(s){throw Ls!==null&&(Ls=Ls.slice(e+1)),ux(Nw,yo),s}finally{Ce=t,L_=!1}}return null}var dc=[],pc=0,qm=null,Km=0,yr=[],Sr=0,ca=null,Vs=1,qs="";function Io(e,t){dc[pc++]=Km,dc[pc++]=qm,qm=e,Km=t}function jx(e,t,n){yr[Sr++]=Vs,yr[Sr++]=qs,yr[Sr++]=ca,ca=e;var r=Vs;e=qs;var s=32-Zr(r)-1;r&=~(1<<s),n+=1;var i=32-Zr(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Vs=1<<32-Zr(t)+s|n<<s|r,qs=i+e}else Vs=1<<i|n<<s|r,qs=e}function Uw(e){e.return!==null&&(Io(e,1),jx(e,1,0))}function Vw(e){for(;e===qm;)qm=dc[--pc],dc[pc]=null,Km=dc[--pc],dc[pc]=null;for(;e===ca;)ca=yr[--Sr],yr[Sr]=null,qs=yr[--Sr],yr[Sr]=null,Vs=yr[--Sr],yr[Sr]=null}var tr=null,Xn=null,Ve=!1,Kr=null;function Bx(e,t){var n=$r(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function QO(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tr=e,Xn=qi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tr=e,Xn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ca!==null?{id:Vs,overflow:qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=$r(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,tr=e,Xn=null,!0):!1;default:return!1}}function z1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function U1(e){if(Ve){var t=Xn;if(t){var n=t;if(!QO(e,t)){if(z1(e))throw Error(F(418));t=qi(n.nextSibling);var r=tr;t&&QO(e,t)?Bx(r,n):(e.flags=e.flags&-4097|2,Ve=!1,tr=e)}}else{if(z1(e))throw Error(F(418));e.flags=e.flags&-4097|2,Ve=!1,tr=e}}}function YO(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tr=e}function cp(e){if(e!==tr)return!1;if(!Ve)return YO(e),Ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!L1(e.type,e.memoizedProps)),t&&(t=Xn)){if(z1(e))throw zx(),Error(F(418));for(;t;)Bx(e,t),t=qi(t.nextSibling)}if(YO(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Xn=qi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Xn=null}}else Xn=tr?qi(e.stateNode.nextSibling):null;return!0}function zx(){for(var e=Xn;e;)e=qi(e.nextSibling)}function Wc(){Xn=tr=null,Ve=!1}function qw(e){Kr===null?Kr=[e]:Kr.push(e)}var w5=vi.ReactCurrentBatchConfig;function Ol(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,e))}return e}function up(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function XO(e){var t=e._init;return t(e._payload)}function Ux(e){function t(m,g){if(e){var y=m.deletions;y===null?(m.deletions=[g],m.flags|=16):y.push(g)}}function n(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function s(m,g){return m=Ji(m,g),m.index=0,m.sibling=null,m}function i(m,g,y){return m.index=y,e?(y=m.alternate,y!==null?(y=y.index,y<g?(m.flags|=2,g):y):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,g,y,$){return g===null||g.tag!==6?(g=q_(y,m.mode,$),g.return=m,g):(g=s(g,y),g.return=m,g)}function c(m,g,y,$){var T=y.type;return T===ac?f(m,g,y.props.children,$,y.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Oi&&XO(T)===g.type)?($=s(g,y.props),$.ref=Ol(m,g,y),$.return=m,$):($=Qp(y.type,y.key,y.props,null,m.mode,$),$.ref=Ol(m,g,y),$.return=m,$)}function l(m,g,y,$){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=K_(y,m.mode,$),g.return=m,g):(g=s(g,y.children||[]),g.return=m,g)}function f(m,g,y,$,T){return g===null||g.tag!==7?(g=Go(y,m.mode,$,T),g.return=m,g):(g=s(g,y),g.return=m,g)}function h(m,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=q_(""+g,m.mode,y),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Xd:return y=Qp(g.type,g.key,g.props,null,m.mode,y),y.ref=Ol(m,null,g),y.return=m,y;case oc:return g=K_(g,m.mode,y),g.return=m,g;case Oi:var $=g._init;return h(m,$(g._payload),y)}if(Gl(g)||bl(g))return g=Go(g,m.mode,y,null),g.return=m,g;up(m,g)}return null}function d(m,g,y,$){var T=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:a(m,g,""+y,$);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xd:return y.key===T?c(m,g,y,$):null;case oc:return y.key===T?l(m,g,y,$):null;case Oi:return T=y._init,d(m,g,T(y._payload),$)}if(Gl(y)||bl(y))return T!==null?null:f(m,g,y,$,null);up(m,y)}return null}function p(m,g,y,$,T){if(typeof $=="string"&&$!==""||typeof $=="number")return m=m.get(y)||null,a(g,m,""+$,T);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Xd:return m=m.get($.key===null?y:$.key)||null,c(g,m,$,T);case oc:return m=m.get($.key===null?y:$.key)||null,l(g,m,$,T);case Oi:var C=$._init;return p(m,g,y,C($._payload),T)}if(Gl($)||bl($))return m=m.get(y)||null,f(g,m,$,T,null);up(g,$)}return null}function _(m,g,y,$){for(var T=null,C=null,E=g,O=g=0,A=null;E!==null&&O<y.length;O++){E.index>O?(A=E,E=null):A=E.sibling;var I=d(m,E,y[O],$);if(I===null){E===null&&(E=A);break}e&&E&&I.alternate===null&&t(m,E),g=i(I,g,O),C===null?T=I:C.sibling=I,C=I,E=A}if(O===y.length)return n(m,E),Ve&&Io(m,O),T;if(E===null){for(;O<y.length;O++)E=h(m,y[O],$),E!==null&&(g=i(E,g,O),C===null?T=E:C.sibling=E,C=E);return Ve&&Io(m,O),T}for(E=r(m,E);O<y.length;O++)A=p(E,m,O,y[O],$),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?O:A.key),g=i(A,g,O),C===null?T=A:C.sibling=A,C=A);return e&&E.forEach(function(M){return t(m,M)}),Ve&&Io(m,O),T}function b(m,g,y,$){var T=bl(y);if(typeof T!="function")throw Error(F(150));if(y=T.call(y),y==null)throw Error(F(151));for(var C=T=null,E=g,O=g=0,A=null,I=y.next();E!==null&&!I.done;O++,I=y.next()){E.index>O?(A=E,E=null):A=E.sibling;var M=d(m,E,I.value,$);if(M===null){E===null&&(E=A);break}e&&E&&M.alternate===null&&t(m,E),g=i(M,g,O),C===null?T=M:C.sibling=M,C=M,E=A}if(I.done)return n(m,E),Ve&&Io(m,O),T;if(E===null){for(;!I.done;O++,I=y.next())I=h(m,I.value,$),I!==null&&(g=i(I,g,O),C===null?T=I:C.sibling=I,C=I);return Ve&&Io(m,O),T}for(E=r(m,E);!I.done;O++,I=y.next())I=p(E,m,O,I.value,$),I!==null&&(e&&I.alternate!==null&&E.delete(I.key===null?O:I.key),g=i(I,g,O),C===null?T=I:C.sibling=I,C=I);return e&&E.forEach(function(U){return t(m,U)}),Ve&&Io(m,O),T}function w(m,g,y,$){if(typeof y=="object"&&y!==null&&y.type===ac&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Xd:e:{for(var T=y.key,C=g;C!==null;){if(C.key===T){if(T=y.type,T===ac){if(C.tag===7){n(m,C.sibling),g=s(C,y.props.children),g.return=m,m=g;break e}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Oi&&XO(T)===C.type){n(m,C.sibling),g=s(C,y.props),g.ref=Ol(m,C,y),g.return=m,m=g;break e}n(m,C);break}else t(m,C);C=C.sibling}y.type===ac?(g=Go(y.props.children,m.mode,$,y.key),g.return=m,m=g):($=Qp(y.type,y.key,y.props,null,m.mode,$),$.ref=Ol(m,g,y),$.return=m,m=$)}return o(m);case oc:e:{for(C=y.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(m,g.sibling),g=s(g,y.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else t(m,g);g=g.sibling}g=K_(y,m.mode,$),g.return=m,m=g}return o(m);case Oi:return C=y._init,w(m,g,C(y._payload),$)}if(Gl(y))return _(m,g,y,$);if(bl(y))return b(m,g,y,$);up(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(m,g.sibling),g=s(g,y),g.return=m,m=g):(n(m,g),g=q_(y,m.mode,$),g.return=m,m=g),o(m)):n(m,g)}return w}var Jc=Ux(!0),Vx=Ux(!1),Hm=go(null),Wm=null,mc=null,Kw=null;function Hw(){Kw=mc=Wm=null}function Ww(e){var t=Hm.current;ze(Hm),e._currentValue=t}function V1(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cc(e,t){Wm=e,Kw=mc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fn=!0),e.firstContext=null)}function Rr(e){var t=e._currentValue;if(Kw!==e)if(e={context:e,memoizedValue:t,next:null},mc===null){if(Wm===null)throw Error(F(308));mc=e,Wm.dependencies={lanes:0,firstContext:e}}else mc=mc.next=e;return t}var jo=null;function Jw(e){jo===null?jo=[e]:jo.push(e)}function qx(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Jw(t)):(n.next=s.next,s.next=n),t.interleaved=n,ai(e,r)}function ai(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ti=!1;function Gw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ys(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ki(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,ai(e,n)}return s=r.interleaved,s===null?(t.next=t,Jw(r)):(t.next=s.next,s.next=t),r.interleaved=t,ai(e,n)}function qp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xw(e,n)}}function ZO(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Jm(e,t,n,r){var s=e.updateQueue;Ti=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=l:a.next=l,f.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,f=l=c=null,a=i;do{var d=a.lane,p=a.eventTime;if((r&d)===d){f!==null&&(f=f.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=e,b=a;switch(d=t,p=n,b.tag){case 1:if(_=b.payload,typeof _=="function"){h=_.call(p,h,d);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=b.payload,d=typeof _=="function"?_.call(p,h,d):_,d==null)break e;h=et({},h,d);break e;case 2:Ti=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(l=f=p,c=h):f=f.next=p,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(f===null&&(c=h),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);la|=o,e.lanes=o,e.memoizedState=h}}function eT(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Vh={},vs=go(Vh),Jf=go(Vh),Gf=go(Vh);function Bo(e){if(e===Vh)throw Error(F(174));return e}function Qw(e,t){switch(Ae(Gf,t),Ae(Jf,e),Ae(vs,Vh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$1(t,e)}ze(vs),Ae(vs,t)}function Gc(){ze(vs),ze(Jf),ze(Gf)}function Hx(e){Bo(Gf.current);var t=Bo(vs.current),n=$1(t,e.type);t!==n&&(Ae(Jf,e),Ae(vs,n))}function Yw(e){Jf.current===e&&(ze(vs),ze(Jf))}var Je=go(0);function Gm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var D_=[];function Xw(){for(var e=0;e<D_.length;e++)D_[e]._workInProgressVersionPrimary=null;D_.length=0}var Kp=vi.ReactCurrentDispatcher,j_=vi.ReactCurrentBatchConfig,ua=0,Xe=null,Ot=null,jt=null,Qm=!1,mf=!1,Qf=0,$5=0;function an(){throw Error(F(321))}function Zw(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rs(e[n],t[n]))return!1;return!0}function e$(e,t,n,r,s,i){if(ua=i,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kp.current=e===null||e.memoizedState===null?T5:C5,e=n(r,s),mf){i=0;do{if(mf=!1,Qf=0,25<=i)throw Error(F(301));i+=1,jt=Ot=null,t.updateQueue=null,Kp.current=R5,e=n(r,s)}while(mf)}if(Kp.current=Ym,t=Ot!==null&&Ot.next!==null,ua=0,jt=Ot=Xe=null,Qm=!1,t)throw Error(F(300));return e}function t$(){var e=Qf!==0;return Qf=0,e}function ps(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Xe.memoizedState=jt=e:jt=jt.next=e,jt}function Ir(){if(Ot===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=Ot.next;var t=jt===null?Xe.memoizedState:jt.next;if(t!==null)jt=t,Ot=e;else{if(e===null)throw Error(F(310));Ot=e,e={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},jt===null?Xe.memoizedState=jt=e:jt=jt.next=e}return jt}function Yf(e,t){return typeof t=="function"?t(e):t}function B_(e){var t=Ir(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=Ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var f=l.lane;if((ua&f)===f)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,Xe.lanes|=f,la|=f}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,rs(r,t.memoizedState)||(Fn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Xe.lanes|=i,la|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function z_(e){var t=Ir(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);rs(i,t.memoizedState)||(Fn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Wx(){}function Jx(e,t){var n=Xe,r=Ir(),s=t(),i=!rs(r.memoizedState,s);if(i&&(r.memoizedState=s,Fn=!0),r=r.queue,n$(Yx.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,Xf(9,Qx.bind(null,n,r,s,t),void 0,null),Vt===null)throw Error(F(349));ua&30||Gx(n,t,s)}return s}function Gx(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qx(e,t,n,r){t.value=n,t.getSnapshot=r,Xx(t)&&Zx(e)}function Yx(e,t,n){return n(function(){Xx(t)&&Zx(e)})}function Xx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rs(e,n)}catch{return!0}}function Zx(e){var t=ai(e,1);t!==null&&es(t,e,1,-1)}function tT(e){var t=ps();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yf,lastRenderedState:e},t.queue=e,e=e.dispatch=O5.bind(null,Xe,e),[t.memoizedState,e]}function Xf(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function eM(){return Ir().memoizedState}function Hp(e,t,n,r){var s=ps();Xe.flags|=e,s.memoizedState=Xf(1|t,n,void 0,r===void 0?null:r)}function by(e,t,n,r){var s=Ir();r=r===void 0?null:r;var i=void 0;if(Ot!==null){var o=Ot.memoizedState;if(i=o.destroy,r!==null&&Zw(r,o.deps)){s.memoizedState=Xf(t,n,i,r);return}}Xe.flags|=e,s.memoizedState=Xf(1|t,n,i,r)}function nT(e,t){return Hp(8390656,8,e,t)}function n$(e,t){return by(2048,8,e,t)}function tM(e,t){return by(4,2,e,t)}function nM(e,t){return by(4,4,e,t)}function rM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sM(e,t,n){return n=n!=null?n.concat([e]):null,by(4,4,rM.bind(null,t,e),n)}function r$(){}function iM(e,t){var n=Ir();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zw(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function oM(e,t){var n=Ir();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zw(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function aM(e,t,n){return ua&21?(rs(n,t)||(n=hx(),Xe.lanes|=n,la|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fn=!0),e.memoizedState=n)}function k5(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var r=j_.transition;j_.transition={};try{e(!1),t()}finally{Ce=n,j_.transition=r}}function cM(){return Ir().memoizedState}function E5(e,t,n){var r=Wi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uM(e))lM(t,n);else if(n=qx(e,t,n,r),n!==null){var s=$n();es(n,e,r,s),fM(n,t,r)}}function O5(e,t,n){var r=Wi(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uM(e))lM(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,rs(a,o)){var c=t.interleaved;c===null?(s.next=s,Jw(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=qx(e,t,s,r),n!==null&&(s=$n(),es(n,e,r,s),fM(n,t,r))}}function uM(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function lM(e,t){mf=Qm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fM(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,xw(e,n)}}var Ym={readContext:Rr,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},T5={readContext:Rr,useCallback:function(e,t){return ps().memoizedState=[e,t===void 0?null:t],e},useContext:Rr,useEffect:nT,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hp(4194308,4,rM.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hp(4,2,e,t)},useMemo:function(e,t){var n=ps();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ps();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=E5.bind(null,Xe,e),[r.memoizedState,e]},useRef:function(e){var t=ps();return e={current:e},t.memoizedState=e},useState:tT,useDebugValue:r$,useDeferredValue:function(e){return ps().memoizedState=e},useTransition:function(){var e=tT(!1),t=e[0];return e=k5.bind(null,e[1]),ps().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Xe,s=ps();if(Ve){if(n===void 0)throw Error(F(407));n=n()}else{if(n=t(),Vt===null)throw Error(F(349));ua&30||Gx(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,nT(Yx.bind(null,r,i,e),[e]),r.flags|=2048,Xf(9,Qx.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=ps(),t=Vt.identifierPrefix;if(Ve){var n=qs,r=Vs;n=(r&~(1<<32-Zr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Qf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$5++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},C5={readContext:Rr,useCallback:iM,useContext:Rr,useEffect:n$,useImperativeHandle:sM,useInsertionEffect:tM,useLayoutEffect:nM,useMemo:oM,useReducer:B_,useRef:eM,useState:function(){return B_(Yf)},useDebugValue:r$,useDeferredValue:function(e){var t=Ir();return aM(t,Ot.memoizedState,e)},useTransition:function(){var e=B_(Yf)[0],t=Ir().memoizedState;return[e,t]},useMutableSource:Wx,useSyncExternalStore:Jx,useId:cM,unstable_isNewReconciler:!1},R5={readContext:Rr,useCallback:iM,useContext:Rr,useEffect:n$,useImperativeHandle:sM,useInsertionEffect:tM,useLayoutEffect:nM,useMemo:oM,useReducer:z_,useRef:eM,useState:function(){return z_(Yf)},useDebugValue:r$,useDeferredValue:function(e){var t=Ir();return Ot===null?t.memoizedState=e:aM(t,Ot.memoizedState,e)},useTransition:function(){var e=z_(Yf)[0],t=Ir().memoizedState;return[e,t]},useMutableSource:Wx,useSyncExternalStore:Jx,useId:cM,unstable_isNewReconciler:!1};function Br(e,t){if(e&&e.defaultProps){t=et({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function q1(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:et({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var wy={isMounted:function(e){return(e=e._reactInternals)?Aa(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$n(),s=Wi(e),i=Ys(r,s);i.payload=t,n!=null&&(i.callback=n),t=Ki(e,i,s),t!==null&&(es(t,e,s,r),qp(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$n(),s=Wi(e),i=Ys(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ki(e,i,s),t!==null&&(es(t,e,s,r),qp(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$n(),r=Wi(e),s=Ys(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ki(e,s,r),t!==null&&(es(t,e,r,n),qp(t,e,r))}};function rT(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!qf(n,r)||!qf(s,i):!0}function hM(e,t,n){var r=!1,s=io,i=t.contextType;return typeof i=="object"&&i!==null?i=Rr(i):(s=An(t)?aa:mn.current,r=t.contextTypes,i=(r=r!=null)?Hc(e,s):io),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wy,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function sT(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wy.enqueueReplaceState(t,t.state,null)}function K1(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Gw(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Rr(i):(i=An(t)?aa:mn.current,s.context=Hc(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(q1(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&wy.enqueueReplaceState(s,s.state,null),Jm(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Qc(e,t){try{var n="",r=t;do n+=rq(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function U_(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function H1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var I5=typeof WeakMap=="function"?WeakMap:Map;function dM(e,t,n){n=Ys(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zm||(Zm=!0,n0=r),H1(e,t)},n}function pM(e,t,n){n=Ys(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){H1(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){H1(e,t),typeof r!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function iT(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new I5;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=q5.bind(null,e,t,n),t.then(e,e))}function oT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function aT(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ys(-1,1),t.tag=2,Ki(n,t,1))),n.lanes|=1),e)}var P5=vi.ReactCurrentOwner,Fn=!1;function Sn(e,t,n,r){t.child=e===null?Vx(t,null,n,r):Jc(t,e.child,n,r)}function cT(e,t,n,r,s){n=n.render;var i=t.ref;return Cc(t,s),r=e$(e,t,n,r,i,s),n=t$(),e!==null&&!Fn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ci(e,t,s)):(Ve&&n&&Uw(t),t.flags|=1,Sn(e,t,r,s),t.child)}function uT(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!f$(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,mM(e,t,i,r,s)):(e=Qp(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:qf,n(o,r)&&e.ref===t.ref)return ci(e,t,s)}return t.flags|=1,e=Ji(i,r),e.ref=t.ref,e.return=t,t.child=e}function mM(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(qf(i,r)&&e.ref===t.ref)if(Fn=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Fn=!0);else return t.lanes=e.lanes,ci(e,t,s)}return W1(e,t,n,r,s)}function gM(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(yc,Yn),Yn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ae(yc,Yn),Yn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ae(yc,Yn),Yn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ae(yc,Yn),Yn|=r;return Sn(e,t,s,n),t.child}function yM(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function W1(e,t,n,r,s){var i=An(n)?aa:mn.current;return i=Hc(t,i),Cc(t,s),n=e$(e,t,n,r,i,s),r=t$(),e!==null&&!Fn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ci(e,t,s)):(Ve&&r&&Uw(t),t.flags|=1,Sn(e,t,n,s),t.child)}function lT(e,t,n,r,s){if(An(n)){var i=!0;Vm(t)}else i=!1;if(Cc(t,s),t.stateNode===null)Wp(e,t),hM(t,n,r),K1(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Rr(l):(l=An(n)?aa:mn.current,l=Hc(t,l));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&sT(t,o,r,l),Ti=!1;var d=t.memoizedState;o.state=d,Jm(t,r,o,s),c=t.memoizedState,a!==r||d!==c||Mn.current||Ti?(typeof f=="function"&&(q1(t,n,f,r),c=t.memoizedState),(a=Ti||rT(t,n,a,r,d,c,l))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Kx(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Br(t.type,a),o.props=l,h=t.pendingProps,d=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Rr(c):(c=An(n)?aa:mn.current,c=Hc(t,c));var p=n.getDerivedStateFromProps;(f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==c)&&sT(t,o,r,c),Ti=!1,d=t.memoizedState,o.state=d,Jm(t,r,o,s);var _=t.memoizedState;a!==h||d!==_||Mn.current||Ti?(typeof p=="function"&&(q1(t,n,p,r),_=t.memoizedState),(l=Ti||rT(t,n,l,r,d,_,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),o.props=r,o.state=_,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return J1(e,t,n,r,i,s)}function J1(e,t,n,r,s,i){yM(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&GO(t,n,!1),ci(e,t,i);r=t.stateNode,P5.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Jc(t,e.child,null,i),t.child=Jc(t,null,a,i)):Sn(e,t,a,i),t.memoizedState=r.state,s&&GO(t,n,!0),t.child}function SM(e){var t=e.stateNode;t.pendingContext?JO(e,t.pendingContext,t.pendingContext!==t.context):t.context&&JO(e,t.context,!1),Qw(e,t.containerInfo)}function fT(e,t,n,r,s){return Wc(),qw(s),t.flags|=256,Sn(e,t,n,r),t.child}var G1={dehydrated:null,treeContext:null,retryLane:0};function Q1(e){return{baseLanes:e,cachePool:null,transitions:null}}function _M(e,t,n){var r=t.pendingProps,s=Je.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ae(Je,s&1),e===null)return U1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ey(o,r,0,null),e=Go(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Q1(n),t.memoizedState=G1,e):s$(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return F5(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ji(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ji(a,i):(i=Go(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Q1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=G1,r}return i=e.child,e=i.sibling,r=Ji(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function s$(e,t){return t=Ey({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function lp(e,t,n,r){return r!==null&&qw(r),Jc(t,e.child,null,n),e=s$(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function F5(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=U_(Error(F(422))),lp(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Ey({mode:"visible",children:r.children},s,0,null),i=Go(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Jc(t,e.child,null,o),t.child.memoizedState=Q1(o),t.memoizedState=G1,i);if(!(t.mode&1))return lp(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(F(419)),r=U_(i,r,void 0),lp(e,t,o,r)}if(a=(o&e.childLanes)!==0,Fn||a){if(r=Vt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ai(e,s),es(r,e,s,-1))}return l$(),r=U_(Error(F(421))),lp(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=K5.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Xn=qi(s.nextSibling),tr=t,Ve=!0,Kr=null,e!==null&&(yr[Sr++]=Vs,yr[Sr++]=qs,yr[Sr++]=ca,Vs=e.id,qs=e.overflow,ca=t),t=s$(t,r.children),t.flags|=4096,t)}function hT(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),V1(e.return,t,n)}function V_(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function vM(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Sn(e,t,r.children,n),r=Je.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hT(e,n,t);else if(e.tag===19)hT(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ae(Je,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Gm(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),V_(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Gm(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}V_(t,!0,n,null,i);break;case"together":V_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ci(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),la|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,n=Ji(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ji(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function N5(e,t,n){switch(t.tag){case 3:SM(t),Wc();break;case 5:Hx(t);break;case 1:An(t.type)&&Vm(t);break;case 4:Qw(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ae(Hm,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Je,Je.current&1),t.flags|=128,null):n&t.child.childLanes?_M(e,t,n):(Ae(Je,Je.current&1),e=ci(e,t,n),e!==null?e.sibling:null);Ae(Je,Je.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return vM(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(Je,Je.current),r)break;return null;case 22:case 23:return t.lanes=0,gM(e,t,n)}return ci(e,t,n)}var bM,Y1,wM,$M;bM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Y1=function(){};wM=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Bo(vs.current);var i=null;switch(n){case"input":s=_1(e,s),r=_1(e,r),i=[];break;case"select":s=et({},s,{value:void 0}),r=et({},r,{value:void 0}),i=[];break;case"textarea":s=w1(e,s),r=w1(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=zm)}k1(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Lf.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Lf.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&je("scroll",e),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(t.updateQueue=l)&&(t.flags|=4)}};$M=function(e,t,n,r){n!==r&&(t.flags|=4)};function Tl(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function cn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function x5(e,t,n){var r=t.pendingProps;switch(Vw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(t),null;case 1:return An(t.type)&&Um(),cn(t),null;case 3:return r=t.stateNode,Gc(),ze(Mn),ze(mn),Xw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(cp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Kr!==null&&(i0(Kr),Kr=null))),Y1(e,t),cn(t),null;case 5:Yw(t);var s=Bo(Gf.current);if(n=t.type,e!==null&&t.stateNode!=null)wM(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(F(166));return cn(t),null}if(e=Bo(vs.current),cp(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[gs]=t,r[Wf]=i,e=(t.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<Yl.length;s++)je(Yl[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":bO(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":$O(r,i),je("invalid",r)}k1(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ap(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ap(r.textContent,a,e),s=["children",""+a]):Lf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":Zd(r),wO(r,i,!0);break;case"textarea":Zd(r),kO(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zm)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=YN(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[gs]=t,e[Wf]=r,bM(e,t,!1,!1),t.stateNode=e;e:{switch(o=E1(n,r),n){case"dialog":je("cancel",e),je("close",e),s=r;break;case"iframe":case"object":case"embed":je("load",e),s=r;break;case"video":case"audio":for(s=0;s<Yl.length;s++)je(Yl[s],e);s=r;break;case"source":je("error",e),s=r;break;case"img":case"image":case"link":je("error",e),je("load",e),s=r;break;case"details":je("toggle",e),s=r;break;case"input":bO(e,r),s=_1(e,r),je("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=et({},r,{value:void 0}),je("invalid",e);break;case"textarea":$O(e,r),s=w1(e,r),je("invalid",e);break;default:s=r}k1(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?ex(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&XN(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Df(e,c):typeof c=="number"&&Df(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lf.hasOwnProperty(i)?c!=null&&i==="onScroll"&&je("scroll",e):c!=null&&Cw(e,i,c,o))}switch(n){case"input":Zd(e),wO(e,r,!1);break;case"textarea":Zd(e),kO(e);break;case"option":r.value!=null&&e.setAttribute("value",""+so(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?kc(e,!!r.multiple,i,!1):r.defaultValue!=null&&kc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=zm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cn(t),null;case 6:if(e&&t.stateNode!=null)$M(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(F(166));if(n=Bo(Gf.current),Bo(vs.current),cp(t)){if(r=t.stateNode,n=t.memoizedProps,r[gs]=t,(i=r.nodeValue!==n)&&(e=tr,e!==null))switch(e.tag){case 3:ap(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ap(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gs]=t,t.stateNode=r}return cn(t),null;case 13:if(ze(Je),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&Xn!==null&&t.mode&1&&!(t.flags&128))zx(),Wc(),t.flags|=98560,i=!1;else if(i=cp(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(F(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[gs]=t}else Wc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cn(t),i=!1}else Kr!==null&&(i0(Kr),Kr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Je.current&1?It===0&&(It=3):l$())),t.updateQueue!==null&&(t.flags|=4),cn(t),null);case 4:return Gc(),Y1(e,t),e===null&&Kf(t.stateNode.containerInfo),cn(t),null;case 10:return Ww(t.type._context),cn(t),null;case 17:return An(t.type)&&Um(),cn(t),null;case 19:if(ze(Je),i=t.memoizedState,i===null)return cn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Tl(i,!1);else{if(It!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Gm(e),o!==null){for(t.flags|=128,Tl(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ae(Je,Je.current&1|2),t.child}e=e.sibling}i.tail!==null&&ft()>Yc&&(t.flags|=128,r=!0,Tl(i,!1),t.lanes=4194304)}else{if(!r)if(e=Gm(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Tl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ve)return cn(t),null}else 2*ft()-i.renderingStartTime>Yc&&n!==1073741824&&(t.flags|=128,r=!0,Tl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ft(),t.sibling=null,n=Je.current,Ae(Je,r?n&1|2:n&1),t):(cn(t),null);case 22:case 23:return u$(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Yn&1073741824&&(cn(t),t.subtreeFlags&6&&(t.flags|=8192)):cn(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function M5(e,t){switch(Vw(t),t.tag){case 1:return An(t.type)&&Um(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gc(),ze(Mn),ze(mn),Xw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yw(t),null;case 13:if(ze(Je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));Wc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Je),null;case 4:return Gc(),null;case 10:return Ww(t.type._context),null;case 22:case 23:return u$(),null;case 24:return null;default:return null}}var fp=!1,pn=!1,A5=typeof WeakSet=="function"?WeakSet:Set,B=null;function gc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(e,t,r)}else n.current=null}function X1(e,t,n){try{n()}catch(r){tt(e,t,r)}}var dT=!1;function L5(e,t){if(M1=Dm,e=Cx(),zw(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===s&&(a=o),d===i&&++f===r&&(c=o),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(A1={focusedElem:e,selectionRange:n},Dm=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var b=_.memoizedProps,w=_.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?b:Br(t.type,b),w);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch($){tt(t,t.return,$)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return _=dT,dT=!1,_}function gf(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&X1(t,n,i)}s=s.next}while(s!==r)}}function $y(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Z1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function kM(e){var t=e.alternate;t!==null&&(e.alternate=null,kM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gs],delete t[Wf],delete t[j1],delete t[_5],delete t[v5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function EM(e){return e.tag===5||e.tag===3||e.tag===4}function pT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||EM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function e0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=zm));else if(r!==4&&(e=e.child,e!==null))for(e0(e,t,n),e=e.sibling;e!==null;)e0(e,t,n),e=e.sibling}function t0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(t0(e,t,n),e=e.sibling;e!==null;)t0(e,t,n),e=e.sibling}var Qt=null,zr=!1;function ki(e,t,n){for(n=n.child;n!==null;)OM(e,t,n),n=n.sibling}function OM(e,t,n){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(my,n)}catch{}switch(n.tag){case 5:pn||gc(n,t);case 6:var r=Qt,s=zr;Qt=null,ki(e,t,n),Qt=r,zr=s,Qt!==null&&(zr?(e=Qt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qt.removeChild(n.stateNode));break;case 18:Qt!==null&&(zr?(e=Qt,n=n.stateNode,e.nodeType===8?A_(e.parentNode,n):e.nodeType===1&&A_(e,n),Uf(e)):A_(Qt,n.stateNode));break;case 4:r=Qt,s=zr,Qt=n.stateNode.containerInfo,zr=!0,ki(e,t,n),Qt=r,zr=s;break;case 0:case 11:case 14:case 15:if(!pn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&X1(n,t,o),s=s.next}while(s!==r)}ki(e,t,n);break;case 1:if(!pn&&(gc(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){tt(n,t,a)}ki(e,t,n);break;case 21:ki(e,t,n);break;case 22:n.mode&1?(pn=(r=pn)||n.memoizedState!==null,ki(e,t,n),pn=r):ki(e,t,n);break;default:ki(e,t,n)}}function mT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new A5),t.forEach(function(r){var s=H5.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Lr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qt=a.stateNode,zr=!1;break e;case 3:Qt=a.stateNode.containerInfo,zr=!0;break e;case 4:Qt=a.stateNode.containerInfo,zr=!0;break e}a=a.return}if(Qt===null)throw Error(F(160));OM(i,o,s),Qt=null,zr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){tt(s,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)TM(t,e),t=t.sibling}function TM(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lr(t,e),ls(e),r&4){try{gf(3,e,e.return),$y(3,e)}catch(b){tt(e,e.return,b)}try{gf(5,e,e.return)}catch(b){tt(e,e.return,b)}}break;case 1:Lr(t,e),ls(e),r&512&&n!==null&&gc(n,n.return);break;case 5:if(Lr(t,e),ls(e),r&512&&n!==null&&gc(n,n.return),e.flags&32){var s=e.stateNode;try{Df(s,"")}catch(b){tt(e,e.return,b)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&GN(s,i),E1(a,o);var l=E1(a,i);for(o=0;o<c.length;o+=2){var f=c[o],h=c[o+1];f==="style"?ex(s,h):f==="dangerouslySetInnerHTML"?XN(s,h):f==="children"?Df(s,h):Cw(s,f,h,l)}switch(a){case"input":v1(s,i);break;case"textarea":QN(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?kc(s,!!i.multiple,p,!1):d!==!!i.multiple&&(i.defaultValue!=null?kc(s,!!i.multiple,i.defaultValue,!0):kc(s,!!i.multiple,i.multiple?[]:"",!1))}s[Wf]=i}catch(b){tt(e,e.return,b)}}break;case 6:if(Lr(t,e),ls(e),r&4){if(e.stateNode===null)throw Error(F(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){tt(e,e.return,b)}}break;case 3:if(Lr(t,e),ls(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Uf(t.containerInfo)}catch(b){tt(e,e.return,b)}break;case 4:Lr(t,e),ls(e);break;case 13:Lr(t,e),ls(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(a$=ft())),r&4&&mT(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(pn=(l=pn)||f,Lr(t,e),pn=l):Lr(t,e),ls(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!f&&e.mode&1)for(B=e,f=e.child;f!==null;){for(h=B=f;B!==null;){switch(d=B,p=d.child,d.tag){case 0:case 11:case 14:case 15:gf(4,d,d.return);break;case 1:gc(d,d.return);var _=d.stateNode;if(typeof _.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(b){tt(r,n,b)}}break;case 5:gc(d,d.return);break;case 22:if(d.memoizedState!==null){yT(h);continue}}p!==null?(p.return=d,B=p):yT(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=ZN("display",o))}catch(b){tt(e,e.return,b)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(b){tt(e,e.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Lr(t,e),ls(e),r&4&&mT(e);break;case 21:break;default:Lr(t,e),ls(e)}}function ls(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(EM(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Df(s,""),r.flags&=-33);var i=pT(e);t0(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=pT(e);e0(e,a,o);break;default:throw Error(F(161))}}catch(c){tt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function D5(e,t,n){B=e,CM(e)}function CM(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var s=B,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||fp;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||pn;a=fp;var l=pn;if(fp=o,(pn=c)&&!l)for(B=s;B!==null;)o=B,c=o.child,o.tag===22&&o.memoizedState!==null?ST(s):c!==null?(c.return=o,B=c):ST(s);for(;i!==null;)B=i,CM(i),i=i.sibling;B=s,fp=a,pn=l}gT(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,B=i):gT(e)}}function gT(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pn||$y(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!pn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Br(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&eT(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}eT(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var f=l.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Uf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}pn||t.flags&512&&Z1(t)}catch(d){tt(t,t.return,d)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function yT(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function ST(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$y(4,t)}catch(c){tt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){tt(t,s,c)}}var i=t.return;try{Z1(t)}catch(c){tt(t,i,c)}break;case 5:var o=t.return;try{Z1(t)}catch(c){tt(t,o,c)}}}catch(c){tt(t,t.return,c)}if(t===e){B=null;break}var a=t.sibling;if(a!==null){a.return=t.return,B=a;break}B=t.return}}var j5=Math.ceil,Xm=vi.ReactCurrentDispatcher,i$=vi.ReactCurrentOwner,Or=vi.ReactCurrentBatchConfig,Ee=0,Vt=null,yt=null,en=0,Yn=0,yc=go(0),It=0,Zf=null,la=0,ky=0,o$=0,yf=null,Rn=null,a$=0,Yc=1/0,Ms=null,Zm=!1,n0=null,Hi=null,hp=!1,Ai=null,eg=0,Sf=0,r0=null,Jp=-1,Gp=0;function $n(){return Ee&6?ft():Jp!==-1?Jp:Jp=ft()}function Wi(e){return e.mode&1?Ee&2&&en!==0?en&-en:w5.transition!==null?(Gp===0&&(Gp=hx()),Gp):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:_x(e.type)),e):1}function es(e,t,n,r){if(50<Sf)throw Sf=0,r0=null,Error(F(185));Bh(e,n,r),(!(Ee&2)||e!==Vt)&&(e===Vt&&(!(Ee&2)&&(ky|=n),It===4&&Fi(e,en)),Ln(e,r),n===1&&Ee===0&&!(t.mode&1)&&(Yc=ft()+500,vy&&yo()))}function Ln(e,t){var n=e.callbackNode;wq(e,t);var r=Lm(e,e===Vt?en:0);if(r===0)n!==null&&TO(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&TO(n),t===1)e.tag===0?b5(_T.bind(null,e)):Dx(_T.bind(null,e)),y5(function(){!(Ee&6)&&yo()}),n=null;else{switch(dx(r)){case 1:n=Nw;break;case 4:n=lx;break;case 16:n=Am;break;case 536870912:n=fx;break;default:n=Am}n=AM(n,RM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function RM(e,t){if(Jp=-1,Gp=0,Ee&6)throw Error(F(327));var n=e.callbackNode;if(Rc()&&e.callbackNode!==n)return null;var r=Lm(e,e===Vt?en:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=tg(e,r);else{t=r;var s=Ee;Ee|=2;var i=PM();(Vt!==e||en!==t)&&(Ms=null,Yc=ft()+500,Jo(e,t));do try{U5();break}catch(a){IM(e,a)}while(!0);Hw(),Xm.current=i,Ee=s,yt!==null?t=0:(Vt=null,en=0,t=It)}if(t!==0){if(t===2&&(s=I1(e),s!==0&&(r=s,t=s0(e,s))),t===1)throw n=Zf,Jo(e,0),Fi(e,r),Ln(e,ft()),n;if(t===6)Fi(e,r);else{if(s=e.current.alternate,!(r&30)&&!B5(s)&&(t=tg(e,r),t===2&&(i=I1(e),i!==0&&(r=i,t=s0(e,i))),t===1))throw n=Zf,Jo(e,0),Fi(e,r),Ln(e,ft()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(F(345));case 2:Po(e,Rn,Ms);break;case 3:if(Fi(e,r),(r&130023424)===r&&(t=a$+500-ft(),10<t)){if(Lm(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){$n(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=D1(Po.bind(null,e,Rn,Ms),t);break}Po(e,Rn,Ms);break;case 4:if(Fi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Zr(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*j5(r/1960))-r,10<r){e.timeoutHandle=D1(Po.bind(null,e,Rn,Ms),r);break}Po(e,Rn,Ms);break;case 5:Po(e,Rn,Ms);break;default:throw Error(F(329))}}}return Ln(e,ft()),e.callbackNode===n?RM.bind(null,e):null}function s0(e,t){var n=yf;return e.current.memoizedState.isDehydrated&&(Jo(e,t).flags|=256),e=tg(e,t),e!==2&&(t=Rn,Rn=n,t!==null&&i0(t)),e}function i0(e){Rn===null?Rn=e:Rn.push.apply(Rn,e)}function B5(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!rs(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fi(e,t){for(t&=~o$,t&=~ky,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Zr(t),r=1<<n;e[n]=-1,t&=~r}}function _T(e){if(Ee&6)throw Error(F(327));Rc();var t=Lm(e,0);if(!(t&1))return Ln(e,ft()),null;var n=tg(e,t);if(e.tag!==0&&n===2){var r=I1(e);r!==0&&(t=r,n=s0(e,r))}if(n===1)throw n=Zf,Jo(e,0),Fi(e,t),Ln(e,ft()),n;if(n===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Po(e,Rn,Ms),Ln(e,ft()),null}function c$(e,t){var n=Ee;Ee|=1;try{return e(t)}finally{Ee=n,Ee===0&&(Yc=ft()+500,vy&&yo())}}function fa(e){Ai!==null&&Ai.tag===0&&!(Ee&6)&&Rc();var t=Ee;Ee|=1;var n=Or.transition,r=Ce;try{if(Or.transition=null,Ce=1,e)return e()}finally{Ce=r,Or.transition=n,Ee=t,!(Ee&6)&&yo()}}function u$(){Yn=yc.current,ze(yc)}function Jo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,g5(n)),yt!==null)for(n=yt.return;n!==null;){var r=n;switch(Vw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Um();break;case 3:Gc(),ze(Mn),ze(mn),Xw();break;case 5:Yw(r);break;case 4:Gc();break;case 13:ze(Je);break;case 19:ze(Je);break;case 10:Ww(r.type._context);break;case 22:case 23:u$()}n=n.return}if(Vt=e,yt=e=Ji(e.current,null),en=Yn=t,It=0,Zf=null,o$=ky=la=0,Rn=yf=null,jo!==null){for(t=0;t<jo.length;t++)if(n=jo[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}jo=null}return e}function IM(e,t){do{var n=yt;try{if(Hw(),Kp.current=Ym,Qm){for(var r=Xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qm=!1}if(ua=0,jt=Ot=Xe=null,mf=!1,Qf=0,i$.current=null,n===null||n.return===null){It=1,Zf=t,yt=null;break}e:{var i=e,o=n.return,a=n,c=t;if(t=en,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,f=a,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=oT(o);if(p!==null){p.flags&=-257,aT(p,o,a,i,t),p.mode&1&&iT(i,l,t),t=p,c=l;var _=t.updateQueue;if(_===null){var b=new Set;b.add(c),t.updateQueue=b}else _.add(c);break e}else{if(!(t&1)){iT(i,l,t),l$();break e}c=Error(F(426))}}else if(Ve&&a.mode&1){var w=oT(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),aT(w,o,a,i,t),qw(Qc(c,a));break e}}i=c=Qc(c,a),It!==4&&(It=2),yf===null?yf=[i]:yf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=dM(i,c,t);ZO(i,m);break e;case 1:a=c;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Hi===null||!Hi.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var $=pM(i,a,t);ZO(i,$);break e}}i=i.return}while(i!==null)}NM(n)}catch(T){t=T,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function PM(){var e=Xm.current;return Xm.current=Ym,e===null?Ym:e}function l$(){(It===0||It===3||It===2)&&(It=4),Vt===null||!(la&268435455)&&!(ky&268435455)||Fi(Vt,en)}function tg(e,t){var n=Ee;Ee|=2;var r=PM();(Vt!==e||en!==t)&&(Ms=null,Jo(e,t));do try{z5();break}catch(s){IM(e,s)}while(!0);if(Hw(),Ee=n,Xm.current=r,yt!==null)throw Error(F(261));return Vt=null,en=0,It}function z5(){for(;yt!==null;)FM(yt)}function U5(){for(;yt!==null&&!dq();)FM(yt)}function FM(e){var t=MM(e.alternate,e,Yn);e.memoizedProps=e.pendingProps,t===null?NM(e):yt=t,i$.current=null}function NM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=M5(n,t),n!==null){n.flags&=32767,yt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{It=6,yt=null;return}}else if(n=x5(n,t,Yn),n!==null){yt=n;return}if(t=t.sibling,t!==null){yt=t;return}yt=t=e}while(t!==null);It===0&&(It=5)}function Po(e,t,n){var r=Ce,s=Or.transition;try{Or.transition=null,Ce=1,V5(e,t,n,r)}finally{Or.transition=s,Ce=r}return null}function V5(e,t,n,r){do Rc();while(Ai!==null);if(Ee&6)throw Error(F(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if($q(e,i),e===Vt&&(yt=Vt=null,en=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hp||(hp=!0,AM(Am,function(){return Rc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Or.transition,Or.transition=null;var o=Ce;Ce=1;var a=Ee;Ee|=4,i$.current=null,L5(e,n),TM(n,e),u5(A1),Dm=!!M1,A1=M1=null,e.current=n,D5(n),pq(),Ee=a,Ce=o,Or.transition=i}else e.current=n;if(hp&&(hp=!1,Ai=e,eg=s),i=e.pendingLanes,i===0&&(Hi=null),yq(n.stateNode),Ln(e,ft()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zm)throw Zm=!1,e=n0,n0=null,e;return eg&1&&e.tag!==0&&Rc(),i=e.pendingLanes,i&1?e===r0?Sf++:(Sf=0,r0=e):Sf=0,yo(),null}function Rc(){if(Ai!==null){var e=dx(eg),t=Or.transition,n=Ce;try{if(Or.transition=null,Ce=16>e?16:e,Ai===null)var r=!1;else{if(e=Ai,Ai=null,eg=0,Ee&6)throw Error(F(331));var s=Ee;for(Ee|=4,B=e.current;B!==null;){var i=B,o=i.child;if(B.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(B=l;B!==null;){var f=B;switch(f.tag){case 0:case 11:case 15:gf(8,f,i)}var h=f.child;if(h!==null)h.return=f,B=h;else for(;B!==null;){f=B;var d=f.sibling,p=f.return;if(kM(f),f===l){B=null;break}if(d!==null){d.return=p,B=d;break}B=p}}}var _=i.alternate;if(_!==null){var b=_.child;if(b!==null){_.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}B=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,B=o;else e:for(;B!==null;){if(i=B,i.flags&2048)switch(i.tag){case 0:case 11:case 15:gf(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,B=m;break e}B=i.return}}var g=e.current;for(B=g;B!==null;){o=B;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,B=y;else e:for(o=g;B!==null;){if(a=B,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$y(9,a)}}catch(T){tt(a,a.return,T)}if(a===o){B=null;break e}var $=a.sibling;if($!==null){$.return=a.return,B=$;break e}B=a.return}}if(Ee=s,yo(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(my,e)}catch{}r=!0}return r}finally{Ce=n,Or.transition=t}}return!1}function vT(e,t,n){t=Qc(n,t),t=dM(e,t,1),e=Ki(e,t,1),t=$n(),e!==null&&(Bh(e,1,t),Ln(e,t))}function tt(e,t,n){if(e.tag===3)vT(e,e,n);else for(;t!==null;){if(t.tag===3){vT(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hi===null||!Hi.has(r))){e=Qc(n,e),e=pM(t,e,1),t=Ki(t,e,1),e=$n(),t!==null&&(Bh(t,1,e),Ln(t,e));break}}t=t.return}}function q5(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=$n(),e.pingedLanes|=e.suspendedLanes&n,Vt===e&&(en&n)===n&&(It===4||It===3&&(en&130023424)===en&&500>ft()-a$?Jo(e,0):o$|=n),Ln(e,t)}function xM(e,t){t===0&&(e.mode&1?(t=np,np<<=1,!(np&130023424)&&(np=4194304)):t=1);var n=$n();e=ai(e,t),e!==null&&(Bh(e,t,n),Ln(e,n))}function K5(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),xM(e,n)}function H5(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(t),xM(e,n)}var MM;MM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Mn.current)Fn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Fn=!1,N5(e,t,n);Fn=!!(e.flags&131072)}else Fn=!1,Ve&&t.flags&1048576&&jx(t,Km,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wp(e,t),e=t.pendingProps;var s=Hc(t,mn.current);Cc(t,n),s=e$(null,t,r,e,s,n);var i=t$();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,An(r)?(i=!0,Vm(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Gw(t),s.updater=wy,t.stateNode=s,s._reactInternals=t,K1(t,r,e,n),t=J1(null,t,r,!0,i,n)):(t.tag=0,Ve&&i&&Uw(t),Sn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wp(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=J5(r),e=Br(r,e),s){case 0:t=W1(null,t,r,e,n);break e;case 1:t=lT(null,t,r,e,n);break e;case 11:t=cT(null,t,r,e,n);break e;case 14:t=uT(null,t,r,Br(r.type,e),n);break e}throw Error(F(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Br(r,s),W1(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Br(r,s),lT(e,t,r,s,n);case 3:e:{if(SM(t),e===null)throw Error(F(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Kx(e,t),Jm(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Qc(Error(F(423)),t),t=fT(e,t,r,n,s);break e}else if(r!==s){s=Qc(Error(F(424)),t),t=fT(e,t,r,n,s);break e}else for(Xn=qi(t.stateNode.containerInfo.firstChild),tr=t,Ve=!0,Kr=null,n=Vx(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wc(),r===s){t=ci(e,t,n);break e}Sn(e,t,r,n)}t=t.child}return t;case 5:return Hx(t),e===null&&U1(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,L1(r,s)?o=null:i!==null&&L1(r,i)&&(t.flags|=32),yM(e,t),Sn(e,t,o,n),t.child;case 6:return e===null&&U1(t),null;case 13:return _M(e,t,n);case 4:return Qw(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Jc(t,null,r,n):Sn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Br(r,s),cT(e,t,r,s,n);case 7:return Sn(e,t,t.pendingProps,n),t.child;case 8:return Sn(e,t,t.pendingProps.children,n),t.child;case 12:return Sn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Ae(Hm,r._currentValue),r._currentValue=o,i!==null)if(rs(i.value,o)){if(i.children===s.children&&!Mn.current){t=ci(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ys(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var f=l.pending;f===null?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),V1(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),V1(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Sn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Cc(t,n),s=Rr(s),r=r(s),t.flags|=1,Sn(e,t,r,n),t.child;case 14:return r=t.type,s=Br(r,t.pendingProps),s=Br(r.type,s),uT(e,t,r,s,n);case 15:return mM(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Br(r,s),Wp(e,t),t.tag=1,An(r)?(e=!0,Vm(t)):e=!1,Cc(t,n),hM(t,r,s),K1(t,r,s,n),J1(null,t,r,!0,e,n);case 19:return vM(e,t,n);case 22:return gM(e,t,n)}throw Error(F(156,t.tag))};function AM(e,t){return ux(e,t)}function W5(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(e,t,n,r){return new W5(e,t,n,r)}function f$(e){return e=e.prototype,!(!e||!e.isReactComponent)}function J5(e){if(typeof e=="function")return f$(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Iw)return 11;if(e===Pw)return 14}return 2}function Ji(e,t){var n=e.alternate;return n===null?(n=$r(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qp(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")f$(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ac:return Go(n.children,s,i,t);case Rw:o=8,s|=8;break;case m1:return e=$r(12,n,t,s|2),e.elementType=m1,e.lanes=i,e;case g1:return e=$r(13,n,t,s),e.elementType=g1,e.lanes=i,e;case y1:return e=$r(19,n,t,s),e.elementType=y1,e.lanes=i,e;case HN:return Ey(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qN:o=10;break e;case KN:o=9;break e;case Iw:o=11;break e;case Pw:o=14;break e;case Oi:o=16,r=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=$r(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Go(e,t,n,r){return e=$r(7,e,r,t),e.lanes=n,e}function Ey(e,t,n,r){return e=$r(22,e,r,t),e.elementType=HN,e.lanes=n,e.stateNode={isHidden:!1},e}function q_(e,t,n){return e=$r(6,e,null,t),e.lanes=n,e}function K_(e,t,n){return t=$r(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function G5(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=E_(0),this.expirationTimes=E_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E_(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function h$(e,t,n,r,s,i,o,a,c){return e=new G5(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=$r(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gw(i),e}function Q5(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function LM(e){if(!e)return io;e=e._reactInternals;e:{if(Aa(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(An(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var n=e.type;if(An(n))return Lx(e,n,t)}return t}function DM(e,t,n,r,s,i,o,a,c){return e=h$(n,r,!0,e,s,i,o,a,c),e.context=LM(null),n=e.current,r=$n(),s=Wi(n),i=Ys(r,s),i.callback=t??null,Ki(n,i,s),e.current.lanes=s,Bh(e,s,r),Ln(e,r),e}function Oy(e,t,n,r){var s=t.current,i=$n(),o=Wi(s);return n=LM(n),t.context===null?t.context=n:t.pendingContext=n,t=Ys(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ki(s,t,o),e!==null&&(es(e,s,o,i),qp(e,s,o)),o}function ng(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function d$(e,t){bT(e,t),(e=e.alternate)&&bT(e,t)}function Y5(){return null}var jM=typeof reportError=="function"?reportError:function(e){console.error(e)};function p$(e){this._internalRoot=e}Ty.prototype.render=p$.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));Oy(e,t,null,null)};Ty.prototype.unmount=p$.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fa(function(){Oy(null,e,null,null)}),t[oi]=null}};function Ty(e){this._internalRoot=e}Ty.prototype.unstable_scheduleHydration=function(e){if(e){var t=gx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pi.length&&t!==0&&t<Pi[n].priority;n++);Pi.splice(n,0,e),n===0&&Sx(e)}};function m$(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wT(){}function X5(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=ng(o);i.call(l)}}var o=DM(t,r,e,0,null,!1,!1,"",wT);return e._reactRootContainer=o,e[oi]=o.current,Kf(e.nodeType===8?e.parentNode:e),fa(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=ng(c);a.call(l)}}var c=h$(e,0,!1,null,null,!1,!1,"",wT);return e._reactRootContainer=c,e[oi]=c.current,Kf(e.nodeType===8?e.parentNode:e),fa(function(){Oy(t,c,n,r)}),c}function Ry(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=ng(o);a.call(c)}}Oy(t,o,e,s)}else o=X5(n,t,e,s,r);return ng(o)}px=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ql(t.pendingLanes);n!==0&&(xw(t,n|1),Ln(t,ft()),!(Ee&6)&&(Yc=ft()+500,yo()))}break;case 13:fa(function(){var r=ai(e,1);if(r!==null){var s=$n();es(r,e,1,s)}}),d$(e,1)}};Mw=function(e){if(e.tag===13){var t=ai(e,134217728);if(t!==null){var n=$n();es(t,e,134217728,n)}d$(e,134217728)}};mx=function(e){if(e.tag===13){var t=Wi(e),n=ai(e,t);if(n!==null){var r=$n();es(n,e,t,r)}d$(e,t)}};gx=function(){return Ce};yx=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}};T1=function(e,t,n){switch(t){case"input":if(v1(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=_y(r);if(!s)throw Error(F(90));JN(r),v1(r,s)}}}break;case"textarea":QN(e,n);break;case"select":t=n.value,t!=null&&kc(e,!!n.multiple,t,!1)}};rx=c$;sx=fa;var Z5={usingClientEntryPoint:!1,Events:[Uh,fc,_y,tx,nx,c$]},Cl={findFiberByHostInstance:Do,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e6={bundleType:Cl.bundleType,version:Cl.version,rendererPackageName:Cl.rendererPackageName,rendererConfig:Cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ax(e),e===null?null:e.stateNode},findFiberByHostInstance:Cl.findFiberByHostInstance||Y5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dp.isDisabled&&dp.supportsFiber)try{my=dp.inject(e6),_s=dp}catch{}}or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z5;or.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m$(t))throw Error(F(200));return Q5(e,t,null,n)};or.createRoot=function(e,t){if(!m$(e))throw Error(F(299));var n=!1,r="",s=jM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=h$(e,1,!1,null,null,n,!1,r,s),e[oi]=t.current,Kf(e.nodeType===8?e.parentNode:e),new p$(t)};or.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=ax(t),e=e===null?null:e.stateNode,e};or.flushSync=function(e){return fa(e)};or.hydrate=function(e,t,n){if(!Cy(t))throw Error(F(200));return Ry(null,e,t,!0,n)};or.hydrateRoot=function(e,t,n){if(!m$(e))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=jM;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=DM(t,null,e,1,n??null,s,!1,i,o),e[oi]=t.current,Kf(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ty(t)};or.render=function(e,t,n){if(!Cy(t))throw Error(F(200));return Ry(null,e,t,!1,n)};or.unmountComponentAtNode=function(e){if(!Cy(e))throw Error(F(40));return e._reactRootContainer?(fa(function(){Ry(null,null,e,!1,function(){e._reactRootContainer=null,e[oi]=null})}),!0):!1};or.unstable_batchedUpdates=c$;or.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Cy(n))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return Ry(e,t,n,!1,r)};or.version="18.3.1-next-f1338f8080-20240426";function BM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BM)}catch(e){console.error(e)}}BM(),BN.exports=or;var t6=BN.exports,zM,$T=t6;zM=$T.createRoot,$T.hydrateRoot;const oo=function(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof self<"u")return self;if(typeof window<"u")return window;try{return new Function("return this")()}catch{return{}}}();oo.trustedTypes===void 0&&(oo.trustedTypes={createPolicy:(e,t)=>t});const UM={configurable:!1,enumerable:!1,writable:!1};oo.FAST===void 0&&Reflect.defineProperty(oo,"FAST",Object.assign({value:Object.create(null)},UM));const eh=oo.FAST;if(eh.getById===void 0){const e=Object.create(null);Reflect.defineProperty(eh,"getById",Object.assign({value(t,n){let r=e[t];return r===void 0&&(r=n?e[t]=n():null),r}},UM))}const _f=Object.freeze([]);function VM(){const e=new WeakMap;return function(t){let n=e.get(t);if(n===void 0){let r=Reflect.getPrototypeOf(t);for(;n===void 0&&r!==null;)n=e.get(r),r=Reflect.getPrototypeOf(r);n=n===void 0?[]:n.slice(0),e.set(t,n)}return n}}const H_=oo.FAST.getById(1,()=>{const e=[],t=[];function n(){if(t.length)throw t.shift()}function r(o){try{o.call()}catch(a){t.push(a),setTimeout(n,0)}}function s(){let a=0;for(;a<e.length;)if(r(e[a]),a++,a>1024){for(let c=0,l=e.length-a;c<l;c++)e[c]=e[c+a];e.length-=a,a=0}e.length=0}function i(o){e.length<1&&oo.requestAnimationFrame(s),e.push(o)}return Object.freeze({enqueue:i,process:s})}),qM=oo.trustedTypes.createPolicy("fast-html",{createHTML:e=>e});let W_=qM;const vf=`fast-${Math.random().toString(36).substring(2,8)}`,KM=`${vf}{`,g$=`}${vf}`,Re=Object.freeze({supportsAdoptedStyleSheets:Array.isArray(document.adoptedStyleSheets)&&"replace"in CSSStyleSheet.prototype,setHTMLPolicy(e){if(W_!==qM)throw new Error("The HTML policy can only be set once.");W_=e},createHTML(e){return W_.createHTML(e)},isMarker(e){return e&&e.nodeType===8&&e.data.startsWith(vf)},extractDirectiveIndexFromMarker(e){return parseInt(e.data.replace(`${vf}:`,""))},createInterpolationPlaceholder(e){return`${KM}${e}${g$}`},createCustomAttributePlaceholder(e,t){return`${e}="${this.createInterpolationPlaceholder(t)}"`},createBlockPlaceholder(e){return`<!--${vf}:${e}-->`},queueUpdate:H_.enqueue,processUpdates:H_.process,nextUpdate(){return new Promise(H_.enqueue)},setAttribute(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)},setBooleanAttribute(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)},removeChildNodes(e){for(let t=e.firstChild;t!==null;t=e.firstChild)e.removeChild(t)},createTemplateWalker(e){return document.createTreeWalker(e,133,null,!1)}});class o0{constructor(t,n){this.sub1=void 0,this.sub2=void 0,this.spillover=void 0,this.source=t,this.sub1=n}has(t){return this.spillover===void 0?this.sub1===t||this.sub2===t:this.spillover.indexOf(t)!==-1}subscribe(t){const n=this.spillover;if(n===void 0){if(this.has(t))return;if(this.sub1===void 0){this.sub1=t;return}if(this.sub2===void 0){this.sub2=t;return}this.spillover=[this.sub1,this.sub2,t],this.sub1=void 0,this.sub2=void 0}else n.indexOf(t)===-1&&n.push(t)}unsubscribe(t){const n=this.spillover;if(n===void 0)this.sub1===t?this.sub1=void 0:this.sub2===t&&(this.sub2=void 0);else{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}notify(t){const n=this.spillover,r=this.source;if(n===void 0){const s=this.sub1,i=this.sub2;s!==void 0&&s.handleChange(r,t),i!==void 0&&i.handleChange(r,t)}else for(let s=0,i=n.length;s<i;++s)n[s].handleChange(r,t)}}class HM{constructor(t){this.subscribers={},this.sourceSubscribers=null,this.source=t}notify(t){var n;const r=this.subscribers[t];r!==void 0&&r.notify(t),(n=this.sourceSubscribers)===null||n===void 0||n.notify(t)}subscribe(t,n){var r;if(n){let s=this.subscribers[n];s===void 0&&(this.subscribers[n]=s=new o0(this.source)),s.subscribe(t)}else this.sourceSubscribers=(r=this.sourceSubscribers)!==null&&r!==void 0?r:new o0(this.source),this.sourceSubscribers.subscribe(t)}unsubscribe(t,n){var r;if(n){const s=this.subscribers[n];s!==void 0&&s.unsubscribe(t)}else(r=this.sourceSubscribers)===null||r===void 0||r.unsubscribe(t)}}const _t=eh.getById(2,()=>{const e=/(:|&&|\|\||if)/,t=new WeakMap,n=Re.queueUpdate;let r,s=l=>{throw new Error("Must call enableArrayObservation before observing arrays.")};function i(l){let f=l.$fastController||t.get(l);return f===void 0&&(Array.isArray(l)?f=s(l):t.set(l,f=new HM(l))),f}const o=VM();class a{constructor(f){this.name=f,this.field=`_${f}`,this.callback=`${f}Changed`}getValue(f){return r!==void 0&&r.watch(f,this.name),f[this.field]}setValue(f,h){const d=this.field,p=f[d];if(p!==h){f[d]=h;const _=f[this.callback];typeof _=="function"&&_.call(f,p,h),i(f).notify(this.name)}}}class c extends o0{constructor(f,h,d=!1){super(f,h),this.binding=f,this.isVolatileBinding=d,this.needsRefresh=!0,this.needsQueue=!0,this.first=this,this.last=null,this.propertySource=void 0,this.propertyName=void 0,this.notifier=void 0,this.next=void 0}observe(f,h){this.needsRefresh&&this.last!==null&&this.disconnect();const d=r;r=this.needsRefresh?this:void 0,this.needsRefresh=this.isVolatileBinding;const p=this.binding(f,h);return r=d,p}disconnect(){if(this.last!==null){let f=this.first;for(;f!==void 0;)f.notifier.unsubscribe(this,f.propertyName),f=f.next;this.last=null,this.needsRefresh=this.needsQueue=!0}}watch(f,h){const d=this.last,p=i(f),_=d===null?this.first:{};if(_.propertySource=f,_.propertyName=h,_.notifier=p,p.subscribe(this,h),d!==null){if(!this.needsRefresh){let b;r=void 0,b=d.propertySource[d.propertyName],r=this,f===b&&(this.needsRefresh=!0)}d.next=_}this.last=_}handleChange(){this.needsQueue&&(this.needsQueue=!1,n(this))}call(){this.last!==null&&(this.needsQueue=!0,this.notify(this))}records(){let f=this.first;return{next:()=>{const h=f;return h===void 0?{value:void 0,done:!0}:(f=f.next,{value:h,done:!1})},[Symbol.iterator]:function(){return this}}}}return Object.freeze({setArrayObserverFactory(l){s=l},getNotifier:i,track(l,f){r!==void 0&&r.watch(l,f)},trackVolatile(){r!==void 0&&(r.needsRefresh=!0)},notify(l,f){i(l).notify(f)},defineProperty(l,f){typeof f=="string"&&(f=new a(f)),o(l).push(f),Reflect.defineProperty(l,f.name,{enumerable:!0,get:function(){return f.getValue(this)},set:function(h){f.setValue(this,h)}})},getAccessors:o,binding(l,f,h=this.isVolatileBinding(l)){return new c(l,f,h)},isVolatileBinding(l){return e.test(l.toString())}})});function qu(e,t){_t.defineProperty(e,t)}const kT=eh.getById(3,()=>{let e=null;return{get(){return e},set(t){e=t}}});class th{constructor(){this.index=0,this.length=0,this.parent=null,this.parentContext=null}get event(){return kT.get()}get isEven(){return this.index%2===0}get isOdd(){return this.index%2!==0}get isFirst(){return this.index===0}get isInMiddle(){return!this.isFirst&&!this.isLast}get isLast(){return this.index===this.length-1}static setEvent(t){kT.set(t)}}_t.defineProperty(th.prototype,"index");_t.defineProperty(th.prototype,"length");const bf=Object.seal(new th);class y${constructor(){this.targetIndex=0}}class WM extends y${constructor(){super(...arguments),this.createPlaceholder=Re.createInterpolationPlaceholder}}class JM extends y${constructor(t,n,r){super(),this.name=t,this.behavior=n,this.options=r}createPlaceholder(t){return Re.createCustomAttributePlaceholder(this.name,t)}createBehavior(t){return new this.behavior(t,this.options)}}function n6(e,t){this.source=e,this.context=t,this.bindingObserver===null&&(this.bindingObserver=_t.binding(this.binding,this,this.isBindingVolatile)),this.updateTarget(this.bindingObserver.observe(e,t))}function r6(e,t){this.source=e,this.context=t,this.target.addEventListener(this.targetName,this)}function s6(){this.bindingObserver.disconnect(),this.source=null,this.context=null}function i6(){this.bindingObserver.disconnect(),this.source=null,this.context=null;const e=this.target.$fastView;e!==void 0&&e.isComposed&&(e.unbind(),e.needsBindOnly=!0)}function o6(){this.target.removeEventListener(this.targetName,this),this.source=null,this.context=null}function a6(e){Re.setAttribute(this.target,this.targetName,e)}function c6(e){Re.setBooleanAttribute(this.target,this.targetName,e)}function u6(e){if(e==null&&(e=""),e.create){this.target.textContent="";let t=this.target.$fastView;t===void 0?t=e.create():this.target.$fastTemplate!==e&&(t.isComposed&&(t.remove(),t.unbind()),t=e.create()),t.isComposed?t.needsBindOnly&&(t.needsBindOnly=!1,t.bind(this.source,this.context)):(t.isComposed=!0,t.bind(this.source,this.context),t.insertBefore(this.target),this.target.$fastView=t,this.target.$fastTemplate=e)}else{const t=this.target.$fastView;t!==void 0&&t.isComposed&&(t.isComposed=!1,t.remove(),t.needsBindOnly?t.needsBindOnly=!1:t.unbind()),this.target.textContent=e}}function l6(e){this.target[this.targetName]=e}function f6(e){const t=this.classVersions||Object.create(null),n=this.target;let r=this.version||0;if(e!=null&&e.length){const s=e.split(/\s+/);for(let i=0,o=s.length;i<o;++i){const a=s[i];a!==""&&(t[a]=r,n.classList.add(a))}}if(this.classVersions=t,this.version=r+1,r!==0){r-=1;for(const s in t)t[s]===r&&n.classList.remove(s)}}class S$ extends WM{constructor(t){super(),this.binding=t,this.bind=n6,this.unbind=s6,this.updateTarget=a6,this.isBindingVolatile=_t.isVolatileBinding(this.binding)}get targetName(){return this.originalTargetName}set targetName(t){if(this.originalTargetName=t,t!==void 0)switch(t[0]){case":":if(this.cleanedTargetName=t.substr(1),this.updateTarget=l6,this.cleanedTargetName==="innerHTML"){const n=this.binding;this.binding=(r,s)=>Re.createHTML(n(r,s))}break;case"?":this.cleanedTargetName=t.substr(1),this.updateTarget=c6;break;case"@":this.cleanedTargetName=t.substr(1),this.bind=r6,this.unbind=o6;break;default:this.cleanedTargetName=t,t==="class"&&(this.updateTarget=f6);break}}targetAtContent(){this.updateTarget=u6,this.unbind=i6}createBehavior(t){return new h6(t,this.binding,this.isBindingVolatile,this.bind,this.unbind,this.updateTarget,this.cleanedTargetName)}}class h6{constructor(t,n,r,s,i,o,a){this.source=null,this.context=null,this.bindingObserver=null,this.target=t,this.binding=n,this.isBindingVolatile=r,this.bind=s,this.unbind=i,this.updateTarget=o,this.targetName=a}handleChange(){this.updateTarget(this.bindingObserver.observe(this.source,this.context))}handleEvent(t){th.setEvent(t);const n=this.binding(this.source,this.context);th.setEvent(null),n!==!0&&t.preventDefault()}}let J_=null;class _${addFactory(t){t.targetIndex=this.targetIndex,this.behaviorFactories.push(t)}captureContentBinding(t){t.targetAtContent(),this.addFactory(t)}reset(){this.behaviorFactories=[],this.targetIndex=-1}release(){J_=this}static borrow(t){const n=J_||new _$;return n.directives=t,n.reset(),J_=null,n}}function d6(e){if(e.length===1)return e[0];let t;const n=e.length,r=e.map(o=>typeof o=="string"?()=>o:(t=o.targetName||t,o.binding)),s=(o,a)=>{let c="";for(let l=0;l<n;++l)c+=r[l](o,a);return c},i=new S$(s);return i.targetName=t,i}const p6=g$.length;function GM(e,t){const n=t.split(KM);if(n.length===1)return null;const r=[];for(let s=0,i=n.length;s<i;++s){const o=n[s],a=o.indexOf(g$);let c;if(a===-1)c=o;else{const l=parseInt(o.substring(0,a));r.push(e.directives[l]),c=o.substring(a+p6)}c!==""&&r.push(c)}return r}function ET(e,t,n=!1){const r=t.attributes;for(let s=0,i=r.length;s<i;++s){const o=r[s],a=o.value,c=GM(e,a);let l=null;c===null?n&&(l=new S$(()=>a),l.targetName=o.name):l=d6(c),l!==null&&(t.removeAttributeNode(o),s--,i--,e.addFactory(l))}}function m6(e,t,n){const r=GM(e,t.textContent);if(r!==null){let s=t;for(let i=0,o=r.length;i<o;++i){const a=r[i],c=i===0?t:s.parentNode.insertBefore(document.createTextNode(""),s.nextSibling);typeof a=="string"?c.textContent=a:(c.textContent=" ",e.captureContentBinding(a)),s=c,e.targetIndex++,c!==t&&n.nextNode()}e.targetIndex--}}function g6(e,t){const n=e.content;document.adoptNode(n);const r=_$.borrow(t);ET(r,e,!0);const s=r.behaviorFactories;r.reset();const i=Re.createTemplateWalker(n);let o;for(;o=i.nextNode();)switch(r.targetIndex++,o.nodeType){case 1:ET(r,o);break;case 3:m6(r,o,i);break;case 8:Re.isMarker(o)&&r.addFactory(t[Re.extractDirectiveIndexFromMarker(o)])}let a=0;(Re.isMarker(n.firstChild)||n.childNodes.length===1&&t.length)&&(n.insertBefore(document.createComment(""),n.firstChild),a=-1);const c=r.behaviorFactories;return r.release(),{fragment:n,viewBehaviorFactories:c,hostBehaviorFactories:s,targetOffset:a}}const G_=document.createRange();class y6{constructor(t,n){this.fragment=t,this.behaviors=n,this.source=null,this.context=null,this.firstChild=t.firstChild,this.lastChild=t.lastChild}appendTo(t){t.appendChild(this.fragment)}insertBefore(t){if(this.fragment.hasChildNodes())t.parentNode.insertBefore(this.fragment,t);else{const n=this.lastChild;if(t.previousSibling===n)return;const r=t.parentNode;let s=this.firstChild,i;for(;s!==n;)i=s.nextSibling,r.insertBefore(s,t),s=i;r.insertBefore(n,t)}}remove(){const t=this.fragment,n=this.lastChild;let r=this.firstChild,s;for(;r!==n;)s=r.nextSibling,t.appendChild(r),r=s;t.appendChild(n)}dispose(){const t=this.firstChild.parentNode,n=this.lastChild;let r=this.firstChild,s;for(;r!==n;)s=r.nextSibling,t.removeChild(r),r=s;t.removeChild(n);const i=this.behaviors,o=this.source;for(let a=0,c=i.length;a<c;++a)i[a].unbind(o)}bind(t,n){const r=this.behaviors;if(this.source!==t)if(this.source!==null){const s=this.source;this.source=t,this.context=n;for(let i=0,o=r.length;i<o;++i){const a=r[i];a.unbind(s),a.bind(t,n)}}else{this.source=t,this.context=n;for(let s=0,i=r.length;s<i;++s)r[s].bind(t,n)}}unbind(){if(this.source===null)return;const t=this.behaviors,n=this.source;for(let r=0,s=t.length;r<s;++r)t[r].unbind(n);this.source=null}static disposeContiguousBatch(t){if(t.length!==0){G_.setStartBefore(t[0].firstChild),G_.setEndAfter(t[t.length-1].lastChild),G_.deleteContents();for(let n=0,r=t.length;n<r;++n){const s=t[n],i=s.behaviors,o=s.source;for(let a=0,c=i.length;a<c;++a)i[a].unbind(o)}}}}class OT{constructor(t,n){this.behaviorCount=0,this.hasHostBehaviors=!1,this.fragment=null,this.targetOffset=0,this.viewBehaviorFactories=null,this.hostBehaviorFactories=null,this.html=t,this.directives=n}create(t){if(this.fragment===null){let l;const f=this.html;if(typeof f=="string"){l=document.createElement("template"),l.innerHTML=Re.createHTML(f);const d=l.content.firstElementChild;d!==null&&d.tagName==="TEMPLATE"&&(l=d)}else l=f;const h=g6(l,this.directives);this.fragment=h.fragment,this.viewBehaviorFactories=h.viewBehaviorFactories,this.hostBehaviorFactories=h.hostBehaviorFactories,this.targetOffset=h.targetOffset,this.behaviorCount=this.viewBehaviorFactories.length+this.hostBehaviorFactories.length,this.hasHostBehaviors=this.hostBehaviorFactories.length>0}const n=this.fragment.cloneNode(!0),r=this.viewBehaviorFactories,s=new Array(this.behaviorCount),i=Re.createTemplateWalker(n);let o=0,a=this.targetOffset,c=i.nextNode();for(let l=r.length;o<l;++o){const f=r[o],h=f.targetIndex;for(;c!==null;)if(a===h){s[o]=f.createBehavior(c);break}else c=i.nextNode(),a++}if(this.hasHostBehaviors){const l=this.hostBehaviorFactories;for(let f=0,h=l.length;f<h;++f,++o)s[o]=l[f].createBehavior(t)}return new y6(n,s)}render(t,n,r){typeof n=="string"&&(n=document.getElementById(n)),r===void 0&&(r=n);const s=this.create(r);return s.bind(t,bf),s.appendTo(n),s}}const S6=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function qh(e,...t){const n=[];let r="";for(let s=0,i=e.length-1;s<i;++s){const o=e[s];let a=t[s];if(r+=o,a instanceof OT){const c=a;a=()=>c}if(typeof a=="function"&&(a=new S$(a)),a instanceof WM){const c=S6.exec(o);c!==null&&(a.targetName=c[2])}a instanceof y$?(r+=a.createPlaceholder(n.length),n.push(a)):r+=a}return r+=e[e.length-1],new OT(r,n)}class Dn{constructor(){this.targets=new WeakSet}addStylesTo(t){this.targets.add(t)}removeStylesFrom(t){this.targets.delete(t)}isAttachedTo(t){return this.targets.has(t)}withBehaviors(...t){return this.behaviors=this.behaviors===null?t:this.behaviors.concat(t),this}}Dn.create=(()=>{if(Re.supportsAdoptedStyleSheets){const e=new Map;return t=>new _6(t,e)}return e=>new w6(e)})();function v$(e){return e.map(t=>t instanceof Dn?v$(t.styles):[t]).reduce((t,n)=>t.concat(n),[])}function QM(e){return e.map(t=>t instanceof Dn?t.behaviors:null).reduce((t,n)=>n===null?t:(t===null&&(t=[]),t.concat(n)),null)}const YM=Symbol("prependToAdoptedStyleSheets");function XM(e){const t=[],n=[];return e.forEach(r=>(r[YM]?t:n).push(r)),{prepend:t,append:n}}let ZM=(e,t)=>{const{prepend:n,append:r}=XM(t);e.adoptedStyleSheets=[...n,...e.adoptedStyleSheets,...r]},e2=(e,t)=>{e.adoptedStyleSheets=e.adoptedStyleSheets.filter(n=>t.indexOf(n)===-1)};if(Re.supportsAdoptedStyleSheets)try{document.adoptedStyleSheets.push(),document.adoptedStyleSheets.splice(),ZM=(e,t)=>{const{prepend:n,append:r}=XM(t);e.adoptedStyleSheets.splice(0,0,...n),e.adoptedStyleSheets.push(...r)},e2=(e,t)=>{for(const n of t){const r=e.adoptedStyleSheets.indexOf(n);r!==-1&&e.adoptedStyleSheets.splice(r,1)}}}catch{}class _6 extends Dn{constructor(t,n){super(),this.styles=t,this.styleSheetCache=n,this._styleSheets=void 0,this.behaviors=QM(t)}get styleSheets(){if(this._styleSheets===void 0){const t=this.styles,n=this.styleSheetCache;this._styleSheets=v$(t).map(r=>{if(r instanceof CSSStyleSheet)return r;let s=n.get(r);return s===void 0&&(s=new CSSStyleSheet,s.replaceSync(r),n.set(r,s)),s})}return this._styleSheets}addStylesTo(t){ZM(t,this.styleSheets),super.addStylesTo(t)}removeStylesFrom(t){e2(t,this.styleSheets),super.removeStylesFrom(t)}}let v6=0;function b6(){return`fast-style-class-${++v6}`}class w6 extends Dn{constructor(t){super(),this.styles=t,this.behaviors=null,this.behaviors=QM(t),this.styleSheets=v$(t),this.styleClass=b6()}addStylesTo(t){const n=this.styleSheets,r=this.styleClass;t=this.normalizeTarget(t);for(let s=0;s<n.length;s++){const i=document.createElement("style");i.innerHTML=n[s],i.className=r,t.append(i)}super.addStylesTo(t)}removeStylesFrom(t){t=this.normalizeTarget(t);const n=t.querySelectorAll(`.${this.styleClass}`);for(let r=0,s=n.length;r<s;++r)t.removeChild(n[r]);super.removeStylesFrom(t)}isAttachedTo(t){return super.isAttachedTo(this.normalizeTarget(t))}normalizeTarget(t){return t===document?document.body:t}}const rg=Object.freeze({locate:VM()}),$6={toView(e){return e?"true":"false"},fromView(e){return!(e==null||e==="false"||e===!1||e===0)}};class sg{constructor(t,n,r=n.toLowerCase(),s="reflect",i){this.guards=new Set,this.Owner=t,this.name=n,this.attribute=r,this.mode=s,this.converter=i,this.fieldName=`_${n}`,this.callbackName=`${n}Changed`,this.hasCallback=this.callbackName in t.prototype,s==="boolean"&&i===void 0&&(this.converter=$6)}setValue(t,n){const r=t[this.fieldName],s=this.converter;s!==void 0&&(n=s.fromView(n)),r!==n&&(t[this.fieldName]=n,this.tryReflectToAttribute(t),this.hasCallback&&t[this.callbackName](r,n),t.$fastController.notify(this.name))}getValue(t){return _t.track(t,this.name),t[this.fieldName]}onAttributeChangedCallback(t,n){this.guards.has(t)||(this.guards.add(t),this.setValue(t,n),this.guards.delete(t))}tryReflectToAttribute(t){const n=this.mode,r=this.guards;r.has(t)||n==="fromView"||Re.queueUpdate(()=>{r.add(t);const s=t[this.fieldName];switch(n){case"reflect":const i=this.converter;Re.setAttribute(t,this.attribute,i!==void 0?i.toView(s):s);break;case"boolean":Re.setBooleanAttribute(t,this.attribute,s);break}r.delete(t)})}static collect(t,...n){const r=[];n.push(rg.locate(t));for(let s=0,i=n.length;s<i;++s){const o=n[s];if(o!==void 0)for(let a=0,c=o.length;a<c;++a){const l=o[a];typeof l=="string"?r.push(new sg(t,l)):r.push(new sg(t,l.property,l.attribute,l.mode,l.converter))}}return r}}function _e(e,t){let n;function r(s,i){arguments.length>1&&(n.property=i),rg.locate(s.constructor).push(n)}if(arguments.length>1){n={},r(e,t);return}return n=e===void 0?{}:e,r}const TT={mode:"open"},CT={},a0=eh.getById(4,()=>{const e=new Map;return Object.freeze({register(t){return e.has(t.type)?!1:(e.set(t.type,t),!0)},getByType(t){return e.get(t)}})});class Kh{constructor(t,n=t.definition){typeof n=="string"&&(n={name:n}),this.type=t,this.name=n.name,this.template=n.template;const r=sg.collect(t,n.attributes),s=new Array(r.length),i={},o={};for(let a=0,c=r.length;a<c;++a){const l=r[a];s[a]=l.attribute,i[l.name]=l,o[l.attribute]=l}this.attributes=r,this.observedAttributes=s,this.propertyLookup=i,this.attributeLookup=o,this.shadowOptions=n.shadowOptions===void 0?TT:n.shadowOptions===null?void 0:Object.assign(Object.assign({},TT),n.shadowOptions),this.elementOptions=n.elementOptions===void 0?CT:Object.assign(Object.assign({},CT),n.elementOptions),this.styles=n.styles===void 0?void 0:Array.isArray(n.styles)?Dn.create(n.styles):n.styles instanceof Dn?n.styles:Dn.create([n.styles])}get isDefined(){return!!a0.getByType(this.type)}define(t=customElements){const n=this.type;if(a0.register(this)){const r=this.attributes,s=n.prototype;for(let i=0,o=r.length;i<o;++i)_t.defineProperty(s,r[i]);Reflect.defineProperty(n,"observedAttributes",{value:this.observedAttributes,enumerable:!0})}return t.get(this.name)||t.define(this.name,n,this.elementOptions),this}}Kh.forType=a0.getByType;const t2=new WeakMap,k6={bubbles:!0,composed:!0,cancelable:!0};function Q_(e){return e.shadowRoot||t2.get(e)||null}class b$ extends HM{constructor(t,n){super(t),this.boundObservables=null,this.behaviors=null,this.needsInitialization=!0,this._template=null,this._styles=null,this._isConnected=!1,this.$fastController=this,this.view=null,this.element=t,this.definition=n;const r=n.shadowOptions;if(r!==void 0){const i=t.attachShadow(r);r.mode==="closed"&&t2.set(t,i)}const s=_t.getAccessors(t);if(s.length>0){const i=this.boundObservables=Object.create(null);for(let o=0,a=s.length;o<a;++o){const c=s[o].name,l=t[c];l!==void 0&&(delete t[c],i[c]=l)}}}get isConnected(){return _t.track(this,"isConnected"),this._isConnected}setIsConnected(t){this._isConnected=t,_t.notify(this,"isConnected")}get template(){return this._template}set template(t){this._template!==t&&(this._template=t,this.needsInitialization||this.renderTemplate(t))}get styles(){return this._styles}set styles(t){this._styles!==t&&(this._styles!==null&&this.removeStyles(this._styles),this._styles=t,!this.needsInitialization&&t!==null&&this.addStyles(t))}addStyles(t){const n=Q_(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)n.append(t);else if(!t.isAttachedTo(n)){const r=t.behaviors;t.addStylesTo(n),r!==null&&this.addBehaviors(r)}}removeStyles(t){const n=Q_(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)n.removeChild(t);else if(t.isAttachedTo(n)){const r=t.behaviors;t.removeStylesFrom(n),r!==null&&this.removeBehaviors(r)}}addBehaviors(t){const n=this.behaviors||(this.behaviors=new Map),r=t.length,s=[];for(let i=0;i<r;++i){const o=t[i];n.has(o)?n.set(o,n.get(o)+1):(n.set(o,1),s.push(o))}if(this._isConnected){const i=this.element;for(let o=0;o<s.length;++o)s[o].bind(i,bf)}}removeBehaviors(t,n=!1){const r=this.behaviors;if(r===null)return;const s=t.length,i=[];for(let o=0;o<s;++o){const a=t[o];if(r.has(a)){const c=r.get(a)-1;c===0||n?r.delete(a)&&i.push(a):r.set(a,c)}}if(this._isConnected){const o=this.element;for(let a=0;a<i.length;++a)i[a].unbind(o)}}onConnectedCallback(){if(this._isConnected)return;const t=this.element;this.needsInitialization?this.finishInitialization():this.view!==null&&this.view.bind(t,bf);const n=this.behaviors;if(n!==null)for(const[r]of n)r.bind(t,bf);this.setIsConnected(!0)}onDisconnectedCallback(){if(!this._isConnected)return;this.setIsConnected(!1);const t=this.view;t!==null&&t.unbind();const n=this.behaviors;if(n!==null){const r=this.element;for(const[s]of n)s.unbind(r)}}onAttributeChangedCallback(t,n,r){const s=this.definition.attributeLookup[t];s!==void 0&&s.onAttributeChangedCallback(this.element,r)}emit(t,n,r){return this._isConnected?this.element.dispatchEvent(new CustomEvent(t,Object.assign(Object.assign({detail:n},k6),r))):!1}finishInitialization(){const t=this.element,n=this.boundObservables;if(n!==null){const s=Object.keys(n);for(let i=0,o=s.length;i<o;++i){const a=s[i];t[a]=n[a]}this.boundObservables=null}const r=this.definition;this._template===null&&(this.element.resolveTemplate?this._template=this.element.resolveTemplate():r.template&&(this._template=r.template||null)),this._template!==null&&this.renderTemplate(this._template),this._styles===null&&(this.element.resolveStyles?this._styles=this.element.resolveStyles():r.styles&&(this._styles=r.styles||null)),this._styles!==null&&this.addStyles(this._styles),this.needsInitialization=!1}renderTemplate(t){const n=this.element,r=Q_(n)||n;this.view!==null?(this.view.dispose(),this.view=null):this.needsInitialization||Re.removeChildNodes(r),t&&(this.view=t.render(n,r,n))}static forCustomElement(t){const n=t.$fastController;if(n!==void 0)return n;const r=Kh.forType(t.constructor);if(r===void 0)throw new Error("Missing FASTElement definition.");return t.$fastController=new b$(t,r)}}function RT(e){return class extends e{constructor(){super(),b$.forCustomElement(this)}$emit(t,n,r){return this.$fastController.emit(t,n,r)}connectedCallback(){this.$fastController.onConnectedCallback()}disconnectedCallback(){this.$fastController.onDisconnectedCallback()}attributeChangedCallback(t,n,r){this.$fastController.onAttributeChangedCallback(t,n,r)}}}const Iy=Object.assign(RT(HTMLElement),{from(e){return RT(e)},define(e,t){return new Kh(e,t).define().type}});class n2{createCSS(){return""}createBehavior(){}}function E6(e,t){const n=[];let r="";const s=[];for(let i=0,o=e.length-1;i<o;++i){r+=e[i];let a=t[i];if(a instanceof n2){const c=a.createBehavior();a=a.createCSS(),c&&s.push(c)}a instanceof Dn||a instanceof CSSStyleSheet?(r.trim()!==""&&(n.push(r),r=""),n.push(a)):r+=a}return r+=e[e.length-1],r.trim()!==""&&n.push(r),{styles:n,behaviors:s}}function Hh(e,...t){const{styles:n,behaviors:r}=E6(e,t),s=Dn.create(n);return r.length&&s.withBehaviors(...r),s}class O6{constructor(t,n){this.target=t,this.propertyName=n}bind(t){t[this.propertyName]=this.target}unbind(){}}function ui(e){return new JM("fast-ref",O6,e)}class T6{constructor(t,n){this.target=t,this.options=n,this.source=null}bind(t){const n=this.options.property;this.shouldUpdate=_t.getAccessors(t).some(r=>r.name===n),this.source=t,this.updateTarget(this.computeNodes()),this.shouldUpdate&&this.observe()}unbind(){this.updateTarget(_f),this.source=null,this.shouldUpdate&&this.disconnect()}handleEvent(){this.updateTarget(this.computeNodes())}computeNodes(){let t=this.getNodes();return this.options.filter!==void 0&&(t=t.filter(this.options.filter)),t}updateTarget(t){this.source[this.options.property]=t}}class C6 extends T6{constructor(t,n){super(t,n)}observe(){this.target.addEventListener("slotchange",this)}disconnect(){this.target.removeEventListener("slotchange",this)}getNodes(){return this.target.assignedNodes(this.options)}}function R6(e){return typeof e=="string"&&(e={property:e}),new JM("fast-slotted",C6,e)}class I6{handleStartContentChange(){this.startContainer.classList.toggle("start",this.start.assignedNodes().length>0)}handleEndContentChange(){this.endContainer.classList.toggle("end",this.end.assignedNodes().length>0)}}const P6=(e,t)=>qh`
    <span
        part="end"
        ${ui("endContainer")}
        class=${n=>t.end?"end":void 0}
    >
        <slot name="end" ${ui("end")} @slotchange="${n=>n.handleEndContentChange()}">
            ${t.end||""}
        </slot>
    </span>
`,F6=(e,t)=>qh`
    <span
        part="start"
        ${ui("startContainer")}
        class="${n=>t.start?"start":void 0}"
    >
        <slot
            name="start"
            ${ui("start")}
            @slotchange="${n=>n.handleStartContentChange()}"
        >
            ${t.start||""}
        </slot>
    </span>
`;qh`
    <span part="end" ${ui("endContainer")}>
        <slot
            name="end"
            ${ui("end")}
            @slotchange="${e=>e.handleEndContentChange()}"
        ></slot>
    </span>
`;qh`
    <span part="start" ${ui("startContainer")}>
        <slot
            name="start"
            ${ui("start")}
            @slotchange="${e=>e.handleStartContentChange()}"
        ></slot>
    </span>
`;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function we(e,t,n,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i}const Y_=new Map;"metadata"in Reflect||(Reflect.metadata=function(e,t){return function(n){Reflect.defineMetadata(e,t,n)}},Reflect.defineMetadata=function(e,t,n){let r=Y_.get(n);r===void 0&&Y_.set(n,r=new Map),r.set(e,t)},Reflect.getOwnMetadata=function(e,t){const n=Y_.get(t);if(n!==void 0)return n.get(e)});class N6{constructor(t,n){this.container=t,this.key=n}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,s2(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,n){const{container:r,key:s}=this;return this.container=this.key=void 0,r.registerResolver(s,new _r(s,t,n))}}function Rl(e){const t=e.slice(),n=Object.keys(e),r=n.length;let s;for(let i=0;i<r;++i)s=n[i],i2(s)||(t[s]=e[s]);return t}const x6=Object.freeze({none(e){throw Error(`${e.toString()} not registered, did you forget to add @singleton()?`)},singleton(e){return new _r(e,1,e)},transient(e){return new _r(e,2,e)}}),X_=Object.freeze({default:Object.freeze({parentLocator:()=>null,responsibleForOwnerRequests:!1,defaultResolver:x6.singleton})}),IT=new Map;function PT(e){return t=>Reflect.getOwnMetadata(e,t)}let FT=null;const He=Object.freeze({createContainer(e){return new wf(null,Object.assign({},X_.default,e))},findResponsibleContainer(e){const t=e.$$container$$;return t&&t.responsibleForOwnerRequests?t:He.findParentContainer(e)},findParentContainer(e){const t=new CustomEvent(r2,{bubbles:!0,composed:!0,cancelable:!0,detail:{container:void 0}});return e.dispatchEvent(t),t.detail.container||He.getOrCreateDOMContainer()},getOrCreateDOMContainer(e,t){return e?e.$$container$$||new wf(e,Object.assign({},X_.default,t,{parentLocator:He.findParentContainer})):FT||(FT=new wf(null,Object.assign({},X_.default,t,{parentLocator:()=>null})))},getDesignParamtypes:PT("design:paramtypes"),getAnnotationParamtypes:PT("di:paramtypes"),getOrCreateAnnotationParamTypes(e){let t=this.getAnnotationParamtypes(e);return t===void 0&&Reflect.defineMetadata("di:paramtypes",t=[],e),t},getDependencies(e){let t=IT.get(e);if(t===void 0){const n=e.inject;if(n===void 0){const r=He.getDesignParamtypes(e),s=He.getAnnotationParamtypes(e);if(r===void 0)if(s===void 0){const i=Object.getPrototypeOf(e);typeof i=="function"&&i!==Function.prototype?t=Rl(He.getDependencies(i)):t=[]}else t=Rl(s);else if(s===void 0)t=Rl(r);else{t=Rl(r);let i=s.length,o;for(let l=0;l<i;++l)o=s[l],o!==void 0&&(t[l]=o);const a=Object.keys(s);i=a.length;let c;for(let l=0;l<i;++l)c=a[l],i2(c)||(t[c]=s[c])}}else t=Rl(n);IT.set(e,t)}return t},defineProperty(e,t,n,r=!1){const s=`$di_${t}`;Reflect.defineProperty(e,t,{get:function(){let i=this[s];if(i===void 0&&(i=(this instanceof HTMLElement?He.findResponsibleContainer(this):He.getOrCreateDOMContainer()).get(n),this[s]=i,r&&this instanceof Iy)){const a=this.$fastController,c=()=>{const f=He.findResponsibleContainer(this).get(n),h=this[s];f!==h&&(this[s]=i,a.notify(t))};a.subscribe({handleChange:c},"isConnected")}return i}})},createInterface(e,t){const n=typeof e=="function"?e:t,r=typeof e=="string"?e:e&&"friendlyName"in e&&e.friendlyName||AT,s=typeof e=="string"?!1:e&&"respectConnection"in e&&e.respectConnection||!1,i=function(o,a,c){if(o==null||new.target!==void 0)throw new Error(`No registration for interface: '${i.friendlyName}'`);if(a)He.defineProperty(o,a,i,s);else{const l=He.getOrCreateAnnotationParamTypes(o);l[c]=i}};return i.$isInterface=!0,i.friendlyName=r??"(anonymous)",n!=null&&(i.register=function(o,a){return n(new N6(o,a??i))}),i.toString=function(){return`InterfaceSymbol<${i.friendlyName}>`},i},inject(...e){return function(t,n,r){if(typeof r=="number"){const s=He.getOrCreateAnnotationParamTypes(t),i=e[0];i!==void 0&&(s[r]=i)}else if(n)He.defineProperty(t,n,e[0]);else{const s=r?He.getOrCreateAnnotationParamTypes(r.value):He.getOrCreateAnnotationParamTypes(t);let i;for(let o=0;o<e.length;++o)i=e[o],i!==void 0&&(s[o]=i)}}},transient(e){return e.register=function(n){return nh.transient(e,e).register(n)},e.registerInRequestor=!1,e},singleton(e,t=A6){return e.register=function(r){return nh.singleton(e,e).register(r)},e.registerInRequestor=t.scoped,e}}),M6=He.createInterface("Container");He.inject;const A6={scoped:!1};class _r{constructor(t,n,r){this.key=t,this.strategy=n,this.state=r,this.resolving=!1}get $isResolver(){return!0}register(t){return t.registerResolver(this.key,this)}resolve(t,n){switch(this.strategy){case 0:return this.state;case 1:{if(this.resolving)throw new Error(`Cyclic dependency found: ${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(n),this.strategy=0,this.resolving=!1,this.state}case 2:{const r=t.getFactory(this.state);if(r===null)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return r.construct(n)}case 3:return this.state(t,n,this);case 4:return this.state[0].resolve(t,n);case 5:return n.get(this.state);default:throw new Error(`Invalid resolver strategy specified: ${this.strategy}.`)}}getFactory(t){var n,r,s;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return(s=(r=(n=t.getResolver(this.state))===null||n===void 0?void 0:n.getFactory)===null||r===void 0?void 0:r.call(n,t))!==null&&s!==void 0?s:null;default:return null}}}function NT(e){return this.get(e)}function L6(e,t){return t(e)}class D6{constructor(t,n){this.Type=t,this.dependencies=n,this.transformers=null}construct(t,n){let r;return n===void 0?r=new this.Type(...this.dependencies.map(NT,t)):r=new this.Type(...this.dependencies.map(NT,t),...n),this.transformers==null?r:this.transformers.reduce(L6,r)}registerTransformer(t){(this.transformers||(this.transformers=[])).push(t)}}const j6={$isResolver:!0,resolve(e,t){return t}};function Yp(e){return typeof e.register=="function"}function B6(e){return Yp(e)&&typeof e.registerInRequestor=="boolean"}function xT(e){return B6(e)&&e.registerInRequestor}function z6(e){return e.prototype!==void 0}const U6=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]),r2="__DI_LOCATE_PARENT__",Z_=new Map;class wf{constructor(t,n){this.owner=t,this.config=n,this._parent=void 0,this.registerDepth=0,this.context=null,t!==null&&(t.$$container$$=this),this.resolvers=new Map,this.resolvers.set(M6,j6),t instanceof Node&&t.addEventListener(r2,r=>{r.composedPath()[0]!==this.owner&&(r.detail.container=this,r.stopImmediatePropagation())})}get parent(){return this._parent===void 0&&(this._parent=this.config.parentLocator(this.owner)),this._parent}get depth(){return this.parent===null?0:this.parent.depth+1}get responsibleForOwnerRequests(){return this.config.responsibleForOwnerRequests}registerWithContext(t,...n){return this.context=t,this.register(...n),this.context=null,this}register(...t){if(++this.registerDepth===100)throw new Error("Unable to autoregister dependency");let n,r,s,i,o;const a=this.context;for(let c=0,l=t.length;c<l;++c)if(n=t[c],!!LT(n))if(Yp(n))n.register(this,a);else if(z6(n))nh.singleton(n,n).register(this);else for(r=Object.keys(n),i=0,o=r.length;i<o;++i)s=n[r[i]],LT(s)&&(Yp(s)?s.register(this,a):this.register(s));return--this.registerDepth,this}registerResolver(t,n){pp(t);const r=this.resolvers,s=r.get(t);return s==null?r.set(t,n):s instanceof _r&&s.strategy===4?s.state.push(n):r.set(t,new _r(t,4,[s,n])),n}registerTransformer(t,n){const r=this.getResolver(t);if(r==null)return!1;if(r.getFactory){const s=r.getFactory(this);return s==null?!1:(s.registerTransformer(n),!0)}return!1}getResolver(t,n=!0){if(pp(t),t.resolve!==void 0)return t;let r=this,s;for(;r!=null;)if(s=r.resolvers.get(t),s==null){if(r.parent==null){const i=xT(t)?this:r;return n?this.jitRegister(t,i):null}r=r.parent}else return s;return null}has(t,n=!1){return this.resolvers.has(t)?!0:n&&this.parent!=null?this.parent.has(t,!0):!1}get(t){if(pp(t),t.$isResolver)return t.resolve(this,this);let n=this,r;for(;n!=null;)if(r=n.resolvers.get(t),r==null){if(n.parent==null){const s=xT(t)?this:n;return r=this.jitRegister(t,s),r.resolve(n,this)}n=n.parent}else return r.resolve(n,this);throw new Error(`Unable to resolve key: ${String(t)}`)}getAll(t,n=!1){pp(t);const r=this;let s=r,i;if(n){let o=_f;for(;s!=null;)i=s.resolvers.get(t),i!=null&&(o=o.concat(MT(i,s,r))),s=s.parent;return o}else for(;s!=null;)if(i=s.resolvers.get(t),i==null){if(s=s.parent,s==null)return _f}else return MT(i,s,r);return _f}getFactory(t){let n=Z_.get(t);if(n===void 0){if(V6(t))throw new Error(`${t.name} is a native function and therefore cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.`);Z_.set(t,n=new D6(t,He.getDependencies(t)))}return n}registerFactory(t,n){Z_.set(t,n)}createChild(t){return new wf(null,Object.assign({},this.config,t,{parentLocator:()=>this}))}jitRegister(t,n){if(typeof t!="function")throw new Error(`Attempted to jitRegister something that is not a constructor: '${t}'. Did you forget to register this dependency?`);if(U6.has(t.name))throw new Error(`Attempted to jitRegister an intrinsic type: ${t.name}. Did you forget to add @inject(Key)`);if(Yp(t)){const r=t.register(n);if(!(r instanceof Object)||r.resolve==null){const s=n.resolvers.get(t);if(s!=null)return s;throw new Error("A valid resolver was not returned from the static register method")}return r}else{if(t.$isInterface)throw new Error(`Attempted to jitRegister an interface: ${t.friendlyName}`);{const r=this.config.defaultResolver(t,n);return n.resolvers.set(t,r),r}}}}const ev=new WeakMap;function s2(e){return function(t,n,r){if(ev.has(r))return ev.get(r);const s=e(t,n,r);return ev.set(r,s),s}}const nh=Object.freeze({instance(e,t){return new _r(e,0,t)},singleton(e,t){return new _r(e,1,t)},transient(e,t){return new _r(e,2,t)},callback(e,t){return new _r(e,3,t)},cachedCallback(e,t){return new _r(e,3,s2(t))},aliasTo(e,t){return new _r(t,5,e)}});function pp(e){if(e==null)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}function MT(e,t,n){if(e instanceof _r&&e.strategy===4){const r=e.state;let s=r.length;const i=new Array(s);for(;s--;)i[s]=r[s].resolve(t,n);return i}return[e.resolve(t,n)]}const AT="(anonymous)";function LT(e){return typeof e=="object"&&e!==null||typeof e=="function"}const V6=function(){const e=new WeakMap;let t=!1,n="",r=0;return function(s){return t=e.get(s),t===void 0&&(n=s.toString(),r=n.length,t=r>=29&&r<=100&&n.charCodeAt(r-1)===125&&n.charCodeAt(r-2)<=32&&n.charCodeAt(r-3)===93&&n.charCodeAt(r-4)===101&&n.charCodeAt(r-5)===100&&n.charCodeAt(r-6)===111&&n.charCodeAt(r-7)===99&&n.charCodeAt(r-8)===32&&n.charCodeAt(r-9)===101&&n.charCodeAt(r-10)===118&&n.charCodeAt(r-11)===105&&n.charCodeAt(r-12)===116&&n.charCodeAt(r-13)===97&&n.charCodeAt(r-14)===110&&n.charCodeAt(r-15)===88,e.set(s,t)),t}}(),mp={};function i2(e){switch(typeof e){case"number":return e>=0&&(e|0)===e;case"string":{const t=mp[e];if(t!==void 0)return t;const n=e.length;if(n===0)return mp[e]=!1;let r=0;for(let s=0;s<n;++s)if(r=e.charCodeAt(s),s===0&&r===48&&n>1||r<48||r>57)return mp[e]=!1;return mp[e]=!0}default:return!1}}function DT(e){return`${e.toLowerCase()}:presentation`}const gp=new Map,o2=Object.freeze({define(e,t,n){const r=DT(e);gp.get(r)===void 0?gp.set(r,t):gp.set(r,!1),n.register(nh.instance(r,t))},forTag(e,t){const n=DT(e),r=gp.get(n);return r===!1?He.findResponsibleContainer(t).get(n):r||null}});class q6{constructor(t,n){this.template=t||null,this.styles=n===void 0?null:Array.isArray(n)?Dn.create(n):n instanceof Dn?n:Dn.create([n])}applyTo(t){const n=t.$fastController;n.template===null&&(n.template=this.template),n.styles===null&&(n.styles=this.styles)}}class ha extends Iy{constructor(){super(...arguments),this._presentation=void 0}get $presentation(){return this._presentation===void 0&&(this._presentation=o2.forTag(this.tagName,this)),this._presentation}templateChanged(){this.template!==void 0&&(this.$fastController.template=this.template)}stylesChanged(){this.styles!==void 0&&(this.$fastController.styles=this.styles)}connectedCallback(){this.$presentation!==null&&this.$presentation.applyTo(this),super.connectedCallback()}static compose(t){return(n={})=>new a2(this===ha?class extends ha{}:this,t,n)}}we([qu],ha.prototype,"template",void 0);we([qu],ha.prototype,"styles",void 0);function Il(e,t,n){return typeof e=="function"?e(t,n):e}class a2{constructor(t,n,r){this.type=t,this.elementDefinition=n,this.overrideDefinition=r,this.definition=Object.assign(Object.assign({},this.elementDefinition),this.overrideDefinition)}register(t,n){const r=this.definition,s=this.overrideDefinition,o=`${r.prefix||n.elementPrefix}-${r.baseName}`;n.tryDefineElement({name:o,type:this.type,baseClass:this.elementDefinition.baseClass,callback:a=>{const c=new q6(Il(r.template,a,r),Il(r.styles,a,r));a.definePresentation(c);let l=Il(r.shadowOptions,a,r);a.shadowRootMode&&(l?s.shadowOptions||(l.mode=a.shadowRootMode):l!==null&&(l={mode:a.shadowRootMode})),a.defineElement({elementOptions:Il(r.elementOptions,a,r),shadowOptions:l,attributes:Il(r.attributes,a,r)})}})}}function c2(e,...t){const n=rg.locate(e);t.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(r.prototype,i))}),rg.locate(r).forEach(i=>n.push(i))})}function K6(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function H6(){const e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}let Oo;function W6(){if(typeof Oo=="boolean")return Oo;if(!K6())return Oo=!1,Oo;const e=document.createElement("style"),t=H6();t!==null&&e.setAttribute("nonce",t),document.head.appendChild(e);try{e.sheet.insertRule("foo:focus-visible {color:inherit}",0),Oo=!0}catch{Oo=!1}finally{document.head.removeChild(e)}return Oo}var jT;(function(e){e[e.alt=18]="alt",e[e.arrowDown=40]="arrowDown",e[e.arrowLeft=37]="arrowLeft",e[e.arrowRight=39]="arrowRight",e[e.arrowUp=38]="arrowUp",e[e.back=8]="back",e[e.backSlash=220]="backSlash",e[e.break=19]="break",e[e.capsLock=20]="capsLock",e[e.closeBracket=221]="closeBracket",e[e.colon=186]="colon",e[e.colon2=59]="colon2",e[e.comma=188]="comma",e[e.ctrl=17]="ctrl",e[e.delete=46]="delete",e[e.end=35]="end",e[e.enter=13]="enter",e[e.equals=187]="equals",e[e.equals2=61]="equals2",e[e.equals3=107]="equals3",e[e.escape=27]="escape",e[e.forwardSlash=191]="forwardSlash",e[e.function1=112]="function1",e[e.function10=121]="function10",e[e.function11=122]="function11",e[e.function12=123]="function12",e[e.function2=113]="function2",e[e.function3=114]="function3",e[e.function4=115]="function4",e[e.function5=116]="function5",e[e.function6=117]="function6",e[e.function7=118]="function7",e[e.function8=119]="function8",e[e.function9=120]="function9",e[e.home=36]="home",e[e.insert=45]="insert",e[e.menu=93]="menu",e[e.minus=189]="minus",e[e.minus2=109]="minus2",e[e.numLock=144]="numLock",e[e.numPad0=96]="numPad0",e[e.numPad1=97]="numPad1",e[e.numPad2=98]="numPad2",e[e.numPad3=99]="numPad3",e[e.numPad4=100]="numPad4",e[e.numPad5=101]="numPad5",e[e.numPad6=102]="numPad6",e[e.numPad7=103]="numPad7",e[e.numPad8=104]="numPad8",e[e.numPad9=105]="numPad9",e[e.numPadDivide=111]="numPadDivide",e[e.numPadDot=110]="numPadDot",e[e.numPadMinus=109]="numPadMinus",e[e.numPadMultiply=106]="numPadMultiply",e[e.numPadPlus=107]="numPadPlus",e[e.openBracket=219]="openBracket",e[e.pageDown=34]="pageDown",e[e.pageUp=33]="pageUp",e[e.period=190]="period",e[e.print=44]="print",e[e.quote=222]="quote",e[e.scrollLock=145]="scrollLock",e[e.shift=16]="shift",e[e.space=32]="space",e[e.tab=9]="tab",e[e.tilde=192]="tilde",e[e.windowsLeft=91]="windowsLeft",e[e.windowsOpera=219]="windowsOpera",e[e.windowsRight=92]="windowsRight"})(jT||(jT={}));const J6="Enter";class wt{}we([_e({attribute:"aria-atomic"})],wt.prototype,"ariaAtomic",void 0);we([_e({attribute:"aria-busy"})],wt.prototype,"ariaBusy",void 0);we([_e({attribute:"aria-controls"})],wt.prototype,"ariaControls",void 0);we([_e({attribute:"aria-current"})],wt.prototype,"ariaCurrent",void 0);we([_e({attribute:"aria-describedby"})],wt.prototype,"ariaDescribedby",void 0);we([_e({attribute:"aria-details"})],wt.prototype,"ariaDetails",void 0);we([_e({attribute:"aria-disabled"})],wt.prototype,"ariaDisabled",void 0);we([_e({attribute:"aria-errormessage"})],wt.prototype,"ariaErrormessage",void 0);we([_e({attribute:"aria-flowto"})],wt.prototype,"ariaFlowto",void 0);we([_e({attribute:"aria-haspopup"})],wt.prototype,"ariaHaspopup",void 0);we([_e({attribute:"aria-hidden"})],wt.prototype,"ariaHidden",void 0);we([_e({attribute:"aria-invalid"})],wt.prototype,"ariaInvalid",void 0);we([_e({attribute:"aria-keyshortcuts"})],wt.prototype,"ariaKeyshortcuts",void 0);we([_e({attribute:"aria-label"})],wt.prototype,"ariaLabel",void 0);we([_e({attribute:"aria-labelledby"})],wt.prototype,"ariaLabelledby",void 0);we([_e({attribute:"aria-live"})],wt.prototype,"ariaLive",void 0);we([_e({attribute:"aria-owns"})],wt.prototype,"ariaOwns",void 0);we([_e({attribute:"aria-relevant"})],wt.prototype,"ariaRelevant",void 0);we([_e({attribute:"aria-roledescription"})],wt.prototype,"ariaRoledescription",void 0);const G6=(e,t)=>qh`
    <button
        class="control"
        part="control"
        ?autofocus="${n=>n.autofocus}"
        ?disabled="${n=>n.disabled}"
        form="${n=>n.formId}"
        formaction="${n=>n.formaction}"
        formenctype="${n=>n.formenctype}"
        formmethod="${n=>n.formmethod}"
        formnovalidate="${n=>n.formnovalidate}"
        formtarget="${n=>n.formtarget}"
        name="${n=>n.name}"
        type="${n=>n.type}"
        value="${n=>n.value}"
        aria-atomic="${n=>n.ariaAtomic}"
        aria-busy="${n=>n.ariaBusy}"
        aria-controls="${n=>n.ariaControls}"
        aria-current="${n=>n.ariaCurrent}"
        aria-describedby="${n=>n.ariaDescribedby}"
        aria-details="${n=>n.ariaDetails}"
        aria-disabled="${n=>n.ariaDisabled}"
        aria-errormessage="${n=>n.ariaErrormessage}"
        aria-expanded="${n=>n.ariaExpanded}"
        aria-flowto="${n=>n.ariaFlowto}"
        aria-haspopup="${n=>n.ariaHaspopup}"
        aria-hidden="${n=>n.ariaHidden}"
        aria-invalid="${n=>n.ariaInvalid}"
        aria-keyshortcuts="${n=>n.ariaKeyshortcuts}"
        aria-label="${n=>n.ariaLabel}"
        aria-labelledby="${n=>n.ariaLabelledby}"
        aria-live="${n=>n.ariaLive}"
        aria-owns="${n=>n.ariaOwns}"
        aria-pressed="${n=>n.ariaPressed}"
        aria-relevant="${n=>n.ariaRelevant}"
        aria-roledescription="${n=>n.ariaRoledescription}"
        ${ui("control")}
    >
        ${F6(e,t)}
        <span class="content" part="content">
            <slot ${R6("defaultSlottedContent")}></slot>
        </span>
        ${P6(e,t)}
    </button>
`,BT="form-associated-proxy",zT="ElementInternals",UT=zT in window&&"setFormValue"in window[zT].prototype,VT=new WeakMap;function Q6(e){const t=class extends e{constructor(...n){super(...n),this.dirtyValue=!1,this.disabled=!1,this.proxyEventsToBlock=["change","click"],this.proxyInitialized=!1,this.required=!1,this.initialValue=this.initialValue||"",this.elementInternals||(this.formResetCallback=this.formResetCallback.bind(this))}static get formAssociated(){return UT}get validity(){return this.elementInternals?this.elementInternals.validity:this.proxy.validity}get form(){return this.elementInternals?this.elementInternals.form:this.proxy.form}get validationMessage(){return this.elementInternals?this.elementInternals.validationMessage:this.proxy.validationMessage}get willValidate(){return this.elementInternals?this.elementInternals.willValidate:this.proxy.willValidate}get labels(){if(this.elementInternals)return Object.freeze(Array.from(this.elementInternals.labels));if(this.proxy instanceof HTMLElement&&this.proxy.ownerDocument&&this.id){const n=this.proxy.labels,r=Array.from(this.proxy.getRootNode().querySelectorAll(`[for='${this.id}']`)),s=n?r.concat(Array.from(n)):r;return Object.freeze(s)}else return _f}valueChanged(n,r){this.dirtyValue=!0,this.proxy instanceof HTMLElement&&(this.proxy.value=this.value),this.currentValue=this.value,this.setFormValue(this.value),this.validate()}currentValueChanged(){this.value=this.currentValue}initialValueChanged(n,r){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}disabledChanged(n,r){this.proxy instanceof HTMLElement&&(this.proxy.disabled=this.disabled),Re.queueUpdate(()=>this.classList.toggle("disabled",this.disabled))}nameChanged(n,r){this.proxy instanceof HTMLElement&&(this.proxy.name=this.name)}requiredChanged(n,r){this.proxy instanceof HTMLElement&&(this.proxy.required=this.required),Re.queueUpdate(()=>this.classList.toggle("required",this.required)),this.validate()}get elementInternals(){if(!UT)return null;let n=VT.get(this);return n||(n=this.attachInternals(),VT.set(this,n)),n}connectedCallback(){super.connectedCallback(),this.addEventListener("keypress",this._keypressHandler),this.value||(this.value=this.initialValue,this.dirtyValue=!1),this.elementInternals||(this.attachProxy(),this.form&&this.form.addEventListener("reset",this.formResetCallback))}disconnectedCallback(){super.disconnectedCallback(),this.proxyEventsToBlock.forEach(n=>this.proxy.removeEventListener(n,this.stopPropagation)),!this.elementInternals&&this.form&&this.form.removeEventListener("reset",this.formResetCallback)}checkValidity(){return this.elementInternals?this.elementInternals.checkValidity():this.proxy.checkValidity()}reportValidity(){return this.elementInternals?this.elementInternals.reportValidity():this.proxy.reportValidity()}setValidity(n,r,s){this.elementInternals?this.elementInternals.setValidity(n,r,s):typeof r=="string"&&this.proxy.setCustomValidity(r)}formDisabledCallback(n){this.disabled=n}formResetCallback(){this.value=this.initialValue,this.dirtyValue=!1}attachProxy(){var n;this.proxyInitialized||(this.proxyInitialized=!0,this.proxy.style.display="none",this.proxyEventsToBlock.forEach(r=>this.proxy.addEventListener(r,this.stopPropagation)),this.proxy.disabled=this.disabled,this.proxy.required=this.required,typeof this.name=="string"&&(this.proxy.name=this.name),typeof this.value=="string"&&(this.proxy.value=this.value),this.proxy.setAttribute("slot",BT),this.proxySlot=document.createElement("slot"),this.proxySlot.setAttribute("name",BT)),(n=this.shadowRoot)===null||n===void 0||n.appendChild(this.proxySlot),this.appendChild(this.proxy)}detachProxy(){var n;this.removeChild(this.proxy),(n=this.shadowRoot)===null||n===void 0||n.removeChild(this.proxySlot)}validate(n){this.proxy instanceof HTMLElement&&this.setValidity(this.proxy.validity,this.proxy.validationMessage,n)}setFormValue(n,r){this.elementInternals&&this.elementInternals.setFormValue(n,r||n)}_keypressHandler(n){switch(n.key){case J6:if(this.form instanceof HTMLFormElement){const r=this.form.querySelector("[type=submit]");r==null||r.click()}break}}stopPropagation(n){n.stopPropagation()}};return _e({mode:"boolean"})(t.prototype,"disabled"),_e({mode:"fromView",attribute:"value"})(t.prototype,"initialValue"),_e({attribute:"current-value"})(t.prototype,"currentValue"),_e(t.prototype,"name"),_e({mode:"boolean"})(t.prototype,"required"),qu(t.prototype,"value"),t}class Y6 extends ha{}class X6 extends Q6(Y6){constructor(){super(...arguments),this.proxy=document.createElement("input")}}let us=class extends X6{constructor(){super(...arguments),this.handleClick=t=>{var n;this.disabled&&((n=this.defaultSlottedContent)===null||n===void 0?void 0:n.length)<=1&&t.stopPropagation()},this.handleSubmission=()=>{if(!this.form)return;const t=this.proxy.isConnected;t||this.attachProxy(),typeof this.form.requestSubmit=="function"?this.form.requestSubmit(this.proxy):this.proxy.click(),t||this.detachProxy()},this.handleFormReset=()=>{var t;(t=this.form)===null||t===void 0||t.reset()},this.handleUnsupportedDelegatesFocus=()=>{var t;window.ShadowRoot&&!window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus")&&(!((t=this.$fastController.definition.shadowOptions)===null||t===void 0)&&t.delegatesFocus)&&(this.focus=()=>{this.control.focus()})}}formactionChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formAction=this.formaction)}formenctypeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formEnctype=this.formenctype)}formmethodChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formMethod=this.formmethod)}formnovalidateChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formNoValidate=this.formnovalidate)}formtargetChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formTarget=this.formtarget)}typeChanged(t,n){this.proxy instanceof HTMLInputElement&&(this.proxy.type=this.type),n==="submit"&&this.addEventListener("click",this.handleSubmission),t==="submit"&&this.removeEventListener("click",this.handleSubmission),n==="reset"&&this.addEventListener("click",this.handleFormReset),t==="reset"&&this.removeEventListener("click",this.handleFormReset)}validate(){super.validate(this.control)}connectedCallback(){var t;super.connectedCallback(),this.proxy.setAttribute("type",this.type),this.handleUnsupportedDelegatesFocus();const n=Array.from((t=this.control)===null||t===void 0?void 0:t.children);n&&n.forEach(r=>{r.addEventListener("click",this.handleClick)})}disconnectedCallback(){var t;super.disconnectedCallback();const n=Array.from((t=this.control)===null||t===void 0?void 0:t.children);n&&n.forEach(r=>{r.removeEventListener("click",this.handleClick)})}};we([_e({mode:"boolean"})],us.prototype,"autofocus",void 0);we([_e({attribute:"form"})],us.prototype,"formId",void 0);we([_e],us.prototype,"formaction",void 0);we([_e],us.prototype,"formenctype",void 0);we([_e],us.prototype,"formmethod",void 0);we([_e({mode:"boolean"})],us.prototype,"formnovalidate",void 0);we([_e],us.prototype,"formtarget",void 0);we([_e],us.prototype,"type",void 0);we([qu],us.prototype,"defaultSlottedContent",void 0);class Py{}we([_e({attribute:"aria-expanded"})],Py.prototype,"ariaExpanded",void 0);we([_e({attribute:"aria-pressed"})],Py.prototype,"ariaPressed",void 0);c2(Py,wt);c2(us,I6,Py);function c0(e){const t=e.parentElement;if(t)return t;{const n=e.getRootNode();if(n.host instanceof HTMLElement)return n.host}return null}function Z6(e,t){let n=t;for(;n!==null;){if(n===e)return!0;n=c0(n)}return!1}const Ks=document.createElement("div");function eK(e){return e instanceof Iy}class w${setProperty(t,n){Re.queueUpdate(()=>this.target.setProperty(t,n))}removeProperty(t){Re.queueUpdate(()=>this.target.removeProperty(t))}}class tK extends w${constructor(t){super();const n=new CSSStyleSheet;n[YM]=!0,this.target=n.cssRules[n.insertRule(":host{}")].style,t.$fastController.addStyles(Dn.create([n]))}}class nK extends w${constructor(){super();const t=new CSSStyleSheet;this.target=t.cssRules[t.insertRule(":root{}")].style,document.adoptedStyleSheets=[...document.adoptedStyleSheets,t]}}class rK extends w${constructor(){super(),this.style=document.createElement("style"),document.head.appendChild(this.style);const{sheet:t}=this.style;if(t){const n=t.insertRule(":root{}",t.cssRules.length);this.target=t.cssRules[n].style}}}class u2{constructor(t){this.store=new Map,this.target=null;const n=t.$fastController;this.style=document.createElement("style"),n.addStyles(this.style),_t.getNotifier(n).subscribe(this,"isConnected"),this.handleChange(n,"isConnected")}targetChanged(){if(this.target!==null)for(const[t,n]of this.store.entries())this.target.setProperty(t,n)}setProperty(t,n){this.store.set(t,n),Re.queueUpdate(()=>{this.target!==null&&this.target.setProperty(t,n)})}removeProperty(t){this.store.delete(t),Re.queueUpdate(()=>{this.target!==null&&this.target.removeProperty(t)})}handleChange(t,n){const{sheet:r}=this.style;if(r){const s=r.insertRule(":host{}",r.cssRules.length);this.target=r.cssRules[s].style}else this.target=null}}we([qu],u2.prototype,"target",void 0);class sK{constructor(t){this.target=t.style}setProperty(t,n){Re.queueUpdate(()=>this.target.setProperty(t,n))}removeProperty(t){Re.queueUpdate(()=>this.target.removeProperty(t))}}class Lt{setProperty(t,n){Lt.properties[t]=n;for(const r of Lt.roots.values())Sc.getOrCreate(Lt.normalizeRoot(r)).setProperty(t,n)}removeProperty(t){delete Lt.properties[t];for(const n of Lt.roots.values())Sc.getOrCreate(Lt.normalizeRoot(n)).removeProperty(t)}static registerRoot(t){const{roots:n}=Lt;if(!n.has(t)){n.add(t);const r=Sc.getOrCreate(this.normalizeRoot(t));for(const s in Lt.properties)r.setProperty(s,Lt.properties[s])}}static unregisterRoot(t){const{roots:n}=Lt;if(n.has(t)){n.delete(t);const r=Sc.getOrCreate(Lt.normalizeRoot(t));for(const s in Lt.properties)r.removeProperty(s)}}static normalizeRoot(t){return t===Ks?document:t}}Lt.roots=new Set;Lt.properties={};const tv=new WeakMap,iK=Re.supportsAdoptedStyleSheets?tK:u2,Sc=Object.freeze({getOrCreate(e){if(tv.has(e))return tv.get(e);let t;return e===Ks?t=new Lt:e instanceof Document?t=Re.supportsAdoptedStyleSheets?new nK:new rK:eK(e)?t=new iK(e):t=new sK(e),tv.set(e,t),t}});class _n extends n2{constructor(t){super(),this.subscribers=new WeakMap,this._appliedTo=new Set,this.name=t.name,t.cssCustomPropertyName!==null&&(this.cssCustomProperty=`--${t.cssCustomPropertyName}`,this.cssVar=`var(${this.cssCustomProperty})`),this.id=_n.uniqueId(),_n.tokensById.set(this.id,this)}get appliedTo(){return[...this._appliedTo]}static from(t){return new _n({name:typeof t=="string"?t:t.name,cssCustomPropertyName:typeof t=="string"?t:t.cssCustomPropertyName===void 0?t.name:t.cssCustomPropertyName})}static isCSSDesignToken(t){return typeof t.cssCustomProperty=="string"}static isDerivedDesignTokenValue(t){return typeof t=="function"}static getTokenById(t){return _n.tokensById.get(t)}getOrCreateSubscriberSet(t=this){return this.subscribers.get(t)||this.subscribers.set(t,new Set)&&this.subscribers.get(t)}createCSS(){return this.cssVar||""}getValueFor(t){const n=ut.getOrCreate(t).get(this);if(n!==void 0)return n;throw new Error(`Value could not be retrieved for token named "${this.name}". Ensure the value is set for ${t} or an ancestor of ${t}.`)}setValueFor(t,n){return this._appliedTo.add(t),n instanceof _n&&(n=this.alias(n)),ut.getOrCreate(t).set(this,n),this}deleteValueFor(t){return this._appliedTo.delete(t),ut.existsFor(t)&&ut.getOrCreate(t).delete(this),this}withDefault(t){return this.setValueFor(Ks,t),this}subscribe(t,n){const r=this.getOrCreateSubscriberSet(n);n&&!ut.existsFor(n)&&ut.getOrCreate(n),r.has(t)||r.add(t)}unsubscribe(t,n){const r=this.subscribers.get(n||this);r&&r.has(t)&&r.delete(t)}notify(t){const n=Object.freeze({token:this,target:t});this.subscribers.has(this)&&this.subscribers.get(this).forEach(r=>r.handleChange(n)),this.subscribers.has(t)&&this.subscribers.get(t).forEach(r=>r.handleChange(n))}alias(t){return n=>t.getValueFor(n)}}_n.uniqueId=(()=>{let e=0;return()=>(e++,e.toString(16))})();_n.tokensById=new Map;class oK{startReflection(t,n){t.subscribe(this,n),this.handleChange({token:t,target:n})}stopReflection(t,n){t.unsubscribe(this,n),this.remove(t,n)}handleChange(t){const{token:n,target:r}=t;this.add(n,r)}add(t,n){Sc.getOrCreate(n).setProperty(t.cssCustomProperty,this.resolveCSSValue(ut.getOrCreate(n).get(t)))}remove(t,n){Sc.getOrCreate(n).removeProperty(t.cssCustomProperty)}resolveCSSValue(t){return t&&typeof t.createCSS=="function"?t.createCSS():t}}class aK{constructor(t,n,r){this.source=t,this.token=n,this.node=r,this.dependencies=new Set,this.observer=_t.binding(t,this,!1),this.observer.handleChange=this.observer.call,this.handleChange()}disconnect(){this.observer.disconnect()}handleChange(){try{this.node.store.set(this.token,this.observer.observe(this.node.target,bf))}catch(t){console.error(t)}}}class cK{constructor(){this.values=new Map}set(t,n){this.values.get(t)!==n&&(this.values.set(t,n),_t.getNotifier(this).notify(t.id))}get(t){return _t.track(this,t.id),this.values.get(t)}delete(t){this.values.delete(t),_t.getNotifier(this).notify(t.id)}all(){return this.values.entries()}}const Pl=new WeakMap,Fl=new WeakMap;class ut{constructor(t){this.target=t,this.store=new cK,this.children=[],this.assignedValues=new Map,this.reflecting=new Set,this.bindingObservers=new Map,this.tokenValueChangeHandler={handleChange:(n,r)=>{const s=_n.getTokenById(r);s&&(s.notify(this.target),this.updateCSSTokenReflection(n,s))}},Pl.set(t,this),_t.getNotifier(this.store).subscribe(this.tokenValueChangeHandler),t instanceof Iy?t.$fastController.addBehaviors([this]):t.isConnected&&this.bind()}static getOrCreate(t){return Pl.get(t)||new ut(t)}static existsFor(t){return Pl.has(t)}static findParent(t){if(Ks!==t.target){let n=c0(t.target);for(;n!==null;){if(Pl.has(n))return Pl.get(n);n=c0(n)}return ut.getOrCreate(Ks)}return null}static findClosestAssignedNode(t,n){let r=n;do{if(r.has(t))return r;r=r.parent?r.parent:r.target!==Ks?ut.getOrCreate(Ks):null}while(r!==null);return null}get parent(){return Fl.get(this)||null}updateCSSTokenReflection(t,n){if(_n.isCSSDesignToken(n)){const r=this.parent,s=this.isReflecting(n);if(r){const i=r.get(n),o=t.get(n);i!==o&&!s?this.reflectToCSS(n):i===o&&s&&this.stopReflectToCSS(n)}else s||this.reflectToCSS(n)}}has(t){return this.assignedValues.has(t)}get(t){const n=this.store.get(t);if(n!==void 0)return n;const r=this.getRaw(t);if(r!==void 0)return this.hydrate(t,r),this.get(t)}getRaw(t){var n;return this.assignedValues.has(t)?this.assignedValues.get(t):(n=ut.findClosestAssignedNode(t,this))===null||n===void 0?void 0:n.getRaw(t)}set(t,n){_n.isDerivedDesignTokenValue(this.assignedValues.get(t))&&this.tearDownBindingObserver(t),this.assignedValues.set(t,n),_n.isDerivedDesignTokenValue(n)?this.setupBindingObserver(t,n):this.store.set(t,n)}delete(t){this.assignedValues.delete(t),this.tearDownBindingObserver(t);const n=this.getRaw(t);n?this.hydrate(t,n):this.store.delete(t)}bind(){const t=ut.findParent(this);t&&t.appendChild(this);for(const n of this.assignedValues.keys())n.notify(this.target)}unbind(){this.parent&&Fl.get(this).removeChild(this);for(const t of this.bindingObservers.keys())this.tearDownBindingObserver(t)}appendChild(t){t.parent&&Fl.get(t).removeChild(t);const n=this.children.filter(r=>t.contains(r));Fl.set(t,this),this.children.push(t),n.forEach(r=>t.appendChild(r)),_t.getNotifier(this.store).subscribe(t);for(const[r,s]of this.store.all())t.hydrate(r,this.bindingObservers.has(r)?this.getRaw(r):s),t.updateCSSTokenReflection(t.store,r)}removeChild(t){const n=this.children.indexOf(t);if(n!==-1&&this.children.splice(n,1),_t.getNotifier(this.store).unsubscribe(t),t.parent!==this)return!1;const r=Fl.delete(t);for(const[s]of this.store.all())t.hydrate(s,t.getRaw(s)),t.updateCSSTokenReflection(t.store,s);return r}contains(t){return Z6(this.target,t.target)}reflectToCSS(t){this.isReflecting(t)||(this.reflecting.add(t),ut.cssCustomPropertyReflector.startReflection(t,this.target))}stopReflectToCSS(t){this.isReflecting(t)&&(this.reflecting.delete(t),ut.cssCustomPropertyReflector.stopReflection(t,this.target))}isReflecting(t){return this.reflecting.has(t)}handleChange(t,n){const r=_n.getTokenById(n);r&&(this.hydrate(r,this.getRaw(r)),this.updateCSSTokenReflection(this.store,r))}hydrate(t,n){if(!this.has(t)){const r=this.bindingObservers.get(t);_n.isDerivedDesignTokenValue(n)?r?r.source!==n&&(this.tearDownBindingObserver(t),this.setupBindingObserver(t,n)):this.setupBindingObserver(t,n):(r&&this.tearDownBindingObserver(t),this.store.set(t,n))}}setupBindingObserver(t,n){const r=new aK(n,t,this);return this.bindingObservers.set(t,r),r}tearDownBindingObserver(t){return this.bindingObservers.has(t)?(this.bindingObservers.get(t).disconnect(),this.bindingObservers.delete(t),!0):!1}}ut.cssCustomPropertyReflector=new oK;we([qu],ut.prototype,"children",void 0);function uK(e){return _n.from(e)}const l2=Object.freeze({create:uK,notifyConnection(e){return!e.isConnected||!ut.existsFor(e)?!1:(ut.getOrCreate(e).bind(),!0)},notifyDisconnection(e){return e.isConnected||!ut.existsFor(e)?!1:(ut.getOrCreate(e).unbind(),!0)},registerRoot(e=Ks){Lt.registerRoot(e)},unregisterRoot(e=Ks){Lt.unregisterRoot(e)}}),nv=Object.freeze({definitionCallbackOnly:null,ignoreDuplicate:Symbol()}),rv=new Map,Xp=new Map;let Ic=null;const Nl=He.createInterface(e=>e.cachedCallback(t=>(Ic===null&&(Ic=new h2(null,t)),Ic))),f2=Object.freeze({tagFor(e){return Xp.get(e)},responsibleFor(e){const t=e.$$designSystem$$;return t||He.findResponsibleContainer(e).get(Nl)},getOrCreate(e){if(!e)return Ic===null&&(Ic=He.getOrCreateDOMContainer().get(Nl)),Ic;const t=e.$$designSystem$$;if(t)return t;const n=He.getOrCreateDOMContainer(e);if(n.has(Nl,!1))return n.get(Nl);{const r=new h2(e,n);return n.register(nh.instance(Nl,r)),r}}});function lK(e,t,n){return typeof e=="string"?{name:e,type:t,callback:n}:e}class h2{constructor(t,n){this.owner=t,this.container=n,this.designTokensInitialized=!1,this.prefix="fast",this.shadowRootMode=void 0,this.disambiguate=()=>nv.definitionCallbackOnly,t!==null&&(t.$$designSystem$$=this)}withPrefix(t){return this.prefix=t,this}withShadowRootMode(t){return this.shadowRootMode=t,this}withElementDisambiguation(t){return this.disambiguate=t,this}withDesignTokenRoot(t){return this.designTokenRoot=t,this}register(...t){const n=this.container,r=[],s=this.disambiguate,i=this.shadowRootMode,o={elementPrefix:this.prefix,tryDefineElement(a,c,l){const f=lK(a,c,l),{name:h,callback:d,baseClass:p}=f;let{type:_}=f,b=h,w=rv.get(b),m=!0;for(;w;){const g=s(b,_,w);switch(g){case nv.ignoreDuplicate:return;case nv.definitionCallbackOnly:m=!1,w=void 0;break;default:b=g,w=rv.get(b);break}}m&&((Xp.has(_)||_===ha)&&(_=class extends _{}),rv.set(b,_),Xp.set(_,b),p&&Xp.set(p,b)),r.push(new fK(n,b,_,i,d,m))}};this.designTokensInitialized||(this.designTokensInitialized=!0,this.designTokenRoot!==null&&l2.registerRoot(this.designTokenRoot)),n.registerWithContext(o,...t);for(const a of r)a.callback(a),a.willDefine&&a.definition!==null&&a.definition.define();return this}}class fK{constructor(t,n,r,s,i,o){this.container=t,this.name=n,this.type=r,this.shadowRootMode=s,this.callback=i,this.willDefine=o,this.definition=null}definePresentation(t){o2.define(this.name,t,this.container)}defineElement(t){this.definition=new Kh(this.type,Object.assign(Object.assign({},t),{name:this.name}))}tagFor(t){return f2.tagFor(t)}}const hK="not-allowed",dK=":host([hidden]){display:none}";function pK(e){return`${dK}:host{display:${e}}`}const Fy=W6()?"focus-visible":"focus",mK=new Set(["children","localName","ref","style","className"]),gK=Object.freeze(Object.create(null)),qT="_default",yp=new Map;function yK(e,t){typeof e=="function"?e(t):e.current=t}function d2(e,t){if(!t.name){const n=Kh.forType(e);if(n)t.name=n.name;else throw new Error("React wrappers must wrap a FASTElement or be configured with a name.")}return t.name}function u0(e){return e.events||(e.events={})}function KT(e,t,n){return mK.has(n)?(console.warn(`${d2(e,t)} contains property ${n} which is a React reserved property. It will be used by React and not set on the element.`),!1):!0}function SK(e,t){if(!t.keys)if(t.properties)t.keys=new Set(t.properties.concat(Object.keys(u0(t))));else{const n=new Set(Object.keys(u0(t))),r=_t.getAccessors(e.prototype);if(r.length>0)for(const s of r)KT(e,t,s.name)&&n.add(s.name);else for(const s in e.prototype)!(s in HTMLElement.prototype)&&KT(e,t,s)&&n.add(s);t.keys=n}return t.keys}function _K(e,t){let n=[];const r={register(i,...o){n.forEach(a=>a.register(i,...o)),n=[]}};function s(i,o={}){var a,c;i instanceof a2&&(t?t.register(i):n.push(i),i=i.type);const l=yp.get(i);if(l){const d=l.get((a=o.name)!==null&&a!==void 0?a:qT);if(d)return d}class f extends e.Component{constructor(){super(...arguments),this._element=null}_updateElement(p){const _=this._element;if(_===null)return;const b=this.props,w=p||gK,m=u0(o);for(const g in this._elementProps){const y=b[g],$=m[g];if($===void 0)_[g]=y;else{const T=w[g];if(y===T)continue;T!==void 0&&_.removeEventListener($,T),y!==void 0&&_.addEventListener($,y)}}}componentDidMount(){this._updateElement()}componentDidUpdate(p){this._updateElement(p)}render(){const p=this.props.__forwardedRef;(this._ref===void 0||this._userRef!==p)&&(this._ref=g=>{this._element===null&&(this._element=g),p!==null&&yK(p,g),this._userRef=p});const _={ref:this._ref},b=this._elementProps={},w=SK(i,o),m=this.props;for(const g in m){const y=m[g];w.has(g)?b[g]=y:_[g==="className"?"class":g]=y}return e.createElement(d2(i,o),_)}}const h=e.forwardRef((d,p)=>e.createElement(f,Object.assign(Object.assign({},d),{__forwardedRef:p}),d==null?void 0:d.children));return yp.has(i)||yp.set(i,new Map),yp.get(i).set((c=o.name)!==null&&c!==void 0?c:qT,h),h}return{wrap:s,registry:r}}function vK(e){return f2.getOrCreate(e).withPrefix("vscode")}function bK(e){window.addEventListener("load",()=>{new MutationObserver(()=>{HT(e)}).observe(document.body,{attributes:!0,attributeFilter:["class"]}),HT(e)})}function HT(e){const t=getComputedStyle(document.body),n=document.querySelector("body");if(n){const r=n.getAttribute("data-vscode-theme-kind");for(const[s,i]of e){let o=t.getPropertyValue(s).toString();if(r==="vscode-high-contrast")o.length===0&&i.name.includes("background")&&(o="transparent"),i.name==="button-icon-hover-background"&&(o="transparent");else if(r==="vscode-high-contrast-light"){if(o.length===0&&i.name.includes("background"))switch(i.name){case"button-primary-hover-background":o="#0F4A85";break;case"button-secondary-hover-background":o="transparent";break;case"button-icon-hover-background":o="transparent";break}}else i.name==="contrast-active-border"&&(o="transparent");i.setValueFor(n,o)}}}const WT=new Map;let JT=!1;function j(e,t){const n=l2.create(e);if(t){if(t.includes("--fake-vscode-token")){const r="id"+Math.random().toString(16).slice(2);t=`${t}-${r}`}WT.set(t,n)}return JT||(bK(WT),JT=!0),n}const Yve=j("background","--vscode-editor-background").withDefault("#1e1e1e"),Gi=j("border-width").withDefault(1),wK=j("contrast-active-border","--vscode-contrastActiveBorder").withDefault("#f38518");j("contrast-border","--vscode-contrastBorder").withDefault("#6fc3df");const Xve=j("corner-radius").withDefault(0),$K=j("corner-radius-round").withDefault(2),GT=j("design-unit").withDefault(4),kK=j("disabled-opacity").withDefault(.4),Ny=j("focus-border","--vscode-focusBorder").withDefault("#007fd4"),EK=j("font-family","--vscode-font-family").withDefault("-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol");j("font-weight","--vscode-font-weight").withDefault("400");const OK=j("foreground","--vscode-foreground").withDefault("#cccccc"),Zve=j("input-height").withDefault("26"),e1e=j("input-min-width").withDefault("100px"),TK=j("type-ramp-base-font-size","--vscode-font-size").withDefault("13px"),CK=j("type-ramp-base-line-height").withDefault("normal"),t1e=j("type-ramp-minus1-font-size").withDefault("11px"),n1e=j("type-ramp-minus1-line-height").withDefault("16px");j("type-ramp-minus2-font-size").withDefault("9px");j("type-ramp-minus2-line-height").withDefault("16px");j("type-ramp-plus1-font-size").withDefault("16px");j("type-ramp-plus1-line-height").withDefault("24px");const r1e=j("scrollbarWidth").withDefault("10px"),s1e=j("scrollbarHeight").withDefault("10px"),i1e=j("scrollbar-slider-background","--vscode-scrollbarSlider-background").withDefault("#79797966"),o1e=j("scrollbar-slider-hover-background","--vscode-scrollbarSlider-hoverBackground").withDefault("#646464b3"),a1e=j("scrollbar-slider-active-background","--vscode-scrollbarSlider-activeBackground").withDefault("#bfbfbf66"),c1e=j("badge-background","--vscode-badge-background").withDefault("#4d4d4d"),u1e=j("badge-foreground","--vscode-badge-foreground").withDefault("#ffffff"),RK=j("button-border","--vscode-button-border").withDefault("transparent"),QT=j("button-icon-background").withDefault("transparent"),IK=j("button-icon-corner-radius").withDefault("5px"),PK=j("button-icon-outline-offset").withDefault(0),YT=j("button-icon-hover-background","--fake-vscode-token").withDefault("rgba(90, 93, 94, 0.31)"),FK=j("button-icon-padding").withDefault("3px"),Pc=j("button-primary-background","--vscode-button-background").withDefault("#0e639c"),p2=j("button-primary-foreground","--vscode-button-foreground").withDefault("#ffffff"),m2=j("button-primary-hover-background","--vscode-button-hoverBackground").withDefault("#1177bb"),sv=j("button-secondary-background","--vscode-button-secondaryBackground").withDefault("#3a3d41"),NK=j("button-secondary-foreground","--vscode-button-secondaryForeground").withDefault("#ffffff"),xK=j("button-secondary-hover-background","--vscode-button-secondaryHoverBackground").withDefault("#45494e"),MK=j("button-padding-horizontal").withDefault("11px"),AK=j("button-padding-vertical").withDefault("4px"),l1e=j("checkbox-background","--vscode-checkbox-background").withDefault("#3c3c3c"),f1e=j("checkbox-border","--vscode-checkbox-border").withDefault("#3c3c3c"),h1e=j("checkbox-corner-radius").withDefault(3);j("checkbox-foreground","--vscode-checkbox-foreground").withDefault("#f0f0f0");const d1e=j("list-active-selection-background","--vscode-list-activeSelectionBackground").withDefault("#094771"),p1e=j("list-active-selection-foreground","--vscode-list-activeSelectionForeground").withDefault("#ffffff"),m1e=j("list-hover-background","--vscode-list-hoverBackground").withDefault("#2a2d2e"),g1e=j("divider-background","--vscode-settings-dropdownListBorder").withDefault("#454545"),y1e=j("dropdown-background","--vscode-dropdown-background").withDefault("#3c3c3c"),S1e=j("dropdown-border","--vscode-dropdown-border").withDefault("#3c3c3c");j("dropdown-foreground","--vscode-dropdown-foreground").withDefault("#f0f0f0");const _1e=j("dropdown-list-max-height").withDefault("200px"),v1e=j("input-background","--vscode-input-background").withDefault("#3c3c3c"),b1e=j("input-foreground","--vscode-input-foreground").withDefault("#cccccc");j("input-placeholder-foreground","--vscode-input-placeholderForeground").withDefault("#cccccc");const w1e=j("link-active-foreground","--vscode-textLink-activeForeground").withDefault("#3794ff"),$1e=j("link-foreground","--vscode-textLink-foreground").withDefault("#3794ff"),k1e=j("progress-background","--vscode-progressBar-background").withDefault("#0e70c0"),E1e=j("panel-tab-active-border","--vscode-panelTitle-activeBorder").withDefault("#e7e7e7"),O1e=j("panel-tab-active-foreground","--vscode-panelTitle-activeForeground").withDefault("#e7e7e7"),T1e=j("panel-tab-foreground","--vscode-panelTitle-inactiveForeground").withDefault("#e7e7e799");j("panel-view-background","--vscode-panel-background").withDefault("#1e1e1e");j("panel-view-border","--vscode-panel-border").withDefault("#80808059");const C1e=j("tag-corner-radius").withDefault("2px");function LK(e,t,n,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i}const DK=Hh`
	${pK("inline-flex")} :host {
		outline: none;
		font-family: ${EK};
		font-size: ${TK};
		line-height: ${CK};
		color: ${p2};
		background: ${Pc};
		border-radius: calc(${$K} * 1px);
		fill: currentColor;
		cursor: pointer;
	}
	.control {
		background: transparent;
		height: inherit;
		flex-grow: 1;
		box-sizing: border-box;
		display: inline-flex;
		justify-content: center;
		align-items: center;
		padding: ${AK} ${MK};
		white-space: wrap;
		outline: none;
		text-decoration: none;
		border: calc(${Gi} * 1px) solid ${RK};
		color: inherit;
		border-radius: inherit;
		fill: inherit;
		cursor: inherit;
		font-family: inherit;
	}
	:host(:hover) {
		background: ${m2};
	}
	:host(:active) {
		background: ${Pc};
	}
	.control:${Fy} {
		outline: calc(${Gi} * 1px) solid ${Ny};
		outline-offset: calc(${Gi} * 2px);
	}
	.control::-moz-focus-inner {
		border: 0;
	}
	:host([disabled]) {
		opacity: ${kK};
		background: ${Pc};
		cursor: ${hK};
	}
	.content {
		display: flex;
	}
	.start {
		display: flex;
	}
	::slotted(svg),
	::slotted(span) {
		width: calc(${GT} * 4px);
		height: calc(${GT} * 4px);
	}
	.start {
		margin-inline-end: 8px;
	}
`,jK=Hh`
	:host([appearance='primary']) {
		background: ${Pc};
		color: ${p2};
	}
	:host([appearance='primary']:hover) {
		background: ${m2};
	}
	:host([appearance='primary']:active) .control:active {
		background: ${Pc};
	}
	:host([appearance='primary']) .control:${Fy} {
		outline: calc(${Gi} * 1px) solid ${Ny};
		outline-offset: calc(${Gi} * 2px);
	}
	:host([appearance='primary'][disabled]) {
		background: ${Pc};
	}
`,BK=Hh`
	:host([appearance='secondary']) {
		background: ${sv};
		color: ${NK};
	}
	:host([appearance='secondary']:hover) {
		background: ${xK};
	}
	:host([appearance='secondary']:active) .control:active {
		background: ${sv};
	}
	:host([appearance='secondary']) .control:${Fy} {
		outline: calc(${Gi} * 1px) solid ${Ny};
		outline-offset: calc(${Gi} * 2px);
	}
	:host([appearance='secondary'][disabled]) {
		background: ${sv};
	}
`,zK=Hh`
	:host([appearance='icon']) {
		background: ${QT};
		border-radius: ${IK};
		color: ${OK};
	}
	:host([appearance='icon']:hover) {
		background: ${YT};
		outline: 1px dotted ${wK};
		outline-offset: -1px;
	}
	:host([appearance='icon']) .control {
		padding: ${FK};
		border: none;
	}
	:host([appearance='icon']:active) .control:active {
		background: ${YT};
	}
	:host([appearance='icon']) .control:${Fy} {
		outline: calc(${Gi} * 1px) solid ${Ny};
		outline-offset: ${PK};
	}
	:host([appearance='icon'][disabled]) {
		background: ${QT};
	}
`,UK=(e,t)=>Hh`
	${DK}
	${jK}
	${BK}
	${zK}
`;class g2 extends us{connectedCallback(){if(super.connectedCallback(),!this.appearance){const t=this.getAttribute("appearance");this.appearance=t}}attributeChangedCallback(t,n,r){t==="appearance"&&r==="icon"&&(this.getAttribute("aria-label")||(this.ariaLabel="Icon Button")),t==="aria-label"&&(this.ariaLabel=r),t==="disabled"&&(this.disabled=r!==null)}}LK([_e],g2.prototype,"appearance",void 0);const VK=g2.compose({baseName:"button",template:G6,styles:UK,shadowOptions:{delegatesFocus:!0}}),{wrap:qK}=_K(KV,vK()),KK=qK(VK(),{name:"vscode-button"}),HK=e=>typeof e=="function",S=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):n=>t(n,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(n,r){return arguments.length>=2?t(n,r):function(s){return t(s,n)}};case 3:return function(n,r,s){return arguments.length>=3?t(n,r,s):function(i){return t(i,n,r)}};case 4:return function(n,r,s,i){return arguments.length>=4?t(n,r,s,i):function(o){return t(o,n,r,s)}};case 5:return function(n,r,s,i,o){return arguments.length>=5?t(n,r,s,i,o):function(a){return t(a,n,r,s,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(r){return t(r,...n)}}}},de=e=>e,xy=e=>()=>e,XT=xy(!0),l0=xy(!1),y2=xy(void 0),f0=y2;function v(e,t,n,r,s,i,o,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return s(r(n(t(e))));case 6:return i(s(r(n(t(e)))));case 7:return o(i(s(r(n(t(e))))));case 8:return a(o(i(s(r(n(t(e)))))));case 9:return c(a(o(i(s(r(n(t(e))))))));default:{let l=arguments[0];for(let f=1;f<arguments.length;f++)l=arguments[f](l);return l}}}let WK="3.10.14";const ig=()=>WK,h0=Symbol.for(`effect/GlobalValue/globalStoreId/${ig()}`);h0 in globalThis||(globalThis[h0]=new Map);const iv=globalThis[h0],ge=(e,t)=>(iv.has(e)||iv.set(e,t()),iv.get(e)),Pr=e=>typeof e=="string",bs=e=>typeof e=="number",rh=e=>typeof e=="boolean",My=e=>typeof e=="bigint",d0=e=>typeof e=="symbol",Wh=HK,JK=e=>e===void 0,GK=e=>!1,$$=e=>typeof e=="object"&&e!==null,So=e=>$$(e)||Wh(e),G=S(2,(e,t)=>So(e)&&t in e),S2=S(2,(e,t)=>G(e,"_tag")&&e._tag===t),Va=e=>e==null,QK=e=>e!=null,YK=e=>e instanceof Date,_2=e=>G(e,Symbol.iterator),XK=e=>$$(e)&&!Array.isArray(e),v2=e=>G(e,"then")&&Wh(e.then),Ay=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;let ZK=class b2{constructor(t){u(this,"self");u(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new b2(this.self)}};const e8=335903614,t8=4150755663,n8=1481765933,r8=1284865837,s8=9007199254740992,i8=134217728;let o8=class{constructor(t,n,r,s){u(this,"_state");return Va(n)&&Va(t)?(n=Math.random()*4294967295>>>0,t=0):Va(n)&&(n=t,t=0),Va(s)&&Va(r)?(s=this._state?this._state[3]:t8,r=this._state?this._state[2]:e8):Va(s)&&(s=r,r=0),this._state=new Int32Array([0,0,r>>>0,((s||0)|1)>>>0]),this._next(),ZT(this._state,this._state[0],this._state[1],t>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}number(){const t=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(t*i8+n)/s8}_next(){const t=this._state[0]>>>0,n=this._state[1]>>>0;a8(this._state,t,n,n8,r8),ZT(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=t>>>18,s=(n>>>18|t<<14)>>>0;r=(r^t)>>>0,s=(s^n)>>>0;const i=(s>>>27|r<<5)>>>0,o=t>>>27,a=(-o>>>0&31)>>>0;return(i>>>o|i<<a)>>>0}};function a8(e,t,n,r,s){let i=(n>>>16)*(s&65535)>>>0,o=(n&65535)*(s>>>16)>>>0,a=(n&65535)*(s&65535)>>>0,c=(n>>>16)*(s>>>16)+((o>>>16)+(i>>>16))>>>0;o=o<<16>>>0,a=a+o>>>0,a>>>0<o>>>0&&(c=c+1>>>0),i=i<<16>>>0,a=a+i>>>0,a>>>0<i>>>0&&(c=c+1>>>0),c=c+Math.imul(n,r)>>>0,c=c+Math.imul(t,s)>>>0,e[0]=c,e[1]=a}function ZT(e,t,n,r,s){let i=t+r>>>0;const o=n+s>>>0;o>>>0<n>>>0&&(i=i+1|0),e[0]=i,e[1]=o}const p0=Symbol.for("effect/Utils/YieldWrap");var Lh,EP;let Jh=(EP=class{constructor(t){Qd(this,Lh);vl(this,Lh,t)}[p0](){return _l(this,Lh)}},Lh=new WeakMap,EP);function c8(e){if(typeof e=="object"&&e!==null&&p0 in e)return e[p0]();throw new Error(Ay("yieldWrapGet"))}const dr=ge("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),u8=e=>{const t={[e](n){return n()}};return function(n){return t[e](n)}},vn=u8("effect_internal_function"),ov=ge(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),ae=Symbol.for("effect/Hash"),W=e=>{if(dr.enabled===!0)return 0;switch(typeof e){case"number":return E$(e);case"bigint":return gt(e.toString(10));case"boolean":return gt(String(e));case"symbol":return gt(String(e));case"string":return gt(e);case"undefined":return gt("undefined");case"function":case"object":return e===null?gt("null"):e instanceof Date?W(e.toISOString()):l8(e)?e[ae]():k$(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},k$=e=>(ov.has(e)||ov.set(e,E$(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),ov.get(e)),Se=e=>t=>t*53^e,Ly=e=>e&3221225471|e>>>1&1073741824,l8=e=>G(e,ae),E$=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return Ly(t)},gt=e=>{let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return Ly(t)},f8=(e,t)=>{let n=12289;for(let r=0;r<t.length;r++)n^=v(gt(t[r]),Se(W(e[t[r]])));return Ly(n)},w2=e=>f8(e,Object.keys(e)),Gh=e=>{let t=6151;for(let n=0;n<e.length;n++)t=v(t,Se(W(e[n])));return Ly(t)},st=function(){if(arguments.length===1){const n=arguments[0];return function(r){return Object.defineProperty(n,ae,{value(){return r},enumerable:!1}),r}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,ae,{value(){return t},enumerable:!1}),t},ie=Symbol.for("effect/Equal");function Y(){return arguments.length===1?e=>og(e,arguments[0]):og(arguments[0],arguments[1])}function og(e,t){if(e===t)return!0;const n=typeof e;if(n!==typeof t)return!1;if(n==="object"||n==="function"){if(e!==null&&t!==null){if(ag(e)&&ag(t))return W(e)===W(t)&&e[ie](t)?!0:dr.enabled&&dr.tester?dr.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(dr.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((r,s)=>og(r,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const r=Object.keys(e),s=Object.keys(t);if(r.length===s.length){for(const i of r)if(!(i in t&&og(e[i],t[i])))return dr.tester?dr.tester(e,t):!1;return!0}}return dr.tester?dr.tester(e,t):!1}}return dr.enabled&&dr.tester?dr.tester(e,t):!1}const ag=e=>G(e,ie),O$=()=>Y,Me=Symbol.for("nodejs.util.inspect.custom"),Ye=e=>G(e,"toJSON")&&Wh(e.toJSON)&&e.toJSON.length===0?e.toJSON():Array.isArray(e)?e.map(Ye):d8(e),rt=e=>JSON.stringify(e,null,2),Xc=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?$2(e,t):String(e)}catch{return String(e)}},$2=(e,t)=>{let n=[];const r=JSON.stringify(e,(s,i)=>typeof i=="object"&&i!==null?n.includes(i)?void 0:n.push(i)&&(Qo.fiberRefs!==void 0&&k2(i)?i[T$](Qo.fiberRefs):i):i,t);return n=void 0,r},T$=Symbol.for("effect/Inspectable/Redactable"),k2=e=>typeof e=="object"&&e!==null&&T$ in e,Qo=ge("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),h8=(e,t)=>{const n=Qo.fiberRefs;Qo.fiberRefs=e;try{return t()}finally{Qo.fiberRefs=n}},d8=e=>k2(e)&&Qo.fiberRefs!==void 0?e[T$](Qo.fiberRefs):e,q=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let r=0,s=t.length;r<s;r++)n=t[r](n);return n}}},$f="Async",Dy="Commit",tn="Failure",Zp="OnFailure",cg="OnSuccess",ug="OnSuccessAndFailure",nn="Success",E2="Sync",p8="Tag",Ku="UpdateRuntimeFlags",lg="While",kf="Iterator",O2="WithRuntime",em="Yield",C$="RevertFlags",m8=Symbol.for("effect/Effect"),g8=Symbol.for("effect/Stream"),y8=Symbol.for("effect/Sink"),S8=Symbol.for("effect/Channel"),Zc={_R:e=>e,_E:e=>e,_A:e=>e,_V:ig()},_8={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},v8={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},Qh={[m8]:Zc,[g8]:Zc,[y8]:_8,[S8]:v8,[ie](e){return this===e},[ae](){return st(this,k$(this))},[Symbol.iterator](){return new ZK(new Jh(this))},pipe(){return q(this,arguments)}},jy={[ae](){return st(this,w2(this))},[ie](e){const t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(const r of t)if(!(r in e&&Y(this[r],e[r])))return!1;return!0}},Yh={...Qh,_op:Dy},b8={...Yh,...jy},w8=function(){function e(){}return e.prototype=Yh,e}(),T2=Symbol.for("effect/Option"),C2={...Qh,[T2]:{_A:e=>e},[Me](){return this.toJSON()},toString(){return rt(this.toJSON())}},$8=Object.assign(Object.create(C2),{_tag:"Some",_op:"Some",[ie](e){return R2(e)&&P2(e)&&Y(this.value,e.value)},[ae](){return st(this,Se(W(this._tag))(W(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:Ye(this.value)}}}),k8=W("None"),E8=Object.assign(Object.create(C2),{_tag:"None",_op:"None",[ie](e){return R2(e)&&I2(e)},[ae](){return k8},toJSON(){return{_id:"Option",_tag:this._tag}}}),R2=e=>G(e,T2),I2=e=>e._tag==="None",P2=e=>e._tag==="Some",F2=Object.create(E8),N2=e=>{const t=Object.create($8);return t.value=e,t},x2=Symbol.for("effect/Context/Tag"),O8="effect/STM",T8=Symbol.for(O8),M2={...Qh,_op:"Tag",[T8]:Zc,[x2]:{_Service:e=>e,_Identifier:e=>e},toString(){return rt(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[Me](){return this.toJSON()},of(e){return e},context(e){return D2(this,e)}},C8=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;const r=Object.create(M2);return Object.defineProperty(r,"stack",{get(){return n.stack}}),r.key=e,r},A2=Symbol.for("effect/Context"),R8={[A2]:{_Services:e=>e},[ie](e){if(L2(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!Y(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[ae](){return st(this,E$(this.unsafeMap.size))},pipe(){return q(this,arguments)},toString(){return rt(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(Ye)}},[Me](){return this.toJSON()}},eu=e=>{const t=Object.create(R8);return t.unsafeMap=e,t},I8=e=>{const t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){const n=e.stack.split(`
`);if(n.length>2){const r=n[2].match(/at (.*)/);r&&(t.message=t.message+` (defined at ${r[1]})`)}}if(t.stack){const n=t.stack.split(`
`);n.splice(1,3),t.stack=n.join(`
`)}return t},L2=e=>G(e,A2),P8=e=>G(e,x2),F8=eu(new Map),N8=()=>F8,D2=(e,t)=>eu(new Map([[e.key,t]])),x8=S(3,(e,t,n)=>{const r=new Map(e.unsafeMap);return r.set(t.key,n),eu(r)}),j2=S(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw I8(t);return e.unsafeMap.get(t.key)}),M8=j2,A8=S(2,(e,t)=>e.unsafeMap.has(t.key)?N2(e.unsafeMap.get(t.key)):F2),L8=S(2,(e,t)=>{const n=new Map(e.unsafeMap);for(const[r,s]of t.unsafeMap)n.set(r,s);return eu(n)}),La=C8,D8=L2,By=P8,zy=N8,Xh=D2,xl=x8,R$=M8,B2=j2,Zh=A8,ed=L8,I$=e=>(t,n)=>t===n||e(t,n),j8=S(2,(e,t)=>I$((n,r)=>e(t(n),t(r)))),B8=e=>I$((t,n)=>{if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}),P$=Symbol.for("effect/Either"),z2={...Qh,[P$]:{_R:e=>e},[Me](){return this.toJSON()},toString(){return rt(this.toJSON())}},z8=Object.assign(Object.create(z2),{_tag:"Right",_op:"Right",[ie](e){return U2(e)&&q2(e)&&Y(this.right,e.right)},[ae](){return Se(W(this._tag))(W(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:Ye(this.right)}}}),U8=Object.assign(Object.create(z2),{_tag:"Left",_op:"Left",[ie](e){return U2(e)&&V2(e)&&Y(this.left,e.left)},[ae](){return Se(W(this._tag))(W(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:Ye(this.left)}}}),U2=e=>G(e,P$),V2=e=>e._tag==="Left",q2=e=>e._tag==="Right",V8=e=>{const t=Object.create(U8);return t.left=e,t},q8=e=>{const t=Object.create(z8);return t.right=e,t},K8=P$,qe=q8,re=V8,fn=V2,Hs=q2,kr=S(2,(e,{onLeft:t,onRight:n})=>fn(e)?t(e.left):n(e.right)),H8=kr({onLeft:de,onRight:de}),W8=S(2,(e,t)=>{if(Hs(e))return e.right;throw t(e.left)}),K2=e=>e.length>0,H2=e=>(t,n)=>t===n?0:e(t,n),J8=H2((e,t)=>e<t?-1:1),W2=S(2,(e,t)=>H2((n,r)=>e(t(n),t(r)))),G8=e=>S(2,(t,n)=>e(t,n)===1),Q8=Symbol.for("effect/Option"),L=()=>F2,z=N2,nt=I2,Ie=P2,Ft=S(2,(e,{onNone:t,onSome:n})=>nt(e)?t():n(e.value)),Ke=S(2,(e,t)=>nt(e)?t():e.value),fg=S(2,(e,t)=>nt(e)?t():e),Y8=S(2,(e,t)=>nt(e)?z(t()):e),Uy=e=>e==null?L():z(e),Ds=Ke(y2),X8=e=>(...t)=>{try{return z(e(...t))}catch{return L()}},Z8=S(2,(e,t)=>{if(Ie(e))return e.value;throw t()}),J2=Z8(()=>new Error("getOrThrow called on a None")),tm=S(2,(e,t)=>nt(e)?L():z(t(e.value))),_o=S(2,(e,t)=>nt(e)?L():t(e.value)),eH=S(2,(e,t)=>nt(e)?L():t(e.value)),tH=e=>S(2,(t,n)=>nt(t)?!1:e(t.value,n)),nH=O$(),rH=tH(nH),sH=S(2,(e,t)=>nt(e)?!1:t(e.value)),iH=(...e)=>e,oH=e=>{const n=e[Symbol.iterator]().next();if(n.done)throw new Error("unsafeHead: empty iterable");return n.value},Vy=e=>new Array(e),aH=(e,t)=>{const n=Math.max(1,Math.floor(e)),r=new Array(n);for(let s=0;s<n;s++)r[s]=t(s);return r},Fe=e=>Array.isArray(e)?e:Array.from(e),cH=e=>Array.isArray(e)?e:[e],uH=S(2,(e,{onEmpty:t,onNonEmpty:n})=>Nt(e)?n(jn(e),da(e)):t()),hg=S(2,(e,t)=>[t,...e]),lH=S(2,(e,t)=>[...e,t]),G2=S(2,(e,t)=>Fe(e).concat(Fe(t))),m0=Array.isArray,fH=e=>e.length===0,hH=fH,nm=K2,Nt=K2,Q2=(e,t)=>e<0||e>=t.length,dH=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),pH=S(2,(e,t)=>{const n=Math.floor(t);return Q2(n,e)?L():z(e[n])}),Y2=S(2,(e,t)=>{const n=Math.floor(t);if(Q2(n,e))throw new Error(`Index ${n} out of bounds`);return e[n]}),Ef=pH(0),jn=Y2(0),mH=e=>Nt(e)?z(X2(e)):L(),X2=e=>e[e.length-1],da=e=>e.slice(1),gH=(e,t)=>{let n=0;for(const r of e){if(!t(r,n))break;n++}return n},yH=S(2,(e,t)=>Z2(e,gH(e,t))),SH=S(2,(e,t)=>{const n=Fe(e);return n.slice(dH(t,n),n.length)}),eC=e=>Array.from(e).reverse(),sh=S(2,(e,t)=>{const n=Array.from(e);return n.sort(t),n}),tC=S(2,(e,t)=>_H(e,t,iH)),_H=S(3,(e,t,n)=>{const r=Fe(e),s=Fe(t);if(Nt(r)&&Nt(s)){const i=[n(jn(r),jn(s))],o=Math.min(r.length,s.length);for(let a=1;a<o;a++)i[a]=n(r[a],s[a]);return i}return[]}),vH=O$(),Z2=S(2,(e,t)=>{const n=Array.from(e),r=Math.floor(t);return Nt(n)?r>=1?bH(n,r):[[],n]:[n,[]]}),bH=S(2,(e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[Xl(e),[]]:[hg(e.slice(1,n),jn(e)),e.slice(n)]}),Xl=e=>e.slice(),wH=S(3,(e,t,n)=>{const r=Fe(e),s=Fe(t);return Nt(r)?Nt(s)?eA(n)(G2(r,s)):r:s}),rm=S(2,(e,t)=>wH(e,t,vH)),pa=()=>[],Ur=e=>[e],Yo=S(2,(e,t)=>e.map(t)),dg=S(2,(e,t)=>{if(hH(e))return[];const n=[];for(let r=0;r<e.length;r++){const s=t(e[r],r);for(let i=0;i<s.length;i++)n.push(s[i])}return n}),$H=dg(de),kH=S(2,(e,t)=>{const n=Fe(e),r=[];for(let s=0;s<n.length;s++)t(n[s],s)&&r.push(n[s]);return r}),F$=S(3,(e,t,n)=>Fe(e).reduce((r,s,i)=>n(r,s,i),t)),nC=(e,t)=>{const n=[];let r=e,s;for(;Ie(s=t(r));){const[i,o]=s.value;n.push(i),r=o}return n},N$=B8,eA=S(2,(e,t)=>{const n=Fe(e);if(Nt(n)){const r=[jn(n)],s=da(n);for(const i of s)r.every(o=>!t(i,o))&&r.push(i);return r}return[]}),EH=e=>eA(e,O$()),Hu=S(2,(e,t)=>Fe(e).join(t)),tA=Symbol.for("effect/Chunk");function OH(e,t,n,r,s){for(let i=t;i<Math.min(e.length,t+s);i++)n[r+i-t]=e[i];return n}const nA=[],TH=e=>I$((t,n)=>t.length===n.length&&Xs(t).every((r,s)=>e(r,Qi(n,s)))),CH=TH(Y),RH={[tA]:{_A:e=>e},toString(){return rt(this.toJSON())},toJSON(){return{_id:"Chunk",values:Xs(this).map(Ye)}},[Me](){return this.toJSON()},[ie](e){return x$(e)&&CH(this,e)},[ae](){return st(this,Gh(Xs(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return nA[Symbol.iterator]();default:return Xs(this)[Symbol.iterator]()}},pipe(){return q(this,arguments)}},We=e=>{const t=Object.create(RH);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=Hr,t.right=Hr;break}case"ISingleton":{t.length=1,t.depth=0,t.left=Hr,t.right=Hr;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=Hr,t.right=Hr;break}}return t},x$=e=>G(e,tA),Hr=We({_tag:"IEmpty"}),kn=()=>Hr,av=(...e)=>e.length===1?qt(e[0]):NH(e),qt=e=>We({_tag:"ISingleton",a:e}),tu=e=>x$(e)?e:We({_tag:"IArray",array:Fe(e)}),g0=(e,t,n)=>{switch(e.backing._tag){case"IArray":{OH(e.backing.array,0,t,n,e.length);break}case"IConcat":{g0(e.left,t,n),g0(e.right,t,n+e.left.length);break}case"ISingleton":{t[n]=e.backing.a;break}case"ISlice":{let r=0,s=n;for(;r<e.length;)t[s]=Qi(e,r),r+=1,s+=1;break}}},IH=e=>{switch(e.backing._tag){case"IEmpty":return nA;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return g0(e,t,0),e.backing={_tag:"IArray",array:t},e.left=Hr,e.right=Hr,e.depth=0,t}}},Xs=IH,PH=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return We({_tag:"IArray",array:eC(e.backing.array)});case"IConcat":return We({_tag:"IConcat",left:li(e.backing.right),right:li(e.backing.left)});case"ISlice":return Tn(eC(Xs(e)))}},li=PH,FH=S(2,(e,t)=>t<0||t>=e.length?L():z(Qi(e,t))),Tn=e=>We({_tag:"IArray",array:e}),NH=e=>Tn(e),Qi=S(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Qi(e.left,t):Qi(e.right,t-e.left.length);case"ISlice":return Qi(e.backing.chunk,t+e.backing.offset)}}),y0=S(2,(e,t)=>St(e,qt(t))),gn=S(2,(e,t)=>St(qt(t),e)),pg=S(2,(e,t)=>{if(t<=0)return Hr;if(t>=e.length)return e;switch(e.backing._tag){case"ISlice":return We({_tag:"ISlice",chunk:e.backing.chunk,length:t,offset:e.backing.offset});case"IConcat":return t>e.left.length?We({_tag:"IConcat",left:e.left,right:pg(e.right,t-e.left.length)}):pg(e.left,t);default:return We({_tag:"ISlice",chunk:e,offset:0,length:t})}}),Li=S(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return Hr;switch(e.backing._tag){case"ISlice":return We({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?Li(e.right,t-e.left.length):We({_tag:"IConcat",left:Li(e.left,t),right:e.right});default:return We({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),St=S(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;const n=t.depth-e.depth;if(Math.abs(n)<=1)return We({_tag:"IConcat",left:e,right:t});if(n<-1)if(e.left.depth>=e.right.depth){const r=St(e.right,t);return We({_tag:"IConcat",left:e.left,right:r})}else{const r=St(e.right.right,t);if(r.depth===e.depth-3){const s=We({_tag:"IConcat",left:e.right.left,right:r});return We({_tag:"IConcat",left:e.left,right:s})}else{const s=We({_tag:"IConcat",left:e.left,right:e.right.left});return We({_tag:"IConcat",left:s,right:r})}}else if(t.right.depth>=t.left.depth){const r=St(e,t.left);return We({_tag:"IConcat",left:r,right:t.right})}else{const r=St(e,t.left.left);if(r.depth===t.depth-3){const s=We({_tag:"IConcat",left:r,right:t.left.right});return We({_tag:"IConcat",left:s,right:t.right})}else{const s=We({_tag:"IConcat",left:t.left.right,right:t.right});return We({_tag:"IConcat",left:r,right:s})}}}),M$=S(2,(e,t)=>Tn(kH(e,t))),A$=e=>e.length===0,fi=e=>e.length>0,rA=FH(0),L$=e=>Qi(e,0),Ss=L$,xH=S(2,(e,t)=>e.backing._tag==="ISingleton"?qt(t(e.backing.a,0)):Tn(v(Xs(e),Yo((n,r)=>t(n,r))))),Ws=e=>Li(e,1),MH=S(2,(e,t)=>Li(e,e.length-t)),AH=F$,S0=Symbol.for("effect/Duration"),LH=BigInt(0),rC=BigInt(24),Sp=BigInt(60),_0=BigInt(1e3),sC=BigInt(1e6),v0=BigInt(1e9),iC=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,ks=e=>{if(sA(e))return e;if(bs(e))return mg(e);if(My(e))return cv(e);if(Array.isArray(e)){if(e.length===2&&bs(e[0])&&bs(e[1]))return cv(BigInt(e[0])*v0+BigInt(e[1]))}else if(Pr(e)){iC.lastIndex=0;const t=iC.exec(e);if(t){const[n,r,s]=t,i=Number(r);switch(s){case"nano":case"nanos":return cv(BigInt(r));case"micro":case"micros":return zH(BigInt(r));case"milli":case"millis":return mg(i);case"second":case"seconds":return UH(i);case"minute":case"minutes":return VH(i);case"hour":case"hours":return qH(i);case"day":case"days":return KH(i);case"week":case"weeks":return HH(i)}}}throw new Error("Invalid DurationInput")},oC={_tag:"Millis",millis:0},DH={_tag:"Infinity"},jH={[S0]:S0,[ae](){return st(this,w2(this.value))},[ie](e){return sA(e)&&XH(this,e)},toString(){return`Duration(${eW(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:JH(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[Me](){return this.toJSON()},pipe(){return q(this,arguments)}},bi=e=>{const t=Object.create(jH);return bs(e)?isNaN(e)||e<=0?t.value=oC:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=DH:e<=LH?t.value=oC:t.value={_tag:"Nanos",nanos:e},t},sA=e=>G(e,S0),BH=bi(0),cv=e=>bi(e),zH=e=>bi(e*_0),mg=e=>bi(e),UH=e=>bi(e*1e3),VH=e=>bi(e*6e4),qH=e=>bi(e*36e5),KH=e=>bi(e*864e5),HH=e=>bi(e*6048e5),b0=e=>GH(e,{onMillis:t=>t,onNanos:t=>Number(t)/1e6}),WH=e=>{const t=ks(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},JH=e=>{const t=ks(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/v0),Number(t.value.nanos%v0)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},GH=S(2,(e,t)=>{const n=ks(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}}),iA=S(3,(e,t,n)=>{const r=ks(e),s=ks(t);if(r.value._tag==="Infinity"||s.value._tag==="Infinity")return n.onMillis(b0(r),b0(s));if(r.value._tag==="Nanos"||s.value._tag==="Nanos"){const i=r.value._tag==="Nanos"?r.value.nanos:BigInt(Math.round(r.value.millis*1e6)),o=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6));return n.onNanos(i,o)}return n.onMillis(r.value.millis,s.value.millis)}),QH=(e,t)=>iA(e,t,{onMillis:(n,r)=>n===r,onNanos:(n,r)=>n===r}),YH=S(2,(e,t)=>iA(e,t,{onMillis:(n,r)=>n>=r,onNanos:(n,r)=>n>=r})),XH=S(2,(e,t)=>QH(ks(e),ks(t))),ZH=e=>{const t=ks(e);if(t.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=WH(t),r=n/sC,s=r/_0,i=s/Sp,o=i/Sp,a=o/rC;return{days:Number(a),hours:Number(o%rC),minutes:Number(i%Sp),seconds:Number(s%Sp),millis:Number(r%_0),nanos:Number(n%sC)}},eW=e=>{const t=ks(e);if(t.value._tag==="Infinity")return"Infinity";const n=ZH(t),r=[];return n.days!==0&&r.push(`${n.days}d`),n.hours!==0&&r.push(`${n.hours}h`),n.minutes!==0&&r.push(`${n.minutes}m`),n.seconds!==0&&r.push(`${n.seconds}s`),n.millis!==0&&r.push(`${n.millis}ms`),n.nanos!==0&&r.push(`${n.nanos}ns`),r.join(" ")},ma=5,D$=Math.pow(2,ma),tW=D$-1,nW=D$/2,rW=D$/4;function sW(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function nu(e,t){return t>>>e&tW}function _c(e){return 1<<e}function oA(e,t){return sW(e&t-1)}const iW=(e,t)=>({value:e,previous:t});function Fc(e,t,n,r){let s=r;if(!e){const i=r.length;s=new Array(i);for(let o=0;o<i;++o)s[o]=r[o]}return s[t]=n,s}function aA(e,t,n){const r=n.length-1;let s=0,i=0,o=n;if(e)s=i=t;else for(o=new Array(r);s<t;)o[i++]=n[s++];for(++s;s<=r;)o[i++]=n[s++];return e&&(o.length=r),o}function oW(e,t,n,r){const s=r.length;if(e){let c=s;for(;c>=t;)r[c--]=r[c];return r[t]=n,r}let i=0,o=0;const a=new Array(s+1);for(;i<t;)a[o++]=r[i++];for(a[t]=n;i<s;)a[++o]=r[i++];return a}let ru=class cA{constructor(){u(this,"_tag","EmptyNode")}modify(t,n,r,s,i,o){const a=r(L());return nt(a)?new cA:(++o.value,new sm(t,s,i,a))}};function Gr(e){return S2(e,"EmptyNode")}function aW(e){return Gr(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function qy(e,t){return Gr(e)?!1:t===e.edit}let sm=class w0{constructor(t,n,r,s){u(this,"edit");u(this,"hash");u(this,"key");u(this,"value");u(this,"_tag","LeafNode");this.edit=t,this.hash=n,this.key=r,this.value=s}modify(t,n,r,s,i,o){if(Y(i,this.key)){const c=r(this.value);return c===this.value?this:nt(c)?(--o.value,new ru):qy(this,t)?(this.value=c,this):new w0(t,s,i,c)}const a=r(L());return nt(a)?this:(++o.value,fA(t,n,this.hash,this,s,new w0(t,s,i,a)))}},cW=class uA{constructor(t,n,r){u(this,"edit");u(this,"hash");u(this,"children");u(this,"_tag","CollisionNode");this.edit=t,this.hash=n,this.children=r}modify(t,n,r,s,i,o){if(s===this.hash){const c=qy(this,t),l=this.updateCollisionList(c,t,this.hash,this.children,r,i,o);return l===this.children?this:l.length>1?new uA(t,this.hash,l):l[0]}const a=r(L());return nt(a)?this:(++o.value,fA(t,n,this.hash,this,s,new sm(t,s,i,a)))}updateCollisionList(t,n,r,s,i,o,a){const c=s.length;for(let f=0;f<c;++f){const h=s[f];if("key"in h&&Y(o,h.key)){const d=h.value,p=i(d);return p===d?s:nt(p)?(--a.value,aA(t,f,s)):Fc(t,f,new sm(n,r,o,p),s)}}const l=i(L());return nt(l)?s:(++a.value,Fc(t,c,new sm(n,r,o,l),s))}},$0=class k0{constructor(t,n,r){u(this,"edit");u(this,"mask");u(this,"children");u(this,"_tag","IndexedNode");this.edit=t,this.mask=n,this.children=r}modify(t,n,r,s,i,o){const a=this.mask,c=this.children,l=nu(n,s),f=_c(l),h=oA(a,f),d=a&f,p=qy(this,t);if(!d){const g=new ru().modify(t,n+ma,r,s,i,o);return g?c.length>=nW?fW(t,l,g,a,c):new k0(t,a|f,oW(p,h,g,c)):this}const _=c[h],b=_.modify(t,n+ma,r,s,i,o);if(_===b)return this;let w=a,m;if(Gr(b)){if(w&=~f,!w)return new ru;if(c.length<=2&&aW(c[h^1]))return c[h^1];m=aA(p,h,c)}else m=Fc(p,h,b,c);return p?(this.mask=w,this.children=m,this):new k0(t,w,m)}},uW=class lA{constructor(t,n,r){u(this,"edit");u(this,"size");u(this,"children");u(this,"_tag","ArrayNode");this.edit=t,this.size=n,this.children=r}modify(t,n,r,s,i,o){let a=this.size;const c=this.children,l=nu(n,s),f=c[l],h=(f||new ru).modify(t,n+ma,r,s,i,o);if(f===h)return this;const d=qy(this,t);let p;if(Gr(f)&&!Gr(h))++a,p=Fc(d,l,h,c);else if(!Gr(f)&&Gr(h)){if(--a,a<=rW)return lW(t,a,l,c);p=Fc(d,l,new ru,c)}else p=Fc(d,l,h,c);return d?(this.size=a,this.children=p,this):new lA(t,a,p)}};function lW(e,t,n,r){const s=new Array(t-1);let i=0,o=0;for(let a=0,c=r.length;a<c;++a)if(a!==n){const l=r[a];l&&!Gr(l)&&(s[i++]=l,o|=1<<a)}return new $0(e,o,s)}function fW(e,t,n,r,s){const i=[];let o=r,a=0;for(let c=0;o;++c)o&1&&(i[c]=s[a++]),o>>>=1;return i[t]=n,new uW(e,a+1,i)}function hW(e,t,n,r,s,i){if(n===s)return new cW(e,n,[i,r]);const o=nu(t,n),a=nu(t,s);if(o===a)return c=>new $0(e,_c(o)|_c(a),[c]);{const c=o<a?[r,i]:[i,r];return new $0(e,_c(o)|_c(a),c)}}function fA(e,t,n,r,s,i){let o,a=t;for(;;){const c=hW(e,a,n,r,s,i);if(typeof c=="function")o=iW(c,o),a=a+ma;else{let l=c;for(;o!=null;)l=o.value(l),o=o.previous;return l}}}const hA="effect/HashMap",E0=Symbol.for(hA),dW={[E0]:E0,[Symbol.iterator](){return new dA(this,(e,t)=>[e,t])},[ae](){let e=W(hA);for(const t of this)e^=v(W(t[0]),Se(W(t[1])));return st(this,e)},[ie](e){if(gW(e)){if(e._size!==this._size)return!1;for(const t of this){const n=v(e,B$(t[0],W(t[0])));if(nt(n))return!1;if(!Y(t[1],n.value))return!1}return!0}return!1},toString(){return rt(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(Ye)}},[Me](){return this.toJSON()},pipe(){return q(this,arguments)}},j$=(e,t,n,r)=>{const s=Object.create(dW);return s._editable=e,s._edit=t,s._root=n,s._size=r,s};let dA=class pA{constructor(t,n){u(this,"map");u(this,"f");u(this,"v");this.map=t,this.f=n,this.v=mA(this.map._root,this.f,void 0)}next(){if(nt(this.v))return{done:!0,value:void 0};const t=this.v.value;return this.v=gg(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new pA(this.map,this.f)}};const gg=e=>e?gA(e[0],e[1],e[2],e[3],e[4]):L(),mA=(e,t,n=void 0)=>{switch(e._tag){case"LeafNode":return Ie(e.value)?z({value:t(e.key,e.value.value),cont:n}):gg(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=e.children;return gA(r.length,r,0,t,n)}default:return gg(n)}},gA=(e,t,n,r,s)=>{for(;n<e;){const i=t[n++];if(i&&!Gr(i))return mA(i,r,[e,t,n,r,s])}return gg(s)},pW=j$(!1,0,new ru,0),Ky=()=>pW,mW=e=>{const t=SA(Ky());for(const n of e)ih(t,n[0],n[1]);return bW(t)},gW=e=>G(e,E0),yW=e=>e&&Gr(e._root),SW=S(2,(e,t)=>B$(e,t,W(t))),B$=S(3,(e,t,n)=>{let r=e._root,s=0;for(;;)switch(r._tag){case"LeafNode":return Y(t,r.key)?r.value:L();case"CollisionNode":{if(n===r.hash){const i=r.children;for(let o=0,a=i.length;o<a;++o){const c=i[o];if("key"in c&&Y(t,c.key))return c.value}}return L()}case"IndexedNode":{const i=nu(s,n),o=_c(i);if(r.mask&o){r=r.children[oA(r.mask,o)],s+=ma;break}return L()}case"ArrayNode":{if(r=r.children[nu(s,n)],r){s+=ma;break}return L()}default:return L()}}),_W=S(2,(e,t)=>Ie(B$(e,t,W(t)))),ih=S(3,(e,t,n)=>z$(e,t,()=>z(n))),vW=S(3,(e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:j$(e._editable,e._edit,t,n)),yA=e=>new dA(e,t=>t),yg=e=>e._size,SA=e=>j$(!0,e._edit+1,e._root,e._size),bW=e=>(e._editable=!1,e),z$=S(3,(e,t,n)=>wW(e,t,W(t),n)),wW=S(4,(e,t,n,r)=>{const s={value:e._size},i=e._root.modify(e._editable?e._edit:NaN,0,r,n,t,s);return v(e,vW(i,s.value))}),aC=S(2,(e,t)=>z$(e,t,L)),$W=S(2,(e,t)=>Hy(e,Ky(),(n,r,s)=>ih(n,s,t(r,s)))),kW=S(2,(e,t)=>Hy(e,void 0,(n,r,s)=>t(r,s))),Hy=S(3,(e,t,n)=>{const r=e._root;if(r._tag==="LeafNode")return Ie(r.value)?n(t,r.value.value,r.key):t;if(r._tag==="EmptyNode")return t;const s=[r.children];let i;for(;i=s.pop();)for(let o=0,a=i.length;o<a;){const c=i[o++];c&&!Gr(c)&&(c._tag==="LeafNode"?Ie(c.value)&&(t=n(t,c.value.value,c.key)):s.push(c.children))}return t}),_A="effect/HashSet",O0=Symbol.for(_A),EW={[O0]:O0,[Symbol.iterator](){return yA(this._keyMap)},[ae](){return st(this,Se(W(this._keyMap))(W(_A)))},[ie](e){return OW(e)?yg(this._keyMap)===yg(e._keyMap)&&Y(this._keyMap,e._keyMap):!1},toString(){return rt(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(Ye)}},[Me](){return this.toJSON()},pipe(){return q(this,arguments)}},Wy=e=>{const t=Object.create(EW);return t._keyMap=e,t},OW=e=>G(e,O0),TW=Wy(Ky()),Jy=()=>TW,CW=e=>{const t=U$(Jy());for(const n of e)oh(t,n);return V$(t)},RW=(...e)=>{const t=U$(Jy());for(const n of e)oh(t,n);return V$(t)},IW=S(2,(e,t)=>_W(e._keyMap,t)),PW=e=>yg(e._keyMap),U$=e=>Wy(SA(e._keyMap)),V$=e=>(e._keyMap._editable=!1,e),vA=S(2,(e,t)=>{const n=U$(e);return t(n),V$(n)}),oh=S(2,(e,t)=>e._keyMap._editable?(ih(t,!0)(e._keyMap),e):Wy(ih(t,!0)(e._keyMap))),bA=S(2,(e,t)=>e._keyMap._editable?(aC(t)(e._keyMap),e):Wy(aC(t)(e._keyMap))),FW=S(2,(e,t)=>vA(e,n=>{for(const r of t)bA(n,r)})),NW=S(2,(e,t)=>vA(Jy(),n=>{xW(e,r=>oh(n,r));for(const r of t)oh(n,r)})),xW=S(2,(e,t)=>kW(e._keyMap,(n,r)=>t(r))),MW=S(3,(e,t,n)=>Hy(e._keyMap,t,(r,s,i)=>n(r,i))),ga=Jy,AW=CW,q$=RW,LW=IW,wA=PW,Of=oh,$A=bA,cC=FW,ah=NW,Sg=MW,uC=Symbol.for("effect/MutableRef"),DW={[uC]:uC,toString(){return rt(this.toJSON())},toJSON(){return{_id:"MutableRef",current:Ye(this.current)}},[Me](){return this.toJSON()},pipe(){return q(this,arguments)}},td=e=>{const t=Object.create(DW);return t.current=e,t},jW=S(3,(e,t,n)=>Y(t,e.current)?(e.current=n,!0):!1),Et=e=>e.current,nd=S(2,(e,t)=>(e.current=t,e)),Gy="effect/FiberId",ya=Symbol.for(Gy),su="None",T0="Runtime",C0="Composite",BW=gt(`${Gy}-${su}`);var OP;let zW=class{constructor(){u(this,OP,ya);u(this,"_tag",su);u(this,"id",-1);u(this,"startTimeMillis",-1)}[(OP=ya,ae)](){return BW}[ie](t){return K$(t)&&t._tag===su}toString(){return rt(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[Me](){return this.toJSON()}};var TP;let UW=class{constructor(t,n){u(this,"id");u(this,"startTimeMillis");u(this,TP,ya);u(this,"_tag",T0);this.id=t,this.startTimeMillis=n}[(TP=ya,ae)](){return st(this,gt(`${Gy}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[ie](t){return K$(t)&&t._tag===T0&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return rt(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[Me](){return this.toJSON()}};var CP;let VW=class{constructor(t,n){u(this,"left");u(this,"right");u(this,CP,ya);u(this,"_tag",C0);u(this,"_hash");this.left=t,this.right=n}[(CP=ya,ae)](){return v(gt(`${Gy}-${this._tag}`),Se(W(this.left)),Se(W(this.right)),st(this))}[ie](t){return K$(t)&&t._tag===C0&&Y(this.left,t.left)&&Y(this.right,t.right)}toString(){return rt(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:Ye(this.left),right:Ye(this.right)}}[Me](){return this.toJSON()}};const qW=new zW,K$=e=>G(e,ya),KW=S(2,(e,t)=>e._tag===su?t:t._tag===su?e:new VW(e,t)),R0=e=>{switch(e._tag){case su:return ga();case T0:return q$(e.id);case C0:return v(R0(e.left),ah(R0(e.right)))}},lC=ge(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>td(0)),kA=e=>Array.from(R0(e)).map(n=>`#${n}`).join(","),HW=()=>{const e=Et(lC);return v(lC,nd(e+1)),new UW(e,Date.now())},ao=qW,WW=KW,JW=kA,EA=HW,H$=Ky,GW=mW,QW=yW,OA=SW,TA=ih,CA=yA,YW=yg,XW=z$,ZW=$W,RA=Hy,ch=Symbol.for("effect/List"),I0=e=>Fe(e),e7=e=>j8(N$(e),I0),t7=e7(Y),n7={[ch]:ch,_tag:"Cons",toString(){return rt(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:I0(this).map(Ye)}},[Me](){return this.toJSON()},[ie](e){return PA(e)&&this._tag===e._tag&&t7(this,e)},[ae](){return st(this,Gh(I0(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();const n=t.head;return t=t.tail,{done:e,value:n}},return(n){return e||(e=!0),{done:!0,value:n}}}},pipe(){return q(this,arguments)}},_g=(e,t)=>{const n=Object.create(n7);return n.head=e,n.tail=t,n},r7=gt("Nil"),s7={[ch]:ch,_tag:"Nil",toString(){return rt(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[Me](){return this.toJSON()},[ae](){return r7},[ie](e){return PA(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return q(this,arguments)}},IA=Object.create(s7),PA=e=>G(e,ch),Zs=e=>e._tag==="Nil",FA=e=>e._tag==="Cons",i7=()=>IA,Sa=(e,t)=>_g(e,t),iu=i7,W$=e=>_g(e,IA),o7=S(2,(e,t)=>c7(t,e)),a7=S(2,(e,t)=>Sa(t,e)),c7=S(2,(e,t)=>{if(Zs(e))return t;if(Zs(t))return e;{const n=_g(t.head,e);let r=n,s=t.tail;for(;!Zs(s);){const i=_g(s.head,e);r.tail=i,r=i,s=s.tail}return n}}),u7=S(3,(e,t,n)=>{let r=t,s=e;for(;!Zs(s);)r=n(r,s.head),s=s.tail;return r}),l7=e=>{let t=iu(),n=e;for(;!Zs(n);)t=a7(t,n.head),n=n.tail;return t},Qy=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=jy,e}(),f7=e=>Object.assign(Object.create(jy),e),h7=Symbol.for("effect/DifferContextPatch");function fC(e){return e}const rd={...Qy.prototype,[h7]:{_Value:fC,_Patch:fC}},d7=Object.assign(Object.create(rd),{_tag:"Empty"}),p7=Object.create(d7),NA=()=>p7,m7=Object.assign(Object.create(rd),{_tag:"AndThen"}),g7=(e,t)=>{const n=Object.create(m7);return n.first=e,n.second=t,n},y7=Object.assign(Object.create(rd),{_tag:"AddService"}),S7=(e,t)=>{const n=Object.create(y7);return n.key=e,n.service=t,n},_7=Object.assign(Object.create(rd),{_tag:"RemoveService"}),v7=e=>{const t=Object.create(_7);return t.key=e,t},b7=Object.assign(Object.create(rd),{_tag:"UpdateService"}),w7=(e,t)=>{const n=Object.create(b7);return n.key=e,n.update=t,n},$7=(e,t)=>{const n=new Map(e.unsafeMap);let r=NA();for(const[s,i]of t.unsafeMap.entries())if(n.has(s)){const o=n.get(s);n.delete(s),Y(o,i)||(r=im(w7(s,()=>i))(r))}else n.delete(s),r=im(S7(s,i))(r);for(const[s]of n.entries())r=im(v7(s))(r);return r},im=S(2,(e,t)=>g7(e,t)),k7=S(2,(e,t)=>{if(e._tag==="Empty")return t;let n=!1,r=qt(e);const s=new Map(t.unsafeMap);for(;fi(r);){const o=Ss(r),a=Ws(r);switch(o._tag){case"Empty":{r=a;break}case"AddService":{s.set(o.key,o.service),r=a;break}case"AndThen":{r=gn(gn(a,o.second),o.first);break}case"RemoveService":{s.delete(o.key),r=a;break}case"UpdateService":{s.set(o.key,o.update(s.get(o.key))),n=!0,r=a;break}}}if(!n)return eu(s);const i=new Map;for(const[o]of t.unsafeMap)s.has(o)&&(i.set(o,s.get(o)),s.delete(o));for(const[o,a]of s)i.set(o,a);return eu(i)}),E7=Symbol.for("effect/DifferHashSetPatch");function uv(e){return e}const Yy={...Qy.prototype,[E7]:{_Value:uv,_Key:uv,_Patch:uv}},O7=Object.assign(Object.create(Yy),{_tag:"Empty"}),T7=Object.create(O7),xA=()=>T7,C7=Object.assign(Object.create(Yy),{_tag:"AndThen"}),R7=(e,t)=>{const n=Object.create(C7);return n.first=e,n.second=t,n},I7=Object.assign(Object.create(Yy),{_tag:"Add"}),P7=e=>{const t=Object.create(I7);return t.value=e,t},F7=Object.assign(Object.create(Yy),{_tag:"Remove"}),N7=e=>{const t=Object.create(F7);return t.value=e,t},x7=(e,t)=>{const[n,r]=Sg([e,xA()],([s,i],o)=>LW(o)(s)?[$A(o)(s),i]:[s,P0(P7(o))(i)])(t);return Sg(r,(s,i)=>P0(N7(i))(s))(n)},P0=S(2,(e,t)=>R7(e,t)),M7=S(2,(e,t)=>{if(e._tag==="Empty")return t;let n=t,r=qt(e);for(;fi(r);){const s=Ss(r),i=Ws(r);switch(s._tag){case"Empty":{r=i;break}case"AndThen":{r=gn(s.first)(gn(s.second)(i));break}case"Add":{n=Of(s.value)(n),r=i;break}case"Remove":n=$A(s.value)(n),r=i}}return n}),A7=Symbol.for("effect/DifferReadonlyArrayPatch");function hC(e){return e}const sd={...Qy.prototype,[A7]:{_Value:hC,_Patch:hC}},L7=Object.assign(Object.create(sd),{_tag:"Empty"}),D7=Object.create(L7),MA=()=>D7,j7=Object.assign(Object.create(sd),{_tag:"AndThen"}),B7=(e,t)=>{const n=Object.create(j7);return n.first=e,n.second=t,n},z7=Object.assign(Object.create(sd),{_tag:"Append"}),U7=e=>{const t=Object.create(z7);return t.values=e,t},V7=Object.assign(Object.create(sd),{_tag:"Slice"}),q7=(e,t)=>{const n=Object.create(V7);return n.from=e,n.until=t,n},K7=Object.assign(Object.create(sd),{_tag:"Update"}),H7=(e,t)=>{const n=Object.create(K7);return n.index=e,n.patch=t,n},W7=e=>{let t=0,n=MA();for(;t<e.oldValue.length&&t<e.newValue.length;){const r=e.oldValue[t],s=e.newValue[t],i=e.differ.diff(r,s);Y(i,e.differ.empty)||(n=om(n,H7(t,i))),t=t+1}return t<e.oldValue.length&&(n=om(n,q7(0,t))),t<e.newValue.length&&(n=om(n,U7(SH(t)(e.newValue)))),n},om=S(2,(e,t)=>B7(e,t)),J7=S(3,(e,t,n)=>{if(e._tag==="Empty")return t;let r=t.slice(),s=Ur(e);for(;nm(s);){const i=jn(s),o=da(s);switch(i._tag){case"Empty":{s=o;break}case"AndThen":{o.unshift(i.first,i.second),s=o;break}case"Append":{for(const a of i.values)r.push(a);s=o;break}case"Slice":{r=r.slice(i.from,i.until),s=o;break}case"Update":{r[i.index]=n.patch(i.patch,r[i.index]),s=o;break}}}return r}),G7=Symbol.for("effect/Differ"),Q7={[G7]:{_P:de,_V:de}},Wu=e=>{const t=Object.create(Q7);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},Y7=()=>Wu({empty:NA(),combine:(e,t)=>im(t)(e),diff:(e,t)=>$7(e,t),patch:(e,t)=>k7(t)(e)}),X7=()=>Wu({empty:xA(),combine:(e,t)=>P0(t)(e),diff:(e,t)=>x7(e,t),patch:(e,t)=>M7(t)(e)}),Z7=e=>Wu({empty:MA(),combine:(t,n)=>om(t,n),diff:(t,n)=>W7({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>J7(t,n,e)}),AA=()=>eJ((e,t)=>t),eJ=e=>Wu({empty:de,combine:(t,n)=>t===de?n:n===de?t:r=>n(t(r)),diff:(t,n)=>Y(t,n)?de:xy(n),patch:(t,n)=>e(n,t(n))}),uh=255,LA=8,F0=e=>e&uh,N0=e=>e>>LA&uh,id=(e,t)=>(e&uh)+((t&e&uh)<<LA),tJ=id(0,0),nJ=e=>id(e,e),rJ=e=>id(e,0),sJ=S(2,(e,t)=>id(F0(e)&~t,N0(e))),iJ=S(2,(e,t)=>e|t),oJ=e=>~e>>>0&uh,aJ=0,Ju=1,cJ=2,DA=4,x0=16,jA=32,uJ=e=>Xy(e,jA),lJ=S(2,(e,t)=>e|t),Ci=e=>BA(e)&&!hJ(e),BA=e=>Xy(e,Ju),Xy=S(2,(e,t)=>(e&t)!==0),zA=(...e)=>e.reduce((t,n)=>t|n,0),fJ=zA(aJ),dC=e=>Xy(e,DA),hJ=e=>Xy(e,x0),Xo=S(2,(e,t)=>id(e^t,t)),Nc=S(2,(e,t)=>e&(oJ(F0(t))|N0(t))|F0(t)&N0(t)),pC=Wu({empty:tJ,diff:(e,t)=>Xo(e,t),combine:(e,t)=>iJ(t)(e),patch:(e,t)=>Nc(t,e)}),dJ=nJ,UA=rJ,mC=sJ,VA=(e,t)=>({_tag:"Par",left:e,right:t}),_p=(e,t)=>({_tag:"Seq",left:e,right:t}),pJ=e=>{let t=W$(e),n=iu();for(;;){const[r,s]=u7(t,[qA(),iu()],([i,o],a)=>{const[c,l]=mJ(a);return[vJ(i,c),o7(o,l)]});if(n=gJ(n,r),Zs(s))return l7(n);t=s}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},mJ=e=>{let t=e,n=qA(),r=iu(),s=iu();for(;;)switch(t._tag){case"Empty":{if(Zs(r))return[n,s];t=r.head,r=r.tail;break}case"Par":{r=Sa(t.right,r),t=t.left;break}case"Seq":{const i=t.left,o=t.right;switch(i._tag){case"Empty":{t=o;break}case"Par":{const a=i.left,c=i.right;t=VA(_p(a,o),_p(c,o));break}case"Seq":{const a=i.left,c=i.right;t=_p(a,_p(c,o));break}case"Single":{t=i,s=Sa(o,s);break}}break}case"Single":{if(n=_J(n,t),Zs(r))return[n,s];t=r.head,r=r.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},gJ=(e,t)=>{if(Zs(e))return W$(lv(t));if(bJ(t))return e;const n=TJ(e.head),r=wJ(t);return n.length===1&&r.length===1&&Y(n[0],r[0])?Sa(OJ(e.head,lv(t)),e.tail):Sa(lv(t),e)},yJ=Symbol.for("effect/RequestBlock/RequestBlockParallel"),SJ={_R:e=>e};var RP;let J$=(RP=yJ,class{constructor(t){u(this,"map");u(this,RP,SJ);this.map=t}});const qA=()=>new J$(H$()),_J=(e,t)=>new J$(XW(e.map,t.dataSource,n=>Y8(tm(n,y0(t.blockedRequest)),()=>qt(t.blockedRequest)))),vJ=(e,t)=>new J$(RA(e.map,t.map,(n,r,s)=>TA(n,s,Ft(OA(n,s),{onNone:()=>r,onSome:i=>St(r,i)})))),bJ=e=>QW(e.map),wJ=e=>Array.from(CA(e.map)),lv=e=>EJ(ZW(e.map,t=>qt(t))),$J=Symbol.for("effect/RequestBlock/RequestBlockSequential"),kJ={_R:e=>e};var IP;let KA=(IP=$J,class{constructor(t){u(this,"map");u(this,IP,kJ);this.map=t}});const EJ=e=>new KA(e),OJ=(e,t)=>new KA(RA(t.map,e.map,(n,r,s)=>TA(n,s,Ft(OA(n,s),{onNone:()=>kn(),onSome:i=>St(i,r)})))),TJ=e=>Array.from(CA(e.map)),CJ=e=>Array.from(e.map),Gu="Die",ou="Empty",Qu="Fail",Yu="Interrupt",au="Parallel",cu="Sequential",HA="effect/Cause",WA=Symbol.for(HA),RJ={_E:e=>e},Xu={[WA]:RJ,[ae](){return v(W(HA),Se(W(zJ(this))),st(this))},[ie](e){return IJ(e)&&BJ(this,e)},pipe(){return q(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:Ye(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:Ye(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:Ye(this.left),right:Ye(this.right)}}},toString(){return eS(this)},[Me](){return this.toJSON()}},uu=(()=>{const e=Object.create(Xu);return e._tag=ou,e})(),lu=e=>{const t=Object.create(Xu);return t._tag=Qu,t.error=e,t},Bn=e=>{const t=Object.create(Xu);return t._tag=Gu,t.defect=e,t},Wr=e=>{const t=Object.create(Xu);return t._tag=Yu,t.fiberId=e,t},co=(e,t)=>{const n=Object.create(Xu);return n._tag=au,n.left=e,n.right=t,n},Xt=(e,t)=>{const n=Object.create(Xu);return n._tag=cu,n.left=e,n.right=t,n},IJ=e=>G(e,WA),JA=e=>e._tag===Gu,PJ=e=>e._tag===ou?!0:fu(e,!0,(t,n)=>{switch(n._tag){case ou:return z(t);case Gu:case Qu:case Yu:return z(!1);default:return L()}}),GA=e=>Ie(MJ(e)),G$=e=>Y$(void 0,VJ)(e),FJ=e=>li(fu(e,kn(),(t,n)=>n._tag===Qu?z(v(t,gn(n.error))):L())),QA=e=>li(fu(e,kn(),(t,n)=>n._tag===Gu?z(v(t,gn(n.defect))):L())),NJ=e=>fu(e,ga(),(t,n)=>n._tag===Yu?z(v(t,Of(n.fiberId))):L()),xJ=e=>Q$(e,t=>t._tag===Qu?z(t.error):L()),YA=e=>{const t=xJ(e);switch(t._tag){case"None":return qe(e);case"Some":return re(t.value)}},MJ=e=>Q$(e,t=>t._tag===Yu?z(t.fiberId):L()),AJ=e=>Zy(e,{onEmpty:L(),onFail:t=>z(Bn(t)),onDie:t=>z(Bn(t)),onInterrupt:()=>L(),onSequential:(t,n)=>Ie(t)&&Ie(n)?z(Xt(t.value,n.value)):Ie(t)&&nt(n)?z(t.value):nt(t)&&Ie(n)?z(n.value):L(),onParallel:(t,n)=>Ie(t)&&Ie(n)?z(co(t.value,n.value)):Ie(t)&&nt(n)?z(t.value):nt(t)&&Ie(n)?z(n.value):L()}),gC=e=>Zy(e,{onEmpty:uu,onFail:()=>uu,onDie:t=>Bn(t),onInterrupt:t=>Wr(t),onSequential:Xt,onParallel:co}),LJ=e=>Zy(e,{onEmpty:uu,onFail:t=>Bn(t),onDie:t=>Bn(t),onInterrupt:t=>Wr(t),onSequential:(t,n)=>Xt(t,n),onParallel:(t,n)=>co(t,n)}),DJ=S(2,(e,t)=>jJ(e,n=>lu(t(n)))),jJ=S(2,(e,t)=>Zy(e,{onEmpty:uu,onFail:n=>t(n),onDie:n=>Bn(n),onInterrupt:n=>Wr(n),onSequential:(n,r)=>Xt(n,r),onParallel:(n,r)=>co(n,r)})),BJ=(e,t)=>{let n=qt(e),r=qt(t);for(;fi(n)&&fi(r);){const[s,i]=v(Ss(n),fu([ga(),kn()],([c,l],f)=>{const[h,d]=M0(f);return z([v(c,ah(h)),v(l,St(d))])})),[o,a]=v(Ss(r),fu([ga(),kn()],([c,l],f)=>{const[h,d]=M0(f);return z([v(c,ah(h)),v(l,St(d))])}));if(!Y(s,o))return!1;n=i,r=a}return!0},zJ=e=>UJ(qt(e),kn()),UJ=(e,t)=>{for(;;){const[n,r]=v(e,F$([ga(),kn()],([i,o],a)=>{const[c,l]=M0(a);return[v(i,ah(c)),v(o,St(l))]})),s=wA(n)>0?v(t,gn(n)):t;if(A$(r))return li(s);e=r,t=s}throw new Error(Ay("Cause.flattenCauseLoop"))},Q$=S(2,(e,t)=>{const n=[e];for(;n.length>0;){const r=n.pop(),s=t(r);switch(s._tag){case"None":{switch(r._tag){case cu:case au:{n.push(r.right),n.push(r.left);break}}break}case"Some":return s}}return L()}),M0=e=>{let t=e;const n=[];let r=ga(),s=kn();for(;t!==void 0;)switch(t._tag){case ou:{if(n.length===0)return[r,s];t=n.pop();break}case Qu:{if(r=Of(r,av(t._tag,t.error)),n.length===0)return[r,s];t=n.pop();break}case Gu:{if(r=Of(r,av(t._tag,t.defect)),n.length===0)return[r,s];t=n.pop();break}case Yu:{if(r=Of(r,av(t._tag,t.fiberId)),n.length===0)return[r,s];t=n.pop();break}case cu:{switch(t.left._tag){case ou:{t=t.right;break}case cu:{t=Xt(t.left.left,Xt(t.left.right,t.right));break}case au:{t=co(Xt(t.left.left,t.right),Xt(t.left.right,t.right));break}default:{s=gn(s,t.right),t=t.left;break}}break}case au:{n.push(t.right),t=t.left;break}}throw new Error(Ay("Cause.evaluateCauseLoop"))},VJ={emptyCase:XT,failCase:l0,dieCase:l0,interruptCase:XT,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},yC="SequentialCase",SC="ParallelCase",Zy=S(2,(e,{onDie:t,onEmpty:n,onFail:r,onInterrupt:s,onParallel:i,onSequential:o})=>Y$(e,void 0,{emptyCase:()=>n,failCase:(a,c)=>r(c),dieCase:(a,c)=>t(c),interruptCase:(a,c)=>s(c),sequentialCase:(a,c,l)=>o(c,l),parallelCase:(a,c,l)=>i(c,l)})),fu=S(3,(e,t,n)=>{let r=t,s=e;const i=[];for(;s!==void 0;){const o=n(r,s);switch(r=Ie(o)?o.value:r,s._tag){case cu:{i.push(s.right),s=s.left;break}case au:{i.push(s.right),s=s.left;break}default:{s=void 0;break}}s===void 0&&i.length>0&&(s=i.pop())}return r}),Y$=S(3,(e,t,n)=>{const r=[e],s=[];for(;r.length>0;){const o=r.pop();switch(o._tag){case ou:{s.push(qe(n.emptyCase(t)));break}case Qu:{s.push(qe(n.failCase(t,o.error)));break}case Gu:{s.push(qe(n.dieCase(t,o.defect)));break}case Yu:{s.push(qe(n.interruptCase(t,o.fiberId)));break}case cu:{r.push(o.right),r.push(o.left),s.push(re({_tag:yC}));break}case au:{r.push(o.right),r.push(o.left),s.push(re({_tag:SC}));break}}}const i=[];for(;s.length>0;){const o=s.pop();switch(o._tag){case"Left":{switch(o.left._tag){case yC:{const a=i.pop(),c=i.pop(),l=n.sequentialCase(t,a,c);i.push(l);break}case SC:{const a=i.pop(),c=i.pop(),l=n.parallelCase(t,a,c);i.push(l);break}}break}case"Right":{i.push(o.right);break}}}if(i.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return i.pop()}),eS=(e,t)=>G$(e)?"All fibers interrupted without errors.":eL(e).map(function(n){return(t==null?void 0:t.renderErrorCause)!==!0||n.cause===void 0?n.stack:`${n.stack} {
${XA(n.cause,"  ")}
}`}).join(`
`),XA=(e,t)=>{const n=e.stack.split(`
`);let r=`${t}[cause]: ${n[0]}`;for(let s=1,i=n.length;s<i;s++)r+=`
${t}${n[s]}`;return e.cause&&(r+=` {
${XA(e.cause,`${t}  `)}
${t}}`),r};let _C=class ZA extends globalThis.Error{constructor(n){const r=typeof n=="object"&&n!==null,s=Error.stackTraceLimit;Error.stackTraceLimit=1;super(qJ(n),r&&"cause"in n&&typeof n.cause<"u"?{cause:new ZA(n.cause)}:void 0);u(this,"span");this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=s,this.name=n instanceof Error?n.name:"Error",r&&(vC in n&&(this.span=n[vC]),Object.keys(n).forEach(i=>{i in this||(this[i]=n[i])})),this.stack=WJ(`${this.name}: ${this.message}`,n instanceof Error&&n.stack?n.stack:"",this.span)}};const qJ=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(G(e,"toString")&&Wh(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return $2(e)},KJ=/\((.*)\)/,HJ=ge("effect/Tracer/spanToTrace",()=>new WeakMap),WJ=(e,t,n)=>{const r=[e],s=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let i=1;i<s.length&&!s[i].includes("Generator.next");i++){if(s[i].includes("effect_internal_function")){r.pop();break}r.push(s[i].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let i=n,o=0;for(;i&&i._tag==="Span"&&o<10;){const a=HJ.get(i);if(typeof a=="function"){const c=a();if(typeof c=="string"){const l=c.match(KJ),f=l?l[1]:c.replace(/^at /,"");r.push(`    at ${i.name} (${f})`)}else r.push(`    at ${i.name}`)}else r.push(`    at ${i.name}`);i=Ds(i.parent),o++}}return r.join(`
`)},vC=Symbol.for("effect/SpanAnnotation"),eL=e=>Y$(e,void 0,{emptyCase:()=>[],dieCase:(t,n)=>[new _C(n)],failCase:(t,n)=>[new _C(n)],interruptCase:()=>[],parallelCase:(t,n,r)=>[...n,...r],sequentialCase:(t,n,r)=>[...n,...r]}),od="Pending",tS="Done",JJ="effect/Deferred",GJ=Symbol.for(JJ),QJ={_E:e=>e,_A:e=>e},YJ=e=>({_tag:od,joiners:e}),tL=e=>({_tag:tS,effect:e});let nS=class nL{constructor(t){u(this,"self");u(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new nL(this.self)}};const XJ="effect/EffectError",ZJ=Symbol.for(XJ),e9=e=>G(e,ZJ),rL=(e,t)=>{const n=new $t("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},t9=e=>{const t=new $t("RunBlocked");return t.effect_instruction_i0=e,t},_a=Symbol.for("effect/Effect");let n9=class{constructor(t,n){u(this,"patch");u(this,"op");u(this,"_op",C$);this.patch=t,this.op=n}};var PP;let $t=class{constructor(t){u(this,"_op");u(this,"effect_instruction_i0");u(this,"effect_instruction_i1");u(this,"effect_instruction_i2");u(this,"trace");u(this,PP,Zc);this._op=t}[(PP=_a,ie)](t){return this===t}[ae](){return st(this,k$(this))}pipe(){return q(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:Ye(this.effect_instruction_i0),effect_instruction_i1:Ye(this.effect_instruction_i1),effect_instruction_i2:Ye(this.effect_instruction_i2)}}toString(){return rt(this.toJSON())}[Me](){return this.toJSON()}[Symbol.iterator](){return new nS(new Jh(this))}};var FP;let sL=class{constructor(t){u(this,"_op");u(this,"effect_instruction_i0");u(this,"effect_instruction_i1");u(this,"effect_instruction_i2");u(this,"trace");u(this,FP,Zc);this._op=t,this._tag=t}[(FP=_a,ie)](t){return ak(t)&&t._op==="Failure"&&Y(this.effect_instruction_i0,t.effect_instruction_i0)}[ae](){return v(gt(this._tag),Se(W(this.effect_instruction_i0)),st(this))}get cause(){return this.effect_instruction_i0}pipe(){return q(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return rt(this.toJSON())}[Me](){return this.toJSON()}[Symbol.iterator](){return new nS(new Jh(this))}};var NP;let iL=class{constructor(t){u(this,"_op");u(this,"effect_instruction_i0");u(this,"effect_instruction_i1");u(this,"effect_instruction_i2");u(this,"trace");u(this,NP,Zc);this._op=t,this._tag=t}[(NP=_a,ie)](t){return ak(t)&&t._op==="Success"&&Y(this.effect_instruction_i0,t.effect_instruction_i0)}[ae](){return v(gt(this._tag),Se(W(this.effect_instruction_i0)),st(this))}get value(){return this.effect_instruction_i0}pipe(){return q(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:Ye(this.value)}}toString(){return rt(this.toJSON())}[Me](){return this.toJSON()}[Symbol.iterator](){return new nS(new Jh(this))}};const Ts=e=>G(e,_a),xe=e=>{const t=new $t(O2);return t.effect_instruction_i0=e,t},X$=S(3,(e,t,n)=>Nr(r=>P(e,s=>P(Yi(oe(()=>r(t(s)))),i=>oe(()=>n(s,i)).pipe(rr({onFailure:o=>{switch(i._tag){case tn:return bt(Xt(i.effect_instruction_i0,o));case nn:return bt(o)}},onSuccess:()=>i})))))),Vn=S(2,(e,t)=>P(e,()=>D(t))),Cs=e=>Vn(e,void 0),oL=function(){const e=new $t(Dy);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(Ay("you're not supposed to end up here"))}return e},Zl=(e,t=ao)=>{const n=new $t($f);let r;return n.effect_instruction_i0=s=>{r=e(s)},n.effect_instruction_i1=t,aS(n,s=>Ts(r)?r:Ze)},Fr=(e,t=ao)=>oL(e,function(){let n,r;function s(c){n?n(c):r===void 0&&(r=c)}const i=new $t($f);i.effect_instruction_i0=c=>{n=c,r&&c(r)},i.effect_instruction_i1=t;let o,a;return this.effect_instruction_i0.length!==1?(a=new AbortController,o=vn(()=>this.effect_instruction_i0(s,a.signal))):o=vn(()=>this.effect_instruction_i0(s)),o||a?aS(i,c=>(a&&a.abort(),o??Ze)):i}),aL=S(2,(e,t)=>{const n=new $t(Zp);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),lh=S(2,(e,t)=>hi(e,{onFailure:t,onSuccess:D})),vg=Symbol.for("effect/SpanAnnotation"),bC=Symbol.for("effect/OriginalAnnotation"),Z$=(e,t)=>Ie(t)?new Proxy(e,{has(n,r){return r===vg||r===bC||r in n},get(n,r){return r===vg?t.value:r===bC?e:n[r]}}):e,fh=e=>So(e)&&!(vg in e)?xe(t=>bt(Bn(Z$(e,dk(t))))):bt(Bn(e)),A0=e=>cL(()=>Bn(new x9(e))),hu=e=>hi(e,{onFailure:t=>D(re(t)),onSuccess:t=>D(qe(t))}),Yi=e=>uL(e,{onFailure:Te,onSuccess:Pe}),lt=e=>So(e)&&!(vg in e)?xe(t=>bt(lu(Z$(e,dk(t))))):bt(lu(e)),ek=e=>P(N(e),lt),bt=e=>{const t=new sL(tn);return t.effect_instruction_i0=e,t},cL=e=>P(N(e),bt),rS=xe(e=>D(e.id())),ad=e=>xe(t=>e(t.id())),P=S(2,(e,t)=>{const n=new $t(cg);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),ef=S(2,(e,t)=>P(e,n=>{const r=typeof t=="function"?t(n):t;return Ts(r)?r:v2(r)?Fr(s=>{r.then(i=>s(D(i)),i=>s(lt(new bL(i))))}):D(r)})),r9=e=>{const t=new $t("OnStep");return t.effect_instruction_i0=e,t},sS=e=>P(e,de),uL=S(2,(e,t)=>rr(e,{onFailure:n=>D(t.onFailure(n)),onSuccess:n=>D(t.onSuccess(n))})),rr=S(2,(e,t)=>{const n=new $t(ug);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n}),hi=S(2,(e,t)=>rr(e,{onFailure:n=>{if(QA(n).length>0)return bt(LJ(n));const s=FJ(n);return s.length>0?t.onFailure(L$(s)):bt(n)},onSuccess:t.onSuccess})),Js=S(2,(e,t)=>oe(()=>{const n=Fe(e),r=Vy(n.length);let s=0;return Vn(nk({while:()=>s<n.length,body:()=>t(n[s],s),step:i=>{r[s++]=i}}),r)})),iS=S(2,(e,t)=>oe(()=>{const n=Fe(e);let r=0;return nk({while:()=>r<n.length,body:()=>t(n[r],r),step:()=>{r++}})})),As=P(rS,e=>lL(e)),lL=e=>bt(Wr(e)),tk=e=>{const t=new $t(Ku);return t.effect_instruction_i0=dJ(Ju),t.effect_instruction_i1=()=>e,t},s9=S(2,(e,t)=>Nr(n=>P(Yi(n(e)),r=>q9(t,r)))),pe=S(2,(e,t)=>P(e,n=>N(()=>t(n)))),fL=S(2,(e,t)=>hi(e,{onFailure:n=>ek(()=>t.onFailure(n)),onSuccess:n=>N(()=>t.onSuccess(n))})),oS=S(2,(e,t)=>rr(e,{onFailure:n=>{const r=YA(n);switch(r._tag){case"Left":return ek(()=>t(r.left));case"Right":return bt(r.right)}},onSuccess:D})),va=S(2,(e,t)=>Nr(n=>rr(n(e),{onFailure:r=>{const s=Te(r);return rr(t(s),{onFailure:i=>Te(Xt(r,i)),onSuccess:()=>s})},onSuccess:r=>{const s=Pe(r);return zt(t(s),s)}}))),aS=S(2,(e,t)=>va(e,fS({onFailure:n=>G$(n)?Cs(t(NJ(n))):Ze,onSuccess:()=>Ze}))),i9=S(2,(e,t)=>u9(e,t,D)),o9=e=>a9(e,de),a9=S(2,(e,t)=>hi(e,{onFailure:n=>fh(t(n)),onSuccess:D})),D=e=>{const t=new iL(nn);return t.effect_instruction_i0=e,t},oe=e=>{const t=new $t(Dy);return t.commit=e,t},N=e=>{const t=new $t(E2);return t.effect_instruction_i0=e,t},cS=S(e=>e.length===3||e.length===2&&!(So(e[1])&&"onlyEffect"in e[1]),(e,t)=>P(e,n=>{const r=typeof t=="function"?t(n):t;return Ts(r)?Vn(r,n):v2(r)?Fr(s=>{r.then(i=>s(D(n)),i=>s(lt(new bL(i))))}):D(n)})),c9=e=>xe(t=>{const n=t.getFiberRef(D0),r=v(n,Ke(()=>t.scope()));return e(fd(D0,z(r)))}),u9=S(3,(e,t,n)=>rr(e,{onFailure:r=>QA(r).length>0?bt(J2(AJ(r))):t(),onSuccess:n})),cd=e=>{const t=new $t(Ku);return t.effect_instruction_i0=UA(Ju),t.effect_instruction_i1=()=>e,t},Nr=e=>oL(e,function(){const t=new $t(Ku);return t.effect_instruction_i0=UA(Ju),t.effect_instruction_i1=n=>BA(n)?vn(()=>this.effect_instruction_i0(tk)):vn(()=>this.effect_instruction_i0(cd)),t}),Ze=D(void 0),l9=e=>{const t=new $t(Ku);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},hL=S(2,(e,t)=>P(t,n=>n?v(e,pe(z)):D(L()))),nk=e=>{const t=new $t(lg);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},f9=function(){const e=arguments.length===1?arguments[0]:arguments[1].bind(arguments[0]);return oe(()=>{const t=new $t(kf);return t.effect_instruction_i0=e(v),t})},h9=S(2,(e,t)=>{const n=new $t(Ku);return n.effect_instruction_i0=t,n.effect_instruction_i1=()=>e,n}),ud=e=>{const t=new $t(em);return typeof(e==null?void 0:e.priority)<"u"?I9(t,e.priority):t},dL=S(2,(e,t)=>P(e,n=>pe(t,r=>[n,r]))),rk=S(2,(e,t)=>P(e,n=>Vn(t,n))),zt=S(2,(e,t)=>P(e,()=>t)),pL=S(3,(e,t,n)=>P(e,r=>pe(t,s=>n(r,s)))),am=Fr(()=>{const e=setInterval(()=>{},2147483647);return N(()=>clearInterval(e))}),sk=e=>P(rS,t=>v(e,hh(t))),hh=S(2,(e,t)=>P(e.interruptAsFork(t),()=>e.await)),d9={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return q(this,arguments)}},p9={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return q(this,arguments)}},m9={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return q(this,arguments)}},g9={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return q(this,arguments)}},mL={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return q(this,arguments)}},gL={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return q(this,arguments)}},y9={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return q(this,arguments)}},S9={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return q(this,arguments)}},_9="effect/FiberRef",v9=Symbol.for(_9),b9={_A:e=>e},ik=e=>xe(t=>Pe(t.getFiberRef(e))),ld=S(2,(e,t)=>P(ik(e),t)),wC=S(2,(e,t)=>w9(e,()=>[void 0,t])),w9=S(2,(e,t)=>xe(n=>{const[r,s]=t(n.getFiberRef(e));return n.setFiberRef(e,s),D(r)})),fd=S(3,(e,t,n)=>X$(rk(ik(t),wC(t,n)),()=>e,r=>wC(t,r))),$9=S(3,(e,t,n)=>ld(t,r=>fd(e,t,n(r)))),cr=(e,t)=>Zu(e,{differ:AA(),fork:(t==null?void 0:t.fork)??de,join:t==null?void 0:t.join}),k9=e=>{const t=X7();return Zu(e,{differ:t,fork:t.empty})},E9=e=>{const t=Z7(AA());return Zu(e,{differ:t,fork:t.empty})},yL=e=>{const t=Y7();return Zu(e,{differ:t,fork:t.empty})},Zu=(e,t)=>({...Yh,[v9]:b9,initial:e,commit(){return ik(this)},diff:(r,s)=>t.differ.diff(r,s),combine:(r,s)=>t.differ.combine(r,s),patch:r=>s=>t.differ.patch(r,s),fork:t.fork,join:t.join??((r,s)=>s)}),O9=e=>Zu(e,{differ:pC,fork:pC.empty}),di=ge(Symbol.for("effect/FiberRef/currentContext"),()=>yL(zy())),hd=ge(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>cr(0)),SL=ge(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>cr(2048)),T9=ge(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>cr(H$())),C9=ge(Symbol.for("effect/FiberRef/currentLogLevel"),()=>cr(mL)),R9=ge(Symbol.for("effect/FiberRef/currentLogSpan"),()=>cr(iu())),I9=S(2,(e,t)=>fd(e,hd,t)),P9=ge(Symbol.for("effect/FiberRef/currentConcurrency"),()=>cr("unbounded")),F9=ge(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>cr(!0)),N9=ge(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>cr(z(gL))),L0=ge(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>E9(pa())),D0=ge(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>cr(L(),{fork:()=>L(),join:(e,t)=>e})),vp=ge(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>cr(uu,{fork:()=>uu,join:(e,t)=>e})),$C=Symbol.for("effect/Scope"),kC=Symbol.for("effect/CloseableScope"),_L=(e,t)=>e.addFinalizer(()=>Cs(t)),j0=(e,t)=>e.addFinalizer(t),bg=(e,t)=>e.close(t),uS=(e,t)=>e.fork(t),ok=function(){class e extends globalThis.Error{commit(){return lt(this)}toJSON(){return{...this}}[Me](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?eS(lu(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,b8),e}(),vL=(e,t)=>{class n extends ok{constructor(){super(...arguments);u(this,"_tag",t)}}return Object.assign(n.prototype,e),n.prototype.name=t,n},EC=Symbol.for("effect/Cause/errors/RuntimeException"),x9=vL({[EC]:EC},"RuntimeException"),M9=Symbol.for("effect/Cause/errors/InterruptedException"),A9=e=>G(e,M9),OC=Symbol.for("effect/Cause/errors/NoSuchElement"),lS=vL({[OC]:OC},"NoSuchElementException"),TC=Symbol.for("effect/Cause/errors/UnknownException"),bL=function(){class e extends ok{constructor(r,s){super(s??"An unknown error occurred",{cause:r});u(this,"cause");u(this,"_tag","UnknownException");u(this,"error");this.cause=r,this.error=r}}return Object.assign(e.prototype,{[TC]:TC,name:"UnknownException"}),e}(),ak=e=>Ts(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),L9=e=>e._tag==="Failure",cm=S(2,(e,t)=>{switch(e._tag){case tn:return Te(e.effect_instruction_i0);case nn:return Pe(t)}}),fv=e=>cm(e,void 0),Zo=(e,t)=>U9(e,t!=null&&t.parallel?co:Xt),wL=e=>Te(Bn(e)),dh=e=>Te(lu(e)),Te=e=>{const t=new sL(tn);return t.effect_instruction_i0=e,t},D9=S(2,(e,t)=>{switch(e._tag){case tn:return Te(e.effect_instruction_i0);case nn:return t(e.effect_instruction_i0)}}),j9=e=>v(e,D9(de)),B9=e=>Te(Wr(e)),um=S(2,(e,t)=>{switch(e._tag){case tn:return Te(e.effect_instruction_i0);case nn:return Pe(t(e.effect_instruction_i0))}}),fS=S(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case tn:return t(e.effect_instruction_i0);case nn:return n(e.effect_instruction_i0)}}),B0=S(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case tn:return t(e.effect_instruction_i0);case nn:return n(e.effect_instruction_i0)}}),Pe=e=>{const t=new iL(nn);return t.effect_instruction_i0=e,t},Nn=Pe(void 0),z9=S(2,(e,t)=>ck(e,t,{onSuccess:(n,r)=>[n,r],onFailure:Xt})),$L=S(2,(e,t)=>ck(e,t,{onSuccess:(n,r)=>r,onFailure:Xt})),ck=S(3,(e,t,{onFailure:n,onSuccess:r})=>{switch(e._tag){case tn:switch(t._tag){case nn:return Te(e.effect_instruction_i0);case tn:return Te(n(e.effect_instruction_i0,t.effect_instruction_i0))}case nn:switch(t._tag){case nn:return Pe(r(e.effect_instruction_i0,t.effect_instruction_i0));case tn:return Te(t.effect_instruction_i0)}}}),U9=(e,t)=>{const n=tu(e);return fi(n)?v(Ws(n),F$(v(Ss(n),um(qt)),(r,s)=>v(r,ck(s,{onSuccess:(i,o)=>v(i,gn(o)),onFailure:t}))),um(li),um(r=>Xs(r)),z):L()},hS=e=>({...Yh,[GJ]:QJ,state:td(YJ([])),commit(){return ba(this)},blockingOn:e}),uk=()=>P(rS,e=>V9(e)),V9=e=>N(()=>hS(e)),ba=e=>Fr(t=>{const n=Et(e.state);switch(n._tag){case tS:return t(n.effect);case od:return n.joiners.push(t),H9(e,t)}},e.blockingOn),dS=S(2,(e,t)=>N(()=>{const n=Et(e.state);switch(n._tag){case tS:return!1;case od:{nd(e.state,tL(t));for(let r=0,s=n.joiners.length;r<s;r++)n.joiners[r](t);return!0}}})),q9=S(2,(e,t)=>dS(e,t)),kL=S(2,(e,t)=>dS(e,bt(t))),EL=S(2,(e,t)=>dS(e,lL(t))),K9=e=>N(()=>Et(e.state)._tag===tS),lk=S(2,(e,t)=>dS(e,D(t))),fk=(e,t)=>{const n=Et(e.state);if(n._tag===od){nd(e.state,tL(t));for(let r=0,s=n.joiners.length;r<s;r++)n.joiners[r](t)}},H9=(e,t)=>N(()=>{const n=Et(e.state);if(n._tag===od){const r=n.joiners.indexOf(t);r>=0&&n.joiners.splice(r,1)}}),W9=xe(e=>Pe(e.currentContext)),OL=()=>W9,dd=e=>P(OL(),e),TL=S(2,(e,t)=>fd(di,t)(e)),hk=S(2,(e,t)=>$9(di,n=>ed(n,t))(e)),J9=S(2,(e,t)=>dd(n=>TL(e,t(n)))),dk=e=>{const t=e.currentSpan;return t!==void 0&&t._tag==="Span"?z(t):L()},G9="effect/Clock",CC=Symbol.for(G9),pS=La("effect/Clock"),Q9=2**31-1,RC={unsafeSchedule(e,t){const n=b0(t);if(n>Q9)return l0;let r=!1;const s=setTimeout(()=>{r=!0,e()},n);return()=>(clearTimeout(s),!r)}},IC=function(){const e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;if(typeof performance.timeOrigin=="number"&&performance.timeOrigin===0)return()=>BigInt(Math.round(performance.now()*1e6));const t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6));return()=>t+BigInt(Math.round(performance.now()*1e6))}(),Y9=function(){const e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return IC;const t=IC()-e.bigint();return()=>t+e.bigint()}();var xP;let X9=(xP=CC,class{constructor(){u(this,xP,CC);u(this,"currentTimeMillis",N(()=>this.unsafeCurrentTimeMillis()));u(this,"currentTimeNanos",N(()=>this.unsafeCurrentTimeNanos()))}unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return Y9()}scheduler(){return D(RC)}sleep(t){return Fr(n=>{const r=RC.unsafeSchedule(()=>n(Ze),t);return Cs(N(r))})}});const Z9=()=>new X9,du=J8,z0=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),CL="And",RL="Or",IL="InvalidData",PL="MissingData",FL="SourceUnavailable",NL="Unsupported",eG="effect/ConfigError",PC=Symbol.for(eG),el={_tag:"ConfigError",[PC]:PC},xL=(e,t)=>{const n=Object.create(el);return n._op=CL,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),n},ML=(e,t)=>{const n=Object.create(el);return n._op=RL,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),n},tG=(e,t,n={pathDelim:"."})=>{const r=Object.create(el);return r._op=IL,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Invalid data at ${v(this.path,Hu(n.pathDelim))}: "${this.message}")`}}),r},wa=(e,t,n={pathDelim:"."})=>{const r=Object.create(el);return r._op=PL,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Missing data at ${v(this.path,Hu(n.pathDelim))}: "${this.message}")`}}),r},nG=(e,t,n,r={pathDelim:"."})=>{const s=Object.create(el);return s._op=FL,s.path=e,s.message=t,s.cause=n,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Source unavailable at ${v(this.path,Hu(r.pathDelim))}: "${this.message}")`}}),s},rG=(e,t,n={pathDelim:"."})=>{const r=Object.create(el);return r._op=NL,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${v(this.path,Hu(n.pathDelim))}: "${this.message}")`}}),r},zo=S(2,(e,t)=>{switch(e._op){case CL:return xL(zo(e.left,t),zo(e.right,t));case RL:return ML(zo(e.left,t),zo(e.right,t));case IL:return tG([...t,...e.path],e.message);case PL:return wa([...t,...e.path],e.message);case FL:return nG([...t,...e.path],e.message,e.cause);case NL:return rG([...t,...e.path],e.message)}}),sG={_tag:"Empty"},hv=S(2,(e,t)=>{let n=W$(t),r=e;for(;FA(n);){const s=n.head;switch(s._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=Sa(s.first,Sa(s.second,n.tail));break}case"MapName":{r=Yo(r,s.f),n=n.tail;break}case"Nested":{r=hg(r,s.name),n=n.tail;break}case"Unnested":{if(v(Ef(r),rH(s.name)))r=da(r),n=n.tail;else return re(wa(r,`Expected ${s.name} to be in path in ConfigProvider#unnested`));break}}}return qe(r)}),iG="Constant",oG="Fail",aG="Fallback",cG="Described",uG="Lazy",lG="MapOrFail",fG="Nested",hG="Primitive",dG="Sequence",pG="HashMap",mG="ZipWith";var FC={};const wg=(e,t)=>[...e,...t],gG="effect/ConfigProvider",NC=Symbol.for(gG),yG=La("effect/ConfigProvider"),SG="effect/ConfigProviderFlat",xC=Symbol.for(SG),_G=e=>({[NC]:NC,pipe(){return q(this,arguments)},...e}),vG=e=>({[xC]:xC,patch:e.patch,load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:e.enumerateChildren}),bG=e=>_G({load:t=>P(pr(e,pa(),t,!1),n=>Ft(Ef(n),{onNone:()=>lt(wa(pa(),`Expected a single value having structure: ${t}`)),onSome:D})),flattened:e}),wG=e=>{const{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),r=c=>v(c,Hu(t)),s=c=>c.split(t),i=()=>typeof process<"u"&&"env"in process&&typeof FC=="object"?FC:{};return bG(vG({load:(c,l,f=!0)=>{const h=r(c),d=i(),p=h in d?z(d[h]):L();return v(p,oS(()=>wa(c,`Expected ${h} to exist in the process context`)),P(_=>TG(_,c,l,n,f)))},enumerateChildren:c=>N(()=>{const l=i(),d=Object.keys(l).map(p=>s(p.toUpperCase())).filter(p=>{for(let _=0;_<c.length;_++){const b=v(c,Y2(_)),w=p[_];if(w===void 0||b!==w)return!1}return!0}).flatMap(p=>p.slice(c.length,c.length+1));return AW(d)}),patch:sG}))},$G=(e,t,n,r)=>{const s=nC(n.length,c=>c>=r.length?L():z([e(c),c+1])),i=nC(r.length,c=>c>=n.length?L():z([t(c),c+1])),o=wg(n,s),a=wg(r,i);return[o,a]},kG=(e,t)=>{let n=t;if(n._tag==="Nested"){const r=e.slice();for(;n._tag==="Nested";)r.push(n.name),n=n.config;return r}return e},pr=(e,t,n,r)=>{const s=n;switch(s._tag){case iG:return D(Ur(s.value));case cG:return oe(()=>pr(e,t,s.config,r));case oG:return lt(wa(t,s.message));case aG:return v(oe(()=>pr(e,t,s.first,r)),lh(i=>s.condition(i)?v(pr(e,t,s.second,r),lh(o=>lt(ML(i,o)))):lt(i)));case uG:return oe(()=>pr(e,t,s.config(),r));case lG:return oe(()=>v(pr(e,t,s.original,r),P(Js(i=>v(s.mapOrFail(i),oS(zo(kG(t,s.original))))))));case fG:return oe(()=>pr(e,wg(t,Ur(s.name)),s.config,r));case hG:return v(hv(t,e.patch),P(i=>v(e.load(i,s,r),P(o=>{if(o.length===0){const a=v(mH(i),Ke(()=>"<n/a>"));return lt(wa([],`Expected ${s.description} with name ${a}`))}return D(o)}))));case dG:return v(hv(t,e.patch),P(i=>v(e.enumerateChildren(i),P(RG),P(o=>o.length===0?oe(()=>pe(pr(e,t,s.config,!0),Ur)):v(Js(o,a=>pr(e,lH(t,`[${a}]`),s.config,!0)),pe(a=>{const c=$H(a);return c.length===0?Ur(pa()):Ur(c)}))))));case pG:return oe(()=>v(hv(t,e.patch),P(i=>v(e.enumerateChildren(i),P(o=>v(o,Js(a=>pr(e,wg(i,Ur(a)),s.valueConfig,r)),pe(a=>a.length===0?Ur(H$()):v(CG(a),Yo(c=>GW(tC(Fe(o),c)))))))))));case mG:return oe(()=>v(pr(e,t,s.left,r),hu,P(i=>v(pr(e,t,s.right,r),hu,P(o=>{if(fn(i)&&fn(o))return lt(xL(i.left,o.left));if(fn(i)&&Hs(o))return lt(i.left);if(Hs(i)&&fn(o))return lt(o.left);if(Hs(i)&&Hs(o)){const a=v(t,Hu(".")),c=EG(t,a),[l,f]=$G(c,c,v(i.right,Yo(qe)),v(o.right,Yo(qe)));return v(l,tC(f),Js(([h,d])=>v(dL(h,d),pe(([p,_])=>s.zip(p,_)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},EG=(e,t)=>n=>re(wa(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),OG=(e,t)=>e.split(new RegExp(`\\s*${z0(t)}\\s*`)),TG=(e,t,n,r,s)=>s?v(OG(e,r),Js(i=>n.parse(i.trim())),oS(zo(t))):v(n.parse(e),fL({onFailure:zo(t),onSuccess:Ur})),CG=e=>Object.keys(e[0]).map(t=>e.map(n=>n[t])),RG=e=>v(Js(e,PG),fL({onFailure:()=>pa(),onSuccess:sh(du)}),hu,pe(H8)),IG=/^(\[(\d+)\])$/,PG=e=>{const t=e.match(IG);if(t!==null){const n=t[2];return v(n!==void 0&&n.length>0?z(n):L(),_o(FG))}return L()},FG=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?L():z(t)},MC=Symbol.for("effect/Console"),pk=La("effect/Console"),NG={[MC]:MC,assert(e,...t){return N(()=>{console.assert(e,...t)})},clear:N(()=>{console.clear()}),count(e){return N(()=>{console.count(e)})},countReset(e){return N(()=>{console.countReset(e)})},debug(...e){return N(()=>{console.debug(...e)})},dir(e,t){return N(()=>{console.dir(e,t)})},dirxml(...e){return N(()=>{console.dirxml(...e)})},error(...e){return N(()=>{console.error(...e)})},group(e){return e!=null&&e.collapsed?N(()=>console.groupCollapsed(e==null?void 0:e.label)):N(()=>console.group(e==null?void 0:e.label))},groupEnd:N(()=>{console.groupEnd()}),info(...e){return N(()=>{console.info(...e)})},log(...e){return N(()=>{console.log(...e)})},table(e,t){return N(()=>{console.table(e,t)})},time(e){return N(()=>console.time(e))},timeEnd(e){return N(()=>console.timeEnd(e))},timeLog(e,...t){return N(()=>{console.timeLog(e,...t)})},trace(...e){return N(()=>{console.trace(...e)})},warn(...e){return N(()=>{console.warn(...e)})},unsafe:console},xG="effect/Random",AC=Symbol.for(xG),MG=La("effect/Random");var MP;let AG=(MP=AC,class{constructor(t){u(this,"seed");u(this,MP,AC);u(this,"PRNG");this.seed=t,this.PRNG=new o8(t)}get next(){return N(()=>this.PRNG.number())}get nextBoolean(){return pe(this.next,t=>t>.5)}get nextInt(){return N(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,n){return pe(this.next,r=>(n-t)*r+t)}nextIntBetween(t,n){return N(()=>this.PRNG.integer(n-t)+t)}shuffle(t){return LG(t,n=>this.nextIntBetween(0,n))}});const LG=(e,t)=>oe(()=>v(N(()=>Array.from(e)),P(n=>{const r=[];for(let s=n.length;s>=2;s=s-1)r.push(s);return v(r,iS(s=>v(t(s),pe(i=>DG(n,s-1,i)))),Vn(tu(n)))}))),DG=(e,t,n)=>{const r=e[t];return e[t]=e[n],e[n]=r,e},jG=e=>new AG(W(e)),LC=Symbol.for("effect/Tracer"),BG=e=>({[LC]:LC,...e}),AL=La("effect/Tracer"),LL=La("effect/ParentSpan"),DC=function(){const e="abcdef0123456789",t=e.length;return function(n){let r="";for(let s=0;s<n;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}}();let zG=class{constructor(t,n,r,s,i,o){u(this,"name");u(this,"parent");u(this,"context");u(this,"links");u(this,"startTime");u(this,"kind");u(this,"_tag","Span");u(this,"spanId");u(this,"traceId","native");u(this,"sampled",!0);u(this,"status");u(this,"attributes");u(this,"events",[]);this.name=t,this.parent=n,this.context=r,this.links=s,this.startTime=i,this.kind=o,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:DC(32),this.spanId=DC(16)}end(t,n){this.status={_tag:"Ended",endTime:t,exit:n,startTime:this.status.startTime}}attribute(t,n){this.attributes.set(t,n)}event(t,n,r){this.events.push([t,n,r??{}])}};const UG=BG({span:(e,t,n,r,s,i)=>new zG(e,t,n,r,s,i),context:e=>e()}),VG=v(zy(),xl(pS,Z9()),xl(pk,NG),xl(MG,jG(Math.random())),xl(yG,wG()),xl(AL,UG)),ph=ge(Symbol.for("effect/DefaultServices/currentServices"),()=>yL(VG)),qG=e=>{const t=ks(e);return DL(n=>n.sleep(t))},KG=e=>xe(t=>e(t.currentDefaultServices)),DL=e=>KG(t=>e(t.unsafeMap.get(pS.key))),HG=DL(e=>e.currentTimeMillis),Gs=uk,bn=ba,WG=kL,jC=K9,Di=lk,JG=Qh,GG=w8;let pd=class extends GG{};const jL="Sequential",BL="Parallel",QG="ParallelN",md={_tag:jL},YG={_tag:BL},XG=e=>({_tag:QG,parallelism:e}),ZG=e=>e._tag===jL,eQ=e=>e._tag===BL,$g=md,U0=YG,V0=XG;function tQ(e){return new uo(e)}function nQ(){return tQ(new Map)}const BC=Symbol.for("effect/FiberRefs");var AP;let uo=(AP=BC,class{constructor(t){u(this,"locals");u(this,AP,BC);this.locals=t}pipe(){return q(this,arguments)}});const rQ=(e,t,n,r=!1)=>{const s=e;let i=t,o=n,a=r,c;for(;c===void 0;)if(Nt(i)&&Nt(o)){const l=jn(i)[0],f=da(i),h=jn(o)[0],d=jn(o)[1],p=da(o);l.startTimeMillis<h.startTimeMillis?(o=p,a=!0):l.startTimeMillis>h.startTimeMillis?i=f:l.id<h.id?(o=p,a=!0):l.id>h.id?i=f:c=[d,a]}else c=[s.initial,!0];return c},sQ=S(3,(e,t,n)=>{const r=new Map(e.locals);return n.locals.forEach((s,i)=>{const o=s[0][1];if(!s[0][0][ie](t)){if(!r.has(i)){if(Y(o,i.initial))return;r.set(i,[[t,i.join(i.initial,o)]]);return}const a=r.get(i),[c,l]=rQ(i,a,s);if(l){const f=i.diff(c,o),h=a[0][1],d=i.join(h,i.patch(f)(h));if(!Y(h,d)){let p;const _=a[0][0];_[ie](t)?p=[[_,d],...a.slice(1)]:p=[[t,d],...a],r.set(i,p)}}}}),new uo(r)}),iQ=S(2,(e,t)=>{const n=new Map;return zL(e,n,t),new uo(n)}),zL=(e,t,n)=>{e.locals.forEach((r,s)=>{const i=r[0][1],o=s.patch(s.fork)(i);Y(i,o)?t.set(s,r):t.set(s,[[n,o],...r])})},UL=S(2,(e,t)=>{const n=new Map(e.locals);return n.delete(t),new uo(n)}),oQ=S(2,(e,t)=>e.locals.has(t)?z(jn(e.locals.get(t))[1]):L()),mh=S(2,(e,t)=>v(oQ(e,t),Ke(()=>t.initial))),q0=S(2,(e,{fiberId:t,fiberRef:n,value:r})=>{if(e.locals.size===0)return new uo(new Map([[n,[[t,r]]]]));const s=new Map(e.locals);return K0(s,t,n,r),new uo(s)}),K0=(e,t,n,r)=>{const s=e.get(n)??[];let i;if(Nt(s)){const[o,a]=jn(s);if(o[ie](t)){if(Y(a,r))return;i=[[t,r],...s.slice(1)]}else i=[[t,r],...s]}else i=[[t,r]];e.set(n,i)},aQ=S(2,(e,{entries:t,forkAs:n})=>{if(e.locals.size===0)return new uo(new Map(t));const r=new Map(e.locals);return n!==void 0&&zL(e,r,n),t.forEach(([s,i])=>{i.length===1?K0(r,i[0][0],s,i[0][1]):i.forEach(([o,a])=>{K0(r,o,s,a)})}),new uo(r)}),cQ=mh,uQ=aQ,lQ=nQ,VL="Empty",qL="Add",KL="Remove",HL="Update",WL="AndThen",fQ={_tag:VL},JL=(e,t)=>{const n=new Map(e.locals);let r=fQ;for(const[s,i]of t.locals.entries()){const o=jn(i)[1],a=n.get(s);if(a!==void 0){const c=jn(a)[1];Y(c,o)||(r=dv({_tag:HL,fiberRef:s,patch:s.diff(c,o)})(r))}else r=dv({_tag:qL,fiberRef:s,value:o})(r);n.delete(s)}for(const[s]of n.entries())r=dv({_tag:KL,fiberRef:s})(r);return r},dv=S(2,(e,t)=>({_tag:WL,first:e,second:t})),GL=S(3,(e,t,n)=>{let r=n,s=Ur(e);for(;Nt(s);){const i=jn(s),o=da(s);switch(i._tag){case VL:{s=o;break}case qL:{r=q0(r,{fiberId:t,fiberRef:i.fiberRef,value:i.value}),s=o;break}case KL:{r=UL(r,i.fiberRef),s=o;break}case HL:{const a=mh(r,i.fiberRef);r=q0(r,{fiberId:t,fiberRef:i.fiberRef,value:i.fiberRef.patch(i.patch)(a)}),s=o;break}case WL:{s=hg(i.first)(hg(i.second)(o));break}}}return r}),gh=JL,yh=GL,mS="effect/FiberStatus",$a=Symbol.for(mS),kg="Done",zC="Running",UC="Suspended",hQ=gt(`${mS}-${kg}`);var LP;let dQ=class{constructor(){u(this,LP,$a);u(this,"_tag",kg)}[(LP=$a,ae)](){return hQ}[ie](t){return mk(t)&&t._tag===kg}};var DP;let pQ=class{constructor(t){u(this,"runtimeFlags");u(this,DP,$a);u(this,"_tag",zC);this.runtimeFlags=t}[(DP=$a,ae)](){return v(W(mS),Se(W(this._tag)),Se(W(this.runtimeFlags)),st(this))}[ie](t){return mk(t)&&t._tag===zC&&this.runtimeFlags===t.runtimeFlags}};var jP;let mQ=class{constructor(t,n){u(this,"runtimeFlags");u(this,"blockingOn");u(this,jP,$a);u(this,"_tag",UC);this.runtimeFlags=t,this.blockingOn=n}[(jP=$a,ae)](){return v(W(mS),Se(W(this._tag)),Se(W(this.runtimeFlags)),Se(W(this.blockingOn)),st(this))}[ie](t){return mk(t)&&t._tag===UC&&this.runtimeFlags===t.runtimeFlags&&Y(this.blockingOn,t.blockingOn)}};const gQ=new dQ,yQ=e=>new pQ(e),SQ=(e,t)=>new mQ(e,t),mk=e=>G(e,$a),_Q=e=>e._tag===kg,vQ=gQ,QL=yQ,bQ=SQ,wQ=_Q,$Q=d9,kQ=p9,EQ=m9,OQ=g9,TQ=mL,CQ=gL,RQ=y9,IQ=S9,PQ=v(du,W2(e=>e.ordinal)),FQ=G8(PQ),NQ=e=>{switch(e){case"All":return $Q;case"Debug":return CQ;case"Error":return EQ;case"Fatal":return kQ;case"Info":return TQ;case"Trace":return RQ;case"None":return IQ;case"Warning":return OQ}},xQ=Symbol.for("effect/Micro"),Eg=Symbol.for("effect/Micro/runSymbol"),YL={...JG,_op:"Micro",[xQ]:{_A:de,_E:de,_R:de},[Symbol.iterator](){return new nS(new Jh(this))}},VC=Symbol.for("effect/Micro/MicroCause"),MQ={_E:de};var BP;let XL=class extends globalThis.Error{constructor(n,r,s){const i=`MicroCause.${n}`;let o,a,c;if(r instanceof globalThis.Error){o=`(${i}) ${r.name}`,a=r.message;const l=a.split(`
`).length;c=r.stack?`(${i}) ${r.stack.split(`
`).slice(0,l+3).join(`
`)}`:`${o}: ${a}`}else o=i,a=Xc(r,0),c=`${o}: ${a}`;s.length>0&&(c+=`
    ${s.join(`
    `)}`);super(a);u(this,"_tag");u(this,"traces");u(this,BP);this._tag=n,this.traces=s,this[VC]=MQ,this.name=o,this.stack=c}pipe(){return q(this,arguments)}toString(){return this.stack}[(BP=VC,Me)](){return this.stack}},AQ=class extends XL{constructor(n,r=[]){super("Die",n,r);u(this,"defect");this.defect=n}};const LQ=(e,t=[])=>new AQ(e,t);let DQ=class extends XL{constructor(t=[]){super("Interrupt","interrupted",t)}};const jQ=(e=[])=>new DQ(e),BQ=re(jQ()),zQ=e=>re(LQ(e)),UQ=Symbol.for("effect/Micro/Env"),VQ={[UQ]:{_R:de},pipe(){return q(this,arguments)}},ZL=e=>{const t=Object.create(VQ);return t.refs=e,t},qQ=()=>{const e=new AbortController,t=Object.create(null);return t[tD.key]=e,t[nD.key]=e.signal,t[sD.key]=new eD,ZL(t)},gk=S(2,(e,t)=>t.key in e.refs?e.refs[t.key]:t.initial),KQ=S(3,(e,t,n)=>{const r=Object.assign(Object.create(null),e.refs);return r[t.key]=n,ZL(r)}),HQ=e=>ZQ((t,n)=>n(qe(gk(t,e)))),WQ="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);let eD=class{constructor(){u(this,"tasks",[]);u(this,"running",!1);u(this,"afterScheduled",()=>{this.running=!1,this.runTasks()})}scheduleTask(t,n){this.tasks.push(t),this.running||(this.running=!0,WQ(this.afterScheduled))}runTasks(){const t=this.tasks;this.tasks=[];for(let n=0,r=t.length;n<r;n++)t[n]()}shouldYield(t){return!1}flush(){for(;this.tasks.length>0;)this.runTasks()}};const qC=Symbol.for("effect/Micro/EnvRef"),JQ={...YL,[qC]:qC,[Eg](e,t){HQ(this)[Eg](e,t)}},tl=(e,t)=>ge(e,()=>{const n=Object.create(JQ);return n.key=e,n.initial=t(),n}),tD=tl("effect/Micro/currentAbortController",()=>{}),nD=tl("effect/Micro/currentAbortSignal",()=>{}),GQ=tl("effect/Micro/currentContext",()=>zy()),rD=tl("effect/Micro/currentMaxDepthBeforeYield",()=>2048),QQ=tl("effect/Micro/currentInterruptible",()=>!0),sD=tl("effect/Micro/currentScheduler",()=>new eD),qa=ge("effect/Micro/microDepthState",()=>({depth:0,maxDepthBeforeYield:rD.initial})),YQ=e=>{const t=Object.create(YL);return t[Eg]=e,t},XQ=(e,t)=>YQ(function n(r,s){if(r.refs[QQ.key]!==!1&&r.refs[nD.key].aborted)return s(BQ);qa.depth++,qa.depth===1&&(qa.maxDepthBeforeYield=gk(r,rD));const i=r.refs[sD.key];if(qa.depth>=qa.maxDepthBeforeYield||i.shouldYield(r))i.scheduleTask(()=>n(r,s),0);else try{e(r,s)}catch(o){s(zQ(o))}qa.depth--}),ZQ=e=>XQ(e),Og=Symbol.for("effect/Readable"),iD=Symbol.for("effect/Ref"),oD={_A:e=>e};var zP,UP,VP;class eY extends(VP=pd,UP=iD,zP=Og,VP){constructor(n){super();u(this,"ref");u(this,UP,oD);u(this,zP,Og);u(this,"get");this.ref=n,this.get=N(()=>Et(this.ref))}commit(){return this.get}modify(n){return N(()=>{const r=Et(this.ref),[s,i]=n(r);return r!==i&&nd(i)(this.ref),s})}}const aD=e=>new eY(td(e)),Tg=e=>N(()=>aD(e)),Xi=e=>e.get,Sh=S(2,(e,t)=>e.modify(()=>[void 0,t])),cD=S(2,(e,t)=>e.modify(t)),H0=S(2,(e,t)=>e.modify(n=>[void 0,t(n)])),uD=Tg,tY=Xi,Ml=cD,nY=Sh,rY=H0;let lD=class{constructor(){u(this,"buckets",[])}scheduleTask(t,n){const r=this.buckets.length;let s,i=0;for(;i<r&&this.buckets[i][0]<=n;i++)s=this.buckets[i];s&&s[0]===n?s[1].push(t):i===r?this.buckets.push([n,[t]]):this.buckets.splice(i,0,[n,[t]])}},sY=class{constructor(t){u(this,"maxNextTickBeforeTimer");u(this,"running",!1);u(this,"tasks",new lD);this.maxNextTickBeforeTimer=t}starveInternal(t){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[r,s]of n)for(let i=0;i<s.length;i++)s[i]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(SL)?t.getFiberRef(hd):!1}scheduleTask(t,n){this.tasks.scheduleTask(t,n),this.running||(this.running=!0,this.starve())}};const fD=ge(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new sY(2048));let hD=class{constructor(){u(this,"tasks",new lD);u(this,"deferred",!1)}scheduleTask(t,n){this.deferred?fD.scheduleTask(t,n):this.tasks.scheduleTask(t,n)}shouldYield(t){return t.currentOpCount>t.getFiberRef(SL)?t.getFiberRef(hd):!1}flush(){for(;this.tasks.buckets.length>0;){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[n,r]of t)for(let s=0;s<r.length;s++)r[s]()}this.deferred=!0}};const yk=ge(Symbol.for("effect/FiberRef/currentScheduler"),()=>cr(fD)),dD=ge(Symbol.for("effect/FiberRef/currentRequestMap"),()=>cr(new Map)),KC=(e,t,n,r)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return ld(P9,s=>s==="unbounded"?n():s>1?r(s):t());default:return e>1?r(e):t()}},iY=qG,oY=HG,aY=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`,cY=aY,pD="effect/MetricLabel",W0=Symbol.for(pD);var qP;let uY=class{constructor(t,n){u(this,"key");u(this,"value");u(this,qP,W0);u(this,"_hash");this.key=t,this.value=n,this._hash=gt(pD+this.key+this.value)}[(qP=W0,ae)](){return this._hash}[ie](t){return fY(t)&&this.key===t.key&&this.value===t.value}pipe(){return q(this,arguments)}};const lY=(e,t)=>new uY(e,t),fY=e=>G(e,W0),hY=e=>pe(e,z),dY=e=>bY(e,mY,JL),mD=S(2,(e,t)=>hi(e,{onFailure:n=>D(t.onFailure(n)),onSuccess:n=>D(t.onSuccess(n))})),pY=e=>{const t=P(P(e,()=>ud()),()=>t);return t},mY=xe(e=>D(e.getFiberRefs())),gY=e=>mD(e,{onFailure:f0,onSuccess:f0}),HC=S(2,(e,t)=>rr(e,{onFailure:n=>cL(()=>t(n)),onSuccess:D})),yY=e=>pe(e,t=>!t),SY=e=>$Y((t,n)=>v(e,GL(t,n))),_Y=iY,vY=D(L()),bY=S(3,(e,t,n)=>P(t,r=>P(e,s=>pe(t,i=>[n(r,i),s])))),wY=S(2,(e,t)=>rr(e,{onFailure:n=>zt(t(n),bt(n)),onSuccess:D})),$Y=e=>xe(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),Ze)),kY=S(2,(e,t)=>oe(()=>t()?pe(e,z):D(L()))),EY=L9,OY=Zo,TY=wL,J0=dh,Er=Te,CY=j9,RY=um,Qs=fS,wr=Pe,gD=Nn,WC=z9,_h=$L,Sk="InterruptSignal",_k="Stateful",vk="Resume",bk="YieldNow",pv=e=>({_tag:Sk,cause:e}),lm=e=>({_tag:_k,onFiber:e}),Ka=e=>({_tag:vk,effect:e}),IY=()=>({_tag:bk}),PY="effect/FiberScope",Cg=Symbol.for(PY);var KP;let FY=(KP=Cg,class{constructor(){u(this,KP,Cg);u(this,"fiberId",ao);u(this,"roots",new Set)}add(t,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}});var HP;let NY=(HP=Cg,class{constructor(t,n){u(this,"fiberId");u(this,"parent");u(this,HP,Cg);this.fiberId=t,this.parent=n}add(t,n){this.parent.tell(lm(r=>{r.addChild(n),n.addObserver(()=>{r.removeChild(n)})}))}});const xY=e=>new NY(e.id(),e),wk=ge(Symbol.for("effect/FiberScope/Global"),()=>new FY),MY="effect/Fiber",yD=Symbol.for(MY),SD={_E:e=>e,_A:e=>e},AY={[yD]:SD,pipe(){return q(this,arguments)}},LY="effect/Fiber",DY=Symbol.for(LY),jY=e=>e.await,BY=e=>e.inheritAll,pu=e=>rk(sS(e.await),e.inheritAll);({...Yh,...AY});const To="effect/FiberCurrent",zY="effect/Logger",UY=Symbol.for(zY),VY={_Message:e=>e,_Output:e=>e},$k=e=>({[UY]:VY,log:e,pipe(){return q(this,arguments)}}),qY=$k(({annotations:e,cause:t,date:n,fiberId:r,logLevel:s,message:i,spans:o})=>{const a=n.getTime();let l=[`timestamp=${n.toISOString()}`,`level=${s.label}`,`fiber=${kA(r)}`].join(" ");const f=cH(i);for(let h=0;h<f.length;h++){const d=Xc(f[h]);d.length>0&&(l=l+" message=",l=mv(d,l))}if(t!=null&&t._tag!=="Empty"&&(l=l+" cause=",l=mv(eS(t,{renderErrorCause:!0}),l)),FA(o)){l=l+" ";let h=!0;for(const d of o)h?h=!1:l=l+" ",l=l+v(d,cY(a))}if(YW(e)>0){l=l+" ";let h=!0;for(const[d,p]of e)h?h=!1:l=l+" ",l=l+WY(d),l=l+"=",l=mv(Xc(p),l)}return l}),KY=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,HY=/^[^\s"=]+$/,mv=(e,t)=>t+(e.match(HY)?e:KY(e)),WY=e=>e.replace(/[\s="]/g,"_"),JY=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null;JY&&process.stdout.isTTY;const _D="effect/MetricBoundaries",G0=Symbol.for(_D);var WP;let GY=class{constructor(t){u(this,"values");u(this,WP,G0);u(this,"_hash");this.values=t,this._hash=v(gt(_D),Se(Gh(this.values)))}[(WP=G0,ae)](){return this._hash}[ie](t){return QY(t)&&Y(this.values,t.values)}pipe(){return q(this,arguments)}};const QY=e=>G(e,G0),YY=e=>{const t=v(e,G2(qt(Number.POSITIVE_INFINITY)),EH);return new GY(t)},XY=e=>v(aH(e.count-1,t=>e.start*Math.pow(e.factor,t)),Tn,YY),ZY="effect/MetricKeyType",vD=Symbol.for(ZY),bD="effect/MetricKeyType/Counter",Q0=Symbol.for(bD),eX="effect/MetricKeyType/Frequency",tX=Symbol.for(eX),nX="effect/MetricKeyType/Gauge",rX=Symbol.for(nX),wD="effect/MetricKeyType/Histogram",Y0=Symbol.for(wD),sX="effect/MetricKeyType/Summary",iX=Symbol.for(sX),$D={_In:e=>e,_Out:e=>e};var JP,GP;let oX=class{constructor(t,n){u(this,"incremental");u(this,"bigint");u(this,GP,$D);u(this,JP,Q0);u(this,"_hash");this.incremental=t,this.bigint=n,this._hash=gt(bD)}[(GP=vD,JP=Q0,ae)](){return this._hash}[ie](t){return kD(t)}pipe(){return q(this,arguments)}};var QP,YP;let aX=class{constructor(t){u(this,"boundaries");u(this,YP,$D);u(this,QP,Y0);u(this,"_hash");this.boundaries=t,this._hash=v(gt(wD),Se(W(this.boundaries)))}[(YP=vD,QP=Y0,ae)](){return this._hash}[ie](t){return ED(t)&&Y(this.boundaries,t.boundaries)}pipe(){return q(this,arguments)}};const cX=e=>new oX((e==null?void 0:e.incremental)??!1,(e==null?void 0:e.bigint)??!1),uX=e=>new aX(e),kD=e=>G(e,Q0),lX=e=>G(e,tX),fX=e=>G(e,rX),ED=e=>G(e,Y0),hX=e=>G(e,iX),dX="effect/MetricKey",OD=Symbol.for(dX),pX={_Type:e=>e},mX=N$(Y);var XP;let kk=class{constructor(t,n,r,s=[]){u(this,"name");u(this,"keyType");u(this,"description");u(this,"tags");u(this,XP,pX);u(this,"_hash");this.name=t,this.keyType=n,this.description=r,this.tags=s,this._hash=v(gt(this.name+this.description),Se(W(this.keyType)),Se(Gh(this.tags)))}[(XP=OD,ae)](){return this._hash}[ie](t){return gX(t)&&this.name===t.name&&Y(this.keyType,t.keyType)&&Y(this.description,t.description)&&mX(this.tags,t.tags)}pipe(){return q(this,arguments)}};const gX=e=>G(e,OD),yX=(e,t)=>new kk(e,cX(t),Uy(t==null?void 0:t.description)),SX=(e,t,n)=>new kk(e,uX(t),Uy(n)),_X=S(2,(e,t)=>t.length===0?e:new kk(e.name,e.keyType,e.description,rm(e.tags,t))),JC=Symbol.for("effect/MutableHashMap"),vX={[JC]:JC,[Symbol.iterator](){return new bX(this)},toString(){return rt(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(Ye)}},[Me](){return this.toJSON()},pipe(){return q(this,arguments)}};let bX=class TD{constructor(t){u(this,"self");u(this,"referentialIterator");u(this,"bucketIterator");this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const t=this.referentialIterator.next();return t.done?(this.bucketIterator=new wX(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new TD(this.self)}},wX=class{constructor(t){u(this,"backing");u(this,"currentBucket");this.backing=t}next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}};const $X=()=>{const e=Object.create(vX);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},Fo=S(2,(e,t)=>{if(ag(t)===!1)return e.referential.has(t)?z(e.referential.get(t)):L();const n=t[ae](),r=e.buckets.get(n);return r===void 0?L():kX(e,r,t)}),kX=(e,t,n,r=!1)=>{for(let s=0,i=t.length;s<i;s++)if(n[ie](t[s][0])){const o=t[s][1];return r&&(t.splice(s,1),e.bucketsSize--),z(o)}return L()},Al=S(2,(e,t)=>Ie(Fo(e,t))),Ll=S(3,(e,t,n)=>{if(ag(t)===!1)return e.referential.set(t,n),e;const r=t[ae](),s=e.buckets.get(r);return s===void 0?(e.buckets.set(r,[[t,n]]),e.bucketsSize++,e):(EX(e,s,t),s.push([t,n]),e.bucketsSize++,e)}),EX=(e,t,n)=>{for(let r=0,s=t.length;r<s;r++)if(n[ie](t[r][0])){t.splice(r,1),e.bucketsSize--;return}},OX="effect/MetricState",gd=Symbol.for(OX),CD="effect/MetricState/Counter",X0=Symbol.for(CD),RD="effect/MetricState/Frequency",Z0=Symbol.for(RD),ID="effect/MetricState/Gauge",eb=Symbol.for(ID),PD="effect/MetricState/Histogram",tb=Symbol.for(PD),FD="effect/MetricState/Summary",nb=Symbol.for(FD),yd={_A:e=>e};var ZP,eF;let TX=class{constructor(t){u(this,"count");u(this,eF,yd);u(this,ZP,X0);this.count=t}[(eF=gd,ZP=X0,ae)](){return v(W(CD),Se(W(this.count)),st(this))}[ie](t){return DX(t)&&this.count===t.count}pipe(){return q(this,arguments)}};const CX=N$(Y);var tF,nF;let RX=class{constructor(t){u(this,"occurrences");u(this,nF,yd);u(this,tF,Z0);u(this,"_hash");this.occurrences=t}[(nF=gd,tF=Z0,ae)](){return v(gt(RD),Se(Gh(Fe(this.occurrences.entries()))),st(this))}[ie](t){return jX(t)&&CX(Fe(this.occurrences.entries()),Fe(t.occurrences.entries()))}pipe(){return q(this,arguments)}};var rF,sF;let IX=class{constructor(t){u(this,"value");u(this,sF,yd);u(this,rF,eb);this.value=t}[(sF=gd,rF=eb,ae)](){return v(W(ID),Se(W(this.value)),st(this))}[ie](t){return BX(t)&&this.value===t.value}pipe(){return q(this,arguments)}};var iF,oF;let PX=class{constructor(t,n,r,s,i){u(this,"buckets");u(this,"count");u(this,"min");u(this,"max");u(this,"sum");u(this,oF,yd);u(this,iF,tb);this.buckets=t,this.count=n,this.min=r,this.max=s,this.sum=i}[(oF=gd,iF=tb,ae)](){return v(W(PD),Se(W(this.buckets)),Se(W(this.count)),Se(W(this.min)),Se(W(this.max)),Se(W(this.sum)),st(this))}[ie](t){return zX(t)&&Y(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return q(this,arguments)}};var aF,cF;let FX=class{constructor(t,n,r,s,i,o){u(this,"error");u(this,"quantiles");u(this,"count");u(this,"min");u(this,"max");u(this,"sum");u(this,cF,yd);u(this,aF,nb);this.error=t,this.quantiles=n,this.count=r,this.min=s,this.max=i,this.sum=o}[(cF=gd,aF=nb,ae)](){return v(W(FD),Se(W(this.error)),Se(W(this.quantiles)),Se(W(this.count)),Se(W(this.min)),Se(W(this.max)),Se(W(this.sum)),st(this))}[ie](t){return UX(t)&&this.error===t.error&&Y(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return q(this,arguments)}};const NX=e=>new TX(e),xX=e=>new RX(e),MX=e=>new IX(e),AX=e=>new PX(e.buckets,e.count,e.min,e.max,e.sum),LX=e=>new FX(e.error,e.quantiles,e.count,e.min,e.max,e.sum),DX=e=>G(e,X0),jX=e=>G(e,Z0),BX=e=>G(e,eb),zX=e=>G(e,tb),UX=e=>G(e,nb),VX="effect/MetricHook",qX=Symbol.for(VX),KX={_In:e=>e,_Out:e=>e},Sd=e=>({[qX]:KX,pipe(){return q(this,arguments)},...e}),GC=BigInt(0),HX=e=>{let t=e.keyType.bigint?GC:0;const n=e.keyType.incremental?e.keyType.bigint?s=>s>=GC:s=>s>=0:s=>!0,r=s=>{n(s)&&(t=t+s)};return Sd({get:()=>NX(t),update:r,modify:r})},WX=e=>{const t=new Map;for(const r of e.keyType.preregisteredWords)t.set(r,0);const n=r=>{const s=t.get(r)??0;t.set(r,s+1)};return Sd({get:()=>xX(t),update:n,modify:n})},JX=(e,t)=>{let n=t;return Sd({get:()=>MX(n),update:r=>{n=r},modify:r=>{n=n+r}})},GX=e=>{const t=e.keyType.boundaries.values,n=t.length,r=new Uint32Array(n+1),s=new Float32Array(n);let i=0,o=0,a=Number.MAX_VALUE,c=Number.MIN_VALUE;v(t,sh(du),Yo((h,d)=>{s[d]=h}));const l=h=>{let d=0,p=n;for(;d!==p;){const _=Math.floor(d+(p-d)/2),b=s[_];h<=b?p=_:d=_,p===d+1&&(h<=s[d]?p=d:d=p)}r[d]=r[d]+1,i=i+1,o=o+h,h<a&&(a=h),h>c&&(c=h)},f=()=>{const h=Vy(n);let d=0;for(let p=0;p<n;p++){const _=s[p],b=r[p];d=d+b,h[p]=[_,d]}return h};return Sd({get:()=>AX({buckets:f(),count:i,min:a,max:c,sum:o}),update:l,modify:l})},QX=e=>{const{error:t,maxAge:n,maxSize:r,quantiles:s}=e.keyType,i=v(s,sh(du)),o=Vy(r);let a=0,c=0,l=0,f=Number.MAX_VALUE,h=Number.MIN_VALUE;const d=_=>{const b=[];let w=0;for(;w!==r-1;){const m=o[w];if(m!=null){const[g,y]=m,$=mg(_-g);YH($,BH)&&$<=n&&b.push(y)}w=w+1}return YX(t,i,sh(b,du))},p=(_,b)=>{if(r>0){a=a+1;const w=a%r;o[w]=[b,_]}c=c+1,l=l+_,_<f&&(f=_),_>h&&(h=_)};return Sd({get:()=>LX({error:t,quantiles:d(Date.now()),count:c,min:f,max:h,sum:l}),update:([_,b])=>p(_,b),modify:([_,b])=>p(_,b)})},YX=(e,t,n)=>{const r=n.length;if(!Nt(t))return pa();const s=t[0],i=t.slice(1),o=QC(e,r,L(),0,s,n),a=Ur(o);return i.forEach(c=>{a.push(QC(e,r,o.value,o.consumed,c,o.rest))}),Yo(a,c=>[c.quantile,c.value])},QC=(e,t,n,r,s,i)=>{let o=e,a=t,c=n,l=r,f=s,h=i,d=e,p=t,_=n,b=r,w=s,m=i;for(;;){if(!Nt(h))return{quantile:f,value:L(),consumed:l,rest:[]};if(f===1)return{quantile:f,value:z(X2(h)),consumed:l+h.length,rest:[]};const g=yH(h,E=>E<=h[0]),y=f*a,$=o/2*y,T=l+g[0].length,C=Math.abs(T-y);if(T<y-$){d=o,p=a,_=Ef(h),b=T,w=f,m=g[1],o=d,a=p,c=_,l=b,f=w,h=m;continue}if(T>y+$)return{quantile:f,value:c,consumed:l,rest:h};switch(c._tag){case"None":{d=o,p=a,_=Ef(h),b=T,w=f,m=g[1],o=d,a=p,c=_,l=b,f=w,h=m;continue}case"Some":{const E=Math.abs(y-c.value);if(C<E){d=o,p=a,_=Ef(h),b=T,w=f,m=g[1],o=d,a=p,c=_,l=b,f=w,h=m;continue}return{quantile:f,value:z(c.value),consumed:l,rest:h}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},XX="effect/MetricPair",ZX=Symbol.for(XX),eZ={_Type:e=>e},tZ=(e,t)=>({[ZX]:eZ,metricKey:e,metricState:t,pipe(){return q(this,arguments)}}),nZ="effect/MetricRegistry",YC=Symbol.for(nZ);var uF;let rZ=(uF=YC,class{constructor(){u(this,uF,YC);u(this,"map",$X())}snapshot(){const t=[];for(const[n,r]of this.map)t.push(tZ(n,r.get()));return t}get(t){const n=v(this.map,Fo(t),Ds);if(n==null){if(kD(t.keyType))return this.getCounter(t);if(fX(t.keyType))return this.getGauge(t);if(lX(t.keyType))return this.getFrequency(t);if(ED(t.keyType))return this.getHistogram(t);if(hX(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(t){let n=v(this.map,Fo(t),Ds);if(n==null){const r=HX(t);v(this.map,Al(t))||v(this.map,Ll(t,r)),n=r}return n}getFrequency(t){let n=v(this.map,Fo(t),Ds);if(n==null){const r=WX(t);v(this.map,Al(t))||v(this.map,Ll(t,r)),n=r}return n}getGauge(t){let n=v(this.map,Fo(t),Ds);if(n==null){const r=JX(t,t.keyType.bigint?BigInt(0):0);v(this.map,Al(t))||v(this.map,Ll(t,r)),n=r}return n}getHistogram(t){let n=v(this.map,Fo(t),Ds);if(n==null){const r=GX(t);v(this.map,Al(t))||v(this.map,Ll(t,r)),n=r}return n}getSummary(t){let n=v(this.map,Fo(t),Ds);if(n==null){const r=QX(t);v(this.map,Al(t))||v(this.map,Ll(t,r)),n=r}return n}});const sZ=()=>new rZ,iZ="effect/Metric",oZ=Symbol.for(iZ),aZ={_Type:e=>e,_In:e=>e,_Out:e=>e},XC=ge(Symbol.for("effect/Metric/globalMetricRegistry"),()=>sZ()),ND=function(e,t,n,r){const s=Object.assign(i=>cS(i,o=>fZ(s,o)),{[oZ]:aZ,keyType:e,unsafeUpdate:t,unsafeValue:n,unsafeModify:r,register(){return this.unsafeValue([]),this},pipe(){return q(this,arguments)}});return s},gS=(e,t)=>xD(yX(e,t)),xD=e=>{let t;const n=new WeakMap,r=s=>{if(s.length===0)return t!==void 0||(t=XC.get(e)),t;let i=n.get(s);return i!==void 0||(i=XC.get(_X(e,s)),n.set(s,i)),i};return ND(e.keyType,(s,i)=>r(i).update(s),s=>r(s).get(),(s,i)=>r(i).modify(s))},cZ=(e,t,n)=>xD(SX(e,t,n)),uZ=S(3,(e,t,n)=>lZ(e,[lY(t,n)])),lZ=S(2,(e,t)=>ND(e.keyType,(n,r)=>e.unsafeUpdate(n,rm(t,r)),n=>e.unsafeValue(rm(t,n)),(n,r)=>e.unsafeModify(n,rm(t,r)))),fZ=S(2,(e,t)=>ld(L0,n=>N(()=>e.unsafeUpdate(t,n)))),hZ="effect/Request",dZ=Symbol.for(hZ),pZ={_E:e=>e,_A:e=>e};({...jy,[dZ]:0});const mZ=S(2,(e,t)=>ld(dD,n=>N(()=>{if(n.has(e)){const r=n.get(e);r.state.completed||(r.state.completed=!0,fk(r.result,t))}}))),gZ="effect/Supervisor",yS=Symbol.for(gZ),Ek={_T:e=>e};var lF,Vc;let MD=(lF=yS,Vc=class{constructor(t,n){u(this,"underlying");u(this,"value0");u(this,lF,Ek);this.underlying=t,this.value0=n}get value(){return this.value0}onStart(t,n,r,s){this.underlying.onStart(t,n,r,s)}onEnd(t,n){this.underlying.onEnd(t,n)}onEffect(t,n){this.underlying.onEffect(t,n)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new Vc(this,v(this.value,pe(t)))}zip(t){return new AD(this,t)}},Vc);var fF,qc;let AD=(fF=yS,qc=class{constructor(t,n){u(this,"left");u(this,"right");u(this,"_tag","Zip");u(this,fF,Ek);this.left=t,this.right=n}get value(){return dL(this.left.value,this.right.value)}onStart(t,n,r,s){this.left.onStart(t,n,r,s),this.right.onStart(t,n,r,s)}onEnd(t,n){this.left.onEnd(t,n),this.right.onEnd(t,n)}onEffect(t,n){this.left.onEffect(t,n),this.right.onEffect(t,n)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new MD(this,v(this.value,pe(t)))}zip(t){return new qc(this,t)}},qc);const LD=e=>G(e,yS)&&S2(e,"Zip");var hF;let yZ=(hF=yS,class{constructor(t){u(this,"effect");u(this,hF,Ek);this.effect=t}get value(){return this.effect}onStart(t,n,r,s){}onEnd(t,n){}onEffect(t,n){}onSuspend(t){}onResume(t){}map(t){return new MD(this,v(this.value,pe(t)))}zip(t){return new AD(this,t)}onRun(t,n){return t()}});const SZ=e=>new yZ(e),SS=ge("effect/Supervisor/none",()=>SZ(Ze)),_Z=Wu,DD="Empty",jD="AddSupervisor",BD="RemoveSupervisor",zD="AndThen",Tf={_tag:DD},fm=(e,t)=>({_tag:zD,first:e,second:t}),vZ=(e,t)=>bZ(t,qt(e)),bZ=(e,t)=>{let n=e,r=t;for(;fi(r);){const s=Ss(r);switch(s._tag){case DD:{r=Ws(r);break}case jD:{n=n.zip(s.supervisor),r=Ws(r);break}case BD:{n=rb(n,s.supervisor),r=Ws(r);break}case zD:{r=gn(s.first)(gn(s.second)(Ws(r)));break}}}return n},rb=(e,t)=>Y(e,t)?SS:LD(e)?rb(e.left,t).zip(rb(e.right,t)):e,Rg=e=>Y(e,SS)?ga():LD(e)?v(Rg(e.left),ah(Rg(e.right))):q$(e),wZ=(e,t)=>{if(Y(e,t))return Tf;const n=Rg(e),r=Rg(t),s=v(r,cC(n),Sg(Tf,(o,a)=>fm(o,{_tag:jD,supervisor:a}))),i=v(n,cC(r),Sg(Tf,(o,a)=>fm(o,{_tag:BD,supervisor:a})));return fm(s,i)},$Z=_Z({empty:Tf,patch:vZ,combine:fm,diff:wZ}),kZ=gS("effect_fiber_started",{incremental:!0}),ZC=gS("effect_fiber_active"),EZ=gS("effect_fiber_successes",{incremental:!0}),OZ=gS("effect_fiber_failures",{incremental:!0}),TZ=uZ(cZ("effect_fiber_lifetimes",XY({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Dl="Continue",CZ="Done",eR="Yield",RZ={_E:e=>e,_A:e=>e},bp=e=>{throw new Error(`BUG: FiberRuntime - ${Xc(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},Rs=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Is=ge("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),jl={[cg]:(e,t,n)=>vn(()=>t.effect_instruction_i1(n)),OnStep:(e,t,n)=>Pe(Pe(n)),[ug]:(e,t,n)=>vn(()=>t.effect_instruction_i2(n)),[C$]:(e,t,n)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),Ci(e.currentRuntimeFlags)&&e.isInterrupted()?Te(e.getInterruptedCause()):Pe(n)),[lg]:(e,t,n)=>(vn(()=>t.effect_instruction_i2(n)),vn(()=>t.effect_instruction_i0())?(e.pushStack(t),vn(()=>t.effect_instruction_i1())):Ze),[kf]:(e,t,n)=>{const r=vn(()=>t.effect_instruction_i0.next(n));return r.done?Pe(r.value):(e.pushStack(t),c8(r.value))}},IZ={[Sk]:(e,t,n,r)=>(e.processNewInterruptSignal(r.cause),Ci(t)?Te(r.cause):n),[vk]:(e,t,n,r)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[_k]:(e,t,n,r)=>(r.onFiber(e,QL(t)),n),[bk]:(e,t,n,r)=>P(ud(),()=>n)},PZ=e=>iS(pJ(e),t=>ei(CJ(t),([n,r])=>{const s=new Map,i=[];for(const a of r){i.push(Xs(a));for(const c of a)s.set(c.request,c)}const o=i.flat();return fd(nee(n.runAll(i),o,()=>o.forEach(a=>{a.listeners.interrupted=!0})),dD,s)},!1,!1));var dF,pF;let UD=class extends pd{constructor(n,r,s){super();u(this,pF,SD);u(this,dF,RZ);u(this,"_fiberRefs");u(this,"_fiberId");u(this,"_queue",new Array);u(this,"_children",null);u(this,"_observers",new Array);u(this,"_running",!1);u(this,"_stack",[]);u(this,"_asyncInterruptor",null);u(this,"_asyncBlockingOn",null);u(this,"_exitValue",null);u(this,"_steps",[]);u(this,"_isYielding",!1);u(this,"currentRuntimeFlags");u(this,"currentOpCount",0);u(this,"currentSupervisor");u(this,"currentScheduler");u(this,"currentTracer");u(this,"currentSpan");u(this,"currentContext");u(this,"currentDefaultServices");u(this,"run",()=>{this.drainQueueOnCurrentThread()});if(this.currentRuntimeFlags=s,this._fiberId=n,this._fiberRefs=r,dC(s)){const i=this.getFiberRef(L0);kZ.unsafeUpdate(1,i),ZC.unsafeUpdate(1,i)}this.refreshRefCache()}commit(){return pu(this)}id(){return this._fiberId}resume(n){this.tell(Ka(n))}get status(){return this.ask((n,r)=>r)}get runtimeFlags(){return this.ask((n,r)=>wQ(r)?n.currentRuntimeFlags:r.runtimeFlags)}scope(){return xY(this)}get children(){return this.ask(n=>Array.from(n.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(vp)}fiberRefs(){return this.ask(n=>n.getFiberRefs())}ask(n){return oe(()=>{const r=hS(this._fiberId);return this.tell(lm((s,i)=>{fk(r,N(()=>n(s,i)))})),ba(r)})}tell(n){this._queue.push(n),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return Fr(n=>{const r=s=>n(D(s));return this.tell(lm((s,i)=>{s._exitValue!==null?r(this._exitValue):s.addObserver(r)})),N(()=>this.tell(lm((s,i)=>{s.removeObserver(r)})))},this.id())}get inheritAll(){return xe((n,r)=>{const s=n.id(),i=n.getFiberRefs(),o=r.runtimeFlags,a=this.getFiberRefs(),c=sQ(i,s,a);n.setFiberRefs(c);const l=n.getFiberRef(sR),f=v(Xo(o,l),mC(Ju),mC(x0));return l9(f)})}get poll(){return N(()=>Uy(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(n){return N(()=>this.tell(pv(Wr(n))))}unsafeInterruptAsFork(n){this.tell(pv(Wr(n)))}addObserver(n){this._exitValue!==null?n(this._exitValue):this._observers.push(n)}removeObserver(n){this._observers=this._observers.filter(r=>r!==n)}getFiberRefs(){return this.setFiberRef(sR,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(n){this._fiberRefs=UL(this._fiberRefs,n)}getFiberRef(n){return this._fiberRefs.locals.has(n)?this._fiberRefs.locals.get(n)[0][1]:n.initial}setFiberRef(n,r){this._fiberRefs=q0(this._fiberRefs,{fiberId:this._fiberId,fiberRef:n,value:r}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(ph),this.currentTracer=this.currentDefaultServices.unsafeMap.get(AL.key),this.currentSupervisor=this.getFiberRef(ZZ),this.currentScheduler=this.getFiberRef(yk),this.currentContext=this.getFiberRef(di),this.currentSpan=this.currentContext.unsafeMap.get(LL.key)}setFiberRefs(n){this._fiberRefs=n,this.refreshRefCache()}addChild(n){this.getChildren().add(n)}removeChild(n){this.getChildren().delete(n)}drainQueueOnCurrentThread(){let n=!0;for(;n;){let r=Dl;const s=globalThis[To];globalThis[To]=this;try{for(;r===Dl;)r=this._queue.length===0?CZ:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[To]=s}this._queue.length>0&&!this._running?(this._running=!0,r===eR?(this.drainQueueLaterOnExecutor(),n=!1):n=!0):n=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(hd))}drainQueueWhileRunning(n,r){let s=r;for(;this._queue.length>0;){const i=this._queue.splice(0,1)[0];s=IZ[i._tag](this,n,s,i)}return s}isInterrupted(){return!PJ(this.getFiberRef(vp))}addInterruptedCause(n){const r=this.getFiberRef(vp);this.setFiberRef(vp,Xt(r,n))}processNewInterruptSignal(n){this.addInterruptedCause(n),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let n=!1;for(const r of this._children)r.tell(pv(Wr(this.id()))),n=!0;return n}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const n=this._children.values();this._children=null;let r=!1;return nk({while:()=>!r,body:()=>{const i=n.next();return i.done?N(()=>{r=!0}):Cs(i.value.await)},step:()=>{}})}return null}reportExitValue(n){if(dC(this.currentRuntimeFlags)){const r=this.getFiberRef(L0),s=this.id().startTimeMillis,i=Date.now();switch(TZ.unsafeUpdate(i-s,r),ZC.unsafeUpdate(-1,r),n._tag){case nn:{EZ.unsafeUpdate(1,r);break}case tn:{OZ.unsafeUpdate(1,r);break}}}if(n._tag==="Failure"){const r=this.getFiberRef(N9);!G$(n.cause)&&r._tag==="Some"&&this.log("Fiber terminated with an unhandled error",n.cause,r)}}setExitValue(n){this._exitValue=n,this.reportExitValue(n);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](n)}getLoggers(){return this.getFiberRef(AZ)}log(n,r,s){const i=Ie(s)?s.value:this.getFiberRef(C9),o=this.getFiberRef(FZ);if(FQ(o,i))return;const a=this.getFiberRef(R9),c=this.getFiberRef(T9),l=this.getLoggers(),f=this.getFiberRefs();if(wA(l)>0){const h=R$(this.getFiberRef(ph),pS),d=new Date(h.unsafeCurrentTimeMillis());h8(f,()=>{for(const p of l)p.log({fiberId:this.id(),logLevel:i,message:n,cause:r,context:f,spans:a,annotations:c,date:d})})}}evaluateMessageWhileSuspended(n){switch(n._tag){case bk:return eR;case Sk:return this.processNewInterruptSignal(n.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(Te(n.cause)),this._asyncInterruptor=null),Dl;case vk:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(n.effect),Dl;case _k:return n.onFiber(this,this._exitValue!==null?vQ:bQ(this.currentRuntimeFlags,this._asyncBlockingOn)),Dl;default:return bp(n)}}evaluateEffect(n){this.currentSupervisor.onResume(this);try{let r=Ci(this.currentRuntimeFlags)&&this.isInterrupted()?Te(this.getInterruptedCause()):n;for(;r!==null;){const s=r,i=this.runLoop(s);if(i===Rs){const o=Is.currentOp;Is.currentOp=null,o._op===em?uJ(this.currentRuntimeFlags)?(this.tell(IY()),this.tell(Ka(Nn)),r=null):r=Nn:o._op===$f&&(r=null)}else{this.currentRuntimeFlags=v(this.currentRuntimeFlags,lJ(x0));const o=this.interruptAllChildren();o!==null?r=P(o,()=>i):(this._queue.length===0?this.setExitValue(i):this.tell(Ka(i)),r=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(n){if(this._running)this.tell(Ka(n));else{this._running=!0;const r=globalThis[To];globalThis[To]=this;try{this.evaluateEffect(n)}finally{this._running=!1,globalThis[To]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(n){this.tell(Ka(n))}patchRuntimeFlags(n,r){const s=Nc(n,r);return globalThis[To]=this,this.currentRuntimeFlags=s,s}initiateAsync(n,r){let s=!1;const i=o=>{s||(s=!0,this.tell(Ka(o)))};Ci(n)&&(this._asyncInterruptor=i);try{r(i)}catch(o){i(bt(Bn(o)))}}pushStack(n){this._stack.push(n),n._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const n=this._stack.pop();if(n)return n._op==="OnStep"&&this._steps.pop(),n}getNextSuccessCont(){let n=this.popStack();for(;n;){if(n._op!==Zp)return n;n=this.popStack()}}getNextFailCont(){let n=this.popStack();for(;n;){if(n._op!==cg&&n._op!==lg&&n._op!==kf)return n;n=this.popStack()}}[(pF=yD,dF=DY,p8)](n){return N(()=>B2(this.currentContext,n))}Left(n){return lt(n.left)}None(n){return lt(new lS)}Right(n){return Pe(n.right)}Some(n){return Pe(n.value)}Micro(n){return Zl(r=>{const s=qQ().pipe(KQ(GQ,this.getFiberRef(di)));let i=r;return n[Eg](s,o=>{if(o._tag==="Right")return i(Pe(o.right));switch(o.left._tag){case"Interrupt":return i(Te(Wr(ao)));case"Fail":return i(lt(o.left.error));case"Die":return i(fh(o.left.defect))}}),Fr(o=>{i=a=>{o(Ze)},gk(s,tD).abort()})})}[E2](n){const r=vn(()=>n.effect_instruction_i0()),s=this.getNextSuccessCont();return s!==void 0?(s._op in jl||bp(s),jl[s._op](this,s,r)):(Is.currentOp=Pe(r),Rs)}[nn](n){const r=n,s=this.getNextSuccessCont();return s!==void 0?(s._op in jl||bp(s),jl[s._op](this,s,r.effect_instruction_i0)):(Is.currentOp=r,Rs)}[tn](n){const r=n.effect_instruction_i0,s=this.getNextFailCont();if(s!==void 0)switch(s._op){case Zp:case ug:return Ci(this.currentRuntimeFlags)&&this.isInterrupted()?Te(gC(r)):vn(()=>s.effect_instruction_i1(r));case"OnStep":return Ci(this.currentRuntimeFlags)&&this.isInterrupted()?Te(gC(r)):Pe(Te(r));case C$:return this.patchRuntimeFlags(this.currentRuntimeFlags,s.patch),Ci(this.currentRuntimeFlags)&&this.isInterrupted()?Te(Xt(r,this.getInterruptedCause())):Te(r);default:bp(s)}else return Is.currentOp=Te(r),Rs}[O2](n){return vn(()=>n.effect_instruction_i0(this,QL(this.currentRuntimeFlags)))}Blocked(n){const r=this.getFiberRefs(),s=this.currentRuntimeFlags;if(this._steps.length>0){const i=[],o=this._steps[this._steps.length-1];let a=this.popStack();for(;a&&a._op!=="OnStep";)i.push(a),a=this.popStack();this.setFiberRefs(o.refs),this.currentRuntimeFlags=o.flags;const c=gh(o.refs,r),l=Xo(o.flags,s);return Pe(rL(n.effect_instruction_i0,xe(f=>{for(;i.length>0;)f.pushStack(i.pop());return f.setFiberRefs(yh(f.id(),f.getFiberRefs())(c)),f.currentRuntimeFlags=Nc(l)(f.currentRuntimeFlags),n.effect_instruction_i1})))}return Nr(i=>P(_S(t9(n.effect_instruction_i0)),()=>i(n.effect_instruction_i1)))}RunBlocked(n){return PZ(n.effect_instruction_i0)}[Ku](n){const r=n.effect_instruction_i0,s=this.currentRuntimeFlags,i=Nc(s,r);if(Ci(i)&&this.isInterrupted())return Te(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,r),n.effect_instruction_i1){const o=Xo(i,s);return this.pushStack(new n9(o,n)),vn(()=>n.effect_instruction_i1(s))}else return Nn}[cg](n){return this.pushStack(n),n.effect_instruction_i0}OnStep(n){return this.pushStack(n),n.effect_instruction_i0}[Zp](n){return this.pushStack(n),n.effect_instruction_i0}[ug](n){return this.pushStack(n),n.effect_instruction_i0}[$f](n){return this._asyncBlockingOn=n.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,n.effect_instruction_i0),Is.currentOp=n,Rs}[em](n){return this._isYielding=!1,Is.currentOp=n,Rs}[lg](n){const r=n.effect_instruction_i0,s=n.effect_instruction_i1;return r()?(this.pushStack(n),s()):Nn}[kf](n){return jl[kf](this,n,void 0)}[Dy](n){return vn(()=>n.commit())}runLoop(n){let r=n;for(this.currentOpCount=0;;){if(this.currentRuntimeFlags&cJ&&this.currentSupervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this.currentRuntimeFlags,r)),!this._isYielding){this.currentOpCount+=1;const s=this.currentScheduler.shouldYield(this);if(s!==!1){this._isYielding=!0,this.currentOpCount=0;const i=r;r=P(ud({priority:s}),()=>i)}}try{if(r=this.currentTracer.context(()=>ig()!==r[_a]._V?A0(`Cannot execute an Effect versioned ${r[_a]._V} with a Runtime of version ${ig()}`):this[r._op](r),this),r===Rs){const s=Is.currentOp;return s._op===em||s._op===$f?Rs:(Is.currentOp=null,s._op===nn||s._op===tn?s:Te(Bn(s)))}}catch(s){r!==Rs&&!G(r,"_op")||!(r._op in this)?r=A0(`Not a valid effect: ${Xc(r)}`):e9(s)?r=Te(s.cause):A9(s)?r=Te(Xt(Bn(s),Wr(ao))):r=fh(s)}}}};const FZ=ge("effect/FiberRef/currentMinimumLogLevel",()=>cr(NQ("Info"))),NZ=e=>$k(t=>{const n=cQ(t.context,ph);R$(n,pk).unsafe.log(e.log(t))}),xZ=ge(Symbol.for("effect/Logger/defaultLogger"),()=>NZ(qY)),MZ=ge(Symbol.for("effect/Logger/tracerLogger"),()=>$k(({annotations:e,cause:t,context:n,fiberId:r,logLevel:s,message:i})=>{const o=Zh(mh(n,di),LL);if(o._tag==="None"||o.value._tag==="ExternalSpan")return;const a=B2(mh(n,ph),pS),c={};for(const[l,f]of e)c[l]=f;c["effect.fiberId"]=JW(r),c["effect.logLevel"]=s.label,t!==null&&t._tag!=="Empty"&&(c["effect.cause"]=eS(t,{renderErrorCause:!0})),o.value.event(Xc(Array.isArray(i)?i[0]:i),a.unsafeCurrentTimeNanos(),c)})),AZ=ge(Symbol.for("effect/FiberRef/currentLoggers"),()=>k9(q$(xZ,MZ))),LZ=S(e=>Ts(e[0]),(e,t)=>cd(cS(e,n=>DZ(r=>t(n,r))))),DZ=e=>xe(t=>{const n=t.getFiberRefs(),r=t.currentRuntimeFlags;return P(HD,s=>j0(s,i=>xe(o=>{const a=o.getFiberRefs(),c=o.currentRuntimeFlags,l=gh(a,n),f=Xo(c,r),h=gh(n,a);return o.setFiberRefs(yh(l,o.id(),n)),vh(h9(e(i),f),N(()=>{o.setFiberRefs(yh(h,o.id(),o.getFiberRefs()))}))})))}),jZ=e=>{if(Array.isArray(e)||_2(e))return[e,L()];const t=Object.keys(e),n=t.length;return[t.map(r=>e[r]),z(r=>{const s={};for(let i=0;i<n;i++)s[t[i]]=r[i];return s})]},BZ=(e,t,n)=>{const r=[];for(const s of e)r.push(hu(s));return P(mu(r,de,{concurrency:n==null?void 0:n.concurrency,batching:n==null?void 0:n.batching}),s=>{const i=L(),o=s.length,a=new Array(o),c=new Array(o);let l=!1;for(let f=0;f<o;f++){const h=s[f];h._tag==="Left"?(a[f]=z(h.left),l=!0):(c[f]=h.right,a[f]=i)}return l?t._tag==="Some"?lt(t.value(a)):lt(a):n!=null&&n.discard?Ze:t._tag==="Some"?D(t.value(c)):D(c)})},zZ=(e,t,n)=>{const r=[];for(const s of e)r.push(hu(s));return n!=null&&n.discard?mu(r,de,{concurrency:n==null?void 0:n.concurrency,batching:n==null?void 0:n.batching,discard:!0}):pe(mu(r,de,{concurrency:n==null?void 0:n.concurrency,batching:n==null?void 0:n.batching}),s=>t._tag==="Some"?t.value(s):s)},VD=(e,t)=>{const[n,r]=jZ(e);return(t==null?void 0:t.mode)==="validate"?BZ(n,r,t):(t==null?void 0:t.mode)==="either"?zZ(n,r,t):(t==null?void 0:t.discard)!==!0&&r._tag==="Some"?pe(mu(n,de,t),r.value):mu(n,de,t)},mu=S(e=>_2(e[0]),(e,t,n)=>xe(r=>{const s=(n==null?void 0:n.batching)===!0||(n==null?void 0:n.batching)==="inherit"&&r.getFiberRef(F9);return n!=null&&n.discard?KC(n.concurrency,()=>Ha($g,n==null?void 0:n.concurrentFinalizers)(i=>s?ei(e,(o,a)=>i(t(o,a)),!0,!1,1):iS(e,(o,a)=>i(t(o,a)))),()=>Ha(U0,n==null?void 0:n.concurrentFinalizers)(i=>ei(e,(o,a)=>i(t(o,a)),s,!1)),i=>Ha(V0(i),n==null?void 0:n.concurrentFinalizers)(o=>ei(e,(a,c)=>o(t(a,c)),s,!1,i))):KC(n==null?void 0:n.concurrency,()=>Ha($g,n==null?void 0:n.concurrentFinalizers)(i=>s?sb(e,1,(o,a)=>i(t(o,a)),!0):Js(e,(o,a)=>i(t(o,a)))),()=>Ha(U0,n==null?void 0:n.concurrentFinalizers)(i=>qD(e,(o,a)=>i(t(o,a)),s)),i=>Ha(V0(i),n==null?void 0:n.concurrentFinalizers)(o=>sb(e,i,(a,c)=>o(t(a,c)),s)))})),qD=(e,t,n)=>oe(()=>{const r=Fe(e),s=new Array(r.length);return zt(ei(r,(o,a)=>P(t(o,a),c=>N(()=>s[a]=c)),n,!1),D(s))}),ei=(e,t,n,r,s)=>Nr(i=>c9(o=>xe(a=>{let c=Array.from(e).reverse(),l=c.length;if(l===0)return Ze;let f=0,h=!1;const d=s?Math.min(c.length,s):c.length,p=new Set,_=new Array,b=()=>p.forEach(O=>{O.currentScheduler.scheduleTask(()=>{O.unsafeInterruptAsFork(a.id())},0)}),w=new Array,m=new Array,g=new Array,y=()=>{const O=_.filter(({exit:A})=>A._tag==="Failure").sort((A,I)=>A.index<I.index?-1:A.index===I.index?0:1).map(({exit:A})=>A);return O.length===0&&O.push(Nn),O},$=(O,A=!1)=>{const I=cd(o(O)),M=VZ(I,a,a.currentRuntimeFlags,wk);return a.currentScheduler.scheduleTask(()=>{A&&M.unsafeInterruptAsFork(a.id()),M.resume(I)},0),M},T=()=>{r||(l-=c.length,c=[]),h=!0,b()},C=n?r9:Yi,E=$(Fr(O=>{const A=(M,U)=>{M._op==="Blocked"?g.push(M):(_.push({index:U,exit:M}),M._op==="Failure"&&!h&&T())},I=()=>{if(c.length>0){const M=c.pop();let U=f++;const X=()=>{const Z=c.pop();return U=f++,P(ud(),()=>P(C(i(t(Z,U))),ve))},ve=Z=>c.length>0&&(A(Z,U),c.length>0)?X():D(Z),De=P(C(i(t(M,U))),ve),ye=$(De);w.push(ye),p.add(ye),h&&ye.currentScheduler.scheduleTask(()=>{ye.unsafeInterruptAsFork(a.id())},0),ye.addObserver(Z=>{let x;if(Z._op==="Failure"?x=Z:x=Z.effect_instruction_i0,m.push(ye),p.delete(ye),A(x,U),_.length===l)O(D(Ke(Zo(y(),{parallel:!0}),()=>Nn)));else if(g.length+_.length===l){const V=g.map(K=>K.effect_instruction_i0).reduce(VA);O(D(rL(V,ei([Ke(Zo(y(),{parallel:!0}),()=>Nn),...g.map(K=>K.effect_instruction_i1)],K=>K,n,!0,s))))}else I()})}};for(let M=0;M<d;M++)I()}));return Cs(va(sS(i(pu(E))),fS({onFailure:()=>{T();const O=g.length+1,A=Math.min(typeof s=="number"?s:g.length,g.length),I=Array.from(g);return Fr(M=>{const U=[];let X=0,ve=0;const De=(Z,x)=>V=>{U[Z]=V,X++,X===O&&M(J2(Zo(U,{parallel:!0}))),I.length>0&&x&&ye()},ye=()=>{$(I.pop(),!0).addObserver(De(ve,!0)),ve++};E.addObserver(De(ve,!1)),ve++;for(let Z=0;Z<A;Z++)ye()})},onSuccess:()=>Js(m,O=>O.inheritAll)})))}))),sb=(e,t,n,r)=>oe(()=>{const s=Fe(e),i=new Array(s.length);return zt(ei(s,(a,c)=>pe(n(a,c),l=>i[c]=l),r,!1,t),D(i))}),_S=e=>qZ(e,wk),UZ=(e,t,n,r=null)=>{const s=Ig(e,t,n,r);return s.resume(e),s},VZ=(e,t,n,r=null)=>Ig(e,t,n,r),Ig=(e,t,n,r=null)=>{const s=EA(),i=t.getFiberRefs(),o=iQ(i,s),a=new UD(s,o,n),c=mh(o,di),l=a.currentSupervisor;return l.onStart(c,e,z(t),a),a.addObserver(h=>l.onEnd(h,a)),(r!==null?r:v(t.getFiberRef(D0),Ke(()=>t.scope()))).add(n,a),a},qZ=(e,t)=>xe((n,r)=>D(UZ(e,n,r.runtimeFlags,t))),tR=e=>dd(t=>Ft(Zh(t,Da),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return P(uS(n,U0),r=>nl(e,r))}}})),nR=e=>t=>dd(n=>Ft(Zh(n,Da),{onNone:()=>t,onSome:r=>r.strategy._tag==="ParallelN"&&r.strategy.parallelism===e?t:P(uS(r,V0(e)),s=>nl(t,s))})),Ha=(e,t)=>n=>dd(r=>Ft(Zh(r,Da),{onNone:()=>n(de),onSome:s=>{if(t===!0){const i=e._tag==="Parallel"?tR:e._tag==="Sequential"?rR:nR(e.parallelism);switch(s.strategy._tag){case"Parallel":return i(n(tR));case"Sequential":return i(n(rR));case"ParallelN":return i(n(nR(s.strategy.parallelism)))}}else return n(de)}})),KD=e=>P(Da,e),KZ=e=>P(vS(),t=>YZ(e,t)),rR=e=>dd(t=>Ft(Zh(t,Da),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return P(uS(n,$g),r=>nl(e,r))}}})),HZ=S(e=>Ts(e[1]),(e,t,n)=>_d(e,t,(r,s)=>[r,s],n)),WZ=S(e=>Ts(e[1]),(e,t,n)=>(n==null?void 0:n.concurrent)!==!0&&((n==null?void 0:n.batching)===void 0||n.batching===!1)?rk(e,t):_d(e,t,(r,s)=>r,n)),JZ=S(e=>Ts(e[1]),(e,t,n)=>(n==null?void 0:n.concurrent)!==!0&&((n==null?void 0:n.batching)===void 0||n.batching===!1)?zt(e,t):_d(e,t,(r,s)=>s,n)),_d=S(e=>Ts(e[1]),(e,t,n,r)=>pe(VD([e,t],{concurrency:r!=null&&r.concurrent?2:1,batching:r==null?void 0:r.batching,concurrentFinalizers:r==null?void 0:r.concurrentFinalizers}),([s,i])=>n(s,i))),Da=La("effect/Scope"),HD=Da,GZ=(e,t)=>{e.state._tag==="Open"&&e.state.finalizers.add(t)},QZ={[$C]:$C,[kC]:kC,pipe(){return q(this,arguments)},fork(e){return N(()=>{const t=WD(e);if(this.state._tag==="Closed")return t.state=this.state,t;const n=r=>t.close(r);return this.state.finalizers.add(n),GZ(t,r=>N(()=>{this.state._tag==="Open"&&this.state.finalizers.delete(n)})),t})},close(e){return oe(()=>{if(this.state._tag==="Closed")return Ze;const t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:e},t.length===0?Ze:ZG(this.strategy)?v(Js(t,n=>Yi(n(e))),P(n=>v(Zo(n),tm(fv),Ke(()=>Nn)))):eQ(this.strategy)?v(qD(t,n=>Yi(n(e)),!1),P(n=>v(Zo(n,{parallel:!0}),tm(fv),Ke(()=>Nn)))):v(sb(t,this.strategy.parallelism,n=>Yi(n(e)),!1),P(n=>v(Zo(n,{parallel:!0}),tm(fv),Ke(()=>Nn))))})},addFinalizer(e){return oe(()=>this.state._tag==="Closed"?e(this.state.exit):(this.state.finalizers.add(e),Ze))}},WD=(e=md)=>{const t=Object.create(QZ);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},vS=(e=md)=>N(()=>WD(e)),nl=S(2,(e,t)=>J9(e,ed(Xh(Da,t)))),YZ=S(2,(e,t)=>v(e,nl(t),va(n=>t.close(n)))),XZ=e=>Zu(e,{differ:$Z,fork:Tf}),sR=O9(fJ),ZZ=XZ(SS),JD=S(3,(e,t,n)=>tee(e,t,{onSelfWin:(r,s)=>P(r.await,i=>{switch(i._tag){case nn:return P(r.inheritAll,()=>n.onSelfDone(i,s));case tn:return n.onSelfDone(i,s)}}),onOtherWin:(r,s)=>P(r.await,i=>{switch(i._tag){case nn:return P(r.inheritAll,()=>n.onOtherDone(i,s));case tn:return n.onOtherDone(i,s)}})})),eee=S(2,(e,t)=>ad(n=>JD(e,t,{onSelfDone:(r,s)=>B0(r,{onFailure:i=>v(pu(s),HC(o=>co(i,o))),onSuccess:i=>v(s,hh(n),Vn(i))}),onOtherDone:(r,s)=>B0(r,{onFailure:i=>v(pu(s),HC(o=>co(o,i))),onSuccess:i=>v(s,hh(n),Vn(i))})}))),tee=S(3,(e,t,n)=>xe((r,s)=>{const i=s.runtimeFlags,o=td(!0),a=Ig(e,r,i,n.selfScope),c=Ig(t,r,i,n.otherScope);return Fr(l=>{a.addObserver(()=>iR(a,c,n.onSelfWin,o,l)),c.addObserver(()=>iR(c,a,n.onOtherWin,o,l)),a.startFork(e),c.startFork(t)},WW(a.id(),c.id()))})),iR=(e,t,n,r,s)=>{jW(!0,!1)(r)&&s(n(e,t))},vh=S(2,(e,t)=>Nr(n=>rr(n(e),{onFailure:r=>rr(t,{onFailure:s=>bt(Xt(r,s)),onSuccess:()=>bt(r)}),onSuccess:r=>Vn(t,r)}))),nee=(e,t,n)=>ad(r=>P(P(_S(tk(e)),s=>Fr(i=>{const o=t.map(l=>l.listeners.count),a=()=>{o.every(l=>l===0)&&t.every(l=>l.result.state.current._tag==="Pending"?!0:!!(l.result.state.current._tag==="Done"&&ak(l.result.state.current.effect)&&l.result.state.current.effect._tag==="Failure"&&GA(l.result.state.current.effect.cause)))&&(c.forEach(l=>l()),n==null||n(),i(sk(s)))};s.addObserver(l=>{c.forEach(f=>f()),i(l)});const c=t.map((l,f)=>{const h=d=>{o[f]=d,a()};return l.listeners.addObserver(h),()=>l.listeners.removeObserver(h)});return a(),N(()=>{c.forEach(l=>l())})})),()=>oe(()=>{const s=t.flatMap(i=>i.state.completed?[]:[i]);return iS(s,i=>mZ(i.request,B9(r)))}))),GD=lu,QD=Bn,ree=Wr,see=JA,YD=GA,iee=YA,oee=DJ,bS=lS,aee="effect/ScheduleInterval",Pg=Symbol.for(aee),XD={[Pg]:Pg,startMillis:0,endMillis:0},ZD=(e,t)=>e>t?XD:{[Pg]:Pg,startMillis:e,endMillis:t},cee=S(2,(e,t)=>uee(e,t)===e),uee=S(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t),lee=e=>e.startMillis>=e.endMillis,fee=S(2,(e,t)=>{const n=Math.max(e.startMillis,t.startMillis),r=Math.min(e.endMillis,t.endMillis);return ZD(n,r)}),hee=e=>ZD(e,Number.POSITIVE_INFINITY),e3=XD,dee=cee,pee=lee,mee=fee,gee=hee,yee="effect/ScheduleIntervals",oR=Symbol.for(yee),t3=e=>({[oR]:oR,intervals:e}),See=S(2,(e,t)=>_ee(e.intervals,t.intervals,kn())),_ee=(e,t,n)=>{let r=e,s=t,i=n;for(;fi(r)&&fi(s);){const o=v(Ss(r),mee(Ss(s))),a=pee(o)?i:v(i,gn(o));v(Ss(r),dee(Ss(s)))?r=Ws(r):s=Ws(s),i=a}return t3(li(i))},ib=e=>v(e.intervals,rA,Ke(()=>e3)).startMillis,vee=e=>v(e.intervals,rA,Ke(()=>e3)).endMillis,bee=S(2,(e,t)=>ib(e)<ib(t)),wee=e=>fi(e.intervals),$ee=t3,kee=See,Eee=ib,aR=vee,Oee=bee,Tee=wee,Ok="Continue",n3="Done",Cee=e=>({_tag:Ok,intervals:e}),Ree=e=>({_tag:Ok,intervals:$ee(qt(e))}),Iee={_tag:n3},Pee=e=>e._tag===Ok,Fee=e=>e._tag===n3,Nee=Cee,xee=Ree,bh=Iee,cR=Pee,Fg=Fee,uR=_L,Ng=bg,r3=nl,s3=uS,i3=vS,Mee="effect/Schedule",o3=Symbol.for(Mee),Aee=e=>G(e,o3),Lee="effect/ScheduleDriver",Dee=Symbol.for(Lee),jee={_Out:e=>e,_In:e=>e,_R:e=>e},Bee={_Out:e=>e,_In:e=>e,_R:e=>e};var mF;mF=o3;class zee{constructor(t,n){u(this,"initial");u(this,"step");u(this,mF,jee);this.initial=t,this.step=n}pipe(){return q(this,arguments)}}var gF;gF=Dee;class Uee{constructor(t,n){u(this,"schedule");u(this,"ref");u(this,gF,Bee);this.schedule=t,this.ref=n}get state(){return pe(Xi(this.ref),t=>t[1])}get last(){return P(Xi(this.ref),([t,n])=>{switch(t._tag){case"None":return ek(()=>new lS);case"Some":return D(t.value)}})}get reset(){return Sh(this.ref,[L(),this.schedule.initial])}next(t){return v(pe(Xi(this.ref),n=>n[1]),P(n=>v(oY,P(r=>v(oe(()=>this.schedule.step(r,t,n)),P(([s,i,o])=>{const a=Sh(this.ref,[z(i),s]);if(Fg(o))return zt(a,lt(L()));const c=Eee(o.intervals)-r;return c<=0?Vn(a,i):v(a,zt(_Y(mg(c))),Vn(i))}))))))}}const vd=(e,t)=>new zee(e,t),Vee=S(2,(e,t)=>Tk(e,(n,r)=>N(()=>t(n,r)))),Tk=S(2,(e,t)=>vd(e.initial,(n,r,s)=>P(e.step(n,r,s),([i,o,a])=>Fg(a)?D([i,o,bh]):pe(t(r,o),c=>c?[i,o,a]:[i,o,bh])))),qee=e=>v(Tg([L(),e.initial]),pe(t=>new Uee(e,t))),Kee=S(2,(e,t)=>Hee(e,t,kee)),Hee=S(3,(e,t,n)=>vd([e.initial,t.initial],(r,s,i)=>v(pL(e.step(r,s,i[0]),t.step(r,s,i[1]),(o,a)=>[o,a]),P(([[o,a,c],[l,f,h]])=>cR(c)&&cR(h)?ob(e,t,s,o,a,c.intervals,l,f,h.intervals,n):D([[o,l],[a,f],bh]))))),ob=(e,t,n,r,s,i,o,a,c,l)=>{const f=l(i,c);return Tee(f)?D([[r,o],[s,a],Nee(f)]):v(i,Oee(c))?P(e.step(aR(i),n,r),([h,d,p])=>Fg(p)?D([[h,o],[d,a],bh]):ob(e,t,n,h,d,p.intervals,o,a,c,l)):P(t.step(aR(c),n,o),([h,d,p])=>Fg(p)?D([[r,h],[s,d],bh]):ob(e,t,n,r,s,i,h,d,p.intervals,l))},Wee=S(2,(e,t)=>Jee(e,n=>N(()=>t(n)))),Jee=S(2,(e,t)=>vd(e.initial,(n,r,s)=>P(e.step(n,r,s),([i,o,a])=>pe(t(o),c=>[i,c,a])))),Gee=e=>vd(e.initial,(t,n,r)=>v(e.step(t,n,r),pe(([s,i,o])=>[s,n,o]))),Qee=e=>ete(c3,t=>t<e),Yee=(e,t)=>vd(e,(n,r,s)=>N(()=>[t(s),s,xee(gee(n))])),Xee=S(2,(e,t)=>Tk(e,(n,r)=>yY(t(n)))),Zee=S(2,(e,t)=>Tk(e,(n,r)=>t(n))),ete=S(2,(e,t)=>Vee(e,(n,r)=>t(r))),hm=Symbol.for("effect/Schedule/ScheduleDefect");var yF;yF=hm;class tte{constructor(t){u(this,"error");u(this,yF);this.error=t,this[hm]=hm}}const nte=e=>G(e,hm),lR=e=>lh(e,t=>fh(new tte(t))),rte=e=>aL(e,t=>Ft(Q$(t,n=>JA(n)&&nte(n.defect)?z(n.defect):L()),{onNone:()=>bt(t),onSome:n=>lt(n.error)})),fR=S(2,(e,t)=>ite(e,t,(n,r)=>lt(n))),ste=S(2,(e,t)=>{if(Aee(t))return fR(e,t);const n=t.schedule??Gee(c3),r=t.while?Zee(n,o=>{const a=t.while(o);return typeof a=="boolean"?D(a):lR(a)}):n,s=t.until?Xee(r,o=>{const a=t.until(o);return typeof a=="boolean"?D(a):lR(a)}):r,i=t.times?Kee(s,Qee(t.times)).pipe(Wee(o=>o[0])):s;return rte(fR(e,i))}),ite=S(3,(e,t,n)=>P(qee(t),r=>hi(e,{onFailure:s=>n(s,L()),onSuccess:s=>a3(e,r,n,s)}))),a3=(e,t,n,r)=>hi(t.next(r),{onFailure:()=>o9(t.last),onSuccess:s=>hi(e,{onFailure:i=>n(i,z(s)),onSuccess:i=>a3(e,t,n,i)})}),c3=Yee(0,e=>e+1);class ote{constructor(t){u(this,"permits");u(this,"waiters",new Set);u(this,"taken",0);u(this,"take",t=>Fr(n=>{if(this.free<t){const r=()=>{this.free<t||(this.waiters.delete(r),this.taken+=t,n(D(t)))};return this.waiters.add(r),N(()=>{this.waiters.delete(r)})}return this.taken+=t,n(D(t))}));u(this,"updateTaken",t=>xe(n=>(this.taken=t(this.taken),this.waiters.size>0&&n.getFiberRef(yk).scheduleTask(()=>{const r=this.waiters.values();let s=r.next();for(;s.done===!1&&this.free>0;)s.value(),s=r.next()},n.getFiberRef(hd)),D(this.free))));u(this,"release",t=>this.updateTaken(n=>n-t));u(this,"releaseAll",this.updateTaken(t=>0));u(this,"withPermits",t=>n=>Nr(r=>P(r(this.take(t)),s=>vh(r(n),this.release(s)))));u(this,"withPermitsIfAvailable",t=>n=>Nr(r=>oe(()=>this.free<t?vY:(this.taken+=t,vh(r(hY(n)),this.release(t))))));this.permits=t}get free(){return this.permits-this.taken}}const u3=e=>new ote(e),ate=e=>N(()=>u3(e)),l3=S(2,(e,t)=>Nr(n=>P(t.fork(md),r=>v(n(e),va(s=>r.close(s)),_S,cS(s=>r.addFinalizer(()=>ad(i=>Y(i,s.id())?Ze:Cs(sk(s))))))))),cte=e=>KD(t=>l3(e,t)),ute="effect/Ref/SynchronizedRef",lte=Symbol.for(ute),fte={_A:e=>e};var SF,_F,vF,bF;class hte extends(bF=pd,vF=lte,_F=iD,SF=Og,bF){constructor(n,r){super();u(this,"ref");u(this,"withLock");u(this,vF,fte);u(this,_F,oD);u(this,SF,Og);u(this,"get");this.ref=n,this.withLock=r,this.get=Xi(this.ref)}commit(){return this.get}modify(n){return this.modifyEffect(r=>D(n(r)))}modifyEffect(n){return this.withLock(v(P(Xi(this.ref),n),P(([r,s])=>Vn(Sh(this.ref,s),r))))}}const dte=e=>N(()=>pte(e)),pte=e=>{const t=aD(e),n=u3(1);return new hte(t,n.withPermits(1))},mte=Symbol.for("effect/ManagedRuntime"),gte="Fresh",yte="FromEffect",Ste="Scoped",_te="Suspend",vte="Provide",bte="ProvideMerge",wte="ZipWith",$te=jY,kte=BY,xc=sk,Ete=hh,hR=pu,wS=e=>(t,n)=>{const r=EA(),s=[[di,[[r,e.context]]]];n!=null&&n.scheduler&&s.push([yk,[[r,n.scheduler]]]);let i=uQ(e.fiberRefs,{entries:s,forkAs:r});n!=null&&n.updateRefs&&(i=n.updateRefs(i,r));const o=new UD(r,i,e.runtimeFlags);let a=t;n!=null&&n.scope&&(a=P(s3(n.scope,md),l=>zt(_L(l,ad(f=>Y(f,o.id())?Ze:hh(o,f))),va(t,f=>Ng(l,f)))));const c=o.currentSupervisor;return c!==SS&&(c.onStart(e.context,a,L(),o),o.addObserver(l=>c.onEnd(l,o))),wk.add(e.runtimeFlags,o),(n==null?void 0:n.immediate)===!1?o.resume(a):o.start(a),o},f3=e=>(t,n={})=>{const r=wS(e)(t,n);return n.onExit&&r.addObserver(s=>{n.onExit(s)}),(s,i)=>f3(e)(v(r,Ete(s??ao)),{...i,onExit:i!=null&&i.onExit?o=>i.onExit(CY(o)):void 0})},Ote=e=>t=>{const n=Fte(e)(t);if(n._tag==="Failure")throw Ite(n.effect_instruction_i0);return n.effect_instruction_i0};let Tte=class extends Error{constructor(n){super(`Fiber #${n.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`);u(this,"fiber");u(this,"_tag","AsyncFiberException");this.fiber=n,this.name=this._tag,this.stack=this.message}};const Cte=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new Tte(e);return Error.stackTraceLimit=t,n},gv=Symbol.for("effect/Runtime/FiberFailure"),yv=Symbol.for("effect/Runtime/FiberFailure/Cause");var wF,$F;let Rte=class extends Error{constructor(n){super();u(this,$F);u(this,wF);this[gv]=gv,this[yv]=n;const r=eL(n);if(r.length>0){const s=r[0];this.name=s.name,this.message=s.message,this.stack=s.stack}this.name=`(FiberFailure) ${this.name}`,(this.message===void 0||this.message.length===0)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[yv].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[($F=gv,wF=yv,Me)](){return this.toString()}};const Ite=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new Rte(e);return Error.stackTraceLimit=t,n},Pte=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return dh(t.left);case"Right":return Pe(t.right);case"Some":return Pe(t.value);case"None":return dh(lS())}},Fte=e=>t=>{const n=Pte(t);if(n)return n;const r=new hD,s=wS(e)(t,{scheduler:r});r.flush();const i=s.unsafePoll();return i||wL(Z$(Cte(s),dk(s)))};let h3=class{constructor(t,n,r){u(this,"context");u(this,"runtimeFlags");u(this,"fiberRefs");this.context=t,this.runtimeFlags=n,this.fiberRefs=r}pipe(){return q(this,arguments)}};const Nte=e=>new h3(e.context,e.runtimeFlags,e.fiberRefs),xte=()=>xe((e,t)=>D(new h3(e.getFiberRef(di),t.runtimeFlags,e.getFiberRefs()))),Mte=zA(Ju,jA,DA),gu=Nte({context:zy(),runtimeFlags:Mte,fiberRefs:lQ()}),Ate=f3(gu),Lte=wS(gu),Dte=Ote(gu),jte=S(2,(e,t)=>e.modifyEffect(t)),Bte="effect/Layer",d3=Symbol.for(Bte),zte={_RIn:e=>e,_E:e=>e,_ROut:e=>e},yu={[d3]:zte,pipe(){return q(this,arguments)}},Ute="effect/Layer/MemoMap",Sv=Symbol.for(Ute),Vte=e=>G(e,d3),qte=e=>e._op_layer===gte;var kF;kF=Sv;class Kte{constructor(t){u(this,"ref");u(this,kF);this.ref=t,this[Sv]=Sv}getOrElseMemoize(t,n){return v(jte(this.ref,r=>{const s=r.get(t);if(s!==void 0){const[i,o]=s,a=v(i,P(([c,l])=>v(SY(c),Vn(l))),va(fS({onFailure:()=>Ze,onSuccess:()=>j0(n,o)})));return D([a,r])}return v(Tg(0),P(i=>v(uk(),P(o=>v(Tg(()=>Ze),pe(a=>{const c=Nr(f=>v(vS(),P(h=>v(f(P(Ck(t,h,!0),d=>dY(d(this)))),Yi,P(d=>{switch(d._tag){case tn:return v(kL(o,d.effect_instruction_i0),zt(bg(h,d)),zt(bt(d.effect_instruction_i0)));case nn:return v(Sh(a,p=>v(bg(h,p),hL(cD(i,_=>[_===1,_-1])),Cs)),zt(H0(i,p=>p+1)),zt(j0(n,p=>v(N(()=>r.delete(t)),zt(Xi(a)),P(_=>_(p))))),zt(lk(o,d.effect_instruction_i0)),Vn(d.effect_instruction_i0[1]))}}))))),l=[v(ba(o),va(B0({onFailure:()=>Ze,onSuccess:()=>H0(i,f=>f+1)}))),f=>v(Xi(a),P(h=>h(f)))];return[c,qte(t)?r:r.set(t,l)]}))))))}),sS)}}const p3=oe(()=>pe(dte(new Map),e=>new Kte(e))),m3=S(2,(e,t)=>P(p3,n=>P(Ck(e,t),r=>r(n)))),Hte=S(3,(e,t,n)=>P(Ck(e,n),r=>r(t))),Ck=(e,t,n=!1)=>{const r=e;switch(r._op_layer){case"Locally":return N(()=>s=>r.f(s.getOrElseMemoize(r.self,t)));case"ExtendScope":return N(()=>s=>KD(i=>s.getOrElseMemoize(r.layer,i)));case"Fold":return N(()=>s=>v(s.getOrElseMemoize(r.layer,t),rr({onFailure:i=>s.getOrElseMemoize(r.failureK(i),t),onSuccess:i=>s.getOrElseMemoize(r.successK(i),t)})));case"Fresh":return N(()=>s=>v(r.layer,m3(t)));case"FromEffect":return N(n?()=>s=>r.effect:()=>s=>s.getOrElseMemoize(e,t));case"Provide":return N(()=>s=>v(s.getOrElseMemoize(r.first,t),P(i=>v(s.getOrElseMemoize(r.second,t),TL(i)))));case"Scoped":return N(n?()=>s=>nl(r.effect,t):()=>s=>s.getOrElseMemoize(e,t));case"Suspend":return N(()=>s=>s.getOrElseMemoize(r.evaluate(),t));case"ProvideMerge":return N(()=>s=>v(s.getOrElseMemoize(r.first,t),pL(s.getOrElseMemoize(r.second,t),r.zipK)));case"ZipWith":return N(()=>s=>v(s.getOrElseMemoize(r.first,t),_d(s.getOrElseMemoize(r.second,t),r.zipK,{concurrent:!0})))}},Wte=()=>$S(OL()),Jte=S(2,(e,t)=>{const n=By(e),r=n?e:t;return $S(pe(n?t:e,i=>Xh(r,i)))});function $S(e){const t=Object.create(yu);return t._op_layer=yte,t.effect=e,t}const Gte=S(2,(e,t)=>tne(e,t,(n,r)=>ed(n,r))),g3=(...e)=>{let t=e[0];for(let n=1;n<e.length;n++)t=Gte(t,e[n]);return t},Qte=S(2,(e,t)=>{const n=By(e),r=n?e:t;return Yte(pe(n?t:e,i=>Xh(r,i)))}),Yte=e=>{const t=Object.create(yu);return t._op_layer=Ste,t.effect=e,t},Xte=S(2,(e,t)=>{const n=By(e);return $S(D(Xh(n?e:t,n?t:e)))}),y3=e=>{const t=Object.create(yu);return t._op_layer=_te,t.evaluate=e,t},Zte=S(2,(e,t)=>{const n=By(e),r=n?e:t,s=n?t:e;return $S(N(()=>Xh(r,s())))}),ene=S(2,(e,t)=>y3(()=>{const n=Object.create(yu);return n._op_layer=vte,n.first=Object.create(yu,{_op_layer:{value:bte,enumerable:!0},first:{value:Wte(),enumerable:!0},second:{value:Array.isArray(t)?g3(...t):t},zipK:{value:(r,s)=>v(r,ed(s))}}),n.second=e,n})),tne=S(3,(e,t,n)=>y3(()=>{const r=Object.create(yu);return r._op_layer=wte,r.first=e,r.second=t,r.zipK=n,r})),dR=S(2,(e,t)=>X$(vS(),n=>P(m3(t,n),r=>hk(e,r)),(n,r)=>bg(n,r))),pR=S(2,(e,t)=>{const n=gh(gu.fiberRefs,t.fiberRefs),r=Xo(gu.runtimeFlags,t.runtimeFlags);return Nr(s=>xe(i=>{const o=i.getFiberRef(di),a=i.getFiberRefs(),c=yh(i.id(),a)(n),l=i.currentRuntimeFlags,f=Nc(r)(l),h=gh(c,a),d=Xo(f,l);return i.setFiberRefs(c),i.currentRuntimeFlags=f,vh(hk(s(e),ed(o,t.context)),xe(p=>(p.setFiberRefs(yh(p.id(),p.getFiberRefs())(h)),p.currentRuntimeFlags=Nc(d)(p.currentRuntimeFlags),Ze)))}))}),nne=S(2,(e,t)=>Array.isArray(t)?dR(e,g3(...t)):Vte(t)?dR(e,t):D8(t)?hk(e,t):mte in t?P(t.runtimeEffect,n=>pR(e,n)):pR(e,t)),rne=e=>ld(ph,t=>e(R$(t,pk))),sne=(...e)=>rne(t=>t.log(...e)),mR=Symbol.for("effect/MutableList"),ine={[mR]:mR,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(t==null)return e=!0,this.return();const n=t.value;return t=t.next,{done:e,value:n}},return(n){return e||(e=!0),{done:!0,value:n}}}},toString(){return rt(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(Ye)}},[Me](){return this.toJSON()},pipe(){return q(this,arguments)}},one=e=>({value:e,removed:!1,prev:void 0,next:void 0}),ane=()=>{const e=Object.create(ine);return e.head=void 0,e.tail=void 0,e._length=0,e},S3=e=>Rk(e)===0,Rk=e=>e._length,cne=S(2,(e,t)=>{const n=one(t);return e.head===void 0&&(e.head=n),e.tail===void 0||(e.tail.next=n,n.prev=e.tail),e.tail=n,e._length+=1,e}),une=e=>{const t=e.head;if(t!==void 0)return lne(e,t),t.value},lne=(e,t)=>{t.removed||(t.removed=!0,t.prev!==void 0&&t.next!==void 0?(t.prev.next=t.next,t.next.prev=t.prev):t.prev!==void 0?(e.tail=t.prev,t.prev.next=void 0):t.next!==void 0?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},gR=Symbol.for("effect/MutableQueue"),In=Symbol.for("effect/mutable/MutableQueue/Empty"),fne={[gR]:gR,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return rt(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(Ye)}},[Me](){return this.toJSON()},pipe(){return q(this,arguments)}},_3=e=>{const t=Object.create(fne);return t.queue=ane(),t.capacity=e,t},hne=e=>_3(e),Ik=()=>_3(void 0),Pk=e=>Rk(e.queue),ab=e=>S3(e.queue),dne=e=>e.capacity===void 0?1/0:e.capacity,wh=S(2,(e,t)=>{const n=Rk(e.queue);return e.capacity!==void 0&&n===e.capacity?!1:(cne(t)(e.queue),!0)}),v3=S(2,(e,t)=>{const n=t[Symbol.iterator]();let r,s=kn(),i=!0;for(;i&&(r=n.next())&&!r.done;)i=wh(r.value)(e);for(;r!=null&&!r.done;)s=gn(r.value)(s),r=n.next();return li(s)}),Zi=S(2,(e,t)=>S3(e.queue)?t:une(e.queue)),Fk=S(2,(e,t)=>{let n=kn(),r=0;for(;r<t;){const s=Zi(In)(e);if(s===In)break;n=gn(s)(n),r+=1}return li(n)}),cb=_a,rl=Ts,b3=VD,ti=mu,$h=lt,ni=bt,wp=fh,pne=A0,dm=f9,yR=am,Le=D,Qe=oe,kt=N,be=Ze,mne=ud,bd=lh,Nk=aL,gne=gY,Wa=As,Jr=tk,$p=cd,w3=Nr,_v=Vn,yne=Cs,Oe=pe,kS=oS,ka=LZ,Sne=X$,kp=vh,xk=HD,ub=KZ,_ne=ad,vne=_S,vv=l3,Cf=cte,lb=nne,No=hu,Tr=Yi,bne=s9,wne=kY,se=P,tc=sS,bv=eee,$3=JD,k3=cS,E3=wY,$ne=pY,SR=ste,kne=mD,fb=uL,Bs=rr,Ene=hi,One=i9,Tne=xte,Cne=ate,Rne=Lte,Ine=Ate,Su=Dte,_R=HZ,hb=WZ,Pn=JZ,ES=_d,Pne=e=>{const t=new Map;return new Proxy(e,{get(n,r,s){if(r in n)return Reflect.get(n,r,s);if(t.has(r))return t.get(r);const i=(...a)=>ef(n,c=>typeof c[r]=="function"?(t.set(r,(...l)=>ef(n,f=>f[r](...l))),c[r](...a)):(t.set(r,ef(n,l=>l[r])),c[r])),o=ef(n,a=>a[r]);return Object.assign(i,o),Object.setPrototypeOf(i,Object.getPrototypeOf(o)),t.set(r,i),i}})},Fne=function(){return function(){const[e,t]=arguments,n="accessors"in t?t.accessors:!1,r=Error.stackTraceLimit;Error.stackTraceLimit=2;const s=new Error;Error.stackTraceLimit=r;let i="unchecked";const o=function(f){if(i==="unchecked"){const h=Object.getPrototypeOf(f);if(h===Object.prototype||h===null)i="plain";else{const d=Object.getPrototypeOf(this);Object.setPrototypeOf(d,h),i="patched"}}if(i==="plain")Object.assign(this,f);else if(i==="patched")return Object.setPrototypeOf(f,Object.getPrototypeOf(this)),f};o.prototype._tag=e,Object.defineProperty(o,"make",{get(){return f=>new this(f)}}),Object.defineProperty(o,"use",{get(){return f=>ef(this,f)}}),o.key=e,Object.assign(o,M2),Object.defineProperty(o,"stack",{get(){return s.stack}});const a="dependencies"in t&&t.dependencies.length>0,c=a?"DefaultWithoutDependencies":"Default";let l;if("effect"in t?Object.defineProperty(o,c,{get(){return l??(l=Jte(o,Oe(t.effect,f=>new this(f))))}}):"scoped"in t?Object.defineProperty(o,c,{get(){return l??(l=Qte(o,Oe(t.scoped,f=>new this(f))))}}):"sync"in t?Object.defineProperty(o,c,{get(){return l??(l=Zte(o,()=>new this(t.sync())))}}):Object.defineProperty(o,c,{get(){return l??(l=Xte(o,new this(t.succeed)))}}),a){let f;Object.defineProperty(o,"Default",{get(){return f??(f=ene(this.DefaultWithoutDependencies,t.dependencies))}})}return n===!0?Pne(o):o}},Nne="effect/QueueEnqueue",xne=Symbol.for(Nne),Mne="effect/QueueDequeue",Ane=Symbol.for(Mne),Lne="effect/QueueStrategy",O3=Symbol.for(Lne),Dne="effect/BackingQueue",jne=Symbol.for(Dne),T3={_A:e=>e},Bne={_A:e=>e},zne={_In:e=>e},Une={_Out:e=>e};var EF,OF,TF;class Vne extends(TF=pd,OF=xne,EF=Ane,TF){constructor(n,r,s,i,o){super();u(this,"queue");u(this,"takers");u(this,"shutdownHook");u(this,"shutdownFlag");u(this,"strategy");u(this,OF,zne);u(this,EF,Une);this.queue=n,this.takers=r,this.shutdownHook=s,this.shutdownFlag=i,this.strategy=o}pipe(){return q(this,arguments)}commit(){return this.take}capacity(){return this.queue.capacity()}get size(){return oe(()=>lh(this.unsafeSize(),()=>As))}unsafeSize(){return Et(this.shutdownFlag)?L():z(this.queue.length()-Pk(this.takers)+this.strategy.surplusSize())}get isEmpty(){return pe(this.size,n=>n<=0)}get isFull(){return pe(this.size,n=>n>=this.capacity())}get shutdown(){return cd(xe(n=>(v(this.shutdownFlag,nd(!0)),v(ei(Mc(this.takers),r=>EL(r,n.id()),!1,!1),zt(this.strategy.shutdown),hL(lk(this.shutdownHook,void 0)),Cs))))}get isShutdown(){return N(()=>Et(this.shutdownFlag))}get awaitShutdown(){return ba(this.shutdownHook)}isActive(){return!Et(this.shutdownFlag)}unsafeOffer(n){if(Et(this.shutdownFlag))return!1;let r;if(this.queue.length()===0){const i=v(this.takers,Zi(In));i!==In?(ea(i,n),r=!0):r=!1}else r=!1;if(r)return!0;const s=this.queue.offer(n);return vc(this.strategy,this.queue,this.takers),s}offer(n){return oe(()=>{if(Et(this.shutdownFlag))return As;let r;if(this.queue.length()===0){const i=v(this.takers,Zi(In));i!==In?(ea(i,n),r=!0):r=!1}else r=!1;if(r)return D(!0);const s=this.queue.offer(n);return vc(this.strategy,this.queue,this.takers),s?D(!0):this.strategy.handleSurplus([n],this.queue,this.takers,this.shutdownFlag)})}offerAll(n){return oe(()=>{if(Et(this.shutdownFlag))return As;const r=Fe(n),s=this.queue.length()===0?Fe(ire(this.takers,r.length)):pa,[i,o]=v(r,Z2(s.length));for(let c=0;c<s.length;c++){const l=s[c],f=i[c];ea(l,f)}if(o.length===0)return D(!0);const a=this.queue.offerAll(o);return vc(this.strategy,this.queue,this.takers),A$(a)?D(!0):this.strategy.handleSurplus(a,this.queue,this.takers,this.shutdownFlag)})}get take(){return xe(n=>{if(Et(this.shutdownFlag))return As;const r=this.queue.poll(In);if(r!==In)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),D(r);{const s=hS(n.id());return v(oe(()=>(v(this.takers,wh(s)),vc(this.strategy,this.queue,this.takers),Et(this.shutdownFlag)?As:ba(s))),aS(()=>N(()=>ore(this.takers,s))))}})}get takeAll(){return oe(()=>Et(this.shutdownFlag)?As:N(()=>{const n=this.queue.pollUpTo(Number.POSITIVE_INFINITY);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),tu(n)}))}takeUpTo(n){return oe(()=>Et(this.shutdownFlag)?As:N(()=>{const r=this.queue.pollUpTo(n);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),tu(r)}))}takeBetween(n,r){return oe(()=>C3(this,n,r,kn()))}}const C3=(e,t,n,r)=>n<t?D(r):v(Zne(e,n),P(s=>{const i=t-s.length;return i===1?v(db(e),pe(o=>v(r,St(s),y0(o)))):i>1?v(db(e),P(o=>C3(e,i-1,n-s.length-1,v(r,St(s),y0(o))))):D(v(r,St(s)))})),qne=e=>v(N(()=>hne(e)),P(t=>R3(I3(t),tre()))),Kne=()=>v(N(()=>Ik()),P(e=>R3(I3(e),nre()))),Hne=(e,t,n,r,s)=>new Vne(e,t,n,r,s),R3=(e,t)=>v(uk(),pe(n=>Hne(e,Ik(),n,td(!1),t)));var CF;CF=jne;class Wne{constructor(t){u(this,"mutable");u(this,CF,Bne);this.mutable=t}poll(t){return Zi(this.mutable,t)}pollUpTo(t){return Fk(this.mutable,t)}offerAll(t){return v3(this.mutable,t)}offer(t){return wh(this.mutable,t)}capacity(){return dne(this.mutable)}length(){return Pk(this.mutable)}}const I3=e=>new Wne(e),Jne=e=>e.size,Gne=e=>e.isShutdown,Qne=e=>e.shutdown,Yne=S(2,(e,t)=>e.offer(t)),Xne=S(2,(e,t)=>e.unsafeOffer(t)),db=e=>e.take,Zne=S(2,(e,t)=>e.takeUpTo(t)),ere=S(3,(e,t,n)=>e.takeBetween(t,n)),tre=()=>new rre,nre=()=>new sre;var RF;RF=O3;class rre{constructor(){u(this,RF,T3);u(this,"putters",Ik())}surplusSize(){return Pk(this.putters)}onCompleteTakersWithEmptyQueue(t){for(;!ab(this.putters)&&!ab(t);){const n=Zi(t,void 0),r=Zi(this.putters,void 0);r[2]&&ea(r[1],!0),ea(n,r[0])}}get shutdown(){return v(rS,P(t=>v(N(()=>Mc(this.putters)),P(n=>ei(n,([r,s,i])=>i?v(EL(s,t),Cs):Ze,!1,!1)))))}handleSurplus(t,n,r,s){return xe(i=>{const o=hS(i.id());return v(oe(()=>(this.unsafeOffer(t,o),this.unsafeOnQueueEmptySpace(n,r),vc(this,n,r),Et(s)?As:ba(o))),aS(()=>N(()=>this.unsafeRemove(o))))})}unsafeOnQueueEmptySpace(t,n){let r=!0;for(;r&&(t.capacity()===Number.POSITIVE_INFINITY||t.length()<t.capacity());){const s=v(this.putters,Zi(In));if(s===In)r=!1;else{const i=t.offer(s[0]);i&&s[2]?ea(s[1],!0):i||xg(this.putters,v(Mc(this.putters),gn(s))),vc(this,t,n)}}}unsafeOffer(t,n){const r=Fe(t);for(let s=0;s<r.length;s++){const i=r[s];s===r.length-1?v(this.putters,wh([i,n,!0])):v(this.putters,wh([i,n,!1]))}}unsafeRemove(t){xg(this.putters,v(Mc(this.putters),M$(([,n])=>n!==t)))}}var IF;IF=O3;class sre{constructor(){u(this,IF,T3)}surplusSize(){return 0}get shutdown(){return Ze}onCompleteTakersWithEmptyQueue(){}handleSurplus(t,n,r,s){return D(!1)}unsafeOnQueueEmptySpace(t,n){}}const ea=(e,t)=>fk(e,D(t)),xg=(e,t)=>v(e,v3(t)),Mc=e=>v(e,Fk(Number.POSITIVE_INFINITY)),ire=(e,t)=>v(e,Fk(t)),ore=(e,t)=>{xg(e,v(Mc(e),M$(n=>t!==n)))},vc=(e,t,n)=>{let r=!0;for(;r&&t.length()!==0;){const s=v(n,Zi(In));if(s!==In){const i=t.poll(In);i!==In?(ea(s,i),e.unsafeOnQueueEmptySpace(t,n)):xg(n,v(Mc(n),gn(s))),r=!0}else r=!1}r&&t.length()===0&&!ab(n)&&e.onCompleteTakersWithEmptyQueue(n)},P3=qne,are=Kne,cre=Jne,ure=Gne,Mg=Qne,Ja=Yne,lre=Xne,vR=db,fre=ere,hre=p3,dre=Hte,pre=S(2,(e,t)=>e.publish(t)),mre=pre,F3="Continue",gre="Close",yre="Yield",Sre="effect/ChannelChildExecutorDecision",bR=Symbol.for(Sre),_re={[bR]:bR},N3=e=>{const t=Object.create(_re);return t._tag=F3,t},pm="ContinuationK",vre="ContinuationFinalizer",x3=Symbol.for("effect/ChannelContinuation"),M3={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutDone:e=>e,_OutErr2:e=>e,_OutElem:e=>e,_OutDone2:e=>e};var PF;PF=x3;class A3{constructor(t,n){u(this,"onSuccess");u(this,"onHalt");u(this,"_tag",pm);u(this,PF,M3);this.onSuccess=t,this.onHalt=n}onExit(t){return EY(t)?this.onHalt(t.cause):this.onSuccess(t.value)}}var FF;FF=x3;class bre{constructor(t){u(this,"finalizer");u(this,"_tag",vre);u(this,FF,M3);this.finalizer=t}}const L3="PullAfterNext",wre="PullAfterAllEnqueued",$re="effect/ChannelUpstreamPullStrategy",kre=Symbol.for($re),Ere={_A:e=>e},Ore={[kre]:Ere},D3=e=>{const t=Object.create(Ore);return t._tag=L3,t.emitSeparator=e,t},j3="BracketOut",B3="Bridge",Mk="ConcatAll",z3="Emit",U3="Ensuring",V3="Fail",q3="Fold",K3="FromEffect",H3="PipeTo",Tre="Provide",W3="Read",J3="Succeed",G3="SucceedNow",Q3="Suspend",Cre="effect/Channel",Y3=Symbol.for(Cre),Rre={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},qn={[Y3]:Rre,pipe(){return q(this,arguments)}},X3=e=>G(e,Y3)||rl(e),Ire=S(2,(e,t)=>{const n=Object.create(qn);return n._tag=j3,n.acquire=()=>e,n.finalizer=t,n}),Pre=(e,t,n)=>{const r=Object.create(qn);return r._tag=Mk,r.combineInners=t,r.combineAll=n,r.onPull=()=>D3(L()),r.onEmit=()=>N3,r.value=()=>e,r.k=de,r},Fre=S(4,(e,t,n,r)=>{const s=Object.create(qn);return s._tag=Mk,s.combineInners=n,s.combineAll=r,s.onPull=()=>D3(L()),s.onEmit=()=>N3,s.value=()=>e,s.k=t,s}),Z3=S(2,(e,t)=>{const n=Object.create(qn);return n._tag=B3,n.input=t,n.channel=e,n}),Nre=S(2,(e,t)=>{const n=Object.create(qn);return n._tag=U3,n.channel=e,n.finalizer=t,n}),OS=e=>ss(GD(e)),ss=e=>xre(()=>e),xre=e=>{const t=Object.create(qn);return t._tag=V3,t.error=e,t},Rt=S(2,(e,t)=>{const n=Object.create(qn);return n._tag=q3,n.channel=e,n.k=new A3(t,ss),n}),Gn=e=>{const t=Object.create(qn);return t._tag=K3,t.effect=()=>e,t},ws=S(2,(e,t)=>{const n=Object.create(qn);return n._tag=H3,n.left=()=>e,n.right=()=>t,n}),Ak=e=>TS({onInput:e.onInput,onFailure:t=>kr(iee(t),{onLeft:e.onFailure,onRight:ss}),onDone:e.onDone}),TS=e=>{const t=Object.create(qn);return t._tag=W3,t.more=e.onInput,t.done=new A3(e.onDone,e.onFailure),t},ej=e=>nj(()=>e),kh=e=>{const t=Object.create(qn);return t._tag=G3,t.terminal=e,t},tj=e=>{const t=Object.create(qn);return t._tag=Q3,t.channel=e,t},nj=e=>{const t=Object.create(qn);return t._tag=J3,t.evaluate=e,t},wi=kh(void 0),Zt=e=>{const t=Object.create(qn);return t._tag=z3,t.out=e,t},wd="Done",$d="Emit",sl="FromEffect",kd="Read",Mre=Symbol.for("effect/ChannelState"),Are={_E:e=>e,_R:e=>e},CS={[Mre]:Are},Ga=()=>{const e=Object.create(CS);return e._tag=wd,e},wv=()=>{const e=Object.create(CS);return e._tag=$d,e},Bl=e=>{const t=Object.create(CS);return t._tag=sl,t.effect=e,t},$v=(e,t,n,r)=>{const s=Object.create(CS);return s._tag=kd,s.upstream=e,s.onEffect=t,s.onEmit=n,s.onDone=r,s},Ag=e=>e._tag===sl,Lre=e=>Ag(e)?e.effect:be,wR=e=>Ag(e)?gne(e.effect):void 0,rj="PullFromChild",pb="PullFromUpstream",mb="DrainChildExecutors",sj="Emit";class Ep{constructor(t,n,r){u(this,"childExecutor");u(this,"parentSubexecutor");u(this,"onEmit");u(this,"_tag",rj);this.childExecutor=t,this.parentSubexecutor=n,this.onEmit=r}close(t){const n=this.childExecutor.close(t),r=this.parentSubexecutor.close(t);return n!==void 0&&r!==void 0?ES(Tr(n),Tr(r),(s,i)=>v(s,_h(i))):n!==void 0?n:r!==void 0?r:void 0}enqueuePullFromChild(t){return this}}class Ao{constructor(t,n,r,s,i,o,a,c){u(this,"upstreamExecutor");u(this,"createChild");u(this,"lastDone");u(this,"activeChildExecutors");u(this,"combineChildResults");u(this,"combineWithChildResult");u(this,"onPull");u(this,"onEmit");u(this,"_tag",pb);this.upstreamExecutor=t,this.createChild=n,this.lastDone=r,this.activeChildExecutors=s,this.combineChildResults=i,this.combineWithChildResult=o,this.onPull=a,this.onEmit=c}close(t){const n=this.upstreamExecutor.close(t),s=[...this.activeChildExecutors.map(i=>i!==void 0?i.childExecutor.close(t):void 0),n].reduce((i,o)=>i!==void 0&&o!==void 0?ES(i,Tr(o),(a,c)=>_h(a,c)):i!==void 0?i:o!==void 0?Tr(o):void 0,void 0);return s}enqueuePullFromChild(t){return new Ao(this.upstreamExecutor,this.createChild,this.lastDone,[...this.activeChildExecutors,t],this.combineChildResults,this.combineWithChildResult,this.onPull,this.onEmit)}}class bc{constructor(t,n,r,s,i,o,a){u(this,"upstreamExecutor");u(this,"lastDone");u(this,"activeChildExecutors");u(this,"upstreamDone");u(this,"combineChildResults");u(this,"combineWithChildResult");u(this,"onPull");u(this,"_tag",mb);this.upstreamExecutor=t,this.lastDone=n,this.activeChildExecutors=r,this.upstreamDone=s,this.combineChildResults=i,this.combineWithChildResult=o,this.onPull=a}close(t){const n=this.upstreamExecutor.close(t),s=[...this.activeChildExecutors.map(i=>i!==void 0?i.childExecutor.close(t):void 0),n].reduce((i,o)=>i!==void 0&&o!==void 0?ES(i,Tr(o),(a,c)=>_h(a,c)):i!==void 0?i:o!==void 0?Tr(o):void 0,void 0);return s}enqueuePullFromChild(t){return new bc(this.upstreamExecutor,this.lastDone,[...this.activeChildExecutors,t],this.upstreamDone,this.combineChildResults,this.combineWithChildResult,this.onPull)}}class kv{constructor(t,n){u(this,"value");u(this,"next");u(this,"_tag",sj);this.value=t,this.next=n}close(t){const n=this.next.close(t);return n}enqueuePullFromChild(t){return this}}const Dre="Pulled",jre="NoUpstream",Bre="effect/ChannelUpstreamPullRequest",zre=Symbol.for(Bre),Ure={_A:e=>e},ij={[zre]:Ure},$R=e=>{const t=Object.create(ij);return t._tag=Dre,t.value=e,t},Vre=e=>{const t=Object.create(ij);return t._tag=jre,t.activeDownstreamCount=e,t};class Uo{constructor(t,n,r){u(this,"_activeSubexecutor");u(this,"_cancelled");u(this,"_closeLastSubstream");u(this,"_currentChannel");u(this,"_done");u(this,"_doneStack",[]);u(this,"_emitted");u(this,"_executeCloseLastSubstream");u(this,"_input");u(this,"_inProgressFinalizer");u(this,"_providedEnv");this._currentChannel=t,this._executeCloseLastSubstream=r,this._providedEnv=n}run(){let t;for(;t===void 0;)if(this._cancelled!==void 0)t=this.processCancellation();else if(this._activeSubexecutor!==void 0)t=this.runSubexecutor();else try{if(this._currentChannel===void 0)t=Ga();else switch(rl(this._currentChannel)&&(this._currentChannel=Gn(this._currentChannel)),this._currentChannel._tag){case j3:{t=this.runBracketOut(this._currentChannel);break}case B3:{const n=this._currentChannel.input;if(this._currentChannel=this._currentChannel.channel,this._input!==void 0){const r=this._input;this._input=void 0;const s=()=>se(n.awaitRead(),()=>Qe(()=>{const i=r.run();switch(i._tag){case wd:return Qs(r.getDone(),{onFailure:o=>n.error(o),onSuccess:o=>n.done(o)});case $d:return se(n.emit(r.getEmit()),()=>s());case sl:return Bs(i.effect,{onFailure:o=>n.error(o),onSuccess:()=>s()});case kd:return Lk(i,()=>s(),o=>n.error(o))}}));t=Bl(se(vne(Jr(s())),i=>kt(()=>this.addFinalizer(o=>se(xc(i),()=>Qe(()=>{const a=this.restorePipe(o,r);return a!==void 0?a:be}))))))}break}case Mk:{const n=new Uo(this._currentChannel.value(),this._providedEnv,s=>kt(()=>{const i=this._closeLastSubstream===void 0?be:this._closeLastSubstream;this._closeLastSubstream=v(i,Pn(s))}));n._input=this._input;const r=this._currentChannel;this._activeSubexecutor=new Ao(n,s=>r.k(s),void 0,[],(s,i)=>r.combineInners(s,i),(s,i)=>r.combineAll(s,i),s=>r.onPull(s),s=>r.onEmit(s)),this._closeLastSubstream=void 0,this._currentChannel=void 0;break}case z3:{this._emitted=this._currentChannel.out,this._currentChannel=this._activeSubexecutor!==void 0?void 0:wi,t=wv();break}case U3:{this.runEnsuring(this._currentChannel);break}case V3:{t=this.doneHalt(this._currentChannel.error());break}case q3:{this._doneStack.push(this._currentChannel.k),this._currentChannel=this._currentChannel.channel;break}case K3:{const n=this._providedEnv===void 0?this._currentChannel.effect():v(this._currentChannel.effect(),lb(this._providedEnv));t=Bl(Bs(n,{onFailure:r=>{const s=this.doneHalt(r);return s!==void 0&&Ag(s)?s.effect:be},onSuccess:r=>{const s=this.doneSucceed(r);return s!==void 0&&Ag(s)?s.effect:be}}));break}case H3:{const n=this._input,r=new Uo(this._currentChannel.left(),this._providedEnv,s=>this._executeCloseLastSubstream(s));r._input=n,this._input=r,this.addFinalizer(s=>{const i=this.restorePipe(s,n);return i!==void 0?i:be}),this._currentChannel=this._currentChannel.right();break}case Tre:{const n=this._providedEnv;this._providedEnv=this._currentChannel.context(),this._currentChannel=this._currentChannel.inner,this.addFinalizer(()=>kt(()=>{this._providedEnv=n}));break}case W3:{const n=this._currentChannel;t=$v(this._input,de,r=>{try{this._currentChannel=n.more(r)}catch(s){this._currentChannel=n.done.onExit(TY(s))}},r=>{const s=i=>n.done.onExit(i);this._currentChannel=s(r)});break}case J3:{t=this.doneSucceed(this._currentChannel.evaluate());break}case G3:{t=this.doneSucceed(this._currentChannel.terminal);break}case Q3:{this._currentChannel=this._currentChannel.channel();break}default:this._currentChannel._tag}}catch(n){this._currentChannel=ss(QD(n))}return t}getDone(){return this._done}getEmit(){return this._emitted}cancelWith(t){this._cancelled=t}clearInProgressFinalizer(){this._inProgressFinalizer=void 0}storeInProgressFinalizer(t){this._inProgressFinalizer=t}popAllFinalizers(t){const n=[];let r=this._doneStack.pop();for(;r;)r._tag==="ContinuationFinalizer"&&n.push(r.finalizer),r=this._doneStack.pop();const s=n.length===0?be:Ov(n,t);return this.storeInProgressFinalizer(s),s}popNextFinalizers(){const t=[];for(;this._doneStack.length!==0;){const n=this._doneStack[this._doneStack.length-1];if(n._tag===pm)return t;t.push(n),this._doneStack.pop()}return t}restorePipe(t,n){const r=this._input;return this._input=n,r!==void 0?r.close(t):be}close(t){let n;const r=this._inProgressFinalizer;r!==void 0&&(n=v(r,kp(kt(()=>this.clearInProgressFinalizer()))));let s;const i=this.popAllFinalizers(t);i!==void 0&&(s=v(i,kp(kt(()=>this.clearInProgressFinalizer()))));const o=this._activeSubexecutor===void 0?void 0:this._activeSubexecutor.close(t);if(!(o===void 0&&n===void 0&&s===void 0))return v(Tr(Ev(o)),_R(Tr(Ev(n))),_R(Tr(Ev(s))),Oe(([[a,c],l])=>v(a,_h(c),_h(l))),$p,se(a=>Qe(()=>a)))}doneSucceed(t){if(this._doneStack.length===0)return this._done=wr(t),this._currentChannel=void 0,Ga();const n=this._doneStack[this._doneStack.length-1];if(n._tag===pm){this._doneStack.pop(),this._currentChannel=n.onSuccess(t);return}const r=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=r.reverse(),this._done=wr(t),this._currentChannel=void 0,Ga();const s=Ov(r.map(o=>o.finalizer),wr(t));this.storeInProgressFinalizer(s);const i=v(s,kp(kt(()=>this.clearInProgressFinalizer())),$p,se(()=>kt(()=>this.doneSucceed(t))));return Bl(i)}doneHalt(t){if(this._doneStack.length===0)return this._done=Er(t),this._currentChannel=void 0,Ga();const n=this._doneStack[this._doneStack.length-1];if(n._tag===pm){this._doneStack.pop(),this._currentChannel=n.onHalt(t);return}const r=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=r.reverse(),this._done=Er(t),this._currentChannel=void 0,Ga();const s=Ov(r.map(o=>o.finalizer),Er(t));this.storeInProgressFinalizer(s);const i=v(s,kp(kt(()=>this.clearInProgressFinalizer())),$p,se(()=>kt(()=>this.doneHalt(t))));return Bl(i)}processCancellation(){return this._currentChannel=void 0,this._done=this._cancelled,this._cancelled=void 0,Ga()}runBracketOut(t){const n=$p(Bs(this.provide(t.acquire()),{onFailure:r=>kt(()=>{this._currentChannel=ss(r)}),onSuccess:r=>kt(()=>{this.addFinalizer(s=>this.provide(t.finalizer(r,s))),this._currentChannel=Zt(r)})}));return Bl(n)}provide(t){return this._providedEnv===void 0?t:v(t,lb(this._providedEnv))}runEnsuring(t){this.addFinalizer(t.finalizer),this._currentChannel=t.channel}addFinalizer(t){this._doneStack.push(new bre(t))}runSubexecutor(){const t=this._activeSubexecutor;switch(t._tag){case rj:return this.pullFromChild(t.childExecutor,t.parentSubexecutor,t.onEmit,t);case pb:return this.pullFromUpstream(t);case mb:return this.drainChildExecutors(t);case sj:return this._emitted=t.value,this._activeSubexecutor=t.next,wv()}}replaceSubexecutor(t){this._currentChannel=void 0,this._activeSubexecutor=t}finishWithExit(t){const n=Qs(t,{onFailure:r=>this.doneHalt(r),onSuccess:r=>this.doneSucceed(r)});return this._activeSubexecutor=void 0,n===void 0?be:Lre(n)}finishSubexecutorWithCloseEffect(t,...n){this.addFinalizer(()=>v(n,ti(s=>v(kt(()=>s(t)),se(i=>i!==void 0?i:be)),{discard:!0})));const r=v(t,Qs({onFailure:s=>this.doneHalt(s),onSuccess:s=>this.doneSucceed(s)}));return this._activeSubexecutor=void 0,r}applyUpstreamPullStrategy(t,n,r){switch(r._tag){case L3:{const s=!t||n.some(i=>i!==void 0);return[r.emitSeparator,s?[void 0,...n]:n]}case wre:{const s=!t||n.some(i=>i!==void 0);return[r.emitSeparator,s?[...n,void 0]:n]}}}pullFromChild(t,n,r,s){return $v(t,de,i=>{const o=r(i);switch(o._tag){case F3:break;case gre:{this.finishWithDoneValue(t,n,o.value);break}case yre:{const a=n.enqueuePullFromChild(s);this.replaceSubexecutor(a);break}}this._activeSubexecutor=new kv(i,this._activeSubexecutor)},Qs({onFailure:i=>{const o=this.handleSubexecutorFailure(t,n,i);return o===void 0?void 0:wR(o)},onSuccess:i=>{this.finishWithDoneValue(t,n,i)}}))}finishWithDoneValue(t,n,r){const s=n;switch(s._tag){case pb:{const i=new Ao(s.upstreamExecutor,s.createChild,s.lastDone!==void 0?s.combineChildResults(s.lastDone,r):r,s.activeChildExecutors,s.combineChildResults,s.combineWithChildResult,s.onPull,s.onEmit);this._closeLastSubstream=t.close(wr(r)),this.replaceSubexecutor(i);break}case mb:{const i=new bc(s.upstreamExecutor,s.lastDone!==void 0?s.combineChildResults(s.lastDone,r):r,s.activeChildExecutors,s.upstreamDone,s.combineChildResults,s.combineWithChildResult,s.onPull);this._closeLastSubstream=t.close(wr(r)),this.replaceSubexecutor(i);break}}}handleSubexecutorFailure(t,n,r){return this.finishSubexecutorWithCloseEffect(Er(r),s=>n.close(s),s=>t.close(s))}pullFromUpstream(t){if(t.activeChildExecutors.length===0)return this.performPullFromUpstream(t);const n=t.activeChildExecutors[0],r=new Ao(t.upstreamExecutor,t.createChild,t.lastDone,t.activeChildExecutors.slice(1),t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit);if(n===void 0)return this.performPullFromUpstream(r);this.replaceSubexecutor(new Ep(n.childExecutor,r,n.onEmit))}performPullFromUpstream(t){return $v(t.upstreamExecutor,n=>{const r=this._closeLastSubstream===void 0?be:this._closeLastSubstream;return this._closeLastSubstream=void 0,v(this._executeCloseLastSubstream(r),Pn(n))},n=>{if(this._closeLastSubstream!==void 0){const o=this._closeLastSubstream;return this._closeLastSubstream=void 0,v(this._executeCloseLastSubstream(o),Oe(()=>{const a=new Uo(t.createChild(n),this._providedEnv,this._executeCloseLastSubstream);a._input=this._input;const[c,l]=this.applyUpstreamPullStrategy(!1,t.activeChildExecutors,t.onPull($R(n)));this._activeSubexecutor=new Ep(a,new Ao(t.upstreamExecutor,t.createChild,t.lastDone,l,t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit),t.onEmit),Ie(c)&&(this._activeSubexecutor=new kv(c.value,this._activeSubexecutor))}))}const r=new Uo(t.createChild(n),this._providedEnv,this._executeCloseLastSubstream);r._input=this._input;const[s,i]=this.applyUpstreamPullStrategy(!1,t.activeChildExecutors,t.onPull($R(n)));this._activeSubexecutor=new Ep(r,new Ao(t.upstreamExecutor,t.createChild,t.lastDone,i,t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit),t.onEmit),Ie(s)&&(this._activeSubexecutor=new kv(s.value,this._activeSubexecutor))},n=>{if(t.activeChildExecutors.some(i=>i!==void 0)){const i=new bc(t.upstreamExecutor,t.lastDone,[void 0,...t.activeChildExecutors],t.upstreamExecutor.getDone(),t.combineChildResults,t.combineWithChildResult,t.onPull);if(this._closeLastSubstream!==void 0){const o=this._closeLastSubstream;return this._closeLastSubstream=void 0,v(this._executeCloseLastSubstream(o),Oe(()=>this.replaceSubexecutor(i)))}this.replaceSubexecutor(i);return}const r=this._closeLastSubstream,s=this.finishSubexecutorWithCloseEffect(v(n,RY(i=>t.combineWithChildResult(t.lastDone,i))),()=>r,i=>t.upstreamExecutor.close(i));return s===void 0?void 0:wR(s)})}drainChildExecutors(t){if(t.activeChildExecutors.length===0){const i=this._closeLastSubstream;return i!==void 0&&this.addFinalizer(()=>Le(i)),this.finishSubexecutorWithCloseEffect(t.upstreamDone,()=>i,o=>t.upstreamExecutor.close(o))}const n=t.activeChildExecutors[0],r=t.activeChildExecutors.slice(1);if(n===void 0){const[i,o]=this.applyUpstreamPullStrategy(!0,r,t.onPull(Vre(r.reduce((a,c)=>c!==void 0?a+1:a,0))));return this.replaceSubexecutor(new bc(t.upstreamExecutor,t.lastDone,o,t.upstreamDone,t.combineChildResults,t.combineWithChildResult,t.onPull)),Ie(i)?(this._emitted=i.value,wv()):void 0}const s=new bc(t.upstreamExecutor,t.lastDone,r,t.upstreamDone,t.combineChildResults,t.combineWithChildResult,t.onPull);this.replaceSubexecutor(new Ep(n.childExecutor,s,n.onEmit))}}const Ev=e=>e!==void 0?e:be,Ov=(e,t)=>v(ti(e,n=>Tr(n(t))),Oe(n=>v(OY(n),Ke(()=>gD))),se(n=>Qe(()=>n))),Lk=(e,t,n)=>{const r=[e],s=()=>{const i=r.pop();if(i===void 0||i.upstream===void 0)return pne("Unexpected end of input for channel execution");const o=i.upstream.run();switch(o._tag){case $d:{const a=i.onEmit(i.upstream.getEmit());return r.length===0?a===void 0?Qe(t):v(a,Bs({onFailure:n,onSuccess:t})):a===void 0?Qe(()=>s()):v(a,Bs({onFailure:n,onSuccess:()=>s()}))}case wd:{const a=i.onDone(i.upstream.getDone());return r.length===0?a===void 0?Qe(t):v(a,Bs({onFailure:n,onSuccess:t})):a===void 0?Qe(()=>s()):v(a,Bs({onFailure:n,onSuccess:()=>s()}))}case sl:return r.push(i),v(i.onEffect(o.effect),Nk(a=>Qe(()=>{const c=i.onDone(Er(a));return c===void 0?be:c})),Bs({onFailure:n,onSuccess:()=>s()}));case kd:return r.push(i),r.push(o),Qe(()=>s())}};return s()},qre=e=>v(Kre(e),ub),Kre=e=>{const t=(n,r,s)=>Sne(kt(()=>new Uo(e,void 0,de)),i=>Qe(()=>v(mm(i.run(),i),bne(n),Pn(bn(n)),hb(bn(r)))),(i,o)=>{const a=i.close(o);return a===void 0?be:E3(a,c=>uR(s,ni(c)))});return w3(n=>se(xk,r=>v(b3([s3(r,$g),Gs(),Gs()]),se(([s,i,o])=>v(Cf(n(t(i,o,s))),se(a=>v(uR(r,Di(o,void 0).pipe(Pn(mne()))),Pn(n(bn(i))),hb(kte(a)))))))))},mm=(e,t)=>{const n=e;switch(n._tag){case sl:return v(n.effect,se(()=>mm(t.run(),t)));case $d:return mm(t.run(),t);case wd:return Qe(()=>t.getDone());case kd:return Lk(n,()=>mm(t.run(),t),ni)}},Hre="Done",Wre="Await",Jre="effect/ChannelMergeDecision",Gre=Symbol.for(Jre),Qre={[Gre]:{_R:e=>e,_E0:e=>e,_Z0:e=>e,_E:e=>e,_Z:e=>e}},kR=e=>{const t=Object.create(Qre);return t._tag=Wre,t.f=e,t},oj="BothRunning",aj="LeftDone",cj="RightDone",Yre="effect/ChannelMergeState",ER=Symbol.for(Yre),Dk={[ER]:ER},Tv=(e,t)=>{const n=Object.create(Dk);return n._tag=oj,n.left=e,n.right=t,n},OR=e=>{const t=Object.create(Dk);return t._tag=aj,t.f=e,t},TR=e=>{const t=Object.create(Dk);return t._tag=cj,t.f=e,t},uj="BackPressure",lj="BufferSliding",Xre="effect/ChannelMergeStrategy",CR=Symbol.for(Xre),fj={[CR]:CR},Zre=e=>{const t=Object.create(fj);return t._tag=uj,t},ese=e=>{const t=Object.create(fj);return t._tag=lj,t},tse=S(2,(e,{onBackPressure:t,onBufferSliding:n})=>{switch(e._tag){case uj:return t();case lj:return n()}}),nc="Empty",tf="Emit",nf="Error",rf="Done",hj=e=>({_tag:nc,notifyProducer:e}),Cv=e=>({_tag:tf,notifyConsumers:e}),nse=e=>({_tag:nf,cause:e}),rse=e=>({_tag:rf,done:e});class sse{constructor(t){u(this,"ref");this.ref=t}awaitRead(){return tc(Ml(this.ref,t=>t._tag===nc?[bn(t.notifyProducer),t]:[be,t]))}get close(){return _ne(t=>this.error(ree(t)))}done(t){return tc(Ml(this.ref,n=>{switch(n._tag){case nc:return[bn(n.notifyProducer),n];case tf:return[ti(n.notifyConsumers,r=>Di(r,re(t)),{discard:!0}),rse(t)];case nf:return[Wa,n];case rf:return[Wa,n]}}))}emit(t){return se(Gs(),n=>tc(Ml(this.ref,r=>{switch(r._tag){case nc:return[bn(r.notifyProducer),r];case tf:{const s=r.notifyConsumers[0],i=r.notifyConsumers.slice(1);if(s!==void 0)return[Di(s,qe(t)),i.length===0?hj(n):Cv(i)];throw new Error("Bug: Channel.SingleProducerAsyncInput.emit - Queue was empty! please report an issue at https://github.com/Effect-TS/effect/issues")}case nf:return[Wa,r];case rf:return[Wa,r]}})))}error(t){return tc(Ml(this.ref,n=>{switch(n._tag){case nc:return[bn(n.notifyProducer),n];case tf:return[ti(n.notifyConsumers,r=>WG(r,t),{discard:!0}),nse(t)];case nf:return[Wa,n];case rf:return[Wa,n]}}))}get take(){return this.takeWith(t=>Er(oee(t,re)),t=>wr(t),t=>J0(qe(t)))}takeWith(t,n,r){return se(Gs(),s=>tc(Ml(this.ref,i=>{switch(i._tag){case nc:return[Pn(Di(i.notifyProducer,void 0),fb(bn(s),{onFailure:t,onSuccess:kr({onLeft:r,onRight:n})})),Cv([s])];case tf:return[fb(bn(s),{onFailure:t,onSuccess:kr({onLeft:r,onRight:n})}),Cv([...i.notifyConsumers,s])];case nf:return[Le(t(i.cause)),i];case rf:return[Le(r(i.done)),i]}})))}}const dj=()=>v(Gs(),se(e=>uD(hj(e))),Oe(e=>new sse(e))),gb=S(2,(e,t)=>Fre(e,t,()=>{},()=>{})),ise=e=>{const t=TS({onInput:()=>t,onFailure:ss,onDone:ej});return ws(e,t)},pj=S(2,(e,t)=>Nre(e,()=>t)),ose=e=>Rt(e,de),jk=e=>eo(e.takeWith(ss,t=>Rt(Zt(t),()=>jk(e)),ej)),mj=S(2,(e,t)=>Rt(e,n=>nj(()=>t(n)))),gj=S(2,(e,t)=>{const n=Ak({onInput:r=>Rt(Zt(t(r)),()=>n),onFailure:OS,onDone:kh});return ws(e,n)}),ase=e=>t=>cse(e)(t,f0),cse=({bufferSize:e=16,concurrency:t,mergeStrategy:n=Zre()})=>(r,s)=>v(dm(function*(i){const o=t==="unbounded"?Number.MAX_SAFE_INTEGER:t,a=yield*i(dj()),c=jk(a),l=yield*i(ka(P3(e),w=>Mg(w))),f=yield*i(ka(are(),w=>Mg(w))),h=yield*i(uD(L())),d=yield*i(Gs()),p=(yield*i(Cne(o))).withPermits,_=yield*i(Ac(r)),b=w=>v(se(w,kr({onLeft:m=>Le(z(m)),onRight:m=>_v(Ja(l,Le(qe(m))),L())})),SR({until:m=>Ie(m)}),se(m=>rY(h,Ft({onNone:()=>z(m.value),onSome:g=>z(s(g,m.value))}))),Nk(m=>YD(m)?ni(m):v(Ja(l,ni(m)),Pn(Di(d,void 0)),yne)));return yield*i(Bs(_,{onFailure:w=>v(Ja(l,ni(w)),Pn(Le(!1))),onSuccess:kr({onLeft:w=>$3(Jr(bn(d)),Jr(p(o)(be)),{onSelfDone:(m,g)=>_v(xc(g),!1),onOtherDone:(m,g)=>Pn(xc(g),v(tY(h),se(Ft({onNone:()=>Ja(l,Le(re(w))),onSome:y=>Ja(l,Le(re(s(y,w))))})),_v(!1)))}),onRight:w=>tse(n,{onBackPressure:()=>dm(function*(m){const g=yield*m(Gs()),y=v(c,ws(w),Ac,se(T=>bv(b(T),Jr(bn(d)))),ub);return yield*m(Di(g,void 0),Pn(y),p(1),Cf),yield*m(bn(g)),!(yield*m(jC(d)))}),onBufferSliding:()=>dm(function*(m){const g=yield*m(Gs()),y=yield*m(Gs()),$=yield*m(cre(f));yield*m(vR(f),se(E=>Di(E,void 0)),wne(()=>$>=o)),yield*m(Ja(f,g));const T=v(c,ws(w),Ac,se(E=>v(b(E),bv(Jr(bn(d))),bv(Jr(bn(g))))),ub);return yield*m(Di(y,void 0),Pn(T),p(1),Cf),yield*m(bn(y)),!(yield*m(jC(d)))})})})}),SR({while:w=>w}),Cf),[l,a]}),Oe(([i,o])=>{const a=v(vR(i),tc,fb({onFailure:ss,onSuccess:kr({onLeft:kh,onRight:c=>Rt(Zt(c),()=>a)})}),eo);return Z3(a,o)}),_j),yj=S(3,(e,t,n)=>ase(n)(gj(e,t))),use=S(2,(e,t)=>_j(se(dj(),n=>{const r=jk(n);return Oe(b3([Ac(ws(r,e)),Ac(ws(r,t.other)),xk]),([s,i,o])=>{const a=(l,f,h)=>(d,p,_)=>{const b=w=>{const m=w;return m._tag===Hre?Le(Gn(Pn(xc(f),m.effect))):Oe($te(f),Qs({onFailure:g=>Gn(m.f(Er(g))),onSuccess:kr({onLeft:g=>Gn(m.f(wr(g))),onRight:g=>Bk(Zt(g),c(_(m.f)))})}))};return Qs(l,{onFailure:w=>b(d(Er(w))),onSuccess:kr({onLeft:w=>b(d(wr(w))),onRight:w=>Le(Rt(Zt(w),()=>Rt(Gn(vv(Jr(h),o)),m=>c(p(m,f)))))})})},c=l=>{switch(l._tag){case oj:{const f=Jr(hR(l.left)),h=Jr(hR(l.right));return eo($3(f,h,{onSelfDone:(d,p)=>Pn(xc(p),a(d,l.right,s)(t.onSelfDone,Tv,_=>OR(_))),onOtherDone:(d,p)=>Pn(xc(p),a(d,l.left,i)(t.onOtherDone,(_,b)=>Tv(b,_),_=>TR(_)))}))}case aj:return eo(Oe(Tr(i),Qs({onFailure:f=>Gn(l.f(Er(f))),onSuccess:kr({onLeft:f=>Gn(l.f(wr(f))),onRight:f=>Rt(Zt(f),()=>c(OR(l.f)))})})));case cj:return eo(Oe(Tr(s),Qs({onFailure:f=>Gn(l.f(Er(f))),onSuccess:kr({onLeft:f=>Gn(l.f(wr(f))),onRight:f=>Rt(Zt(f),()=>c(TR(l.f)))})})))}};return v(Gn(ES(vv(Jr(s),o),vv(Jr(i),o),(l,f)=>Tv(l,f))),Rt(c),Z3(n))})}))),lse=S(2,(e,t)=>tj(()=>{let n;const r=Ak({onInput:i=>Rt(Zt(i),()=>r),onFailure:i=>(n=dse(i),ss(QD(n))),onDone:kh}),s=TS({onInput:i=>v(Zt(i),Rt(()=>s)),onFailure:i=>see(i)&&pse(i.defect)&&Y(i.defect,n)?OS(i.defect.error):ss(i),onDone:kh});return ws(ws(ws(e,r),t),s)})),fse=e=>qre(ise(e)),Sj=e=>eo(w3(t=>Oe(i3(),n=>Ire(E3(t(r3(e,n)),r=>Ng(n,Er(r))),(r,s)=>Ng(n,s))))),Ac=e=>Oe(ka(kt(()=>new Uo(e,void 0,de)),(t,n)=>{const r=t.close(n);return r===void 0?be:r}),t=>Qe(()=>yb(t.run(),t))),yb=(e,t)=>{const n=e;switch(n._tag){case wd:return Qs(t.getDone(),{onFailure:ni,onSuccess:r=>Le(re(r))});case $d:return Le(qe(t.getEmit()));case sl:return v(n.effect,se(()=>yb(t.run(),t)));case kd:return Lk(n,()=>yb(t.run(),t),r=>ni(r))}},eo=e=>ose(Gn(e)),_j=e=>Pre(Sj(e),(t,n)=>t,(t,n)=>t),vj=e=>bj(0,e.length,e),bj=(e,t,n)=>e===t?wi:v(Zt(v(n,Qi(e))),Rt(()=>bj(e+1,t,n))),hse=S(e=>X3(e[1]),(e,t,n)=>n!=null&&n.concurrent?use(e,{other:t,onSelfDone:r=>kR(s=>Qe(()=>WC(r,s))),onOtherDone:r=>kR(s=>Qe(()=>WC(s,r)))}):Rt(e,r=>mj(t,s=>[r,s]))),Bk=S(e=>X3(e[1]),(e,t,n)=>n!=null&&n.concurrent?mj(hse(e,t,{concurrent:!0}),r=>r[1]):Rt(e,()=>t)),Sb=Symbol.for("effect/Channel/ChannelException"),dse=e=>({_tag:"ChannelException",[Sb]:Sb,error:e}),pse=e=>G(e,Sb),mse=wS,zk=gu,gse=Symbol.for("effect/Sink"),yse={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e};var NF;NF=gse;class wj{constructor(t){u(this,"channel");u(this,NF,yse);this.channel=t}pipe(){return q(this,arguments)}}const Sse=e=>{const t=TS({onInput:n=>v(Gn(ti(n,r=>e(r),{discard:!0})),Rt(()=>t)),onFailure:ss,onDone:()=>wi});return new wj(t)},_se=e=>new wj(Gn(e)),$j=e=>rl(e)?$j(_se(e)):e.channel,vse=()=>$h(L()),bse=e=>kS(ni(e),z),wse="effect/Stream",Uk=Symbol.for(wse),$se={_R:e=>e,_E:e=>e,_A:e=>e};var xF;xF=Uk;class xr{constructor(t){u(this,"channel");u(this,xF,$se);this.channel=t}pipe(){return q(this,arguments)}}const kj=e=>G(e,Uk)||rl(e),kse=4096,Ese=e=>{const t=n=>Ak({onInput:r=>{const s=St(n,r);return Rt(Zt(s),()=>t(s))},onFailure:OS,onDone:()=>wi});return new xr(ws(Zn(e),t(kn())))},Ose=S(2,(e,t)=>new xr(v(Zn(e),pj(t)))),Tse=e=>Oj(ni(e)),Cse=S(2,(e,t)=>xse(e,M$(t))),Ej=S(e=>kj(e[0]),(e,t,n)=>{const r=(n==null?void 0:n.bufferSize)??16;return n!=null&&n.switch?RR(n==null?void 0:n.concurrency,()=>IR(e,1,r,t),s=>IR(e,s,r,t)):RR(n==null?void 0:n.concurrency,()=>new xr(gb(Zn(e),s=>v(s,xH(i=>Zn(t(i))),AH(wi,(i,o)=>v(i,Bk(o)))))),s=>new xr(v(Zn(e),gb(vj),yj(i=>Zn(t(i)),n))))}),RR=(e,t,n)=>{switch(e){case void 0:return t();case"unbounded":return n(Number.MAX_SAFE_INTEGER);default:return e>1?n(e):t()}},IR=S(4,(e,t,n,r)=>new xr(v(Zn(e),gb(vj),yj(s=>Zn(r(s)),{concurrency:t,mergeStrategy:ese(),bufferSize:n})))),Rse=S(e=>kj(e[0]),(e,t)=>Ej(e,de,t)),Ise=e=>new xr(e),Zn=e=>{if("channel"in e)return e.channel;if(rl(e))return Zn(Oj(e));throw new TypeError("Expected a Stream.")},Pse=e=>new xr(A$(e)?wi:Zt(e)),Oj=e=>v(e,kS(z),Fse),Fse=e=>new xr(eo(kne(e,{onFailure:Ft({onNone:()=>wi,onSome:OS}),onSuccess:t=>Zt(qt(t))}))),Nse=(e,t)=>v(fre(e,1,(t==null?void 0:t.maxChunkSize)??kse),Nk(n=>v(ure(e),se(r=>r&&YD(n)?vse():bse(n)))),Mse,t!=null&&t.shutdown?Ose(Mg(e)):de),xse=S(2,(e,t)=>new xr(v(Zn(e),gj(t)))),Mse=e=>Use(e,t=>v(Oe(t,n=>z([n,t])),bd(Ft({onNone:()=>Le(L()),onSome:$h})))),Ase=S(2,(e,t)=>v(Zn(e),lse($j(t)),fse)),Lse=S(2,(e,t)=>v(e,Ase(Sse(t)))),Dse=e=>new xr(pj(Sj(v(e,Oe(qt))),be)),jse=e=>Pse(qt(e)),Bse=e=>new xr(tj(()=>Zn(e()))),zse=e=>Oe(Ac(Zn(e)),t=>v(t,kS(z),se(kr({onLeft:()=>$h(L()),onRight:Le})))),Use=(e,t)=>Bse(()=>{const n=r=>eo(Oe(t(r),Ft({onNone:()=>wi,onSome:([s,i])=>Rt(Zt(s),()=>n(i))})));return new xr(n(e))}),Vse=e=>Rse(Dse(e)),PR=Uk,qse=Ese,Kse=Tse,Hse=Cse,Wse=Ej,Jse=Nse,Tj=Lse,Gse=jse,Qse=zse,Yse=Vse,Xse=f7,Zse=Qy,eie=function(){const e=Symbol.for("effect/Data/Error/plainArgs");return class extends ok{constructor(n){super(n==null?void 0:n.message,n!=null&&n.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,e,{value:n,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}(),tie=e=>{class t extends eie{constructor(){super(...arguments);u(this,"_tag",e)}}return t.prototype.name=e,t},nie=Symbol.for("@effect-rx/rx/Result"),RS=Xse({[nie]:{E:de,A:de},pipe(){return q(this,arguments)}}),rie=(e,t)=>e._tag==="Success"?Ea(e.value):Vk(e.cause,t),Cj=e=>e._tag==="None"?$s(!0):Lg(e.value),sie=e=>e._tag!=="Initial",$s=(e=!1)=>{const t=Object.create(RS);return t._tag="Initial",t.waiting=e,t},FR=e=>e._tag==="Success",Ea=(e,t=!1)=>{const n=Object.create(RS);return n._tag="Success",n.value=e,n.waiting=t,n},Rj=(e,t=L(),n=!1)=>{const r=Object.create(RS);return r._tag="Failure",r.cause=e,r.previousValue=t,r.waiting=n,r},Vk=(e,t,n=!1)=>Rj(e,_o(t,IS),n),iie=(e,t,n)=>Rj(GD(e),t,n),oie=(e,t,n)=>iie(e,_o(t,IS),n),Lg=e=>{if(e.waiting)return e;const t=Object.assign(Object.create(RS),e);return t.waiting=!0,t},rc=(e,t)=>e._tag==="Failure"?Vk(e.cause,t,e.waiting):e,IS=e=>e._tag==="Success"?z(e.value):e._tag==="Failure"?e.previousValue:L(),aie=e=>{if(e._tag==="Success")return e.value;throw new Error("Result.getOrThrow: called on a Failure")},cie={immediate:!0};function uie(e){}const Rv=Symbol.for("@effect-rx/rx/Registry"),lie=e=>new fie(e==null?void 0:e.initialValues,e==null?void 0:e.scheduleTask,e==null?void 0:e.timeoutResolution,e==null?void 0:e.defaultIdleTTL);var MF,Wo;MF=Rv;class fie{constructor(t,n=i=>queueMicrotask(i),r,s){u(this,"scheduleTask");u(this,"defaultIdleTTL");u(this,MF);u(this,"timeoutResolution");u(this,"nodes",new Map);u(this,"timeoutBuckets",new Map);u(this,"nodeTimeoutBucket",new Map);u(this,"disposed",!1);u(this,"refresh",t=>{t.refresh!==void 0?t.refresh(this.refresh):this.invalidateRx(t)});u(this,"invalidateRx",t=>{this.ensureNode(t).invalidate()});Qd(this,Wo,null);if(this.scheduleTask=n,this.defaultIdleTTL=s,this[Rv]=Rv,r===void 0&&s!==void 0?this.timeoutResolution=Math.round(s/2):this.timeoutResolution=r??1e3,t!==void 0)for(const[i,o]of t)this.ensureNode(i).setValue(o)}get(t){return this.ensureNode(t).value()}set(t,n){t.write(this.ensureNode(t).writeContext,n)}subscribe(t,n,r){const s=this.ensureNode(t);r!=null&&r.immediate&&n(s.value());const i=s.subscribe(function(){n(s._value)});return()=>{i(),s.canBeRemoved&&this.scheduleNodeRemoval(s)}}mount(t){return this.subscribe(t,uie,cie)}rxHasTTL(t){return!t.keepAlive&&t.idleTTL!==0&&(t.idleTTL!==void 0||this.defaultIdleTTL!==void 0)}ensureNode(t){let n=this.nodes.get(t);return n===void 0?(n=this.createNode(t),this.nodes.set(t,n)):this.rxHasTTL(t)&&this.removeNodeTimeout(n),n}createNode(t){if(this.disposed)throw new Error(`Cannot access Rx ${t}: registry is disposed`);return t.keepAlive||this.scheduleRxRemoval(t),new hie(this,t)}scheduleRxRemoval(t){this.scheduleTask(()=>{const n=this.nodes.get(t);n!==void 0&&n.canBeRemoved&&this.removeNode(n)})}scheduleNodeRemoval(t){this.scheduleTask(()=>{t.canBeRemoved&&this.removeNode(t)})}removeNode(t){this.rxHasTTL(t.rx)?this.setNodeTimeout(t):(this.nodes.delete(t.rx),t.remove())}setNodeTimeout(t){if(this.nodeTimeoutBucket.has(t))return;let n=t.rx.idleTTL??this.defaultIdleTTL;if(_l(this,Wo)!==null&&(n-=_l(this,Wo),n<=0)){this.nodes.delete(t.rx),t.remove();return}const r=Math.ceil(n/this.timeoutResolution)*this.timeoutResolution,s=Date.now()+r,i=s-s%this.timeoutResolution+this.timeoutResolution;let o=this.timeoutBuckets.get(i);o===void 0&&(o=[new Set,setTimeout(()=>this.sweepBucket(i),i-Date.now())],this.timeoutBuckets.set(i,o)),o[0].add(t),this.nodeTimeoutBucket.set(t,i)}removeNodeTimeout(t){const n=this.nodeTimeoutBucket.get(t);if(n===void 0)return;this.nodeTimeoutBucket.delete(t),this.scheduleNodeRemoval(t);const[r,s]=this.timeoutBuckets.get(n);r.delete(t),r.size===0&&(clearTimeout(s),this.timeoutBuckets.delete(n))}sweepBucket(t){const n=this.timeoutBuckets.get(t)[0];this.timeoutBuckets.delete(t),n.forEach(r=>{r.canBeRemoved&&(this.nodeTimeoutBucket.delete(r),this.nodes.delete(r.rx),vl(this,Wo,r.rx.idleTTL??this.defaultIdleTTL),r.remove(),vl(this,Wo,null))})}reset(){this.timeoutBuckets.forEach(([,t])=>clearTimeout(t)),this.timeoutBuckets.clear(),this.nodeTimeoutBucket.clear(),this.nodes.forEach(t=>t.remove()),this.nodes.clear()}dispose(){this.disposed=!0,this.reset()}}Wo=new WeakMap;var wc;(function(e){e[e.alive=1]="alive",e[e.initialized=2]="initialized",e[e.waitingForValue=4]="waitingForValue"})(wc||(wc={}));var Ri;(function(e){e[e.uninitialized=5]="uninitialized",e[e.stale=7]="stale",e[e.valid=3]="valid",e[e.removed=0]="removed"})(Ri||(Ri={}));let hie=class{constructor(t,n){u(this,"registry");u(this,"rx");u(this,"state",Ri.uninitialized);u(this,"lifetime");u(this,"writeContext");u(this,"parents",[]);u(this,"previousParents");u(this,"children",[]);u(this,"listeners",[]);u(this,"_value");this.registry=t,this.rx=n,this.writeContext=new mie(t,this)}get canBeRemoved(){return!this.rx.keepAlive&&this.listeners.length===0&&this.children.length===0&&this.state!==0}value(){if(this.state&wc.waitingForValue){this.lifetime=pie(this);const t=this.rx.read(this.lifetime);if(this.state&wc.waitingForValue&&this.setValue(t),this.previousParents){const n=this.previousParents;this.previousParents=void 0;for(let r=0;r<n.length;r++)n[r].removeChild(this),n[r].canBeRemoved&&this.registry.scheduleNodeRemoval(n[r])}}return this._value}valueOption(){return this.state&wc.initialized?z(this._value):L()}setValue(t){if(!(this.state&wc.initialized)){this.state=Ri.valid,this._value=t,Op.phase!==Lc.collect&&this.notify();return}this.state=Ri.valid,!Y(this._value,t)&&(this._value=t,this.invalidateChildren(),Op.phase!==Lc.collect&&this.notify())}addParent(t){if(this.parents.push(t),this.previousParents!==void 0){const n=this.previousParents.indexOf(t);n!==-1&&(this.previousParents[n]=this.previousParents[this.previousParents.length-1],this.previousParents.pop()===void 0&&(this.previousParents=void 0))}t.children.indexOf(this)===-1&&t.children.push(this)}removeChild(t){const n=this.children.indexOf(t);n!==-1&&(this.children[n]=this.children[this.children.length-1],this.children.pop())}invalidate(){this.state===Ri.valid&&(this.state=Ri.stale,this.disposeLifetime()),Op.phase===Lc.collect?(Op.stale.push(this),this.invalidateChildren()):this.value()}invalidateChildren(){if(this.children.length===0)return;const t=this.children;this.children=[];for(let n=0;n<t.length;n++)t[n].invalidate()}notify(){for(let t=0;t<this.listeners.length;t++)this.listeners[t]()}disposeLifetime(){this.lifetime!==void 0&&(this.lifetime.dispose(),this.lifetime=void 0),this.parents.length!==0&&(this.previousParents=this.parents,this.parents=[])}remove(){if(this.state=Ri.removed,this.listeners=[],this.lifetime===void 0||(this.disposeLifetime(),this.previousParents===void 0))return;const t=this.previousParents;this.previousParents=void 0;for(let n=0;n<t.length;n++)t[n].removeChild(this),t[n].canBeRemoved&&this.registry.removeNode(t[n])}subscribe(t){return this.listeners.push(t),()=>{const n=this.listeners.indexOf(t);n!==-1&&(this.listeners[n]=this.listeners[this.listeners.length-1],this.listeners.pop())}}};const Mt=e=>new Error(`Cannot use context of disposed Rx: ${e}`),die={addFinalizer(e){if(this.disposed)throw Mt(this.node.rx);this.finalizers??(this.finalizers=[]),this.finalizers.push(e)},get(e){if(this.disposed)throw Mt(this.node.rx);const t=this.node.registry.ensureNode(e);return this.node.addParent(t),t.value()},result(e){if(this.disposed)throw Mt(this.node.rx);const t=this.get(e);switch(t._tag){case"Initial":return yR;case"Failure":return Er(t.cause);case"Success":return Le(t.value)}},some(e){if(this.disposed)throw Mt(this.node.rx);const t=this.get(e);return t._tag==="None"?yR:Le(t.value)},once(e){if(this.disposed)throw Mt(this.node.rx);return this.node.registry.get(e)},self(){if(this.disposed)throw Mt(this.node.rx);return this.node.valueOption()},refreshSync(e){if(this.disposed)throw Mt(this.node.rx);this.node.registry.refresh(e)},refresh(e){return Qe(()=>this.disposed?wp(Mt(this.node.rx)):(this.node.registry.refresh(e),be))},refreshSelfSync(){if(this.disposed)throw Mt(this.node.rx);this.node.invalidate()},get refreshSelf(){return Qe(()=>this.disposed?wp(Mt(this.node.rx)):(this.node.invalidate(),be))},mount(e){if(this.disposed)throw Mt(this.node.rx);this.addFinalizer(this.node.registry.mount(e))},subscribe(e,t,n){if(this.disposed)throw Mt(this.node.rx);this.addFinalizer(this.node.registry.subscribe(e,t,n))},setSelfSync(e){if(this.disposed)throw Mt(this.node.rx);this.node.setValue(e)},setSelf(e){return Qe(()=>this.disposed?wp(Mt(this.node.rx)):(this.node.setValue(e),be))},setSync(e,t){if(this.disposed)throw Mt(this.node.rx);this.node.registry.set(e,t)},set(e,t){return Qe(()=>this.disposed?wp(Mt(this.node.rx)):(this.node.registry.set(e,t),be))},stream(e,t){if(this.disposed)throw Mt(this.node.rx);return v(ka(P3((t==null?void 0:t.bufferSize)??16),Mg),k3(n=>ka(kt(()=>this.node.registry.subscribe(e,r=>{lre(n,r)},{immediate:(t==null?void 0:t.withoutInitialValue)!==!0})),r=>kt(r))),Oe(n=>Jse(n)),Yse)},streamResult(e,t){return v(this.stream(e,t),Hse(sie),Wse(n=>n._tag==="Success"?Gse(n.value):Kse(n.cause)))},dispose(){if(this.disposed=!0,this.finalizers===void 0)return;const e=this.finalizers;this.finalizers=void 0;for(let t=e.length-1;t>=0;t--)e[t]()}},pie=e=>{function t(n){if(t.disposed)throw Mt(n);const r=e.registry.ensureNode(n);return e.addParent(r),r.value()}return Object.setPrototypeOf(t,die),t.disposed=!1,t.finalizers=void 0,t.node=e,t};class mie{constructor(t,n){u(this,"registry");u(this,"node");this.registry=t,this.node=n}get(t){return this.registry.get(t)}set(t,n){return this.registry.set(t,n)}setSelf(t){return this.node.setValue(t)}refreshSelf(){return this.node.invalidate()}}var Lc;(function(e){e[e.disabled=0]="disabled",e[e.collect=1]="collect",e[e.commit=2]="commit"})(Lc||(Lc={}));const Op=ge("@effect-rx/rx/Registry/batchState",()=>({phase:Lc.disabled,depth:0,stale:[]})),gie=lie,Ij=Symbol.for("effect/Subscribable"),yie=e=>G(e,Ij),Sie="effect/SubscriptionRef",_ie=Symbol.for(Sie),vie=S(2,(e,t)=>v(nY(e.ref,t),hb(mre(e.pubsub,t)),e.semaphore.withPermits(1))),_b=_ie,NR=vie,bie=e=>{const t=e;switch(t._tag){case"Failure":case"Success":return t;case"Left":return J0(t.left);case"Right":return wr(t.right);case"Some":return wr(t.value);case"None":return J0(new bS)}},Pj=e=>(t,n,r=!1)=>{const s=bie(t);if(s){n(s);return}const i=new hD,o=mse(e)(t,{scheduler:i});i.flush();const a=o.unsafePoll();if(a){n(a);return}return o.addObserver(n),function(){o.removeObserver(n),r||o.unsafeInterruptAsFork(ao)}},vb=Symbol.for("@effect-rx/rx/Rx"),xR=Symbol.for("@effect-rx/rx/Rx/Writable"),qk={[vb]:vb,pipe(){return q(this,arguments)},toJSON(){return{_id:"Rx",keepAlive:this.keepAlive,label:this.label}},toString(){return rt(this)},[Me](){return this.toJSON()}},wie={...qk,rx(e,t){const n=Fj(e,t);return Vo(r=>{const s=r.self(),i=r(this);return i._tag!=="Success"?rc(i,s):n(r,i.value)})},fn(e,t){const[n,r,s]=Iie(e,t);return PS(i=>{i(s);const o=i.self(),a=i(this);return a._tag!=="Success"?rc(a,o):n(i,a.value)},r)},pull(e,t){const n=Vo(r=>{const s=r.self(),i=r(this);return i._tag!=="Success"?rc(i,s):Dc(r,Pie(r,e,t,i.value),$s(!0),i.value)});return Fie(n,t)},subscriptionRef(e){return Cie(Vo(t=>{const n=t.self(),r=t(this);if(r._tag!=="Success")return rc(r,n);const s=typeof e=="function"?e(t):e;return _b in s?s:Dc(t,s,$s(!0),r.value)}),(t,n)=>{const r=aie(t(this));return LR(t,n,r)})},subscribable(e){return Vo(t=>{const n=t.self(),r=t(this);if(r._tag!=="Success")return rc(r,n);const s=typeof e=="function"?e(t):e,i=yie(s)?s:Dc(t,s,$s(!0),r.value);return LR(t,i,r.value)})}},$ie={...qk,[xR]:xR},Vo=(e,t)=>{const n=Object.create(qk);return n.keepAlive=!1,n.read=e,n.refresh=t,n},PS=(e,t,n)=>{const r=Object.create($ie);return r.keepAlive=!1,r.read=e,r.write=t,r.refresh=n,r};function kie(e,t){e.setSelf(t)}const Eie=(e,t)=>{const n=Fj(e,t);return vb in n?n:Vo(n)},MR=e=>Q8 in e||K8 in e,Fj=(e,t)=>{if(typeof e=="function"){const n=e;return function(r,s){const i=n(r);if(typeof i=="object"&&i!==null){if(MR(i))return i;if(cb in i)return wb(r,i,t,s);if(PR in i)return AR(r,i,t,s)}return i}}else if(typeof e=="object"&&e!==null){if(MR(e))return bb(e);if(cb in e)return function(n,r){return wb(n,e,t,r)};if(PR in e)return function(n,r){return AR(n,e,t,r)}}return bb(e)},bb=e=>PS(function(t){return e},kie),wb=(e,t,n,r)=>{const s=(n==null?void 0:n.initialValue)!==void 0?Ea(n.initialValue):$s();return Dc(e,t,s,r,n==null?void 0:n.uninterruptible)};function Dc(e,t,n,r=zk,s=!1){const i=e.self(),o=Su(i3());e.addFinalizer(()=>{Rne(Ng(o,gD))});const a=r3(t,o);let c;const l=Pj(r)(a,function(f){c=rie(f,i),e.setSelfSync(c)},s);return l!==void 0&&e.addFinalizer(l),c!==void 0?c:i._tag==="Some"?Cj(i):Lg(n)}const Oie=()=>{const e=Eie(hre);return t=>{const n=Object.create(wie);n.keepAlive=!1,n.refresh=void 0;const r=Nie(Vo(typeof t=="function"?t:()=>t));return n.layer=r,n.read=function(i){const o=i(e);if(o._tag!=="Success")return $s(!0);const a=o.value,c=i(r),l=se(se(xk,f=>dre(c,a,f)),f=>lb(Tne(),f));return wb(i,l,{uninterruptible:!0})},n}},Tie=ge("@effect-rx/rx/Rx/defaultContext",()=>Oie()),AR=(e,t,n,r)=>{const s=(n==null?void 0:n.initialValue)!==void 0?Ea(n.initialValue):$s();return Kk(e,t,s,r)};function Kk(e,t,n,r=zk){const s=e.self(),i=Pj(r)(Tj(t,o=>kt(()=>e.setSelfSync(Lg(Ea(o))))),o=>{o._tag==="Failure"?e.setSelfSync(Vk(o.cause,s)):v(e.self(),_o(IS),Ft({onNone:()=>e.setSelfSync(oie(new bS,s)),onSome:a=>e.setSelfSync(Ea(a))}))});return i!==void 0&&e.addFinalizer(i),s._tag==="Some"?Cj(s):Lg(n)}const LR=(e,t,n=zk)=>Ij in t?(e.addFinalizer(t.changes.pipe(Tj(r=>e.setSelf(r)),Ine)),Su(t.get)):t._tag!=="Success"?t:Kk(e,t.value.changes,$s(!0),n),Cie=(e,t)=>{function n(r,s){const i=r.get(e);_b in i?Su(NR(i,s)):FR(i)&&Su(NR(i.value,s))}return PS(r=>{const s=r(e);return _b in s||FR(s)?t(r,s):s},n)},Rie=Symbol.for("@effect-rx/rx/Rx/Reset");function Iie(e,t){const n=bb([0,void 0]),r=(t==null?void 0:t.initialValue)!==void 0?Ea(t.initialValue):$s();function s(o,a){const[c,l]=o(n);if(c===0)return r;const f=e(l,o);return cb in f?Dc(o,f,r,a):Kk(o,f,r,a)}function i(o,a){a===Rie?o.set(n,[0,void 0]):o.set(n,[o.get(n)[0]+1,a])}return[s,i,n]}const Pie=(e,t,n,r)=>{const s=typeof t=="function"?t(e):t;return Oe(Qse(n!=null&&n.disableAccumulation?s:qse(s)),i=>[i,r])},Fie=(e,t)=>{const n=(t==null?void 0:t.initialValue)!==void 0?Ea({done:!1,items:t.initialValue}):$s();return PS(function(r){const s=r.self(),i=r(e);if(i._tag!=="Success")return rc(i,s);const[o,a]=i.value,c=v(o,Oe(l=>({done:!1,items:Xs(l)})),bd(l=>Ft(l,{onNone:()=>v(r.self(),_o(IS),Ft({onNone:()=>$h(new bS),onSome:({items:f})=>Le({done:!0,items:f})})),onSome:$h})));return Dc(r,c,n,a)},function(r,s){r.refreshSelf()},function(r){r(e)})},Nie=e=>Object.assign(Object.create(Object.getPrototypeOf(e)),{...e,keepAlive:!0}),DR=Symbol.for("effect/Mailbox"),jR=Symbol.for("effect/Mailbox/ReadonlyMailbox"),Lo=kn(),BR=Pe(Lo),Tp=Pe(!1),Iv=Pe(!0),zR=[Lo,!0];var AF,LF;class xie extends pd{constructor(n,r,s){super();u(this,"scheduler");u(this,"capacity");u(this,"strategy");u(this,LF,DR);u(this,AF,jR);u(this,"state",{_tag:"Open",takers:new Set,offers:new Set,awaiters:new Set});u(this,"messages",[]);u(this,"messagesChunk",kn());u(this,"shutdown",N(()=>{if(this.state._tag==="Done")return!0;this.messages=[],this.messagesChunk=Lo;const n=this.state.offers;if(this.finalize(this.state._tag==="Open"?Nn:this.state.exit),n.size>0){for(const r of n)r._tag==="Single"?r.resume(Tp):r.resume(Pe(Tn(r.remaining.slice(r.offset))));n.clear()}return!0}));u(this,"end",this.done(Nn));u(this,"clear",oe(()=>{if(this.state._tag==="Done")return cm(this.state.exit,Lo);const n=this.unsafeTakeAll();return this.releaseCapacity(),D(n)}));u(this,"takeAll",oe(()=>{if(this.state._tag==="Done")return cm(this.state.exit,zR);const n=this.unsafeTakeAll();return n.length===0?zt(this.awaitTake,this.takeAll):D([n,this.releaseCapacity()])}));u(this,"take",oe(()=>this.unsafeTake()??zt(this.awaitTake,this.take)));u(this,"await",Zl(n=>this.state._tag==="Done"?n(this.state.exit):(this.state.awaiters.add(n),N(()=>{this.state._tag!=="Done"&&this.state.awaiters.delete(n)}))));u(this,"size",N(()=>this.unsafeSize()));u(this,"awaitTake",Zl(n=>this.state._tag==="Done"?n(this.state.exit):(this.state.takers.add(n),N(()=>{this.state._tag!=="Done"&&this.state.takers.delete(n)}))));u(this,"scheduleRunning",!1);u(this,"releaseTaker",()=>{if(this.scheduleRunning=!1,this.state._tag==="Done")return;if(this.state.takers.size===0)return;const n=oH(this.state.takers);this.state.takers.delete(n),n(Nn)});this.scheduler=n,this.capacity=r,this.strategy=s}offer(n){return oe(()=>{if(this.state._tag!=="Open")return Tp;if(this.messages.length+this.messagesChunk.length>=this.capacity)switch(this.strategy){case"dropping":return Tp;case"suspend":return this.offerRemainingSingle(n);case"sliding":return this.unsafeTake(),this.messages.push(n),Iv}return this.messages.push(n),this.scheduleReleaseTaker(),Iv})}unsafeOffer(n){return this.state._tag!=="Open"?!1:this.messages.length+this.messagesChunk.length>=this.capacity?this.strategy==="sliding"?(this.unsafeTake(),this.messages.push(n),!0):!1:(this.messages.push(n),this.scheduleReleaseTaker(),!0)}offerAll(n){return oe(()=>{if(this.state._tag!=="Open")return D(tu(n));const r=this.unsafeOfferAllArray(n);return r.length===0?BR:this.strategy==="dropping"?D(Tn(r)):this.offerRemainingArray(r)})}unsafeOfferAll(n){return Tn(this.unsafeOfferAllArray(n))}unsafeOfferAllArray(n){if(this.state._tag!=="Open")return Fe(n);if(this.capacity===Number.POSITIVE_INFINITY||this.strategy==="sliding")return this.messages.length>0&&(this.messagesChunk=St(this.messagesChunk,Tn(this.messages))),this.strategy==="sliding"?this.messagesChunk=this.messagesChunk.pipe(St(tu(n)),MH(this.capacity)):x$(n)?this.messagesChunk=St(this.messagesChunk,n):this.messages=Fe(n),this.scheduleReleaseTaker(),[];const r=this.capacity-this.messages.length-this.messagesChunk.length;if(r===0)return Fe(n);const s=[];let i=0;for(const o of n)i<r?this.messages.push(o):s.push(o),i++;return this.scheduleReleaseTaker(),s}fail(n){return this.done(dh(n))}failCause(n){return this.done(Te(n))}unsafeDone(n){return this.state._tag!=="Open"?!1:this.state.offers.size===0&&this.messages.length===0&&this.messagesChunk.length===0?(this.finalize(n),!0):(this.state={...this.state,_tag:"Closing",exit:n},!0)}done(n){return N(()=>this.unsafeDone(n))}takeN(n){return oe(()=>{if(this.state._tag==="Done")return cm(this.state.exit,zR);if(n<=0)return D([Lo,!1]);n=Math.min(n,this.capacity);let r;if(n<=this.messagesChunk.length)r=pg(this.messagesChunk,n),this.messagesChunk=Li(this.messagesChunk,n);else if(n<=this.messages.length+this.messagesChunk.length)this.messagesChunk=St(this.messagesChunk,Tn(this.messages)),this.messages=[],r=pg(this.messagesChunk,n),this.messagesChunk=Li(this.messagesChunk,n);else return zt(this.awaitTake,this.takeN(n));return D([r,this.releaseCapacity()])})}unsafeTake(){if(this.state._tag==="Done")return $L(this.state.exit,dh(new bS));let n;if(this.messagesChunk.length>0)n=L$(this.messagesChunk),this.messagesChunk=Li(this.messagesChunk,1);else if(this.messages.length>0)n=this.messages[0],this.messagesChunk=Li(Tn(this.messages),1),this.messages=[];else return;return this.releaseCapacity(),Pe(n)}unsafeSize(){const n=this.messages.length+this.messagesChunk.length;return this.state._tag==="Done"?L():z(n)}commit(){return this.takeAll}pipe(){return q(this,arguments)}toJSON(){return{_id:"effect/Mailbox",state:this.state._tag,size:this.unsafeSize().toJSON()}}toString(){return rt(this)}[(LF=DR,AF=jR,Me)](){return rt(this)}offerRemainingSingle(n){return Zl(r=>{if(this.state._tag!=="Open")return r(Tp);const s={_tag:"Single",message:n,resume:r};return this.state.offers.add(s),N(()=>{this.state._tag==="Open"&&this.state.offers.delete(s)})})}offerRemainingArray(n){return Zl(r=>{if(this.state._tag!=="Open")return r(Pe(Tn(n)));const s={_tag:"Array",remaining:n,offset:0,resume:r};return this.state.offers.add(s),N(()=>{this.state._tag==="Open"&&this.state.offers.delete(s)})})}releaseCapacity(){if(this.state._tag==="Done")return this.state.exit._tag==="Success";if(this.state.offers.size===0)return this.state._tag==="Closing"&&this.messages.length===0&&this.messagesChunk.length===0?(this.finalize(this.state.exit),this.state.exit._tag==="Success"):!1;let n=this.capacity-this.messages.length-this.messagesChunk.length;for(const r of this.state.offers){if(n===0)return!1;if(r._tag==="Single")this.messages.push(r.message),n--,r.resume(Iv),this.state.offers.delete(r);else{for(;r.offset<r.remaining.length;r.offset++){if(n===0)return!1;this.messages.push(r.remaining[r.offset]),n--}r.resume(BR),this.state.offers.delete(r)}}return!1}scheduleReleaseTaker(){this.scheduleRunning||(this.scheduleRunning=!0,this.scheduler.scheduleTask(this.releaseTaker,0))}unsafeTakeAll(){if(this.messagesChunk.length>0){const n=this.messages.length>0?St(this.messagesChunk,Tn(this.messages)):this.messagesChunk;return this.messagesChunk=Lo,this.messages=[],n}else if(this.messages.length>0){const n=Tn(this.messages);return this.messages=[],n}return Lo}finalize(n){if(this.state._tag==="Done")return;const r=this.state;this.state={_tag:"Done",exit:n};for(const s of r.takers)s(n);r.takers.clear();for(const s of r.awaiters)s(n);r.awaiters.clear()}}const Mie=e=>xe(t=>D(new xie(t.currentScheduler,typeof e=="number"?e:(e==null?void 0:e.capacity)??Number.POSITIVE_INFINITY,typeof e=="number"?"suspend":(e==null?void 0:e.strategy)??"suspend"))),Aie=e=>{const t=Rt(e.takeAll,([n,r])=>r?n.length===0?wi:Zt(n):Bk(Zt(n),t));return t},Lie=e=>Ise(Aie(e)),Die=Mie,jie=Lie;function Bie(e){d1.unstable_scheduleCallback(d1.unstable_LowPriority,e)}const zie=xa.createContext(gie({scheduleTask:Bie,defaultIdleTTL:400}));function Uie(e,t){xa.useEffect(()=>e.mount(t),[t,e])}const Vie=e=>{const t=xa.useContext(zie);Uie(t,e)},Nj=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return Nj(e,t.from)}},ri=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),xj=e=>{let t=!1,n;return()=>(t||(n=e(),t=!0),n)},qie=e=>{try{return e.toISOString()}catch{return String(e)}},pi=e=>{if(Pr(e))return JSON.stringify(e);if(bs(e)||e==null||rh(e)||d0(e))return String(e);if(YK(e))return qie(e);if(My(e))return String(e)+"n";if(!m0(e)&&G(e,"toString")&&Wh(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{return JSON.stringify(e),m0(e)?`[${e.map(pi).join(",")}]`:`{${ri(e).map(t=>`${Pr(t)?JSON.stringify(t):String(t)}:${pi(e[t])}`).join(",")}}`}catch{return String(e)}},Mj=e=>typeof e=="string"?JSON.stringify(e):String(e),Aj=e=>Array.isArray(e),UR=e=>`[${Mj(e)}]`,Lj=e=>Aj(e)?e.map(UR).join(""):UR(e),vo=(e,t,n,r)=>{let s=e;return n&&Nt(n)&&(s+=`
at path: ${Lj(n)}`),t!==void 0&&(s+=`
details: ${t}`),r&&(s+=`
schema (${r._tag}): ${r}`),s},Dj=(e,t,n)=>vo("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,n),Kie=e=>vo("Unsupported key schema",void 0,void 0,e),Hie=e=>vo("Unsupported literal",`literal value: ${pi(e)}`),VR=e=>vo("Duplicate index signature",`${e} index signature`),Wie=vo("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),Jie=vo("Invalid element","A required element cannot follow an optional element. ts(1257)"),qR=e=>vo("Duplicate property signature transformation",`Duplicate key ${pi(e)}`),jj=e=>vo("Duplicate property signature",`Duplicate key ${pi(e)}`),Gie=Symbol.for("effect/annotation/SchemaId"),Bj=Symbol.for("effect/annotation/Message"),zj=Symbol.for("effect/annotation/MissingMessage"),Hk=Symbol.for("effect/annotation/Identifier"),Es=Symbol.for("effect/annotation/Title"),Ed=Symbol.for("effect/annotation/Description"),Qie=Symbol.for("effect/annotation/Examples"),Yie=Symbol.for("effect/annotation/Default"),Xie=Symbol.for("effect/annotation/JSONSchema"),Zie=Symbol.for("effect/annotation/Arbitrary"),eoe=Symbol.for("effect/annotation/Pretty"),toe=Symbol.for("effect/annotation/Equivalence"),noe=Symbol.for("effect/annotation/Documentation"),Uj=Symbol.for("effect/annotation/Concurrency"),Vj=Symbol.for("effect/annotation/Batching"),qj=Symbol.for("effect/annotation/ParseIssueTitle"),Kj=Symbol.for("effect/annotation/ParseOptions"),Hj=Symbol.for("effect/annotation/DecodingFallback"),$b=Symbol.for("effect/annotation/Surrogate"),roe=Symbol.for("effect/annotation/StableFilter"),ur=S(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?z(e.annotations[t]):L()),soe=ur(Bj),ioe=ur(zj),Wj=ur(Es),Jj=ur(Hk),ooe=ur(Ed),aoe=ur(Uj),coe=ur(Vj),uoe=ur(qj),loe=ur(Kj),foe=ur(Hj),hoe=ur($b),doe=ur(roe),poe=e=>sH(doe(e),t=>t===!0),Gj=Symbol.for("effect/annotation/JSONIdentifier"),moe=ur(Gj),goe=e=>fg(moe(e),()=>Jj(e));let FS=class{constructor(t,n,r,s={}){u(this,"typeParameters");u(this,"decodeUnknown");u(this,"encodeUnknown");u(this,"annotations");u(this,"_tag","Declaration");this.typeParameters=t,this.decodeUnknown=n,this.encodeUnknown=r,this.annotations=s}toString(){return Ke(is(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(t=>t.toJSON()),annotations:Wt(this.annotations)}}};const bo=e=>t=>t._tag===e;let kb=class{constructor(t,n={}){u(this,"literal");u(this,"annotations");u(this,"_tag","Literal");this.literal=t,this.annotations=n}toString(){return Ke(is(this),()=>pi(this.literal))}toJSON(){return{_tag:this._tag,literal:My(this.literal)?String(this.literal):this.literal,annotations:Wt(this.annotations)}}};const Rf=bo("Literal");let yoe=class{constructor(t,n={}){u(this,"symbol");u(this,"annotations");u(this,"_tag","UniqueSymbol");this.symbol=t,this.annotations=n}toString(){return Ke(is(this),()=>pi(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:Wt(this.annotations)}}},Soe=class{constructor(t={}){u(this,"annotations");u(this,"_tag","NeverKeyword");this.annotations=t}toString(){return ol(this)}toJSON(){return{_tag:this._tag,annotations:Wt(this.annotations)}}};const Qj=new Soe({[Es]:"never"});let _oe=class{constructor(t={}){u(this,"annotations");u(this,"_tag","UnknownKeyword");this.annotations=t}toString(){return ol(this)}toJSON(){return{_tag:this._tag,annotations:Wt(this.annotations)}}};const voe=new _oe({[Es]:"unknown"});let boe=class{constructor(t={}){u(this,"annotations");u(this,"_tag","AnyKeyword");this.annotations=t}toString(){return ol(this)}toJSON(){return{_tag:this._tag,annotations:Wt(this.annotations)}}};const woe=new boe({[Es]:"any"});let $oe=class{constructor(t={}){u(this,"annotations");u(this,"_tag","StringKeyword");this.annotations=t}toString(){return ol(this)}toJSON(){return{_tag:this._tag,annotations:Wt(this.annotations)}}};const KR=new $oe({[Es]:"string",[Ed]:"a string"}),Dg=bo("StringKeyword");class koe{constructor(t={}){u(this,"annotations");u(this,"_tag","NumberKeyword");this.annotations=t}toString(){return ol(this)}toJSON(){return{_tag:this._tag,annotations:Wt(this.annotations)}}}const HR=new koe({[Es]:"number",[Ed]:"a number"}),Eb=bo("NumberKeyword");let Eoe=class{constructor(t={}){u(this,"annotations");u(this,"_tag","BooleanKeyword");this.annotations=t}toString(){return ol(this)}toJSON(){return{_tag:this._tag,annotations:Wt(this.annotations)}}};const WR=new Eoe({[Es]:"boolean",[Ed]:"a boolean"}),JR=bo("BooleanKeyword"),Ooe=bo("SymbolKeyword");let Wk=class{constructor(t,n={}){u(this,"type");u(this,"annotations");this.type=t,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:Wt(this.annotations)}}toString(){return String(this.type)}},il=class extends Wk{constructor(n,r,s={}){super(n,s);u(this,"isOptional");this.isOptional=r}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:Wt(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}};const Yj=e=>e.map(t=>t.type);let Xj=class{constructor(t,n,r,s={}){u(this,"elements");u(this,"rest");u(this,"isReadonly");u(this,"annotations");u(this,"_tag","TupleType");this.elements=t,this.rest=n,this.isReadonly=r,this.annotations=s;let i=!1,o=!1;for(const a of t)if(a.isOptional)i=!0;else if(i){o=!0;break}if(o||i&&n.length>1)throw new Error(Jie)}toString(){return Ke(is(this),()=>Toe(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(t=>t.toJSON()),rest:this.rest.map(t=>t.toJSON()),isReadonly:this.isReadonly,annotations:Wt(this.annotations)}}};const Toe=e=>{const t=e.elements.map(String).join(", ");return uH(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(n,r)=>{const s=String(n),i=s.includes(" | ")?`(${s})`:s;if(r.length>0){const o=r.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${i}[], ${o}]`:`readonly [...${i}[], ${o}]`}else return e.elements.length>0?`readonly [${t}, ...${i}[]]`:`ReadonlyArray<${s}>`}})};let Yt=class extends il{constructor(n,r,s,i,o){super(r,s,o);u(this,"name");u(this,"isReadonly");this.name=n,this.isReadonly=i}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:Wt(this.annotations)}}};const Zj=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return Zj(e.from)}return!1};let NS=class{constructor(t,n,r){u(this,"type");u(this,"isReadonly");u(this,"parameter");if(this.type=n,this.isReadonly=r,Zj(t))this.parameter=t;else throw new Error(Wie)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}},to=class{constructor(t,n,r={}){u(this,"annotations");u(this,"_tag","TypeLiteral");u(this,"propertySignatures");u(this,"indexSignatures");this.annotations=r;const s={};for(let o=0;o<t.length;o++){const a=t[o].name;if(Object.prototype.hasOwnProperty.call(s,a))throw new Error(jj(a));s[a]=null}const i={string:!1,symbol:!1};for(let o=0;o<n.length;o++){const a=sB(n[o].parameter);if(Dg(a)){if(i.string)throw new Error(VR("string"));i.string=!0}else if(Ooe(a)){if(i.symbol)throw new Error(VR("symbol"));i.symbol=!0}}this.propertySignatures=t,this.indexSignatures=n}toString(){return Ke(is(this),()=>Coe(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(t=>t.toJSON()),indexSignatures:this.indexSignatures.map(t=>t.toJSON()),annotations:Wt(this.annotations)}}};const GR=e=>e.map(String).join("; "),Coe=e=>{if(e.propertySignatures.length>0){const t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${GR(e.indexSignatures)} }`:`{ ${t} }`}else return e.indexSignatures.length>0?`{ ${GR(e.indexSignatures)} }`:"{}"},QR=bo("TypeLiteral"),Roe=sh(W2(du,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),Ioe={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},eB=e=>dg(e,t=>tB(t)?eB(t.types):[t]),Poe=e=>{const t=Roe(e),n=[],r={},s=[];for(const i of t)switch(i._tag){case"NeverKeyword":break;case"AnyKeyword":return[woe];case"UnknownKeyword":return[voe];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{r[i._tag]||(r[i._tag]=i,n.push(i));break}case"Literal":{const o=typeof i.literal;switch(o){case"string":case"number":case"bigint":case"boolean":{const a=Ioe[o];!r[a]&&!s.includes(i.literal)&&(s.push(i.literal),n.push(i));break}case"object":{s.includes(i.literal)||(s.push(i.literal),n.push(i));break}}break}case"UniqueSymbol":{!r.SymbolKeyword&&!s.includes(i.symbol)&&(s.push(i.symbol),n.push(i));break}case"TupleType":{r.ObjectKeyword||n.push(i);break}case"TypeLiteral":{i.propertySignatures.length===0&&i.indexSignatures.length===0?r["{}"]||(r["{}"]=i,n.push(i)):r.ObjectKeyword||n.push(i);break}default:n.push(i)}return n};var zs;let no=(zs=class{constructor(t,n={}){u(this,"types");u(this,"annotations");u(this,"_tag","Union");this.types=t,this.annotations=n}toString(){return Ke(is(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(t=>t.toJSON()),annotations:Wt(this.annotations)}}},u(zs,"make",(t,n)=>Jk(t)?new zs(t,n):t.length===1?t[0]:Qj),u(zs,"unify",(t,n)=>zs.make(Poe(eB(t)),n)),zs);const Foe=(e,t)=>e.map(t),Jk=e=>e.length>1,tB=bo("Union"),Pv=ge(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);let If=class{constructor(t,n={}){u(this,"f");u(this,"annotations");u(this,"_tag","Suspend");this.f=t,this.annotations=n,this.f=xj(t)}toString(){return is(this).pipe(fg(()=>_o(X8(this.f)(),t=>is(t))),Ke(()=>"<suspended schema>"))}toJSON(){const t=this.f();let n=Pv.get(t);return n||(Pv.set(t,{_tag:this._tag}),n={_tag:this._tag,ast:t.toJSON(),annotations:Wt(this.annotations)},Pv.set(t,n),n)}},nB=class{constructor(t,n,r={}){u(this,"from");u(this,"filter");u(this,"annotations");u(this,"_tag","Refinement");this.from=t,this.filter=n,this.annotations=r}toString(){return Ke(is(this),()=>`{ ${this.from} | filter }`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:Wt(this.annotations)}}};const gm=bo("Refinement"),Fv={};let Pf=class{constructor(t,n,r,s={}){u(this,"from");u(this,"to");u(this,"transformation");u(this,"annotations");u(this,"_tag","Transformation");this.from=t,this.to=n,this.transformation=r,this.annotations=s}toString(){return Ke(is(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:Wt(this.annotations)}}},Noe=class{constructor(t,n){u(this,"decode");u(this,"encode");u(this,"_tag","FinalTransformation");this.decode=t,this.encode=n}};const xoe=e=>t=>t._tag===e;let Moe=class{constructor(t,n,r,s){u(this,"from");u(this,"to");u(this,"decode");u(this,"encode");this.from=t,this.to=n,this.decode=r,this.encode=s}},ym=class{constructor(t){u(this,"propertySignatureTransformations");u(this,"_tag","TypeLiteralTransformation");this.propertySignatureTransformations=t;const n={},r={};for(const s of t){const i=s.from;if(n[i])throw new Error(qR(i));n[i]=!0;const o=s.to;if(r[o])throw new Error(qR(o));r[o]=!0}}};const Nv=xoe("TypeLiteralTransformation"),rB=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e);return n.annotations.value={...e.annotations,...t},Object.create(Object.getPrototypeOf(e),n)},Aoe=".*",Loe="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",Doe=e=>{let t=`^${z0(e.head)}`;for(const n of e.spans)Dg(n.type)?t+=Aoe:Eb(n.type)&&(t+=Loe),t+=z0(n.literal);return t+="$",new RegExp(t)},YR=(e,t)=>{const n=[],r=[],s=i=>{switch(i._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":r.push(new NS(i,t,!0));break;case"Literal":if(Pr(i.literal)||bs(i.literal))n.push(new Yt(i.literal,t,!1,!0));else throw new Error(Hie(i.literal));break;case"Enums":{for(const[o,a]of i.enums)n.push(new Yt(a,t,!1,!0));break}case"UniqueSymbol":n.push(new Yt(i.symbol,t,!1,!0));break;case"Union":i.types.forEach(s);break;default:throw new Error(Kie(i))}};return s(e),{propertySignatures:n,indexSignatures:r}},ct=e=>{switch(e._tag){case"Declaration":{const t=vr(e.typeParameters,ct);return t===e.typeParameters?e:new FS(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const t=vr(e.elements,s=>{const i=ct(s.type);return i===s.type?s:new il(i,s.isOptional)}),n=Yj(e.rest),r=vr(n,ct);return t===e.elements&&r===n?e:new Xj(t,r.map(s=>new Wk(s)),e.isReadonly,e.annotations)}case"TypeLiteral":{const t=vr(e.propertySignatures,r=>{const s=ct(r.type);return s===r.type?r:new Yt(r.name,s,r.isOptional,r.isReadonly)}),n=vr(e.indexSignatures,r=>{const s=ct(r.type);return s===r.type?r:new NS(r.parameter,s,r.isReadonly)});return t===e.propertySignatures&&n===e.indexSignatures?e:new to(t,n,e.annotations)}case"Union":{const t=vr(e.types,ct);return t===e.types?e:no.make(t,e.annotations)}case"Suspend":return new If(()=>ct(e.f()),e.annotations);case"Refinement":{const t=ct(e.from);return t===e.from?e:new nB(t,e.filter,e.annotations)}case"Transformation":return ct(e.to)}return e},joe=e=>t=>{const n={...t.annotations};for(const r of e)delete n[r];return n},Cp=e=>Ft(goe(e),{onNone:()=>{},onSome:t=>({[Gj]:t})});function vr(e,t){let n=!1;const r=Vy(e.length);for(let s=0;s<e.length;s++){const i=e[s],o=t(i);o!==i&&(n=!0),r[s]=o}return n?r:e}const fs=(e,t)=>{switch(e._tag){case"Declaration":{const n=vr(e.typeParameters,r=>fs(r));return n===e.typeParameters?e:new FS(n,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const n=vr(e.elements,i=>{const o=fs(i.type);return o===i.type?i:new il(o,i.isOptional)}),r=Yj(e.rest),s=vr(r,i=>fs(i));return n===e.elements&&s===r?e:new Xj(n,s.map(i=>new Wk(i)),e.isReadonly,Cp(e))}case"TypeLiteral":{const n=vr(e.propertySignatures,s=>{const i=fs(s.type);return i===s.type?s:new Yt(s.name,i,s.isOptional,s.isReadonly)}),r=vr(e.indexSignatures,s=>{const i=fs(s.type);return i===s.type?s:new NS(s.parameter,i,s.isReadonly)});return n===e.propertySignatures&&r===e.indexSignatures?e:new to(n,r,Cp(e))}case"Union":{const n=vr(e.types,r=>fs(r));return n===e.types?e:no.make(n,Cp(e))}case"Suspend":return new If(()=>fs(e.f()),Cp(e));case"Refinement":return fs(e.from);case"Transformation":return fs(e.from)}return e},Ob=e=>fs(e),Wt=e=>{const t={};for(const n of Object.getOwnPropertySymbols(e))t[String(n)]=e[n];return t},sB=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return sB(e.from)}},ol=e=>Ke(is(e),()=>e._tag),is=e=>Jj(e).pipe(fg(()=>Wj(e)),fg(()=>ooe(e)));let un=class{constructor(t,n,r){u(this,"path");u(this,"actual");u(this,"issue");u(this,"_tag","Pointer");this.path=t,this.actual=n,this.issue=r}},XR=class{constructor(t,n){u(this,"actual");u(this,"message");u(this,"_tag","Unexpected");this.actual=t,this.message=n}},zl=class{constructor(t,n){u(this,"ast");u(this,"message");u(this,"_tag","Missing");u(this,"actual");this.ast=t,this.message=n}},pt=class{constructor(t,n,r,s){u(this,"ast");u(this,"actual");u(this,"issues");u(this,"output");u(this,"_tag","Composite");this.ast=t,this.actual=n,this.issues=r,this.output=s}},xv=class{constructor(t,n,r,s){u(this,"ast");u(this,"actual");u(this,"kind");u(this,"issue");u(this,"_tag","Refinement");this.ast=t,this.actual=n,this.kind=r,this.issue=s}},Mv=class{constructor(t,n,r,s){u(this,"ast");u(this,"actual");u(this,"kind");u(this,"issue");u(this,"_tag","Transformation");this.ast=t,this.actual=n,this.kind=r,this.issue=s}},Ni=class{constructor(t,n,r){u(this,"ast");u(this,"actual");u(this,"message");u(this,"_tag","Type");this.ast=t,this.actual=n,this.message=r}},Boe=class{constructor(t,n,r){u(this,"ast");u(this,"actual");u(this,"message");u(this,"_tag","Forbidden");this.ast=t,this.actual=n,this.message=r}};const ZR=Symbol.for("effect/Schema/ParseErrorTypeId");var DF;let zoe=class extends tie("ParseError"){constructor(){super(...arguments);u(this,DF,ZR)}get message(){return this.toString()}toString(){return Sm.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[(DF=ZR,Me)](){return this.toJSON()}};const Uoe=e=>new zoe({issue:e}),Eh=qe,iB=re,Rp=S(2,(e,t)=>{const n=e;return n._tag==="Left"?n:n._tag==="Right"?t(n.right):se(e,t)}),oB=S(2,(e,t)=>{const n=e;return n._tag==="Left"?n:n._tag==="Right"?qe(t(n.right)):Oe(e,t)}),Av=S(2,(e,t)=>{const n=e;return n._tag==="Left"?re(t(n.left)):n._tag==="Right"?n:kS(e,t)}),Ns=e=>{const t=e;if(t._tag==="Left"||t._tag==="Right")return t},aB=S(2,(e,t)=>{const n=e;return n._tag==="Left"?t(n.left):n._tag==="Right"?n:bd(e,t)}),xS=(e,t)=>t===void 0||bs(t)?e:e===void 0?t:{...e,...t},Voe=(e,t,n)=>{const r=At(e,t);return(s,i)=>r(s,xS(n,i))},cB=(e,t,n)=>{const r=Voe(e,t,n);return(s,i)=>W8(r(s,i),Uoe)},qoe=(e,t,n)=>{const r=At(e,t);return(s,i)=>r(s,{...xS(n,i),isEffectAllowed:!0})},Koe=(e,t)=>cB(e.ast,!0,t),Hoe=(e,t)=>qoe(e.ast,!1,t),uB=(e,t)=>cB(ct(e.ast),!0,t),Woe=(e,t)=>{const n=At(ct(e.ast),!0);return(r,s)=>Hs(n(r,{exact:!0,...xS(t,s)}))},Joe=ge(Symbol.for("effect/Schema/Parser/decodeMemoMap"),()=>new WeakMap),Goe=ge(Symbol.for("effect/Schema/Parser/encodeMemoMap"),()=>new WeakMap),At=(e,t)=>{const n=t?Joe:Goe,r=n.get(e);if(r)return r;const s=Qoe(e,t),i=loe(e),o=Ie(i)?(l,f)=>s(l,xS(f,i.value)):s,a=foe(e),c=t&&Ie(a)?(l,f)=>of(aB(o(l,f),a.value),e,l,f):o;return n.set(e,c),c},Lv=e=>Ds(aoe(e)),Dv=e=>Ds(coe(e)),Qoe=(e,t)=>{switch(e._tag){case"Refinement":if(t){const n=At(e.from,!0);return(r,s)=>{s=s??Fv;const i=(s==null?void 0:s.errors)==="all",o=Rp(aB(n(r,s),a=>{const c=new xv(e,r,"From",a);return i&&poe(e)?Ft(e.filter(r,s,e),{onNone:()=>re(c),onSome:l=>re(new pt(e,r,[c,new xv(e,r,"Predicate",l)]))}):re(c)}),a=>Ft(e.filter(a,s,e),{onNone:()=>qe(a),onSome:c=>re(new xv(e,r,"Predicate",c))}));return of(o,e,r,s)}}else{const n=At(ct(e),!0),r=At(lB(e.from),!1);return(s,i)=>of(Rp(n(s,i),o=>r(o,i)),e,s,i)}case"Transformation":{const n=Zoe(e.transformation,t),r=t?At(e.from,!0):At(e.to,!1),s=t?At(e.to,!0):At(e.from,!1);return(i,o)=>of(Rp(Av(r(i,o),a=>new Mv(e,i,t?"Encoded":"Type",a)),a=>Rp(Av(n(a,o??Fv,e,i),c=>new Mv(e,i,"Transformation",c)),c=>Av(s(c,o),l=>new Mv(e,i,t?"Type":"Encoded",l)))),e,i,o)}case"Declaration":{const n=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(r,s)=>of(n(r,s??Fv,e),e,r,s)}case"Literal":return Kn(e,n=>n===e.literal);case"UniqueSymbol":return Kn(e,n=>n===e.symbol);case"UndefinedKeyword":return Kn(e,JK);case"NeverKeyword":return Kn(e,GK);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return qe;case"StringKeyword":return Kn(e,Pr);case"NumberKeyword":return Kn(e,bs);case"BooleanKeyword":return Kn(e,rh);case"BigIntKeyword":return Kn(e,My);case"SymbolKeyword":return Kn(e,d0);case"ObjectKeyword":return Kn(e,So);case"Enums":return Kn(e,n=>e.enums.some(([r,s])=>s===n));case"TemplateLiteral":{const n=Doe(e);return Kn(e,r=>Pr(r)&&n.test(r))}case"TupleType":{const n=e.elements.map(l=>At(l.type,t)),r=e.rest.map(l=>At(l.type,t));let s=e.elements.filter(l=>!l.isOptional);e.rest.length>0&&(s=s.concat(e.rest.slice(1)));const i=s.length,o=e.elements.length>0?e.elements.map((l,f)=>f).join(" | "):"never",a=Lv(e),c=Dv(e);return(l,f)=>{if(!m0(l))return re(new Ni(e,l));const h=(f==null?void 0:f.errors)==="all",d=[];let p=0;const _=[],b=l.length;for(let y=b;y<=i-1;y++){const $=new un(y,l,new zl(s[y-b]));if(h){d.push([p++,$]);continue}else return re(new pt(e,l,$,_))}if(e.rest.length===0)for(let y=e.elements.length;y<=b-1;y++){const $=new un(y,l,new XR(l[y],`is unexpected, expected: ${o}`));if(h){d.push([p++,$]);continue}else return re(new pt(e,l,$,_))}let w=0,m;for(;w<n.length;w++)if(b<w+1){if(e.elements[w].isOptional)continue}else{const y=n[w],$=y(l[w],f),T=Ns($);if(T){if(fn(T)){const C=new un(w,l,T.left);if(h){d.push([p++,C]);continue}else return re(new pt(e,l,C,Dr(_)))}_.push([p++,T.right])}else{const C=p++,E=w;m||(m=[]),m.push(({es:O,output:A})=>se(No($),I=>{if(fn(I)){const M=new un(E,l,I.left);return h?(O.push([C,M]),be):re(new pt(e,l,M,Dr(A)))}return A.push([C,I.right]),be}))}}if(Nt(r)){const[y,...$]=r;for(;w<b-$.length;w++){const T=y(l[w],f),C=Ns(T);if(C)if(fn(C)){const E=new un(w,l,C.left);if(h){d.push([p++,E]);continue}else return re(new pt(e,l,E,Dr(_)))}else _.push([p++,C.right]);else{const E=p++,O=w;m||(m=[]),m.push(({es:A,output:I})=>se(No(T),M=>{if(fn(M)){const U=new un(O,l,M.left);return h?(A.push([E,U]),be):re(new pt(e,l,U,Dr(I)))}else return I.push([E,M.right]),be}))}}for(let T=0;T<$.length;T++)if(w+=T,!(b<w+1)){const C=$[T](l[w],f),E=Ns(C);if(E){if(fn(E)){const O=new un(w,l,E.left);if(h){d.push([p++,O]);continue}else return re(new pt(e,l,O,Dr(_)))}_.push([p++,E.right])}else{const O=p++,A=w;m||(m=[]),m.push(({es:I,output:M})=>se(No(C),U=>{if(fn(U)){const X=new un(A,l,U.left);return h?(I.push([O,X]),be):re(new pt(e,l,X,Dr(M)))}return M.push([O,U.right]),be}))}}}const g=({es:y,output:$})=>nm(y)?re(new pt(e,l,Dr(y),Dr($))):qe(Dr($));if(m&&m.length>0){const y=m;return Qe(()=>{const $={es:Xl(d),output:Xl(_)};return se(ti(y,T=>T($),{concurrency:a,batching:c,discard:!0}),()=>g($))})}return g({output:_,es:d})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return Kn(e,QK);const n=[],r={},s=[];for(const f of e.propertySignatures)n.push([At(f.type,t),f]),r[f.name]=null,s.push(f.name);const i=e.indexSignatures.map(f=>[At(f.parameter,t),At(f.type,t),f.parameter]),o=no.make(e.indexSignatures.map(f=>f.parameter).concat(s.map(f=>d0(f)?new yoe(f):new kb(f)))),a=At(o,t),c=Lv(e),l=Dv(e);return(f,h)=>{if(!XK(f))return re(new Ni(e,f));const d=(h==null?void 0:h.errors)==="all",p=[];let _=0;const b=(h==null?void 0:h.onExcessProperty)==="error",w=(h==null?void 0:h.onExcessProperty)==="preserve",m={};let g;if(b||w){g=ri(f);for(const C of g){const E=Ns(a(C,h));if(fn(E))if(b){const O=new un(C,f,new XR(f[C],`is unexpected, expected: ${String(o)}`));if(d){p.push([_++,O]);continue}else return re(new pt(e,f,O,m))}else m[C]=f[C]}}let y;const $=(h==null?void 0:h.exact)===!0;for(let C=0;C<n.length;C++){const E=n[C][1],O=E.name,A=Object.prototype.hasOwnProperty.call(f,O);if(!A){if(E.isOptional)continue;if($){const X=new un(O,f,new zl(E));if(d){p.push([_++,X]);continue}else return re(new pt(e,f,X,m))}}const I=n[C][0],M=I(f[O],h),U=Ns(M);if(U){if(fn(U)){const X=new un(O,f,A?U.left:new zl(E));if(d){p.push([_++,X]);continue}else return re(new pt(e,f,X,m))}m[O]=U.right}else{const X=_++,ve=O;y||(y=[]),y.push(({es:De,output:ye})=>se(No(M),Z=>{if(fn(Z)){const x=new un(ve,f,A?Z.left:new zl(E));return d?(De.push([X,x]),be):re(new pt(e,f,x,ye))}return ye[ve]=Z.right,be}))}}for(let C=0;C<i.length;C++){const E=i[C],O=E[0],A=E[1],I=Nj(f,E[2]);for(const M of I){const U=Ns(O(M,h));if(U&&Hs(U)){const X=A(f[M],h),ve=Ns(X);if(ve)if(fn(ve)){const De=new un(M,f,ve.left);if(d){p.push([_++,De]);continue}else return re(new pt(e,f,De,m))}else Object.prototype.hasOwnProperty.call(r,M)||(m[M]=ve.right);else{const De=_++,ye=M;y||(y=[]),y.push(({es:Z,output:x})=>se(No(X),V=>{if(fn(V)){const K=new un(ye,f,V.left);return d?(Z.push([De,K]),be):re(new pt(e,f,K,x))}else return Object.prototype.hasOwnProperty.call(r,M)||(x[M]=V.right),be}))}}}}const T=({es:C,output:E})=>{if(nm(C))return re(new pt(e,f,Dr(C),E));if((h==null?void 0:h.propertyOrder)==="original"){const O=g||ri(f);for(const I of s)O.indexOf(I)===-1&&O.push(I);const A={};for(const I of O)Object.prototype.hasOwnProperty.call(E,I)&&(A[I]=E[I]);return qe(A)}return qe(E)};if(y&&y.length>0){const C=y;return Qe(()=>{const E={es:Xl(p),output:Object.assign({},m)};return se(ti(C,O=>O(E),{concurrency:c,batching:l,discard:!0}),()=>T(E))})}return T({es:p,output:m})}}case"Union":{const n=Yoe(e.types,t),r=ri(n.keys),s=r.length,i=new Map;for(let c=0;c<e.types.length;c++)i.set(e.types[c],At(e.types[c],t));const o=Lv(e)??1,a=Dv(e);return(c,l)=>{const f=[];let h=0,d=[];if(s>0)if($$(c))for(let b=0;b<s;b++){const w=r[b],m=n.keys[w].buckets;if(Object.prototype.hasOwnProperty.call(c,w)){const g=String(c[w]);if(Object.prototype.hasOwnProperty.call(m,g))d=d.concat(m[g]);else{const y=no.make(n.keys[w].literals);f.push([h++,new pt(new to([new Yt(w,y,!1,!0)],[]),c,new un(w,c,new Ni(y,c[w])))])}}else{const g=no.make(n.keys[w].literals),y=new Yt(w,g,!1,!0);f.push([h++,new pt(new to([y],[]),c,new un(w,c,new zl(y)))])}}else f.push([h++,new Ni(e,c)]);n.otherwise.length>0&&(d=d.concat(n.otherwise));let p;for(let b=0;b<d.length;b++){const w=d[b],m=i.get(w)(c,l),g=!p||p.length===0?Ns(m):void 0;if(g){if(Hs(g))return g;f.push([h++,g.left])}else{const y=h++;p||(p=[]),p.push($=>Qe(()=>"finalResult"in $?be:se(No(m),T=>(Hs(T)?$.finalResult=T:$.es.push([y,T.left]),be))))}}const _=b=>nm(b)?b.length===1&&b[0][1]._tag==="Type"?re(b[0][1]):re(new pt(e,c,Dr(b))):re(new Ni(e,c));if(p&&p.length>0){const b=p;return Qe(()=>{const w={es:Xl(f)};return se(ti(b,m=>m(w),{concurrency:o,batching:a,discard:!0}),()=>"finalResult"in w?w.finalResult:_(w.es))})}return _(f)}}case"Suspend":{const n=xj(()=>At(rB(e.f(),e.annotations),t));return(r,s)=>n()(r,s)}}},Kn=(e,t)=>n=>t(n)?qe(n):re(new Ni(e,n)),sf=(e,t)=>{switch(e._tag){case"Declaration":{const n=hoe(e);if(Ie(n))return sf(n.value,t);break}case"TypeLiteral":{const n=[];for(let r=0;r<e.propertySignatures.length;r++){const s=e.propertySignatures[r],i=t?Ob(s.type):ct(s.type);Rf(i)&&!s.isOptional&&n.push([s.name,i])}return n}case"TupleType":{const n=[];for(let r=0;r<e.elements.length;r++){const s=e.elements[r],i=t?Ob(s.type):ct(s.type);Rf(i)&&!s.isOptional&&n.push([r,i])}return n}case"Refinement":return sf(e.from,t);case"Suspend":return sf(e.f(),t);case"Transformation":return sf(t?e.from:e.to,t)}return[]},Yoe=(e,t)=>{const n={},r=[];for(let s=0;s<e.length;s++){const i=e[s],o=sf(i,t);if(o.length>0)for(let a=0;a<o.length;a++){const[c,l]=o[a],f=String(l.literal);n[c]=n[c]||{buckets:{},literals:[]};const h=n[c].buckets;if(Object.prototype.hasOwnProperty.call(h,f)){if(a<o.length-1)continue;h[f].push(i),n[c].literals.push(l)}else{h[f]=[i],n[c].literals.push(l);break}}else r.push(i)}return{keys:n,otherwise:r}},lB=e=>gm(e)?lB(e.from):e,of=(e,t,n,r)=>{const s=Ns(e);if(s)return s;if((r==null?void 0:r.isEffectAllowed)===!0)return e;try{return Su(No(e))}catch{return re(new Boe(t,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}},Xoe=([e],[t])=>e>t?1:e<t?-1:0;function Dr(e){return e.sort(Xoe).map(t=>t[1])}const Zoe=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return qe;case"TypeLiteralTransformation":return n=>{let r=qe(n);for(const s of e.propertySignatureTransformations){const[i,o]=t?[s.from,s.to]:[s.to,s.from],a=t?s.decode:s.encode;r=oB(r,l=>{const f=a(Object.prototype.hasOwnProperty.call(l,i)?z(l[i]):L());return delete l[i],Ie(f)&&(l[o]=f.value),l})}return r}}},Wn=(e,t=[])=>({value:e,forest:t}),Sm={formatIssue:e=>Oe(sc(e),eae),formatIssueSync:e=>Su(Sm.formatIssue(e)),formatError:e=>Sm.formatIssue(e.issue),formatErrorSync:e=>Sm.formatIssueSync(e.issue)},eae=e=>e.value+fB(`
`,e.forest),fB=(e,t)=>{let n="";const r=t.length;let s;for(let i=0;i<r;i++){s=t[i];const o=i===r-1;n+=e+(o?"":"")+" "+s.value,n+=fB(e+(r>1&&!o?"  ":"   "),s.forest)}return n},tae=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},nae=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},hB=e=>"ast"in e?z(e.ast):L(),rae=e=>hB(e).pipe(_o(soe),se(t=>{const n=t(e);return Pr(n)?Le({message:n,override:!1}):rl(n)?Oe(n,r=>({message:r,override:!1})):Pr(n.message)?Le({message:n.message,override:n.override}):Oe(n.message,r=>({message:r,override:n.override}))})),Gk=e=>t=>t._tag===e,sae=Gk("Composite"),eI=Gk("Refinement"),tI=Gk("Transformation"),Qk=e=>rae(e).pipe(se(t=>!t.override&&(sae(e)||eI(e)&&e.kind==="From"||tI(e)&&e.kind!=="Transformation")?tI(e)||eI(e)?Qk(e.issue):L():Le(t.message))),dB=e=>hB(e).pipe(_o(uoe),eH(t=>Uy(t(e)))),iae=e=>Qk(e).pipe(One(()=>dB(e)),bd(()=>Le(e.message??`Expected ${String(e.ast)}, actual ${pi(e.actual)}`))),Ip=e=>Ke(dB(e),()=>String(e.ast)),oae=e=>e.message??"is forbidden",aae=e=>e.message??"is unexpected",cae=e=>ioe(e.ast).pipe(se(t=>{const n=t();return Pr(n)?Le(n):n}),bd(()=>Le(e.message??"is missing"))),jv=(e,t)=>Ene(Qk(e),{onFailure:t,onSuccess:n=>Le(Wn(n))}),sc=e=>{switch(e._tag){case"Type":return Oe(iae(e),Wn);case"Forbidden":return Le(Wn(Ip(e),[Wn(oae(e))]));case"Unexpected":return Le(Wn(aae(e)));case"Missing":return Oe(cae(e),Wn);case"Transformation":return jv(e,()=>Oe(sc(e.issue),t=>Wn(Ip(e),[Wn(tae(e.kind),[t])])));case"Refinement":return jv(e,()=>Oe(sc(e.issue),t=>Wn(Ip(e),[Wn(nae(e.kind),[t])])));case"Pointer":return Oe(sc(e.issue),t=>Wn(Lj(e.path),[t]));case"Composite":{const t=Ip(e);return jv(e,()=>Aj(e.issues)?Oe(ti(e.issues,sc),n=>Wn(t,n)):Oe(sc(e.issues),n=>Wn(t,[n])))}}},uae=S(e=>So(e[0]),(e,...t)=>{const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}),lae=S(e=>So(e[0]),(e,...t)=>{const n={...e};for(const r of t)delete n[r];return n}),_u=Symbol.for("effect/Schema"),zn=e=>{var t,n,r;return n=_u,t=_u,r=class{constructor(){u(this,n,Tb)}static annotations(i){return zn(Td(this.ast,i))}static pipe(){return q(this,arguments)}static toString(){return String(e)}},u(r,"Type"),u(r,"Encoded"),u(r,"Context"),u(r,t,Tb),u(r,"ast",e),r},Tb={_A:e=>e,_I:e=>e,_R:e=>e},nI={schemaId:Gie,message:Bj,missingMessage:zj,identifier:Hk,title:Es,description:Ed,examples:Qie,default:Yie,documentation:noe,jsonSchema:Xie,arbitrary:Zie,pretty:eoe,equivalence:toe,concurrency:Uj,batching:Vj,parseIssueTitle:qj,parseOptions:Kj,decodingFallback:Hj},Od=e=>{if(!e)return{};const t={...e};for(const n in nI)if(n in e){const r=nI[n];t[r]=e[n],delete t[n]}return t},Td=(e,t)=>rB(e,Od(t)),fae=e=>zn(Ob(e.ast)),rI=e=>zn(ct(e.ast)),vu=e=>G(e,_u)&&So(e[_u]),hae=e=>Jk(e)?no.make(Foe(e,t=>new kb(t))):new kb(e[0]),pB=(e,t=hae(e))=>{var n;return n=class extends zn(t){static annotations(s){return pB(this.literals,Td(this.ast,s))}},u(n,"literals",[...e]),n};function dae(...e){return Nt(e)?pB(e):mB}const pae=(e,t,n)=>zn(new FS(e.map(r=>r.ast),(...r)=>t.decode(...r.map(zn)),(...r)=>t.encode(...r.map(zn)),Od(n))),mae=(e,t)=>{const n=()=>(s,i,o)=>e(s)?Eh(s):iB(new Ni(o,s)),r=n;return zn(new FS([],n,r,Od(t)))},gae=function(){if(Array.isArray(arguments[0])){const n=arguments[0],r=arguments[1],s=arguments[2];return pae(n,r,s)}const e=arguments[0],t=arguments[1];return mae(e,t)};let mB=class extends zn(Qj){};const yae=e=>no.make(e.map(t=>t.ast)),gB=(e,t=yae(e))=>{var n;return n=class extends zn(t){static annotations(s){return gB(this.members,Td(this.ast,s))}},u(n,"members",[...e]),n};function Sae(...e){return Jk(e)?gB(e):Nt(e)?e[0]:mB}const Cb=e=>e?'"?:"':'":"';class Yk extends il{constructor(n,r,s,i,o){super(n,r,i);u(this,"isReadonly");u(this,"defaultValue");u(this,"_tag","PropertySignatureDeclaration");this.isReadonly=s,this.defaultValue=o}toString(){const n=Cb(this.isOptional),r=String(this.type);return`PropertySignature<${n}, ${r}, never, ${n}, ${r}>`}}class _ae extends il{constructor(n,r,s,i,o){super(n,r,i);u(this,"isReadonly");u(this,"fromKey");this.isReadonly=s,this.fromKey=o}}class yB extends il{constructor(n,r,s,i,o){super(n,r,i);u(this,"isReadonly");u(this,"defaultValue");this.isReadonly=s,this.defaultValue=o}}const vae=e=>e===void 0?"never":Pr(e)?JSON.stringify(e):String(e);let SB=class{constructor(t,n,r,s){u(this,"from");u(this,"to");u(this,"decode");u(this,"encode");u(this,"_tag","PropertySignatureTransformation");this.from=t,this.to=n,this.decode=r,this.encode=s}toString(){return`PropertySignature<${Cb(this.to.isOptional)}, ${this.to.type}, ${vae(this.from.fromKey)}, ${Cb(this.from.isOptional)}, ${this.from.type}>`}};const _B=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new Yk(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new SB(new _ae(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new yB(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},vB=Symbol.for("effect/PropertySignature"),Xk=e=>G(e,vB);var jF,BF;BF=_u,jF=vB;const lO=class lO{constructor(t){u(this,"ast");u(this,BF);u(this,jF,null);u(this,"_TypeToken");u(this,"_Key");u(this,"_EncodedToken");u(this,"_HasDefault");this.ast=t}pipe(){return q(this,arguments)}annotations(t){return new lO(_B(this.ast,Od(t)))}toString(){return String(this.ast)}};let jg=lO;const sI=e=>new jg(e);class Zk extends jg{constructor(n,r){super(n);u(this,"from");this.from=r}annotations(n){return new Zk(_B(this.ast,Od(n)),this.from)}}const bae=e=>new Zk(new Yk(e.ast,!1,!0,{},void 0),e),wae=S(2,(e,t)=>{const n=e.ast;switch(n._tag){case"PropertySignatureDeclaration":return sI(new Yk(n.type,n.isOptional,n.isReadonly,n.annotations,t));case"PropertySignatureTransformation":return sI(new SB(n.from,new yB(n.to.type,n.to.isOptional,n.to.isReadonly,n.to.annotations,t),n.decode,n.encode))}}),$ae=(e,t)=>{const n=ri(e),r=[];if(n.length>0){const i=[],o=[],a=[];for(let c=0;c<n.length;c++){const l=n[c],f=e[l];if(Xk(f)){const h=f.ast;switch(h._tag){case"PropertySignatureDeclaration":{const d=h.type,p=h.isOptional,_=h.annotations;i.push(new Yt(l,d,p,!0)),o.push(new Yt(l,ct(d),p,!0,_)),r.push(new Yt(l,d,p,!0,_));break}case"PropertySignatureTransformation":{const d=h.from.fromKey??l;i.push(new Yt(d,h.from.type,h.from.isOptional,!0,h.from.annotations)),o.push(new Yt(l,h.to.type,h.to.isOptional,!0,h.to.annotations)),a.push(new Moe(d,l,h.decode,h.encode));break}}}else i.push(new Yt(l,f.ast,!1,!0)),o.push(new Yt(l,ct(f.ast),!1,!0)),r.push(new Yt(l,f.ast,!1,!0))}if(Nt(a)){const c=[],l=[];for(const f of t){const{indexSignatures:h,propertySignatures:d}=YR(f.key.ast,f.value.ast);d.forEach(p=>{i.push(p),o.push(new Yt(p.name,ct(p.type),p.isOptional,p.isReadonly,p.annotations))}),h.forEach(p=>{c.push(p),l.push(new NS(p.parameter,ct(p.type),p.isReadonly))})}return new Pf(new to(i,c,{[Es]:"Struct (Encoded side)"}),new to(o,l,{[Es]:"Struct (Type side)"}),new ym(a))}}const s=[];for(const i of t){const{indexSignatures:o,propertySignatures:a}=YR(i.key.ast,i.value.ast);a.forEach(c=>r.push(c)),o.forEach(c=>s.push(c))}return new to(r,s)},bB=(e,t)=>{const n=ri(e);for(const r of n){const s=e[r];if(t[r]===void 0&&Xk(s)){const i=s.ast,o=i._tag==="PropertySignatureDeclaration"?i.defaultValue:i.to.defaultValue;o!==void 0&&(t[r]=o())}}return t},wB=(e,t,n=$ae(e,t))=>{var r;return r=class extends zn(n){static annotations(i){return wB(this.fields,this.records,Td(this.ast,i))}static pick(...i){return Oa(uae(e,...i))}static omit(...i){return Oa(lae(e,...i))}},u(r,"fields",{...e}),u(r,"records",[...t]),u(r,"make",(i,o)=>{const a=bB(e,{...i});return CB(o)?a:uB(r)(a)}),r};function Oa(e,...t){return wB(e,t)}const Co=(e,t,n)=>{if(QR(e)&&QR(t)){const r=[...e.propertySignatures];for(const s of t.propertySignatures){const i=s.name,o=r.findIndex(a=>a.name===i);if(o===-1)r.push(s);else{const{isOptional:a,type:c}=r[o];r[o]=new Yt(i,Ff(c,s.type,n.concat(i)),a,!0)}}return new to(r,e.indexSignatures.concat(t.indexSignatures))}throw new Error(Dj(e,t,n))},kae=joe([Hk]),Qa=(e,t)=>t.map(n=>new nB(n,e.filter,kae(e))),Ff=(e,t,n)=>no.make(hs([e],[t],n)),Ei=e=>tB(e)?e.types:[e],hs=(e,t,n)=>dg(e,r=>dg(t,s=>{switch(s._tag){case"Literal":{if(Pr(s.literal)&&Dg(r)||bs(s.literal)&&Eb(r)||rh(s.literal)&&JR(r))return[s];break}case"StringKeyword":{if(s===KR){if(Dg(r)||Rf(r)&&Pr(r.literal))return[r];if(gm(r))return Qa(r,hs(Ei(r.from),[s],n))}else if(r===KR)return[s];break}case"NumberKeyword":{if(s===HR){if(Eb(r)||Rf(r)&&bs(r.literal))return[r];if(gm(r))return Qa(r,hs(Ei(r.from),[s],n))}else if(r===HR)return[s];break}case"BooleanKeyword":{if(s===WR){if(JR(r)||Rf(r)&&rh(r.literal))return[r];if(gm(r))return Qa(r,hs(Ei(r.from),[s],n))}else if(r===WR)return[s];break}case"Union":return hs(Ei(r),s.types,n);case"Suspend":return[new If(()=>Ff(r,s.f(),n))];case"Refinement":return Qa(s,hs(Ei(r),Ei(s.from),n));case"TypeLiteral":{switch(r._tag){case"Union":return hs(r.types,[s],n);case"Suspend":return[new If(()=>Ff(r.f(),s,n))];case"Refinement":return Qa(r,hs(Ei(r.from),[s],n));case"TypeLiteral":return[Co(r,s,n)];case"Transformation":{if(Nv(r.transformation))return[new Pf(Co(r.from,s,n),Co(r.to,ct(s),n),new ym(r.transformation.propertySignatureTransformations))];break}}break}case"Transformation":{if(Nv(s.transformation))switch(r._tag){case"Union":return hs(r.types,[s],n);case"Suspend":return[new If(()=>Ff(r.f(),s,n))];case"Refinement":return Qa(r,hs(Ei(r.from),[s],n));case"TypeLiteral":return[new Pf(Co(r,s.from,n),Co(ct(r),s.to,n),new ym(s.transformation.propertySignatureTransformations))];case"Transformation":if(Nv(r.transformation))return[new Pf(Co(r.from,s.from,n),Co(r.to,s.to,n),new ym(s.transformation.propertySignatureTransformations.concat(r.transformation.propertySignatureTransformations)))];break}break}}throw new Error(Dj(r,s,n))})),$B=S(2,(e,t)=>zn(Ff(e.ast,t.ast,[]))),Eae=Symbol.for("effect/SchemaId/Refine"),kB=(e,t,n)=>{var r;return r=class extends zn(n){static annotations(i){return kB(this.from,this.to,Td(this.ast,i))}},u(r,"from",e),u(r,"to",t),r},Rb=S(e=>vu(e[0])&&vu(e[1]),(e,t,n)=>kB(e,t,new Pf(e.ast,t.ast,new Noe(n.decode,n.encode)))),Oae=S(e=>vu(e[0])&&vu(e[1]),(e,t,n)=>Rb(e,t,{strict:!0,decode:(r,s,i,o)=>Eh(n.decode(r,o)),encode:(r,s,i,o)=>Eh(n.encode(r,o))})),Tae=e=>vu(e)||Xk(e),EB=e=>ri(e).every(t=>Tae(e[t])),eE=e=>"fields"in e?e.fields:eE(e[Eae]),OB=e=>EB(e)?Oa(e):vu(e)?e:Oa(eE(e)),TB=e=>EB(e)?e:eE(e),Cae=e=>wae(bae(dae(e)),()=>e),Rae=e=>(t,n,r)=>{var c;const s=TB(n),i=OB(n),o={_tag:Cae(t)},a=_m(o,s);return c=class extends vm({kind:"TaggedClass",identifier:t,schema:$B(i,Oa(o)),fields:a,Base:Zse,annotations:r}){},u(c,"_tag",t),c},_m=(e,t)=>{const n={...e};for(const r of ri(t)){if(r in e)throw new Error(jj(r));n[r]=t[r]}return n},Bv=(e,t)=>{const n=Wj(e.ast);return nt(n)?e.annotations({title:t}):e},CB=e=>rh(e)?e:(e==null?void 0:e.disableValidation)??!1,zv=ge("effect/Schema/astCache",()=>new WeakMap),vm=({Base:e,annotations:t,disableToString:n,fields:r,identifier:s,kind:i,schema:o})=>{var p,_;const a=Symbol.for(`effect/Schema/${i}/${s}`),c=Bv(o,`${s} (Constructor)`),l=Bv(o,`${s} (Encoded side)`),f=Bv(rI(o),`${s} (Type side)`),h=b=>G(b,a)&&Woe(f)(b),d=(_=class extends e{constructor(b={},w=!1){b={...b},i!=="Class"&&delete b._tag,b=bB(r,b),CB(w)||(b=uB(c)(b)),super(b,!0)}static get ast(){if(zv.has(this))return zv.get(this);const b=gae([f],{decode:()=>(m,g,y)=>m instanceof this||h(m)?Eh(m):iB(new Ni(y,m)),encode:()=>(m,g)=>m instanceof this?Eh(m):oB(Hoe(f)(m,g),y=>new this(y,!0))},{identifier:s,title:s,description:`an instance of ${s}`,pretty:m=>g=>`${s}(${m(g)})`,arbitrary:m=>g=>m(g).map(y=>new this(y)),equivalence:de,[$b]:f.ast,...t}),w=Oae(l,b,{strict:!0,decode:m=>new this(m,!0),encode:de}).annotations({[$b]:o.ast});return zv.set(this,w.ast),w.ast}static pipe(){return q(this,arguments)}static annotations(b){return zn(this.ast).annotations(b)}static toString(){return`(${String(l)} <-> ${s})`}static make(...b){return new this(...b)}static extend(b){return(w,m)=>{const g=TB(w),y=OB(w),$=_m(r,g);return vm({kind:i,identifier:b,schema:$B(o,y),fields:$,Base:this,annotations:m})}}static transformOrFail(b){return(w,m,g)=>{const y=_m(r,w);return vm({kind:i,identifier:b,schema:Rb(o,rI(Oa(y)),m),fields:y,Base:this,annotations:g})}}static transformOrFailFrom(b){return(w,m,g)=>{const y=_m(r,w);return vm({kind:i,identifier:b,schema:Rb(fae(o),Oa(y),m),fields:y,Base:this,annotations:g})}}get[(p=_u,a)](){return a}},u(_,p,Tb),u(_,"fields",{...r}),u(_,"identifier",s),_);return n!==!0&&Object.defineProperty(d.prototype,"toString",{value(){return`${s}({ ${ri(r).map(b=>`${Mj(b)}: ${pi(this[b])}`).join(", ")} })`},configurable:!0}),d},Iae=sne,Pae=e=>typeof e=="function",k=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):n=>t(n,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(n,r){return arguments.length>=2?t(n,r):function(s){return t(s,n)}};case 3:return function(n,r,s){return arguments.length>=3?t(n,r,s):function(i){return t(i,n,r)}};case 4:return function(n,r,s,i){return arguments.length>=4?t(n,r,s,i):function(o){return t(o,n,r,s)}};case 5:return function(n,r,s,i,o){return arguments.length>=5?t(n,r,s,i,o):function(a){return t(a,n,r,s,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(r){return t(r,...n)}}}},Ut=e=>e,MS=e=>()=>e,iI=MS(!0),Ib=MS(!1),Fae=MS(void 0);function R(e,t,n,r,s,i,o,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return s(r(n(t(e))));case 6:return i(s(r(n(t(e)))));case 7:return o(i(s(r(n(t(e))))));case 8:return a(o(i(s(r(n(t(e)))))));case 9:return c(a(o(i(s(r(n(t(e))))))));default:{let l=arguments[0];for(let f=1;f<arguments.length;f++)l=arguments[f](l);return l}}}const bu=e=>(t,n)=>t===n||e(t,n),Nae=k(2,(e,t)=>bu((n,r)=>e(t(n),t(r)))),xae=e=>bu((t,n)=>{if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0});let Mae="3.10.14";const Bg=()=>Mae,Pb=Symbol.for(`effect/GlobalValue/globalStoreId/${Bg()}`);Pb in globalThis||(globalThis[Pb]=new Map);const Uv=globalThis[Pb],$e=(e,t)=>(Uv.has(e)||Uv.set(e,t()),Uv.get(e)),Aae=e=>e instanceof Map,mi=e=>typeof e=="string",ro=e=>typeof e=="number",tE=e=>typeof e=="boolean",AS=e=>typeof e=="bigint",Fb=e=>typeof e=="symbol",Cd=Pae,Lae=e=>e===void 0,Dae=e=>!1,nE=e=>typeof e=="object"&&e!==null,wo=e=>nE(e)||Cd(e),le=k(2,(e,t)=>wo(e)&&t in e),RB=k(2,(e,t)=>le(e,"_tag")&&e._tag===t),Ya=e=>e==null,jae=e=>e!=null,Bae=e=>e instanceof Date,zae=e=>le(e,Symbol.iterator),Uae=e=>nE(e)&&!Array.isArray(e),Vae=e=>le(e,"then")&&Cd(e.then),LS=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;let qae=class IB{constructor(t){u(this,"self");u(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new IB(this.self)}};const Kae=335903614,Hae=4150755663,Wae=1481765933,Jae=1284865837,Gae=9007199254740992,Qae=134217728;class Yae{constructor(t,n,r,s){u(this,"_state");return Ya(n)&&Ya(t)?(n=Math.random()*4294967295>>>0,t=0):Ya(n)&&(n=t,t=0),Ya(s)&&Ya(r)?(s=this._state?this._state[3]:Hae,r=this._state?this._state[2]:Kae):Ya(s)&&(s=r,r=0),this._state=new Int32Array([0,0,r>>>0,((s||0)|1)>>>0]),this._next(),oI(this._state,this._state[0],this._state[1],t>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}number(){const t=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(t*Qae+n)/Gae}_next(){const t=this._state[0]>>>0,n=this._state[1]>>>0;Xae(this._state,t,n,Wae,Jae),oI(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=t>>>18,s=(n>>>18|t<<14)>>>0;r=(r^t)>>>0,s=(s^n)>>>0;const i=(s>>>27|r<<5)>>>0,o=t>>>27,a=(-o>>>0&31)>>>0;return(i>>>o|i<<a)>>>0}}function Xae(e,t,n,r,s){let i=(n>>>16)*(s&65535)>>>0,o=(n&65535)*(s>>>16)>>>0,a=(n&65535)*(s&65535)>>>0,c=(n>>>16)*(s>>>16)+((o>>>16)+(i>>>16))>>>0;o=o<<16>>>0,a=a+o>>>0,a>>>0<o>>>0&&(c=c+1>>>0),i=i<<16>>>0,a=a+i>>>0,a>>>0<i>>>0&&(c=c+1>>>0),c=c+Math.imul(n,r)>>>0,c=c+Math.imul(t,s)>>>0,e[0]=c,e[1]=a}function oI(e,t,n,r,s){let i=t+r>>>0;const o=n+s>>>0;o>>>0<n>>>0&&(i=i+1|0),e[0]=i,e[1]=o}const Nb=Symbol.for("effect/Utils/YieldWrap");var Dh;class Rd{constructor(t){Qd(this,Dh);vl(this,Dh,t)}[Nb](){return _l(this,Dh)}}Dh=new WeakMap;function Zae(e){if(typeof e=="object"&&e!==null&&Nb in e)return e[Nb]();throw new Error(LS("yieldWrapGet"))}const mr=$e("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),ece=e=>{const t={[e](n){return n()}};return function(n){return t[e](n)}},wn=ece("effect_internal_function"),Vv=$e(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),he=Symbol.for("effect/Hash"),J=e=>{if(mr.enabled===!0)return 0;switch(typeof e){case"number":return sE(e);case"bigint":return Tt(e.toString(10));case"boolean":return Tt(String(e));case"symbol":return Tt(String(e));case"string":return Tt(e);case"undefined":return Tt("undefined");case"function":case"object":return e===null?Tt("null"):e instanceof Date?J(e.toISOString()):tce(e)?e[he]():rE(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},rE=e=>(Vv.has(e)||Vv.set(e,sE(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),Vv.get(e)),ke=e=>t=>t*53^e,DS=e=>e&3221225471|e>>>1&1073741824,tce=e=>le(e,he),sE=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return DS(t)},Tt=e=>{let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return DS(t)},nce=(e,t)=>{let n=12289;for(let r=0;r<t.length;r++)n^=R(Tt(t[r]),ke(J(e[t[r]])));return DS(n)},PB=e=>nce(e,Object.keys(e)),Id=e=>{let t=6151;for(let n=0;n<e.length;n++)t=R(t,ke(J(e[n])));return DS(t)},dt=function(){if(arguments.length===1){const n=arguments[0];return function(r){return Object.defineProperty(n,he,{value(){return r},enumerable:!1}),r}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,he,{value(){return t},enumerable:!1}),t},ce=Symbol.for("effect/Equal");function ue(){return arguments.length===1?e=>zg(e,arguments[0]):zg(arguments[0],arguments[1])}function zg(e,t){if(e===t)return!0;const n=typeof e;if(n!==typeof t)return!1;if(n==="object"||n==="function"){if(e!==null&&t!==null){if(Ug(e)&&Ug(t))return J(e)===J(t)&&e[ce](t)?!0:mr.enabled&&mr.tester?mr.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(mr.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((r,s)=>zg(r,t[s]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const r=Object.keys(e),s=Object.keys(t);if(r.length===s.length){for(const i of r)if(!(i in t&&zg(e[i],t[i])))return mr.tester?mr.tester(e,t):!1;return!0}}return mr.tester?mr.tester(e,t):!1}}return mr.enabled&&mr.tester?mr.tester(e,t):!1}const Ug=e=>le(e,ce),iE=()=>ue,it=Symbol.for("nodejs.util.inspect.custom"),Pt=e=>le(e,"toJSON")&&Cd(e.toJSON)&&e.toJSON.length===0?e.toJSON():Array.isArray(e)?e.map(Pt):sce(e),yn=e=>JSON.stringify(e,null,2),wu=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?FB(e,t):String(e)}catch{return String(e)}},FB=(e,t)=>{let n=[];const r=JSON.stringify(e,(s,i)=>typeof i=="object"&&i!==null?n.includes(i)?void 0:n.push(i)&&(ta.fiberRefs!==void 0&&NB(i)?i[oE](ta.fiberRefs):i):i,t);return n=void 0,r},oE=Symbol.for("effect/Inspectable/Redactable"),NB=e=>typeof e=="object"&&e!==null&&oE in e,ta=$e("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),rce=(e,t)=>{const n=ta.fiberRefs;ta.fiberRefs=e;try{return t()}finally{ta.fiberRefs=n}},sce=e=>NB(e)&&ta.fiberRefs!==void 0?e[oE](ta.fiberRefs):e,ne=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let r=0,s=t.length;r<s;r++)n=t[r](n);return n}}},Nf="Async",jS="Commit",ts="Failure",qv="OnFailure",Vg="OnSuccess",qg="OnSuccessAndFailure",ns="Success",xB="Sync",ice="Tag",Pd="UpdateRuntimeFlags",Kg="While",bm="Iterator",MB="WithRuntime",wm="Yield",aE="RevertFlags",oce=Symbol.for("effect/Effect"),ace=Symbol.for("effect/Stream"),cce=Symbol.for("effect/Sink"),uce=Symbol.for("effect/Channel"),$u={_R:e=>e,_E:e=>e,_A:e=>e,_V:Bg()},lce={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},fce={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},Fd={[oce]:$u,[ace]:$u,[cce]:lce,[uce]:fce,[ce](e){return this===e},[he](){return dt(this,rE(this))},[Symbol.iterator](){return new qae(new Rd(this))},pipe(){return ne(this,arguments)}},cE={[he](){return dt(this,PB(this))},[ce](e){const t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(const r of t)if(!(r in e&&ue(this[r],e[r])))return!1;return!0}},Nd={...Fd,_op:jS},hce={...Nd,...cE},dce=function(){function e(){}return e.prototype=Nd,e}(),AB=Symbol.for("effect/Option"),LB={...Fd,[AB]:{_A:e=>e},[it](){return this.toJSON()},toString(){return yn(this.toJSON())}},pce=Object.assign(Object.create(LB),{_tag:"Some",_op:"Some",[ce](e){return uE(e)&&DB(e)&&ue(this.value,e.value)},[he](){return dt(this,ke(J(this._tag))(J(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:Pt(this.value)}}}),mce=J("None"),gce=Object.assign(Object.create(LB),{_tag:"None",_op:"None",[ce](e){return uE(e)&&lE(e)},[he](){return mce},toJSON(){return{_id:"Option",_tag:this._tag}}}),uE=e=>le(e,AB),lE=e=>e._tag==="None",DB=e=>e._tag==="Some",jB=Object.create(gce),BB=e=>{const t=Object.create(pce);return t.value=e,t},zB=Symbol.for("effect/Either"),UB={...Fd,[zB]:{_R:e=>e},[it](){return this.toJSON()},toString(){return yn(this.toJSON())}},yce=Object.assign(Object.create(UB),{_tag:"Right",_op:"Right",[ce](e){return VB(e)&&KB(e)&&ue(this.right,e.right)},[he](){return ke(J(this._tag))(J(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:Pt(this.right)}}}),Sce=Object.assign(Object.create(UB),{_tag:"Left",_op:"Left",[ce](e){return VB(e)&&qB(e)&&ue(this.left,e.left)},[he](){return ke(J(this._tag))(J(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:Pt(this.left)}}}),VB=e=>le(e,zB),qB=e=>e._tag==="Left",KB=e=>e._tag==="Right",HB=e=>{const t=Object.create(Sce);return t.left=e,t},WB=e=>{const t=Object.create(yce);return t.right=e,t},_ce=k(2,(e,t)=>lE(e)?HB(t()):WB(e.value)),ht=WB,fe=HB,vce=_ce,hn=qB,ji=KB,bce=k(2,(e,{onLeft:t,onRight:n})=>hn(e)?t(e.left):n(e.right)),wce=bce({onLeft:Ut,onRight:Ut}),$ce=k(2,(e,t)=>{if(ji(e))return e.right;throw t(e.left)}),JB=e=>e.length>0,GB=e=>(t,n)=>t===n?0:e(t,n),kce=GB((e,t)=>e<t?-1:1),QB=k(2,(e,t)=>GB((n,r)=>e(t(n),t(r)))),Ece=e=>k(2,(t,n)=>e(t,n)===1),H=()=>jB,Q=BB,Oce=uE,Ue=lE,Ge=DB,Mr=k(2,(e,{onNone:t,onSome:n})=>Ue(e)?t():n(e.value)),Kt=k(2,(e,t)=>Ue(e)?t():e.value),Hg=k(2,(e,t)=>Ue(e)?t():e),Tce=k(2,(e,t)=>Ue(e)?Q(t()):e),BS=e=>e==null?H():Q(e),js=Kt(Fae),Cce=e=>(...t)=>{try{return Q(e(...t))}catch{return H()}},Rce=k(2,(e,t)=>{if(Ge(e))return e.value;throw t()}),YB=Rce(()=>new Error("getOrThrow called on a None")),Ice=k(2,(e,t)=>Ue(e)?H():Q(t(e.value))),zS=k(2,(e,t)=>Ue(e)?H():t(e.value)),Pce=k(2,(e,t)=>Ue(e)?H():t(e.value)),Fce=e=>bu((t,n)=>Ue(t)?Ue(n):Ue(n)?!1:e(t.value,n.value)),Nce=e=>k(2,(t,n)=>Ue(t)?!1:e(t.value,n)),xce=iE(),Mce=Nce(xce),Ace=k(2,(e,t)=>Ue(e)?!1:t(e.value)),Lce=(...e)=>e,US=e=>new Array(e),Dce=(e,t)=>{const n=Math.max(1,Math.floor(e)),r=new Array(n);for(let s=0;s<n;s++)r[s]=t(s);return r},vt=e=>Array.isArray(e)?e:Array.from(e),jce=e=>Array.isArray(e)?e:[e],Bce=k(2,(e,{onEmpty:t,onNonEmpty:n})=>Ht(e)?n(Un(e),Ta(e)):t()),Wg=k(2,(e,t)=>[t,...e]),zce=k(2,(e,t)=>[...e,t]),XB=k(2,(e,t)=>vt(e).concat(vt(t))),xb=Array.isArray,Uce=e=>e.length===0,Vce=Uce,$m=JB,Ht=JB,ZB=(e,t)=>e<0||e>=t.length,qce=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),Kce=k(2,(e,t)=>{const n=Math.floor(t);return ZB(n,e)?H():Q(e[n])}),ez=k(2,(e,t)=>{const n=Math.floor(t);if(ZB(n,e))throw new Error(`Index ${n} out of bounds`);return e[n]}),xf=Kce(0),Un=ez(0),Hce=e=>Ht(e)?Q(tz(e)):H(),tz=e=>e[e.length-1],Ta=e=>e.slice(1),Wce=(e,t)=>{let n=0;for(const r of e){if(!t(r,n))break;n++}return n},Jce=k(2,(e,t)=>Xce(e,Wce(e,t))),Gce=k(2,(e,t)=>{const n=vt(e);return n.slice(qce(t,n),n.length)}),aI=e=>Array.from(e).reverse(),Oh=k(2,(e,t)=>{const n=Array.from(e);return n.sort(t),n}),cI=k(2,(e,t)=>Qce(e,t,Lce)),Qce=k(3,(e,t,n)=>{const r=vt(e),s=vt(t);if(Ht(r)&&Ht(s)){const i=[n(Un(r),Un(s))],o=Math.min(r.length,s.length);for(let a=1;a<o;a++)i[a]=n(r[a],s[a]);return i}return[]}),Yce=iE(),Xce=k(2,(e,t)=>{const n=Array.from(e),r=Math.floor(t);return Ht(n)?r>=1?Zce(n,r):[[],n]:[n,[]]}),Zce=k(2,(e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[af(e),[]]:[Wg(e.slice(1,n),Un(e)),e.slice(n)]}),af=e=>e.slice(),eue=k(3,(e,t,n)=>{const r=vt(e),s=vt(t);return Ht(r)?Ht(s)?sz(n)(XB(r,s)):r:s}),km=k(2,(e,t)=>eue(e,t,Yce)),ku=()=>[],Vr=e=>[e],jc=k(2,(e,t)=>e.map(t)),nz=k(2,(e,t)=>{if(Vce(e))return[];const n=[];for(let r=0;r<e.length;r++){const s=t(e[r],r);for(let i=0;i<s.length;i++)n.push(s[i])}return n}),tue=nz(Ut),rz=k(3,(e,t,n)=>vt(e).reduce((r,s,i)=>n(r,s,i),t)),uI=(e,t)=>{const n=[];let r=e,s;for(;Ge(s=t(r));){const[i,o]=s.value;n.push(i),r=o}return n},VS=xae,sz=k(2,(e,t)=>{const n=vt(e);if(Ht(n)){const r=[Un(n)],s=Ta(n);for(const i of s)r.every(o=>!t(i,o))&&r.push(i);return r}return[]}),nue=e=>sz(e,iE()),al=k(2,(e,t)=>vt(e).join(t)),rue=e=>{try{return e.trim()===""?H():Q(BigInt(e))}catch{return H()}},iz=Symbol.for("effect/Chunk");function sue(e,t,n,r,s){for(let i=t;i<Math.min(e.length,t+s);i++)n[r+i-t]=e[i];return n}const oz=[],iue=e=>bu((t,n)=>t.length===n.length&&na(t).every((r,s)=>e(r,Bc(n,s)))),oue=iue(ue),aue={[iz]:{_A:e=>e},toString(){return yn(this.toJSON())},toJSON(){return{_id:"Chunk",values:na(this).map(Pt)}},[it](){return this.toJSON()},[ce](e){return az(e)&&oue(this,e)},[he](){return dt(this,Id(na(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return oz[Symbol.iterator]();default:return na(this)[Symbol.iterator]()}},pipe(){return ne(this,arguments)}},mt=e=>{const t=Object.create(aue);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=ms,t.right=ms;break}case"ISingleton":{t.length=1,t.depth=0,t.left=ms,t.right=ms;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=ms,t.right=ms;break}}return t},az=e=>le(e,iz),ms=mt({_tag:"IEmpty"}),lo=()=>ms,Kv=(...e)=>e.length===1?sr(e[0]):lue(e),sr=e=>mt({_tag:"ISingleton",a:e}),cz=e=>az(e)?e:mt({_tag:"IArray",array:vt(e)}),Mb=(e,t,n)=>{switch(e.backing._tag){case"IArray":{sue(e.backing.array,0,t,n,e.length);break}case"IConcat":{Mb(e.left,t,n),Mb(e.right,t,n+e.left.length);break}case"ISingleton":{t[n]=e.backing.a;break}case"ISlice":{let r=0,s=n;for(;r<e.length;)t[s]=Bc(e,r),r+=1,s+=1;break}}},cue=e=>{switch(e.backing._tag){case"IEmpty":return oz;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return Mb(e,t,0),e.backing={_tag:"IArray",array:t},e.left=ms,e.right=ms,e.depth=0,t}}},na=cue,uue=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return mt({_tag:"IArray",array:aI(e.backing.array)});case"IConcat":return mt({_tag:"IConcat",left:Eu(e.backing.right),right:Eu(e.backing.left)});case"ISlice":return fE(aI(na(e)))}},Eu=uue,fE=e=>mt({_tag:"IArray",array:e}),lue=e=>fE(e),Bc=k(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?Bc(e.left,t):Bc(e.right,t-e.left.length);case"ISlice":return Bc(e.backing.chunk,t+e.backing.offset)}}),fue=k(2,(e,t)=>Qr(e,sr(t))),os=k(2,(e,t)=>Qr(sr(t),e)),Ab=k(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return ms;switch(e.backing._tag){case"ISlice":return mt({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?Ab(e.right,t-e.left.length):mt({_tag:"IConcat",left:Ab(e.left,t),right:e.right});default:return mt({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),Qr=k(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;const n=t.depth-e.depth;if(Math.abs(n)<=1)return mt({_tag:"IConcat",left:e,right:t});if(n<-1)if(e.left.depth>=e.right.depth){const r=Qr(e.right,t);return mt({_tag:"IConcat",left:e.left,right:r})}else{const r=Qr(e.right.right,t);if(r.depth===e.depth-3){const s=mt({_tag:"IConcat",left:e.right.left,right:r});return mt({_tag:"IConcat",left:e.left,right:s})}else{const s=mt({_tag:"IConcat",left:e.left,right:e.right.left});return mt({_tag:"IConcat",left:s,right:r})}}else if(t.right.depth>=t.left.depth){const r=Qr(e,t.left);return mt({_tag:"IConcat",left:r,right:t.right})}else{const r=Qr(e,t.left.left);if(r.depth===t.depth-3){const s=mt({_tag:"IConcat",left:r,right:t.left.right});return mt({_tag:"IConcat",left:s,right:t.right})}else{const s=mt({_tag:"IConcat",left:t.left.right,right:t.right});return mt({_tag:"IConcat",left:r,right:s})}}}),hue=e=>e.length===0,Ou=e=>e.length>0,uz=e=>Bc(e,0),Tu=uz,qo=e=>Ab(e,1),Ca=5,hE=Math.pow(2,Ca),due=hE-1,pue=hE/2,mue=hE/4;function gue(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Cu(e,t){return t>>>e&due}function $c(e){return 1<<e}function lz(e,t){return gue(e&t-1)}const yue=(e,t)=>({value:e,previous:t});function zc(e,t,n,r){let s=r;if(!e){const i=r.length;s=new Array(i);for(let o=0;o<i;++o)s[o]=r[o]}return s[t]=n,s}function fz(e,t,n){const r=n.length-1;let s=0,i=0,o=n;if(e)s=i=t;else for(o=new Array(r);s<t;)o[i++]=n[s++];for(++s;s<=r;)o[i++]=n[s++];return e&&(o.length=r),o}function Sue(e,t,n,r){const s=r.length;if(e){let c=s;for(;c>=t;)r[c--]=r[c];return r[t]=n,r}let i=0,o=0;const a=new Array(s+1);for(;i<t;)a[o++]=r[i++];for(a[t]=n;i<s;)a[++o]=r[i++];return a}class fo{constructor(){u(this,"_tag","EmptyNode")}modify(t,n,r,s,i,o){const a=r(H());return Ue(a)?new fo:(++o.value,new ra(t,s,i,a))}}function Yr(e){return RB(e,"EmptyNode")}function _ue(e){return Yr(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function qS(e,t){return Yr(e)?!1:t===e.edit}class ra{constructor(t,n,r,s){u(this,"edit");u(this,"hash");u(this,"key");u(this,"value");u(this,"_tag","LeafNode");this.edit=t,this.hash=n,this.key=r,this.value=s}modify(t,n,r,s,i,o){if(ue(i,this.key)){const c=r(this.value);return c===this.value?this:Ue(c)?(--o.value,new fo):qS(this,t)?(this.value=c,this):new ra(t,s,i,c)}const a=r(H());return Ue(a)?this:(++o.value,hz(t,n,this.hash,this,s,new ra(t,s,i,a)))}}class dE{constructor(t,n,r){u(this,"edit");u(this,"hash");u(this,"children");u(this,"_tag","CollisionNode");this.edit=t,this.hash=n,this.children=r}modify(t,n,r,s,i,o){if(s===this.hash){const c=qS(this,t),l=this.updateCollisionList(c,t,this.hash,this.children,r,i,o);return l===this.children?this:l.length>1?new dE(t,this.hash,l):l[0]}const a=r(H());return Ue(a)?this:(++o.value,hz(t,n,this.hash,this,s,new ra(t,s,i,a)))}updateCollisionList(t,n,r,s,i,o,a){const c=s.length;for(let f=0;f<c;++f){const h=s[f];if("key"in h&&ue(o,h.key)){const d=h.value,p=i(d);return p===d?s:Ue(p)?(--a.value,fz(t,f,s)):zc(t,f,new ra(n,r,o,p),s)}}const l=i(H());return Ue(l)?s:(++a.value,zc(t,c,new ra(n,r,o,l),s))}}class Ru{constructor(t,n,r){u(this,"edit");u(this,"mask");u(this,"children");u(this,"_tag","IndexedNode");this.edit=t,this.mask=n,this.children=r}modify(t,n,r,s,i,o){const a=this.mask,c=this.children,l=Cu(n,s),f=$c(l),h=lz(a,f),d=a&f,p=qS(this,t);if(!d){const g=new fo().modify(t,n+Ca,r,s,i,o);return g?c.length>=pue?bue(t,l,g,a,c):new Ru(t,a|f,Sue(p,h,g,c)):this}const _=c[h],b=_.modify(t,n+Ca,r,s,i,o);if(_===b)return this;let w=a,m;if(Yr(b)){if(w&=~f,!w)return new fo;if(c.length<=2&&_ue(c[h^1]))return c[h^1];m=fz(p,h,c)}else m=zc(p,h,b,c);return p?(this.mask=w,this.children=m,this):new Ru(t,w,m)}}class pE{constructor(t,n,r){u(this,"edit");u(this,"size");u(this,"children");u(this,"_tag","ArrayNode");this.edit=t,this.size=n,this.children=r}modify(t,n,r,s,i,o){let a=this.size;const c=this.children,l=Cu(n,s),f=c[l],h=(f||new fo).modify(t,n+Ca,r,s,i,o);if(f===h)return this;const d=qS(this,t);let p;if(Yr(f)&&!Yr(h))++a,p=zc(d,l,h,c);else if(!Yr(f)&&Yr(h)){if(--a,a<=mue)return vue(t,a,l,c);p=zc(d,l,new fo,c)}else p=zc(d,l,h,c);return d?(this.size=a,this.children=p,this):new pE(t,a,p)}}function vue(e,t,n,r){const s=new Array(t-1);let i=0,o=0;for(let a=0,c=r.length;a<c;++a)if(a!==n){const l=r[a];l&&!Yr(l)&&(s[i++]=l,o|=1<<a)}return new Ru(e,o,s)}function bue(e,t,n,r,s){const i=[];let o=r,a=0;for(let c=0;o;++c)o&1&&(i[c]=s[a++]),o>>>=1;return i[t]=n,new pE(e,a+1,i)}function wue(e,t,n,r,s,i){if(n===s)return new dE(e,n,[i,r]);const o=Cu(t,n),a=Cu(t,s);if(o===a)return c=>new Ru(e,$c(o)|$c(a),[c]);{const c=o<a?[r,i]:[i,r];return new Ru(e,$c(o)|$c(a),c)}}function hz(e,t,n,r,s,i){let o,a=t;for(;;){const c=wue(e,a,n,r,s,i);if(typeof c=="function")o=yue(c,o),a=a+Ca;else{let l=c;for(;o!=null;)l=o.value(l),o=o.previous;return l}}}const dz="effect/HashMap",Lb=Symbol.for(dz),$ue={[Lb]:Lb,[Symbol.iterator](){return new KS(this,(e,t)=>[e,t])},[he](){let e=J(dz);for(const t of this)e^=R(J(t[0]),ke(J(t[1])));return dt(this,e)},[ce](e){if(Oue(e)){if(e._size!==this._size)return!1;for(const t of this){const n=R(e,gE(t[0],J(t[0])));if(Ue(n))return!1;if(!ue(t[1],n.value))return!1}return!0}return!1},toString(){return yn(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(Pt)}},[it](){return this.toJSON()},pipe(){return ne(this,arguments)}},mE=(e,t,n,r)=>{const s=Object.create($ue);return s._editable=e,s._edit=t,s._root=n,s._size=r,s};class KS{constructor(t,n){u(this,"map");u(this,"f");u(this,"v");this.map=t,this.f=n,this.v=pz(this.map._root,this.f,void 0)}next(){if(Ue(this.v))return{done:!0,value:void 0};const t=this.v.value;return this.v=Jg(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new KS(this.map,this.f)}}const Jg=e=>e?mz(e[0],e[1],e[2],e[3],e[4]):H(),pz=(e,t,n=void 0)=>{switch(e._tag){case"LeafNode":return Ge(e.value)?Q({value:t(e.key,e.value.value),cont:n}):Jg(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=e.children;return mz(r.length,r,0,t,n)}default:return Jg(n)}},mz=(e,t,n,r,s)=>{for(;n<e;){const i=t[n++];if(i&&!Yr(i))return pz(i,r,[e,t,n,r,s])}return Jg(s)},kue=mE(!1,0,new fo,0),HS=()=>kue,Eue=e=>{const t=yz(HS());for(const n of e)Th(t,n[0],n[1]);return Pue(t)},Oue=e=>le(e,Lb),Tue=e=>e&&Yr(e._root),Cue=k(2,(e,t)=>gE(e,t,J(t))),gE=k(3,(e,t,n)=>{let r=e._root,s=0;for(;;)switch(r._tag){case"LeafNode":return ue(t,r.key)?r.value:H();case"CollisionNode":{if(n===r.hash){const i=r.children;for(let o=0,a=i.length;o<a;++o){const c=i[o];if("key"in c&&ue(t,c.key))return c.value}}return H()}case"IndexedNode":{const i=Cu(s,n),o=$c(i);if(r.mask&o){r=r.children[lz(r.mask,o)],s+=Ca;break}return H()}case"ArrayNode":{if(r=r.children[Cu(s,n)],r){s+=Ca;break}return H()}default:return H()}}),Rue=k(2,(e,t)=>Ge(gE(e,t,J(t)))),Th=k(3,(e,t,n)=>yE(e,t,()=>Q(n))),Iue=k(3,(e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:mE(e._editable,e._edit,t,n)),gz=e=>new KS(e,t=>t),Gg=e=>e._size,yz=e=>mE(!0,e._edit+1,e._root,e._size),Pue=e=>(e._editable=!1,e),yE=k(3,(e,t,n)=>Fue(e,t,J(t),n)),Fue=k(4,(e,t,n,r)=>{const s={value:e._size},i=e._root.modify(e._editable?e._edit:NaN,0,r,n,t,s);return R(e,Iue(i,s.value))}),lI=k(2,(e,t)=>yE(e,t,H)),Nue=k(2,(e,t)=>WS(e,HS(),(n,r,s)=>Th(n,s,t(r,s)))),xue=k(2,(e,t)=>WS(e,void 0,(n,r,s)=>t(r,s))),WS=k(3,(e,t,n)=>{const r=e._root;if(r._tag==="LeafNode")return Ge(r.value)?n(t,r.value.value,r.key):t;if(r._tag==="EmptyNode")return t;const s=[r.children];let i;for(;i=s.pop();)for(let o=0,a=i.length;o<a;){const c=i[o++];c&&!Yr(c)&&(c._tag==="LeafNode"?Ge(c.value)&&(t=n(t,c.value.value,c.key)):s.push(c.children))}return t}),Sz="effect/HashSet",Db=Symbol.for(Sz),Mue={[Db]:Db,[Symbol.iterator](){return gz(this._keyMap)},[he](){return dt(this,ke(J(this._keyMap))(J(Sz)))},[ce](e){return Aue(e)?Gg(this._keyMap)===Gg(e._keyMap)&&ue(this._keyMap,e._keyMap):!1},toString(){return yn(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(Pt)}},[it](){return this.toJSON()},pipe(){return ne(this,arguments)}},JS=e=>{const t=Object.create(Mue);return t._keyMap=e,t},Aue=e=>le(e,Db),Lue=JS(HS()),GS=()=>Lue,Due=e=>{const t=SE(GS());for(const n of e)Ch(t,n);return _E(t)},jue=(...e)=>{const t=SE(GS());for(const n of e)Ch(t,n);return _E(t)},Bue=k(2,(e,t)=>Rue(e._keyMap,t)),zue=e=>Gg(e._keyMap),SE=e=>JS(yz(e._keyMap)),_E=e=>(e._keyMap._editable=!1,e),_z=k(2,(e,t)=>{const n=SE(e);return t(n),_E(n)}),Ch=k(2,(e,t)=>e._keyMap._editable?(Th(t,!0)(e._keyMap),e):JS(Th(t,!0)(e._keyMap))),vz=k(2,(e,t)=>e._keyMap._editable?(lI(t)(e._keyMap),e):JS(lI(t)(e._keyMap))),Uue=k(2,(e,t)=>_z(e,n=>{for(const r of t)vz(n,r)})),Vue=k(2,(e,t)=>_z(GS(),n=>{que(e,r=>Ch(n,r));for(const r of t)Ch(n,r)})),que=k(2,(e,t)=>xue(e._keyMap,(n,r)=>t(r))),Kue=k(3,(e,t,n)=>WS(e._keyMap,t,(r,s,i)=>n(r,i))),Ra=GS,Hue=Due,vE=jue,Wue=Bue,bz=zue,Mf=Ch,wz=vz,fI=Uue,Rh=Vue,Qg=Kue,xd="Die",Iu="Empty",cl="Fail",ul="Interrupt",Pu="Parallel",Fu="Sequential",$z="effect/Cause",kz=Symbol.for($z),Jue={_E:e=>e},ll={[kz]:Jue,[he](){return R(J($z),ke(J(ole(this))),dt(this))},[ce](e){return Gue(e)&&ile(this,e)},pipe(){return ne(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:Pt(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:Pt(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:Pt(this.left),right:Pt(this.right)}}},toString(){return QS(this)},[it](){return this.toJSON()}},Ih=(()=>{const e=Object.create(ll);return e._tag=Iu,e})(),Yg=e=>{const t=Object.create(ll);return t._tag=cl,t.error=e,t},Cr=e=>{const t=Object.create(ll);return t._tag=xd,t.defect=e,t},xi=e=>{const t=Object.create(ll);return t._tag=ul,t.fiberId=e,t},Md=(e,t)=>{const n=Object.create(ll);return n._tag=Pu,n.left=e,n.right=t,n},er=(e,t)=>{const n=Object.create(ll);return n._tag=Fu,n.left=e,n.right=t,n},Gue=e=>le(e,kz),Que=e=>e._tag===Iu?!0:Nu(e,!0,(t,n)=>{switch(n._tag){case Iu:return Q(t);case xd:case cl:case ul:return Q(!1);default:return H()}}),Yue=e=>Ge(nle(e)),bE=e=>$E(void 0,cle)(e),Xue=e=>Eu(Nu(e,lo(),(t,n)=>n._tag===cl?Q(R(t,os(n.error))):H())),Ez=e=>Eu(Nu(e,lo(),(t,n)=>n._tag===xd?Q(R(t,os(n.defect))):H())),Zue=e=>Nu(e,Ra(),(t,n)=>n._tag===ul?Q(R(t,Mf(n.fiberId))):H()),ele=e=>Oz(e,t=>t._tag===cl?Q(t.error):H()),tle=e=>{const t=ele(e);switch(t._tag){case"None":return ht(e);case"Some":return fe(t.value)}},nle=e=>Oz(e,t=>t._tag===ul?Q(t.fiberId):H()),rle=e=>wE(e,{onEmpty:H(),onFail:t=>Q(Cr(t)),onDie:t=>Q(Cr(t)),onInterrupt:()=>H(),onSequential:(t,n)=>Ge(t)&&Ge(n)?Q(er(t.value,n.value)):Ge(t)&&Ue(n)?Q(t.value):Ue(t)&&Ge(n)?Q(n.value):H(),onParallel:(t,n)=>Ge(t)&&Ge(n)?Q(Md(t.value,n.value)):Ge(t)&&Ue(n)?Q(t.value):Ue(t)&&Ge(n)?Q(n.value):H()}),hI=e=>wE(e,{onEmpty:Ih,onFail:()=>Ih,onDie:t=>Cr(t),onInterrupt:t=>xi(t),onSequential:er,onParallel:Md}),sle=e=>wE(e,{onEmpty:Ih,onFail:t=>Cr(t),onDie:t=>Cr(t),onInterrupt:t=>xi(t),onSequential:(t,n)=>er(t,n),onParallel:(t,n)=>Md(t,n)}),ile=(e,t)=>{let n=sr(e),r=sr(t);for(;Ou(n)&&Ou(r);){const[s,i]=R(Tu(n),Nu([Ra(),lo()],([c,l],f)=>{const[h,d]=jb(f);return Q([R(c,Rh(h)),R(l,Qr(d))])})),[o,a]=R(Tu(r),Nu([Ra(),lo()],([c,l],f)=>{const[h,d]=jb(f);return Q([R(c,Rh(h)),R(l,Qr(d))])}));if(!ue(s,o))return!1;n=i,r=a}return!0},ole=e=>ale(sr(e),lo()),ale=(e,t)=>{for(;;){const[n,r]=R(e,rz([Ra(),lo()],([i,o],a)=>{const[c,l]=jb(a);return[R(i,Rh(c)),R(o,Qr(l))]})),s=bz(n)>0?R(t,os(n)):t;if(hue(r))return Eu(s);e=r,t=s}throw new Error(LS("Cause.flattenCauseLoop"))},Oz=k(2,(e,t)=>{const n=[e];for(;n.length>0;){const r=n.pop(),s=t(r);switch(s._tag){case"None":{switch(r._tag){case Fu:case Pu:{n.push(r.right),n.push(r.left);break}}break}case"Some":return s}}return H()}),jb=e=>{let t=e;const n=[];let r=Ra(),s=lo();for(;t!==void 0;)switch(t._tag){case Iu:{if(n.length===0)return[r,s];t=n.pop();break}case cl:{if(r=Mf(r,Kv(t._tag,t.error)),n.length===0)return[r,s];t=n.pop();break}case xd:{if(r=Mf(r,Kv(t._tag,t.defect)),n.length===0)return[r,s];t=n.pop();break}case ul:{if(r=Mf(r,Kv(t._tag,t.fiberId)),n.length===0)return[r,s];t=n.pop();break}case Fu:{switch(t.left._tag){case Iu:{t=t.right;break}case Fu:{t=er(t.left.left,er(t.left.right,t.right));break}case Pu:{t=Md(er(t.left.left,t.right),er(t.left.right,t.right));break}default:{s=os(s,t.right),t=t.left;break}}break}case Pu:{n.push(t.right),t=t.left;break}}throw new Error(LS("Cause.evaluateCauseLoop"))},cle={emptyCase:iI,failCase:Ib,dieCase:Ib,interruptCase:iI,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},dI="SequentialCase",pI="ParallelCase",wE=k(2,(e,{onDie:t,onEmpty:n,onFail:r,onInterrupt:s,onParallel:i,onSequential:o})=>$E(e,void 0,{emptyCase:()=>n,failCase:(a,c)=>r(c),dieCase:(a,c)=>t(c),interruptCase:(a,c)=>s(c),sequentialCase:(a,c,l)=>o(c,l),parallelCase:(a,c,l)=>i(c,l)})),Nu=k(3,(e,t,n)=>{let r=t,s=e;const i=[];for(;s!==void 0;){const o=n(r,s);switch(r=Ge(o)?o.value:r,s._tag){case Fu:{i.push(s.right),s=s.left;break}case Pu:{i.push(s.right),s=s.left;break}default:{s=void 0;break}}s===void 0&&i.length>0&&(s=i.pop())}return r}),$E=k(3,(e,t,n)=>{const r=[e],s=[];for(;r.length>0;){const o=r.pop();switch(o._tag){case Iu:{s.push(ht(n.emptyCase(t)));break}case cl:{s.push(ht(n.failCase(t,o.error)));break}case xd:{s.push(ht(n.dieCase(t,o.defect)));break}case ul:{s.push(ht(n.interruptCase(t,o.fiberId)));break}case Fu:{r.push(o.right),r.push(o.left),s.push(fe({_tag:dI}));break}case Pu:{r.push(o.right),r.push(o.left),s.push(fe({_tag:pI}));break}}}const i=[];for(;s.length>0;){const o=s.pop();switch(o._tag){case"Left":{switch(o.left._tag){case dI:{const a=i.pop(),c=i.pop(),l=n.sequentialCase(t,a,c);i.push(l);break}case pI:{const a=i.pop(),c=i.pop(),l=n.parallelCase(t,a,c);i.push(l);break}}break}case"Right":{i.push(o.right);break}}}if(i.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return i.pop()}),QS=(e,t)=>bE(e)?"All fibers interrupted without errors.":Cz(e).map(function(n){return(t==null?void 0:t.renderErrorCause)!==!0||n.cause===void 0?n.stack:`${n.stack} {
${Tz(n.cause,"  ")}
}`}).join(`
`),Tz=(e,t)=>{const n=e.stack.split(`
`);let r=`${t}[cause]: ${n[0]}`;for(let s=1,i=n.length;s<i;s++)r+=`
${t}${n[s]}`;return e.cause&&(r+=` {
${Tz(e.cause,`${t}  `)}
${t}}`),r};class Xg extends globalThis.Error{constructor(n){const r=typeof n=="object"&&n!==null,s=Error.stackTraceLimit;Error.stackTraceLimit=1;super(ule(n),r&&"cause"in n&&typeof n.cause<"u"?{cause:new Xg(n.cause)}:void 0);u(this,"span");this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=s,this.name=n instanceof Error?n.name:"Error",r&&(mI in n&&(this.span=n[mI]),Object.keys(n).forEach(i=>{i in this||(this[i]=n[i])})),this.stack=hle(`${this.name}: ${this.message}`,n instanceof Error&&n.stack?n.stack:"",this.span)}}const ule=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(le(e,"toString")&&Cd(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return FB(e)},lle=/\((.*)\)/,fle=$e("effect/Tracer/spanToTrace",()=>new WeakMap),hle=(e,t,n)=>{const r=[e],s=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let i=1;i<s.length&&!s[i].includes("Generator.next");i++){if(s[i].includes("effect_internal_function")){r.pop();break}r.push(s[i].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let i=n,o=0;for(;i&&i._tag==="Span"&&o<10;){const a=fle.get(i);if(typeof a=="function"){const c=a();if(typeof c=="string"){const l=c.match(lle),f=l?l[1]:c.replace(/^at /,"");r.push(`    at ${i.name} (${f})`)}else r.push(`    at ${i.name}`)}else r.push(`    at ${i.name}`);i=js(i.parent),o++}}return r.join(`
`)},mI=Symbol.for("effect/SpanAnnotation"),Cz=e=>$E(e,void 0,{emptyCase:()=>[],dieCase:(t,n)=>[new Xg(n)],failCase:(t,n)=>[new Xg(n)],interruptCase:()=>[],parallelCase:(t,n,r)=>[...n,...r],sequentialCase:(t,n,r)=>[...n,...r]}),dle=Symbol.for("effect/Context/Tag"),ple="effect/STM",mle=Symbol.for(ple),gle={...Fd,_op:"Tag",[mle]:$u,[dle]:{_Service:e=>e,_Identifier:e=>e},toString(){return yn(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[it](){return this.toJSON()},of(e){return e},context(e){return Iz(this,e)}},yle=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;const r=Object.create(gle);return Object.defineProperty(r,"stack",{get(){return n.stack}}),r.key=e,r},Rz=Symbol.for("effect/Context"),Sle={[Rz]:{_Services:e=>e},[ce](e){if(vle(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!ue(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[he](){return dt(this,sE(this.unsafeMap.size))},pipe(){return ne(this,arguments)},toString(){return yn(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(Pt)}},[it](){return this.toJSON()}},xu=e=>{const t=Object.create(Sle);return t.unsafeMap=e,t},_le=e=>{const t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){const n=e.stack.split(`
`);if(n.length>2){const r=n[2].match(/at (.*)/);r&&(t.message=t.message+` (defined at ${r[1]})`)}}if(t.stack){const n=t.stack.split(`
`);n.splice(1,3),t.stack=n.join(`
`)}return t},vle=e=>le(e,Rz),ble=xu(new Map),wle=()=>ble,Iz=(e,t)=>xu(new Map([[e.key,t]])),$le=k(3,(e,t,n)=>{const r=new Map(e.unsafeMap);return r.set(t.key,n),xu(r)}),Pz=k(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw _le(t);return e.unsafeMap.get(t.key)}),kle=Pz,Ele=k(2,(e,t)=>e.unsafeMap.has(t.key)?BB(e.unsafeMap.get(t.key)):jB),Ole=k(2,(e,t)=>{const n=new Map(e.unsafeMap);for(const[r,s]of t.unsafeMap)n.set(r,s);return xu(n)}),ja=yle,YS=wle,Tle=Iz,Ul=$le,Fz=kle,Nz=Pz,Ad=Ele,Cle=Ole,Bb=Symbol.for("effect/Duration"),Rle=BigInt(0),gI=BigInt(24),Pp=BigInt(60),zb=BigInt(1e3),yI=BigInt(1e6),Ub=BigInt(1e9),SI=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,gi=e=>{if(xz(e))return e;if(ro(e))return Vb(e);if(AS(e))return Hv(e);if(Array.isArray(e)){if(e.length===2&&ro(e[0])&&ro(e[1]))return Hv(BigInt(e[0])*Ub+BigInt(e[1]))}else if(mi(e)){SI.lastIndex=0;const t=SI.exec(e);if(t){const[n,r,s]=t,i=Number(r);switch(s){case"nano":case"nanos":return Hv(BigInt(r));case"micro":case"micros":return Nle(BigInt(r));case"milli":case"millis":return Vb(i);case"second":case"seconds":return xle(i);case"minute":case"minutes":return Mle(i);case"hour":case"hours":return Ale(i);case"day":case"days":return Lle(i);case"week":case"weeks":return Dle(i)}}}throw new Error("Invalid DurationInput")},_I={_tag:"Millis",millis:0},Ile={_tag:"Infinity"},Ple={[Bb]:Bb,[he](){return dt(this,PB(this.value))},[ce](e){return xz(e)&&qle(this,e)},toString(){return`Duration(${Hle(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:Ble(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[it](){return this.toJSON()},pipe(){return ne(this,arguments)}},$i=e=>{const t=Object.create(Ple);return ro(e)?isNaN(e)||e<=0?t.value=_I:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=Ile:e<=Rle?t.value=_I:t.value={_tag:"Nanos",nanos:e},t},xz=e=>le(e,Bb),Fle=$i(0),Hv=e=>$i(e),Nle=e=>$i(e*zb),Vb=e=>$i(e),xle=e=>$i(e*1e3),Mle=e=>$i(e*6e4),Ale=e=>$i(e*36e5),Lle=e=>$i(e*864e5),Dle=e=>$i(e*6048e5),qb=e=>zle(e,{onMillis:t=>t,onNanos:t=>Number(t)/1e6}),jle=e=>{const t=gi(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},Ble=e=>{const t=gi(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/Ub),Number(t.value.nanos%Ub)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},zle=k(2,(e,t)=>{const n=gi(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}}),Mz=k(3,(e,t,n)=>{const r=gi(e),s=gi(t);if(r.value._tag==="Infinity"||s.value._tag==="Infinity")return n.onMillis(qb(r),qb(s));if(r.value._tag==="Nanos"||s.value._tag==="Nanos"){const i=r.value._tag==="Nanos"?r.value.nanos:BigInt(Math.round(r.value.millis*1e6)),o=s.value._tag==="Nanos"?s.value.nanos:BigInt(Math.round(s.value.millis*1e6));return n.onNanos(i,o)}return n.onMillis(r.value.millis,s.value.millis)}),Ule=(e,t)=>Mz(e,t,{onMillis:(n,r)=>n===r,onNanos:(n,r)=>n===r}),Vle=k(2,(e,t)=>Mz(e,t,{onMillis:(n,r)=>n>=r,onNanos:(n,r)=>n>=r})),qle=k(2,(e,t)=>Ule(gi(e),gi(t))),Kle=e=>{const t=gi(e);if(t.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=jle(t),r=n/yI,s=r/zb,i=s/Pp,o=i/Pp,a=o/gI;return{days:Number(a),hours:Number(o%gI),minutes:Number(i%Pp),seconds:Number(s%Pp),millis:Number(r%zb),nanos:Number(n%yI)}},Hle=e=>{const t=gi(e);if(t.value._tag==="Infinity")return"Infinity";const n=Kle(t),r=[];return n.days!==0&&r.push(`${n.days}d`),n.hours!==0&&r.push(`${n.hours}h`),n.minutes!==0&&r.push(`${n.minutes}m`),n.seconds!==0&&r.push(`${n.seconds}s`),n.millis!==0&&r.push(`${n.millis}ms`),n.nanos!==0&&r.push(`${n.nanos}ns`),r.join(" ")},vI=Symbol.for("effect/MutableRef"),Wle={[vI]:vI,toString(){return yn(this.toJSON())},toJSON(){return{_id:"MutableRef",current:Pt(this.current)}},[it](){return this.toJSON()},pipe(){return ne(this,arguments)}},Az=e=>{const t=Object.create(Wle);return t.current=e,t},XS=e=>e.current,Lz=k(2,(e,t)=>(e.current=t,e)),kE="effect/FiberId",Ph=Symbol.for(kE),Zg="None",Kb="Runtime",Jle="Composite",Gle=Tt(`${kE}-${Zg}`);var zF;let Qle=class{constructor(){u(this,zF,Ph);u(this,"_tag",Zg);u(this,"id",-1);u(this,"startTimeMillis",-1)}[(zF=Ph,he)](){return Gle}[ce](t){return Dz(t)&&t._tag===Zg}toString(){return yn(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[it](){return this.toJSON()}};var UF;class Yle{constructor(t,n){u(this,"id");u(this,"startTimeMillis");u(this,UF,Ph);u(this,"_tag",Kb);this.id=t,this.startTimeMillis=n}[(UF=Ph,he)](){return dt(this,Tt(`${kE}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[ce](t){return Dz(t)&&t._tag===Kb&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return yn(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[it](){return this.toJSON()}}const Xle=new Qle,Dz=e=>le(e,Ph),Hb=e=>{switch(e._tag){case Zg:return Ra();case Kb:return vE(e.id);case Jle:return R(Hb(e.left),Rh(Hb(e.right)))}},bI=$e(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>Az(0)),jz=e=>Array.from(Hb(e)).map(n=>`#${n}`).join(","),Zle=()=>{const e=XS(bI);return R(bI,Lz(e+1)),new Yle(e,Date.now())},Mu=Xle,efe=jz,Bz=Zle,EE=HS,tfe=Eue,nfe=Tue,zz=Cue,Uz=Th,Vz=gz,rfe=Gg,sfe=yE,ife=Nue,qz=WS,Fh=Symbol.for("effect/List"),Wb=e=>vt(e),ofe=e=>Nae(VS(e),Wb),afe=ofe(ue),cfe={[Fh]:Fh,_tag:"Cons",toString(){return yn(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:Wb(this).map(Pt)}},[it](){return this.toJSON()},[ce](e){return Hz(e)&&this._tag===e._tag&&afe(this,e)},[he](){return dt(this,Id(Wb(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();const n=t.head;return t=t.tail,{done:e,value:n}},return(n){return e||(e=!0),{done:!0,value:n}}}},pipe(){return ne(this,arguments)}},ey=(e,t)=>{const n=Object.create(cfe);return n.head=e,n.tail=t,n},ufe=Tt("Nil"),lfe={[Fh]:Fh,_tag:"Nil",toString(){return yn(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[it](){return this.toJSON()},[he](){return ufe},[ce](e){return Hz(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return ne(this,arguments)}},Kz=Object.create(lfe),Hz=e=>le(e,Fh),si=e=>e._tag==="Nil",Wz=e=>e._tag==="Cons",ffe=()=>Kz,Ia=(e,t)=>ey(e,t),Au=ffe,OE=e=>ey(e,Kz),hfe=k(2,(e,t)=>pfe(t,e)),dfe=k(2,(e,t)=>Ia(t,e)),pfe=k(2,(e,t)=>{if(si(e))return t;if(si(t))return e;{const n=ey(t.head,e);let r=n,s=t.tail;for(;!si(s);){const i=ey(s.head,e);r.tail=i,r=i,s=s.tail}return n}}),mfe=k(3,(e,t,n)=>{let r=t,s=e;for(;!si(s);)r=n(r,s.head),s=s.tail;return r}),gfe=e=>{let t=Au(),n=e;for(;!si(n);)t=dfe(t,n.head),n=n.tail;return t},TE=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=cE,e}(),yfe=Symbol.for("effect/DifferContextPatch");function wI(e){return e}const Ld={...TE.prototype,[yfe]:{_Value:wI,_Patch:wI}},Sfe=Object.assign(Object.create(Ld),{_tag:"Empty"}),_fe=Object.create(Sfe),Jz=()=>_fe,vfe=Object.assign(Object.create(Ld),{_tag:"AndThen"}),bfe=(e,t)=>{const n=Object.create(vfe);return n.first=e,n.second=t,n},wfe=Object.assign(Object.create(Ld),{_tag:"AddService"}),$fe=(e,t)=>{const n=Object.create(wfe);return n.key=e,n.service=t,n},kfe=Object.assign(Object.create(Ld),{_tag:"RemoveService"}),Efe=e=>{const t=Object.create(kfe);return t.key=e,t},Ofe=Object.assign(Object.create(Ld),{_tag:"UpdateService"}),Tfe=(e,t)=>{const n=Object.create(Ofe);return n.key=e,n.update=t,n},Cfe=(e,t)=>{const n=new Map(e.unsafeMap);let r=Jz();for(const[s,i]of t.unsafeMap.entries())if(n.has(s)){const o=n.get(s);n.delete(s),ue(o,i)||(r=Em(Tfe(s,()=>i))(r))}else n.delete(s),r=Em($fe(s,i))(r);for(const[s]of n.entries())r=Em(Efe(s))(r);return r},Em=k(2,(e,t)=>bfe(e,t)),Rfe=k(2,(e,t)=>{if(e._tag==="Empty")return t;let n=!1,r=sr(e);const s=new Map(t.unsafeMap);for(;Ou(r);){const o=Tu(r),a=qo(r);switch(o._tag){case"Empty":{r=a;break}case"AddService":{s.set(o.key,o.service),r=a;break}case"AndThen":{r=os(os(a,o.second),o.first);break}case"RemoveService":{s.delete(o.key),r=a;break}case"UpdateService":{s.set(o.key,o.update(s.get(o.key))),n=!0,r=a;break}}}if(!n)return xu(s);const i=new Map;for(const[o]of t.unsafeMap)s.has(o)&&(i.set(o,s.get(o)),s.delete(o));for(const[o,a]of s)i.set(o,a);return xu(i)}),Ife=Symbol.for("effect/DifferHashSetPatch");function Wv(e){return e}const ZS={...TE.prototype,[Ife]:{_Value:Wv,_Key:Wv,_Patch:Wv}},Pfe=Object.assign(Object.create(ZS),{_tag:"Empty"}),Ffe=Object.create(Pfe),Gz=()=>Ffe,Nfe=Object.assign(Object.create(ZS),{_tag:"AndThen"}),xfe=(e,t)=>{const n=Object.create(Nfe);return n.first=e,n.second=t,n},Mfe=Object.assign(Object.create(ZS),{_tag:"Add"}),Afe=e=>{const t=Object.create(Mfe);return t.value=e,t},Lfe=Object.assign(Object.create(ZS),{_tag:"Remove"}),Dfe=e=>{const t=Object.create(Lfe);return t.value=e,t},jfe=(e,t)=>{const[n,r]=Qg([e,Gz()],([s,i],o)=>Wue(o)(s)?[wz(o)(s),i]:[s,Jb(Afe(o))(i)])(t);return Qg(r,(s,i)=>Jb(Dfe(i))(s))(n)},Jb=k(2,(e,t)=>xfe(e,t)),Bfe=k(2,(e,t)=>{if(e._tag==="Empty")return t;let n=t,r=sr(e);for(;Ou(r);){const s=Tu(r),i=qo(r);switch(s._tag){case"Empty":{r=i;break}case"AndThen":{r=os(s.first)(os(s.second)(i));break}case"Add":{n=Mf(s.value)(n),r=i;break}case"Remove":n=wz(s.value)(n),r=i}}return n}),zfe=Symbol.for("effect/DifferReadonlyArrayPatch");function $I(e){return e}const Dd={...TE.prototype,[zfe]:{_Value:$I,_Patch:$I}},Ufe=Object.assign(Object.create(Dd),{_tag:"Empty"}),Vfe=Object.create(Ufe),Qz=()=>Vfe,qfe=Object.assign(Object.create(Dd),{_tag:"AndThen"}),Kfe=(e,t)=>{const n=Object.create(qfe);return n.first=e,n.second=t,n},Hfe=Object.assign(Object.create(Dd),{_tag:"Append"}),Wfe=e=>{const t=Object.create(Hfe);return t.values=e,t},Jfe=Object.assign(Object.create(Dd),{_tag:"Slice"}),Gfe=(e,t)=>{const n=Object.create(Jfe);return n.from=e,n.until=t,n},Qfe=Object.assign(Object.create(Dd),{_tag:"Update"}),Yfe=(e,t)=>{const n=Object.create(Qfe);return n.index=e,n.patch=t,n},Xfe=e=>{let t=0,n=Qz();for(;t<e.oldValue.length&&t<e.newValue.length;){const r=e.oldValue[t],s=e.newValue[t],i=e.differ.diff(r,s);ue(i,e.differ.empty)||(n=Om(n,Yfe(t,i))),t=t+1}return t<e.oldValue.length&&(n=Om(n,Gfe(0,t))),t<e.newValue.length&&(n=Om(n,Wfe(Gce(t)(e.newValue)))),n},Om=k(2,(e,t)=>Kfe(e,t)),Zfe=k(3,(e,t,n)=>{if(e._tag==="Empty")return t;let r=t.slice(),s=Vr(e);for(;$m(s);){const i=Un(s),o=Ta(s);switch(i._tag){case"Empty":{s=o;break}case"AndThen":{o.unshift(i.first,i.second),s=o;break}case"Append":{for(const a of i.values)r.push(a);s=o;break}case"Slice":{r=r.slice(i.from,i.until),s=o;break}case"Update":{r[i.index]=n.patch(i.patch,r[i.index]),s=o;break}}}return r}),ehe=Symbol.for("effect/Differ"),the={[ehe]:{_P:Ut,_V:Ut}},fl=e=>{const t=Object.create(the);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},nhe=()=>fl({empty:Jz(),combine:(e,t)=>Em(t)(e),diff:(e,t)=>Cfe(e,t),patch:(e,t)=>Rfe(t)(e)}),rhe=()=>fl({empty:Gz(),combine:(e,t)=>Jb(t)(e),diff:(e,t)=>jfe(e,t),patch:(e,t)=>Bfe(t)(e)}),she=e=>fl({empty:Qz(),combine:(t,n)=>Om(t,n),diff:(t,n)=>Xfe({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>Zfe(t,n,e)}),Yz=()=>ihe((e,t)=>t),ihe=e=>fl({empty:Ut,combine:(t,n)=>t===Ut?n:n===Ut?t:r=>n(t(r)),diff:(t,n)=>ue(t,n)?Ut:MS(n),patch:(t,n)=>e(n,t(n))}),Nh=255,Xz=8,Gb=e=>e&Nh,Qb=e=>e>>Xz&Nh,jd=(e,t)=>(e&Nh)+((t&e&Nh)<<Xz),ohe=jd(0,0),ahe=e=>jd(e,e),che=e=>jd(e,0),uhe=k(2,(e,t)=>jd(Gb(e)&~t,Qb(e))),lhe=k(2,(e,t)=>e|t),fhe=e=>~e>>>0&Nh,hhe=0,hl=1,dhe=2,Zz=4,Yb=16,eU=32,phe=e=>e_(e,eU),mhe=k(2,(e,t)=>e|t),Ii=e=>tU(e)&&!yhe(e),tU=e=>e_(e,hl),e_=k(2,(e,t)=>(e&t)!==0),nU=(...e)=>e.reduce((t,n)=>t|n,0),ghe=nU(hhe),kI=e=>e_(e,Zz),yhe=e=>e_(e,Yb),Tm=k(2,(e,t)=>jd(e^t,t)),Cm=k(2,(e,t)=>e&(fhe(Gb(t))|Qb(t))|Gb(t)&Qb(t)),EI=fl({empty:ohe,diff:(e,t)=>Tm(e,t),combine:(e,t)=>lhe(t)(e),patch:(e,t)=>Cm(t,e)}),She=ahe,rU=che,OI=uhe,sU=(e,t)=>({_tag:"Par",left:e,right:t}),Fp=(e,t)=>({_tag:"Seq",left:e,right:t}),_he=e=>{let t=OE(e),n=Au();for(;;){const[r,s]=mfe(t,[iU(),Au()],([i,o],a)=>{const[c,l]=vhe(a);return[Ehe(i,c),hfe(o,l)]});if(n=bhe(n,r),si(s))return gfe(n);t=s}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},vhe=e=>{let t=e,n=iU(),r=Au(),s=Au();for(;;)switch(t._tag){case"Empty":{if(si(r))return[n,s];t=r.head,r=r.tail;break}case"Par":{r=Ia(t.right,r),t=t.left;break}case"Seq":{const i=t.left,o=t.right;switch(i._tag){case"Empty":{t=o;break}case"Par":{const a=i.left,c=i.right;t=sU(Fp(a,o),Fp(c,o));break}case"Seq":{const a=i.left,c=i.right;t=Fp(a,Fp(c,o));break}case"Single":{t=i,s=Ia(o,s);break}}break}case"Single":{if(n=khe(n,t),si(r))return[n,s];t=r.head,r=r.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},bhe=(e,t)=>{if(si(e))return OE(Jv(t));if(Ohe(t))return e;const n=Fhe(e.head),r=The(t);return n.length===1&&r.length===1&&ue(n[0],r[0])?Ia(Phe(e.head,Jv(t)),e.tail):Ia(Jv(t),e)},whe=Symbol.for("effect/RequestBlock/RequestBlockParallel"),$he={_R:e=>e};var VF;VF=whe;class CE{constructor(t){u(this,"map");u(this,VF,$he);this.map=t}}const iU=()=>new CE(EE()),khe=(e,t)=>new CE(sfe(e.map,t.dataSource,n=>Tce(Ice(n,fue(t.blockedRequest)),()=>sr(t.blockedRequest)))),Ehe=(e,t)=>new CE(qz(e.map,t.map,(n,r,s)=>Uz(n,s,Mr(zz(n,s),{onNone:()=>r,onSome:i=>Qr(r,i)})))),Ohe=e=>nfe(e.map),The=e=>Array.from(Vz(e.map)),Jv=e=>Ihe(ife(e.map,t=>sr(t))),Che=Symbol.for("effect/RequestBlock/RequestBlockSequential"),Rhe={_R:e=>e};var qF;qF=Che;class oU{constructor(t){u(this,"map");u(this,qF,Rhe);this.map=t}}const Ihe=e=>new oU(e),Phe=(e,t)=>new oU(qz(t.map,e.map,(n,r,s)=>Uz(n,s,Mr(zz(n,s),{onNone:()=>lo(),onSome:i=>Qr(i,r)})))),Fhe=e=>Array.from(Vz(e.map)),Nhe=e=>Array.from(e.map),t_="Pending",aU="Done",xhe="effect/Deferred",Mhe=Symbol.for(xhe),Ahe={_E:e=>e,_A:e=>e},Lhe=e=>({_tag:t_,joiners:e}),Dhe=e=>({_tag:aU,effect:e});class dl{constructor(t){u(this,"self");u(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new dl(this.self)}}const jhe="effect/EffectError",Bhe=Symbol.for(jhe),zhe=e=>le(e,Bhe),cU=(e,t)=>{const n=new on("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},Uhe=e=>{const t=new on("RunBlocked");return t.effect_instruction_i0=e,t},Lu=Symbol.for("effect/Effect");class Vhe{constructor(t,n){u(this,"patch");u(this,"op");u(this,"_op",aE);this.patch=t,this.op=n}}var KF;class on{constructor(t){u(this,"_op");u(this,"effect_instruction_i0");u(this,"effect_instruction_i1");u(this,"effect_instruction_i2");u(this,"trace");u(this,KF,$u);this._op=t}[(KF=Lu,ce)](t){return this===t}[he](){return dt(this,rE(this))}pipe(){return ne(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:Pt(this.effect_instruction_i0),effect_instruction_i1:Pt(this.effect_instruction_i1),effect_instruction_i2:Pt(this.effect_instruction_i2)}}toString(){return yn(this.toJSON())}[it](){return this.toJSON()}[Symbol.iterator](){return new dl(new Rd(this))}}var HF;class uU{constructor(t){u(this,"_op");u(this,"effect_instruction_i0");u(this,"effect_instruction_i1");u(this,"effect_instruction_i2");u(this,"trace");u(this,HF,$u);this._op=t,this._tag=t}[(HF=Lu,ce)](t){return LE(t)&&t._op==="Failure"&&ue(this.effect_instruction_i0,t.effect_instruction_i0)}[he](){return R(Tt(this._tag),ke(J(this.effect_instruction_i0)),dt(this))}get cause(){return this.effect_instruction_i0}pipe(){return ne(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return yn(this.toJSON())}[it](){return this.toJSON()}[Symbol.iterator](){return new dl(new Rd(this))}}var WF;class lU{constructor(t){u(this,"_op");u(this,"effect_instruction_i0");u(this,"effect_instruction_i1");u(this,"effect_instruction_i2");u(this,"trace");u(this,WF,$u);this._op=t,this._tag=t}[(WF=Lu,ce)](t){return LE(t)&&t._op==="Success"&&ue(this.effect_instruction_i0,t.effect_instruction_i0)}[he](){return R(Tt(this._tag),ke(J(this.effect_instruction_i0)),dt(this))}get value(){return this.effect_instruction_i0}pipe(){return ne(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:Pt(this.value)}}toString(){return yn(this.toJSON())}[it](){return this.toJSON()}[Symbol.iterator](){return new dl(new Rd(this))}}const n_=e=>le(e,Lu),ir=e=>{const t=new on(MB);return t.effect_instruction_i0=e,t},qhe=k(3,(e,t,n)=>o_(r=>te(e,s=>te(hU(Bt(()=>r(t(s)))),i=>Bt(()=>n(s,i)).pipe(Pa({onFailure:o=>{switch(i._tag){case ts:return Ar(er(i.effect_instruction_i0,o));case ns:return Ar(o)}},onSuccess:()=>i})))))),Bd=k(2,(e,t)=>te(e,()=>Ne(t))),zd=e=>Bd(e,void 0),fU=function(){const e=new on(jS);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(LS("you're not supposed to end up here"))}return e},Khe=(e,t=Mu)=>{const n=new on(Nf);let r;return n.effect_instruction_i0=s=>{r=e(s)},n.effect_instruction_i1=t,yU(n,s=>n_(r)?r:as)},yi=(e,t=Mu)=>fU(e,function(){let n,r;function s(c){n?n(c):r===void 0&&(r=c)}const i=new on(Nf);i.effect_instruction_i0=c=>{n=c,r&&c(r)},i.effect_instruction_i1=t;let o,a;return this.effect_instruction_i0.length!==1?(a=new AbortController,o=wn(()=>this.effect_instruction_i0(s,a.signal))):o=wn(()=>this.effect_instruction_i0(s)),o||a?yU(i,c=>(a&&a.abort(),o??as)):i}),Xb=k(2,(e,t)=>r_(e,{onFailure:t,onSuccess:Ne})),ty=Symbol.for("effect/SpanAnnotation"),TI=Symbol.for("effect/OriginalAnnotation"),RE=(e,t)=>Ge(t)?new Proxy(e,{has(n,r){return r===ty||r===TI||r in n},get(n,r){return r===ty?t.value:r===TI?e:n[r]}}):e,CI=e=>wo(e)&&!(ty in e)?ir(t=>Ar(Cr(RE(e,DE(t))))):Ar(Cr(e)),RI=e=>Hhe(()=>Cr(new kde(e))),ny=e=>r_(e,{onFailure:t=>Ne(fe(t)),onSuccess:t=>Ne(ht(t))}),hU=e=>Ghe(e,{onFailure:Be,onSuccess:Ct}),Cn=e=>wo(e)&&!(ty in e)?ir(t=>Ar(Yg(RE(e,DE(t))))):Ar(Yg(e)),dU=e=>te(ee(e),Cn),Ar=e=>{const t=new uU(ts);return t.effect_instruction_i0=e,t},Hhe=e=>te(ee(e),Ar),Whe=ir(e=>Ne(e.id())),pU=e=>ir(t=>e(t.id())),te=k(2,(e,t)=>{const n=new on(Vg);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),Jhe=e=>{const t=new on("OnStep");return t.effect_instruction_i0=e,t},mU=e=>te(e,Ut),Ghe=k(2,(e,t)=>Pa(e,{onFailure:n=>Ne(t.onFailure(n)),onSuccess:n=>Ne(t.onSuccess(n))})),Pa=k(2,(e,t)=>{const n=new on(qg);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n}),r_=k(2,(e,t)=>Pa(e,{onFailure:n=>{if(Ez(n).length>0)return Ar(sle(n));const s=Xue(n);return s.length>0?t.onFailure(uz(s)):Ar(n)},onSuccess:t.onSuccess})),Bi=k(2,(e,t)=>Bt(()=>{const n=vt(e),r=US(n.length);let s=0;return Bd(FE({while:()=>s<n.length,body:()=>t(n[s],s),step:i=>{r[s++]=i}}),r)})),s_=k(2,(e,t)=>Bt(()=>{const n=vt(e);let r=0;return FE({while:()=>r<n.length,body:()=>t(n[r],r),step:()=>{r++}})})),gU=e=>{const t=new on(Pd);return t.effect_instruction_i0=She(hl),t.effect_instruction_i1=()=>e,t},xn=k(2,(e,t)=>te(e,n=>ee(()=>t(n)))),IE=k(2,(e,t)=>r_(e,{onFailure:n=>dU(()=>t.onFailure(n)),onSuccess:n=>ee(()=>t.onSuccess(n))})),i_=k(2,(e,t)=>Pa(e,{onFailure:n=>{const r=tle(n);switch(r._tag){case"Left":return dU(()=>t(r.left));case"Right":return Ar(r.right)}},onSuccess:Ne})),PE=k(2,(e,t)=>o_(n=>Pa(n(e),{onFailure:r=>{const s=Be(r);return Pa(t(s),{onFailure:i=>Be(er(r,i)),onSuccess:()=>s})},onSuccess:r=>{const s=Ct(r);return a_(t(s),s)}}))),yU=k(2,(e,t)=>PE(e,CU({onFailure:n=>bE(n)?zd(t(Zue(n))):as,onSuccess:()=>as}))),Qhe=k(2,(e,t)=>Zhe(e,t,Ne)),Ne=e=>{const t=new lU(ns);return t.effect_instruction_i0=e,t},Bt=e=>{const t=new on(jS);return t.commit=e,t},ee=e=>{const t=new on(xB);return t.effect_instruction_i0=e,t},Yhe=k(e=>e.length===3||e.length===2&&!(wo(e[1])&&"onlyEffect"in e[1]),(e,t)=>te(e,n=>{const r=typeof t=="function"?t(n):t;return n_(r)?Bd(r,n):Vae(r)?yi(s=>{r.then(i=>s(Ne(n)),i=>s(Cn(new Tde(i))))}):Ne(n)})),Xhe=e=>ir(t=>{const n=t.getFiberRef(ew),r=R(n,Kt(()=>t.scope()));return e(c_(ew,Q(r)))}),Zhe=k(3,(e,t,n)=>Pa(e,{onFailure:r=>Ez(r).length>0?Ar(YB(rle(r))):t(),onSuccess:n})),SU=e=>{const t=new on(Pd);return t.effect_instruction_i0=rU(hl),t.effect_instruction_i1=()=>e,t},o_=e=>fU(e,function(){const t=new on(Pd);return t.effect_instruction_i0=rU(hl),t.effect_instruction_i1=n=>tU(n)?wn(()=>this.effect_instruction_i0(gU)):wn(()=>this.effect_instruction_i0(SU)),t}),as=Ne(void 0),ede=e=>{const t=new on(Pd);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},FE=e=>{const t=new on(Kg);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},NE=e=>{const t=new on(wm);return typeof(e==null?void 0:e.priority)<"u"?Sde(t,e.priority):t},_U=k(2,(e,t)=>te(e,n=>xn(t,r=>[n,r]))),vU=k(2,(e,t)=>te(e,n=>Bd(t,n))),a_=k(2,(e,t)=>te(e,()=>t)),Gv=yi(()=>{const e=setInterval(()=>{},2147483647);return ee(()=>clearInterval(e))}),tde=e=>te(Whe,t=>R(e,bU(t))),bU=k(2,(e,t)=>te(e.interruptAsFork(t),()=>e.await)),nde={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return ne(this,arguments)}},rde={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return ne(this,arguments)}},sde={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return ne(this,arguments)}},ide={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return ne(this,arguments)}},wU={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return ne(this,arguments)}},$U={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return ne(this,arguments)}},ode={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return ne(this,arguments)}},ade={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return ne(this,arguments)}},cde="effect/FiberRef",ude=Symbol.for(cde),lde={_A:e=>e},xE=e=>ir(t=>Ct(t.getFiberRef(e))),ME=k(2,(e,t)=>te(xE(e),t)),II=k(2,(e,t)=>fde(e,()=>[void 0,t])),fde=k(2,(e,t)=>ir(n=>{const[r,s]=t(n.getFiberRef(e));return n.setFiberRef(e,s),Ne(r)})),c_=k(3,(e,t,n)=>qhe(vU(xE(t),II(t,n)),()=>e,r=>II(t,r))),lr=(e,t)=>pl(e,{differ:Yz(),fork:(t==null?void 0:t.fork)??Ut,join:t==null?void 0:t.join}),hde=e=>{const t=rhe();return pl(e,{differ:t,fork:t.empty})},dde=e=>{const t=she(Yz());return pl(e,{differ:t,fork:t.empty})},kU=e=>{const t=nhe();return pl(e,{differ:t,fork:t.empty})},pl=(e,t)=>({...Nd,[ude]:lde,initial:e,commit(){return xE(this)},diff:(r,s)=>t.differ.diff(r,s),combine:(r,s)=>t.differ.combine(r,s),patch:r=>s=>t.differ.patch(r,s),fork:t.fork,join:t.join??((r,s)=>s)}),pde=e=>pl(e,{differ:EI,fork:EI.empty}),Du=$e(Symbol.for("effect/FiberRef/currentContext"),()=>kU(YS())),u_=$e(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>lr(0)),EU=$e(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>lr(2048)),mde=$e(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>lr(EE())),gde=$e(Symbol.for("effect/FiberRef/currentLogLevel"),()=>lr(wU)),yde=$e(Symbol.for("effect/FiberRef/currentLogSpan"),()=>lr(Au())),Sde=k(2,(e,t)=>c_(e,u_,t)),_de=$e(Symbol.for("effect/FiberRef/currentConcurrency"),()=>lr("unbounded")),vde=$e(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>lr(!0)),bde=$e(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>lr(Q($U))),Zb=$e(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>dde(ku())),ew=$e(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>lr(H(),{fork:()=>H(),join:(e,t)=>e})),Np=$e(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>lr(Ih,{fork:()=>Ih,join:(e,t)=>e})),wde=(e,t)=>e.addFinalizer(()=>zd(t)),$de=(e,t)=>e.close(t),l_=(e,t)=>e.fork(t),AE=function(){class e extends globalThis.Error{commit(){return Cn(this)}toJSON(){return{...this}}[it](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?QS(Yg(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,hce),e}(),OU=(e,t)=>{class n extends AE{constructor(){super(...arguments);u(this,"_tag",t)}}return Object.assign(n.prototype,e),n.prototype.name=t,n},PI=Symbol.for("effect/Cause/errors/RuntimeException"),kde=OU({[PI]:PI},"RuntimeException"),Ede=Symbol.for("effect/Cause/errors/InterruptedException"),Ode=e=>le(e,Ede),FI=Symbol.for("effect/Cause/errors/NoSuchElement"),TU=OU({[FI]:FI},"NoSuchElementException"),NI=Symbol.for("effect/Cause/errors/UnknownException"),Tde=function(){class e extends AE{constructor(r,s){super(s??"An unknown error occurred",{cause:r});u(this,"cause");u(this,"_tag","UnknownException");u(this,"error");this.cause=r,this.error=r}}return Object.assign(e.prototype,{[NI]:NI,name:"UnknownException"}),e}(),LE=e=>n_(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),Qv=(e,t)=>Pde(e,t!=null&&t.parallel?Md:er),Cde=e=>Be(Cr(e)),xI=e=>Be(Yg(e)),Be=e=>{const t=new uU(ts);return t.effect_instruction_i0=e,t},Rde=e=>Be(xi(e)),Yv=k(2,(e,t)=>{switch(e._tag){case ts:return Be(e.effect_instruction_i0);case ns:return Ct(t(e.effect_instruction_i0))}}),CU=k(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case ts:return t(e.effect_instruction_i0);case ns:return n(e.effect_instruction_i0)}}),Ct=e=>{const t=new lU(ns);return t.effect_instruction_i0=e,t},Ko=Ct(void 0),Ide=k(3,(e,t,{onFailure:n,onSuccess:r})=>{switch(e._tag){case ts:switch(t._tag){case ns:return Be(e.effect_instruction_i0);case ts:return Be(n(e.effect_instruction_i0,t.effect_instruction_i0))}case ns:switch(t._tag){case ns:return Ct(r(e.effect_instruction_i0,t.effect_instruction_i0));case ts:return Be(t.effect_instruction_i0)}}}),Pde=(e,t)=>{const n=cz(e);return Ou(n)?R(qo(n),rz(R(Tu(n),Yv(sr)),(r,s)=>R(r,Ide(s,{onSuccess:(i,o)=>R(i,os(o)),onFailure:t}))),Yv(Eu),Yv(r=>na(r)),Q):H()},Fde=e=>({...Nd,[Mhe]:Ahe,state:Az(Lhe([])),commit(){return RU(this)},blockingOn:e}),RU=e=>yi(t=>{const n=XS(e.state);switch(n._tag){case aU:return t(n.effect);case t_:return n.joiners.push(t),Nde(e,t)}},e.blockingOn),IU=(e,t)=>{const n=XS(e.state);if(n._tag===t_){Lz(e.state,Dhe(t));for(let r=0,s=n.joiners.length;r<s;r++)n.joiners[r](t)}},Nde=(e,t)=>ee(()=>{const n=XS(e.state);if(n._tag===t_){const r=n.joiners.indexOf(t);r>=0&&n.joiners.splice(r,1)}}),xde=ir(e=>Ct(e.currentContext)),Mde=()=>xde,Ud=e=>te(Mde(),e),Ade=k(2,(e,t)=>c_(Du,t)(e)),Lde=k(2,(e,t)=>Ud(n=>Ade(e,t(n)))),DE=e=>{const t=e.currentSpan;return t!==void 0&&t._tag==="Span"?Q(t):H()},PU="And",FU="Or",NU="InvalidData",xU="MissingData",MU="SourceUnavailable",AU="Unsupported",Dde="effect/ConfigError",MI=Symbol.for(Dde),ml={_tag:"ConfigError",[MI]:MI},LU=(e,t)=>{const n=Object.create(ml);return n._op=PU,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),n},DU=(e,t)=>{const n=Object.create(ml);return n._op=FU,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),n},jde=(e,t,n={pathDelim:"."})=>{const r=Object.create(ml);return r._op=NU,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Invalid data at ${R(this.path,al(n.pathDelim))}: "${this.message}")`}}),r},Fa=(e,t,n={pathDelim:"."})=>{const r=Object.create(ml);return r._op=xU,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Missing data at ${R(this.path,al(n.pathDelim))}: "${this.message}")`}}),r},Bde=(e,t,n,r={pathDelim:"."})=>{const s=Object.create(ml);return s._op=MU,s.path=e,s.message=t,s.cause=n,Object.defineProperty(s,"toString",{enumerable:!1,value(){return`(Source unavailable at ${R(this.path,al(r.pathDelim))}: "${this.message}")`}}),s},zde=(e,t,n={pathDelim:"."})=>{const r=Object.create(ml);return r._op=AU,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${R(this.path,al(n.pathDelim))}: "${this.message}")`}}),r},Ho=k(2,(e,t)=>{switch(e._op){case PU:return LU(Ho(e.left,t),Ho(e.right,t));case FU:return DU(Ho(e.left,t),Ho(e.right,t));case NU:return jde([...t,...e.path],e.message);case xU:return Fa([...t,...e.path],e.message);case MU:return Bde([...t,...e.path],e.message,e.cause);case AU:return zde([...t,...e.path],e.message)}}),Ude="effect/Clock",AI=Symbol.for(Ude),jE=ja("effect/Clock"),Vde=2**31-1,LI={unsafeSchedule(e,t){const n=qb(t);if(n>Vde)return Ib;let r=!1;const s=setTimeout(()=>{r=!0,e()},n);return()=>(clearTimeout(s),!r)}},DI=function(){const e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;if(typeof performance.timeOrigin=="number"&&performance.timeOrigin===0)return()=>BigInt(Math.round(performance.now()*1e6));const t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6));return()=>t+BigInt(Math.round(performance.now()*1e6))}(),qde=function(){const e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return DI;const t=DI()-e.bigint();return()=>t+e.bigint()}();var JF;JF=AI;class Kde{constructor(){u(this,JF,AI);u(this,"currentTimeMillis",ee(()=>this.unsafeCurrentTimeMillis()));u(this,"currentTimeNanos",ee(()=>this.unsafeCurrentTimeNanos()))}unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return qde()}scheduler(){return Ne(LI)}sleep(t){return yi(n=>{const r=LI.unsafeSchedule(()=>n(as),t);return zd(ee(r))})}}const Hde=()=>new Kde,ju=kce,tw=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),Wde={_tag:"Empty"},Xv=k(2,(e,t)=>{let n=OE(t),r=e;for(;Wz(n);){const s=n.head;switch(s._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=Ia(s.first,Ia(s.second,n.tail));break}case"MapName":{r=jc(r,s.f),n=n.tail;break}case"Nested":{r=Wg(r,s.name),n=n.tail;break}case"Unnested":{if(R(xf(r),Mce(s.name)))r=Ta(r),n=n.tail;else return fe(Fa(r,`Expected ${s.name} to be in path in ConfigProvider#unnested`));break}}}return ht(r)}),Jde="Constant",Gde="Fail",Qde="Fallback",Yde="Described",Xde="Lazy",Zde="MapOrFail",epe="Nested",tpe="Primitive",npe="Sequence",rpe="HashMap",spe="ZipWith";var jI={};const ry=(e,t)=>[...e,...t],ipe="effect/ConfigProvider",BI=Symbol.for(ipe),ope=ja("effect/ConfigProvider"),ape="effect/ConfigProviderFlat",zI=Symbol.for(ape),cpe=e=>({[BI]:BI,pipe(){return ne(this,arguments)},...e}),upe=e=>({[zI]:zI,patch:e.patch,load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:e.enumerateChildren}),lpe=e=>cpe({load:t=>te(gr(e,ku(),t,!1),n=>Mr(xf(n),{onNone:()=>Cn(Fa(ku(),`Expected a single value having structure: ${t}`)),onSome:Ne})),flattened:e}),fpe=e=>{const{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),r=c=>R(c,al(t)),s=c=>c.split(t),i=()=>typeof process<"u"&&"env"in process&&typeof jI=="object"?jI:{};return lpe(upe({load:(c,l,f=!0)=>{const h=r(c),d=i(),p=h in d?Q(d[h]):H();return R(p,i_(()=>Fa(c,`Expected ${h} to exist in the process context`)),te(_=>gpe(_,c,l,n,f)))},enumerateChildren:c=>ee(()=>{const l=i(),d=Object.keys(l).map(p=>s(p.toUpperCase())).filter(p=>{for(let _=0;_<c.length;_++){const b=R(c,ez(_)),w=p[_];if(w===void 0||b!==w)return!1}return!0}).flatMap(p=>p.slice(c.length,c.length+1));return Hue(d)}),patch:Wde}))},hpe=(e,t,n,r)=>{const s=uI(n.length,c=>c>=r.length?H():Q([e(c),c+1])),i=uI(r.length,c=>c>=n.length?H():Q([t(c),c+1])),o=ry(n,s),a=ry(r,i);return[o,a]},dpe=(e,t)=>{let n=t;if(n._tag==="Nested"){const r=e.slice();for(;n._tag==="Nested";)r.push(n.name),n=n.config;return r}return e},gr=(e,t,n,r)=>{const s=n;switch(s._tag){case Jde:return Ne(Vr(s.value));case Yde:return Bt(()=>gr(e,t,s.config,r));case Gde:return Cn(Fa(t,s.message));case Qde:return R(Bt(()=>gr(e,t,s.first,r)),Xb(i=>s.condition(i)?R(gr(e,t,s.second,r),Xb(o=>Cn(DU(i,o)))):Cn(i)));case Xde:return Bt(()=>gr(e,t,s.config(),r));case Zde:return Bt(()=>R(gr(e,t,s.original,r),te(Bi(i=>R(s.mapOrFail(i),i_(Ho(dpe(t,s.original))))))));case epe:return Bt(()=>gr(e,ry(t,Vr(s.name)),s.config,r));case tpe:return R(Xv(t,e.patch),te(i=>R(e.load(i,s,r),te(o=>{if(o.length===0){const a=R(Hce(i),Kt(()=>"<n/a>"));return Cn(Fa([],`Expected ${s.description} with name ${a}`))}return Ne(o)}))));case npe:return R(Xv(t,e.patch),te(i=>R(e.enumerateChildren(i),te(Spe),te(o=>o.length===0?Bt(()=>xn(gr(e,t,s.config,!0),Vr)):R(Bi(o,a=>gr(e,zce(t,`[${a}]`),s.config,!0)),xn(a=>{const c=tue(a);return c.length===0?Vr(ku()):Vr(c)}))))));case rpe:return Bt(()=>R(Xv(t,e.patch),te(i=>R(e.enumerateChildren(i),te(o=>R(o,Bi(a=>gr(e,ry(i,Vr(a)),s.valueConfig,r)),xn(a=>a.length===0?Vr(EE()):R(ype(a),jc(c=>tfe(cI(vt(o),c)))))))))));case spe:return Bt(()=>R(gr(e,t,s.left,r),ny,te(i=>R(gr(e,t,s.right,r),ny,te(o=>{if(hn(i)&&hn(o))return Cn(LU(i.left,o.left));if(hn(i)&&ji(o))return Cn(i.left);if(ji(i)&&hn(o))return Cn(o.left);if(ji(i)&&ji(o)){const a=R(t,al(".")),c=ppe(t,a),[l,f]=hpe(c,c,R(i.right,jc(ht)),R(o.right,jc(ht)));return R(l,cI(f),Bi(([h,d])=>R(_U(h,d),xn(([p,_])=>s.zip(p,_)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},ppe=(e,t)=>n=>fe(Fa(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),mpe=(e,t)=>e.split(new RegExp(`\\s*${tw(t)}\\s*`)),gpe=(e,t,n,r,s)=>s?R(mpe(e,r),Bi(i=>n.parse(i.trim())),i_(Ho(t))):R(n.parse(e),IE({onFailure:Ho(t),onSuccess:Vr})),ype=e=>Object.keys(e[0]).map(t=>e.map(n=>n[t])),Spe=e=>R(Bi(e,vpe),IE({onFailure:()=>ku(),onSuccess:Oh(ju)}),ny,xn(wce)),_pe=/^(\[(\d+)\])$/,vpe=e=>{const t=e.match(_pe);if(t!==null){const n=t[2];return R(n!==void 0&&n.length>0?Q(n):H(),zS(bpe))}return H()},bpe=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?H():Q(t)},UI=Symbol.for("effect/Console"),jU=ja("effect/Console"),wpe={[UI]:UI,assert(e,...t){return ee(()=>{console.assert(e,...t)})},clear:ee(()=>{console.clear()}),count(e){return ee(()=>{console.count(e)})},countReset(e){return ee(()=>{console.countReset(e)})},debug(...e){return ee(()=>{console.debug(...e)})},dir(e,t){return ee(()=>{console.dir(e,t)})},dirxml(...e){return ee(()=>{console.dirxml(...e)})},error(...e){return ee(()=>{console.error(...e)})},group(e){return e!=null&&e.collapsed?ee(()=>console.groupCollapsed(e==null?void 0:e.label)):ee(()=>console.group(e==null?void 0:e.label))},groupEnd:ee(()=>{console.groupEnd()}),info(...e){return ee(()=>{console.info(...e)})},log(...e){return ee(()=>{console.log(...e)})},table(e,t){return ee(()=>{console.table(e,t)})},time(e){return ee(()=>console.time(e))},timeEnd(e){return ee(()=>console.timeEnd(e))},timeLog(e,...t){return ee(()=>{console.timeLog(e,...t)})},trace(...e){return ee(()=>{console.trace(...e)})},warn(...e){return ee(()=>{console.warn(...e)})},unsafe:console},$pe="effect/Random",VI=Symbol.for($pe),kpe=ja("effect/Random");var GF;GF=VI;class Epe{constructor(t){u(this,"seed");u(this,GF,VI);u(this,"PRNG");this.seed=t,this.PRNG=new Yae(t)}get next(){return ee(()=>this.PRNG.number())}get nextBoolean(){return xn(this.next,t=>t>.5)}get nextInt(){return ee(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,n){return xn(this.next,r=>(n-t)*r+t)}nextIntBetween(t,n){return ee(()=>this.PRNG.integer(n-t)+t)}shuffle(t){return Ope(t,n=>this.nextIntBetween(0,n))}}const Ope=(e,t)=>Bt(()=>R(ee(()=>Array.from(e)),te(n=>{const r=[];for(let s=n.length;s>=2;s=s-1)r.push(s);return R(r,s_(s=>R(t(s),xn(i=>Tpe(n,s-1,i)))),Bd(cz(n)))}))),Tpe=(e,t,n)=>{const r=e[t];return e[t]=e[n],e[n]=r,e},Cpe=e=>new Epe(J(e)),qI=Symbol.for("effect/Tracer"),Rpe=e=>({[qI]:qI,...e}),BU=ja("effect/Tracer"),zU=ja("effect/ParentSpan"),KI=function(){const e="abcdef0123456789",t=e.length;return function(n){let r="";for(let s=0;s<n;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}}();class Ipe{constructor(t,n,r,s,i,o){u(this,"name");u(this,"parent");u(this,"context");u(this,"links");u(this,"startTime");u(this,"kind");u(this,"_tag","Span");u(this,"spanId");u(this,"traceId","native");u(this,"sampled",!0);u(this,"status");u(this,"attributes");u(this,"events",[]);this.name=t,this.parent=n,this.context=r,this.links=s,this.startTime=i,this.kind=o,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:KI(32),this.spanId=KI(16)}end(t,n){this.status={_tag:"Ended",endTime:t,exit:n,startTime:this.status.startTime}}attribute(t,n){this.attributes.set(t,n)}event(t,n,r){this.events.push([t,n,r??{}])}}const Ppe=Rpe({span:(e,t,n,r,s,i)=>new Ipe(e,t,n,r,s,i),context:e=>e()}),Fpe=R(YS(),Ul(jE,Hde()),Ul(jU,wpe),Ul(kpe,Cpe(Math.random())),Ul(ope,fpe()),Ul(BU,Ppe)),sy=$e(Symbol.for("effect/DefaultServices/currentServices"),()=>kU(Fpe)),Npe=function(){const e=Symbol.for("effect/Data/Error/plainArgs");return class extends AE{constructor(n){super(n==null?void 0:n.message,n!=null&&n.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,e,{value:n,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}(),xpe=e=>{class t extends Npe{constructor(){super(...arguments);u(this,"_tag",e)}}return t.prototype.name=e,t},Mpe=Fd,Ape=dce;class Lpe extends Ape{}const Dpe="Sequential",jpe="Parallel",Bpe="ParallelN",UU={_tag:Dpe},zpe={_tag:jpe},Upe=e=>({_tag:Bpe,parallelism:e}),nw=UU,rw=zpe,sw=Upe;function Vpe(e){return new ho(e)}function qpe(){return Vpe(new Map)}const HI=Symbol.for("effect/FiberRefs");var QF;QF=HI;class ho{constructor(t){u(this,"locals");u(this,QF,HI);this.locals=t}pipe(){return ne(this,arguments)}}const Kpe=(e,t,n,r=!1)=>{const s=e;let i=t,o=n,a=r,c;for(;c===void 0;)if(Ht(i)&&Ht(o)){const l=Un(i)[0],f=Ta(i),h=Un(o)[0],d=Un(o)[1],p=Ta(o);l.startTimeMillis<h.startTimeMillis?(o=p,a=!0):l.startTimeMillis>h.startTimeMillis?i=f:l.id<h.id?(o=p,a=!0):l.id>h.id?i=f:c=[d,a]}else c=[s.initial,!0];return c},Hpe=k(3,(e,t,n)=>{const r=new Map(e.locals);return n.locals.forEach((s,i)=>{const o=s[0][1];if(!s[0][0][ce](t)){if(!r.has(i)){if(ue(o,i.initial))return;r.set(i,[[t,i.join(i.initial,o)]]);return}const a=r.get(i),[c,l]=Kpe(i,a,s);if(l){const f=i.diff(c,o),h=a[0][1],d=i.join(h,i.patch(f)(h));if(!ue(h,d)){let p;const _=a[0][0];_[ce](t)?p=[[_,d],...a.slice(1)]:p=[[t,d],...a],r.set(i,p)}}}}),new ho(r)}),Wpe=k(2,(e,t)=>{const n=new Map;return VU(e,n,t),new ho(n)}),VU=(e,t,n)=>{e.locals.forEach((r,s)=>{const i=r[0][1],o=s.patch(s.fork)(i);ue(i,o)?t.set(s,r):t.set(s,[[n,o],...r])})},qU=k(2,(e,t)=>{const n=new Map(e.locals);return n.delete(t),new ho(n)}),Jpe=k(2,(e,t)=>e.locals.has(t)?Q(Un(e.locals.get(t))[1]):H()),xh=k(2,(e,t)=>R(Jpe(e,t),Kt(()=>t.initial))),iw=k(2,(e,{fiberId:t,fiberRef:n,value:r})=>{if(e.locals.size===0)return new ho(new Map([[n,[[t,r]]]]));const s=new Map(e.locals);return ow(s,t,n,r),new ho(s)}),ow=(e,t,n,r)=>{const s=e.get(n)??[];let i;if(Ht(s)){const[o,a]=Un(s);if(o[ce](t)){if(ue(a,r))return;i=[[t,r],...s.slice(1)]}else i=[[t,r],...s]}else i=[[t,r]];e.set(n,i)},Gpe=k(2,(e,{entries:t,forkAs:n})=>{if(e.locals.size===0)return new ho(new Map(t));const r=new Map(e.locals);return n!==void 0&&VU(e,r,n),t.forEach(([s,i])=>{i.length===1?ow(r,i[0][0],s,i[0][1]):i.forEach(([o,a])=>{ow(r,o,s,a)})}),new ho(r)}),Qpe=xh,Ype=Gpe,Xpe=qpe,KU="Empty",HU="Add",WU="Remove",JU="Update",GU="AndThen",Zpe={_tag:KU},eme=(e,t)=>{const n=new Map(e.locals);let r=Zpe;for(const[s,i]of t.locals.entries()){const o=Un(i)[1],a=n.get(s);if(a!==void 0){const c=Un(a)[1];ue(c,o)||(r=Zv({_tag:JU,fiberRef:s,patch:s.diff(c,o)})(r))}else r=Zv({_tag:HU,fiberRef:s,value:o})(r);n.delete(s)}for(const[s]of n.entries())r=Zv({_tag:WU,fiberRef:s})(r);return r},Zv=k(2,(e,t)=>({_tag:GU,first:e,second:t})),tme=k(3,(e,t,n)=>{let r=n,s=Vr(e);for(;Ht(s);){const i=Un(s),o=Ta(s);switch(i._tag){case KU:{s=o;break}case HU:{r=iw(r,{fiberId:t,fiberRef:i.fiberRef,value:i.value}),s=o;break}case WU:{r=qU(r,i.fiberRef),s=o;break}case JU:{const a=xh(r,i.fiberRef);r=iw(r,{fiberId:t,fiberRef:i.fiberRef,value:i.fiberRef.patch(i.patch)(a)}),s=o;break}case GU:{s=Wg(i.first)(Wg(i.second)(o));break}}}return r}),nme=eme,rme=tme,f_="effect/FiberStatus",Na=Symbol.for(f_),iy="Done",WI="Running",JI="Suspended",sme=Tt(`${f_}-${iy}`);var YF;class ime{constructor(){u(this,YF,Na);u(this,"_tag",iy)}[(YF=Na,he)](){return sme}[ce](t){return BE(t)&&t._tag===iy}}var XF;class ome{constructor(t){u(this,"runtimeFlags");u(this,XF,Na);u(this,"_tag",WI);this.runtimeFlags=t}[(XF=Na,he)](){return R(J(f_),ke(J(this._tag)),ke(J(this.runtimeFlags)),dt(this))}[ce](t){return BE(t)&&t._tag===WI&&this.runtimeFlags===t.runtimeFlags}}var ZF;class ame{constructor(t,n){u(this,"runtimeFlags");u(this,"blockingOn");u(this,ZF,Na);u(this,"_tag",JI);this.runtimeFlags=t,this.blockingOn=n}[(ZF=Na,he)](){return R(J(f_),ke(J(this._tag)),ke(J(this.runtimeFlags)),ke(J(this.blockingOn)),dt(this))}[ce](t){return BE(t)&&t._tag===JI&&this.runtimeFlags===t.runtimeFlags&&ue(this.blockingOn,t.blockingOn)}}const cme=new ime,ume=e=>new ome(e),lme=(e,t)=>new ame(e,t),BE=e=>le(e,Na),fme=e=>e._tag===iy,hme=cme,QU=ume,dme=lme,pme=fme,mme=nde,gme=rde,yme=sde,Sme=ide,_me=wU,vme=$U,bme=ode,wme=ade,$me=R(ju,QB(e=>e.ordinal)),kme=Ece($me),Eme=e=>{switch(e){case"All":return mme;case"Debug":return vme;case"Error":return yme;case"Fatal":return gme;case"Info":return _me;case"Trace":return bme;case"None":return wme;case"Warning":return Sme}},Ome=Symbol.for("effect/Micro"),oy=Symbol.for("effect/Micro/runSymbol"),YU={...Mpe,_op:"Micro",[Ome]:{_A:Ut,_E:Ut,_R:Ut},[Symbol.iterator](){return new dl(new Rd(this))}},GI=Symbol.for("effect/Micro/MicroCause"),Tme={_E:Ut};var eN;class XU extends globalThis.Error{constructor(n,r,s){const i=`MicroCause.${n}`;let o,a,c;if(r instanceof globalThis.Error){o=`(${i}) ${r.name}`,a=r.message;const l=a.split(`
`).length;c=r.stack?`(${i}) ${r.stack.split(`
`).slice(0,l+3).join(`
`)}`:`${o}: ${a}`}else o=i,a=wu(r,0),c=`${o}: ${a}`;s.length>0&&(c+=`
    ${s.join(`
    `)}`);super(a);u(this,"_tag");u(this,"traces");u(this,eN);this._tag=n,this.traces=s,this[GI]=Tme,this.name=o,this.stack=c}pipe(){return ne(this,arguments)}toString(){return this.stack}[(eN=GI,it)](){return this.stack}}class Cme extends XU{constructor(n,r=[]){super("Die",n,r);u(this,"defect");this.defect=n}}const Rme=(e,t=[])=>new Cme(e,t);class Ime extends XU{constructor(t=[]){super("Interrupt","interrupted",t)}}const Pme=(e=[])=>new Ime(e),Fme=fe(Pme()),Nme=e=>fe(Rme(e)),xme=Symbol.for("effect/Micro/Env"),Mme={[xme]:{_R:Ut},pipe(){return ne(this,arguments)}},ZU=e=>{const t=Object.create(Mme);return t.refs=e,t},Ame=()=>{const e=new AbortController,t=Object.create(null);return t[t4.key]=e,t[n4.key]=e.signal,t[s4.key]=new e4,ZU(t)},zE=k(2,(e,t)=>t.key in e.refs?e.refs[t.key]:t.initial),Lme=k(3,(e,t,n)=>{const r=Object.assign(Object.create(null),e.refs);return r[t.key]=n,ZU(r)}),Dme=e=>Kme((t,n)=>n(ht(zE(t,e)))),jme="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class e4{constructor(){u(this,"tasks",[]);u(this,"running",!1);u(this,"afterScheduled",()=>{this.running=!1,this.runTasks()})}scheduleTask(t,n){this.tasks.push(t),this.running||(this.running=!0,jme(this.afterScheduled))}runTasks(){const t=this.tasks;this.tasks=[];for(let n=0,r=t.length;n<r;n++)t[n]()}shouldYield(t){return!1}flush(){for(;this.tasks.length>0;)this.runTasks()}}const QI=Symbol.for("effect/Micro/EnvRef"),Bme={...YU,[QI]:QI,[oy](e,t){Dme(this)[oy](e,t)}},gl=(e,t)=>$e(e,()=>{const n=Object.create(Bme);return n.key=e,n.initial=t(),n}),t4=gl("effect/Micro/currentAbortController",()=>{}),n4=gl("effect/Micro/currentAbortSignal",()=>{}),zme=gl("effect/Micro/currentContext",()=>YS()),r4=gl("effect/Micro/currentMaxDepthBeforeYield",()=>2048),Ume=gl("effect/Micro/currentInterruptible",()=>!0),s4=gl("effect/Micro/currentScheduler",()=>new e4),Xa=$e("effect/Micro/microDepthState",()=>({depth:0,maxDepthBeforeYield:r4.initial})),Vme=e=>{const t=Object.create(YU);return t[oy]=e,t},qme=(e,t)=>Vme(function n(r,s){if(r.refs[Ume.key]!==!1&&r.refs[n4.key].aborted)return s(Fme);Xa.depth++,Xa.depth===1&&(Xa.maxDepthBeforeYield=zE(r,r4));const i=r.refs[s4.key];if(Xa.depth>=Xa.maxDepthBeforeYield||i.shouldYield(r))i.scheduleTask(()=>n(r,s),0);else try{e(r,s)}catch(o){s(Nme(o))}Xa.depth--}),Kme=e=>qme(e);class i4{constructor(){u(this,"buckets",[])}scheduleTask(t,n){const r=this.buckets.length;let s,i=0;for(;i<r&&this.buckets[i][0]<=n;i++)s=this.buckets[i];s&&s[0]===n?s[1].push(t):i===r?this.buckets.push([n,[t]]):this.buckets.splice(i,0,[n,[t]])}}class Hme{constructor(t){u(this,"maxNextTickBeforeTimer");u(this,"running",!1);u(this,"tasks",new i4);this.maxNextTickBeforeTimer=t}starveInternal(t){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[r,s]of n)for(let i=0;i<s.length;i++)s[i]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(EU)?t.getFiberRef(u_):!1}scheduleTask(t,n){this.tasks.scheduleTask(t,n),this.running||(this.running=!0,this.starve())}}const o4=$e(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new Hme(2048));class Wme{constructor(){u(this,"tasks",new i4);u(this,"deferred",!1)}scheduleTask(t,n){this.deferred?o4.scheduleTask(t,n):this.tasks.scheduleTask(t,n)}shouldYield(t){return t.currentOpCount>t.getFiberRef(EU)?t.getFiberRef(u_):!1}flush(){for(;this.tasks.buckets.length>0;){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[n,r]of t)for(let s=0;s<r.length;s++)r[s]()}this.deferred=!0}}const a4=$e(Symbol.for("effect/FiberRef/currentScheduler"),()=>lr(o4)),c4=$e(Symbol.for("effect/FiberRef/currentRequestMap"),()=>lr(new Map)),YI=(e,t,n,r)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return ME(_de,s=>s==="unbounded"?n():s>1?r(s):t());default:return e>1?r(e):t()}},Jme=e=>t=>`${t.label.replace(/[\s="]/g,"_")}=${e-t.startTime}ms`,Gme=Jme,u4="effect/MetricLabel",aw=Symbol.for(u4);var tN;class Qme{constructor(t,n){u(this,"key");u(this,"value");u(this,tN,aw);u(this,"_hash");this.key=t,this.value=n,this._hash=Tt(u4+this.key+this.value)}[(tN=aw,he)](){return this._hash}[ce](t){return Xme(t)&&this.key===t.key&&this.value===t.value}pipe(){return ne(this,arguments)}}const Yme=(e,t)=>new Qme(e,t),Xme=e=>le(e,aw),UE="InterruptSignal",VE="Stateful",qE="Resume",KE="YieldNow",e1=e=>({_tag:UE,cause:e}),Rm=e=>({_tag:VE,onFiber:e}),Za=e=>({_tag:qE,effect:e}),Zme=()=>({_tag:KE}),ege="effect/FiberScope",ay=Symbol.for(ege);var nN;nN=ay;class tge{constructor(){u(this,nN,ay);u(this,"fiberId",Mu);u(this,"roots",new Set)}add(t,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}}var rN;rN=ay;class nge{constructor(t,n){u(this,"fiberId");u(this,"parent");u(this,rN,ay);this.fiberId=t,this.parent=n}add(t,n){this.parent.tell(Rm(r=>{r.addChild(n),n.addObserver(()=>{r.removeChild(n)})}))}}const rge=e=>new nge(e.id(),e),HE=$e(Symbol.for("effect/FiberScope/Global"),()=>new tge),sge="effect/Fiber",l4=Symbol.for(sge),f4={_E:e=>e,_A:e=>e},ige={[l4]:f4,pipe(){return ne(this,arguments)}},oge="effect/Fiber",age=Symbol.for(oge),WE=e=>vU(mU(e.await),e.inheritAll);({...Nd,...ige});const Ro="effect/FiberCurrent",cge="effect/Logger",uge=Symbol.for(cge),lge={_Message:e=>e,_Output:e=>e},JE=e=>({[uge]:lge,log:e,pipe(){return ne(this,arguments)}}),fge=JE(({annotations:e,cause:t,date:n,fiberId:r,logLevel:s,message:i,spans:o})=>{const a=n.getTime();let l=[`timestamp=${n.toISOString()}`,`level=${s.label}`,`fiber=${jz(r)}`].join(" ");const f=jce(i);for(let h=0;h<f.length;h++){const d=wu(f[h]);d.length>0&&(l=l+" message=",l=t1(d,l))}if(t!=null&&t._tag!=="Empty"&&(l=l+" cause=",l=t1(QS(t,{renderErrorCause:!0}),l)),Wz(o)){l=l+" ";let h=!0;for(const d of o)h?h=!1:l=l+" ",l=l+R(d,Gme(a))}if(rfe(e)>0){l=l+" ";let h=!0;for(const[d,p]of e)h?h=!1:l=l+" ",l=l+pge(d),l=l+"=",l=t1(wu(p),l)}return l}),hge=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,dge=/^[^\s"=]+$/,t1=(e,t)=>t+(e.match(dge)?e:hge(e)),pge=e=>e.replace(/[\s="]/g,"_"),mge=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null;mge&&process.stdout.isTTY;const h4="effect/MetricBoundaries",cw=Symbol.for(h4);var sN;class gge{constructor(t){u(this,"values");u(this,sN,cw);u(this,"_hash");this.values=t,this._hash=R(Tt(h4),ke(Id(this.values)))}[(sN=cw,he)](){return this._hash}[ce](t){return yge(t)&&ue(this.values,t.values)}pipe(){return ne(this,arguments)}}const yge=e=>le(e,cw),Sge=e=>{const t=R(e,XB(sr(Number.POSITIVE_INFINITY)),nue);return new gge(t)},_ge=e=>R(Dce(e.count-1,t=>e.start*Math.pow(e.factor,t)),fE,Sge),vge="effect/MetricKeyType",d4=Symbol.for(vge),p4="effect/MetricKeyType/Counter",uw=Symbol.for(p4),bge="effect/MetricKeyType/Frequency",wge=Symbol.for(bge),$ge="effect/MetricKeyType/Gauge",kge=Symbol.for($ge),m4="effect/MetricKeyType/Histogram",lw=Symbol.for(m4),Ege="effect/MetricKeyType/Summary",Oge=Symbol.for(Ege),g4={_In:e=>e,_Out:e=>e};var iN,oN;class Tge{constructor(t,n){u(this,"incremental");u(this,"bigint");u(this,oN,g4);u(this,iN,uw);u(this,"_hash");this.incremental=t,this.bigint=n,this._hash=Tt(p4)}[(oN=d4,iN=uw,he)](){return this._hash}[ce](t){return y4(t)}pipe(){return ne(this,arguments)}}var aN,cN;class Cge{constructor(t){u(this,"boundaries");u(this,cN,g4);u(this,aN,lw);u(this,"_hash");this.boundaries=t,this._hash=R(Tt(m4),ke(J(this.boundaries)))}[(cN=d4,aN=lw,he)](){return this._hash}[ce](t){return S4(t)&&ue(this.boundaries,t.boundaries)}pipe(){return ne(this,arguments)}}const Rge=e=>new Tge((e==null?void 0:e.incremental)??!1,(e==null?void 0:e.bigint)??!1),Ige=e=>new Cge(e),y4=e=>le(e,uw),Pge=e=>le(e,wge),Fge=e=>le(e,kge),S4=e=>le(e,lw),Nge=e=>le(e,Oge),xge="effect/MetricKey",_4=Symbol.for(xge),Mge={_Type:e=>e},Age=VS(ue);var uN;class GE{constructor(t,n,r,s=[]){u(this,"name");u(this,"keyType");u(this,"description");u(this,"tags");u(this,uN,Mge);u(this,"_hash");this.name=t,this.keyType=n,this.description=r,this.tags=s,this._hash=R(Tt(this.name+this.description),ke(J(this.keyType)),ke(Id(this.tags)))}[(uN=_4,he)](){return this._hash}[ce](t){return Lge(t)&&this.name===t.name&&ue(this.keyType,t.keyType)&&ue(this.description,t.description)&&Age(this.tags,t.tags)}pipe(){return ne(this,arguments)}}const Lge=e=>le(e,_4),Dge=(e,t)=>new GE(e,Rge(t),BS(t==null?void 0:t.description)),jge=(e,t,n)=>new GE(e,Ige(t),BS(n)),Bge=k(2,(e,t)=>t.length===0?e:new GE(e.name,e.keyType,e.description,km(e.tags,t))),XI=Symbol.for("effect/MutableHashMap"),zge={[XI]:XI,[Symbol.iterator](){return new QE(this)},toString(){return yn(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(Pt)}},[it](){return this.toJSON()},pipe(){return ne(this,arguments)}};class QE{constructor(t){u(this,"self");u(this,"referentialIterator");u(this,"bucketIterator");this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const t=this.referentialIterator.next();return t.done?(this.bucketIterator=new Uge(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new QE(this.self)}}class Uge{constructor(t){u(this,"backing");u(this,"currentBucket");this.backing=t}next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}}const Vge=()=>{const e=Object.create(zge);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},xo=k(2,(e,t)=>{if(Ug(t)===!1)return e.referential.has(t)?Q(e.referential.get(t)):H();const n=t[he](),r=e.buckets.get(n);return r===void 0?H():qge(e,r,t)}),qge=(e,t,n,r=!1)=>{for(let s=0,i=t.length;s<i;s++)if(n[ce](t[s][0])){const o=t[s][1];return r&&(t.splice(s,1),e.bucketsSize--),Q(o)}return H()},Vl=k(2,(e,t)=>Ge(xo(e,t))),ql=k(3,(e,t,n)=>{if(Ug(t)===!1)return e.referential.set(t,n),e;const r=t[he](),s=e.buckets.get(r);return s===void 0?(e.buckets.set(r,[[t,n]]),e.bucketsSize++,e):(Kge(e,s,t),s.push([t,n]),e.bucketsSize++,e)}),Kge=(e,t,n)=>{for(let r=0,s=t.length;r<s;r++)if(n[ce](t[r][0])){t.splice(r,1),e.bucketsSize--;return}},Hge="effect/MetricState",Vd=Symbol.for(Hge),v4="effect/MetricState/Counter",fw=Symbol.for(v4),b4="effect/MetricState/Frequency",hw=Symbol.for(b4),w4="effect/MetricState/Gauge",dw=Symbol.for(w4),$4="effect/MetricState/Histogram",pw=Symbol.for($4),k4="effect/MetricState/Summary",mw=Symbol.for(k4),qd={_A:e=>e};var lN,fN;class Wge{constructor(t){u(this,"count");u(this,fN,qd);u(this,lN,fw);this.count=t}[(fN=Vd,lN=fw,he)](){return R(J(v4),ke(J(this.count)),dt(this))}[ce](t){return sye(t)&&this.count===t.count}pipe(){return ne(this,arguments)}}const Jge=VS(ue);var hN,dN;class Gge{constructor(t){u(this,"occurrences");u(this,dN,qd);u(this,hN,hw);u(this,"_hash");this.occurrences=t}[(dN=Vd,hN=hw,he)](){return R(Tt(b4),ke(Id(vt(this.occurrences.entries()))),dt(this))}[ce](t){return iye(t)&&Jge(vt(this.occurrences.entries()),vt(t.occurrences.entries()))}pipe(){return ne(this,arguments)}}var pN,mN;class Qge{constructor(t){u(this,"value");u(this,mN,qd);u(this,pN,dw);this.value=t}[(mN=Vd,pN=dw,he)](){return R(J(w4),ke(J(this.value)),dt(this))}[ce](t){return oye(t)&&this.value===t.value}pipe(){return ne(this,arguments)}}var gN,yN;class Yge{constructor(t,n,r,s,i){u(this,"buckets");u(this,"count");u(this,"min");u(this,"max");u(this,"sum");u(this,yN,qd);u(this,gN,pw);this.buckets=t,this.count=n,this.min=r,this.max=s,this.sum=i}[(yN=Vd,gN=pw,he)](){return R(J($4),ke(J(this.buckets)),ke(J(this.count)),ke(J(this.min)),ke(J(this.max)),ke(J(this.sum)),dt(this))}[ce](t){return aye(t)&&ue(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return ne(this,arguments)}}var SN,_N;class Xge{constructor(t,n,r,s,i,o){u(this,"error");u(this,"quantiles");u(this,"count");u(this,"min");u(this,"max");u(this,"sum");u(this,_N,qd);u(this,SN,mw);this.error=t,this.quantiles=n,this.count=r,this.min=s,this.max=i,this.sum=o}[(_N=Vd,SN=mw,he)](){return R(J(k4),ke(J(this.error)),ke(J(this.quantiles)),ke(J(this.count)),ke(J(this.min)),ke(J(this.max)),ke(J(this.sum)),dt(this))}[ce](t){return cye(t)&&this.error===t.error&&ue(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return ne(this,arguments)}}const Zge=e=>new Wge(e),eye=e=>new Gge(e),tye=e=>new Qge(e),nye=e=>new Yge(e.buckets,e.count,e.min,e.max,e.sum),rye=e=>new Xge(e.error,e.quantiles,e.count,e.min,e.max,e.sum),sye=e=>le(e,fw),iye=e=>le(e,hw),oye=e=>le(e,dw),aye=e=>le(e,pw),cye=e=>le(e,mw),uye="effect/MetricHook",lye=Symbol.for(uye),fye={_In:e=>e,_Out:e=>e},Kd=e=>({[lye]:fye,pipe(){return ne(this,arguments)},...e}),ZI=BigInt(0),hye=e=>{let t=e.keyType.bigint?ZI:0;const n=e.keyType.incremental?e.keyType.bigint?s=>s>=ZI:s=>s>=0:s=>!0,r=s=>{n(s)&&(t=t+s)};return Kd({get:()=>Zge(t),update:r,modify:r})},dye=e=>{const t=new Map;for(const r of e.keyType.preregisteredWords)t.set(r,0);const n=r=>{const s=t.get(r)??0;t.set(r,s+1)};return Kd({get:()=>eye(t),update:n,modify:n})},pye=(e,t)=>{let n=t;return Kd({get:()=>tye(n),update:r=>{n=r},modify:r=>{n=n+r}})},mye=e=>{const t=e.keyType.boundaries.values,n=t.length,r=new Uint32Array(n+1),s=new Float32Array(n);let i=0,o=0,a=Number.MAX_VALUE,c=Number.MIN_VALUE;R(t,Oh(ju),jc((h,d)=>{s[d]=h}));const l=h=>{let d=0,p=n;for(;d!==p;){const _=Math.floor(d+(p-d)/2),b=s[_];h<=b?p=_:d=_,p===d+1&&(h<=s[d]?p=d:d=p)}r[d]=r[d]+1,i=i+1,o=o+h,h<a&&(a=h),h>c&&(c=h)},f=()=>{const h=US(n);let d=0;for(let p=0;p<n;p++){const _=s[p],b=r[p];d=d+b,h[p]=[_,d]}return h};return Kd({get:()=>nye({buckets:f(),count:i,min:a,max:c,sum:o}),update:l,modify:l})},gye=e=>{const{error:t,maxAge:n,maxSize:r,quantiles:s}=e.keyType,i=R(s,Oh(ju)),o=US(r);let a=0,c=0,l=0,f=Number.MAX_VALUE,h=Number.MIN_VALUE;const d=_=>{const b=[];let w=0;for(;w!==r-1;){const m=o[w];if(m!=null){const[g,y]=m,$=Vb(_-g);Vle($,Fle)&&$<=n&&b.push(y)}w=w+1}return yye(t,i,Oh(b,ju))},p=(_,b)=>{if(r>0){a=a+1;const w=a%r;o[w]=[b,_]}c=c+1,l=l+_,_<f&&(f=_),_>h&&(h=_)};return Kd({get:()=>rye({error:t,quantiles:d(Date.now()),count:c,min:f,max:h,sum:l}),update:([_,b])=>p(_,b),modify:([_,b])=>p(_,b)})},yye=(e,t,n)=>{const r=n.length;if(!Ht(t))return ku();const s=t[0],i=t.slice(1),o=eP(e,r,H(),0,s,n),a=Vr(o);return i.forEach(c=>{a.push(eP(e,r,o.value,o.consumed,c,o.rest))}),jc(a,c=>[c.quantile,c.value])},eP=(e,t,n,r,s,i)=>{let o=e,a=t,c=n,l=r,f=s,h=i,d=e,p=t,_=n,b=r,w=s,m=i;for(;;){if(!Ht(h))return{quantile:f,value:H(),consumed:l,rest:[]};if(f===1)return{quantile:f,value:Q(tz(h)),consumed:l+h.length,rest:[]};const g=Jce(h,E=>E<=h[0]),y=f*a,$=o/2*y,T=l+g[0].length,C=Math.abs(T-y);if(T<y-$){d=o,p=a,_=xf(h),b=T,w=f,m=g[1],o=d,a=p,c=_,l=b,f=w,h=m;continue}if(T>y+$)return{quantile:f,value:c,consumed:l,rest:h};switch(c._tag){case"None":{d=o,p=a,_=xf(h),b=T,w=f,m=g[1],o=d,a=p,c=_,l=b,f=w,h=m;continue}case"Some":{const E=Math.abs(y-c.value);if(C<E){d=o,p=a,_=xf(h),b=T,w=f,m=g[1],o=d,a=p,c=_,l=b,f=w,h=m;continue}return{quantile:f,value:Q(c.value),consumed:l,rest:h}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},Sye="effect/MetricPair",_ye=Symbol.for(Sye),vye={_Type:e=>e},bye=(e,t)=>({[_ye]:vye,metricKey:e,metricState:t,pipe(){return ne(this,arguments)}}),wye="effect/MetricRegistry",tP=Symbol.for(wye);var vN;vN=tP;class $ye{constructor(){u(this,vN,tP);u(this,"map",Vge())}snapshot(){const t=[];for(const[n,r]of this.map)t.push(bye(n,r.get()));return t}get(t){const n=R(this.map,xo(t),js);if(n==null){if(y4(t.keyType))return this.getCounter(t);if(Fge(t.keyType))return this.getGauge(t);if(Pge(t.keyType))return this.getFrequency(t);if(S4(t.keyType))return this.getHistogram(t);if(Nge(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(t){let n=R(this.map,xo(t),js);if(n==null){const r=hye(t);R(this.map,Vl(t))||R(this.map,ql(t,r)),n=r}return n}getFrequency(t){let n=R(this.map,xo(t),js);if(n==null){const r=dye(t);R(this.map,Vl(t))||R(this.map,ql(t,r)),n=r}return n}getGauge(t){let n=R(this.map,xo(t),js);if(n==null){const r=pye(t,t.keyType.bigint?BigInt(0):0);R(this.map,Vl(t))||R(this.map,ql(t,r)),n=r}return n}getHistogram(t){let n=R(this.map,xo(t),js);if(n==null){const r=mye(t);R(this.map,Vl(t))||R(this.map,ql(t,r)),n=r}return n}getSummary(t){let n=R(this.map,xo(t),js);if(n==null){const r=gye(t);R(this.map,Vl(t))||R(this.map,ql(t,r)),n=r}return n}}const kye=()=>new $ye,Eye="effect/Metric",Oye=Symbol.for(Eye),Tye={_Type:e=>e,_In:e=>e,_Out:e=>e},nP=$e(Symbol.for("effect/Metric/globalMetricRegistry"),()=>kye()),E4=function(e,t,n,r){const s=Object.assign(i=>Yhe(i,o=>Pye(s,o)),{[Oye]:Tye,keyType:e,unsafeUpdate:t,unsafeValue:n,unsafeModify:r,register(){return this.unsafeValue([]),this},pipe(){return ne(this,arguments)}});return s},h_=(e,t)=>O4(Dge(e,t)),O4=e=>{let t;const n=new WeakMap,r=s=>{if(s.length===0)return t!==void 0||(t=nP.get(e)),t;let i=n.get(s);return i!==void 0||(i=nP.get(Bge(e,s)),n.set(s,i)),i};return E4(e.keyType,(s,i)=>r(i).update(s),s=>r(s).get(),(s,i)=>r(i).modify(s))},Cye=(e,t,n)=>O4(jge(e,t,n)),Rye=k(3,(e,t,n)=>Iye(e,[Yme(t,n)])),Iye=k(2,(e,t)=>E4(e.keyType,(n,r)=>e.unsafeUpdate(n,km(t,r)),n=>e.unsafeValue(km(t,n)),(n,r)=>e.unsafeModify(n,km(t,r)))),Pye=k(2,(e,t)=>ME(Zb,n=>ee(()=>e.unsafeUpdate(t,n)))),Fye="effect/Request",Nye=Symbol.for(Fye),xye={_E:e=>e,_A:e=>e};({...cE,[Nye]:0});const Mye=k(2,(e,t)=>ME(c4,n=>ee(()=>{if(n.has(e)){const r=n.get(e);r.state.completed||(r.state.completed=!0,IU(r.result,t))}}))),Aye="effect/Supervisor",d_=Symbol.for(Aye),YE={_T:e=>e};var bN;bN=d_;const fO=class fO{constructor(t,n){u(this,"underlying");u(this,"value0");u(this,bN,YE);this.underlying=t,this.value0=n}get value(){return this.value0}onStart(t,n,r,s){this.underlying.onStart(t,n,r,s)}onEnd(t,n){this.underlying.onEnd(t,n)}onEffect(t,n){this.underlying.onEffect(t,n)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new fO(this,R(this.value,xn(t)))}zip(t){return new uy(this,t)}};let cy=fO;var wN;wN=d_;const hO=class hO{constructor(t,n){u(this,"left");u(this,"right");u(this,"_tag","Zip");u(this,wN,YE);this.left=t,this.right=n}get value(){return _U(this.left.value,this.right.value)}onStart(t,n,r,s){this.left.onStart(t,n,r,s),this.right.onStart(t,n,r,s)}onEnd(t,n){this.left.onEnd(t,n),this.right.onEnd(t,n)}onEffect(t,n){this.left.onEffect(t,n),this.right.onEffect(t,n)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new cy(this,R(this.value,xn(t)))}zip(t){return new hO(this,t)}};let uy=hO;const T4=e=>le(e,d_)&&RB(e,"Zip");var $N;$N=d_;class Lye{constructor(t){u(this,"effect");u(this,$N,YE);this.effect=t}get value(){return this.effect}onStart(t,n,r,s){}onEnd(t,n){}onEffect(t,n){}onSuspend(t){}onResume(t){}map(t){return new cy(this,R(this.value,xn(t)))}zip(t){return new uy(this,t)}onRun(t,n){return t()}}const Dye=e=>new Lye(e),p_=$e("effect/Supervisor/none",()=>Dye(as)),jye=fl,C4="Empty",R4="AddSupervisor",I4="RemoveSupervisor",P4="AndThen",Af={_tag:C4},Im=(e,t)=>({_tag:P4,first:e,second:t}),Bye=(e,t)=>zye(t,sr(e)),zye=(e,t)=>{let n=e,r=t;for(;Ou(r);){const s=Tu(r);switch(s._tag){case C4:{r=qo(r);break}case R4:{n=n.zip(s.supervisor),r=qo(r);break}case I4:{n=gw(n,s.supervisor),r=qo(r);break}case P4:{r=os(s.first)(os(s.second)(qo(r)));break}}}return n},gw=(e,t)=>ue(e,t)?p_:T4(e)?gw(e.left,t).zip(gw(e.right,t)):e,ly=e=>ue(e,p_)?Ra():T4(e)?R(ly(e.left),Rh(ly(e.right))):vE(e),Uye=(e,t)=>{if(ue(e,t))return Af;const n=ly(e),r=ly(t),s=R(r,fI(n),Qg(Af,(o,a)=>Im(o,{_tag:R4,supervisor:a}))),i=R(n,fI(r),Qg(Af,(o,a)=>Im(o,{_tag:I4,supervisor:a})));return Im(s,i)},Vye=jye({empty:Af,patch:Bye,combine:Im,diff:Uye}),qye=h_("effect_fiber_started",{incremental:!0}),rP=h_("effect_fiber_active"),Kye=h_("effect_fiber_successes",{incremental:!0}),Hye=h_("effect_fiber_failures",{incremental:!0}),Wye=Rye(Cye("effect_fiber_lifetimes",_ge({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Kl="Continue",Jye="Done",sP="Yield",Gye={_E:e=>e,_A:e=>e},xp=e=>{throw new Error(`BUG: FiberRuntime - ${wu(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},Ps=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Fs=$e("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Hl={[Vg]:(e,t,n)=>wn(()=>t.effect_instruction_i1(n)),OnStep:(e,t,n)=>Ct(Ct(n)),[qg]:(e,t,n)=>wn(()=>t.effect_instruction_i2(n)),[aE]:(e,t,n)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),Ii(e.currentRuntimeFlags)&&e.isInterrupted()?Be(e.getInterruptedCause()):Ct(n)),[Kg]:(e,t,n)=>(wn(()=>t.effect_instruction_i2(n)),wn(()=>t.effect_instruction_i0())?(e.pushStack(t),wn(()=>t.effect_instruction_i1())):as),[bm]:(e,t,n)=>{const r=wn(()=>t.effect_instruction_i0.next(n));return r.done?Ct(r.value):(e.pushStack(t),Zae(r.value))}},Qye={[UE]:(e,t,n,r)=>(e.processNewInterruptSignal(r.cause),Ii(t)?Be(r.cause):n),[qE]:(e,t,n,r)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[VE]:(e,t,n,r)=>(r.onFiber(e,QU(t)),n),[KE]:(e,t,n,r)=>te(NE(),()=>n)},Yye=e=>s_(_he(e),t=>sa(Nhe(t),([n,r])=>{const s=new Map,i=[];for(const a of r){i.push(na(a));for(const c of a)s.set(c.request,c)}const o=i.flat();return c_(lSe(n.runAll(i),o,()=>o.forEach(a=>{a.listeners.interrupted=!0})),c4,s)},!1,!1));var kN,EN;class F4 extends Lpe{constructor(n,r,s){super();u(this,EN,f4);u(this,kN,Gye);u(this,"_fiberRefs");u(this,"_fiberId");u(this,"_queue",new Array);u(this,"_children",null);u(this,"_observers",new Array);u(this,"_running",!1);u(this,"_stack",[]);u(this,"_asyncInterruptor",null);u(this,"_asyncBlockingOn",null);u(this,"_exitValue",null);u(this,"_steps",[]);u(this,"_isYielding",!1);u(this,"currentRuntimeFlags");u(this,"currentOpCount",0);u(this,"currentSupervisor");u(this,"currentScheduler");u(this,"currentTracer");u(this,"currentSpan");u(this,"currentContext");u(this,"currentDefaultServices");u(this,"run",()=>{this.drainQueueOnCurrentThread()});if(this.currentRuntimeFlags=s,this._fiberId=n,this._fiberRefs=r,kI(s)){const i=this.getFiberRef(Zb);qye.unsafeUpdate(1,i),rP.unsafeUpdate(1,i)}this.refreshRefCache()}commit(){return WE(this)}id(){return this._fiberId}resume(n){this.tell(Za(n))}get status(){return this.ask((n,r)=>r)}get runtimeFlags(){return this.ask((n,r)=>pme(r)?n.currentRuntimeFlags:r.runtimeFlags)}scope(){return rge(this)}get children(){return this.ask(n=>Array.from(n.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(Np)}fiberRefs(){return this.ask(n=>n.getFiberRefs())}ask(n){return Bt(()=>{const r=Fde(this._fiberId);return this.tell(Rm((s,i)=>{IU(r,ee(()=>n(s,i)))})),RU(r)})}tell(n){this._queue.push(n),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return yi(n=>{const r=s=>n(Ne(s));return this.tell(Rm((s,i)=>{s._exitValue!==null?r(this._exitValue):s.addObserver(r)})),ee(()=>this.tell(Rm((s,i)=>{s.removeObserver(r)})))},this.id())}get inheritAll(){return ir((n,r)=>{const s=n.id(),i=n.getFiberRefs(),o=r.runtimeFlags,a=this.getFiberRefs(),c=Hpe(i,s,a);n.setFiberRefs(c);const l=n.getFiberRef(uP),f=R(Tm(o,l),OI(hl),OI(Yb));return ede(f)})}get poll(){return ee(()=>BS(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(n){return ee(()=>this.tell(e1(xi(n))))}unsafeInterruptAsFork(n){this.tell(e1(xi(n)))}addObserver(n){this._exitValue!==null?n(this._exitValue):this._observers.push(n)}removeObserver(n){this._observers=this._observers.filter(r=>r!==n)}getFiberRefs(){return this.setFiberRef(uP,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(n){this._fiberRefs=qU(this._fiberRefs,n)}getFiberRef(n){return this._fiberRefs.locals.has(n)?this._fiberRefs.locals.get(n)[0][1]:n.initial}setFiberRef(n,r){this._fiberRefs=iw(this._fiberRefs,{fiberId:this._fiberId,fiberRef:n,value:r}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(sy),this.currentTracer=this.currentDefaultServices.unsafeMap.get(BU.key),this.currentSupervisor=this.getFiberRef(uSe),this.currentScheduler=this.getFiberRef(a4),this.currentContext=this.getFiberRef(Du),this.currentSpan=this.currentContext.unsafeMap.get(zU.key)}setFiberRefs(n){this._fiberRefs=n,this.refreshRefCache()}addChild(n){this.getChildren().add(n)}removeChild(n){this.getChildren().delete(n)}drainQueueOnCurrentThread(){let n=!0;for(;n;){let r=Kl;const s=globalThis[Ro];globalThis[Ro]=this;try{for(;r===Kl;)r=this._queue.length===0?Jye:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[Ro]=s}this._queue.length>0&&!this._running?(this._running=!0,r===sP?(this.drainQueueLaterOnExecutor(),n=!1):n=!0):n=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(u_))}drainQueueWhileRunning(n,r){let s=r;for(;this._queue.length>0;){const i=this._queue.splice(0,1)[0];s=Qye[i._tag](this,n,s,i)}return s}isInterrupted(){return!Que(this.getFiberRef(Np))}addInterruptedCause(n){const r=this.getFiberRef(Np);this.setFiberRef(Np,er(r,n))}processNewInterruptSignal(n){this.addInterruptedCause(n),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let n=!1;for(const r of this._children)r.tell(e1(xi(this.id()))),n=!0;return n}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const n=this._children.values();this._children=null;let r=!1;return FE({while:()=>!r,body:()=>{const i=n.next();return i.done?ee(()=>{r=!0}):zd(i.value.await)},step:()=>{}})}return null}reportExitValue(n){if(kI(this.currentRuntimeFlags)){const r=this.getFiberRef(Zb),s=this.id().startTimeMillis,i=Date.now();switch(Wye.unsafeUpdate(i-s,r),rP.unsafeUpdate(-1,r),n._tag){case ns:{Kye.unsafeUpdate(1,r);break}case ts:{Hye.unsafeUpdate(1,r);break}}}if(n._tag==="Failure"){const r=this.getFiberRef(bde);!bE(n.cause)&&r._tag==="Some"&&this.log("Fiber terminated with an unhandled error",n.cause,r)}}setExitValue(n){this._exitValue=n,this.reportExitValue(n);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](n)}getLoggers(){return this.getFiberRef(nSe)}log(n,r,s){const i=Ge(s)?s.value:this.getFiberRef(gde),o=this.getFiberRef(Xye);if(kme(o,i))return;const a=this.getFiberRef(yde),c=this.getFiberRef(mde),l=this.getLoggers(),f=this.getFiberRefs();if(bz(l)>0){const h=Fz(this.getFiberRef(sy),jE),d=new Date(h.unsafeCurrentTimeMillis());rce(f,()=>{for(const p of l)p.log({fiberId:this.id(),logLevel:i,message:n,cause:r,context:f,spans:a,annotations:c,date:d})})}}evaluateMessageWhileSuspended(n){switch(n._tag){case KE:return sP;case UE:return this.processNewInterruptSignal(n.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(Be(n.cause)),this._asyncInterruptor=null),Kl;case qE:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(n.effect),Kl;case VE:return n.onFiber(this,this._exitValue!==null?hme:dme(this.currentRuntimeFlags,this._asyncBlockingOn)),Kl;default:return xp(n)}}evaluateEffect(n){this.currentSupervisor.onResume(this);try{let r=Ii(this.currentRuntimeFlags)&&this.isInterrupted()?Be(this.getInterruptedCause()):n;for(;r!==null;){const s=r,i=this.runLoop(s);if(i===Ps){const o=Fs.currentOp;Fs.currentOp=null,o._op===wm?phe(this.currentRuntimeFlags)?(this.tell(Zme()),this.tell(Za(Ko)),r=null):r=Ko:o._op===Nf&&(r=null)}else{this.currentRuntimeFlags=R(this.currentRuntimeFlags,mhe(Yb));const o=this.interruptAllChildren();o!==null?r=te(o,()=>i):(this._queue.length===0?this.setExitValue(i):this.tell(Za(i)),r=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(n){if(this._running)this.tell(Za(n));else{this._running=!0;const r=globalThis[Ro];globalThis[Ro]=this;try{this.evaluateEffect(n)}finally{this._running=!1,globalThis[Ro]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(n){this.tell(Za(n))}patchRuntimeFlags(n,r){const s=Cm(n,r);return globalThis[Ro]=this,this.currentRuntimeFlags=s,s}initiateAsync(n,r){let s=!1;const i=o=>{s||(s=!0,this.tell(Za(o)))};Ii(n)&&(this._asyncInterruptor=i);try{r(i)}catch(o){i(Ar(Cr(o)))}}pushStack(n){this._stack.push(n),n._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const n=this._stack.pop();if(n)return n._op==="OnStep"&&this._steps.pop(),n}getNextSuccessCont(){let n=this.popStack();for(;n;){if(n._op!==qv)return n;n=this.popStack()}}getNextFailCont(){let n=this.popStack();for(;n;){if(n._op!==Vg&&n._op!==Kg&&n._op!==bm)return n;n=this.popStack()}}[(EN=l4,kN=age,ice)](n){return ee(()=>Nz(this.currentContext,n))}Left(n){return Cn(n.left)}None(n){return Cn(new TU)}Right(n){return Ct(n.right)}Some(n){return Ct(n.value)}Micro(n){return Khe(r=>{const s=Ame().pipe(Lme(zme,this.getFiberRef(Du)));let i=r;return n[oy](s,o=>{if(o._tag==="Right")return i(Ct(o.right));switch(o.left._tag){case"Interrupt":return i(Be(xi(Mu)));case"Fail":return i(Cn(o.left.error));case"Die":return i(CI(o.left.defect))}}),yi(o=>{i=a=>{o(as)},zE(s,t4).abort()})})}[xB](n){const r=wn(()=>n.effect_instruction_i0()),s=this.getNextSuccessCont();return s!==void 0?(s._op in Hl||xp(s),Hl[s._op](this,s,r)):(Fs.currentOp=Ct(r),Ps)}[ns](n){const r=n,s=this.getNextSuccessCont();return s!==void 0?(s._op in Hl||xp(s),Hl[s._op](this,s,r.effect_instruction_i0)):(Fs.currentOp=r,Ps)}[ts](n){const r=n.effect_instruction_i0,s=this.getNextFailCont();if(s!==void 0)switch(s._op){case qv:case qg:return Ii(this.currentRuntimeFlags)&&this.isInterrupted()?Be(hI(r)):wn(()=>s.effect_instruction_i1(r));case"OnStep":return Ii(this.currentRuntimeFlags)&&this.isInterrupted()?Be(hI(r)):Ct(Be(r));case aE:return this.patchRuntimeFlags(this.currentRuntimeFlags,s.patch),Ii(this.currentRuntimeFlags)&&this.isInterrupted()?Be(er(r,this.getInterruptedCause())):Be(r);default:xp(s)}else return Fs.currentOp=Be(r),Ps}[MB](n){return wn(()=>n.effect_instruction_i0(this,QU(this.currentRuntimeFlags)))}Blocked(n){const r=this.getFiberRefs(),s=this.currentRuntimeFlags;if(this._steps.length>0){const i=[],o=this._steps[this._steps.length-1];let a=this.popStack();for(;a&&a._op!=="OnStep";)i.push(a),a=this.popStack();this.setFiberRefs(o.refs),this.currentRuntimeFlags=o.flags;const c=nme(o.refs,r),l=Tm(o.flags,s);return Ct(cU(n.effect_instruction_i0,ir(f=>{for(;i.length>0;)f.pushStack(i.pop());return f.setFiberRefs(rme(f.id(),f.getFiberRefs())(c)),f.currentRuntimeFlags=Cm(l)(f.currentRuntimeFlags),n.effect_instruction_i1})))}return o_(i=>te(N4(Uhe(n.effect_instruction_i0)),()=>i(n.effect_instruction_i1)))}RunBlocked(n){return Yye(n.effect_instruction_i0)}[Pd](n){const r=n.effect_instruction_i0,s=this.currentRuntimeFlags,i=Cm(s,r);if(Ii(i)&&this.isInterrupted())return Be(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,r),n.effect_instruction_i1){const o=Tm(i,s);return this.pushStack(new Vhe(o,n)),wn(()=>n.effect_instruction_i1(s))}else return Ko}[Vg](n){return this.pushStack(n),n.effect_instruction_i0}OnStep(n){return this.pushStack(n),n.effect_instruction_i0}[qv](n){return this.pushStack(n),n.effect_instruction_i0}[qg](n){return this.pushStack(n),n.effect_instruction_i0}[Nf](n){return this._asyncBlockingOn=n.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,n.effect_instruction_i0),Fs.currentOp=n,Ps}[wm](n){return this._isYielding=!1,Fs.currentOp=n,Ps}[Kg](n){const r=n.effect_instruction_i0,s=n.effect_instruction_i1;return r()?(this.pushStack(n),s()):Ko}[bm](n){return Hl[bm](this,n,void 0)}[jS](n){return wn(()=>n.commit())}runLoop(n){let r=n;for(this.currentOpCount=0;;){if(this.currentRuntimeFlags&dhe&&this.currentSupervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this.currentRuntimeFlags,r)),!this._isYielding){this.currentOpCount+=1;const s=this.currentScheduler.shouldYield(this);if(s!==!1){this._isYielding=!0,this.currentOpCount=0;const i=r;r=te(NE({priority:s}),()=>i)}}try{if(r=this.currentTracer.context(()=>Bg()!==r[Lu]._V?RI(`Cannot execute an Effect versioned ${r[Lu]._V} with a Runtime of version ${Bg()}`):this[r._op](r),this),r===Ps){const s=Fs.currentOp;return s._op===wm||s._op===Nf?Ps:(Fs.currentOp=null,s._op===ns||s._op===ts?s:Be(Cr(s)))}}catch(s){r!==Ps&&!le(r,"_op")||!(r._op in this)?r=RI(`Not a valid effect: ${wu(r)}`):zhe(s)?r=Be(s.cause):Ode(s)?r=Be(er(Cr(s),xi(Mu))):r=CI(s)}}}}const Xye=$e("effect/FiberRef/currentMinimumLogLevel",()=>lr(Eme("Info"))),Zye=e=>JE(t=>{const n=Qpe(t.context,sy);Fz(n,jU).unsafe.log(e.log(t))}),eSe=$e(Symbol.for("effect/Logger/defaultLogger"),()=>Zye(fge)),tSe=$e(Symbol.for("effect/Logger/tracerLogger"),()=>JE(({annotations:e,cause:t,context:n,fiberId:r,logLevel:s,message:i})=>{const o=Ad(xh(n,Du),zU);if(o._tag==="None"||o.value._tag==="ExternalSpan")return;const a=Nz(xh(n,sy),jE),c={};for(const[l,f]of e)c[l]=f;c["effect.fiberId"]=efe(r),c["effect.logLevel"]=s.label,t!==null&&t._tag!=="Empty"&&(c["effect.cause"]=QS(t,{renderErrorCause:!0})),o.value.event(wu(Array.isArray(i)?i[0]:i),a.unsafeCurrentTimeNanos(),c)})),nSe=$e(Symbol.for("effect/FiberRef/currentLoggers"),()=>hde(vE(eSe,tSe))),rSe=k(e=>zae(e[0]),(e,t,n)=>ir(r=>{const s=(n==null?void 0:n.batching)===!0||(n==null?void 0:n.batching)==="inherit"&&r.getFiberRef(vde);return n!=null&&n.discard?YI(n.concurrency,()=>ec(nw,n==null?void 0:n.concurrentFinalizers)(i=>s?sa(e,(o,a)=>i(t(o,a)),!0,!1,1):s_(e,(o,a)=>i(t(o,a)))),()=>ec(rw,n==null?void 0:n.concurrentFinalizers)(i=>sa(e,(o,a)=>i(t(o,a)),s,!1)),i=>ec(sw(i),n==null?void 0:n.concurrentFinalizers)(o=>sa(e,(a,c)=>o(t(a,c)),s,!1,i))):YI(n==null?void 0:n.concurrency,()=>ec(nw,n==null?void 0:n.concurrentFinalizers)(i=>s?iP(e,1,(o,a)=>i(t(o,a)),!0):Bi(e,(o,a)=>i(t(o,a)))),()=>ec(rw,n==null?void 0:n.concurrentFinalizers)(i=>sSe(e,(o,a)=>i(t(o,a)),s)),i=>ec(sw(i),n==null?void 0:n.concurrentFinalizers)(o=>iP(e,i,(a,c)=>o(t(a,c)),s)))})),sSe=(e,t,n)=>Bt(()=>{const r=vt(e),s=new Array(r.length);return a_(sa(r,(o,a)=>te(t(o,a),c=>ee(()=>s[a]=c)),n,!1),Ne(s))}),sa=(e,t,n,r,s)=>o_(i=>Xhe(o=>ir(a=>{let c=Array.from(e).reverse(),l=c.length;if(l===0)return as;let f=0,h=!1;const d=s?Math.min(c.length,s):c.length,p=new Set,_=new Array,b=()=>p.forEach(O=>{O.currentScheduler.scheduleTask(()=>{O.unsafeInterruptAsFork(a.id())},0)}),w=new Array,m=new Array,g=new Array,y=()=>{const O=_.filter(({exit:A})=>A._tag==="Failure").sort((A,I)=>A.index<I.index?-1:A.index===I.index?0:1).map(({exit:A})=>A);return O.length===0&&O.push(Ko),O},$=(O,A=!1)=>{const I=SU(o(O)),M=oSe(I,a,a.currentRuntimeFlags,HE);return a.currentScheduler.scheduleTask(()=>{A&&M.unsafeInterruptAsFork(a.id()),M.resume(I)},0),M},T=()=>{r||(l-=c.length,c=[]),h=!0,b()},C=n?Jhe:hU,E=$(yi(O=>{const A=(M,U)=>{M._op==="Blocked"?g.push(M):(_.push({index:U,exit:M}),M._op==="Failure"&&!h&&T())},I=()=>{if(c.length>0){const M=c.pop();let U=f++;const X=()=>{const Z=c.pop();return U=f++,te(NE(),()=>te(C(i(t(Z,U))),ve))},ve=Z=>c.length>0&&(A(Z,U),c.length>0)?X():Ne(Z),De=te(C(i(t(M,U))),ve),ye=$(De);w.push(ye),p.add(ye),h&&ye.currentScheduler.scheduleTask(()=>{ye.unsafeInterruptAsFork(a.id())},0),ye.addObserver(Z=>{let x;if(Z._op==="Failure"?x=Z:x=Z.effect_instruction_i0,m.push(ye),p.delete(ye),A(x,U),_.length===l)O(Ne(Kt(Qv(y(),{parallel:!0}),()=>Ko)));else if(g.length+_.length===l){const V=g.map(K=>K.effect_instruction_i0).reduce(sU);O(Ne(cU(V,sa([Kt(Qv(y(),{parallel:!0}),()=>Ko),...g.map(K=>K.effect_instruction_i1)],K=>K,n,!0,s))))}else I()})}};for(let M=0;M<d;M++)I()}));return zd(PE(mU(i(WE(E))),CU({onFailure:()=>{T();const O=g.length+1,A=Math.min(typeof s=="number"?s:g.length,g.length),I=Array.from(g);return yi(M=>{const U=[];let X=0,ve=0;const De=(Z,x)=>V=>{U[Z]=V,X++,X===O&&M(YB(Qv(U,{parallel:!0}))),I.length>0&&x&&ye()},ye=()=>{$(I.pop(),!0).addObserver(De(ve,!0)),ve++};E.addObserver(De(ve,!1)),ve++;for(let Z=0;Z<A;Z++)ye()})},onSuccess:()=>Bi(m,O=>O.inheritAll)})))}))),iP=(e,t,n,r)=>Bt(()=>{const s=vt(e),i=new Array(s.length);return a_(sa(s,(a,c)=>xn(n(a,c),l=>i[c]=l),r,!1,t),Ne(i))}),N4=e=>aSe(e,HE),iSe=(e,t,n,r=null)=>{const s=x4(e,t,n,r);return s.resume(e),s},oSe=(e,t,n,r=null)=>x4(e,t,n,r),x4=(e,t,n,r=null)=>{const s=Bz(),i=t.getFiberRefs(),o=Wpe(i,s),a=new F4(s,o,n),c=xh(o,Du),l=a.currentSupervisor;return l.onStart(c,e,Q(t),a),a.addObserver(h=>l.onEnd(h,a)),(r!==null?r:R(t.getFiberRef(ew),Kt(()=>t.scope()))).add(n,a),a},aSe=(e,t)=>ir((n,r)=>Ne(iSe(e,n,r.runtimeFlags,t))),oP=e=>Ud(t=>Mr(Ad(t,Hd),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return te(l_(n,rw),r=>XE(e,r))}}})),aP=e=>t=>Ud(n=>Mr(Ad(n,Hd),{onNone:()=>t,onSome:r=>r.strategy._tag==="ParallelN"&&r.strategy.parallelism===e?t:te(l_(r,sw(e)),s=>XE(t,s))})),ec=(e,t)=>n=>Ud(r=>Mr(Ad(r,Hd),{onNone:()=>n(Ut),onSome:s=>{if(t===!0){const i=e._tag==="Parallel"?oP:e._tag==="Sequential"?cP:aP(e.parallelism);switch(s.strategy._tag){case"Parallel":return i(n(oP));case"Sequential":return i(n(cP));case"ParallelN":return i(n(aP(s.strategy.parallelism)))}}else return n(Ut)}})),cP=e=>Ud(t=>Mr(Ad(t,Hd),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return te(l_(n,nw),r=>XE(e,r))}}})),Hd=ja("effect/Scope"),XE=k(2,(e,t)=>Lde(e,Cle(Tle(Hd,t)))),cSe=e=>pl(e,{differ:Vye,fork:Af}),uP=pde(ghe),uSe=cSe(p_),lSe=(e,t,n)=>pU(r=>te(te(N4(gU(e)),s=>yi(i=>{const o=t.map(l=>l.listeners.count),a=()=>{o.every(l=>l===0)&&t.every(l=>l.result.state.current._tag==="Pending"?!0:!!(l.result.state.current._tag==="Done"&&LE(l.result.state.current.effect)&&l.result.state.current.effect._tag==="Failure"&&Yue(l.result.state.current.effect.cause)))&&(c.forEach(l=>l()),n==null||n(),i(tde(s)))};s.addObserver(l=>{c.forEach(f=>f()),i(l)});const c=t.map((l,f)=>{const h=d=>{o[f]=d,a()};return l.listeners.addObserver(h),()=>l.listeners.removeObserver(h)});return a(),ee(()=>{c.forEach(l=>l())})})),()=>Bt(()=>{const s=t.flatMap(i=>i.state.completed?[]:[i]);return s_(s,i=>Mye(i.request,Rde(r)))}))),fSe=$de,hSe=l_,dSe=e=>(t,n)=>{const r=Bz(),s=[[Du,[[r,e.context]]]];n!=null&&n.scheduler&&s.push([a4,[[r,n.scheduler]]]);let i=Ype(e.fiberRefs,{entries:s,forkAs:r});n!=null&&n.updateRefs&&(i=n.updateRefs(i,r));const o=new F4(r,i,e.runtimeFlags);let a=t;n!=null&&n.scope&&(a=te(hSe(n.scope,UU),l=>a_(wde(l,pU(f=>ue(f,o.id())?as:bU(o,f))),PE(t,f=>fSe(l,f)))));const c=o.currentSupervisor;return c!==p_&&(c.onStart(e.context,a,H(),o),o.addObserver(l=>c.onEnd(l,o))),HE.add(e.runtimeFlags,o),(n==null?void 0:n.immediate)===!1?o.resume(a):o.start(a),o},pSe=e=>t=>{const n=vSe(e)(t);if(n._tag==="Failure")throw SSe(n.effect_instruction_i0);return n.effect_instruction_i0};class mSe extends Error{constructor(n){super(`Fiber #${n.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`);u(this,"fiber");u(this,"_tag","AsyncFiberException");this.fiber=n,this.name=this._tag,this.stack=this.message}}const gSe=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new mSe(e);return Error.stackTraceLimit=t,n},n1=Symbol.for("effect/Runtime/FiberFailure"),r1=Symbol.for("effect/Runtime/FiberFailure/Cause");var ON,TN;class ySe extends Error{constructor(n){super();u(this,TN);u(this,ON);this[n1]=n1,this[r1]=n;const r=Cz(n);if(r.length>0){const s=r[0];this.name=s.name,this.message=s.message,this.stack=s.stack}this.name=`(FiberFailure) ${this.name}`,(this.message===void 0||this.message.length===0)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[r1].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[(TN=n1,ON=r1,it)](){return this.toString()}}const SSe=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new ySe(e);return Error.stackTraceLimit=t,n},_Se=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return xI(t.left);case"Right":return Ct(t.right);case"Some":return Ct(t.value);case"None":return xI(TU())}},vSe=e=>t=>{const n=_Se(t);if(n)return n;const r=new Wme,s=dSe(e)(t,{scheduler:r});r.flush();const i=s.unsafePoll();return i||Cde(RE(gSe(s),DE(s)))};class bSe{constructor(t,n,r){u(this,"context");u(this,"runtimeFlags");u(this,"fiberRefs");this.context=t,this.runtimeFlags=n,this.fiberRefs=r}pipe(){return ne(this,arguments)}}const wSe=e=>new bSe(e.context,e.runtimeFlags,e.fiberRefs),$Se=nU(hl,eU,Zz),kSe=wSe({context:YS(),runtimeFlags:$Se,fiberRefs:Xpe()}),ESe=pSe(kSe),OSe=n_,Pm=rSe,Si=Ne,Mp=Bt,hr=as,ZE=Xb,qr=xn,TSe=IE,CSe=i_,Mo=ny,Qn=te,RSe=r_,ISe=Qhe,M4=ESe,A4=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return A4(e,t.from)}},Uc=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),L4=e=>{let t=!1,n;return()=>(t||(n=e(),t=!0),n)},PSe=e=>{try{return e.toISOString()}catch{return String(e)}},po=e=>{if(mi(e))return JSON.stringify(e);if(ro(e)||e==null||tE(e)||Fb(e))return String(e);if(Bae(e))return PSe(e);if(AS(e))return String(e)+"n";if(!xb(e)&&le(e,"toString")&&Cd(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{return JSON.stringify(e),xb(e)?`[${e.map(po).join(",")}]`:`{${Uc(e).map(t=>`${mi(t)?JSON.stringify(t):String(t)}:${po(e[t])}`).join(",")}}`}catch{return String(e)}},FSe=e=>typeof e=="string"?JSON.stringify(e):String(e),D4=e=>Array.isArray(e),lP=e=>`[${FSe(e)}]`,NSe=e=>D4(e)?e.map(lP).join(""):lP(e),Ba=(e,t,n,r)=>{let s=e;return t!==void 0&&(s+=`
details: ${t}`),r&&(s+=`
schema (${r._tag}): ${r}`),s},xSe=e=>Ba("Unsupported key schema",void 0,void 0,e),MSe=e=>Ba("Unsupported literal",`literal value: ${po(e)}`),fP=e=>Ba("Duplicate index signature",`${e} index signature`),ASe=Ba("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),LSe=Ba("Invalid element","A required element cannot follow an optional element. ts(1257)"),hP=e=>Ba("Duplicate property signature transformation",`Duplicate key ${po(e)}`),DSe=e=>Ba("Duplicate property signature",`Duplicate key ${po(e)}`),jSe=Symbol.for("effect/annotation/SchemaId"),j4=Symbol.for("effect/annotation/Message"),B4=Symbol.for("effect/annotation/MissingMessage"),z4=Symbol.for("effect/annotation/Identifier"),Os=Symbol.for("effect/annotation/Title"),Wd=Symbol.for("effect/annotation/Description"),BSe=Symbol.for("effect/annotation/Examples"),zSe=Symbol.for("effect/annotation/Default"),USe=Symbol.for("effect/annotation/JSONSchema"),VSe=Symbol.for("effect/annotation/Arbitrary"),qSe=Symbol.for("effect/annotation/Pretty"),KSe=Symbol.for("effect/annotation/Equivalence"),HSe=Symbol.for("effect/annotation/Documentation"),U4=Symbol.for("effect/annotation/Concurrency"),V4=Symbol.for("effect/annotation/Batching"),q4=Symbol.for("effect/annotation/ParseIssueTitle"),K4=Symbol.for("effect/annotation/ParseOptions"),H4=Symbol.for("effect/annotation/DecodingFallback"),WSe=Symbol.for("effect/annotation/Surrogate"),JSe=Symbol.for("effect/annotation/StableFilter"),fr=k(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?Q(e.annotations[t]):H()),GSe=fr(j4),QSe=fr(B4),YSe=fr(Os),W4=fr(z4),XSe=fr(Wd),ZSe=fr(U4),e_e=fr(V4),t_e=fr(q4),n_e=fr(K4),r_e=fr(H4),s_e=fr(WSe),i_e=fr(JSe),o_e=e=>Ace(i_e(e),t=>t===!0),J4=Symbol.for("effect/annotation/JSONIdentifier"),a_e=fr(J4),c_e=e=>Hg(a_e(e),()=>W4(e));class m_{constructor(t,n,r,s={}){u(this,"typeParameters");u(this,"decodeUnknown");u(this,"encodeUnknown");u(this,"annotations");u(this,"_tag","Declaration");this.typeParameters=t,this.decodeUnknown=n,this.encodeUnknown=r,this.annotations=s}toString(){return Kt(cs(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(t=>t.toJSON()),annotations:Jt(this.annotations)}}}const yl=e=>t=>t._tag===e;let yw=class{constructor(t,n={}){u(this,"literal");u(this,"annotations");u(this,"_tag","Literal");this.literal=t,this.annotations=n}toString(){return Kt(cs(this),()=>po(this.literal))}toJSON(){return{_tag:this._tag,literal:AS(this.literal)?String(this.literal):this.literal,annotations:Jt(this.annotations)}}};const dP=yl("Literal");class u_e{constructor(t,n={}){u(this,"symbol");u(this,"annotations");u(this,"_tag","UniqueSymbol");this.symbol=t,this.annotations=n}toString(){return Kt(cs(this),()=>po(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:Jt(this.annotations)}}}class l_e{constructor(t={}){u(this,"annotations");u(this,"_tag","NeverKeyword");this.annotations=t}toString(){return Sl(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const G4=new l_e({[Os]:"never"});class f_e{constructor(t={}){u(this,"annotations");u(this,"_tag","UnknownKeyword");this.annotations=t}toString(){return Sl(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const Q4=new f_e({[Os]:"unknown"});class h_e{constructor(t={}){u(this,"annotations");u(this,"_tag","AnyKeyword");this.annotations=t}toString(){return Sl(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const d_e=new h_e({[Os]:"any"});class p_e{constructor(t={}){u(this,"annotations");u(this,"_tag","StringKeyword");this.annotations=t}toString(){return Sl(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const m_e=new p_e({[Os]:"string",[Wd]:"a string"}),Y4=yl("StringKeyword"),g_e=yl("NumberKeyword");class y_e{constructor(t={}){u(this,"annotations");u(this,"_tag","BooleanKeyword");this.annotations=t}toString(){return Sl(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const S_e=new y_e({[Os]:"boolean",[Wd]:"a boolean"});class __e{constructor(t={}){u(this,"annotations");u(this,"_tag","BigIntKeyword");this.annotations=t}toString(){return Sl(this)}toJSON(){return{_tag:this._tag,annotations:Jt(this.annotations)}}}const v_e=new __e({[Os]:"bigint",[Wd]:"a bigint"}),b_e=yl("SymbolKeyword");let g_=class{constructor(t,n={}){u(this,"type");u(this,"annotations");this.type=t,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:Jt(this.annotations)}}toString(){return String(this.type)}};class y_ extends g_{constructor(n,r,s={}){super(n,s);u(this,"isOptional");this.isOptional=r}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:Jt(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}const X4=e=>e.map(t=>t.type);class eO{constructor(t,n,r,s={}){u(this,"elements");u(this,"rest");u(this,"isReadonly");u(this,"annotations");u(this,"_tag","TupleType");this.elements=t,this.rest=n,this.isReadonly=r,this.annotations=s;let i=!1,o=!1;for(const a of t)if(a.isOptional)i=!0;else if(i){o=!0;break}if(o||i&&n.length>1)throw new Error(LSe)}toString(){return Kt(cs(this),()=>w_e(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(t=>t.toJSON()),rest:this.rest.map(t=>t.toJSON()),isReadonly:this.isReadonly,annotations:Jt(this.annotations)}}}const w_e=e=>{const t=e.elements.map(String).join(", ");return Bce(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(n,r)=>{const s=String(n),i=s.includes(" | ")?`(${s})`:s;if(r.length>0){const o=r.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${i}[], ${o}]`:`readonly [...${i}[], ${o}]`}else return e.elements.length>0?`readonly [${t}, ...${i}[]]`:`ReadonlyArray<${s}>`}})};class dn extends y_{constructor(n,r,s,i,o){super(r,s,o);u(this,"name");u(this,"isReadonly");this.name=n,this.isReadonly=i}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:Jt(this.annotations)}}}const Z4=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return Z4(e.from)}return!1};class S_{constructor(t,n,r){u(this,"type");u(this,"isReadonly");u(this,"parameter");if(this.type=n,this.isReadonly=r,Z4(t))this.parameter=t;else throw new Error(ASe)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class ia{constructor(t,n,r={}){u(this,"annotations");u(this,"_tag","TypeLiteral");u(this,"propertySignatures");u(this,"indexSignatures");this.annotations=r;const s={};for(let o=0;o<t.length;o++){const a=t[o].name;if(Object.prototype.hasOwnProperty.call(s,a))throw new Error(DSe(a));s[a]=null}const i={string:!1,symbol:!1};for(let o=0;o<n.length;o++){const a=rV(n[o].parameter);if(Y4(a)){if(i.string)throw new Error(fP("string"));i.string=!0}else if(b_e(a)){if(i.symbol)throw new Error(fP("symbol"));i.symbol=!0}}this.propertySignatures=t,this.indexSignatures=n}toString(){return Kt(cs(this),()=>$_e(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(t=>t.toJSON()),indexSignatures:this.indexSignatures.map(t=>t.toJSON()),annotations:Jt(this.annotations)}}}const pP=e=>e.map(String).join("; "),$_e=e=>{if(e.propertySignatures.length>0){const t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${pP(e.indexSignatures)} }`:`{ ${t} }`}else return e.indexSignatures.length>0?`{ ${pP(e.indexSignatures)} }`:"{}"},k_e=Oh(QB(ju,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),E_e={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},eV=e=>nz(e,t=>C_e(t)?eV(t.types):[t]),O_e=e=>{const t=k_e(e),n=[],r={},s=[];for(const i of t)switch(i._tag){case"NeverKeyword":break;case"AnyKeyword":return[d_e];case"UnknownKeyword":return[Q4];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{r[i._tag]||(r[i._tag]=i,n.push(i));break}case"Literal":{const o=typeof i.literal;switch(o){case"string":case"number":case"bigint":case"boolean":{const a=E_e[o];!r[a]&&!s.includes(i.literal)&&(s.push(i.literal),n.push(i));break}case"object":{s.includes(i.literal)||(s.push(i.literal),n.push(i));break}}break}case"UniqueSymbol":{!r.SymbolKeyword&&!s.includes(i.symbol)&&(s.push(i.symbol),n.push(i));break}case"TupleType":{r.ObjectKeyword||n.push(i);break}case"TypeLiteral":{i.propertySignatures.length===0&&i.indexSignatures.length===0?r["{}"]||(r["{}"]=i,n.push(i)):r.ObjectKeyword||n.push(i);break}default:n.push(i)}return n};var Us;let oa=(Us=class{constructor(t,n={}){u(this,"types");u(this,"annotations");u(this,"_tag","Union");this.types=t,this.annotations=n}toString(){return Kt(cs(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(t=>t.toJSON()),annotations:Jt(this.annotations)}}},u(Us,"make",(t,n)=>tO(t)?new Us(t,n):t.length===1?t[0]:G4),u(Us,"unify",(t,n)=>Us.make(O_e(eV(t)),n)),Us);const T_e=(e,t)=>e.map(t),tO=e=>e.length>1,C_e=yl("Union"),s1=$e(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);class nO{constructor(t,n={}){u(this,"f");u(this,"annotations");u(this,"_tag","Suspend");this.f=t,this.annotations=n,this.f=L4(t)}toString(){return cs(this).pipe(Hg(()=>zS(Cce(this.f)(),t=>cs(t))),Kt(()=>"<suspended schema>"))}toJSON(){const t=this.f();let n=s1.get(t);return n||(s1.set(t,{_tag:this._tag}),n={_tag:this._tag,ast:t.toJSON(),annotations:Jt(this.annotations)},s1.set(t,n),n)}}let R_e=class{constructor(t,n,r={}){u(this,"from");u(this,"filter");u(this,"annotations");u(this,"_tag","Refinement");this.from=t,this.filter=n,this.annotations=r}toString(){return Kt(cs(this),()=>`{ ${this.from} | filter }`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:Jt(this.annotations)}}};const I_e=yl("Refinement"),i1={};let tV=class{constructor(t,n,r,s={}){u(this,"from");u(this,"to");u(this,"transformation");u(this,"annotations");u(this,"_tag","Transformation");this.from=t,this.to=n,this.transformation=r,this.annotations=s}toString(){return Kt(cs(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:Jt(this.annotations)}}};class P_e{constructor(t,n){u(this,"decode");u(this,"encode");u(this,"_tag","FinalTransformation");this.decode=t,this.encode=n}}class F_e{constructor(t,n,r,s){u(this,"from");u(this,"to");u(this,"decode");u(this,"encode");this.from=t,this.to=n,this.decode=r,this.encode=s}}class N_e{constructor(t){u(this,"propertySignatureTransformations");u(this,"_tag","TypeLiteralTransformation");this.propertySignatureTransformations=t;const n={},r={};for(const s of t){const i=s.from;if(n[i])throw new Error(hP(i));n[i]=!0;const o=s.to;if(r[o])throw new Error(hP(o));r[o]=!0}}}const nV=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e);return n.annotations.value={...e.annotations,...t},Object.create(Object.getPrototypeOf(e),n)},x_e=".*",M_e="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",A_e=e=>{let t=`^${tw(e.head)}`;for(const n of e.spans)Y4(n.type)?t+=x_e:g_e(n.type)&&(t+=M_e),t+=tw(n.literal);return t+="$",new RegExp(t)},mP=(e,t)=>{const n=[],r=[],s=i=>{switch(i._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":r.push(new S_(i,t,!0));break;case"Literal":if(mi(i.literal)||ro(i.literal))n.push(new dn(i.literal,t,!1,!0));else throw new Error(MSe(i.literal));break;case"Enums":{for(const[o,a]of i.enums)n.push(new dn(a,t,!1,!0));break}case"UniqueSymbol":n.push(new dn(i.symbol,t,!1,!0));break;case"Union":i.types.forEach(s);break;default:throw new Error(xSe(i))}};return s(e),{propertySignatures:n,indexSignatures:r}},Dt=e=>{switch(e._tag){case"Declaration":{const t=br(e.typeParameters,Dt);return t===e.typeParameters?e:new m_(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const t=br(e.elements,s=>{const i=Dt(s.type);return i===s.type?s:new y_(i,s.isOptional)}),n=X4(e.rest),r=br(n,Dt);return t===e.elements&&r===n?e:new eO(t,r.map(s=>new g_(s)),e.isReadonly,e.annotations)}case"TypeLiteral":{const t=br(e.propertySignatures,r=>{const s=Dt(r.type);return s===r.type?r:new dn(r.name,s,r.isOptional,r.isReadonly)}),n=br(e.indexSignatures,r=>{const s=Dt(r.type);return s===r.type?r:new S_(r.parameter,s,r.isReadonly)});return t===e.propertySignatures&&n===e.indexSignatures?e:new ia(t,n,e.annotations)}case"Union":{const t=br(e.types,Dt);return t===e.types?e:oa.make(t,e.annotations)}case"Suspend":return new nO(()=>Dt(e.f()),e.annotations);case"Refinement":{const t=Dt(e.from);return t===e.from?e:new R_e(t,e.filter,e.annotations)}case"Transformation":return Dt(e.to)}return e},Ap=e=>Mr(c_e(e),{onNone:()=>{},onSome:t=>({[J4]:t})});function br(e,t){let n=!1;const r=US(e.length);for(let s=0;s<e.length;s++){const i=e[s],o=t(i);o!==i&&(n=!0),r[s]=o}return n?r:e}const ds=(e,t)=>{switch(e._tag){case"Declaration":{const n=br(e.typeParameters,r=>ds(r));return n===e.typeParameters?e:new m_(n,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const n=br(e.elements,i=>{const o=ds(i.type);return o===i.type?i:new y_(o,i.isOptional)}),r=X4(e.rest),s=br(r,i=>ds(i));return n===e.elements&&s===r?e:new eO(n,s.map(i=>new g_(i)),e.isReadonly,Ap(e))}case"TypeLiteral":{const n=br(e.propertySignatures,s=>{const i=ds(s.type);return i===s.type?s:new dn(s.name,i,s.isOptional,s.isReadonly)}),r=br(e.indexSignatures,s=>{const i=ds(s.type);return i===s.type?s:new S_(s.parameter,i,s.isReadonly)});return n===e.propertySignatures&&r===e.indexSignatures?e:new ia(n,r,Ap(e))}case"Union":{const n=br(e.types,r=>ds(r));return n===e.types?e:oa.make(n,Ap(e))}case"Suspend":return new nO(()=>ds(e.f()),Ap(e));case"Refinement":return ds(e.from);case"Transformation":return ds(e.from)}return e},gP=e=>ds(e),Jt=e=>{const t={};for(const n of Object.getOwnPropertySymbols(e))t[String(n)]=e[n];return t},rV=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return rV(e.from)}},Sl=e=>Kt(cs(e),()=>e._tag),cs=e=>W4(e).pipe(Hg(()=>YSe(e)),Hg(()=>XSe(e)));class ln{constructor(t,n,r){u(this,"path");u(this,"actual");u(this,"issue");u(this,"_tag","Pointer");this.path=t,this.actual=n,this.issue=r}}class yP{constructor(t,n){u(this,"actual");u(this,"message");u(this,"_tag","Unexpected");this.actual=t,this.message=n}}class Wl{constructor(t,n){u(this,"ast");u(this,"message");u(this,"_tag","Missing");u(this,"actual");this.ast=t,this.message=n}}class at{constructor(t,n,r,s){u(this,"ast");u(this,"actual");u(this,"issues");u(this,"output");u(this,"_tag","Composite");this.ast=t,this.actual=n,this.issues=r,this.output=s}}class o1{constructor(t,n,r,s){u(this,"ast");u(this,"actual");u(this,"kind");u(this,"issue");u(this,"_tag","Refinement");this.ast=t,this.actual=n,this.kind=r,this.issue=s}}class a1{constructor(t,n,r,s){u(this,"ast");u(this,"actual");u(this,"kind");u(this,"issue");u(this,"_tag","Transformation");this.ast=t,this.actual=n,this.kind=r,this.issue=s}}class ys{constructor(t,n,r){u(this,"ast");u(this,"actual");u(this,"message");u(this,"_tag","Type");this.ast=t,this.actual=n,this.message=r}}class L_e{constructor(t,n,r){u(this,"ast");u(this,"actual");u(this,"message");u(this,"_tag","Forbidden");this.ast=t,this.actual=n,this.message=r}}const SP=Symbol.for("effect/Schema/ParseErrorTypeId");var CN;class D_e extends xpe("ParseError"){constructor(){super(...arguments);u(this,CN,SP)}get message(){return this.toString()}toString(){return Fm.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[(CN=SP,it)](){return this.toJSON()}}const j_e=e=>new D_e({issue:e}),Mh=ht,rO=fe,B_e=vce,Lp=k(2,(e,t)=>{const n=e;return n._tag==="Left"?n:n._tag==="Right"?t(n.right):Qn(e,t)}),z_e=k(2,(e,t)=>{const n=e;return n._tag==="Left"?n:n._tag==="Right"?ht(t(n.right)):qr(e,t)}),c1=k(2,(e,t)=>{const n=e;return n._tag==="Left"?fe(t(n.left)):n._tag==="Right"?n:CSe(e,t)}),xs=e=>{const t=e;if(t._tag==="Left"||t._tag==="Right")return t},U_e=k(2,(e,t)=>{const n=e;return n._tag==="Left"?fe(t.onFailure(n.left)):n._tag==="Right"?ht(t.onSuccess(n.right)):TSe(e,t)}),sV=k(2,(e,t)=>{const n=e;return n._tag==="Left"?t(n.left):n._tag==="Right"?n:ZE(e,t)}),sO=(e,t)=>t===void 0||ro(t)?e:e===void 0?t:{...e,...t},V_e=(e,t,n)=>{const r=Gt(e,t);return(s,i)=>r(s,sO(n,i))},q_e=(e,t,n)=>{const r=V_e(e,t,n);return(s,i)=>$ce(r(s,i),j_e)},iV=(e,t,n)=>{const r=Gt(e,t);return(s,i)=>r(s,{...sO(n,i),isEffectAllowed:!0})},oV=(e,t)=>iV(e.ast,!0,t),aV=(e,t)=>iV(e.ast,!1,t),K_e=(e,t)=>q_e(Dt(e.ast),!0,t),H_e=$e(Symbol.for("effect/Schema/Parser/decodeMemoMap"),()=>new WeakMap),W_e=$e(Symbol.for("effect/Schema/Parser/encodeMemoMap"),()=>new WeakMap),Gt=(e,t)=>{const n=t?H_e:W_e,r=n.get(e);if(r)return r;const s=J_e(e,t),i=n_e(e),o=Ge(i)?(l,f)=>s(l,sO(f,i.value)):s,a=r_e(e),c=t&&Ge(a)?(l,f)=>uf(sV(o(l,f),a.value),e,l,f):o;return n.set(e,c),c},u1=e=>js(ZSe(e)),l1=e=>js(e_e(e)),J_e=(e,t)=>{switch(e._tag){case"Refinement":if(t){const n=Gt(e.from,!0);return(r,s)=>{s=s??i1;const i=(s==null?void 0:s.errors)==="all",o=Lp(sV(n(r,s),a=>{const c=new o1(e,r,"From",a);return i&&o_e(e)?Mr(e.filter(r,s,e),{onNone:()=>fe(c),onSome:l=>fe(new at(e,r,[c,new o1(e,r,"Predicate",l)]))}):fe(c)}),a=>Mr(e.filter(a,s,e),{onNone:()=>ht(a),onSome:c=>fe(new o1(e,r,"Predicate",c))}));return uf(o,e,r,s)}}else{const n=Gt(Dt(e),!0),r=Gt(cV(e.from),!1);return(s,i)=>uf(Lp(n(s,i),o=>r(o,i)),e,s,i)}case"Transformation":{const n=Y_e(e.transformation,t),r=t?Gt(e.from,!0):Gt(e.to,!1),s=t?Gt(e.to,!0):Gt(e.from,!1);return(i,o)=>uf(Lp(c1(r(i,o),a=>new a1(e,i,t?"Encoded":"Type",a)),a=>Lp(c1(n(a,o??i1,e,i),c=>new a1(e,i,"Transformation",c)),c=>c1(s(c,o),l=>new a1(e,i,t?"Type":"Encoded",l)))),e,i,o)}case"Declaration":{const n=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(r,s)=>uf(n(r,s??i1,e),e,r,s)}case"Literal":return Hn(e,n=>n===e.literal);case"UniqueSymbol":return Hn(e,n=>n===e.symbol);case"UndefinedKeyword":return Hn(e,Lae);case"NeverKeyword":return Hn(e,Dae);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return ht;case"StringKeyword":return Hn(e,mi);case"NumberKeyword":return Hn(e,ro);case"BooleanKeyword":return Hn(e,tE);case"BigIntKeyword":return Hn(e,AS);case"SymbolKeyword":return Hn(e,Fb);case"ObjectKeyword":return Hn(e,wo);case"Enums":return Hn(e,n=>e.enums.some(([r,s])=>s===n));case"TemplateLiteral":{const n=A_e(e);return Hn(e,r=>mi(r)&&n.test(r))}case"TupleType":{const n=e.elements.map(l=>Gt(l.type,t)),r=e.rest.map(l=>Gt(l.type,t));let s=e.elements.filter(l=>!l.isOptional);e.rest.length>0&&(s=s.concat(e.rest.slice(1)));const i=s.length,o=e.elements.length>0?e.elements.map((l,f)=>f).join(" | "):"never",a=u1(e),c=l1(e);return(l,f)=>{if(!xb(l))return fe(new ys(e,l));const h=(f==null?void 0:f.errors)==="all",d=[];let p=0;const _=[],b=l.length;for(let y=b;y<=i-1;y++){const $=new ln(y,l,new Wl(s[y-b]));if(h){d.push([p++,$]);continue}else return fe(new at(e,l,$,_))}if(e.rest.length===0)for(let y=e.elements.length;y<=b-1;y++){const $=new ln(y,l,new yP(l[y],`is unexpected, expected: ${o}`));if(h){d.push([p++,$]);continue}else return fe(new at(e,l,$,_))}let w=0,m;for(;w<n.length;w++)if(b<w+1){if(e.elements[w].isOptional)continue}else{const y=n[w],$=y(l[w],f),T=xs($);if(T){if(hn(T)){const C=new ln(w,l,T.left);if(h){d.push([p++,C]);continue}else return fe(new at(e,l,C,jr(_)))}_.push([p++,T.right])}else{const C=p++,E=w;m||(m=[]),m.push(({es:O,output:A})=>Qn(Mo($),I=>{if(hn(I)){const M=new ln(E,l,I.left);return h?(O.push([C,M]),hr):fe(new at(e,l,M,jr(A)))}return A.push([C,I.right]),hr}))}}if(Ht(r)){const[y,...$]=r;for(;w<b-$.length;w++){const T=y(l[w],f),C=xs(T);if(C)if(hn(C)){const E=new ln(w,l,C.left);if(h){d.push([p++,E]);continue}else return fe(new at(e,l,E,jr(_)))}else _.push([p++,C.right]);else{const E=p++,O=w;m||(m=[]),m.push(({es:A,output:I})=>Qn(Mo(T),M=>{if(hn(M)){const U=new ln(O,l,M.left);return h?(A.push([E,U]),hr):fe(new at(e,l,U,jr(I)))}else return I.push([E,M.right]),hr}))}}for(let T=0;T<$.length;T++)if(w+=T,!(b<w+1)){const C=$[T](l[w],f),E=xs(C);if(E){if(hn(E)){const O=new ln(w,l,E.left);if(h){d.push([p++,O]);continue}else return fe(new at(e,l,O,jr(_)))}_.push([p++,E.right])}else{const O=p++,A=w;m||(m=[]),m.push(({es:I,output:M})=>Qn(Mo(C),U=>{if(hn(U)){const X=new ln(A,l,U.left);return h?(I.push([O,X]),hr):fe(new at(e,l,X,jr(M)))}return M.push([O,U.right]),hr}))}}}const g=({es:y,output:$})=>$m(y)?fe(new at(e,l,jr(y),jr($))):ht(jr($));if(m&&m.length>0){const y=m;return Mp(()=>{const $={es:af(d),output:af(_)};return Qn(Pm(y,T=>T($),{concurrency:a,batching:c,discard:!0}),()=>g($))})}return g({output:_,es:d})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return Hn(e,jae);const n=[],r={},s=[];for(const f of e.propertySignatures)n.push([Gt(f.type,t),f]),r[f.name]=null,s.push(f.name);const i=e.indexSignatures.map(f=>[Gt(f.parameter,t),Gt(f.type,t),f.parameter]),o=oa.make(e.indexSignatures.map(f=>f.parameter).concat(s.map(f=>Fb(f)?new u_e(f):new yw(f)))),a=Gt(o,t),c=u1(e),l=l1(e);return(f,h)=>{if(!Uae(f))return fe(new ys(e,f));const d=(h==null?void 0:h.errors)==="all",p=[];let _=0;const b=(h==null?void 0:h.onExcessProperty)==="error",w=(h==null?void 0:h.onExcessProperty)==="preserve",m={};let g;if(b||w){g=Uc(f);for(const C of g){const E=xs(a(C,h));if(hn(E))if(b){const O=new ln(C,f,new yP(f[C],`is unexpected, expected: ${String(o)}`));if(d){p.push([_++,O]);continue}else return fe(new at(e,f,O,m))}else m[C]=f[C]}}let y;const $=(h==null?void 0:h.exact)===!0;for(let C=0;C<n.length;C++){const E=n[C][1],O=E.name,A=Object.prototype.hasOwnProperty.call(f,O);if(!A){if(E.isOptional)continue;if($){const X=new ln(O,f,new Wl(E));if(d){p.push([_++,X]);continue}else return fe(new at(e,f,X,m))}}const I=n[C][0],M=I(f[O],h),U=xs(M);if(U){if(hn(U)){const X=new ln(O,f,A?U.left:new Wl(E));if(d){p.push([_++,X]);continue}else return fe(new at(e,f,X,m))}m[O]=U.right}else{const X=_++,ve=O;y||(y=[]),y.push(({es:De,output:ye})=>Qn(Mo(M),Z=>{if(hn(Z)){const x=new ln(ve,f,A?Z.left:new Wl(E));return d?(De.push([X,x]),hr):fe(new at(e,f,x,ye))}return ye[ve]=Z.right,hr}))}}for(let C=0;C<i.length;C++){const E=i[C],O=E[0],A=E[1],I=A4(f,E[2]);for(const M of I){const U=xs(O(M,h));if(U&&ji(U)){const X=A(f[M],h),ve=xs(X);if(ve)if(hn(ve)){const De=new ln(M,f,ve.left);if(d){p.push([_++,De]);continue}else return fe(new at(e,f,De,m))}else Object.prototype.hasOwnProperty.call(r,M)||(m[M]=ve.right);else{const De=_++,ye=M;y||(y=[]),y.push(({es:Z,output:x})=>Qn(Mo(X),V=>{if(hn(V)){const K=new ln(ye,f,V.left);return d?(Z.push([De,K]),hr):fe(new at(e,f,K,x))}else return Object.prototype.hasOwnProperty.call(r,M)||(x[M]=V.right),hr}))}}}}const T=({es:C,output:E})=>{if($m(C))return fe(new at(e,f,jr(C),E));if((h==null?void 0:h.propertyOrder)==="original"){const O=g||Uc(f);for(const I of s)O.indexOf(I)===-1&&O.push(I);const A={};for(const I of O)Object.prototype.hasOwnProperty.call(E,I)&&(A[I]=E[I]);return ht(A)}return ht(E)};if(y&&y.length>0){const C=y;return Mp(()=>{const E={es:af(p),output:Object.assign({},m)};return Qn(Pm(C,O=>O(E),{concurrency:c,batching:l,discard:!0}),()=>T(E))})}return T({es:p,output:m})}}case"Union":{const n=G_e(e.types,t),r=Uc(n.keys),s=r.length,i=new Map;for(let c=0;c<e.types.length;c++)i.set(e.types[c],Gt(e.types[c],t));const o=u1(e)??1,a=l1(e);return(c,l)=>{const f=[];let h=0,d=[];if(s>0)if(nE(c))for(let b=0;b<s;b++){const w=r[b],m=n.keys[w].buckets;if(Object.prototype.hasOwnProperty.call(c,w)){const g=String(c[w]);if(Object.prototype.hasOwnProperty.call(m,g))d=d.concat(m[g]);else{const y=oa.make(n.keys[w].literals);f.push([h++,new at(new ia([new dn(w,y,!1,!0)],[]),c,new ln(w,c,new ys(y,c[w])))])}}else{const g=oa.make(n.keys[w].literals),y=new dn(w,g,!1,!0);f.push([h++,new at(new ia([y],[]),c,new ln(w,c,new Wl(y)))])}}else f.push([h++,new ys(e,c)]);n.otherwise.length>0&&(d=d.concat(n.otherwise));let p;for(let b=0;b<d.length;b++){const w=d[b],m=i.get(w)(c,l),g=!p||p.length===0?xs(m):void 0;if(g){if(ji(g))return g;f.push([h++,g.left])}else{const y=h++;p||(p=[]),p.push($=>Mp(()=>"finalResult"in $?hr:Qn(Mo(m),T=>(ji(T)?$.finalResult=T:$.es.push([y,T.left]),hr))))}}const _=b=>$m(b)?b.length===1&&b[0][1]._tag==="Type"?fe(b[0][1]):fe(new at(e,c,jr(b))):fe(new ys(e,c));if(p&&p.length>0){const b=p;return Mp(()=>{const w={es:af(f)};return Qn(Pm(b,m=>m(w),{concurrency:o,batching:a,discard:!0}),()=>"finalResult"in w?w.finalResult:_(w.es))})}return _(f)}}case"Suspend":{const n=L4(()=>Gt(nV(e.f(),e.annotations),t));return(r,s)=>n()(r,s)}}},Hn=(e,t)=>n=>t(n)?ht(n):fe(new ys(e,n)),cf=(e,t)=>{switch(e._tag){case"Declaration":{const n=s_e(e);if(Ge(n))return cf(n.value,t);break}case"TypeLiteral":{const n=[];for(let r=0;r<e.propertySignatures.length;r++){const s=e.propertySignatures[r],i=t?gP(s.type):Dt(s.type);dP(i)&&!s.isOptional&&n.push([s.name,i])}return n}case"TupleType":{const n=[];for(let r=0;r<e.elements.length;r++){const s=e.elements[r],i=t?gP(s.type):Dt(s.type);dP(i)&&!s.isOptional&&n.push([r,i])}return n}case"Refinement":return cf(e.from,t);case"Suspend":return cf(e.f(),t);case"Transformation":return cf(t?e.from:e.to,t)}return[]},G_e=(e,t)=>{const n={},r=[];for(let s=0;s<e.length;s++){const i=e[s],o=cf(i,t);if(o.length>0)for(let a=0;a<o.length;a++){const[c,l]=o[a],f=String(l.literal);n[c]=n[c]||{buckets:{},literals:[]};const h=n[c].buckets;if(Object.prototype.hasOwnProperty.call(h,f)){if(a<o.length-1)continue;h[f].push(i),n[c].literals.push(l)}else{h[f]=[i],n[c].literals.push(l);break}}else r.push(i)}return{keys:n,otherwise:r}},cV=e=>I_e(e)?cV(e.from):e,uf=(e,t,n,r)=>{const s=xs(e);if(s)return s;if((r==null?void 0:r.isEffectAllowed)===!0)return e;try{return M4(Mo(e))}catch{return fe(new L_e(t,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}},Q_e=([e],[t])=>e>t?1:e<t?-1:0;function jr(e){return e.sort(Q_e).map(t=>t[1])}const Y_e=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return ht;case"TypeLiteralTransformation":return n=>{let r=ht(n);for(const s of e.propertySignatureTransformations){const[i,o]=t?[s.from,s.to]:[s.to,s.from],a=t?s.decode:s.encode;r=z_e(r,l=>{const f=a(Object.prototype.hasOwnProperty.call(l,i)?Q(l[i]):H());return delete l[i],Ge(f)&&(l[o]=f.value),l})}return r}}},Jn=(e,t=[])=>({value:e,forest:t}),Fm={formatIssue:e=>qr(ic(e),X_e),formatIssueSync:e=>M4(Fm.formatIssue(e)),formatError:e=>Fm.formatIssue(e.issue),formatErrorSync:e=>Fm.formatIssueSync(e.issue)},X_e=e=>e.value+uV(`
`,e.forest),uV=(e,t)=>{let n="";const r=t.length;let s;for(let i=0;i<r;i++){s=t[i];const o=i===r-1;n+=e+(o?"":"")+" "+s.value,n+=uV(e+(r>1&&!o?"  ":"   "),s.forest)}return n},Z_e=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},eve=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},lV=e=>"ast"in e?Q(e.ast):H(),tve=e=>lV(e).pipe(zS(GSe),Qn(t=>{const n=t(e);return mi(n)?Si({message:n,override:!1}):OSe(n)?qr(n,r=>({message:r,override:!1})):mi(n.message)?Si({message:n.message,override:n.override}):qr(n.message,r=>({message:r,override:n.override}))})),iO=e=>t=>t._tag===e,nve=iO("Composite"),_P=iO("Refinement"),vP=iO("Transformation"),oO=e=>tve(e).pipe(Qn(t=>!t.override&&(nve(e)||_P(e)&&e.kind==="From"||vP(e)&&e.kind!=="Transformation")?vP(e)||_P(e)?oO(e.issue):H():Si(t.message))),fV=e=>lV(e).pipe(zS(t_e),Pce(t=>BS(t(e)))),rve=e=>oO(e).pipe(ISe(()=>fV(e)),ZE(()=>Si(e.message??`Expected ${String(e.ast)}, actual ${po(e.actual)}`))),Dp=e=>Kt(fV(e),()=>String(e.ast)),sve=e=>e.message??"is forbidden",ive=e=>e.message??"is unexpected",ove=e=>QSe(e.ast).pipe(Qn(t=>{const n=t();return mi(n)?Si(n):n}),ZE(()=>Si(e.message??"is missing"))),f1=(e,t)=>RSe(oO(e),{onFailure:t,onSuccess:n=>Si(Jn(n))}),ic=e=>{switch(e._tag){case"Type":return qr(rve(e),Jn);case"Forbidden":return Si(Jn(Dp(e),[Jn(sve(e))]));case"Unexpected":return Si(Jn(ive(e)));case"Missing":return qr(ove(e),Jn);case"Transformation":return f1(e,()=>qr(ic(e.issue),t=>Jn(Dp(e),[Jn(Z_e(e.kind),[t])])));case"Refinement":return f1(e,()=>qr(ic(e.issue),t=>Jn(Dp(e),[Jn(eve(e.kind),[t])])));case"Pointer":return qr(ic(e.issue),t=>Jn(NSe(e.path),[t]));case"Composite":{const t=Dp(e);return f1(e,()=>D4(e.issues)?qr(Pm(e.issues,ic),n=>Jn(t,n)):qr(ic(e.issues),n=>Jn(t,[n])))}}},ave=k(e=>wo(e[0]),(e,...t)=>{const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}),cve=k(e=>wo(e[0]),(e,...t)=>{const n={...e};for(const r of t)delete n[r];return n}),fy=Symbol.for("effect/Schema"),rn=e=>{var t,n,r;return n=fy,t=fy,r=class{constructor(){u(this,n,bP)}static annotations(i){return rn($o(this.ast,i))}static pipe(){return ne(this,arguments)}static toString(){return String(e)}},u(r,"Type"),u(r,"Encoded"),u(r,"Context"),u(r,t,bP),u(r,"ast",e),r},bP={_A:e=>e,_I:e=>e,_R:e=>e},wP={schemaId:jSe,message:j4,missingMessage:B4,identifier:z4,title:Os,description:Wd,examples:BSe,default:zSe,documentation:HSe,jsonSchema:USe,arbitrary:VSe,pretty:qSe,equivalence:KSe,concurrency:U4,batching:V4,parseIssueTitle:q4,parseOptions:K4,decodingFallback:H4},aO=e=>{if(!e)return{};const t={...e};for(const n in wP)if(n in e){const r=wP[n];t[r]=e[n],delete t[n]}return t},$o=(e,t)=>nV(e,aO(t)),Sw=e=>e,Ah=e=>String(e.ast),_w=e=>rn(Dt(e.ast)),Bu=e=>le(e,fy)&&wo(e[fy]),uve=e=>tO(e)?oa.make(T_e(e,t=>new yw(t))):new yw(e[0]),hV=(e,t=uve(e))=>{var n;return n=class extends rn(t){static annotations(s){return hV(this.literals,$o(this.ast,s))}},u(n,"literals",[...e]),n};function za(...e){return Ht(e)?hV(e):pV}const lve=(e,t,n)=>rn(new m_(e.map(r=>r.ast),(...r)=>t.decode(...r.map(rn)),(...r)=>t.encode(...r.map(rn)),aO(n))),fve=(e,t)=>{const n=()=>(s,i,o)=>e(s)?Mh(s):rO(new ys(o,s)),r=n;return rn(new m_([],n,r,aO(t)))},dV=function(){if(Array.isArray(arguments[0])){const n=arguments[0],r=arguments[1],s=arguments[2];return lve(n,r,s)}const e=arguments[0],t=arguments[1];return fve(e,t)};class pV extends rn(G4){}class mV extends rn(Q4){}class hve extends rn(v_e){}class Xr extends rn(m_e){}class gV extends rn(S_e){}const dve=e=>oa.make(e.map(t=>t.ast)),yV=(e,t=dve(e))=>{var n;return n=class extends rn(t){static annotations(s){return yV(this.members,$o(this.ast,s))}},u(n,"members",[...e]),n};function cO(...e){return tO(e)?yV(e):Ht(e)?e[0]:pV}const pve=(e,t)=>new eO(e.map(n=>Bu(n)?new y_(n.ast,!1):n.ast),t.map(n=>Bu(n)?new g_(n.ast):n.ast),!0),hy=(e,t,n=pve(e,t))=>{var r;return r=class extends rn(n){static annotations(i){return hy(this.elements,this.rest,$o(this.ast,i))}},u(r,"elements",[...e]),u(r,"rest",[...t]),r};function vw(...e){return Array.isArray(e[0])?hy(e[0],e.slice(1)):hy(e,[])}const SV=(e,t)=>{var n;return n=class extends hy([],[e],t){static annotations(s){return SV(this.value,$o(this.ast,s))}},u(n,"value",e),n},bw=e=>SV(e),mve=Symbol.for("effect/PropertySignature"),_V=e=>le(e,mve),gve=(e,t)=>{const n=Uc(e),r=[];if(n.length>0){const i=[],o=[],a=[];for(let c=0;c<n.length;c++){const l=n[c],f=e[l];if(_V(f)){const h=f.ast;switch(h._tag){case"PropertySignatureDeclaration":{const d=h.type,p=h.isOptional,_=h.annotations;i.push(new dn(l,d,p,!0)),o.push(new dn(l,Dt(d),p,!0,_)),r.push(new dn(l,d,p,!0,_));break}case"PropertySignatureTransformation":{const d=h.from.fromKey??l;i.push(new dn(d,h.from.type,h.from.isOptional,!0,h.from.annotations)),o.push(new dn(l,h.to.type,h.to.isOptional,!0,h.to.annotations)),a.push(new F_e(d,l,h.decode,h.encode));break}}}else i.push(new dn(l,f.ast,!1,!0)),o.push(new dn(l,Dt(f.ast),!1,!0)),r.push(new dn(l,f.ast,!1,!0))}if(Ht(a)){const c=[],l=[];for(const f of t){const{indexSignatures:h,propertySignatures:d}=mP(f.key.ast,f.value.ast);d.forEach(p=>{i.push(p),o.push(new dn(p.name,Dt(p.type),p.isOptional,p.isReadonly,p.annotations))}),h.forEach(p=>{c.push(p),l.push(new S_(p.parameter,Dt(p.type),p.isReadonly))})}return new tV(new ia(i,c,{[Os]:"Struct (Encoded side)"}),new ia(o,l,{[Os]:"Struct (Type side)"}),new N_e(a))}}const s=[];for(const i of t){const{indexSignatures:o,propertySignatures:a}=mP(i.key.ast,i.value.ast);a.forEach(c=>r.push(c)),o.forEach(c=>s.push(c))}return new ia(r,s)},yve=(e,t)=>{const n=Uc(e);for(const r of n){const s=e[r];if(t[r]===void 0&&_V(s)){const i=s.ast,o=i._tag==="PropertySignatureDeclaration"?i.defaultValue:i.to.defaultValue;o!==void 0&&(t[r]=o())}}return t},uO=(e,t,n=gve(e,t))=>{var r;return r=class extends rn(n){static annotations(i){return uO(this.fields,this.records,$o(this.ast,i))}static pick(...i){return _i(ave(e,...i))}static omit(...i){return _i(cve(e,...i))}},u(r,"fields",{...e}),u(r,"records",[...t]),u(r,"make",(i,o)=>{const a=yve(e,{...i});return Mve(o)?a:K_e(r)(a)}),r};function _i(e,...t){return uO(e,t)}const vV=(e,t,n)=>{var r;return r=class extends uO({},[{key:e,value:t}],n){static annotations(i){return vV(e,t,$o(this.ast,i))}},u(r,"key",e),u(r,"value",t),r},Sve=e=>vV(e.key,e.value),_ve=e=>rn(new nO(()=>e().ast)),bV=(e,t,n)=>{var r;return r=class extends rn(n){static annotations(i){return bV(this.from,this.to,$o(this.ast,i))}},u(r,"from",e),u(r,"to",t),r},wV=k(e=>Bu(e[0])&&Bu(e[1]),(e,t,n)=>bV(e,t,new tV(e.ast,t.ast,new P_e(n.decode,n.encode)))),$V=k(e=>Bu(e[0])&&Bu(e[1]),(e,t,n)=>wV(e,t,{strict:!0,decode:(r,s,i,o)=>Mh(n.decode(r,o)),encode:(r,s,i,o)=>Mh(n.encode(r,o))}));class dy extends wV(Xr.annotations({description:"a string that will be parsed into a bigint"}),hve,{strict:!0,decode:(t,n,r)=>B_e(rue(t),()=>new ys(r,t)),encode:t=>Mh(String(t))}).annotations({identifier:"bigint"}){}const kV=(e,t,n,r)=>U_e(e,{onFailure:s=>new at(n,r,s),onSuccess:t}),vve=_i({_tag:za("None")}).annotations({description:"NoneEncoded"}),bve=e=>_i({_tag:za("Some"),value:e}).annotations({description:`SomeEncoded<${Ah(e)}>`}),wve=e=>cO(vve,bve(e)).annotations({description:`OptionEncoded<${Ah(e)}>`}),EV=e=>e._tag==="None"?H():Q(e.value),$ve=(e,t)=>n=>n.oneof(t,n.record({_tag:n.constant("None")}),n.record({_tag:n.constant("Some"),value:e(n)})).map(EV),kve=e=>Mr({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),$P=e=>(t,n,r)=>Oce(t)?Ue(t)?Mh(H()):kV(e(t.value,n),Q,r,t):rO(new ys(r,t)),Eve=e=>dV([e],{decode:t=>$P(oV(t)),encode:t=>$P(aV(t))},{description:`Option<${Ah(e)}>`,pretty:kve,arbitrary:$ve,equivalence:Fce}),Ove={_tag:"None"},Tve=e=>({_tag:"Some",value:e}),Cve=e=>{const t=Sw(e);return $V(wve(t),Eve(_w(t)),{strict:!0,decode:EV,encode:Mr({onNone:()=>Ove,onSome:Tve})})},Rve=(e,t,n)=>r=>{const s=r.array(r.tuple(e(r),t(r)));return(n.depthIdentifier!==void 0?r.oneof(n,r.constant([]),s):s).map(i=>new Map(i))},Ive=(e,t)=>n=>`new Map([${Array.from(n.entries()).map(([r,s])=>`[${e(r)}, ${t(s)}]`).join(", ")}])`,Pve=(e,t)=>{const n=VS(bu(([r,s],[i,o])=>e(r,i)&&t(s,o)));return bu((r,s)=>n(Array.from(r.entries()),Array.from(s.entries())))},kP=e=>(t,n,r)=>Aae(t)?kV(e(Array.from(t.entries()),n),s=>new Map(s),r,t):rO(new ys(r,t)),Fve=(e,t,n)=>dV([e,t],{decode:(r,s)=>kP(oV(bw(vw(r,s)))),encode:(r,s)=>kP(aV(bw(vw(r,s))))},{description:n,pretty:Ive,arbitrary:Rve,equivalence:Pve}),Nve=({key:e,value:t})=>Fve(e,t,`ReadonlyMap<${Ah(e)}, ${Ah(t)}>`),xve=({key:e,value:t})=>{const n=Sw(e),r=Sw(t);return $V(bw(vw(n,r)),Nve({key:_w(n),value:_w(r)}),{strict:!0,decode:s=>new Map(s),encode:s=>Array.from(s.entries())})},Mve=e=>tE(e)?e:(e==null?void 0:e.disableValidation)??!1,Ave=_i({_tag:za("Started"),startTime:dy}),Lve=_i({_tag:za("Ended"),startTime:dy,endTime:dy}),Dve=cO(Ave,Lve),jve=_i({_tag:za("ExternalSpan"),spanId:Xr,traceId:Xr,sampled:gV}),OV=_i({_tag:za("Span"),spanId:Xr,traceId:Xr,name:Xr,sampled:gV,attributes:xve({key:Xr,value:mV}),status:Dve,parent:Cve(_ve(()=>zve))}),Bve=_i({_tag:za("SpanEvent"),traceId:Xr,spanId:Xr,name:Xr,startTime:dy,attributes:Sve({key:Xr,value:mV})}),zve=cO(OV,jve);class Uve extends Rae()("Booted",{}){}const Vve=Sae(Uve,OV,Bve),qve=Koe(Vve),Kve={_tag:"Booted"};class Hve extends Fne()("VscodeWebview",{accessors:!0,scoped:dm(function*(){const t=acquireVsCodeApi(),n=yield*ka(Die(),s=>s.shutdown);t.postMessage(Kve);const r=s=>{n.unsafeOffer(qve(s.data))};return yield*ka(kt(()=>{window.addEventListener("message",r)}),()=>kt(()=>{window.removeEventListener("message",r)})),yield*n.take.pipe(k3(Iae),$ne,Cf),{api:t,messages:jie(n)}})}){}const Wve=Tie(Hve.Default);function Jve(){return Vie(Wve),h1.jsx(KK,{onClick:()=>console.log("boom"),children:"Click me"})}zM(document.getElementById("root")).render(h1.jsx(xa.StrictMode,{children:h1.jsx(Jve,{})}));
